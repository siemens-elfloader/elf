<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta http-equiv="Content-Type"
 content="text/html; charset=windows-1251">
  <style type="text/css">
<!--
a:link { text-decoration: none }
a:visited { text-decoration: none }
a:active { text-decoration: none }
-->
  </style>
</head>
<body>
<br>
<div align="center"><b><big>X65flasher - флешер для
телефонов Siemens (Benq-Siemens) на платформе SGold</big></b><br>
</div>
<br>
<br>
<u><b>Возможности</b></u><br>
<ul>
  <li>работа с телефоном через <a href="#skey">SKEY</a>, <a
 href="#bootkey">BOOTKEY</a> или <a href="#testpoint">тестпоинт</a></li>
  <li>чтение и запись <a href="#flash">flash-памяти</a> телефона</li>
  <li>бэкап и восстановление как всего <a href="#fullflash">fullflash</a>,
так и отдельных частей (<a href="#ffs">файловой системы</a>, <a
 href="#firmware">прошивки</a>, <a href="#eeprom">EEPROM</a>)</li>
  <li>быстрое восстановление: восстанавливаются только изменённые блоки</li>
  <li>вычисление кодов телефона (SKEY и BOOTKEY) с помощью мидлета или <a
 href="#testpoint">тестпоинта</a></li>
  <li>ввод SKEY в телефон и удаление его</li>
  <li>просмотр карты flash-памяти, вывод изменений по сравнению с
бэкапом</li>
  <li>работа на скорости от 57600 до 1600000 бит/с</li>
  <li>генерация <a href="#bootloader">лоадеров</a> для V_Klay</li>
  <li>возможность работы с образом fullflash вместо реального телефона</li>
  <li>дополнительные функции: форматирование FFS, изменение названия
модели телефона<br>
  </li>
</ul>
<br>
<u><b><a name="models"></a>Поддерживаемые модели</b></u><br>
<ul>
  <li>Siemens&nbsp;
C65, CX65, M65, CX70, C72, C75, CX75, CF75, M75, ME75, S65, SL65, S75,
SL75, SK65, SP65</li>
  <li>Benq-Siemens<font color="#ff0000">*</font>&nbsp; S68, C81, M81<br>
  </li>
  <li>Benq-Siemens<font color="#ff0000">**</font> E71, EL71
  </li>
</ul>
<div align="justify">
<blockquote><i>Возможно, это неполный список. Если ваш телефон на
платформе SGold,
скорее всего, флешер с ним работать будет. Телефоны на платформе Benq
не
поддерживаются, и их поддержка не планируется. С телефонами младших
серий
(45,55,60) и А-серии работают такие программы,
как Freia и V_Klay. Если у вас новая модель телефона и вы не знаете, на
какой он платформе,
посмотрите на его клавиатуру - в SGold-телефонах пробел расположен на
кнопке 1 (хотя это, конечно, не
100% признак).<br>
  <br>
  <font color="#ff0000">* Поскольку за два месяца ни один человек так и
не откликнулся на мою просьбу дать на тестирование какой-нибудь из этих
телефонов, их поддержка реализована в программе, но не проверена. Если
у вас один из этих телефонов, а флешер или мидлет с ним не работает -
сорри, ничем не могу помочь...<br>
** На E71, а также EL71 с прошивкой 37 и старше изменен алгоритм
расчета ключей, поэтому работа с этими телефонами пока возможна только
через тестпоинт.<br>
  </font> </i></blockquote>
</div>
<br>
<u><b><a name="cable"></a>Выбор кабеля</b></u><br>
<blockquote>
  <div align="justify">Флешер может работать с телефоном только через
COM-кабель или
USB-кабель с USB-to-COM конвертером. В стандартной поставке идёт кабель
DCA-540 - это чистый USB-кабель, с ним ничего не выйдет. Большинство
китайских USB-кабелей работают
без проблем. Простейшая
проверка - кабель должен определяться компьютером, даже если телефон к
нему не подключен.
Также о наличии USB-to-COM конвертера говорит небольшая коробочка
посередине. В случае
COM-кабеля, питание должно подаваться от COM-порта (визуально
определить это
невозможно). <br>
Из оригинальных кабелей с телефоном работают DCA-510, DCA-512, не
работают DCA-500, DCA-540.<br>
  </div>
  <i>Работа с флешером через IRDA или bluetooth невозможна.</i><br>
</blockquote>
<br>
<u><b>Немного об используемых терминах</b></u><br>
<div align="justify">
<blockquote><b><i><a name="flash"></a>Флеш (Flash)</i></b> - микросхема
энергонезависимой памяти телефона. В ней хранятся
прошивка, начальный загрузчик, настройки телефона, файловая система.<br>
  <br>
  <i><b><a name="fullflash"></a>Фулфлеш (Fullflash)</b></i> - полная
копия информации флеш-памяти. В зависимости от
модели телефона имеет размер 32, 64 или 96 мбайт. Имея бэкап fullflash,
всегда можно
восстановить телефон после неудачных патчей или сбоев при прошивке.
Поэтому бэкап
fullflash - это первое, что вы должны сделать перед тем, как что-то
менять в
телефоне.<br>
  <br>
  <b><i><a name="bootcore"></a>Буткор (Bootcore)</i></b> - загрузчик,
наиболее критичная часть flash. Если буткор
испорчен, для восстановления телефона потребуется разбирать телефон и
замыкать тестпоинт.
Именно
поэтому по умолчанию запись в буткор запрещена; обойти это ограничение
можно, запустив флешер с ключом /B.<br>
  <br>
  <i><b><a name="firmware"></a>Firmware</b></i> - программное
обеспечение (прошивка) телефона.<br>
  <br>
  <i><b><a name="eeprom"></a>EEPROM</b></i> - здесь хранятся
индивидуальные настройки телефона (IMEI, ключ
загрузки, настройки GSM/GPRS, нестройки аккумулятора...) Состоит из
двух частей - EEFULL и EELITE. Терять свой "родной" EEPROM крайне
нежелательно, хотя
его и можно частично восстановить с помощью программы PapuaUtils.<br>
  <br>
  <i><b><a name="ffs"></a>FFS</b></i> - файловаа система телефона,
доступная через MPM и другие
программы. Состоит из 3-х дисков: 0: - пользовательская FFS, 1: - кэш,
2:
- системная FFS.
Диски 1: и 2: видны только при введённом SKEY.<br>
  <br>
  <i><b><a name="bootloader"></a>Бутлоадер (Bootloader)</b></i> -
небольшая
программа, загружаемая флешером в телефон при
коротком нажатии на красную кнопку. В ней реализованы функции
чтения/записи
флеш-памяти. Для
загрузки бутлоадера необходим либо BOOTKEY этого телефона, либо в
телефон должен быть
введён SKEY.<br>
  <br>
  <i><b><a name="skey"></a>SKEY</b></i> - сервисный ключ телефона,
8-значное число. После ввода SKEY, в
телефон&nbsp; можно загружать свои лоадеры; также открывается Developer
menu, доступ
к дискам 1: и 2:, доступ к защищённым блокам EEPROM.<br>
  <br>
  <i><b><a name="bootkey"></a>BOOTKEY </b></i>- загрузочный ключ,
используется для загрузки произвольного
бутлоадера в телефон. В отличие от SKEY, не хранится в телефоне, а
посылается с
бутлоадером.<br>
  <br>
  <i><b><a name="hash"></a>HASH </b></i>- 16-байтное число, уникальное
для каждого телефона. Используется
для проверки ключей. Записан в буткоре.<br>
  <br>
  <i><b><a name="esn"></a>ESN </b></i>- уникальный серийный номер
телефона. Хранится в однократно
программируемой области микросхемы флеш-памяти, изменить его невозможно.<br>
  <br>
  <i><b><a name="testpoint"></a>Тестпоинт (Testpoint)</b></i> - точка
на печатной плате телефона. Закоротив её на землю, мы
сможем загрузить свой бутлоадер, не зная ключей. Естественно, для этого
потребуется разобрать телефон, что лишает вас гарантии (хотя, если всё
делать аккуратно...)<br>
</blockquote>
</div>
<br>
<b><u><a name="howto"></a>Расчет ключей</u></b><br>
<blockquote>Для того, чтобы флешер "увидел" телефон, вам необходимо
узнать <a href="#skey">SKEY</a> или <a href="#bootkey">BOOTKEY</a>.
Для этого есть 3 способа:<br>
  <br>
  <div align="justify">1. Вычисление ключей с помощью мидлета bsReader
или px75v1.<br>
Скопируйте папку bsReader в папку Applications телефона (для S75/SL75 и
Benq-Siemens) или px75v1 в Java\Jam\Applications (для младших моделей),
затем
через меню "Приложения" запустите мидлет. Через 5-15 минут мидлет
должен выдать
коды <a href="#hash">HASH</a> и <a href="#esn">ESN</a>.<br>
Запустите флешер, выберите в меню "Коды" -&gt; "Расчёт SKEY и BOOTKEY",
введите описание телефона, HASH и ESN. Генерация ключа длится обычно до
10 минут.
Одновременно будет сгенерирован и лоадер для V_Klay, скопируйте его в
&lt;каталог_VKlay&gt;\data\loaders.<br>
При желании, вы можете ввести рассчитанный SKEY в телефон ("Коды" -&gt;
"Ввести SKEY").<br>
  </div>
  <br>
  <div align="justify"><i>О мидлетах bsReader и px75v1: они используют
ошибку в java, благодаря которой
возможно прямое чтение памяти телефона. Мидлет не всегда
стабильно работает, иногда зависает,
иногда выдаёт Exception, иногда выключает телефон. Если у вас с
первого раза не получилось,
пробуйте ещё. Рано или поздно ошибку в java исправят. Поэтому,
если у вас мидлет стабильно
выдаёт один и тот же Exception, скорее всего, это и случилось.
Не засыпайте меня письмами с
вопросом "а когда появится новая версия?" В свете последних
событий с Benq-Siemens -
скорее всего никогда. Используйте методы 2 и 3.</i><br>
  </div>
  <br>
2. <a href="#skey">SKEY</a> можно купить, где именно - ищите в
интернете. Если вам
известен SKEY вашего телефона, выберите "Коды" -&gt; "Ввести SKEY".
После ввода ключа
флешер работает с телефоном без каких-либо дополнительных действий.<br>
  <br>
  <div align="justify">3. Если узнать <a href="#skey">SKEY</a> вы не
можете, а мидлет по
каким-либо причинам не
работает, единственный вариант - <a href="#testpoint">тестпоинт</a>.
Фотографии тестпоинтов
для разных моделей есть на <a href="http://allsiemens.com/testpoints">http://allsiemens.com/testpoints</a>
Тестпоинт нужно закорачивать на землю через резистор 10-50 ом. Можно
использовать просто какой-нибудь металлический предмет, но тогда нужно
работать очень
аккуратно, т.к. случайное замыкание не того контакта на плате может
вывести телефон из строя. В флешере нужно выбрать вариант загрузки
"Тестпоинт", далее нажать
"Подключение", закоротить тестпоинт, после чего нажать красную кнопку,
и в течение 3-х секунд
отключить тестпоинт. После чего можно выбирать "Коды" -&gt; "Расчёт
SKEY и BOOTKEY"
(значения HASH и ESN уже считаны из телефона).<br>
  <b><u><br>
  </u></b></div>
</blockquote>
<div align="justify"><b><u>Работа с флешером</u></b><br>
</div>
<blockquote>
  <div align="justify">
  <table border="1" cellpadding="5" cellspacing="2" width="100%">
    <tbody>
      <tr>
        <td valign="top"><font color="#ff0000"><b>ПЕРЕД ЛЮБЫМИ
ИЗМЕНЕНИЯМИ
ФЛЕША ОБЯЗАТЕЛЬНО СДЕЛАЙТЕ ПОЛНЫЙ БЭКАП!!!</b></font><br>
        <font color="#ff0000"><b>ВСЕ ИЗМЕНЕНИЯ В ФЛЕШЕ ПРОИЗВОДИТЕ ПРИ
ПОЛНОСТЬЮ ЗАРЯЖЕННОМ АККУМУЛЯТОРЕ.</b></font></td>
      </tr>
    </tbody>
  </table>
  <font color="#ff0000"><b></b></font><br>
Для подключения к телефону нужно указать COM-порт, скорость порта,
выбрать бут-ключ вашего телефона. Для COM-порта со стандартными
драйверами максимальная скорость - 115200 кбит/с, на некоторых
материнках можно получить более высокие скорости (подробнее в <a
 href="http://forum.siemens-club.org/viewtopic.php?TopicID=29234">этой</a>
теме). Для USB-кабеля доступны скорости до 1600000; реально
максимальная скорость зависит от качества кабеля, нужно проверять
опытным путём.<br>
В списке бут-ключей нужно выбрать ключ, <a href="#howto">посчитанный</a>
для вашего телефона. Если в телефон введён <a href="#skey">SKEY</a>,
флешер будет работать с любым бут-ключом.<br>
Если вместо COM-порта выбрать "Файл", флешер предложит открыть файл <a
 href="#fullflash">фулфлеша</a>, с которым будет работать, как с
телефоном (иногда это может быть полезно).<br>
  <br>
  <b><i>Бэкап:</i></b> сохранение образа <a href="#flash">флеш-памяти</a>
или её части в файл с расширением fbk. Флешер спросит, что именно вы
хотите забэкапить - весь флеш, <a href="#bootcore">буткор</a>, <a
 href="#firmware">прошивку</a>, <a href="#ffs">файловую систему</a>
или <a href="#eeprom">EEPROM</a>. Вам не нужно рассчитывать адрес и
длину участка памяти, флешер всё делает автоматически.<br>
  <br>
  <i><b>Восстановление:</b></i> запись сохранённого образа из&nbsp;
fbk-файла обратно в флеш. В случае полного бэкапа, вы можете
восстановить не весь фулфлеш, а только его часть (например, файловую
систему). Восстановить буткор можно, только если флешер запущен с
ключом&nbsp; /B.<br>
По умолчанию, флешер восстанавливает только изменившиеся блоки, что
значительно ускоряет восстановление в случае небольших изменений.
Флешер проверяет, изменился блок или нет, сравнивая контрольную сумму
(CRC32) блока в телефоне и на диске. Теоретически есть вероятность
(1/4000000000), что у разных блоков совпадёт контрольная сумма.&nbsp;
На этот случай есть опция "Восстанавливать неизменившиеся блоки".<br>
  <br>
  <i><b>Карта памяти:</b></i> просмотр в графическом виде расположения
блоков в памяти. Также можно сравнить текущее состояние телефона с
бэкапом, флешер пометит на карте изменившиеся блоки.<br>
  <br>
  <i><b>Форматирование ФС:</b></i> по этой команде форматируется диск
0: телефона. После форматирования нужно включить телефон и подождать
несколько минут - происходит инициализация файловой системы.<br>
  <br>
  <i><b>Изменить модель телефона:</b></i> эта опция нужна в том случае,
если вы хотите залить в телефон прошивку от другой модели. О том, какую
прошивку в какой телефон можно залить, читайте на <a
 href="http://forum.siemens-club.org">форуме</a>. Пользоваться этой
опцией следует осторожно, т.к. при этом изменяется <a href="#bootcore">bootcore</a>.<br>
  <br>
  <i><b>Запись флеш, чтение флеш:</b></i> низкоуровневая работа с
флеш-памятью. Здесь вы сами должны указать адрес и длину участка
памяти. Нужно помнить, что флеш-память разбита на блоки определённой
длины (64к, 128к, 256к; этот размер зависит от типа микросхемы памяти и
не всегда совпадает с размером блока, показываемого в карте памяти).
При записи адрес и длина участка должны быть кратны размеру блока, при
чтении можно указывать любой адрес и длину.<br>
  </div>
  <br>
</blockquote>
<b><u>Опции командной строки</u></b><br>
<blockquote><b>/L</b> - показать лог компорта<br>
  <b>/B</b> - разрешить запись в bootcore (пользоваться с
осторожностью!)<br>
  <br>
</blockquote>
<u><b>
Возможные проблемы при работе с программой и их решение:</b></u><br>
<div align="justify">
<blockquote>1. Флешер вообще не отзываетсяна нажатие красной кнопки -
проверьте
номер компорта (в случае USB-кабеля этот номер может меняться); выбрана
слишком высокая скорость (попробуйте на стандартной 115200); ваш
телефон <a href="#models">не поддерживается</a> флешером; у вас
неподходящий <a href="#cable">кабель</a>.<br>
  <br>
2. После нажатия красной кнопки возникает ошибка "Нет ответа от лоадера
(ключ не принят)". Если это новый телефон, для него нужно вычислить
бут-ключ (как это
делается, описано <a href="#howto">выше</a>). Если ключ уже был
сгенерирован, он будет в списке.<br>
  <br>
3. При запуске выдаётся сообщение "Не могу прочитать информацию о
телефоне" - скорее всего, это новая модель или модификация телефона,
неизвестная флешеру.<br>
  <br>
4. При работе с флешером связь обрывается с сообщением "Lost connection
to mobile" - проверьте, чтоб аккумулятор был полностью заряжен; вторая
возможная причина - проблемный кабель (может возникать с кабелями
неизвестных китайских производителей).<br>
  <br>
5. При чтении очень много ошибок (faults) - понизьте скорость обмена.
Небольшое количество ошибок (4-5) вполне допустимо, если же их больше
20, правильность слитого бекапа не гарантирована, а уж заливать что-то
в этом случае - боже упаси...<br>
  <br>
6. При попытка записи выдаётся сообщение типа "Area begins not on flash
block bound" - запись в флеш возможна только блоками определённого
размера. Размер блока может быть 64к (10000), 128к (20000) или 256к
(40000). Адрес и длина должны быть кратными размеру блока. Т.е. в
случае размера
блока 128к правильный адрес будет например A07E0000, но не A07F0000.<br>
  <br>
8. При записи выдаётся сообщение "Unknown flash type ХХХХ" - у вас
неизвестный флешеру тип микросхемы флеш-памяти. Сообщите об этом автору
(пришлите также лог работы программы, запустив x65flasher с ключом /L).<br>
  <br>
9. После форматирования файловой системы телефон не подаёт признаков
жизни - всё нормально, просто подождите 3-4 минуты.<br>
  <br>
10. Вы что-то сделали не так, или во время прошивки пропал свет, или...
в общем, телефон умер и ни на что не реагирует - сначала попробуйте
просто восстановиться из бэкапа (вы ведь его сделали, так?) Если не
получается даже соединиться с телефоном, возможно, разрядился
аккумулятор - попробуйте с другим. Если соединиться так и не удалось
(убит буткор), приготовьтесь разбирать телефон и закорачивать
тестпоинт. Если у вас нет бэкапа, вернуть телефон к жизни поможет
только программа PapuaUtils (<a href="http://papuas.allsiemens.com">http://papuas.allsiemens.com</a>).
  <br>
</blockquote>
</div>
<div align="justify"><br>
<blockquote><b>ПРОГРАММА РАСПРОСТРАНЯЕТСЯ "КАК ЕСТЬ", АВТОР НЕ НЕСЕТ
ОТВЕТСТВЕННОСТИ ЗА ВОЗМОЖНЫЙ УЩЕРБ, ПРИЧИНЕННЫЙ В РЕЗУЛЬТАТЕ
ИСПОЛЬЗОВАНИЯ ЭТОЙ ПРОГРАММЫ. ВЫ НЕ МОЖЕТЕ ИСПОЛЬЗОВАТЬ ЭТУ
ПРОГРАММУ ИЛИ ЕЕ ЧАСТЬ В КОММЕРЧЕСКИХ
ЦЕЛЯХ БЕЗ РАЗРЕШЕНИЯ АВТОРА.</b><br>
</blockquote>
</div>
<br>
<hr size="2" width="100%"><br>
<div align="center"><small>(с) 2004-2006 by Chaos<br>
Boot password generator (c) by Papuas<br>
thanks to SiNgle, ACiD[mrp], LazyC0DEr, Phantom</small><br>
</div>
<br>
</body>
</html>
