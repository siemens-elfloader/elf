##############################################################################
#                                                                            #
# IAR ARM ANSI C/C++ Compiler V4.42A/W32 EVALUATION    27/Dec/2010  18:21:21 #
# Copyright 1999-2005 IAR Systems. All rights reserved.                      #
#                                                                            #
#    Cpu mode        =  interwork                                            #
#    Endian          =  little                                               #
#    Stack alignment =  4                                                    #
#    Source file     =  C:\arm\BalletMini\main.c                             #
#    Command line    =  C:\arm\BalletMini\main.c -D NEWSGOLD -D ELKA -lC     #
#                       C:\arm\BalletMini\Release_ELKA\List\ -o              #
#                       C:\arm\BalletMini\Release_ELKA\Obj\ -s9 --no_unroll  #
#                       --no_inline --cpu_mode arm --endian little --cpu     #
#                       ARM926EJ-S --stack_align 4 --interwork -e --fpu      #
#                       None --dlib_config "C:\arm2\Embedded Workbench 4.0   #
#                       Evaluation\ARM\LIB\dl5tpainl8n.h" -I                 #
#                       "C:\arm2\Embedded Workbench 4.0 Evaluation\ARM\INC\" #
#    List file       =  C:\arm\BalletMini\Release_ELKA\List\main.lst         #
#    Object file     =  C:\arm\BalletMini\Release_ELKA\Obj\main.r79          #
#                                                                            #
#                                                                            #
##############################################################################

C:\arm\BalletMini\main.c
      1          #include "../inc/swilib.h"
      2          #include "view.h"
      3          #include "parse_oms.h"
      4          #include "main.h" 
      5          #include "rect_patcher.h"

   \                                 In segment CODE, align 4, keep-with-next
   \   __??Code32?? __code __interwork __atpcs void patch_rect(RECT *, int, int, int, int)
   \                     patch_rect:
   \   00000000   00C09DE5           LDR      R12,[SP, #+0]
   \   00000004   B010C0E1           STRH     R1,[R0, #+0]
   \   00000008   B220C0E1           STRH     R2,[R0, #+2]
   \   0000000C   B430C0E1           STRH     R3,[R0, #+4]
   \   00000010   B6C0C0E1           STRH     R12,[R0, #+6]
   \   00000014   1EFF2FE1           BX       LR               ;; return
      6          #include "local_ipc.h"
      7          #include "display_utils.h"
      8          #include "string_works.h"
      9          #include "destructors.h"
     10          #include "siemens_unicode.h"
     11          #include "inet.h"
     12          #include "urlstack.h"
     13          #include "conf_loader.h"
     14          #include "mainmenu.h"
     15          #include "history.h"
     16          #include "file_works.h"
     17          #include "lang.h"
     18          #include "../inc/sieget_ipc.h"
     19          #include "url_utils.h"
     20          #include "upload.h"
     21          #include "fileman.h"
     22          #include "../inc/xtask_ipc.h"
     23          
     24          char xtask_ipc_name[]= IPC_XTASK_NAME;
     25          
     26          extern const char DEFAULT_PARAM[128];
     27          extern const int authcode_create_new;
     28          
     29          void UpdateCSMname(char* url, int mode);
     30          extern int mrand(void);
     31          extern int mrandom(int);
     32          extern void msrand(unsigned seed);
     33          
     34          static int ParseInputFilename(const char *fn);
     35          
     36          volatile int TERMINATED=0;
     37          volatile int STOPPED=0;
     38          

   \                                 In segment DATA_Z, align 4, align-sorted
     39          int ENABLE_REDRAW=0;
   \                     ENABLE_REDRAW:
   \   00000000                      DS8 4
     40          

   \                                 In segment DATA_C, align 4, align-sorted
     41          const int scr_shift = 0;
   \                     scr_shift:
   \   00000000   00000000           DC32 0
     42          
     43          IPC_REQ Xipc;
     44          
     45          extern void kill_data(void *p, void (*func_p)(void *));
     46          

   \                                 In segment DATA_C, align 4, align-sorted
     47          const int minus11=-11;
   \                     minus11:
   \   00000000   F5FFFFFF           DC32 -11
     48          

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "$urlcache\\\\$date$time.url">`:
   \   00000000   2475726C6361       DC8 "$urlcache\\$date$time.url"
   \              6368655C2464
   \              617465247469
   \              6D652E75726C
   \              00          
   \   00000019   000000             DC8 0, 0, 0
   \   0000001C   302F6A617661       DC8 "0/javascript"
   \              736372697074
   \              00          
   \   00000029   000000             DC8 0, 0, 0
   \   0000002C   302F6F703A66       DC8 "0/op:fileselect"
   \              696C6573656C
   \              65637400    
   \   0000003C   2475726C6361       DC8 "$urlcache\\$date$time.urss"
   \              6368655C2464
   \              617465247469
   \              6D652E757273
   \              7300        
   \   00000056   0000               DC8 0, 0
     49          const char ipc_my_name[32]=IPC_BALLETMINI_NAME;
   \                     ipc_my_name:
   \   00000058   42616C6C6574       DC8 "BalletMini"
   \              4D696E6900  
   \   00000063   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              000000000000
   \              000000      
     50          const char sieget_ipc_name[32] = SIEGET_IPC_NAME;
   \                     sieget_ipc_name:
   \   00000078   536965476574       DC8 "SieGetD"
   \              4400        
   \   00000080   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000090   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0
   \              0000        
     51          
     52          IPC_REQ sieget_ipc;
     53          
     54          int view_url_mode;
     55          char *view_url;
     56          char *goto_url;
     57          char *from_url;
     58          char *goto_params;
     59          
     60          WSHDR *ws_console;
     61          
     62          WSHDR *search_string;
     63          int search_isCaseSens;
     64          
     65          WSHDR *search_inet_string;
     66          
     67          int maincsm_id;
     68          
     69          char BALLET_PATH[256];
     70          char BALLET_EXE[256];
     71          

   \                                 In segment CODE, align 4, keep-with-next
     72          static void StartGetFile(int dummy, char *fncache)
     73          {
   \                     StartGetFile:
   \   00000000   F24F2DE9           PUSH     {R1,R4-R11,LR}
   \   00000004   ........           LDR      R4,??DataTable0  ;; Xipc
   \   00000008   04D04DE2           SUB      SP,SP,#+4
   \   0000000C   40DE4DE2           SUB      SP,SP,#+1024
   \   00000010   200094E5           LDR      R0,[R4, #+32]
   \   00000014   000050E3           CMP      R0,#+0
   \   00000018   6900001A           BNE      ??StartGetFile_0
     74            IPC_REQ *sipc;
     75            if (view_url_mode==MODE_FILE)
     76            {
     77              unsigned int err;
     78              char buf[1024];
     79              int i;
     80              int f=fopen(view_url,A_ReadOnly+A_BIN,P_READ,&err);
   \   0000001C   240094E5           LDR      R0,[R4, #+36]
   \   00000020   ........           LDR      R7,??DataTable1  ;; `?<Constant "$urlcache\\\\$date$time.url">`
   \   00000024   0D30A0E1           MOV      R3,SP
   \   00000028   8020A0E3           MOV      R2,#+128
   \   0000002C   801CA0E3           MOV      R1,#+32768
   \   00000030   0A0000EF           SWI      +10
   \   00000034   0050A0E1           MOV      R5,R0
   \   00000038   B060A0E3           MOV      R6,#+176
   \   0000003C   DE6C86E3           ORR      R6,R6,#0xDE00
   \   00000040   0080E0E3           MVN      R8,#+0
   \   00000044   080055E1           CMP      R5,R8
   \   00000048   4400000A           BEQ      ??StartGetFile_1
     81              if (f!=-1)
     82              {
     83                int fc=-1;
     84                if (fncache)
   \   0000004C   04049DE5           LDR      R0,[SP, #+1028]
   \   00000050   0890A0E1           MOV      R9,R8
   \   00000054   000050E3           CMP      R0,#+0
   \   00000058   0600000A           BEQ      ??StartGetFile_2
     85                {
     86                  fc=fopen(fncache,A_ReadWrite+A_Create+A_Truncate+A_BIN,P_READ+P_WRITE,&err);
   \   0000005C   0D30A0E1           MOV      R3,SP
   \   00000060   602FA0E3           MOV      R2,#+384
   \   00000064   0210A0E3           MOV      R1,#+2
   \   00000068   831C81E3           ORR      R1,R1,#0x8300
   \   0000006C   0A0000EF           SWI      +10
   \   00000070   0090A0E1           MOV      R9,R0
   \   00000074   000000EA           B        ??StartGetFile_3
     87                }
     88                else
     89                {
     90                  UpPageStack(); 
   \                     ??StartGetFile_2:
   \   00000078   ........           _BLF     UpPageStack,??UpPageStack??rA
     91                }
     92                while((i=fread(f,buf,sizeof(buf),&err))>0)
   \                     ??StartGetFile_3:
   \   0000007C   0D30A0E1           MOV      R3,SP
   \   00000080   402EA0E3           MOV      R2,#+1024
   \   00000084   04108DE2           ADD      R1,SP,#+4
   \   00000088   0500A0E1           MOV      R0,R5
   \   0000008C   0B0000EF           SWI      +11
   \   00000090   00A0A0E1           MOV      R10,R0
   \   00000094   01005AE3           CMP      R10,#+1
   \   00000098   270000BA           BLT      ??StartGetFile_4
     93                {
     94                  if (fc!=-1)
   \   0000009C   080059E1           CMP      R9,R8
   \   000000A0   0400000A           BEQ      ??StartGetFile_5
     95                  {
     96                    fwrite(fc,buf,i,&err);
   \   000000A4   0D30A0E1           MOV      R3,SP
   \   000000A8   0A20A0E1           MOV      R2,R10
   \   000000AC   04108DE2           ADD      R1,SP,#+4
   \   000000B0   0900A0E1           MOV      R0,R9
   \   000000B4   0C0000EF           SWI      +12
     97                  }
     98                  LockSched();
   \                     ??StartGetFile_5:
   \   000000B8   460100EF           SWI      +326
     99                  if ((!TERMINATED)&&(!STOPPED))
   \   000000BC   180094E5           LDR      R0,[R4, #+24]
   \   000000C0   000050E3           CMP      R0,#+0
   \   000000C4   1C009405           LDREQ    R0,[R4, #+28]
   \   000000C8   00005003           CMPEQ    R0,#+0
   \   000000CC   1400001A           BNE      ??StartGetFile_6
    100                  {
    101                    sipc=malloc(sizeof(IPC_REQ));
   \   000000D0   0C00A0E3           MOV      R0,#+12
   \   000000D4   140000EF           SWI      +20
   \   000000D8   00B0A0E1           MOV      R11,R0
    102                    sipc->name_to=ipc_my_name;
   \   000000DC   580087E2           ADD      R0,R7,#+88
   \   000000E0   00008BE5           STR      R0,[R11, #+0]
    103                    sipc->name_from=ipc_my_name;
   \   000000E4   04008BE5           STR      R0,[R11, #+4]
    104                    sipc->data=malloc(i+4);
   \   000000E8   04008AE2           ADD      R0,R10,#+4
   \   000000EC   140000EF           SWI      +20
   \   000000F0   08008BE5           STR      R0,[R11, #+8]
    105                    *((int *)(sipc->data))=i;
   \   000000F4   00A080E5           STR      R10,[R0, #+0]
    106                    memcpy(((char *)(sipc->data))+4,buf,i);
   \   000000F8   08009BE5           LDR      R0,[R11, #+8]
   \   000000FC   0A20A0E1           MOV      R2,R10
   \   00000100   04108DE2           ADD      R1,SP,#+4
   \   00000104   040080E2           ADD      R0,R0,#+4
   \   00000108   1E0100EF           SWI      +286
    107                    GBS_SendMessage(MMI_CEPID,MSG_IPC,IPC_DATA_ARRIVED,sipc);
   \   0000010C   0B30A0E1           MOV      R3,R11
   \   00000110   0120A0E3           MOV      R2,#+1
   \   00000114   0610A0E1           MOV      R1,R6
   \   00000118   0900A0E3           MOV      R0,#+9
   \   0000011C   420C80E3           ORR      R0,R0,#0x4200
   \   00000120   000100EF           SWI      +256
    108                  }
    109                  UnlockSched();
   \                     ??StartGetFile_6:
   \   00000124   470100EF           SWI      +327
    110                  if (TERMINATED||STOPPED) break;
   \   00000128   180094E5           LDR      R0,[R4, #+24]
   \   0000012C   000050E3           CMP      R0,#+0
   \   00000130   1C009405           LDREQ    R0,[R4, #+28]
   \   00000134   00005003           CMPEQ    R0,#+0
   \   00000138   CFFFFF0A           BEQ      ??StartGetFile_3
    111                }
    112                if (fc!=-1) fclose(fc,&err);
   \                     ??StartGetFile_4:
   \   0000013C   080059E1           CMP      R9,R8
   \   00000140   0200000A           BEQ      ??StartGetFile_7
   \   00000144   0D10A0E1           MOV      R1,SP
   \   00000148   0900A0E1           MOV      R0,R9
   \   0000014C   0D0000EF           SWI      +13
    113                fclose(f,&err);
   \                     ??StartGetFile_7:
   \   00000150   0D10A0E1           MOV      R1,SP
   \   00000154   0500A0E1           MOV      R0,R5
   \   00000158   0D0000EF           SWI      +13
   \   0000015C   060000EA           B        ??StartGetFile_8
    114              }
    115              else
    116              {
    117                UpPageStack();
   \                     ??StartGetFile_1:
   \   00000160   ........           _BLF     UpPageStack,??UpPageStack??rA
    118                LockSched();
   \   00000164   460100EF           SWI      +326
    119                ShowMSG(1,(int)lgpData[LGP_CantOpenFile]);
   \   00000168   ........           LDR      R0,??DataTable2  ;; lgpData
   \   0000016C   001090E5           LDR      R1,[R0, #+0]
   \   00000170   0100A0E3           MOV      R0,#+1
   \   00000174   480100EF           SWI      +328
    120                UnlockSched();
   \   00000178   470100EF           SWI      +327
    121              }
    122              mfree(fncache);
   \                     ??StartGetFile_8:
   \   0000017C   04049DE5           LDR      R0,[SP, #+1028]
   \   00000180   150000EF           SWI      +21
    123              STOPPED=1;
   \   00000184   0100A0E3           MOV      R0,#+1
   \   00000188   1C0084E5           STR      R0,[R4, #+28]
    124              SmartREDRAW();
   \   0000018C   ........           _BLF     SmartREDRAW,??SmartREDRAW??rA
    125              sipc=malloc(sizeof(IPC_REQ));
   \   00000190   0C00A0E3           MOV      R0,#+12
   \   00000194   140000EF           SWI      +20
    126              sipc->name_to=ipc_my_name;
   \   00000198   581087E2           ADD      R1,R7,#+88
   \   0000019C   001080E5           STR      R1,[R0, #+0]
    127              sipc->name_from=ipc_my_name;
   \   000001A0   041080E5           STR      R1,[R0, #+4]
    128              sipc->data=NULL;
   \   000001A4   0010A0E3           MOV      R1,#+0
   \   000001A8   081080E5           STR      R1,[R0, #+8]
    129              GBS_SendMessage(MMI_CEPID,MSG_IPC,IPC_DATA_END,sipc);
   \   000001AC   0030A0E1           MOV      R3,R0
   \   000001B0   0420A0E3           MOV      R2,#+4
   \   000001B4   0610A0E1           MOV      R1,R6
   \   000001B8   0900A0E3           MOV      R0,#+9
   \   000001BC   420C80E3           ORR      R0,R0,#0x4200
   \   000001C0   000100EF           SWI      +256
    130            }
    131            if (view_url_mode==MODE_URL)
   \                     ??StartGetFile_0:
   \   000001C4   200094E5           LDR      R0,[R4, #+32]
   \   000001C8   010050E3           CMP      R0,#+1
   \   000001CC   0200001A           BNE      ??StartGetFile_9
    132            {
    133              StartINET(view_url,fncache);
   \   000001D0   04149DE5           LDR      R1,[SP, #+1028]
   \   000001D4   240094E5           LDR      R0,[R4, #+36]
   \   000001D8   ........           _BLF     StartINET,??StartINET??rA
    134            }
    135            if (view_url_mode==MODE_BOOKMARKS)
   \                     ??StartGetFile_9:
   \   000001DC   200094E5           LDR      R0,[R4, #+32]
   \   000001E0   020050E3           CMP      R0,#+2
   \   000001E4   0700001A           BNE      ??StartGetFile_10
    136            {
    137              MAIN_CSM *main_csm=(MAIN_CSM *)FindCSMbyID(maincsm_id);
   \   000001E8   440094E5           LDR      R0,[R4, #+68]
   \   000001EC   080100EF           SWI      +264
   \   000001F0   0050B0E1           MOVS     R5,R0
    138              if (main_csm)
   \   000001F4   0300000A           BEQ      ??StartGetFile_10
    139              {
    140                STOPPED=1;
   \   000001F8   0100A0E3           MOV      R0,#+1
   \   000001FC   1C0084E5           STR      R0,[R4, #+28]
    141                main_csm->sel_bmk=CreateBookmarksMenu();
   \   00000200   ........           _BLF     CreateBookmarksMenu,??CreateBookmarksMenu??rA
   \   00000204   300085E5           STR      R0,[R5, #+48]
    142              }
    143            }
    144            if (view_url_mode==MODE_NONE)
    145            {
    146          //    MAIN_CSM *main_csm=(MAIN_CSM *)FindCSMbyID(maincsm_id);
    147          //    if (main_csm)
    148          //    {
    149          //      VIEW_GUI *p=FindGUIbyId(main_csm->view_id,NULL);
    150          //      VIEWDATA *vd=p->vd;
    151          //      *((unsigned short *)(&(vd->current_tag_d)))=(unsigned short)0x813A;
    152          //      *((unsigned int *)(&(vd->current_tag_s)))=(unsigned int)0x0D15F000;
    153          //      AddNewStyle(vd);
    154          //      AddTextItem(vd, "Begin OMS Hacking . . .\nNOW\n!!!\n\n",33);
    155          //      AddBeginRef(vd);
    156          //      RawInsertChar(vd,AddPictureItemFile(vd, "0:\\ZBin\\NatICQ\\smiles\\1405.png"));
    157          //      AddEndRef(vd);
    158          //      RawInsertChar(vd,AddPictureItemFile(vd, "0:\\ZBin\\NatICQ\\smiles\\1406.png"));
    159          //      AddBeginRef(vd);
    160          //      AddEndRef(vd);
    161          //      RawInsertChar(vd,AddPictureItemFile(vd, "0:\\ZBin\\NatICQ\\smiles\\1407.png"));
    162          //      AddBeginRef(vd);
    163          //      AddEndRef(vd);
    164          //      RawInsertChar(vd,AddPictureItemFile(vd, "0:\\ZBin\\NatICQ\\smiles\\1408.png"));
    165          //      AddBeginRef(vd);
    166          //      AddEndRef(vd);
    167          //      RawInsertChar(vd,AddPictureItemFile(vd, "0:\\ZBin\\NatICQ\\smiles\\1409.png"));
    168          //      RawInsertChar(vd,AddPictureItemFile(vd, "0:\\ZBin\\NatICQ\\smiles\\1410.png"));
    169          //      RawInsertChar(vd,AddPictureItemFile(vd, "0:\\ZBin\\NatICQ\\smiles\\1411.png"));
    170          //      AddBrItem(vd);
    171          //      AddPageEndItem(vd);
    172          //      SmartREDRAW();
    173          //    }
    174            }
    175          }
   \                     ??StartGetFile_10:
   \   00000208   08D08DE2           ADD      SP,SP,#+8
   \   0000020C   40DE8DE2           ADD      SP,SP,#+1024
   \   00000210   F08FBDE8           POP      {R4-R11,PC}      ;; return
    176          

   \                                 In segment CODE, align 4, keep-with-next
    177          char *collectItemsParams(VIEWDATA *vd, REFCACHE *rf)
    178          {
   \                     collectItemsParams:
   \   00000000   F24F2DE9           PUSH     {R1,R4-R11,LR}
   \   00000004   04D04DE2           SUB      SP,SP,#+4
   \   00000008   0040A0E1           MOV      R4,R0
    179            unsigned int pos=0;
    180            for (int i=0;i<vd->ref_cache_size;i++)
   \   0000000C   D00094E5           LDR      R0,[R4, #+208]
   \   00000010   0050A0E3           MOV      R5,#+0
   \   00000014   0060A0E3           MOV      R6,#+0
   \   00000018   010050E3           CMP      R0,#+1
   \   0000001C   2B0000AA           BGE      ??collectItemsParams_2
    181            {
    182              REFCACHE *prf=vd->ref_cache+i;
    183              switch (prf->tag)
    184              {
    185              case 's':
    186                {
    187                  if (prf->multiselect)
    188                  {
    189                    int p=_rshort2(vd->oms+prf->id);
    190                    int start=prf->id+2+p+3+1;
    191                    for (int i=0;i<prf->size;i++)
    192                    {
    193                      if (((char*)prf->data)[i])
    194                      {
    195                        // write
    196                        p=_rshort2(vd->oms+start);
    197                        start=start+2+p;
    198                        pos+=_rshort2(vd->oms+prf->id)+_rshort2(vd->oms+start)+2;
    199                        p=_rshort2(vd->oms+start);
    200                        start=start+2+p+2;
    201                      }
    202                      else
    203                      {
    204                        // skip
    205                        p=_rshort2(vd->oms+start);
    206                        start=start+2+p;
    207                        p=_rshort2(vd->oms+start);
    208                        start=start+2+p+2;
    209                      }
    210                    }
    211                  }
    212                  else
    213                  {
    214                    pos+=_rshort2(vd->oms+prf->id)+1+_rshort2(vd->oms+prf->id2)+1;
    215                  }
    216                }
    217                break;
    218              case 'c':
    219              case 'r':
    220                if (vd->rawtext[prf->begin+1]==vd->WCHAR_RADIO_ON||vd->rawtext[prf->begin+1]==vd->WCHAR_BUTTON_ON)
    221                  pos+=_rshort2(vd->oms+prf->id)+1+_rshort2(vd->oms+prf->value)+1;
    222                break;
    223              case 'i':
    224              case 'u':
    225                {
    226                  if (prf!=rf) break;
    227                  pos+=_rshort2(vd->oms+prf->id)+2;
    228                  char *c=extract_omstr(vd,prf->value);
    229                  WSHDR *ws=AllocWS(strlen(c));
    230                  oms2ws(ws,c,strlen(c));
    231                  mfree(c);
    232                  char *b=c=(char *)malloc(ws->wsbody[0]+3);
    233                  for (int i=0; i<ws->wsbody[0]; i++) *c++=char16to8(ws->wsbody[i+1]);
    234                  *c=0;
    235                  b=ToWeb(b,1,0);
    236                  pos+=strlen(b);
    237                  mfree(b);
    238                  FreeWS(ws);
    239                }
    240                break;
    241              case 'p':
    242              case 'x':
    243                {
    244                  pos+=_rshort2(vd->oms+prf->id)+2;
    245                  char *c;
    246                  char *b=c=(char *)malloc(((WSHDR *)prf->data)->wsbody[0]+3);
    247                  for (int i=0; i<((WSHDR *)prf->data)->wsbody[0]; i++) *c++=char16to8(((WSHDR *)prf->data)->wsbody[i+1]);
    248                  *c=0;
    249                  b=ToWeb(b,1,0);
    250                  pos+=strlen(b);
    251                  mfree(b);
    252                  if (!prf->upload_file_data_not_present)
    253                    pos+=GetFileDataLen(prf);
    254                }
    255                break;
    256              }
    257            }
    258          //  DEBUGS("pos:%i\r\n",pos);
    259            char* s=malloc(pos+1+GOTO_PARAMS_OFFSET);
   \                     ??collectItemsParams_3:
   \   00000020   0100A0E3           MOV      R0,#+1
   \   00000024   400D80E3           ORR      R0,R0,#0x1000
   \   00000028   050080E0           ADD      R0,R0,R5
   \   0000002C   140000EF           SWI      +20
   \   00000030   0050A0E1           MOV      R5,R0
    260            pos=GOTO_PARAMS_OFFSET;
    261            for (int i=0;i<vd->ref_cache_size;i++)
   \   00000034   0010A0E3           MOV      R1,#+0
   \   00000038   00108DE5           STR      R1,[SP, #+0]
   \   0000003C   D00094E5           LDR      R0,[R4, #+208]
   \   00000040   40ADA0E3           MOV      R10,#+4096
   \   00000044   010050E3           CMP      R0,#+1
   \   00000048   FA0000AA           BGE      ??collectItemsParams_4
    262            {
    263              REFCACHE *prf=vd->ref_cache+i;
    264              switch (prf->tag)
    265              {
    266              case 's':
    267                {
    268                  if (prf->multiselect)
    269                  {
    270                    int p=_rshort2(vd->oms+prf->id);
    271                    int start=prf->id+2+p+3+1;
    272                    for (int i=0;i<prf->size;i++)
    273                    {
    274                      if (((char*)prf->data)[i])
    275                      {
    276                        // write
    277                        p=_rshort2(vd->oms+start);
    278                        start=start+2+p;
    279                        s[pos]='&';
    280                        pos++;
    281                        char *c=extract_omstr(vd,prf->id);
    282                        memcpy(s+pos,c,strlen(c));
    283                        pos+=strlen(c);
    284                        mfree(c);
    285                        s[pos]='=';
    286                        pos++;
    287                        c=extract_omstr(vd,start);
    288                        memcpy(s+pos,c,strlen(c));
    289                        pos+=strlen(c);
    290                        mfree(c);
    291                        p=_rshort2(vd->oms+start);
    292                        start=start+2+p+2;
    293                      }
    294                      else
    295                      {
    296                        // skip
    297                        p=_rshort2(vd->oms+start);
    298                        start=start+2+p;
    299                        p=_rshort2(vd->oms+start);
    300                        start=start+2+p+2;
    301                      }
    302                    }
    303                  }
    304                  else
    305                  {
    306                    s[pos]='&';
    307                    pos++;
    308                    char *c=extract_omstr(vd,prf->id);
    309                    memcpy(s+pos,c,strlen(c));
    310                    pos+=strlen(c);
    311                    mfree(c);
    312                    s[pos]='=';
    313                    pos++;
    314                    c=extract_omstr(vd,prf->id2);
    315                    memcpy(s+pos,c,strlen(c));
    316                    pos+=strlen(c);
    317                    mfree(c);
    318                  }
    319                }
    320                break;
    321              case 'c':
    322              case 'r':
    323                {
    324                  if (vd->rawtext[prf->begin+1]==vd->WCHAR_RADIO_ON||vd->rawtext[prf->begin+1]==vd->WCHAR_BUTTON_ON)
    325                  {
    326                    s[pos]='&';
    327                    pos++;
    328                    char *c=extract_omstr(vd,prf->id);
    329                    memcpy(s+pos,c,strlen(c));
    330                    pos+=strlen(c);
    331                    mfree(c);
    332                    s[pos]='=';
    333                    pos++;
    334                    c=extract_omstr(vd,prf->value);
    335                    memcpy(s+pos,c,strlen(c));
    336                    pos+=strlen(c);
    337                    mfree(c);
    338                  }
    339                }
    340                break;
    341              case 'i':
    342              case 'u':
    343                {
    344                  if (prf!=rf) break;
    345                  s[pos]='&';
    346                  pos++;
    347                  char *c=extract_omstr(vd,prf->id);
    348                  memcpy(s+pos,c,strlen(c));
    349                  pos+=strlen(c);
    350                  mfree(c);
    351                  s[pos]='=';
    352                  pos++;
    353                  c=extract_omstr(vd,prf->value);
    354                  WSHDR *ws=AllocWS(strlen(c));
    355                  oms2ws(ws,c,strlen(c));
    356                  mfree(c);
    357                  char *b=c=(char *)malloc(ws->wsbody[0]+3);
    358                  for (int i=0; i<ws->wsbody[0]; i++) *c++=char16to8(ws->wsbody[i+1]);
    359                  *c=0;
    360                  b=ToWeb(b,1,0);
    361                  memcpy(s+pos, b, strlen(b));
    362                  pos+=strlen(b);
    363                  mfree(b);
    364                  FreeWS(ws);
    365                }
    366                break;
    367              case 'p':
    368              case 'x':
    369                {
    370                  s[pos]='&';
    371                  pos++;
    372                  char *c=extract_omstr(vd,prf->id);
    373                  memcpy(s+pos,c,strlen(c));
    374                  pos+=strlen(c);
    375                  mfree(c);
    376                  s[pos]='=';
    377                  pos++;
    378                  char *b=c=(char *)malloc(((WSHDR *)prf->data)->wsbody[0]+3);
    379                  for (int i=0; i<((WSHDR *)prf->data)->wsbody[0]; i++) *c++=char16to8(((WSHDR *)prf->data)->wsbody[i+1]);
    380                  *c=0;
    381                  b=ToWeb(b,1,0);
    382                  memcpy(s+pos, b, strlen(b));
    383                  pos+=strlen(b);
    384                  mfree(b);
    385                  if (!prf->upload_file_data_not_present)
    386                    pos += FillFileData(prf, s+pos);
    387                }
    388                break;
    389              }
    390            }
    391          //  DEBUGS("pos:%i\r\n",pos);
    392            s[pos]=0;
   \                     ??collectItemsParams_5:
   \   0000004C   0000A0E3           MOV      R0,#+0
   \   00000050   0500CAE7           STRB     R0,[R10, +R5]
    393          //  unsigned int ul;
    394          //  int f;
    395          //  if ((f=fopen("0:\\zbin\\balletmini\\dump.txt",A_ReadWrite+A_Create+A_Truncate,P_READ+P_WRITE,&ul))!=-1)
    396          //  {
    397          //    fwrite(f,s,pos,&ul);
    398          //    fclose(f,&ul);
    399          //  }
    400            return s;
   \   00000054   0500A0E1           MOV      R0,R5
   \   00000058   F68FBDE8           POP      {R1,R2,R4-R11,PC}  ;; return
   \                     ??collectItemsParams_6:
   \   0000005C   000090E5           LDR      R0,[R0, #+0]
   \   00000060   890080E0           ADD      R0,R0,R9, LSL #+1
   \   00000064   B200D0E1           LDRH     R0,[R0, #+2]
   \   00000068   019089E2           ADD      R9,R9,#+1
   \   0000006C   ........           _BLF     char16to8,??char16to8??rA
   \   00000070   ........           STRB     R0,[R8], #+1
   \                     ??collectItemsParams_7:
   \   00000074   180097E5           LDR      R0,[R7, #+24]
   \   00000078   001090E5           LDR      R1,[R0, #+0]
   \   0000007C   B010D1E1           LDRH     R1,[R1, #+0]
   \   00000080   010059E1           CMP      R9,R1
   \   00000084   F4FFFFBA           BLT      ??collectItemsParams_6
   \                     ??collectItemsParams_8:
   \   00000088   0000A0E3           MOV      R0,#+0
   \   0000008C   0000C8E5           STRB     R0,[R8, #+0]
   \   00000090   0020A0E3           MOV      R2,#+0
   \   00000094   0110A0E3           MOV      R1,#+1
   \   00000098   0A00A0E1           MOV      R0,R10
   \   0000009C   ........           _BLF     ToWeb,??ToWeb??rA
   \   000000A0   0080A0E1           MOV      R8,R0
   \   000000A4   1B0000EF           SWI      +27
   \   000000A8   055080E0           ADD      R5,R0,R5
   \   000000AC   0800A0E1           MOV      R0,R8
   \   000000B0   150000EF           SWI      +21
   \   000000B4   2000D7E5           LDRB     R0,[R7, #+32]
   \   000000B8   040010E3           TST      R0,#0x4
   \   000000BC   0200001A           BNE      ??collectItemsParams_9
   \   000000C0   0700A0E1           MOV      R0,R7
   \   000000C4   ........           _BLF     GetFileDataLen,??GetFileDataLen??rA
   \                     ??collectItemsParams_10:
   \   000000C8   055080E0           ADD      R5,R0,R5
   \                     ??collectItemsParams_9:
   \   000000CC   016086E2           ADD      R6,R6,#+1
   \                     ??collectItemsParams_2:
   \   000000D0   D00094E5           LDR      R0,[R4, #+208]
   \   000000D4   000056E1           CMP      R6,R0
   \   000000D8   D0FFFFAA           BGE      ??collectItemsParams_3
   \   000000DC   CC1094E5           LDR      R1,[R4, #+204]
   \   000000E0   2800A0E3           MOV      R0,#+40
   \   000000E4   901627E0           MLA      R7,R0,R6,R1
   \   000000E8   080097E5           LDR      R0,[R7, #+8]
   \   000000EC   630040E2           SUB      R0,R0,#+99
   \   000000F0   150050E3           CMP      R0,#+21
   \   000000F4   F4FFFF8A           BHI      ??collectItemsParams_9
   \   000000F8   021F8FE2           ADR      R1,??collectItemsParams_0
   \   000000FC   8000A0E1           MOV      R0,R0, LSL #+1
   \   00000100   F01091E1           LDRSH    R1,[R1, R0]
   \   00000104   01F18FE0           ADD      PC,PC,R1, LSL #+2
   \                     ??collectItemsParams_0:
   \   00000108   4300F0FFF0FF       DC16     +67,+65520,+65520,+65520
   \              F0FF        
   \   00000110   F0FFF0FF5600       DC16     +65520,+65520,+86,+65520
   \              F0FF        
   \   00000118   F0FFF0FFF0FF       DC16     +65520,+65520,+65520,+65520
   \              F0FF        
   \   00000120   F0FF9100F0FF       DC16     +65520,+145,+65520,+67
   \              4300        
   \   00000128   0A00F0FF5600       DC16     +10,+65520,+86,+65520
   \              F0FF        
   \   00000130   F0FF9100           DC16     +65520,+145
   \                     ??collectItemsParams_11:
   \   00000134   0C0097E5           LDR      R0,[R7, #+12]
   \   00000138   3C1094E5           LDR      R1,[R4, #+60]
   \   0000013C   010080E0           ADD      R0,R0,R1
   \   00000140   2010D7E5           LDRB     R1,[R7, #+32]
   \   00000144   020011E3           TST      R1,#0x2
   \   00000148   2900000A           BEQ      ??collectItemsParams_12
   \   0000014C   ........           _BLF     _rshort2,??_rshort2??rA
   \   00000150   0C1097E5           LDR      R1,[R7, #+12]
   \   00000154   0080A0E3           MOV      R8,#+0
   \   00000158   000081E0           ADD      R0,R1,R0
   \   0000015C   069080E2           ADD      R9,R0,#+6
   \   00000160   1C0097E5           LDR      R0,[R7, #+28]
   \   00000164   010050E3           CMP      R0,#+1
   \   00000168   090000AA           BGE      ??collectItemsParams_13
   \   0000016C   D6FFFFEA           B        ??collectItemsParams_9
   \                     ??collectItemsParams_14:
   \   00000170   ........           _BLF     _rshort2,??_rshort2??rA
   \   00000174   020080E2           ADD      R0,R0,#+2
   \   00000178   099080E0           ADD      R9,R0,R9
   \                     ??collectItemsParams_15:
   \   0000017C   3C0094E5           LDR      R0,[R4, #+60]
   \   00000180   018088E2           ADD      R8,R8,#+1
   \   00000184   000089E0           ADD      R0,R9,R0
   \   00000188   ........           _BLF     _rshort2,??_rshort2??rA
   \   0000018C   040080E2           ADD      R0,R0,#+4
   \   00000190   099080E0           ADD      R9,R0,R9
   \                     ??collectItemsParams_13:
   \   00000194   1C0097E5           LDR      R0,[R7, #+28]
   \   00000198   000058E1           CMP      R8,R0
   \   0000019C   CAFFFFAA           BGE      ??collectItemsParams_9
   \   000001A0   181097E5           LDR      R1,[R7, #+24]
   \   000001A4   3C0094E5           LDR      R0,[R4, #+60]
   \   000001A8   0110D8E7           LDRB     R1,[R8, +R1]
   \   000001AC   000089E0           ADD      R0,R9,R0
   \   000001B0   000051E3           CMP      R1,#+0
   \   000001B4   EDFFFF0A           BEQ      ??collectItemsParams_14
   \   000001B8   ........           _BLF     _rshort2,??_rshort2??rA
   \   000001BC   3C1094E5           LDR      R1,[R4, #+60]
   \   000001C0   020080E2           ADD      R0,R0,#+2
   \   000001C4   099080E0           ADD      R9,R0,R9
   \   000001C8   0C0097E5           LDR      R0,[R7, #+12]
   \   000001CC   010080E0           ADD      R0,R0,R1
   \   000001D0   ........           _BLF     _rshort2,??_rshort2??rA
   \   000001D4   00A0A0E1           MOV      R10,R0
   \   000001D8   3C0094E5           LDR      R0,[R4, #+60]
   \   000001DC   000089E0           ADD      R0,R9,R0
   \   000001E0   ........           _BLF     _rshort2,??_rshort2??rA
   \   000001E4   00008AE0           ADD      R0,R10,R0
   \   000001E8   020080E2           ADD      R0,R0,#+2
   \   000001EC   055080E0           ADD      R5,R0,R5
   \   000001F0   E1FFFFEA           B        ??collectItemsParams_15
   \                     ??collectItemsParams_12:
   \   000001F4   ........           _BLF     _rshort2,??_rshort2??rA
   \   000001F8   3C1094E5           LDR      R1,[R4, #+60]
   \   000001FC   0080A0E1           MOV      R8,R0
   \   00000200   140097E5           LDR      R0,[R7, #+20]
   \                     ??collectItemsParams_16:
   \   00000204   010080E0           ADD      R0,R0,R1
   \   00000208   ........           _BLF     _rshort2,??_rshort2??rA
   \   0000020C   000088E0           ADD      R0,R8,R0
   \   00000210   020080E2           ADD      R0,R0,#+2
   \   00000214   ABFFFFEA           B        ??collectItemsParams_10
   \                     ??collectItemsParams_17:
   \   00000218   000097E5           LDR      R0,[R7, #+0]
   \   0000021C   081094E5           LDR      R1,[R4, #+8]
   \   00000220   F82094E5           LDR      R2,[R4, #+248]
   \   00000224   800081E0           ADD      R0,R1,R0, LSL #+1
   \   00000228   B210D0E1           LDRH     R1,[R0, #+2]
   \   0000022C   020051E1           CMP      R1,R2
   \   00000230   0300000A           BEQ      ??collectItemsParams_18
   \   00000234   0100A0E1           MOV      R0,R1
   \   00000238   F01094E5           LDR      R1,[R4, #+240]
   \   0000023C   010050E1           CMP      R0,R1
   \   00000240   A1FFFF1A           BNE      ??collectItemsParams_9
   \                     ??collectItemsParams_18:
   \   00000244   0C0097E5           LDR      R0,[R7, #+12]
   \   00000248   3C1094E5           LDR      R1,[R4, #+60]
   \   0000024C   010080E0           ADD      R0,R0,R1
   \   00000250   ........           _BLF     _rshort2,??_rshort2??rA
   \   00000254   3C1094E5           LDR      R1,[R4, #+60]
   \   00000258   0080A0E1           MOV      R8,R0
   \   0000025C   100097E5           LDR      R0,[R7, #+16]
   \   00000260   E7FFFFEA           B        ??collectItemsParams_16
   \                     ??collectItemsParams_19:
   \   00000264   04009DE5           LDR      R0,[SP, #+4]
   \   00000268   000057E1           CMP      R7,R0
   \   0000026C   96FFFF1A           BNE      ??collectItemsParams_9
   \   00000270   0C0097E5           LDR      R0,[R7, #+12]
   \   00000274   3C1094E5           LDR      R1,[R4, #+60]
   \   00000278   00A0A0E3           MOV      R10,#+0
   \   0000027C   010080E0           ADD      R0,R0,R1
   \   00000280   ........           _BLF     _rshort2,??_rshort2??rA
   \   00000284   101097E5           LDR      R1,[R7, #+16]
   \   00000288   020080E2           ADD      R0,R0,#+2
   \   0000028C   055080E0           ADD      R5,R0,R5
   \   00000290   0400A0E1           MOV      R0,R4
   \   00000294   ........           _BLF     extract_omstr,??extract_omstr??rA
   \   00000298   0080A0E1           MOV      R8,R0
   \   0000029C   1B0000EF           SWI      +27
   \   000002A0   250100EF           SWI      +293
   \   000002A4   0070A0E1           MOV      R7,R0
   \   000002A8   0800A0E1           MOV      R0,R8
   \   000002AC   1B0000EF           SWI      +27
   \   000002B0   0020A0E1           MOV      R2,R0
   \   000002B4   0810A0E1           MOV      R1,R8
   \   000002B8   0700A0E1           MOV      R0,R7
   \   000002BC   ........           _BLF     oms2ws,??oms2ws??rA
   \   000002C0   0800A0E1           MOV      R0,R8
   \   000002C4   150000EF           SWI      +21
   \   000002C8   000097E5           LDR      R0,[R7, #+0]
   \   000002CC   B000D0E1           LDRH     R0,[R0, #+0]
   \   000002D0   030080E2           ADD      R0,R0,#+3
   \   000002D4   140000EF           SWI      +20
   \   000002D8   0080A0E1           MOV      R8,R0
   \   000002DC   000097E5           LDR      R0,[R7, #+0]
   \   000002E0   0890A0E1           MOV      R9,R8
   \   000002E4   B000D0E1           LDRH     R0,[R0, #+0]
   \   000002E8   000050E3           CMP      R0,#+0
   \   000002EC   0500001A           BNE      ??collectItemsParams_20
   \   000002F0   080000EA           B        ??collectItemsParams_21
   \                     ??collectItemsParams_22:
   \   000002F4   8A0080E0           ADD      R0,R0,R10, LSL #+1
   \   000002F8   B200D0E1           LDRH     R0,[R0, #+2]
   \   000002FC   01A08AE2           ADD      R10,R10,#+1
   \   00000300   ........           _BLF     char16to8,??char16to8??rA
   \   00000304   ........           STRB     R0,[R8], #+1
   \                     ??collectItemsParams_20:
   \   00000308   000097E5           LDR      R0,[R7, #+0]
   \   0000030C   B010D0E1           LDRH     R1,[R0, #+0]
   \   00000310   01005AE1           CMP      R10,R1
   \   00000314   F6FFFFBA           BLT      ??collectItemsParams_22
   \                     ??collectItemsParams_21:
   \   00000318   0000A0E3           MOV      R0,#+0
   \   0000031C   0000C8E5           STRB     R0,[R8, #+0]
   \   00000320   0020A0E3           MOV      R2,#+0
   \   00000324   0110A0E3           MOV      R1,#+1
   \   00000328   0900A0E1           MOV      R0,R9
   \   0000032C   ........           _BLF     ToWeb,??ToWeb??rA
   \   00000330   0080A0E1           MOV      R8,R0
   \   00000334   1B0000EF           SWI      +27
   \   00000338   055080E0           ADD      R5,R0,R5
   \   0000033C   0800A0E1           MOV      R0,R8
   \   00000340   150000EF           SWI      +21
   \   00000344   0700A0E1           MOV      R0,R7
   \   00000348   290100EF           SWI      +297
   \   0000034C   5EFFFFEA           B        ??collectItemsParams_9
   \                     ??collectItemsParams_23:
   \   00000350   0C0097E5           LDR      R0,[R7, #+12]
   \   00000354   3C1094E5           LDR      R1,[R4, #+60]
   \   00000358   0090A0E3           MOV      R9,#+0
   \   0000035C   010080E0           ADD      R0,R0,R1
   \   00000360   ........           _BLF     _rshort2,??_rshort2??rA
   \   00000364   020080E2           ADD      R0,R0,#+2
   \   00000368   055080E0           ADD      R5,R0,R5
   \   0000036C   180097E5           LDR      R0,[R7, #+24]
   \   00000370   000090E5           LDR      R0,[R0, #+0]
   \   00000374   B000D0E1           LDRH     R0,[R0, #+0]
   \   00000378   030080E2           ADD      R0,R0,#+3
   \   0000037C   140000EF           SWI      +20
   \   00000380   0080A0E1           MOV      R8,R0
   \   00000384   180097E5           LDR      R0,[R7, #+24]
   \   00000388   08A0A0E1           MOV      R10,R8
   \   0000038C   000090E5           LDR      R0,[R0, #+0]
   \   00000390   B000D0E1           LDRH     R0,[R0, #+0]
   \   00000394   000050E3           CMP      R0,#+0
   \   00000398   35FFFF1A           BNE      ??collectItemsParams_7
   \   0000039C   39FFFFEA           B        ??collectItemsParams_8
   \                     ??collectItemsParams_24:
   \   000003A0   000090E5           LDR      R0,[R0, #+0]
   \   000003A4   890080E0           ADD      R0,R0,R9, LSL #+1
   \   000003A8   B200D0E1           LDRH     R0,[R0, #+2]
   \   000003AC   019089E2           ADD      R9,R9,#+1
   \   000003B0   ........           _BLF     char16to8,??char16to8??rA
   \   000003B4   ........           STRB     R0,[R8], #+1
   \                     ??collectItemsParams_25:
   \   000003B8   180096E5           LDR      R0,[R6, #+24]
   \   000003BC   001090E5           LDR      R1,[R0, #+0]
   \   000003C0   B010D1E1           LDRH     R1,[R1, #+0]
   \   000003C4   010059E1           CMP      R9,R1
   \   000003C8   F4FFFFBA           BLT      ??collectItemsParams_24
   \                     ??collectItemsParams_26:
   \   000003CC   0000A0E3           MOV      R0,#+0
   \   000003D0   0000C8E5           STRB     R0,[R8, #+0]
   \   000003D4   0020A0E3           MOV      R2,#+0
   \   000003D8   0110A0E3           MOV      R1,#+1
   \   000003DC   0A00A0E1           MOV      R0,R10
   \   000003E0   ........           _BLF     ToWeb,??ToWeb??rA
   \   000003E4   0080A0E1           MOV      R8,R0
   \   000003E8   1B0000EF           SWI      +27
   \   000003EC   0020A0E1           MOV      R2,R0
   \   000003F0   0810A0E1           MOV      R1,R8
   \   000003F4   050087E0           ADD      R0,R7,R5
   \   000003F8   1E0100EF           SWI      +286
   \   000003FC   0800A0E1           MOV      R0,R8
   \   00000400   1B0000EF           SWI      +27
   \   00000404   07A080E0           ADD      R10,R0,R7
   \   00000408   0800A0E1           MOV      R0,R8
   \   0000040C   150000EF           SWI      +21
   \   00000410   2000D6E5           LDRB     R0,[R6, #+32]
   \   00000414   040010E3           TST      R0,#0x4
   \   00000418   0300001A           BNE      ??collectItemsParams_27
   \   0000041C   05108AE0           ADD      R1,R10,R5
   \   00000420   0600A0E1           MOV      R0,R6
   \   00000424   ........           _BLF     FillFileData,??FillFileData??rA
   \   00000428   0AA080E0           ADD      R10,R0,R10
   \                     ??collectItemsParams_27:
   \   0000042C   00109DE5           LDR      R1,[SP, #+0]
   \   00000430   011081E2           ADD      R1,R1,#+1
   \   00000434   00108DE5           STR      R1,[SP, #+0]
   \                     ??collectItemsParams_4:
   \   00000438   00009DE5           LDR      R0,[SP, #+0]
   \   0000043C   D01094E5           LDR      R1,[R4, #+208]
   \   00000440   010050E1           CMP      R0,R1
   \   00000444   00FFFFAA           BGE      ??collectItemsParams_5
   \   00000448   CC2094E5           LDR      R2,[R4, #+204]
   \   0000044C   2810A0E3           MOV      R1,#+40
   \   00000450   912026E0           MLA      R6,R1,R0,R2
   \   00000454   05008AE0           ADD      R0,R10,R5
   \   00000458   081096E5           LDR      R1,[R6, #+8]
   \   0000045C   01808AE2           ADD      R8,R10,#+1
   \   00000460   2670A0E3           MOV      R7,#+38
   \   00000464   631041E2           SUB      R1,R1,#+99
   \   00000468   150051E3           CMP      R1,#+21
   \   0000046C   EEFFFF8A           BHI      ??collectItemsParams_27
   \   00000470   022F8FE2           ADR      R2,??collectItemsParams_1
   \   00000474   8110A0E1           MOV      R1,R1, LSL #+1
   \   00000478   F12092E1           LDRSH    R2,[R2, R1]
   \   0000047C   02F18FE0           ADD      PC,PC,R2, LSL #+2
   \                     ??collectItemsParams_1:
   \   00000480   7100EAFFEAFF       DC16     +113,+65514,+65514,+65514
   \              EAFF        
   \   00000488   EAFFEAFF8F00       DC16     +65514,+65514,+143,+65514
   \              EAFF        
   \   00000490   EAFFEAFFEAFF       DC16     +65514,+65514,+65514,+65514
   \              EAFF        
   \   00000498   EAFFDC00EAFF       DC16     +65514,+220,+65514,+113
   \              7100        
   \   000004A0   0A00EAFF8F00       DC16     +10,+65514,+143,+65514
   \              EAFF        
   \   000004A8   EAFFDC00           DC16     +65514,+220
   \                     ??collectItemsParams_28:
   \   000004AC   2010D6E5           LDRB     R1,[R6, #+32]
   \   000004B0   020011E3           TST      R1,#0x2
   \   000004B4   4200000A           BEQ      ??collectItemsParams_29
   \   000004B8   0C0096E5           LDR      R0,[R6, #+12]
   \   000004BC   3C1094E5           LDR      R1,[R4, #+60]
   \   000004C0   0080A0E3           MOV      R8,#+0
   \   000004C4   010080E0           ADD      R0,R0,R1
   \   000004C8   ........           _BLF     _rshort2,??_rshort2??rA
   \   000004CC   0C1096E5           LDR      R1,[R6, #+12]
   \   000004D0   000081E0           ADD      R0,R1,R0
   \   000004D4   069080E2           ADD      R9,R0,#+6
   \   000004D8   1C0096E5           LDR      R0,[R6, #+28]
   \   000004DC   010050E3           CMP      R0,#+1
   \   000004E0   090000AA           BGE      ??collectItemsParams_30
   \   000004E4   D0FFFFEA           B        ??collectItemsParams_27
   \                     ??collectItemsParams_31:
   \   000004E8   ........           _BLF     _rshort2,??_rshort2??rA
   \   000004EC   020080E2           ADD      R0,R0,#+2
   \   000004F0   099080E0           ADD      R9,R0,R9
   \                     ??collectItemsParams_32:
   \   000004F4   3C0094E5           LDR      R0,[R4, #+60]
   \   000004F8   018088E2           ADD      R8,R8,#+1
   \   000004FC   000089E0           ADD      R0,R9,R0
   \   00000500   ........           _BLF     _rshort2,??_rshort2??rA
   \   00000504   040080E2           ADD      R0,R0,#+4
   \   00000508   099080E0           ADD      R9,R0,R9
   \                     ??collectItemsParams_30:
   \   0000050C   1C0096E5           LDR      R0,[R6, #+28]
   \   00000510   000058E1           CMP      R8,R0
   \   00000514   C4FFFFAA           BGE      ??collectItemsParams_27
   \   00000518   181096E5           LDR      R1,[R6, #+24]
   \   0000051C   3C0094E5           LDR      R0,[R4, #+60]
   \   00000520   0110D8E7           LDRB     R1,[R8, +R1]
   \   00000524   000089E0           ADD      R0,R9,R0
   \   00000528   000051E3           CMP      R1,#+0
   \   0000052C   EDFFFF0A           BEQ      ??collectItemsParams_31
   \   00000530   ........           _BLF     _rshort2,??_rshort2??rA
   \   00000534   020080E2           ADD      R0,R0,#+2
   \   00000538   099080E0           ADD      R9,R0,R9
   \   0000053C   0570CAE7           STRB     R7,[R10, +R5]
   \   00000540   0C1096E5           LDR      R1,[R6, #+12]
   \   00000544   01A08AE2           ADD      R10,R10,#+1
   \   00000548   0400A0E1           MOV      R0,R4
   \   0000054C   ........           _BLF     extract_omstr,??extract_omstr??rA
   \   00000550   00B0A0E1           MOV      R11,R0
   \   00000554   1B0000EF           SWI      +27
   \   00000558   0020A0E1           MOV      R2,R0
   \   0000055C   0B10A0E1           MOV      R1,R11
   \   00000560   05008AE0           ADD      R0,R10,R5
   \   00000564   1E0100EF           SWI      +286
   \   00000568   0B00A0E1           MOV      R0,R11
   \   0000056C   1B0000EF           SWI      +27
   \   00000570   0AA080E0           ADD      R10,R0,R10
   \   00000574   0B00A0E1           MOV      R0,R11
   \   00000578   150000EF           SWI      +21
   \   0000057C   3D00A0E3           MOV      R0,#+61
   \   00000580   0500CAE7           STRB     R0,[R10, +R5]
   \   00000584   01A08AE2           ADD      R10,R10,#+1
   \   00000588   0910A0E1           MOV      R1,R9
   \   0000058C   0400A0E1           MOV      R0,R4
   \   00000590   ........           _BLF     extract_omstr,??extract_omstr??rA
   \   00000594   00B0A0E1           MOV      R11,R0
   \   00000598   1B0000EF           SWI      +27
   \   0000059C   0020A0E1           MOV      R2,R0
   \   000005A0   0B10A0E1           MOV      R1,R11
   \   000005A4   05008AE0           ADD      R0,R10,R5
   \   000005A8   1E0100EF           SWI      +286
   \   000005AC   0B00A0E1           MOV      R0,R11
   \   000005B0   1B0000EF           SWI      +27
   \   000005B4   0AA080E0           ADD      R10,R0,R10
   \   000005B8   0B00A0E1           MOV      R0,R11
   \   000005BC   150000EF           SWI      +21
   \   000005C0   CBFFFFEA           B        ??collectItemsParams_32
   \                     ??collectItemsParams_29:
   \   000005C4   0070C0E5           STRB     R7,[R0, #+0]
   \   000005C8   0C1096E5           LDR      R1,[R6, #+12]
   \   000005CC   0400A0E1           MOV      R0,R4
   \   000005D0   ........           _BLF     extract_omstr,??extract_omstr??rA
   \   000005D4   0070A0E1           MOV      R7,R0
   \   000005D8   1B0000EF           SWI      +27
   \   000005DC   0020A0E1           MOV      R2,R0
   \   000005E0   0710A0E1           MOV      R1,R7
   \   000005E4   050088E0           ADD      R0,R8,R5
   \   000005E8   1E0100EF           SWI      +286
   \   000005EC   0700A0E1           MOV      R0,R7
   \   000005F0   1B0000EF           SWI      +27
   \   000005F4   088080E0           ADD      R8,R0,R8
   \   000005F8   0700A0E1           MOV      R0,R7
   \   000005FC   150000EF           SWI      +21
   \   00000600   3D00A0E3           MOV      R0,#+61
   \   00000604   0500C8E7           STRB     R0,[R8, +R5]
   \   00000608   141096E5           LDR      R1,[R6, #+20]
   \                     ??collectItemsParams_33:
   \   0000060C   017088E2           ADD      R7,R8,#+1
   \   00000610   0400A0E1           MOV      R0,R4
   \   00000614   ........           _BLF     extract_omstr,??extract_omstr??rA
   \   00000618   0060A0E1           MOV      R6,R0
   \   0000061C   1B0000EF           SWI      +27
   \   00000620   0020A0E1           MOV      R2,R0
   \   00000624   0610A0E1           MOV      R1,R6
   \   00000628   050087E0           ADD      R0,R7,R5
   \   0000062C   1E0100EF           SWI      +286
   \   00000630   0600A0E1           MOV      R0,R6
   \   00000634   1B0000EF           SWI      +27
   \   00000638   07A080E0           ADD      R10,R0,R7
   \   0000063C   0600A0E1           MOV      R0,R6
   \   00000640   150000EF           SWI      +21
   \   00000644   78FFFFEA           B        ??collectItemsParams_27
   \                     ??collectItemsParams_34:
   \   00000648   001096E5           LDR      R1,[R6, #+0]
   \   0000064C   082094E5           LDR      R2,[R4, #+8]
   \   00000650   F83094E5           LDR      R3,[R4, #+248]
   \   00000654   811082E0           ADD      R1,R2,R1, LSL #+1
   \   00000658   B220D1E1           LDRH     R2,[R1, #+2]
   \   0000065C   030052E1           CMP      R2,R3
   \   00000660   0300000A           BEQ      ??collectItemsParams_35
   \   00000664   0210A0E1           MOV      R1,R2
   \   00000668   F02094E5           LDR      R2,[R4, #+240]
   \   0000066C   020051E1           CMP      R1,R2
   \   00000670   6DFFFF1A           BNE      ??collectItemsParams_27
   \                     ??collectItemsParams_35:
   \   00000674   0070C0E5           STRB     R7,[R0, #+0]
   \   00000678   0C1096E5           LDR      R1,[R6, #+12]
   \   0000067C   0400A0E1           MOV      R0,R4
   \   00000680   ........           _BLF     extract_omstr,??extract_omstr??rA
   \   00000684   0070A0E1           MOV      R7,R0
   \   00000688   1B0000EF           SWI      +27
   \   0000068C   0020A0E1           MOV      R2,R0
   \   00000690   0710A0E1           MOV      R1,R7
   \   00000694   050088E0           ADD      R0,R8,R5
   \   00000698   1E0100EF           SWI      +286
   \   0000069C   0700A0E1           MOV      R0,R7
   \   000006A0   1B0000EF           SWI      +27
   \   000006A4   088080E0           ADD      R8,R0,R8
   \   000006A8   0700A0E1           MOV      R0,R7
   \   000006AC   150000EF           SWI      +21
   \   000006B0   3D00A0E3           MOV      R0,#+61
   \   000006B4   0500C8E7           STRB     R0,[R8, +R5]
   \   000006B8   101096E5           LDR      R1,[R6, #+16]
   \   000006BC   D2FFFFEA           B        ??collectItemsParams_33
   \                     ??collectItemsParams_36:
   \   000006C0   04109DE5           LDR      R1,[SP, #+4]
   \   000006C4   010056E1           CMP      R6,R1
   \   000006C8   57FFFF1A           BNE      ??collectItemsParams_27
   \   000006CC   0070C0E5           STRB     R7,[R0, #+0]
   \   000006D0   0C1096E5           LDR      R1,[R6, #+12]
   \   000006D4   0400A0E1           MOV      R0,R4
   \   000006D8   ........           _BLF     extract_omstr,??extract_omstr??rA
   \   000006DC   0070A0E1           MOV      R7,R0
   \   000006E0   1B0000EF           SWI      +27
   \   000006E4   0020A0E1           MOV      R2,R0
   \   000006E8   0710A0E1           MOV      R1,R7
   \   000006EC   050088E0           ADD      R0,R8,R5
   \   000006F0   1E0100EF           SWI      +286
   \   000006F4   0700A0E1           MOV      R0,R7
   \   000006F8   1B0000EF           SWI      +27
   \   000006FC   088080E0           ADD      R8,R0,R8
   \   00000700   0700A0E1           MOV      R0,R7
   \   00000704   150000EF           SWI      +21
   \   00000708   3D00A0E3           MOV      R0,#+61
   \   0000070C   0500C8E7           STRB     R0,[R8, +R5]
   \   00000710   101096E5           LDR      R1,[R6, #+16]
   \   00000714   017088E2           ADD      R7,R8,#+1
   \   00000718   0400A0E1           MOV      R0,R4
   \   0000071C   ........           _BLF     extract_omstr,??extract_omstr??rA
   \   00000720   0080A0E1           MOV      R8,R0
   \   00000724   1B0000EF           SWI      +27
   \   00000728   250100EF           SWI      +293
   \   0000072C   0060A0E1           MOV      R6,R0
   \   00000730   0800A0E1           MOV      R0,R8
   \   00000734   1B0000EF           SWI      +27
   \   00000738   0020A0E1           MOV      R2,R0
   \   0000073C   0810A0E1           MOV      R1,R8
   \   00000740   0600A0E1           MOV      R0,R6
   \   00000744   ........           _BLF     oms2ws,??oms2ws??rA
   \   00000748   0800A0E1           MOV      R0,R8
   \   0000074C   150000EF           SWI      +21
   \   00000750   000096E5           LDR      R0,[R6, #+0]
   \   00000754   00A0A0E3           MOV      R10,#+0
   \   00000758   B000D0E1           LDRH     R0,[R0, #+0]
   \   0000075C   030080E2           ADD      R0,R0,#+3
   \   00000760   140000EF           SWI      +20
   \   00000764   0080A0E1           MOV      R8,R0
   \   00000768   000096E5           LDR      R0,[R6, #+0]
   \   0000076C   0890A0E1           MOV      R9,R8
   \   00000770   B000D0E1           LDRH     R0,[R0, #+0]
   \   00000774   000050E3           CMP      R0,#+0
   \   00000778   0500001A           BNE      ??collectItemsParams_37
   \   0000077C   080000EA           B        ??collectItemsParams_38
   \                     ??collectItemsParams_39:
   \   00000780   8A0080E0           ADD      R0,R0,R10, LSL #+1
   \   00000784   B200D0E1           LDRH     R0,[R0, #+2]
   \   00000788   01A08AE2           ADD      R10,R10,#+1
   \   0000078C   ........           _BLF     char16to8,??char16to8??rA
   \   00000790   ........           STRB     R0,[R8], #+1
   \                     ??collectItemsParams_37:
   \   00000794   000096E5           LDR      R0,[R6, #+0]
   \   00000798   B010D0E1           LDRH     R1,[R0, #+0]
   \   0000079C   01005AE1           CMP      R10,R1
   \   000007A0   F6FFFFBA           BLT      ??collectItemsParams_39
   \                     ??collectItemsParams_38:
   \   000007A4   0000A0E3           MOV      R0,#+0
   \   000007A8   0000C8E5           STRB     R0,[R8, #+0]
   \   000007AC   0020A0E3           MOV      R2,#+0
   \   000007B0   0110A0E3           MOV      R1,#+1
   \   000007B4   0900A0E1           MOV      R0,R9
   \   000007B8   ........           _BLF     ToWeb,??ToWeb??rA
   \   000007BC   0080A0E1           MOV      R8,R0
   \   000007C0   1B0000EF           SWI      +27
   \   000007C4   0020A0E1           MOV      R2,R0
   \   000007C8   0810A0E1           MOV      R1,R8
   \   000007CC   050087E0           ADD      R0,R7,R5
   \   000007D0   1E0100EF           SWI      +286
   \   000007D4   0800A0E1           MOV      R0,R8
   \   000007D8   1B0000EF           SWI      +27
   \   000007DC   07A080E0           ADD      R10,R0,R7
   \   000007E0   0800A0E1           MOV      R0,R8
   \   000007E4   150000EF           SWI      +21
   \   000007E8   0600A0E1           MOV      R0,R6
   \   000007EC   290100EF           SWI      +297
   \   000007F0   0DFFFFEA           B        ??collectItemsParams_27
   \                     ??collectItemsParams_40:
   \   000007F4   0070C0E5           STRB     R7,[R0, #+0]
   \   000007F8   0C1096E5           LDR      R1,[R6, #+12]
   \   000007FC   0400A0E1           MOV      R0,R4
   \   00000800   ........           _BLF     extract_omstr,??extract_omstr??rA
   \   00000804   0070A0E1           MOV      R7,R0
   \   00000808   1B0000EF           SWI      +27
   \   0000080C   0020A0E1           MOV      R2,R0
   \   00000810   0710A0E1           MOV      R1,R7
   \   00000814   050088E0           ADD      R0,R8,R5
   \   00000818   1E0100EF           SWI      +286
   \   0000081C   0700A0E1           MOV      R0,R7
   \   00000820   1B0000EF           SWI      +27
   \   00000824   088080E0           ADD      R8,R0,R8
   \   00000828   0700A0E1           MOV      R0,R7
   \   0000082C   150000EF           SWI      +21
   \   00000830   3D00A0E3           MOV      R0,#+61
   \   00000834   0500C8E7           STRB     R0,[R8, +R5]
   \   00000838   180096E5           LDR      R0,[R6, #+24]
   \   0000083C   017088E2           ADD      R7,R8,#+1
   \   00000840   000090E5           LDR      R0,[R0, #+0]
   \   00000844   0090A0E3           MOV      R9,#+0
   \   00000848   B000D0E1           LDRH     R0,[R0, #+0]
   \   0000084C   030080E2           ADD      R0,R0,#+3
   \   00000850   140000EF           SWI      +20
   \   00000854   0080A0E1           MOV      R8,R0
   \   00000858   180096E5           LDR      R0,[R6, #+24]
   \   0000085C   08A0A0E1           MOV      R10,R8
   \   00000860   000090E5           LDR      R0,[R0, #+0]
   \   00000864   B000D0E1           LDRH     R0,[R0, #+0]
   \   00000868   000050E3           CMP      R0,#+0
   \   0000086C   D1FEFF1A           BNE      ??collectItemsParams_25
   \   00000870   D5FEFFEA           B        ??collectItemsParams_26
    401          }
    402          
    403          //===============================================================================================
    404          

   \                                 In segment CODE, align 4, keep-with-next
    405          static void method0(VIEW_GUI *data)
    406          {
   \                     method0:
   \   00000000   F04F2DE9           PUSH     {R4-R11,LR}
   \   00000004   0040A0E1           MOV      R4,R0
    407            int scr_w=ScreenW()-1;
   \   00000008   888100EF           SWI      +33160
   \   0000000C   015040E2           SUB      R5,R0,#+1
    408            int scr_h=ScreenH()-1;
   \   00000010   898100EF           SWI      +33161
    409            
    410            VIEWDATA *vd=data->vd;
   \   00000014   34A094E5           LDR      R10,[R4, #+52]
   \   00000018   016040E2           SUB      R6,R0,#+1
    411            
    412            if (data->gui.state==2)
   \   0000001C   0C00D4E5           LDRB     R0,[R4, #+12]
   \   00000020   020050E3           CMP      R0,#+2
   \   00000024   F08FBD18           POPNE    {R4-R11,PC}
    413            {
    414              int shift = scr_shift - 10;
    415              if (shift < 0) shift = 0;
    416              DrawRectangle(0,shift,scr_w,scr_h,0,
    417                GetPaletteAdrByColorIndex(0),
    418                GetPaletteAdrByColorIndex(0));
   \   00000028   0000A0E3           MOV      R0,#+0
   \   0000002C   2E0100EF           SWI      +302
   \   00000030   0070A0E1           MOV      R7,R0
   \   00000034   0000A0E3           MOV      R0,#+0
   \   00000038   2E0100EF           SWI      +302
   \   0000003C   80002DE9           PUSH     {R7}
   \   00000040   01002DE9           PUSH     {R0}
   \   00000044   0630A0E1           MOV      R3,R6
   \   00000048   0520A0E1           MOV      R2,R5
   \   0000004C   0010A0E3           MOV      R1,#+0
   \   00000050   0000A0E3           MOV      R0,#+0
   \   00000054   01002DE9           PUSH     {R0}
   \   00000058   B40100EF           SWI      +436
    419                 
    420              RenderPage(vd,1);
   \   0000005C   0110A0E3           MOV      R1,#+1
   \   00000060   0A00A0E1           MOV      R0,R10
   \   00000064   ........           _BLF     RenderPage,??RenderPage??rA
   \   00000068   ........           LDR      R0,??DataTable5  ;; Xipc + 28
   \   0000006C   000090E5           LDR      R0,[R0, #+0]
   \   00000070   0CD08DE2           ADD      SP,SP,#+12
   \   00000074   000050E3           CMP      R0,#+0
   \   00000078   F08FBD18           POPNE    {R4-R11,PC}
   \   0000007C   14029FE5           LDR      R0,??method0_0   ;; connect_state
   \   00000080   000090E5           LDR      R0,[R0, #+0]
   \   00000084   000050E3           CMP      R0,#+0
   \   00000088   0600000A           BEQ      ??method0_1
    421          //    DrawString(ws_console,0,0,scr_w,20,
    422          //		  FONT_SMALL,TEXT_NOFORMAT,
    423          //		  GetPaletteAdrByColorIndex(1),
    424          //      GetPaletteAdrByColorIndex(0));
    425              
    426              extern int connect_state;
    427              if (!STOPPED)
    428              {
    429                int w1, h1;
    430                if (connect_state)
    431                {
    432                  switch(connect_state)
   \   0000008C   010040E2           SUB      R0,R0,#+1
   \   00000090   020050E3           CMP      R0,#+2
   \   00000094   0300008A           BHI      ??method0_1
    433                  {
    434                  case 1: case 2: case 3:
    435          //          wsprintf(data->ws1,percent_t,"...");
    436          //          break;
    437          //        case 2:
    438          //          wsprintf(data->ws1,percent_t,"...");
    439                    wstrcpy(data->ws1, ws_console);
   \   00000098   FC019FE5           LDR      R0,??method0_0+0x4  ;; Xipc + 52
   \   0000009C   001090E5           LDR      R1,[R0, #+0]
   \   000000A0   480094E5           LDR      R0,[R4, #+72]
   \   000000A4   1F0100EF           SWI      +287
    440                    //wsprintf(data->ws1,percent_t,);
    441                    break;
    442          //        case 3:
    443          //          wsprintf(data->ws1,percent_t,"...");
    444          //          break;
    445                  }
    446                }
    447                ascii2ws(data->ws2, lgpData[LGP_Stop]);
   \                     ??method0_1:
   \   000000A8   F0019FE5           LDR      R0,??method0_0+0x8  ;; lgpData + 28
   \   000000AC   001090E5           LDR      R1,[R0, #+0]
   \   000000B0   4C0094E5           LDR      R0,[R4, #+76]
   \   000000B4   ........           _BLF     ascii2ws,??ascii2ws??rA
    448                
    449                h1=scr_h-GetFontYSIZE(FONT_SMALL)-2;
   \   000000B8   0800A0E3           MOV      R0,#+8
   \   000000BC   C50100EF           SWI      +453
   \   000000C0   000046E0           SUB      R0,R6,R0
   \   000000C4   027040E2           SUB      R7,R0,#+2
    450                w1=scr_w-Get_WS_width(data->ws2,FONT_SMALL)-2;
   \   000000C8   4C0094E5           LDR      R0,[R4, #+76]
   \   000000CC   0810A0E3           MOV      R1,#+8
   \   000000D0   080200EF           SWI      +520
   \   000000D4   000045E0           SUB      R0,R5,R0
   \   000000D8   028040E2           SUB      R8,R0,#+2
    451                DrawRectangle(0,h1,w1,scr_h,0,
    452                  GetPaletteAdrByColorIndex(1),
    453                  GetPaletteAdrByColorIndex(0));
   \   000000DC   0000A0E3           MOV      R0,#+0
   \   000000E0   2E0100EF           SWI      +302
   \   000000E4   0090A0E1           MOV      R9,R0
   \   000000E8   0100A0E3           MOV      R0,#+1
   \   000000EC   2E0100EF           SWI      +302
   \   000000F0   00022DE9           PUSH     {R9}
   \   000000F4   01002DE9           PUSH     {R0}
   \   000000F8   0630A0E1           MOV      R3,R6
   \   000000FC   0820A0E1           MOV      R2,R8
   \   00000100   0710A0E1           MOV      R1,R7
   \   00000104   0000A0E3           MOV      R0,#+0
   \   00000108   01002DE9           PUSH     {R0}
    454                DrawRectangle(w1+1,h1,scr_w,scr_h,0,
    455                  GetPaletteAdrByColorIndex(1),
    456                  GetPaletteAdrByColorIndex(0));
   \   0000010C   019088E2           ADD      R9,R8,#+1
   \   00000110   B40100EF           SWI      +436
   \   00000114   0000A0E3           MOV      R0,#+0
   \   00000118   2E0100EF           SWI      +302
   \   0000011C   00B0A0E1           MOV      R11,R0
   \   00000120   0100A0E3           MOV      R0,#+1
   \   00000124   2E0100EF           SWI      +302
   \   00000128   00082DE9           PUSH     {R11}
   \   0000012C   01002DE9           PUSH     {R0}
   \   00000130   0630A0E1           MOV      R3,R6
   \   00000134   0520A0E1           MOV      R2,R5
   \   00000138   0710A0E1           MOV      R1,R7
   \   0000013C   0000A0E3           MOV      R0,#+0
   \   00000140   01002DE9           PUSH     {R0}
   \   00000144   0900A0E1           MOV      R0,R9
   \   00000148   B40100EF           SWI      +436
    457                if ((view_url_mode==MODE_FILE && vd->loaded_sz<vd->page_sz) ||
    458                (view_url_mode==MODE_URL && connect_state==3 && vd->loaded_sz<vd->page_sz))
   \   0000014C   50019FE5           LDR      R0,??method0_0+0xC  ;; Xipc + 32
   \   00000150   000090E5           LDR      R0,[R0, #+0]
   \   00000154   18D08DE2           ADD      SP,SP,#+24
   \   00000158   000050E3           CMP      R0,#+0
   \   0000015C   0400001A           BNE      ??method0_2
   \   00000160   D8009AE5           LDR      R0,[R10, #+216]
   \   00000164   D4109AE5           LDR      R1,[R10, #+212]
   \   00000168   010050E1           CMP      R0,R1
   \   0000016C   0A0000BA           BLT      ??method0_3
   \   00000170   220000EA           B        ??method0_4
   \                     ??method0_2:
   \   00000174   010050E3           CMP      R0,#+1
   \   00000178   2000001A           BNE      ??method0_4
   \   0000017C   14019FE5           LDR      R0,??method0_0   ;; connect_state
   \   00000180   000090E5           LDR      R0,[R0, #+0]
   \   00000184   030050E3           CMP      R0,#+3
   \   00000188   1C00001A           BNE      ??method0_4
   \   0000018C   D8009AE5           LDR      R0,[R10, #+216]
   \   00000190   D4109AE5           LDR      R1,[R10, #+212]
   \   00000194   010050E1           CMP      R0,R1
   \   00000198   180000AA           BGE      ??method0_4
    459                {
    460                  DrawRectangle(1,h1+1,vd->loaded_sz*(w1-1)/vd->page_sz,scr_h-1,0,
    461                    GetPaletteAdrByColorIndex(2),
    462                    GetPaletteAdrByColorIndex(2));
   \                     ??method0_3:
   \   0000019C   0200A0E3           MOV      R0,#+2
   \   000001A0   2E0100EF           SWI      +302
   \   000001A4   00B0A0E1           MOV      R11,R0
   \   000001A8   0200A0E3           MOV      R0,#+2
   \   000001AC   2E0100EF           SWI      +302
   \   000001B0   00082DE9           PUSH     {R11}
   \   000001B4   01002DE9           PUSH     {R0}
   \   000001B8   011048E2           SUB      R1,R8,#+1
   \   000001BC   013046E2           SUB      R3,R6,#+1
   \   000001C0   0000A0E3           MOV      R0,#+0
   \   000001C4   01002DE9           PUSH     {R0}
   \   000001C8   D8009AE5           LDR      R0,[R10, #+216]
   \   000001CC   910000E0           MUL      R0,R1,R0
   \   000001D0   D4109AE5           LDR      R1,[R10, #+212]
   \   000001D4   ........           _BLF     ??div32_a,??rA??div32_a
   \   000001D8   0120A0E1           MOV      R2,R1
   \   000001DC   011087E2           ADD      R1,R7,#+1
   \   000001E0   0100A0E3           MOV      R0,#+1
   \   000001E4   B40100EF           SWI      +436
    463                  wsprintf(data->ws1,"%uB/%uB",vd->loaded_sz,vd->page_sz);
   \   000001E8   D4309AE5           LDR      R3,[R10, #+212]
   \   000001EC   D8209AE5           LDR      R2,[R10, #+216]
   \   000001F0   B0109FE5           LDR      R1,??method0_0+0x10  ;; `?<Constant "%uB/%uB">`
   \   000001F4   480094E5           LDR      R0,[R4, #+72]
   \   000001F8   240100EF           SWI      +292
   \   000001FC   0CD08DE2           ADD      SP,SP,#+12
    464                }
    465                DrawString(data->ws1,0,h1+2,w1,scr_h,FONT_SMALL,TEXT_ALIGNMIDDLE,
    466                  GetPaletteAdrByColorIndex(1),GetPaletteAdrByColorIndex(23));   
   \                     ??method0_4:
   \   00000200   1700A0E3           MOV      R0,#+23
   \   00000204   2E0100EF           SWI      +302
   \   00000208   00A0A0E1           MOV      R10,R0
   \   0000020C   0100A0E3           MOV      R0,#+1
   \   00000210   2E0100EF           SWI      +302
   \   00000214   00042DE9           PUSH     {R10}
   \   00000218   01002DE9           PUSH     {R0}
   \   0000021C   027087E2           ADD      R7,R7,#+2
   \   00000220   0830A0E1           MOV      R3,R8
   \   00000224   0720A0E1           MOV      R2,R7
   \   00000228   0200A0E3           MOV      R0,#+2
   \   0000022C   01002DE9           PUSH     {R0}
   \   00000230   0010A0E3           MOV      R1,#+0
   \   00000234   0800A0E3           MOV      R0,#+8
   \   00000238   01002DE9           PUSH     {R0}
   \   0000023C   0600A0E1           MOV      R0,R6
   \   00000240   01002DE9           PUSH     {R0}
   \   00000244   480094E5           LDR      R0,[R4, #+72]
   \   00000248   4C0100EF           SWI      +332
    467                DrawString(data->ws2,w1+1,h1+2,scr_w,scr_h,FONT_SMALL,TEXT_ALIGNMIDDLE,
    468                  GetPaletteAdrByColorIndex(1),GetPaletteAdrByColorIndex(23));      
   \   0000024C   1700A0E3           MOV      R0,#+23
   \   00000250   2E0100EF           SWI      +302
   \   00000254   0080A0E1           MOV      R8,R0
   \   00000258   0100A0E3           MOV      R0,#+1
   \   0000025C   2E0100EF           SWI      +302
   \   00000260   00012DE9           PUSH     {R8}
   \   00000264   01002DE9           PUSH     {R0}
   \   00000268   0530A0E1           MOV      R3,R5
   \   0000026C   0720A0E1           MOV      R2,R7
   \   00000270   0910A0E1           MOV      R1,R9
   \   00000274   0200A0E3           MOV      R0,#+2
   \   00000278   01002DE9           PUSH     {R0}
   \   0000027C   0800A0E3           MOV      R0,#+8
   \   00000280   01002DE9           PUSH     {R0}
   \   00000284   40002DE9           PUSH     {R6}
   \   00000288   4C0094E5           LDR      R0,[R4, #+76]
   \   0000028C   4C0100EF           SWI      +332
   \   00000290   28D08DE2           ADD      SP,SP,#+40
    469                
    470          //      DrawString(ws_console,0,0,scr_w,20,
    471          //		    FONT_SMALL,TEXT_NOFORMAT,
    472          //		    GetPaletteAdrByColorIndex(1),GetPaletteAdrByColorIndex(0));
    473              }
    474            }
    475          }
   \   00000294   F08FBDE8           POP      {R4-R11,PC}      ;; return
   \                     ??method0_0:
   \   00000298   ........           DC32     connect_state
   \   0000029C   ........           DC32     Xipc + 52
   \   000002A0   ........           DC32     lgpData + 28
   \   000002A4   ........           DC32     Xipc + 32
   \   000002A8   ........           DC32     `?<Constant "%uB/%uB">`
    476          

   \                                 In segment CODE, align 4, keep-with-next
    477          static void method1(VIEW_GUI *data,void *(*malloc_adr)(int))
    478          {
   \                     method1:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   \   00000004   04D04DE2           SUB      SP,SP,#+4
   \   00000008   0040A0E1           MOV      R4,R0
    479            VIEWDATA *vd=malloc(sizeof(VIEWDATA));
   \   0000000C   410FA0E3           MOV      R0,#+260
   \   00000010   140000EF           SWI      +20
   \   00000014   0050A0E1           MOV      R5,R0
    480            zeromem(vd,sizeof(VIEWDATA));
   \   00000018   411FA0E3           MOV      R1,#+260
   \   0000001C   1D0100EF           SWI      +285
    481            vd->ws=AllocWS(256);
   \   00000020   400FA0E3           MOV      R0,#+256
   \   00000024   250100EF           SWI      +293
   \   00000028   240085E5           STR      R0,[R5, #+36]
    482            vd->pos_cur_ref=0xFFFFFFFF; //    
   \   0000002C   0000E0E3           MVN      R0,#+0
   \   00000030   280085E5           STR      R0,[R5, #+40]
    483            *((unsigned short *)(&vd->current_tag_d))=0xFFFF;
   \   00000034   2018A0E1           MOV      R1,R0, LSR #+16
   \   00000038   B016C5E1           STRH     R1,[R5, #+96]
    484            vd->found_word_pos = -1;
   \   0000003C   E80085E5           STR      R0,[R5, #+232]
    485            data->vd=vd;
   \   00000040   345084E5           STR      R5,[R4, #+52]
    486            data->ws1=AllocWS(128);
   \   00000044   8000A0E3           MOV      R0,#+128
   \   00000048   250100EF           SWI      +293
   \   0000004C   480084E5           STR      R0,[R4, #+72]
    487            data->ws2=AllocWS(128);
   \   00000050   8000A0E3           MOV      R0,#+128
   \   00000054   250100EF           SWI      +293
   \   00000058   4C0084E5           STR      R0,[R4, #+76]
    488            data->gui.state=1;
   \   0000005C   0100A0E3           MOV      R0,#+1
   \   00000060   0C00C4E5           STRB     R0,[R4, #+12]
    489            STOPPED=0;
   \   00000064   ........           LDR      R0,??DataTable5  ;; Xipc + 28
   \   00000068   0010A0E3           MOV      R1,#+0
   \   0000006C   001080E5           STR      R1,[R0, #+0]
    490            if ((vd->cached=data->cached))
   \   00000070   380094E5           LDR      R0,[R4, #+56]
   \   00000074   24409FE5           LDR      R4,??method1_0   ;; StartGetFile
   \   00000078   040085E5           STR      R0,[R5, #+4]
   \   0000007C   000050E3           CMP      R0,#+0
    491            {
    492              SUBPROC((void *)StartGetFile,0,NULL);
   \   00000080   0020A013           MOVNE    R2,#+0
   \   00000084   0200001A           BNE      ??method1_1
    493            }
    494            else
    495            {
    496              SUBPROC((void *)StartGetFile,1,PushPageToStack());
   \   00000088   ........           _BLF     PushPageToStack,??PushPageToStack??rA
   \   0000008C   0020A0E1           MOV      R2,R0
   \   00000090   0110A0E3           MOV      R1,#+1
   \                     ??method1_1:
   \   00000094   0400A0E1           MOV      R0,R4
   \   00000098   710100EF           SWI      +369
    497            }
    498          }
   \   0000009C   3180BDE8           POP      {R0,R4,R5,PC}    ;; return
   \                     ??method1_0:
   \   000000A0   ........           DC32     StartGetFile
    499          

   \                                 In segment CODE, align 4, keep-with-next
    500          void FreeViewUrl(void)
    501          {
    502            freegstr(&view_url);
   \                     FreeViewUrl:
   \   00000000   00009FE5           LDR      R0,??FreeViewUrl_0  ;; Xipc + 36
   \   00000004   ........           _BF      freegstr,??freegstr??rA  ;; tailcall
   \                     ??FreeViewUrl_0:
   \   00000008   ........           DC32     Xipc + 36
    503          }
    504          

   \                                 In segment CODE, align 4, keep-with-next
    505          static void method2(VIEW_GUI *data,void (*mfree_adr)(void *))
    506          {
   \                     method2:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
    507            STOPPED=1;
   \   00000004   0110A0E3           MOV      R1,#+1
   \   00000008   0040A0E1           MOV      R4,R0
   \   0000000C   ........           LDR      R0,??DataTable5  ;; Xipc + 28
    508            SUBPROC((void*)StopINET);
    509            setPageParams(data->vd->view_line, data->vd->pos_cur_ref);
    510            FreeViewData(data->vd);
    511            data->vd=NULL;
   \   00000010   0050A0E3           MOV      R5,#+0
   \   00000014   001080E5           STR      R1,[R0, #+0]
   \   00000018   ........           LDR      R0,??DataTable12  ;; StopINET
   \   0000001C   710100EF           SWI      +369
   \   00000020   340094E5           LDR      R0,[R4, #+52]
   \   00000024   281090E5           LDR      R1,[R0, #+40]
   \   00000028   1C0090E5           LDR      R0,[R0, #+28]
   \   0000002C   ........           _BLF     setPageParams,??setPageParams??rA
   \   00000030   340094E5           LDR      R0,[R4, #+52]
   \   00000034   ........           _BLF     FreeViewData,??FreeViewData??rA
   \   00000038   345084E5           STR      R5,[R4, #+52]
    512            FreeWS(data->ws1);
   \   0000003C   480094E5           LDR      R0,[R4, #+72]
   \   00000040   290100EF           SWI      +297
    513            FreeWS(data->ws2);
   \   00000044   4C0094E5           LDR      R0,[R4, #+76]
   \   00000048   290100EF           SWI      +297
    514            data->gui.state=0;
   \   0000004C   0C50C4E5           STRB     R5,[R4, #+12]
    515            FreeViewUrl();
   \   00000050   3040BDE8           POP      {R4,R5,LR}       ;; Pop
   \   00000054   ........           B        FreeViewUrl      ;; tailcall
    516          }
    517          

   \                                 In segment CODE, align 4, keep-with-next
    518          static void method3(VIEW_GUI *data,void *(*malloc_adr)(int),void (*mfree_adr)(void *))
    519          {
   \                     method3:
   \   00000000   10402DE9           PUSH     {R4,LR}
   \   00000004   0040A0E1           MOV      R4,R0
    520          #ifdef ELKA
    521            DisableIconBar(1);
   \   00000008   0100A0E3           MOV      R0,#+1
   \   0000000C   3B0200EF           SWI      +571
    522          #endif
    523            SetCpuClockHi(2);
   \   00000010   0200A0E3           MOV      R0,#+2
   \   00000014   220200EF           SWI      +546
    524            PNGTOP_DESC *pltop=PNG_TOP();
   \   00000018   B98100EF           SWI      +33209
    525            pltop->dyn_pltop=&data->vd->dynpng_list->dp;
   \   0000001C   341094E5           LDR      R1,[R4, #+52]
   \   00000020   781091E5           LDR      R1,[R1, #+120]
   \   00000024   081080E5           STR      R1,[R0, #+8]
    526            ENABLE_REDRAW=1;
   \   00000028   ........           LDR      R0,??DataTable8  ;; ENABLE_REDRAW
   \   0000002C   0110A0E3           MOV      R1,#+1
   \   00000030   001080E5           STR      R1,[R0, #+0]
    527            DisableIDLETMR();
   \   00000034   7F0100EF           SWI      +383
    528            data->gui.state=2;
   \   00000038   0200A0E3           MOV      R0,#+2
   \   0000003C   0C00C4E5           STRB     R0,[R4, #+12]
    529          }
   \   00000040   1080BDE8           POP      {R4,PC}          ;; return
    530          

   \                                 In segment CODE, align 4, keep-with-next
    531          static void method4(VIEW_GUI *data,void (*mfree_adr)(void *))
    532          {
   \                     method4:
   \   00000000   10402DE9           PUSH     {R4,LR}
   \   00000004   0040A0E1           MOV      R4,R0
    533          #ifdef ELKA
    534            DisableIconBar(0);
   \   00000008   0000A0E3           MOV      R0,#+0
   \   0000000C   3B0200EF           SWI      +571
    535          #endif
    536            SetCpuClockLow(2);
   \   00000010   0200A0E3           MOV      R0,#+2
   \   00000014   230200EF           SWI      +547
    537            PNGTOP_DESC *pltop=PNG_TOP();
   \   00000018   B98100EF           SWI      +33209
    538            pltop->dyn_pltop=NULL;
   \   0000001C   0010A0E3           MOV      R1,#+0
   \   00000020   081080E5           STR      R1,[R0, #+8]
    539            ENABLE_REDRAW=0;
   \   00000024   ........           LDR      R0,??DataTable8  ;; ENABLE_REDRAW
   \   00000028   001080E5           STR      R1,[R0, #+0]
    540            if (data->gui.state!=2)
   \   0000002C   0C00D4E5           LDRB     R0,[R4, #+12]
   \   00000030   020050E3           CMP      R0,#+2
    541              return;
    542            data->gui.state=1;
   \   00000034   0100A003           MOVEQ    R0,#+1
   \   00000038   0C00C405           STRBEQ   R0,[R4, #+12]
    543          }
   \   0000003C   1080BDE8           POP      {R4,PC}          ;; return
    544          

   \                                 In segment CODE, align 4, keep-with-next
    545          void RunOtherByURL(const char *url, int other)
    546          {
   \                     RunOtherByURL:
   \   00000000   F0412DE9           PUSH     {R4-R8,LR}
    547            int f;
    548            unsigned int err;
    549            WSHDR *ws;
    550            char* filename;
    551            if (other == 3) //sieget
   \   00000004   ........           LDR      R4,??DataTable9  ;; Xipc
   \   00000008   ........           LDR      R7,??DataTable10  ;; `?<Constant "$urlcache\\\\$date$time.url">`
   \   0000000C   04D04DE2           SUB      SP,SP,#+4
   \   00000010   0050A0E1           MOV      R5,R0
   \   00000014   0160A0E1           MOV      R6,R1
   \   00000018   030056E3           CMP      R6,#+3
   \   0000001C   1B00001A           BNE      ??RunOtherByURL_0
    552            {
    553              if (sieget_ipc.data) mfree(sieget_ipc.data);
   \   00000020   140094E5           LDR      R0,[R4, #+20]
   \   00000024   000050E3           CMP      R0,#+0
   \   00000028   0000000A           BEQ      ??RunOtherByURL_1
   \   0000002C   150000EF           SWI      +21
    554              sieget_ipc.name_to = sieget_ipc_name; //  url  SieGet
   \                     ??RunOtherByURL_1:
   \   00000030   780087E2           ADD      R0,R7,#+120
   \   00000034   0C0084E5           STR      R0,[R4, #+12]
    555              sieget_ipc.name_from = ipc_my_name;
   \   00000038   580087E2           ADD      R0,R7,#+88
   \   0000003C   100084E5           STR      R0,[R4, #+16]
    556              int len = strlen(url)+1;
   \   00000040   0500A0E1           MOV      R0,R5
   \   00000044   1B0000EF           SWI      +27
   \   00000048   010080E2           ADD      R0,R0,#+1
    557              if (len%32 == 0) len+=1;
   \   0000004C   4012A0E1           ASR      R1,R0,#+4
   \   00000050   A11D80E0           ADD      R1,R0,R1, LSR #+27
   \   00000054   C112A0E1           ASR      R1,R1,#+5
   \   00000058   811250E0           SUBS     R1,R0,R1, LSL #+5
   \   0000005C   01008002           ADDEQ    R0,R0,#+1
    558              sieget_ipc.data = malloc(len);
   \   00000060   140000EF           SWI      +20
   \   00000064   140084E5           STR      R0,[R4, #+20]
    559              strcpy((char *)sieget_ipc.data, url);
   \   00000068   0510A0E1           MOV      R1,R5
   \   0000006C   1A0000EF           SWI      +26
    560              GBS_SendMessage(MMI_CEPID, MSG_IPC, SIEGET_GOTO_URL, &sieget_ipc);
   \   00000070   0C3084E2           ADD      R3,R4,#+12
   \   00000074   0020A0E3           MOV      R2,#+0
   \   00000078   B010A0E3           MOV      R1,#+176
   \   0000007C   DE1C81E3           ORR      R1,R1,#0xDE00
   \   00000080   0900A0E3           MOV      R0,#+9
   \   00000084   420C80E3           ORR      R0,R0,#0x4200
   \   00000088   000100EF           SWI      +256
   \   0000008C   F181BDE8           POP      {R0,R4-R8,PC}
    561            }
    562            else
    563            {
    564              if (other <= 1)
   \                     ??RunOtherByURL_0:
   \   00000090   020056E3           CMP      R6,#+2
    565              {
    566                filename = getSymbolicPath("$urlcache\\$date$time.url");
   \   00000094   0700A0B1           MOVLT    R0,R7
    567              }
    568              else
    569              {
    570                filename = getSymbolicPath("$urlcache\\$date$time.urss");
   \   00000098   3C0087A2           ADDGE    R0,R7,#+60
   \   0000009C   ........           _BLF     getSymbolicPath,??getSymbolicPath??rA
   \   000000A0   0070A0E1           MOV      R7,R0
    571              }
    572              f=fopen(filename,A_Create+A_Truncate+A_BIN+A_ReadWrite,P_READ+P_WRITE,&err);
   \   000000A4   0D30A0E1           MOV      R3,SP
   \   000000A8   602FA0E3           MOV      R2,#+384
   \   000000AC   0210A0E3           MOV      R1,#+2
   \   000000B0   831C81E3           ORR      R1,R1,#0x8300
   \   000000B4   0A0000EF           SWI      +10
   \   000000B8   0080A0E1           MOV      R8,R0
    573              if (f!=-1)
   \   000000BC   010078E3           CMN      R8,#+1
   \   000000C0   2300000A           BEQ      ??RunOtherByURL_2
    574              {
    575                fwrite(f,url,strlen(url),&err);
   \   000000C4   0500A0E1           MOV      R0,R5
   \   000000C8   1B0000EF           SWI      +27
   \   000000CC   0020A0E1           MOV      R2,R0
   \   000000D0   0D30A0E1           MOV      R3,SP
   \   000000D4   0510A0E1           MOV      R1,R5
   \   000000D8   0800A0E1           MOV      R0,R8
   \   000000DC   0C0000EF           SWI      +12
    576                fclose(f,&err);
   \   000000E0   0D10A0E1           MOV      R1,SP
   \   000000E4   0800A0E1           MOV      R0,R8
   \   000000E8   0D0000EF           SWI      +13
    577                ws=AllocWS(512);
   \   000000EC   800FA0E3           MOV      R0,#+512
   \   000000F0   250100EF           SWI      +293
   \   000000F4   0050A0E1           MOV      R5,R0
    578                switch (other)
   \   000000F8   FF20A0E3           MOV      R2,#+255
   \   000000FC   402F82E3           ORR      R2,R2,#0x100
   \   00000100   000056E3           CMP      R6,#+0
   \   00000104   0300000A           BEQ      ??RunOtherByURL_3
   \   00000108   016046E2           SUB      R6,R6,#+1
   \   0000010C   010056E3           CMP      R6,#+1
   \   00000110   0400009A           BLS      ??RunOtherByURL_4
   \   00000114   090000EA           B        ??RunOtherByURL_5
    579                {
    580                case 0: //other copy of ballet
    581                  str_2ws(ws,BALLET_EXE,511);
   \                     ??RunOtherByURL_3:
   \   00000118   551F84E2           ADD      R1,R4,#+340
   \   0000011C   6C0100EF           SWI      +364
    582                  ExecuteFile(ws,NULL,filename);
   \   00000120   0720A0E1           MOV      R2,R7
   \   00000124   020000EA           B        ??RunOtherByURL_6
    583                  break;
    584                case 1: //native browser
    585                case 2: //nrss
    586                  str_2ws(ws,filename,511);
   \                     ??RunOtherByURL_4:
   \   00000128   0710A0E1           MOV      R1,R7
   \   0000012C   6C0100EF           SWI      +364
    587                  ExecuteFile(ws,NULL,NULL);
   \   00000130   0020A0E3           MOV      R2,#+0
   \                     ??RunOtherByURL_6:
   \   00000134   0010A0E3           MOV      R1,#+0
   \   00000138   0500A0E1           MOV      R0,R5
   \   0000013C   940000EF           SWI      +148
    588                  break;
    589                }
    590                FreeWS(ws);
   \                     ??RunOtherByURL_5:
   \   00000140   0500A0E1           MOV      R0,R5
   \   00000144   290100EF           SWI      +297
    591                unlink(filename,&err);
   \   00000148   0D10A0E1           MOV      R1,SP
   \   0000014C   0700A0E1           MOV      R0,R7
   \   00000150   6B0100EF           SWI      +363
    592              }
    593              mfree(filename);
   \                     ??RunOtherByURL_2:
   \   00000154   0700A0E1           MOV      R0,R7
   \   00000158   150000EF           SWI      +21
    594            }
    595          }
   \   0000015C   F181BDE8           POP      {R0,R4-R8,PC}    ;; return
    596          

   \                                 In segment CODE, align 4, keep-with-next
    597          GoToLocalLinkPos(VIEWDATA* vd, char* anchor)
    598          {
   \                     GoToLocalLinkPos:
   \   00000000   F0412DE9           PUSH     {R4-R8,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   \   00000008   0160A0E1           MOV      R6,R1
    599            int j = 0;
   \   0000000C   0070A0E3           MOV      R7,#+0
    600            REFCACHE* rf_taga;
    601            int found = 0;
   \   00000010   0050A0E3           MOV      R5,#+0
   \   00000014   0E0000EA           B        ??GoToLocalLinkPos_0
    602            while((j<vd->ref_cache_size) && (!found))
    603            {
    604              rf_taga = vd->ref_cache+j;
   \                     ??GoToLocalLinkPos_1:
   \   00000018   CC1094E5           LDR      R1,[R4, #+204]
   \   0000001C   2800A0E3           MOV      R0,#+40
   \   00000020   901728E0           MLA      R8,R0,R7,R1
    605              if (rf_taga->tag == 'A')
   \   00000024   080098E5           LDR      R0,[R8, #+8]
   \   00000028   410050E3           CMP      R0,#+65
   \   0000002C   0700001A           BNE      ??GoToLocalLinkPos_2
    606              {
    607                if (!strncmp(anchor, vd->oms+rf_taga->value, rf_taga->size))
   \   00000030   100098E5           LDR      R0,[R8, #+16]
   \   00000034   3C1094E5           LDR      R1,[R4, #+60]
   \   00000038   1C2098E5           LDR      R2,[R8, #+28]
   \   0000003C   011080E0           ADD      R1,R0,R1
   \   00000040   0600A0E1           MOV      R0,R6
   \   00000044   150100EF           SWI      +277
   \   00000048   000050E3           CMP      R0,#+0
    608                {
    609                  found = 1;
   \   0000004C   0150A003           MOVEQ    R5,#+1
    610                }
    611              }
    612              j++;
   \                     ??GoToLocalLinkPos_2:
   \   00000050   017087E2           ADD      R7,R7,#+1
    613            }
   \                     ??GoToLocalLinkPos_0:
   \   00000054   D00094E5           LDR      R0,[R4, #+208]
   \   00000058   000057E1           CMP      R7,R0
   \   0000005C   010000AA           BGE      ??GoToLocalLinkPos_3
   \   00000060   000055E3           CMP      R5,#+0
   \   00000064   EBFFFF0A           BEQ      ??GoToLocalLinkPos_1
    614            if (found)
   \                     ??GoToLocalLinkPos_3:
   \   00000068   000055E3           CMP      R5,#+0
   \   0000006C   F081BD08           POPEQ    {R4-R8,PC}
    615            {
    616              found = 0;
   \   00000070   0050A0E3           MOV      R5,#+0
    617              int anchor_line = 0;
   \   00000074   0000A0E3           MOV      R0,#+0
    618              while ((anchor_line <= vd->view_line) && (!found))
   \                     ??GoToLocalLinkPos_4:
   \   00000078   1C1094E5           LDR      R1,[R4, #+28]
   \   0000007C   000051E1           CMP      R1,R0
   \   00000080   0B00003A           BCC      ??GoToLocalLinkPos_5
   \   00000084   000055E3           CMP      R5,#+0
   \   00000088   0900001A           BNE      ??GoToLocalLinkPos_5
    619              {
    620                if ((vd->lines_cache[anchor_line]).pos >= rf_taga->id2)
   \   0000008C   102094E5           LDR      R2,[R4, #+16]
   \   00000090   1410A0E3           MOV      R1,#+20
   \   00000094   912022E0           MLA      R2,R1,R0,R2
   \   00000098   001092E5           LDR      R1,[R2, #+0]
   \   0000009C   142098E5           LDR      R2,[R8, #+20]
   \   000000A0   020051E1           CMP      R1,R2
   \   000000A4   1C008425           STRCS    R0,[R4, #+28]
   \   000000A8   0150A023           MOVCS    R5,#+1
    621                {
    622                  vd->view_line = anchor_line;
    623                  found = 1;
    624                }
    625                else
    626                  anchor_line++;
   \   000000AC   01008032           ADDCC    R0,R0,#+1
   \   000000B0   F0FFFFEA           B        ??GoToLocalLinkPos_4
    627              }
    628              if ((!found) && LineDown(vd))
   \                     ??GoToLocalLinkPos_5:
   \   000000B4   000055E3           CMP      R5,#+0
   \   000000B8   F081BD18           POPNE    {R4-R8,PC}
   \   000000BC   0400A0E1           MOV      R0,R4
   \   000000C0   ........           _BLF     LineDown,??LineDown??rA
   \   000000C4   000050E3           CMP      R0,#+0
   \   000000C8   F081BD08           POPEQ    {R4-R8,PC}
    629              {
    630                while (((vd->lines_cache[vd->view_line]).pos < rf_taga->id2) && (LineDown(vd)));
   \                     ??GoToLocalLinkPos_6:
   \   000000CC   1C0094E5           LDR      R0,[R4, #+28]
   \   000000D0   102094E5           LDR      R2,[R4, #+16]
   \   000000D4   1410A0E3           MOV      R1,#+20
   \   000000D8   912020E0           MLA      R0,R1,R0,R2
   \   000000DC   141098E5           LDR      R1,[R8, #+20]
   \   000000E0   000090E5           LDR      R0,[R0, #+0]
   \   000000E4   010050E1           CMP      R0,R1
   \   000000E8   0300002A           BCS      ??GoToLocalLinkPos_7
   \   000000EC   0400A0E1           MOV      R0,R4
   \   000000F0   ........           _BLF     LineDown,??LineDown??rA
   \   000000F4   000050E3           CMP      R0,#+0
   \   000000F8   F3FFFF1A           BNE      ??GoToLocalLinkPos_6
    631                if ((vd->lines_cache[vd->view_line]).pos >= rf_taga->id2)
   \                     ??GoToLocalLinkPos_7:
   \   000000FC   1C0094E5           LDR      R0,[R4, #+28]
   \   00000100   102094E5           LDR      R2,[R4, #+16]
   \   00000104   1410A0E3           MOV      R1,#+20
   \   00000108   912020E0           MLA      R0,R1,R0,R2
   \   0000010C   141098E5           LDR      R1,[R8, #+20]
   \   00000110   000090E5           LDR      R0,[R0, #+0]
   \   00000114   010050E1           CMP      R0,R1
   \   00000118   0100003A           BCC      ??GoToLocalLinkPos_8
    632                  LineUp(vd);
   \   0000011C   0400A0E1           MOV      R0,R4
   \   00000120   ........           _BLF     LineUp,??LineUp??rA
    633                LineUp(vd);
   \                     ??GoToLocalLinkPos_8:
   \   00000124   0400A0E1           MOV      R0,R4
   \   00000128   ........           _BLF     LineUp,??LineUp??rA
    634              }
    635            }
    636          }
   \   0000012C   F081BDE8           POP      {R4-R8,PC}       ;; return

   \                                 In segment DATA_I, align 4, align-sorted
   \                     Xipc:
   \   00000000                      DS8 12
   \   0000000C                      REQUIRE `?<Initializer for Xipc>`
   \                     sieget_ipc:
   \   0000000C                      DS8 12
   \   00000018                      REQUIRE `?<Initializer for sieget_ipc>`
   \                     TERMINATED:
   \   00000018                      DS8 4
   \   0000001C                      REQUIRE `?<Initializer for TERMINATED>`
   \                     STOPPED:
   \   0000001C                      DS8 4
   \   00000020                      REQUIRE `?<Initializer for STOPPED>`
   \                     view_url_mode:
   \   00000020                      DS8 4
   \   00000024                      REQUIRE `?<Initializer for view_url_mode>`
   \                     view_url:
   \   00000024                      DS8 4
   \   00000028                      REQUIRE `?<Initializer for view_url>`
   \                     goto_url:
   \   00000028                      DS8 4
   \   0000002C                      REQUIRE `?<Initializer for goto_url>`
   \                     from_url:
   \   0000002C                      DS8 4
   \   00000030                      REQUIRE `?<Initializer for from_url>`
   \                     goto_params:
   \   00000030                      DS8 4
   \   00000034                      REQUIRE `?<Initializer for goto_params>`
   \                     ws_console:
   \   00000034                      DS8 4
   \   00000038                      REQUIRE `?<Initializer for ws_console>`
   \                     search_string:
   \   00000038                      DS8 4
   \   0000003C                      REQUIRE `?<Initializer for search_string>`
   \                     search_isCaseSens:
   \   0000003C                      DS8 4
   \   00000040                      REQUIRE `?<Initializer for search_isCaseSens>`
   \                     search_inet_string:
   \   00000040                      DS8 4
   \   00000044                      REQUIRE `?<Initializer for search_inet_string>`
   \                     maincsm_id:
   \   00000044                      DS8 4
   \   00000048                      REQUIRE `?<Initializer for maincsm_id>`
    637          
    638          extern const unsigned int cfgKeyEnter;
    639          extern const unsigned int cfgKeyScrollUp;
    640          extern const unsigned int cfgKeyScrollDown;
    641          extern const unsigned int cfgKeyPageUp;
    642          extern const unsigned int cfgKeyPageDown;
    643          extern const unsigned int cfgKeyHalfPageUp;
    644          extern const unsigned int cfgKeyHalfPageDown;
    645          extern const unsigned int cfgKeyBegin;
    646          extern const unsigned int cfgKeyEnd;
    647          extern const unsigned int cfgKeyBack;
    648          extern const unsigned int cfgKeyForward;
    649          extern const unsigned int cfgKeyReload;
    650          extern const unsigned int cfgKeyShowURL;
    651          extern const unsigned int cfgKeySearchAgain;
    652          extern const unsigned int cfgKeyTextPage;
    653          extern const unsigned int cfgKeyMenu;
    654          extern const unsigned int cfgKeyNewCopy;
    655          extern const unsigned int cfgKeySieget;
    656          extern const unsigned int cfgKeyBrowser;
    657          extern const unsigned int cfgKeyQuit;
    658          
    659          int longpress;
   \                     longpress:
   \   00000048                      DS8 4
   \   0000004C                      REQUIRE `?<Initializer for longpress>`
   \                     xtask_ipc_name:
   \   0000004C                      DS8 8
   \   00000054                      REQUIRE `?<Initializer for xtask_ipc_name>`
   \                     BALLET_PATH:
   \   00000054                      DS8 256
   \   00000154                      REQUIRE `?<Initializer for BALLET_PATH>`
   \                     BALLET_EXE:
   \   00000154                      DS8 256
   \   00000254                      REQUIRE `?<Initializer for BALLET_EXE>`
    660          

   \                                 In segment CODE, align 4, keep-with-next
    661          static int method5(VIEW_GUI *data,GUI_MSG *msg)
    662          {
   \                     method5:
   \   00000000   F04F2DE9           PUSH     {R4-R11,LR}
    663            VIEWDATA *vd=data->vd;
    664            REFCACHE *rf;
    665            int m=msg->gbsmsg->msg;
    666            int k=msg->gbsmsg->submess;
   \   00000004   347B9FE5           LDR      R7,??method5_2   ;; Xipc
   \   00000008   90D04DE2           SUB      SP,SP,#+144
   \   0000000C   344090E5           LDR      R4,[R0, #+52]
   \   00000010   040091E5           LDR      R0,[R1, #+4]
   \   00000014   0060E0E3           MVN      R6,#+0
   \   00000018   042090E5           LDR      R2,[R0, #+4]
   \   0000001C   9310A0E3           MOV      R1,#+147
   \   00000020   00208DE5           STR      R2,[SP, #+0]
   \   00000024   085090E5           LDR      R5,[R0, #+8]
   \   00000028   401F81E3           ORR      R1,R1,#0x100
   \   0000002C   010052E1           CMP      R2,R1
   \   00000030   02108112           ADDNE    R1,R1,#+2
   \   00000034   01005211           CMPNE    R2,R1
   \   00000038   6402001A           BNE      ??method5_3
    667            if ((m==KEY_DOWN)||(m==LONG_PRESS))
    668            {
    669              if ((k == cfgKeyEnter) && (vd->pos_cur_ref!=0xFFFFFFFF))
   \   0000003C   000B9FE5           LDR      R0,??method5_2+0x4  ;; cfgKeyEnter
   \   00000040   281094E5           LDR      R1,[R4, #+40]
   \   00000044   000090E5           LDR      R0,[R0, #+0]
   \   00000048   000055E1           CMP      R5,R0
   \   0000004C   DC00001A           BNE      ??method5_4
   \   00000050   060051E1           CMP      R1,R6
   \   00000054   DA00000A           BEQ      ??method5_4
    670              {
    671                rf=FindReference(vd,vd->pos_cur_ref);
    672                if (rf)
   \   00000058   ........           LDR      R9,??DataTable11  ;; lgpData
   \   0000005C   0400A0E1           MOV      R0,R4
   \   00000060   ........           _BLF     FindReference,??FindReference??rA
   \   00000064   0080B0E1           MOVS     R8,R0
   \   00000068   D300000A           BEQ      ??method5_5
   \   0000006C   000098E5           LDR      R0,[R8, #+0]
   \   00000070   081094E5           LDR      R1,[R4, #+8]
   \   00000074   083098E5           LDR      R3,[R8, #+8]
   \   00000078   282097E5           LDR      R2,[R7, #+40]
   \   0000007C   80A081E0           ADD      R10,R1,R0, LSL #+1
   \   00000080   0C1098E5           LDR      R1,[R8, #+12]
   \   00000084   440097E5           LDR      R0,[R7, #+68]
   \   00000088   40B043E2           SUB      R11,R3,#+64
   \   0000008C   38005BE3           CMP      R11,#+56
   \   00000090   C100008A           BHI      ??method5_6
   \   00000094   01CF8FE2           ADR      R12,??method5_0
   \   00000098   0BC0DCE7           LDRB     R12,[R12, R11]
   \   0000009C   0CF18FE0           ADD      PC,PC,R12, LSL #+2
   \                     ??method5_0:
   \   000000A0   58BEBEBE           DC8      +88,+190,+190,+190
   \   000000A4   BEBEBEBE           DC8      +190,+190,+190,+190
   \   000000A8   BEBEBEBE           DC8      +190,+190,+190,+190
   \   000000AC   2DBEBEBE           DC8      +45,+190,+190,+190
   \   000000B0   BEBEBEBE           DC8      +190,+190,+190,+190
   \   000000B4   BEBEBEBE           DC8      +190,+190,+190,+190
   \   000000B8   BEBE0EBE           DC8      +190,+190,+14,+190
   \   000000BC   BEBE58BE           DC8      +190,+190,+88,+190
   \   000000C0   BEBEBE86           DC8      +190,+190,+190,+134
   \   000000C4   BEBEBEBE           DC8      +190,+190,+190,+190
   \   000000C8   BEB1BEBE           DC8      +190,+177,+190,+190
   \   000000CC   BEBEBEBE           DC8      +190,+190,+190,+190
   \   000000D0   A9BE62B6           DC8      +169,+190,+98,+182
   \   000000D4   BEB1BEBE           DC8      +190,+177,+190,+190
   \   000000D8   A9000000           DC8      +169,+0,+0,+0
    673                {
    674                  switch(rf->tag)
    675                  {
    676                  case 'Z':
    677                    if (rf->id!=_NOREF)
   \                     ??method5_7:
   \   000000DC   060051E1           CMP      R1,R6
   \   000000E0   3A02000A           BEQ      ??method5_3
    678                    {
    679                      char *c=extract_omstr(vd,rf->id);
   \   000000E4   0400A0E1           MOV      R0,R4
   \   000000E8   ........           _BLF     extract_omstr,??extract_omstr??rA
    680                      unsigned int l=_rshort2(vd->oms+rf->id);
   \   000000EC   3C1094E5           LDR      R1,[R4, #+60]
   \   000000F0   0050A0E1           MOV      R5,R0
   \   000000F4   0C0098E5           LDR      R0,[R8, #+12]
   \   000000F8   010080E0           ADD      R0,R0,R1
   \   000000FC   ........           _BLF     _rshort2,??_rshort2??rA
   \   00000100   0040A0E1           MOV      R4,R0
    681                      _safe_free(goto_url);
   \   00000104   280097E5           LDR      R0,[R7, #+40]
   \   00000108   000050E3           CMP      R0,#+0
   \   0000010C   0100000A           BEQ      ??method5_8
   \   00000110   150000EF           SWI      +21
   \   00000114   0000A0E3           MOV      R0,#+0
   \                     ??method5_8:
   \   00000118   280087E5           STR      R0,[R7, #+40]
    682                      goto_url=malloc(l-strlen(c)+1);
   \   0000011C   0500A0E1           MOV      R0,R5
   \   00000120   1B0000EF           SWI      +27
   \   00000124   000044E0           SUB      R0,R4,R0
   \   00000128   010080E2           ADD      R0,R0,#+1
   \   0000012C   140000EF           SWI      +20
   \   00000130   280087E5           STR      R0,[R7, #+40]
    683                      strcpy(goto_url,c+strlen(c)+1);
   \   00000134   0500A0E1           MOV      R0,R5
   \   00000138   1B0000EF           SWI      +27
   \   0000013C   050080E0           ADD      R0,R0,R5
   \   00000140   011080E2           ADD      R1,R0,#+1
   \   00000144   280097E5           LDR      R0,[R7, #+40]
   \   00000148   1A0000EF           SWI      +26
    684                      mfree(c);
   \   0000014C   0500A0E1           MOV      R0,R5
   \   00000150   150000EF           SWI      +21
    685                      return 0xFF;
   \                     ??method5_9:
   \   00000154   780000EA           B        ??method5_10
    686                    }
    687                    break;
    688                  case 'L':
    689                    if (rf->id!=_NOREF)
   \                     ??method5_11:
   \   00000158   060051E1           CMP      R1,R6
   \   0000015C   1B02000A           BEQ      ??method5_3
    690                    {
    691                      // 1/http:           
    692                      // 0/http:         
    693                      _safe_free(goto_url);
   \   00000160   000052E3           CMP      R2,#+0
   \   00000164   0100000A           BEQ      ??method5_12
   \   00000168   0200A0E1           MOV      R0,R2
   \   0000016C   150000EF           SWI      +21
   \                     ??method5_12:
   \   00000170   0000A0E3           MOV      R0,#+0
   \   00000174   280087E5           STR      R0,[R7, #+40]
    694                      goto_url=extract_omstr(vd,rf->id);
   \   00000178   0C1098E5           LDR      R1,[R8, #+12]
   \   0000017C   0400A0E1           MOV      R0,R4
   \   00000180   ........           _BLF     extract_omstr,??extract_omstr??rA
   \   00000184   280087E5           STR      R0,[R7, #+40]
    695                      
    696                      // 0/op:fileselect select file for upload
    697                      if (!strcmp("0/op:fileselect",goto_url))
   \   00000188   0010A0E1           MOV      R1,R0
   \   0000018C   B4099FE5           LDR      R0,??method5_2+0x8  ;; `?<Constant "$urlcache\\\\$date$time.url">` + 44
   \   00000190   190000EF           SWI      +25
   \   00000194   000050E3           CMP      R0,#+0
   \   00000198   0B00001A           BNE      ??method5_13
    698                      {
    699                        MAIN_CSM *main_csm;
    700                        int bookmark_menu_id;
    701                        if ((main_csm=(MAIN_CSM *)FindCSMbyID(maincsm_id)))
   \   0000019C   440097E5           LDR      R0,[R7, #+68]
   \   000001A0   080100EF           SWI      +264
   \   000001A4   0090B0E1           MOVS     R9,R0
   \   000001A8   0700000A           BEQ      ??method5_13
    702                        {
    703                          REFCACHE *prev_ref=FindReference(vd,vd->pos_prev_ref);
   \   000001AC   341094E5           LDR      R1,[R4, #+52]
   \   000001B0   0400A0E1           MOV      R0,R4
   \   000001B4   ........           _BLF     FindReference,??FindReference??rA
    704                          bookmark_menu_id=open_fm(PrepareFileForUpload, prev_ref);
    705                          main_csm->sel_bmk=bookmark_menu_id;
   \   000001B8   0010A0E1           MOV      R1,R0
   \   000001BC   88099FE5           LDR      R0,??method5_2+0xC  ;; PrepareFileForUpload
   \   000001C0   ........           _BLF     open_fm,??open_fm??rA
   \                     ??method5_14:
   \   000001C4   300089E5           STR      R0,[R9, #+48]
    706                          break;
   \   000001C8   000200EA           B        ??method5_3
    707                        }
    708                      }
    709                      
    710                      if (goto_url[0] == '#') //local link
   \                     ??method5_13:
   \   000001CC   281097E5           LDR      R1,[R7, #+40]
   \   000001D0   0000D1E5           LDRB     R0,[R1, #+0]
   \   000001D4   230050E3           CMP      R0,#+35
   \   000001D8   0300001A           BNE      ??method5_15
    711                      {
    712                        GoToLocalLinkPos(vd, goto_url+1);
   \   000001DC   011081E2           ADD      R1,R1,#+1
   \   000001E0   0400A0E1           MOV      R0,R4
   \   000001E4   ........           BL       GoToLocalLinkPos
    713                        break;
   \   000001E8   F80100EA           B        ??method5_3
    714                      }
    715                      
    716                      // 0/javascript:  upload data
    717                      if (!strncmp("0/javascript",goto_url,12))
   \                     ??method5_15:
   \   000001EC   5C099FE5           LDR      R0,??method5_2+0x10  ;; `?<Constant "$urlcache\\\\$date$time.url">` + 28
   \   000001F0   0C20A0E3           MOV      R2,#+12
   \   000001F4   150100EF           SWI      +277
   \   000001F8   000050E3           CMP      R0,#+0
   \   000001FC   4E00001A           BNE      ??method5_10
    718                      {
    719                        from_url=malloc(strlen(vd->pageurl)+1);
   \   00000200   420000EA           B        ??method5_16
    720                        strcpy(from_url,vd->pageurl);
    721                        goto_params=collectItemsParams(vd,rf);
    722                      }
    723                      return 0xFF;
    724                    }
    725                    break;
    726                  case '@':
    727                    if (rf->id!=_NOREF)
   \                     ??method5_17:
   \   00000204   060051E1           CMP      R1,R6
   \   00000208   F001000A           BEQ      ??method5_3
    728                    {
    729                      char *s=extract_omstr(vd,rf->id);
   \   0000020C   0400A0E1           MOV      R0,R4
   \   00000210   ........           _BLF     extract_omstr,??extract_omstr??rA
   \   00000214   0080A0E1           MOV      R8,R0
    730                      RunOtherByURL(s,1);
   \   00000218   0110A0E3           MOV      R1,#+1
   \   0000021C   ........           BL       RunOtherByURL
    731                      mfree(s);
   \   00000220   0800A0E1           MOV      R0,R8
   \                     ??method5_18:
   \   00000224   150000EF           SWI      +21
   \   00000228   E80100EA           B        ??method5_3
    732                    }
    733                    break;
    734                  case '^':
    735                    if (rf->id!=_NOREF)
    736                    {
    737                      char *s=extract_omstr(vd,rf->id);
    738                      RunOtherByURL(s,1);
    739                      mfree(s);
    740                    }
    741                    break;
    742                  case 'r':
    743                    {
    744                      REFCACHE *rfp;
    745                      int i;
    746                      if (vd->rawtext[rf->begin+1]!=vd->WCHAR_RADIO_OFF) break;
   \                     ??method5_19:
   \   0000022C   B200DAE1           LDRH     R0,[R10, #+2]
   \   00000230   F41094E5           LDR      R1,[R4, #+244]
   \   00000234   010050E1           CMP      R0,R1
   \   00000238   E401001A           BNE      ??method5_3
    747                      vd->rawtext[rf->begin+1]=vd->WCHAR_RADIO_ON;
   \   0000023C   F80094E5           LDR      R0,[R4, #+248]
    748                      i=0;
   \   00000240   0020A0E3           MOV      R2,#+0
   \   00000244   B200CAE1           STRH     R0,[R10, #+2]
   \   00000248   0D0000EA           B        ??method5_20
    749                      while((i=FindReferenceById(vd,rf->id,i))>=0)
    750                      {
    751                        rfp=vd->ref_cache+i;
   \                     ??method5_21:
   \   0000024C   CC1094E5           LDR      R1,[R4, #+204]
   \   00000250   2820A0E3           MOV      R2,#+40
   \   00000254   921021E0           MLA      R1,R2,R0,R1
    752                        if (rfp!=rf)
   \   00000258   080051E1           CMP      R1,R8
   \   0000025C   0700000A           BEQ      ??method5_22
   \   00000260   001091E5           LDR      R1,[R1, #+0]
   \   00000264   082094E5           LDR      R2,[R4, #+8]
   \   00000268   F83094E5           LDR      R3,[R4, #+248]
   \   0000026C   811082E0           ADD      R1,R2,R1, LSL #+1
   \   00000270   B220D1E1           LDRH     R2,[R1, #+2]
   \   00000274   030052E1           CMP      R2,R3
    753                          if (vd->rawtext[rfp->begin+1]==vd->WCHAR_RADIO_ON)
    754                            vd->rawtext[rfp->begin+1]=vd->WCHAR_RADIO_OFF;
   \   00000278   F4209405           LDREQ    R2,[R4, #+244]
   \   0000027C   B220C101           STRHEQ   R2,[R1, #+2]
    755                        i++;
   \                     ??method5_22:
   \   00000280   012080E2           ADD      R2,R0,#+1
    756                      }
   \                     ??method5_20:
   \   00000284   0C1098E5           LDR      R1,[R8, #+12]
   \   00000288   0400A0E1           MOV      R0,R4
   \   0000028C   ........           _BLF     FindReferenceById,??FindReferenceById??rA
   \   00000290   000050E3           CMP      R0,#+0
   \   00000294   ECFFFF5A           BPL      ??method5_21
    757                    }
    758                    if (!rf->no_upload)
   \   00000298   2000D8E5           LDRB     R0,[R8, #+32]
   \   0000029C   010010E3           TST      R0,#0x1
   \   000002A0   CA01001A           BNE      ??method5_3
    759                    {
    760                      _safe_free(goto_url);
   \   000002A4   280097E5           LDR      R0,[R7, #+40]
   \   000002A8   000050E3           CMP      R0,#+0
   \   000002AC   0F00000A           BEQ      ??method5_23
   \   000002B0   150000EF           SWI      +21
   \                     ??method5_24:
   \   000002B4   0000A0E3           MOV      R0,#+0
   \                     ??method5_25:
   \   000002B8   0C0000EA           B        ??method5_23
    761                      goto_url=malloc(strlen(vd->pageurl)+1);
    762                      strcpy(goto_url,vd->pageurl);
    763                      from_url=malloc(strlen(vd->pageurl)+1);
    764                      strcpy(from_url,vd->pageurl);
    765                      goto_params=collectItemsParams(vd,rf);
    766                      return 0xFF;
    767                    }
    768                    break;
    769                  case 'c':
    770                    if (vd->rawtext[rf->begin+1]==vd->WCHAR_BUTTON_ON)
   \                     ??method5_26:
   \   000002BC   B210DAE1           LDRH     R1,[R10, #+2]
   \   000002C0   F00094E5           LDR      R0,[R4, #+240]
   \   000002C4   000051E1           CMP      R1,R0
    771                      vd->rawtext[rf->begin+1]=vd->WCHAR_BUTTON_OFF;
   \   000002C8   EC009405           LDREQ    R0,[R4, #+236]
    772                    else
    773                      vd->rawtext[rf->begin+1]=vd->WCHAR_BUTTON_ON;
   \   000002CC   B200CAE1           STRH     R0,[R10, #+2]
    774                    if (!rf->no_upload)
   \   000002D0   2000D8E5           LDRB     R0,[R8, #+32]
   \   000002D4   010010E3           TST      R0,#0x1
   \   000002D8   BC01001A           BNE      ??method5_3
    775                    {
    776                      _safe_free(goto_url);
   \   000002DC   280097E5           LDR      R0,[R7, #+40]
   \   000002E0   000050E3           CMP      R0,#+0
   \   000002E4   0100000A           BEQ      ??method5_23
   \   000002E8   150000EF           SWI      +21
   \   000002EC   0000A0E3           MOV      R0,#+0
   \                     ??method5_23:
   \   000002F0   280087E5           STR      R0,[R7, #+40]
    777                      goto_url=malloc(strlen(vd->pageurl)+1);
   \   000002F4   E00094E5           LDR      R0,[R4, #+224]
   \   000002F8   1B0000EF           SWI      +27
   \   000002FC   010080E2           ADD      R0,R0,#+1
   \   00000300   140000EF           SWI      +20
   \   00000304   280087E5           STR      R0,[R7, #+40]
    778                      strcpy(goto_url,vd->pageurl);
   \   00000308   E01094E5           LDR      R1,[R4, #+224]
   \   0000030C   1A0000EF           SWI      +26
    779                      from_url=malloc(strlen(vd->pageurl)+1);
   \                     ??method5_16:
   \   00000310   E00094E5           LDR      R0,[R4, #+224]
   \   00000314   1B0000EF           SWI      +27
   \   00000318   010080E2           ADD      R0,R0,#+1
   \   0000031C   140000EF           SWI      +20
   \   00000320   2C0087E5           STR      R0,[R7, #+44]
    780                      strcpy(from_url,vd->pageurl);
   \   00000324   E01094E5           LDR      R1,[R4, #+224]
   \   00000328   1A0000EF           SWI      +26
    781                      goto_params=collectItemsParams(vd,rf);
   \   0000032C   0810A0E1           MOV      R1,R8
   \   00000330   0400A0E1           MOV      R0,R4
   \   00000334   ........           BL       collectItemsParams
   \   00000338   300087E5           STR      R0,[R7, #+48]
    782                      return 0xFF;
   \                     ??method5_10:
   \   0000033C   FF00A0E3           MOV      R0,#+255
   \                     ??method5_27:
   \   00000340   90D08DE2           ADD      SP,SP,#+144
   \   00000344   F08FBDE8           POP      {R4-R11,PC}
    783                    }
    784                    break;
    785                  case 'x':
    786                  case 'p':
    787                    {
    788                      MAIN_CSM *main_csm;
    789                      int bookmark_menu_id;
    790                      if ((main_csm=(MAIN_CSM *)FindCSMbyID(maincsm_id)))
   \                     ??method5_28:
   \   00000348   080100EF           SWI      +264
   \   0000034C   0090B0E1           MOVS     R9,R0
   \   00000350   9E01000A           BEQ      ??method5_3
    791                      {
    792                        bookmark_menu_id=CreateInputBox(vd, rf, vd->pos_cur_ref);
    793                        main_csm->sel_bmk=bookmark_menu_id;
   \   00000354   282094E5           LDR      R2,[R4, #+40]
   \   00000358   0810A0E1           MOV      R1,R8
   \   0000035C   0400A0E1           MOV      R0,R4
   \   00000360   ........           _BLF     CreateInputBox,??CreateInputBox??rA
   \   00000364   96FFFFEA           B        ??method5_14
    794                      }
    795                    }
    796                    break;
    797                  case 'i':
    798                  case 'u':
    799                    _safe_free(goto_url);
   \                     ??method5_29:
   \   00000368   000052E3           CMP      R2,#+0
   \   0000036C   D0FFFF0A           BEQ      ??method5_24
   \   00000370   0200A0E1           MOV      R0,R2
   \   00000374   150000EF           SWI      +21
   \                     ??method5_30:
   \   00000378   CDFFFFEA           B        ??method5_24
    800                    goto_url=malloc(strlen(vd->pageurl)+1);
    801                    strcpy(goto_url,vd->pageurl);
    802                    from_url=malloc(strlen(vd->pageurl)+1);
    803                    strcpy(from_url,vd->pageurl);
    804                    goto_params=collectItemsParams(vd,rf);
    805                    return 0xFF;
    806                  case 's':
    807                    
    808                    {
    809                      MAIN_CSM *main_csm;
    810                      int bookmark_menu_id;
    811                      if ((main_csm=(MAIN_CSM *)FindCSMbyID(maincsm_id)))
   \                     ??method5_31:
   \   0000037C   080100EF           SWI      +264
   \   00000380   0090B0E1           MOVS     R9,R0
   \   00000384   9101000A           BEQ      ??method5_3
    812                      {
    813                        bookmark_menu_id=ChangeMenuSelection(vd, rf, vd->pos_cur_ref);
    814                        main_csm->sel_bmk=bookmark_menu_id;
   \   00000388   282094E5           LDR      R2,[R4, #+40]
   \   0000038C   0810A0E1           MOV      R1,R8
   \   00000390   0400A0E1           MOV      R0,R4
   \   00000394   ........           _BLF     ChangeMenuSelection,??ChangeMenuSelection??rA
   \   00000398   89FFFFEA           B        ??method5_14
    815                      }
    816                    }
    817                    break;
    818                  default:
    819                    {
    820                      char c[128];
    821                      sprintf(c,lgpData[LGP_RefUnderConstruction],rf->tag);
   \                     ??method5_6:
   \   0000039C   101099E5           LDR      R1,[R9, #+16]
   \   000003A0   0320A0E1           MOV      R2,R3
   \   000003A4   10008DE2           ADD      R0,SP,#+16
   \   000003A8   160000EF           SWI      +22
    822                      ShowMSG(1,(int)c);
   \   000003AC   10108DE2           ADD      R1,SP,#+16
   \                     ??method5_32:
   \   000003B0   0100A0E3           MOV      R0,#+1
   \   000003B4   480100EF           SWI      +328
   \   000003B8   840100EA           B        ??method5_3
    823                    }
    824                  break;
    825                  }
    826                }
    827                else
    828                {
    829          	      ShowMSG(1,(int)lgpData[LGP_RefEmpty]);
   \                     ??method5_5:
   \   000003BC   141099E5           LDR      R1,[R9, #+20]
   \   000003C0   FAFFFFEA           B        ??method5_32
    830                }
    831              }
    832              else if (k == cfgKeyScrollUp)
   \                     ??method5_4:
   \   000003C4   88079FE5           LDR      R0,??method5_2+0x14  ;; cfgKeyScrollUp
   \   000003C8   000090E5           LDR      R0,[R0, #+0]
   \   000003CC   000055E1           CMP      R5,R0
   \   000003D0   1300001A           BNE      ??method5_33
    833              {
    834                if (vd->pos_cur_ref==0xFFFFFFFF&&vd->pos_last_ref!=0xFFFFFFFF)
   \   000003D4   060051E1           CMP      R1,R6
   \   000003D8   0400001A           BNE      ??method5_34
   \   000003DC   300094E5           LDR      R0,[R4, #+48]
   \   000003E0   060050E1           CMP      R0,R6
   \   000003E4   0100000A           BEQ      ??method5_34
    835                  vd->pos_cur_ref=vd->pos_last_ref;
   \                     ??method5_35:
   \   000003E8   280084E5           STR      R0,[R4, #+40]
   \   000003EC   770100EA           B        ??method5_3
    836                else
    837                  if (vd->pos_prev_ref!=0xFFFFFFFF)
   \                     ??method5_34:
   \   000003F0   340094E5           LDR      R0,[R4, #+52]
   \   000003F4   060050E1           CMP      R0,R6
   \   000003F8   FAFFFF1A           BNE      ??method5_35
    838                    vd->pos_cur_ref=vd->pos_prev_ref;
    839                  else
    840                  {
    841                    scrollUp(vd,20);
   \   000003FC   1410A0E3           MOV      R1,#+20
   \   00000400   0400A0E1           MOV      R0,R4
   \   00000404   ........           _BLF     scrollUp,??scrollUp??rA
    842                    RenderPage(vd,0);
   \   00000408   0010A0E3           MOV      R1,#+0
   \   0000040C   0400A0E1           MOV      R0,R4
   \   00000410   ........           _BLF     RenderPage,??RenderPage??rA
    843                    if (vd->pos_prev_ref!=0xFFFFFFFF)
   \   00000414   340094E5           LDR      R0,[R4, #+52]
   \                     ??method5_36:
   \   00000418   060050E1           CMP      R0,R6
   \   0000041C   6B01000A           BEQ      ??method5_3
    844                      vd->pos_cur_ref=vd->pos_prev_ref;
   \   00000420   F0FFFFEA           B        ??method5_35
    845                  }
    846              }
    847              else if (k == cfgKeyScrollDown)
   \                     ??method5_33:
   \   00000424   2C079FE5           LDR      R0,??method5_2+0x18  ;; cfgKeyScrollDown
   \   00000428   000090E5           LDR      R0,[R0, #+0]
   \   0000042C   000055E1           CMP      R5,R0
   \   00000430   1000001A           BNE      ??method5_37
    848              {
    849                if (vd->pos_cur_ref==0xFFFFFFFF&&vd->pos_first_ref!=0xFFFFFFFF)
   \   00000434   060051E1           CMP      R1,R6
   \   00000438   0300001A           BNE      ??method5_38
   \   0000043C   2C0094E5           LDR      R0,[R4, #+44]
   \   00000440   060050E1           CMP      R0,R6
    850                  vd->pos_cur_ref=vd->pos_first_ref;
   \   00000444   28008415           STRNE    R0,[R4, #+40]
   \   00000448   6001001A           BNE      ??method5_3
    851                else
    852                  if (vd->pos_next_ref!=0xFFFFFFFF)
   \                     ??method5_38:
   \   0000044C   380094E5           LDR      R0,[R4, #+56]
   \   00000450   060050E1           CMP      R0,R6
   \   00000454   E3FFFF1A           BNE      ??method5_35
    853                    vd->pos_cur_ref=vd->pos_next_ref;
    854                  else
    855                  {
    856                    scrollDown(vd,20);
   \   00000458   1410A0E3           MOV      R1,#+20
   \   0000045C   0400A0E1           MOV      R0,R4
   \   00000460   ........           _BLF     scrollDown,??scrollDown??rA
    857                    RenderPage(vd,0);
   \   00000464   0010A0E3           MOV      R1,#+0
   \   00000468   0400A0E1           MOV      R0,R4
   \   0000046C   ........           _BLF     RenderPage,??RenderPage??rA
    858                    if (vd->pos_next_ref!=0xFFFFFFFF)
   \   00000470   380094E5           LDR      R0,[R4, #+56]
   \   00000474   E7FFFFEA           B        ??method5_36
    859                      vd->pos_cur_ref=vd->pos_next_ref;
    860                  }
    861              }
    862              else if (k == cfgKeyPageDown)
   \                     ??method5_37:
   \   00000478   DC069FE5           LDR      R0,??method5_2+0x1C  ;; cfgKeyPageDown
   \   0000047C   000090E5           LDR      R0,[R0, #+0]
   \   00000480   000055E1           CMP      R5,R0
   \   00000484   0500001A           BNE      ??method5_39
    863              {
    864                scrollDown(vd,ScreenH()-20-scr_shift);
   \   00000488   898100EF           SWI      +33161
   \   0000048C   141040E2           SUB      R1,R0,#+20
   \                     ??method5_40:
   \   00000490   0400A0E1           MOV      R0,R4
   \   00000494   ........           _BLF     scrollDown,??scrollDown??rA
    865                vd->pos_cur_ref=0xFFFFFFFF;
   \                     ??method5_41:
   \   00000498   286084E5           STR      R6,[R4, #+40]
   \   0000049C   4B0100EA           B        ??method5_3
    866              }
    867              else if (k == cfgKeyHalfPageDown)
   \                     ??method5_39:
   \   000004A0   B8069FE5           LDR      R0,??method5_2+0x20  ;; cfgKeyHalfPageDown
   \   000004A4   000090E5           LDR      R0,[R0, #+0]
   \   000004A8   000055E1           CMP      R5,R0
   \   000004AC   0400001A           BNE      ??method5_42
    868              {
    869                scrollDown(vd,(ScreenH()-20-scr_shift)/2);
   \   000004B0   898100EF           SWI      +33161
   \   000004B4   140040E2           SUB      R0,R0,#+20
   \   000004B8   A00F80E0           ADD      R0,R0,R0, LSR #+31
   \   000004BC   C010A0E1           ASR      R1,R0,#+1
   \   000004C0   F2FFFFEA           B        ??method5_40
    870                vd->pos_cur_ref=0xFFFFFFFF;
    871              }
    872              else if (k == cfgKeyPageUp)
   \                     ??method5_42:
   \   000004C4   98069FE5           LDR      R0,??method5_2+0x24  ;; cfgKeyPageUp
   \   000004C8   000090E5           LDR      R0,[R0, #+0]
   \   000004CC   000055E1           CMP      R5,R0
   \   000004D0   0400001A           BNE      ??method5_43
    873              {
    874                scrollUp(vd,ScreenH()-20-scr_shift);
   \   000004D4   898100EF           SWI      +33161
   \   000004D8   141040E2           SUB      R1,R0,#+20
   \                     ??method5_44:
   \   000004DC   0400A0E1           MOV      R0,R4
   \   000004E0   ........           _BLF     scrollUp,??scrollUp??rA
    875                vd->pos_cur_ref=0xFFFFFFFF;
   \   000004E4   EBFFFFEA           B        ??method5_41
    876              }
    877              else if (k == cfgKeyHalfPageUp)
   \                     ??method5_43:
   \   000004E8   78069FE5           LDR      R0,??method5_2+0x28  ;; cfgKeyHalfPageUp
   \   000004EC   000090E5           LDR      R0,[R0, #+0]
   \   000004F0   000055E1           CMP      R5,R0
   \   000004F4   0600001A           BNE      ??method5_45
    878              {
    879                scrollUp(vd,(ScreenH()-20-scr_shift)/2);
   \   000004F8   898100EF           SWI      +33161
   \   000004FC   140040E2           SUB      R0,R0,#+20
   \   00000500   A00F80E0           ADD      R0,R0,R0, LSR #+31
   \   00000504   C010A0E1           ASR      R1,R0,#+1
   \   00000508   0400A0E1           MOV      R0,R4
   \   0000050C   ........           _BLF     scrollUp,??scrollUp??rA
    880                vd->pos_cur_ref=0xFFFFFFFF;
   \   00000510   E0FFFFEA           B        ??method5_41
    881              }
    882              else if (k == cfgKeyMenu)
   \                     ??method5_45:
   \   00000514   50069FE5           LDR      R0,??method5_2+0x2C  ;; cfgKeyMenu
   \   00000518   000090E5           LDR      R0,[R0, #+0]
   \   0000051C   000055E1           CMP      R5,R0
   \   00000520   0400001A           BNE      ??method5_46
    883              {
    884                STOPPED=1;
   \   00000524   0100A0E3           MOV      R0,#+1
   \   00000528   1C0087E5           STR      R0,[R7, #+28]
    885                CreateMainMenu(vd);
   \   0000052C   0400A0E1           MOV      R0,R4
   \   00000530   ........           _BLF     CreateMainMenu,??CreateMainMenu??rA
   \   00000534   250100EA           B        ??method5_3
    886              }
    887              else if (k == cfgKeyBack)
   \                     ??method5_46:
   \   00000538   30069FE5           LDR      R0,??method5_2+0x30  ;; cfgKeyBack
   \   0000053C   000090E5           LDR      R0,[R0, #+0]
   \   00000540   000055E1           CMP      R5,R0
   \   00000544   0C00001A           BNE      ??method5_47
    888              {
    889                if (STOPPED)
   \   00000548   1C0097E5           LDR      R0,[R7, #+28]
   \   0000054C   000050E3           CMP      R0,#+0
    890                {
    891                  return 0xFE;
   \   00000550   FE00A013           MOVNE    R0,#+254
   \   00000554   7701001A           BNE      ??method5_48
    892                }
    893                else
    894                {
    895                  if (view_url_mode==MODE_URL)
   \   00000558   200097E5           LDR      R0,[R7, #+32]
   \   0000055C   010050E3           CMP      R0,#+1
   \   00000560   0200001A           BNE      ??method5_49
    896                  {
    897                    SUBPROC((void*)StopINET);
   \   00000564   ........           LDR      R0,??DataTable12  ;; StopINET
   \   00000568   710100EF           SWI      +369
   \   0000056C   170100EA           B        ??method5_3
    898                  }
    899                  else
    900                  {
    901                    STOPPED=1;
   \                     ??method5_49:
   \   00000570   0100A0E3           MOV      R0,#+1
   \   00000574   1C0087E5           STR      R0,[R7, #+28]
   \   00000578   140100EA           B        ??method5_3
    902                  }
    903                }
    904              }
    905              else if (k == cfgKeyReload)
   \                     ??method5_47:
   \   0000057C   F0059FE5           LDR      R0,??method5_2+0x34  ;; cfgKeyReload
   \   00000580   000090E5           LDR      R0,[R0, #+0]
   \   00000584   000055E1           CMP      R5,R0
   \   00000588   1900001A           BNE      ??method5_50
    906              {
    907                _safe_free(goto_url);
   \   0000058C   280097E5           LDR      R0,[R7, #+40]
   \   00000590   000050E3           CMP      R0,#+0
   \   00000594   0100000A           BEQ      ??method5_51
   \   00000598   150000EF           SWI      +21
   \   0000059C   0000A0E3           MOV      R0,#+0
   \                     ??method5_51:
   \   000005A0   280087E5           STR      R0,[R7, #+40]
    908                if (vd->pageurl)
   \   000005A4   E00094E5           LDR      R0,[R4, #+224]
   \   000005A8   000050E3           CMP      R0,#+0
   \   000005AC   0700000A           BEQ      ??method5_52
    909                {
    910                  goto_url=malloc(strlen(vd->pageurl)+1);
   \   000005B0   1B0000EF           SWI      +27
   \   000005B4   010080E2           ADD      R0,R0,#+1
   \   000005B8   140000EF           SWI      +20
   \   000005BC   280087E5           STR      R0,[R7, #+40]
    911                  strcpy(goto_url,vd->pageurl);
   \   000005C0   E01094E5           LDR      R1,[R4, #+224]
   \                     ??method5_53:
   \   000005C4   1A0000EF           SWI      +26
    912                  return 0xFB;
   \   000005C8   FB00A0E3           MOV      R0,#+251
   \   000005CC   5BFFFFEA           B        ??method5_27
    913                }
    914                else
    915                {
    916                  if (view_url)
   \                     ??method5_52:
   \   000005D0   240097E5           LDR      R0,[R7, #+36]
   \   000005D4   000050E3           CMP      R0,#+0
   \   000005D8   FC00000A           BEQ      ??method5_3
    917                  {
    918                    goto_url=malloc(strlen(view_url)+1);
   \   000005DC   1B0000EF           SWI      +27
   \   000005E0   010080E2           ADD      R0,R0,#+1
   \   000005E4   140000EF           SWI      +20
    919                    strcpy(goto_url,view_url);
   \   000005E8   241097E5           LDR      R1,[R7, #+36]
   \   000005EC   280087E5           STR      R0,[R7, #+40]
   \   000005F0   F3FFFFEA           B        ??method5_53
    920                    return 0xFB;
    921                  }
    922                }
    923              }
    924              else if (k == cfgKeyForward)
   \                     ??method5_50:
   \   000005F4   7C059FE5           LDR      R0,??method5_2+0x38  ;; cfgKeyForward
   \   000005F8   000090E5           LDR      R0,[R0, #+0]
   \   000005FC   000055E1           CMP      R5,R0
   \   00000600   0400001A           BNE      ??method5_54
    925              {
    926                if (CheckPageStackTop())
   \   00000604   ........           _BLF     CheckPageStackTop,??CheckPageStackTop??rA
   \   00000608   000050E3           CMP      R0,#+0
   \   0000060C   EF00000A           BEQ      ??method5_3
    927                {
    928                  return 0xFD;
   \   00000610   FD00A0E3           MOV      R0,#+253
   \   00000614   49FFFFEA           B        ??method5_27
    929                }
    930              }
    931              else if (k == cfgKeyShowURL)
   \                     ??method5_54:
   \   00000618   5C059FE5           LDR      R0,??method5_2+0x3C  ;; cfgKeyShowURL
   \   0000061C   000090E5           LDR      R0,[R0, #+0]
   \   00000620   000055E1           CMP      R5,R0
   \   00000624   2300001A           BNE      ??method5_55
    932                {
    933                  if (vd->pos_cur_ref!=0xFFFFFFFF)
   \   00000628   060051E1           CMP      R1,R6
   \   0000062C   E700000A           BEQ      ??method5_3
    934                  {
    935                    rf=FindReference(vd,vd->pos_cur_ref);
   \   00000630   0400A0E1           MOV      R0,R4
   \   00000634   ........           _BLF     FindReference,??FindReference??rA
   \   00000638   0080A0E1           MOV      R8,R0
    936                    if ((rf->id!=_NOREF) && 
    937                        (rf->tag == 'L' || rf->tag == 'Z' || rf->tag == '@' || rf->tag == '^'))
   \   0000063C   0C1098E5           LDR      R1,[R8, #+12]
   \   00000640   060051E1           CMP      R1,R6
   \   00000644   E100000A           BEQ      ??method5_3
   \   00000648   080098E5           LDR      R0,[R8, #+8]
   \   0000064C   4C0050E3           CMP      R0,#+76
   \   00000650   5A005013           CMPNE    R0,#+90
   \   00000654   40005013           CMPNE    R0,#+64
   \   00000658   5E005013           CMPNE    R0,#+94
   \   0000065C   DB00001A           BNE      ??method5_3
    938                    {
    939                      char *s=extract_omstr(vd,rf->id);
   \   00000660   0400A0E1           MOV      R0,R4
   \   00000664   ........           _BLF     extract_omstr,??extract_omstr??rA
   \   00000668   0090A0E1           MOV      R9,R0
    940                      char *ss = s;
    941                      if (rf->tag == 'L')
   \   0000066C   080098E5           LDR      R0,[R8, #+8]
   \   00000670   09A0A0E1           MOV      R10,R9
   \   00000674   4C0050E3           CMP      R0,#+76
   \   00000678   0400001A           BNE      ??method5_56
    942                      {
    943                        if (s[0] != '#')
   \   0000067C   0000D9E5           LDRB     R0,[R9, #+0]
   \   00000680   230050E3           CMP      R0,#+35
   \   00000684   0700000A           BEQ      ??method5_57
    944                          s += 2;
   \   00000688   029089E2           ADD      R9,R9,#+2
   \   0000068C   050000EA           B        ??method5_57
    945                      }
    946                      if (rf->tag == 'Z') s += strlen(s) + 1;
   \                     ??method5_56:
   \   00000690   5A0050E3           CMP      R0,#+90
   \   00000694   0300001A           BNE      ??method5_57
   \   00000698   0900A0E1           MOV      R0,R9
   \   0000069C   1B0000EF           SWI      +27
   \   000006A0   090080E0           ADD      R0,R0,R9
   \   000006A4   019080E2           ADD      R9,R0,#+1
    947                      ShowLink(s);
   \                     ??method5_57:
   \   000006A8   0900A0E1           MOV      R0,R9
   \   000006AC   ........           _BLF     ShowLink,??ShowLink??rA
    948                      mfree(ss);
   \   000006B0   0A00A0E1           MOV      R0,R10
   \   000006B4   DAFEFFEA           B        ??method5_18
    949                    }
    950                  }
    951                }
    952              else if (k == cfgKeySieget)
   \                     ??method5_55:
   \   000006B8   C0049FE5           LDR      R0,??method5_2+0x40  ;; cfgKeySieget
   \   000006BC   000090E5           LDR      R0,[R0, #+0]
   \   000006C0   000055E1           CMP      R5,R0
   \   000006C4   3C00001A           BNE      ??method5_58
    953              {
    954                  if (rf = FindReference(vd,vd->pos_cur_ref))
   \   000006C8   0400A0E1           MOV      R0,R4
   \   000006CC   ........           _BLF     FindReference,??FindReference??rA
   \   000006D0   0080B0E1           MOVS     R8,R0
    955                  {
    956                    if (rf->id != _NOREF)
   \   000006D4   0C109815           LDRNE    R1,[R8, #+12]
   \   000006D8   06005111           CMPNE    R1,R6
   \   000006DC   BB00000A           BEQ      ??method5_3
    957                    {
    958                      if (rf->tag == 'L' || rf->tag == 'Z' || rf->tag == '@' || rf->tag == '^')
   \   000006E0   080098E5           LDR      R0,[R8, #+8]
   \   000006E4   4C0050E3           CMP      R0,#+76
   \   000006E8   5A005013           CMPNE    R0,#+90
   \   000006EC   40005013           CMPNE    R0,#+64
   \   000006F0   5E005013           CMPNE    R0,#+94
   \   000006F4   B500001A           BNE      ??method5_3
    959                      {
    960                        char * s = extract_omstr(vd, rf->id);
   \   000006F8   0400A0E1           MOV      R0,R4
   \   000006FC   ........           _BLF     extract_omstr,??extract_omstr??rA
   \   00000700   00A0A0E1           MOV      R10,R0
    961                        char *ss = s;
    962                        if (rf->tag == 'L') s += 2;
   \   00000704   080098E5           LDR      R0,[R8, #+8]
   \   00000708   0A90A0E1           MOV      R9,R10
   \   0000070C   4C0050E3           CMP      R0,#+76
   \   00000710   02A08A02           ADDEQ    R10,R10,#+2
   \   00000714   0500000A           BEQ      ??method5_59
    963                        if (rf->tag == 'Z') s += strlen(s) + 1;
   \   00000718   5A0050E3           CMP      R0,#+90
   \   0000071C   0300001A           BNE      ??method5_59
   \   00000720   0A00A0E1           MOV      R0,R10
   \   00000724   1B0000EF           SWI      +27
   \   00000728   0A0080E0           ADD      R0,R0,R10
   \   0000072C   01A080E2           ADD      R10,R0,#+1
    964                        
    965                        if (sieget_ipc.data) mfree(sieget_ipc.data);
   \                     ??method5_59:
   \   00000730   140097E5           LDR      R0,[R7, #+20]
   \   00000734   000050E3           CMP      R0,#+0
   \   00000738   0000000A           BEQ      ??method5_60
   \   0000073C   150000EF           SWI      +21
    966                        sieget_ipc.name_to = sieget_ipc_name; //  url  SieGet
   \                     ??method5_60:
   \   00000740   3C049FE5           LDR      R0,??method5_2+0x44  ;; `?<Constant "$urlcache\\\\$date$time.url">` + 120
   \   00000744   0C0087E5           STR      R0,[R7, #+12]
    967                        sieget_ipc.name_from = ipc_my_name;
   \   00000748   38049FE5           LDR      R0,??method5_2+0x48  ;; `?<Constant "$urlcache\\\\$date$time.url">` + 88
   \   0000074C   100087E5           STR      R0,[R7, #+16]
    968                        sieget_ipc.data = malloc(strlen(s) + 1 + strlen(vd->pageurl) - 1);
   \   00000750   0A00A0E1           MOV      R0,R10
   \   00000754   1B0000EF           SWI      +27
   \   00000758   0080A0E1           MOV      R8,R0
   \   0000075C   E00094E5           LDR      R0,[R4, #+224]
   \   00000760   1B0000EF           SWI      +27
   \   00000764   080080E0           ADD      R0,R0,R8
   \   00000768   140000EF           SWI      +20
   \   0000076C   140087E5           STR      R0,[R7, #+20]
    969                        strcpy((char *)sieget_ipc.data, s);
   \   00000770   0A10A0E1           MOV      R1,R10
   \   00000774   1A0000EF           SWI      +26
    970                        strcpy((char *)sieget_ipc.data + strlen(s) + 1, vd->pageurl+2);
   \   00000778   0A00A0E1           MOV      R0,R10
   \   0000077C   1B0000EF           SWI      +27
   \   00000780   E01094E5           LDR      R1,[R4, #+224]
   \   00000784   142097E5           LDR      R2,[R7, #+20]
   \   00000788   021081E2           ADD      R1,R1,#+2
   \   0000078C   020080E0           ADD      R0,R0,R2
   \   00000790   010080E2           ADD      R0,R0,#+1
   \   00000794   1A0000EF           SWI      +26
    971                        GBS_SendMessage(MMI_CEPID, MSG_IPC, SIEGET_GOTO_URL, &sieget_ipc);
   \   00000798   0C3087E2           ADD      R3,R7,#+12
   \   0000079C   0020A0E3           MOV      R2,#+0
   \   000007A0   B010A0E3           MOV      R1,#+176
   \   000007A4   DE1C81E3           ORR      R1,R1,#0xDE00
   \   000007A8   0900A0E3           MOV      R0,#+9
   \   000007AC   420C80E3           ORR      R0,R0,#0x4200
   \   000007B0   000100EF           SWI      +256
    972                        mfree(ss);
   \   000007B4   0900A0E1           MOV      R0,R9
   \   000007B8   99FEFFEA           B        ??method5_18
    973                      }
    974                    }
    975                  }
    976              }
    977              else if (k == cfgKeyBegin)
   \                     ??method5_58:
   \   000007BC   C8039FE5           LDR      R0,??method5_2+0x4C  ;; cfgKeyBegin
   \   000007C0   000090E5           LDR      R0,[R0, #+0]
   \   000007C4   000055E1           CMP      R5,R0
   \   000007C8   0300001A           BNE      ??method5_61
    978              {
    979                vd->pixdisp=0;
   \   000007CC   0000A0E3           MOV      R0,#+0
   \   000007D0   200084E5           STR      R0,[R4, #+32]
    980                vd->view_line=0;
   \   000007D4   1C0084E5           STR      R0,[R4, #+28]
    981                vd->pos_cur_ref=0xFFFFFFFF;
   \   000007D8   2EFFFFEA           B        ??method5_41
    982              }
    983              /*case 0x37: 
    984                {
    985                  //Dump RAWTEXT
    986                  unsigned int ul;
    987                  int f;
    988                  if ((f=fopen("4:\\zbin\\balletmini\\dumpraw.txt",A_ReadWrite+A_Create+A_Truncate,P_READ+P_WRITE,&ul))!=-1)
    989                  {
    990                    fwrite(f,vd->rawtext,vd->rawtext_size*2,&ul);
    991                    fclose(f,&ul);
    992                  }
    993                }
    994                break;*/
    995              /*case 0x37: // '7'
    996                {
    997                  //Dump REFCACHE
    998                  unsigned int ul;
    999                  int f;
   1000                  if ((f=fopen("0:\\zbin\\balletmini\\dumpref.txt",A_ReadWrite+A_Create+A_Truncate,P_READ+P_WRITE,&ul))!=-1)
   1001                  {
   1002                    char c[256];
   1003                    sprintf(c,"\nref_cache_size : %i\n",vd->ref_cache_size);
   1004                    fwrite(f,c,strlen(c),&ul);
   1005                    sprintf(c,  "oms_size       : %i\n",vd->oms_size);
   1006                    fwrite(f,c,strlen(c),&ul);
   1007                    sprintf(c,  "page_sz        : %i\n",vd->page_sz);
   1008                    fwrite(f,c,strlen(c),&ul);
   1009                    sprintf(c,  "loaded_sz      : %i\n\n",vd->loaded_sz);
   1010                    fwrite(f,c,strlen(c),&ul);
   1011                    for (int i=0;i<vd->ref_cache_size;i++)
   1012                    {
   1013                      REFCACHE *rf=vd->ref_cache+i;
   1014                      sprintf(c,"\nREF : %i\n",i);
   1015                      fwrite(f,c,strlen(c),&ul);
   1016                      sprintf(c,"  tag:       %c\n",rf->tag);
   1017                      fwrite(f,c,strlen(c),&ul);
   1018                      sprintf(c,"  id:        %u",rf->id);
   1019                      fwrite(f,c,strlen(c),&ul);
   1020                      if (rf->id!=_NOREF)
   1021                      {
   1022                        char *s=extract_omstr(vd,rf->id);
   1023                        for (int to=strlen(s);to;to--) if (s[to-1]==NULL) s[to-1]=' ';
   1024                        sprintf(c,"   %s",s);
   1025                        fwrite(f,c,strlen(c),&ul);
   1026                        mfree(s);
   1027                      }
   1028                      fwrite(f,"\n",1,&ul);
   1029                      sprintf(c,"  id2:       %u",rf->id2);
   1030                      fwrite(f,c,strlen(c),&ul);
   1031                      if (rf->id2!=_NOREF&&rf->tag!='@')
   1032                      {
   1033                        char *s=extract_omstr(vd,rf->id2);
   1034                        for (int to=_rshort2(vd->oms+rf->id)-1;to;to--) if (s[to]==NULL) s[to]=' ';
   1035                        sprintf(c,"   %s",s);
   1036                        fwrite(f,c,strlen(c),&ul);
   1037                        mfree(s);
   1038                      }
   1039                      fwrite(f,"\n",1,&ul);
   1040                      sprintf(c,"  value:     %u",rf->value);
   1041                      fwrite(f,c,strlen(c),&ul);
   1042                      if (rf->value!=_NOREF)
   1043                      {
   1044                        char *s=extract_omstr(vd,rf->value);
   1045                        for (int to=_rshort2(vd->oms+rf->id)-1;to;to--) if (s[to]==NULL) s[to]=' ';
   1046                        sprintf(c,"   %s",s);
   1047                        fwrite(f,c,strlen(c),&ul);
   1048                        mfree(s);
   1049                      }
   1050                      fwrite(f,"\n",1,&ul);
   1051                      sprintf(c,"  begin:     %u\n",rf->begin);
   1052                      fwrite(f,c,strlen(c),&ul);
   1053                      sprintf(c,"  end:       %u\n",rf->end);
   1054                      fwrite(f,c,strlen(c),&ul);
   1055                      sprintf(c,"  upload:    %s\n",rf->no_upload?"false":"true");
   1056                      fwrite(f,c,strlen(c),&ul);
   1057                      if (rf->tag=='s')
   1058                      {
   1059                        sprintf(c,"  multiple:  %s\n",rf->multiselect?"true":"false");
   1060                        fwrite(f,c,strlen(c),&ul);
   1061                        sprintf(c,"  size:    %i ",rf->size);
   1062                        fwrite(f,c,strlen(c),&ul);
   1063                        fwrite(f,rf->data,rf->size,&ul);
   1064                        fwrite(f,"\n",1,&ul);
   1065                      }
   1066                    }
   1067                    fclose(f,&ul);
   1068                  }
   1069                }
   1070                break;*/
   1071              /*else if (k == 0x38) // '8'
   1072                {
   1073                  //Dump LINECACHE
   1074                  unsigned int ul;
   1075                  int f;
   1076                  if ((f=fopen("4:\\zbin\\balletmini\\dumplc.txt",A_ReadWrite+A_Create+A_Truncate,P_READ+P_WRITE,&ul))!=-1)
   1077                  {
   1078                    char c[256];
   1079                    sprintf(c,"\nlines_cache_size : %i, pos : %d\n",vd->lines_cache_size, vd->lines_cache_pos);
   1080                    fwrite(f,c,strlen(c),&ul);
   1081                    for (int i=0;i<vd->lines_cache_size;i++)
   1082                    {
   1083                      LINECACHE *lc=vd->lines_cache+i;
   1084                      sprintf(c,"%i  pos:%u, ycoord:%u, pix:%u, bold:%d, ref:%d, center:%d, right:%d, centerAll:%d \n",i,lc->pos,
   1085                              lc->ycoord, lc->pixheight, lc->bold, lc->ref, lc->center, lc->right, lc->centerAtAll);
   1086                      fwrite(f,c,strlen(c),&ul);
   1087                    }
   1088                   fclose(f,&ul);
   1089                  }
   1090                }*/
   1091              else if (k == cfgKeyEnd)
   \                     ??method5_61:
   \   000007DC   AC039FE5           LDR      R0,??method5_2+0x50  ;; cfgKeyEnd
   \   000007E0   000090E5           LDR      R0,[R0, #+0]
   \   000007E4   000055E1           CMP      R5,R0
   \   000007E8   0700001A           BNE      ??method5_62
   1092              {
   1093                while(LineDown(vd)) ;
   \                     ??method5_63:
   \   000007EC   0400A0E1           MOV      R0,R4
   \   000007F0   ........           _BLF     LineDown,??LineDown??rA
   \   000007F4   000050E3           CMP      R0,#+0
   \   000007F8   FBFFFF1A           BNE      ??method5_63
   1094                vd->pixdisp=0;
   \   000007FC   200084E5           STR      R0,[R4, #+32]
   1095                scrollUp(vd,ScreenH()-1);
   \   00000800   898100EF           SWI      +33161
   \   00000804   011040E2           SUB      R1,R0,#+1
   \   00000808   33FFFFEA           B        ??method5_44
   1096                vd->pos_cur_ref=0xFFFFFFFF;
   1097              } 
   1098              else if (k == cfgKeySearchAgain)
   \                     ??method5_62:
   \   0000080C   80039FE5           LDR      R0,??method5_2+0x54  ;; cfgKeySearchAgain
   \   00000810   000090E5           LDR      R0,[R0, #+0]
   \   00000814   000055E1           CMP      R5,R0
   \   00000818   0D00001A           BNE      ??method5_64
   1099              {
   1100                if (m == LONG_PRESS)
   \   0000081C   9510A0E3           MOV      R1,#+149
   \   00000820   401F81E3           ORR      R1,R1,#0x100
   \   00000824   010052E1           CMP      R2,R1
   \   00000828   0200001A           BNE      ??method5_65
   1101                {
   1102                  CreateFindDialog(vd);
   \   0000082C   0400A0E1           MOV      R0,R4
   \   00000830   ........           _BLF     CreateFindDialog,??CreateFindDialog??rA
   \   00000834   6C0000EA           B        ??method5_66
   1103                }
   1104                else if (wstrlen(search_string))
   \                     ??method5_65:
   \   00000838   380097E5           LDR      R0,[R7, #+56]
   \   0000083C   230100EF           SWI      +291
   \   00000840   000050E3           CMP      R0,#+0
   \   00000844   6100000A           BEQ      ??method5_3
   1105                {
   1106                  FindStringOnPage(vd);
   \   00000848   0400A0E1           MOV      R0,R4
   \   0000084C   ........           _BLF     FindStringOnPage,??FindStringOnPage??rA
   \   00000850   5E0000EA           B        ??method5_3
   1107                }
   1108              }
   1109              else if (k == cfgKeyQuit)
   \                     ??method5_64:
   \   00000854   3C039FE5           LDR      R0,??method5_2+0x58  ;; cfgKeyQuit
   \   00000858   000090E5           LDR      R0,[R0, #+0]
   \   0000085C   000055E1           CMP      R5,R0
   \   00000860   0B00001A           BNE      ??method5_67
   1110              {
   1111                MAIN_CSM *main_csm;
   1112                if ((main_csm=(MAIN_CSM *)FindCSMbyID(maincsm_id)))
   \   00000864   440097E5           LDR      R0,[R7, #+68]
   \   00000868   080100EF           SWI      +264
   \   0000086C   000050E3           CMP      R0,#+0
   \   00000870   0400000A           BEQ      ??method5_68
   1113                {
   1114                  goto_url = 0;
   \   00000874   0010A0E3           MOV      R1,#+0
   \   00000878   281087E5           STR      R1,[R7, #+40]
   1115                  GeneralFunc_flag1(main_csm->view_id,0xFF);
   \   0000087C   280090E5           LDR      R0,[R0, #+40]
   \   00000880   FF10A0E3           MOV      R1,#+255
   \   00000884   3D0100EF           SWI      +317
   1116                  GeneralFuncF1(1);
   \                     ??method5_68:
   \   00000888   0100A0E3           MOV      R0,#+1
   \   0000088C   3B0100EF           SWI      +315
   \   00000890   4E0000EA           B        ??method5_3
   1117                }
   1118                else
   1119                {
   1120                  GeneralFuncF1(1);
   1121                }
   1122              }
   1123              else if (k == cfgKeyTextPage)
   \                     ??method5_67:
   \   00000894   00039FE5           LDR      R0,??method5_2+0x5C  ;; cfgKeyTextPage
   \   00000898   000090E5           LDR      R0,[R0, #+0]
   \   0000089C   000055E1           CMP      R5,R0
   \   000008A0   4A00001A           BNE      ??method5_3
   1124                {
   1125                  // get text from page
   1126                  int scr_h=ScreenH()-1;
   \   000008A4   898100EF           SWI      +33161
   1127                  WSHDR *ws=AllocWS(16384);
   \   000008A8   400CA0E3           MOV      R0,#+16384
   \   000008AC   250100EF           SWI      +293
   \   000008B0   08008DE5           STR      R0,[SP, #+8]
   1128                  LINECACHE *lc;
   1129                  int ypos=scr_shift-vd->pixdisp;
   \   000008B4   201094E5           LDR      R1,[R4, #+32]
   \   000008B8   001061E2           RSB      R1,R1,#+0
   \   000008BC   04108DE5           STR      R1,[SP, #+4]
   1130                  unsigned int store_line=vd->view_line;
   \   000008C0   1C0094E5           LDR      R0,[R4, #+28]
   \   000008C4   0C008DE5           STR      R0,[SP, #+12]
   1131                  int vl = vd->view_line-1;
   \   000008C8   018040E2           SUB      R8,R0,#+1
   \   000008CC   040000EA           B        ??method5_69
   1132                  unsigned int len;
   1133                  int sc;
   1134                  int c;
   1135          
   1136                  while(ypos<=16384)
   1137                  {
   1138                    if (LineDown(vd))
   1139                    {
   1140                      if (vl < 0)
   1141                      {
   1142                        lc=vd->lines_cache;
   1143                        len = (lc[0]).pos;
   1144                        sc = 0;
   1145                      }
   1146                      else
   1147                      {
   1148                        lc=vd->lines_cache+vl;
   1149                        if ((vl+1)<vd->lines_cache_size)
   1150                        {
   1151                          len=(lc[1]).pos-(lc[0]).pos;
   1152                        }
   1153                        else
   1154                          len=vd->rawtext_size-lc->pos;
   1155                        sc=lc->pos;
   1156                      }
   1157                      while(len>0)
   1158                      {
   1159                        c=vd->rawtext[sc];
   1160                        if ((c&0xFF00)!=0xE100)
   1161                        {
   1162                          switch (c)
   1163                          {
   1164                          case UTF16_FONT_SMALL:
   1165                          case UTF16_FONT_SMALL_BOLD:
   1166                          case UTF16_DIS_UNDERLINE:
   1167                          case UTF16_ENA_UNDERLINE:
   1168                          case UTF16_ENA_INVERT:
   1169                          case UTF16_DIS_INVERT:
   1170                          case UTF16_ALIGN_LEFT:
   1171                          case UTF16_ALIGN_RIGHT:
   1172                          case UTF16_ENA_CENTER:
   1173                          case UTF16_DIS_CENTER:
   1174                            break;
   1175                          case UTF16_INK_RGBA:
   1176                          case UTF16_PAPER_RGBA:
   1177                            len--;
   1178                            sc++;
   1179                            len--;
   1180                            sc++;
   1181                            break;
   1182                          default :
   1183                            wsAppendChar(ws,c);
   1184                          }
   1185                        }
   1186                        sc++;
   1187                        len--;
   1188                      }
   1189                      ypos+=lc->pixheight;
   \                     ??method5_70:
   \   000008D0   BE20D9E1           LDRH     R2,[R9, #+14]
   \   000008D4   04109DE5           LDR      R1,[SP, #+4]
   1190                      vl++;
   \   000008D8   018088E2           ADD      R8,R8,#+1
   \   000008DC   011082E0           ADD      R1,R2,R1
   \   000008E0   04108DE5           STR      R1,[SP, #+4]
   \                     ??method5_69:
   \   000008E4   04009DE5           LDR      R0,[SP, #+4]
   \   000008E8   0110A0E3           MOV      R1,#+1
   \   000008EC   401C81E3           ORR      R1,R1,#0x4000
   \   000008F0   010050E1           CMP      R0,R1
   \   000008F4   310000AA           BGE      ??method5_71
   \   000008F8   0400A0E1           MOV      R0,R4
   \   000008FC   ........           _BLF     LineDown,??LineDown??rA
   \   00000900   000050E3           CMP      R0,#+0
   \   00000904   2D00000A           BEQ      ??method5_71
   \   00000908   109094E5           LDR      R9,[R4, #+16]
   \   0000090C   000058E3           CMP      R8,#+0
   \   00000910   00A09945           LDRMI    R10,[R9, #+0]
   \   00000914   00B0A043           MOVMI    R11,#+0
   \   00000918   0E00004A           BMI      ??method5_72
   \   0000091C   141094E5           LDR      R1,[R4, #+20]
   \   00000920   1400A0E3           MOV      R0,#+20
   \   00000924   909829E0           MLA      R9,R0,R8,R9
   \   00000928   010088E2           ADD      R0,R8,#+1
   \   0000092C   010050E1           CMP      R0,R1
   \   00000930   14009935           LDRCC    R0,[R9, #+20]
   \   00000934   001099E5           LDR      R1,[R9, #+0]
   \   00000938   0C009425           LDRCS    R0,[R4, #+12]
   \   0000093C   01B0A0E1           MOV      R11,R1
   \   00000940   01A040E0           SUB      R10,R0,R1
   \   00000944   030000EA           B        ??method5_72
   \                     ??method5_73:
   \   00000948   08009DE5           LDR      R0,[SP, #+8]
   \   0000094C   1C0000EF           SWI      +28
   \                     ??method5_74:
   \   00000950   01B08BE2           ADD      R11,R11,#+1
   \   00000954   01A04AE2           SUB      R10,R10,#+1
   \                     ??method5_72:
   \   00000958   00005AE3           CMP      R10,#+0
   \   0000095C   DBFFFF0A           BEQ      ??method5_70
   \   00000960   080094E5           LDR      R0,[R4, #+8]
   \   00000964   8B0080E0           ADD      R0,R0,R11, LSL #+1
   \   00000968   B010D0E1           LDRH     R1,[R0, #+0]
   \   0000096C   FF0C01E2           AND      R0,R1,#0xFF00
   \   00000970   E10C50E3           CMP      R0,#+57600
   \   00000974   F5FFFF0A           BEQ      ??method5_74
   \   00000978   010041E2           SUB      R0,R1,#+1
   \   0000097C   E00C40E2           SUB      R0,R0,#+57344
   \   00000980   1E0050E3           CMP      R0,#+30
   \   00000984   EFFFFF8A           BHI      ??method5_73
   \   00000988   012F8FE2           ADR      R2,??method5_1
   \   0000098C   D02092E1           LDRSB    R2,[R2, R0]
   \   00000990   02F18FE0           ADD      PC,PC,R2, LSL #+2
   \                     ??method5_1:
   \   00000994   EEEEECEE           DC8      +238,+238,+236,+238
   \   00000998   EE0707EC           DC8      +238,+7,+7,+236
   \   0000099C   ECECECEC           DC8      +236,+236,+236,+236
   \   000009A0   ECECECEC           DC8      +236,+236,+236,+236
   \   000009A4   ECEEEEEC           DC8      +236,+238,+238,+236
   \   000009A8   ECECECEC           DC8      +236,+236,+236,+236
   \   000009AC   ECECECEE           DC8      +236,+236,+236,+238
   \   000009B0   EEEEEE00           DC8      +238,+238,+238,+0
   \                     ??method5_75:
   \   000009B4   02A04AE2           SUB      R10,R10,#+2
   \   000009B8   02B08BE2           ADD      R11,R11,#+2
   \   000009BC   E3FFFFEA           B        ??method5_74
   1191                    }
   1192                    else
   1193                      break;
   1194                  }
   1195                  vd->view_line=store_line;
   \                     ??method5_71:
   \   000009C0   0C009DE5           LDR      R0,[SP, #+12]
   \   000009C4   1C0084E5           STR      R0,[R4, #+28]
   1196                  createTextView(ws);
   \   000009C8   08009DE5           LDR      R0,[SP, #+8]
   \   000009CC   ........           _BLF     createTextView,??createTextView??rA
   1197                }
   1198            }
   1199            if ((m==KEY_UP)||(m==LONG_PRESS))
   \                     ??method5_3:
   \   000009D0   00009DE5           LDR      R0,[SP, #+0]
   \   000009D4   650F50E3           CMP      R0,#+404
   \   000009D8   0300000A           BEQ      ??method5_66
   \   000009DC   9510A0E3           MOV      R1,#+149
   \   000009E0   401F81E3           ORR      R1,R1,#0x100
   \   000009E4   010050E1           CMP      R0,R1
   \   000009E8   5000001A           BNE      ??method5_76
   1200            {
   1201              if ((k == cfgKeyNewCopy) || (k == cfgKeyBrowser))
   \                     ??method5_66:
   \   000009EC   AC019FE5           LDR      R0,??method5_2+0x60  ;; cfgKeyNewCopy
   \   000009F0   009090E5           LDR      R9,[R0, #+0]
   \   000009F4   090055E1           CMP      R5,R9
   \   000009F8   0300000A           BEQ      ??method5_77
   \   000009FC   A0019FE5           LDR      R0,??method5_2+0x64  ;; cfgKeyBrowser
   \   00000A00   000090E5           LDR      R0,[R0, #+0]
   \   00000A04   000055E1           CMP      R5,R0
   \   00000A08   4800001A           BNE      ??method5_76
   1202              {
   1203                rf=FindReference(vd,vd->pos_cur_ref);
   \                     ??method5_77:
   \   00000A0C   281094E5           LDR      R1,[R4, #+40]
   \   00000A10   0400A0E1           MOV      R0,R4
   \   00000A14   ........           _BLF     FindReference,??FindReference??rA
   \   00000A18   0080B0E1           MOVS     R8,R0
   1204                if (rf)
   1205                {
   1206                  if (rf->id!=_NOREF)
   \   00000A1C   0C109815           LDRNE    R1,[R8, #+12]
   \   00000A20   06005111           CMPNE    R1,R6
   \   00000A24   4100000A           BEQ      ??method5_76
   1207                  {
   1208                    if (rf->tag=='L'||rf->tag=='Z'||rf->tag=='^')
   \   00000A28   080098E5           LDR      R0,[R8, #+8]
   \   00000A2C   4C0050E3           CMP      R0,#+76
   \   00000A30   5A005013           CMPNE    R0,#+90
   \   00000A34   5E005013           CMPNE    R0,#+94
   \   00000A38   3C00001A           BNE      ??method5_76
   1209                    {
   1210                      char *s=extract_omstr(vd,rf->id);
   \   00000A3C   0400A0E1           MOV      R0,R4
   \   00000A40   ........           _BLF     extract_omstr,??extract_omstr??rA
   \   00000A44   0060A0E1           MOV      R6,R0
   1211                      char *ss = s;
   1212                      if (rf->tag=='L')
   \   00000A48   080098E5           LDR      R0,[R8, #+8]
   \   00000A4C   0640A0E1           MOV      R4,R6
   \   00000A50   4C0050E3           CMP      R0,#+76
   1213                        s+=2;
   \   00000A54   02608602           ADDEQ    R6,R6,#+2
   \   00000A58   0500000A           BEQ      ??method5_78
   1214                      if (rf->tag=='Z')
   \   00000A5C   5A0050E3           CMP      R0,#+90
   \   00000A60   0300001A           BNE      ??method5_78
   1215                        s+=strlen(s)+1;
   \   00000A64   0600A0E1           MOV      R0,R6
   \   00000A68   1B0000EF           SWI      +27
   \   00000A6C   060080E0           ADD      R0,R0,R6
   \   00000A70   016080E2           ADD      R6,R0,#+1
   1216                      if (k == cfgKeyNewCopy)
   \                     ??method5_78:
   \   00000A74   090055E1           CMP      R5,R9
   \   00000A78   2200001A           BNE      ??method5_79
   1217                      {
   1218                        if (m==LONG_PRESS)
   \   00000A7C   00109DE5           LDR      R1,[SP, #+0]
   \   00000A80   480097E5           LDR      R0,[R7, #+72]
   \   00000A84   9520A0E3           MOV      R2,#+149
   \   00000A88   402F82E3           ORR      R2,R2,#0x100
   \   00000A8C   020051E1           CMP      R1,R2
   \   00000A90   1400001A           BNE      ??method5_80
   1219                        {
   1220                          if (!longpress)
   \   00000A94   000050E3           CMP      R0,#+0
   \   00000A98   2200001A           BNE      ??method5_81
   1221                          {
   1222                            longpress = 1;
   \   00000A9C   0100A0E3           MOV      R0,#+1
   \   00000AA0   480087E5           STR      R0,[R7, #+72]
   1223                            RunOtherByURL(s,0);
   \   00000AA4   0010A0E3           MOV      R1,#+0
   \   00000AA8   0600A0E1           MOV      R0,R6
   \   00000AAC   ........           BL       RunOtherByURL
   1224                            Xipc.name_to = xtask_ipc_name;
   \   00000AB0   4C0087E2           ADD      R0,R7,#+76
   \   00000AB4   000087E5           STR      R0,[R7, #+0]
   1225                            Xipc.name_from = ipc_my_name;
   \   00000AB8   C8009FE5           LDR      R0,??method5_2+0x48  ;; `?<Constant "$urlcache\\\\$date$time.url">` + 88
   1226                            Xipc.data = (void *)maincsm_id;
   1227                            GBS_SendMessage(MMI_CEPID, MSG_IPC, IPC_XTASK_SHOW_CSM, &Xipc);
   \   00000ABC   0730A0E1           MOV      R3,R7
   \   00000AC0   040087E5           STR      R0,[R7, #+4]
   \   00000AC4   440097E5           LDR      R0,[R7, #+68]
   \   00000AC8   0220A0E3           MOV      R2,#+2
   \   00000ACC   080087E5           STR      R0,[R7, #+8]
   \   00000AD0   B010A0E3           MOV      R1,#+176
   \   00000AD4   DE1C81E3           ORR      R1,R1,#0xDE00
   \   00000AD8   0900A0E3           MOV      R0,#+9
   \   00000ADC   420C80E3           ORR      R0,R0,#0x4200
   \   00000AE0   000100EF           SWI      +256
   \   00000AE4   0F0000EA           B        ??method5_81
   1228                          }
   1229                        }
   1230                        else
   1231                        {
   1232                          if (!longpress)
   \                     ??method5_80:
   \   00000AE8   000050E3           CMP      R0,#+0
   \   00000AEC   0200001A           BNE      ??method5_82
   1233                            RunOtherByURL(s,0);
   \   00000AF0   0010A0E3           MOV      R1,#+0
   \   00000AF4   0600A0E1           MOV      R0,R6
   \   00000AF8   ........           BL       RunOtherByURL
   1234                          longpress = 0;
   \                     ??method5_82:
   \   00000AFC   0000A0E3           MOV      R0,#+0
   \   00000B00   480087E5           STR      R0,[R7, #+72]
   \   00000B04   070000EA           B        ??method5_81
   1235                        }
   1236                          
   1237                      }
   1238                      else
   1239                      {
   1240                        if (m==LONG_PRESS)
   \                     ??method5_79:
   \   00000B08   00009DE5           LDR      R0,[SP, #+0]
   \   00000B0C   9510A0E3           MOV      R1,#+149
   \   00000B10   401F81E3           ORR      R1,R1,#0x100
   \   00000B14   010050E1           CMP      R0,R1
   1241                        {
   1242                          RunOtherByURL(s,2);
   \   00000B18   0210A003           MOVEQ    R1,#+2
   1243                        }
   1244                        else
   1245                        {
   1246                          RunOtherByURL(s,1);
   \   00000B1C   0110A013           MOVNE    R1,#+1
   \   00000B20   0600A0E1           MOV      R0,R6
   \   00000B24   ........           BL       RunOtherByURL
   1247                        }
   1248                      }
   1249                      mfree(ss);
   \                     ??method5_81:
   \   00000B28   0400A0E1           MOV      R0,R4
   \   00000B2C   150000EF           SWI      +21
   1250                    }
   1251                  }
   1252                }
   1253              }
   1254            }
   1255            DirectRedrawGUI();
   \                     ??method5_76:
   \   00000B30   3F0100EF           SWI      +319
   1256            return(0);
   \   00000B34   0000A0E3           MOV      R0,#+0
   \                     ??method5_48:
   \   00000B38   90D08DE2           ADD      SP,SP,#+144      ;; stack cleaning
   \   00000B3C   F08FBDE8           POP      {R4-R11,PC}      ;; return
   \                     ??method5_2:
   \   00000B40   ........           DC32     Xipc
   \   00000B44   ........           DC32     cfgKeyEnter
   \   00000B48   ........           DC32     `?<Constant "$urlcache\\\\$date$time.url">` + 44
   \   00000B4C   ........           DC32     PrepareFileForUpload
   \   00000B50   ........           DC32     `?<Constant "$urlcache\\\\$date$time.url">` + 28
   \   00000B54   ........           DC32     cfgKeyScrollUp
   \   00000B58   ........           DC32     cfgKeyScrollDown
   \   00000B5C   ........           DC32     cfgKeyPageDown
   \   00000B60   ........           DC32     cfgKeyHalfPageDown
   \   00000B64   ........           DC32     cfgKeyPageUp
   \   00000B68   ........           DC32     cfgKeyHalfPageUp
   \   00000B6C   ........           DC32     cfgKeyMenu
   \   00000B70   ........           DC32     cfgKeyBack
   \   00000B74   ........           DC32     cfgKeyReload
   \   00000B78   ........           DC32     cfgKeyForward
   \   00000B7C   ........           DC32     cfgKeyShowURL
   \   00000B80   ........           DC32     cfgKeySieget
   \   00000B84   ........           DC32     `?<Constant "$urlcache\\\\$date$time.url">` + 120
   \   00000B88   ........           DC32     `?<Constant "$urlcache\\\\$date$time.url">` + 88
   \   00000B8C   ........           DC32     cfgKeyBegin
   \   00000B90   ........           DC32     cfgKeyEnd
   \   00000B94   ........           DC32     cfgKeySearchAgain
   \   00000B98   ........           DC32     cfgKeyQuit
   \   00000B9C   ........           DC32     cfgKeyTextPage
   \   00000BA0   ........           DC32     cfgKeyNewCopy
   \   00000BA4   ........           DC32     cfgKeyBrowser
   1257          }
   1258          

   \                                 In segment CODE, align 4, keep-with-next
   1259          static int method8(void){return(0);}
   \                     method8:
   \   00000000   0000A0E3           MOV      R0,#+0
   \   00000004   1EFF2FE1           BX       LR               ;; return
   1260          

   \                                 In segment CODE, align 4, keep-with-next
   1261          static int method9(void){return(0);}
   \                     method9:
   \   00000000   0000A0E3           MOV      R0,#+0
   \   00000004   1EFF2FE1           BX       LR               ;; return
   1262          
   1263          static const void * const gui_methods[11]={
   1264            (void *)method0,  //Redraw
   1265            (void *)method1,  //Create
   1266            (void *)method2,  //Close
   1267            (void *)method3,  //Focus
   1268            (void *)method4,  //Unfocus
   1269            (void *)method5,  //OnKey
   1270            0,
   1271            (void *)kill_data, //method7, //Destroy
   1272            (void *)method8,
   1273            (void *)method9,
   1274            0
   1275          };
   1276          

   \                                 In segment CODE, align 4, keep-with-next
   1277          static int CreateViewGUI(int cached, void* data)
   1278          {
   \                     CreateViewGUI:
   \   00000000   F0412DE9           PUSH     {R4-R8,LR}
   \   00000004   0050A0E1           MOV      R5,R0
   \   00000008   0160A0E1           MOV      R6,R1
   1279            static const RECT Canvas={0,0,0,0};
   1280            VIEW_GUI *view_gui=malloc(sizeof(VIEW_GUI));
   1281            zeromem(view_gui,sizeof(VIEW_GUI));
   1282            patch_rect((RECT*)&Canvas,0,0,ScreenW()-1,ScreenH()-1);
   \   0000000C   9C809FE5           LDR      R8,??CreateViewGUI_0  ;; gui_methods
   \   00000010   5000A0E3           MOV      R0,#+80
   \   00000014   140000EF           SWI      +20
   \   00000018   0040A0E1           MOV      R4,R0
   \   0000001C   5010A0E3           MOV      R1,#+80
   \   00000020   1D0100EF           SWI      +285
   \   00000024   898100EF           SWI      +33161
   \   00000028   0070A0E1           MOV      R7,R0
   \   0000002C   888100EF           SWI      +33160
   \   00000030   011047E2           SUB      R1,R7,#+1
   \   00000034   02002DE9           PUSH     {R1}
   \   00000038   013040E2           SUB      R3,R0,#+1
   \   0000003C   0020A0E3           MOV      R2,#+0
   \   00000040   2C0088E2           ADD      R0,R8,#+44
   \   00000044   0010A0E3           MOV      R1,#+0
   \   00000048   ........           _BLF     patch_rect,??patch_rect??rA
   1283            view_gui->gui.canvas=(void *)(&Canvas);
   \   0000004C   2C0088E2           ADD      R0,R8,#+44
   \   00000050   000084E5           STR      R0,[R4, #+0]
   1284          //  view_gui->gui.flag30=2;
   1285            view_gui->gui.methods=(void *)gui_methods;
   \   00000054   048084E5           STR      R8,[R4, #+4]
   1286            view_gui->gui.item_ll.data_mfree=(void (*)(void *))mfree_adr();
   \   00000058   158000EF           SWI      +32789
   \   0000005C   200084E5           STR      R0,[R4, #+32]
   1287            view_gui->cached=cached;
   \   00000060   385084E5           STR      R5,[R4, #+56]
   1288            if (data)
   \   00000064   000056E3           CMP      R6,#+0
   \   00000068   04D08DE2           ADD      SP,SP,#+4
   \   0000006C   0600000A           BEQ      ??CreateViewGUI_1
   1289            {
   1290              view_gui->view_line=getViewLine(data);
   \   00000070   0600A0E1           MOV      R0,R6
   \   00000074   ........           _BLF     getViewLine,??getViewLine??rA
   \   00000078   3C0084E5           STR      R0,[R4, #+60]
   1291              view_gui->pos_cur_ref=getPosCurRef(data);
   \   0000007C   0600A0E1           MOV      R0,R6
   \   00000080   ........           _BLF     getPosCurRef,??getPosCurRef??rA
   1292              view_gui->isPositionDataPresent = 1;
   \   00000084   0110A0E3           MOV      R1,#+1
   \   00000088   030000EA           B        ??CreateViewGUI_2
   1293            }
   1294            else
   1295            {
   1296              view_gui->view_line=0;
   \                     ??CreateViewGUI_1:
   \   0000008C   0000A0E3           MOV      R0,#+0
   \   00000090   3C0084E5           STR      R0,[R4, #+60]
   1297              view_gui->pos_cur_ref=0xFFFFFFFF;
   \   00000094   0000E0E1           MVN      R0,R0
   1298              view_gui->isPositionDataPresent = 0;
   \   00000098   0010A0E3           MOV      R1,#+0
   \                     ??CreateViewGUI_2:
   \   0000009C   441084E5           STR      R1,[R4, #+68]
   \   000000A0   400084E5           STR      R0,[R4, #+64]
   1299            }
   1300            return CreateGUI(view_gui);
   \   000000A4   0400A0E1           MOV      R0,R4
   \   000000A8   370100EF           SWI      +311
   \   000000AC   F081BDE8           POP      {R4-R8,PC}       ;; return
   \                     ??CreateViewGUI_0:
   \   000000B0   ........           DC32     gui_methods
   1301          }

   \                                 In segment DATA_C, align 4, align-sorted
   \                     gui_methods:
   \   00000000   ............       DC32 method0, method1, method2, method3, method4, method5, 0H
   \              ............
   \              ............
   \              ............
   \              00000000    
   \   0000001C   ............       DC32 kill_data, method8, method9, 0H
   \              ............
   \              00000000    
   \   0000002C   000000000000       DC16 0, 0, 0, 0
   \              0000        
   1302          

   \                                 In segment CODE, align 4, keep-with-next
   1303          static void maincsm_oncreate(CSM_RAM *data)
   1304          {
   \                     maincsm_oncreate:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
   1305            goto_url = NULL;
   \   00000004   ........           LDR      R6,??DataTable28  ;; Xipc
   \   00000008   0040A0E1           MOV      R4,R0
   \   0000000C   0050A0E3           MOV      R5,#+0
   \   00000010   285086E5           STR      R5,[R6, #+40]
   1306            InitUrlStack();
   \   00000014   ........           _BLF     InitUrlStack,??InitUrlStack??rA
   1307            MAIN_CSM *csm=(MAIN_CSM*)data;
   1308            ws_console=AllocWS(1024);
   \   00000018   400EA0E3           MOV      R0,#+1024
   \   0000001C   250100EF           SWI      +293
   \   00000020   340086E5           STR      R0,[R6, #+52]
   1309            search_string = AllocWS(256);
   \   00000024   400FA0E3           MOV      R0,#+256
   \   00000028   250100EF           SWI      +293
   \   0000002C   380086E5           STR      R0,[R6, #+56]
   1310            CutWSTR(search_string,0);
   \   00000030   0010A0E3           MOV      R1,#+0
   \   00000034   260100EF           SWI      +294
   1311            search_inet_string = AllocWS(1024);
   \   00000038   400EA0E3           MOV      R0,#+1024
   \   0000003C   250100EF           SWI      +293
   \   00000040   400086E5           STR      R0,[R6, #+64]
   1312            CutWSTR(search_inet_string,0);
   \   00000044   0510A0E1           MOV      R1,R5
   \   00000048   260100EF           SWI      +294
   1313            search_isCaseSens = 0;
   \   0000004C   3C5086E5           STR      R5,[R6, #+60]
   1314            csm->csm.state=0;
   \   00000050   105084E5           STR      R5,[R4, #+16]
   1315            csm->csm.unk1=0;
   \   00000054   145084E5           STR      R5,[R4, #+20]
   1316            csm->view_id=CreateViewGUI(0,0);
   \   00000058   0510A0E1           MOV      R1,R5
   \   0000005C   0100A0E1           MOV      R0,R1
   \   00000060   ........           BL       CreateViewGUI
   \   00000064   280084E5           STR      R0,[R4, #+40]
   1317            sieget_ipc.data = NULL;
   \   00000068   145086E5           STR      R5,[R6, #+20]
   1318          }
   \   0000006C   7080BDE8           POP      {R4-R6,PC}       ;; return
   1319          

   \                                 In segment CODE, align 4, keep-with-next
   1320          static void KillAll(void)
   1321          {
   \                     KillAll:
   \   00000000   10402DE9           PUSH     {R4,LR}
   1322            FreePageStack();
   1323            FreeWS(ws_console);
   \   00000004   ........           LDR      R4,??DataTable28  ;; Xipc
   \   00000008   ........           _BLF     FreePageStack,??FreePageStack??rA
   \   0000000C   340094E5           LDR      R0,[R4, #+52]
   \   00000010   290100EF           SWI      +297
   1324            FreeWS(search_string);
   \   00000014   380094E5           LDR      R0,[R4, #+56]
   \   00000018   290100EF           SWI      +297
   1325            FreeWS(search_inet_string);
   \   0000001C   400094E5           LDR      R0,[R4, #+64]
   \   00000020   290100EF           SWI      +297
   1326            lgpFreeLangPack();
   \   00000024   1040BDE8           POP      {R4,LR}          ;; Pop
   \   00000028   ........           _BF      lgpFreeLangPack,??lgpFreeLangPack??rA  ;; tailcall
   1327          }
   1328          
   1329          extern void *ELF_BEGIN;
   1330          

   \                                 In segment CODE, align 4, keep-with-next
   1331          static void Killer(void)
   1332          {
   \                     Killer:
   \   00000000   00402DE9           PUSH     {LR}
   1333            //extern void *ELF_BEGIN;
   1334            KillAll();
   \   00000004   ........           BL       KillAll
   1335            kill_data(&ELF_BEGIN,(void (*)(void *))mfree_adr());
   \   00000008   158000EF           SWI      +32789
   \   0000000C   0010A0E1           MOV      R1,R0
   \   00000010   04009FE5           LDR      R0,??Killer_0    ;; ELF_BEGIN
   \   00000014   0040BDE8           POP      {LR}             ;; Pop
   \   00000018   ........           _BF      kill_data,??kill_data??rA  ;; tailcall
   \                     ??Killer_0:
   \   0000001C   ........           DC32     ELF_BEGIN
   1336          }
   1337          

   \                                 In segment CODE, align 4, keep-with-next
   1338          static void maincsm_onclose(CSM_RAM *csm)
   1339          {
   \                     maincsm_onclose:
   \   00000000   10402DE9           PUSH     {R4,LR}
   1340            TERMINATED=1;
   \   00000004   ........           LDR      R4,??DataTable28  ;; Xipc
   \   00000008   0100A0E3           MOV      R0,#+1
   \   0000000C   180084E5           STR      R0,[R4, #+24]
   1341            if (goto_url) mfree(goto_url);
   \   00000010   280094E5           LDR      R0,[R4, #+40]
   \   00000014   000050E3           CMP      R0,#+0
   \   00000018   0000000A           BEQ      ??maincsm_onclose_0
   \   0000001C   150000EF           SWI      +21
   1342            if (sieget_ipc.data) mfree(sieget_ipc.data);
   \                     ??maincsm_onclose_0:
   \   00000020   140094E5           LDR      R0,[R4, #+20]
   \   00000024   000050E3           CMP      R0,#+0
   \   00000028   0000000A           BEQ      ??maincsm_onclose_1
   \   0000002C   150000EF           SWI      +21
   1343            SUBPROC((void *)Killer);
   \                     ??maincsm_onclose_1:
   \   00000030   ........           LDR      R0,??DataTable30  ;; Killer
   \   00000034   710100EF           SWI      +369
   1344          }
   \   00000038   1080BDE8           POP      {R4,PC}          ;; return
   1345          

   \                                 In segment CODE, align 4, keep-with-next
   1346          void GotoLink(void* data)
   1347          {
   \                     GotoLink:
   \   00000000   10402DE9           PUSH     {R4,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   1348            LockSched();
   \   00000008   460100EF           SWI      +326
   1349            if (!TERMINATED)
   \   0000000C   ........           LDR      R0,??DataTable19  ;; Xipc + 24
   \   00000010   000090E5           LDR      R0,[R0, #+0]
   \   00000014   000050E3           CMP      R0,#+0
   \   00000018   0E00001A           BNE      ??GotoLink_0
   1350            {
   1351              IPC_REQ *sipc;
   1352              sipc=malloc(sizeof(IPC_REQ));
   \   0000001C   0C00A0E3           MOV      R0,#+12
   \   00000020   140000EF           SWI      +20
   1353              sipc->name_to=ipc_my_name;
   \   00000024   ........           LDR      R1,??DataTable22  ;; `?<Constant "$urlcache\\\\$date$time.url">`
   1354              sipc->name_from=ipc_my_name;
   1355              sipc->data=data;
   1356              GBS_SendMessage(MMI_CEPID,MSG_IPC,IPC_GOTO_URL,sipc);
   \   00000028   0030A0E1           MOV      R3,R0
   \   0000002C   582081E2           ADD      R2,R1,#+88
   \   00000030   002080E5           STR      R2,[R0, #+0]
   \   00000034   581081E2           ADD      R1,R1,#+88
   \   00000038   041080E5           STR      R1,[R0, #+4]
   \   0000003C   084080E5           STR      R4,[R0, #+8]
   \   00000040   0220A0E3           MOV      R2,#+2
   \   00000044   B010A0E3           MOV      R1,#+176
   \   00000048   DE1C81E3           ORR      R1,R1,#0xDE00
   \   0000004C   0900A0E3           MOV      R0,#+9
   \   00000050   420C80E3           ORR      R0,R0,#0x4200
   \   00000054   000100EF           SWI      +256
   1357            }
   1358            UnlockSched();
   \                     ??GotoLink_0:
   \   00000058   470100EF           SWI      +327
   1359          }
   \   0000005C   1080BDE8           POP      {R4,PC}          ;; return
   1360          

   \                                 In segment CODE, align 4, keep-with-next
   1361          void GotoFile(void* data)
   1362          {
   \                     GotoFile:
   \   00000000   10402DE9           PUSH     {R4,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   1363            LockSched();
   \   00000008   460100EF           SWI      +326
   1364            if (!TERMINATED)
   \   0000000C   ........           LDR      R0,??DataTable19  ;; Xipc + 24
   \   00000010   000090E5           LDR      R0,[R0, #+0]
   \   00000014   000050E3           CMP      R0,#+0
   \   00000018   0E00001A           BNE      ??GotoFile_0
   1365            {
   1366              IPC_REQ *sipc;
   1367              sipc=malloc(sizeof(IPC_REQ));
   \   0000001C   0C00A0E3           MOV      R0,#+12
   \   00000020   140000EF           SWI      +20
   1368              sipc->name_to=ipc_my_name;
   \   00000024   ........           LDR      R1,??DataTable22  ;; `?<Constant "$urlcache\\\\$date$time.url">`
   1369              sipc->name_from=ipc_my_name;
   1370              sipc->data=data;
   1371              GBS_SendMessage(MMI_CEPID,MSG_IPC,IPC_GOTO_FILE,sipc);
   \   00000028   0030A0E1           MOV      R3,R0
   \   0000002C   582081E2           ADD      R2,R1,#+88
   \   00000030   002080E5           STR      R2,[R0, #+0]
   \   00000034   581081E2           ADD      R1,R1,#+88
   \   00000038   041080E5           STR      R1,[R0, #+4]
   \   0000003C   084080E5           STR      R4,[R0, #+8]
   \   00000040   0320A0E3           MOV      R2,#+3
   \   00000044   B010A0E3           MOV      R1,#+176
   \   00000048   DE1C81E3           ORR      R1,R1,#0xDE00
   \   0000004C   0900A0E3           MOV      R0,#+9
   \   00000050   420C80E3           ORR      R0,R0,#0x4200
   \   00000054   000100EF           SWI      +256
   1372            }
   1373            UnlockSched();
   \                     ??GotoFile_0:
   \   00000058   470100EF           SWI      +327
   1374          }
   \   0000005C   1080BDE8           POP      {R4,PC}          ;; return
   1375          

   \                                 In segment CODE, align 4, keep-with-next
   1376          static int maincsm_onmessage(CSM_RAM *data, GBS_MSG *msg)
   1377          {
   \                     maincsm_onmessage:
   \   00000000   F04F2DE9           PUSH     {R4-R11,LR}
   \   00000004   0CD04DE2           SUB      SP,SP,#+12
   \   00000008   0040A0E1           MOV      R4,R0
   1378            MAIN_CSM *csm=(MAIN_CSM*)data;
   1379            int csm_result=1;
   1380            //IPC
   1381            if (msg->msg==MSG_IPC)
   \   0000000C   ........           LDR      R6,??DataTable28  ;; Xipc
   \   00000010   0150A0E1           MOV      R5,R1
   \   00000014   040095E5           LDR      R0,[R5, #+4]
   \   00000018   0180A0E3           MOV      R8,#+1
   \   0000001C   0070A0E3           MOV      R7,#+0
   \   00000020   B010A0E3           MOV      R1,#+176
   \   00000024   DE1C81E3           ORR      R1,R1,#0xDE00
   \   00000028   010050E1           CMP      R0,R1
   \   0000002C   AE00001A           BNE      ??maincsm_onmessage_1
   1382            {
   1383              IPC_REQ *ipc;
   1384              if ((ipc=(IPC_REQ*)msg->data0))
   \   00000030   0C9095E5           LDR      R9,[R5, #+12]
   \   00000034   000059E3           CMP      R9,#+0
   \   00000038   BB00000A           BEQ      ??maincsm_onmessage_2
   1385              {
   1386                if (strcmp_nocase(ipc->name_to,ipc_my_name)==0)
   \   0000003C   ........           LDR      R10,??DataTable22  ;; `?<Constant "$urlcache\\\\$date$time.url">`
   \   00000040   000099E5           LDR      R0,[R9, #+0]
   \   00000044   58108AE2           ADD      R1,R10,#+88
   \   00000048   ........           _BLF     strcmp_nocase,??strcmp_nocase??rA
   \   0000004C   000050E3           CMP      R0,#+0
   \   00000050   A500001A           BNE      ??maincsm_onmessage_1
   1387                {
   1388                  //    ,   
   1389                  switch (msg->submess)
   \   00000054   081095E5           LDR      R1,[R5, #+8]
   \   00000058   040099E5           LDR      R0,[R9, #+4]
   \   0000005C   011051E2           SUBS     R1,R1,#+1
   \   00000060   0600000A           BEQ      ??maincsm_onmessage_3
   \   00000064   011051E2           SUBS     R1,R1,#+1
   \   00000068   7700000A           BEQ      ??maincsm_onmessage_4
   \   0000006C   011051E2           SUBS     R1,R1,#+1
   \   00000070   8700000A           BEQ      ??maincsm_onmessage_5
   \   00000074   011051E2           SUBS     R1,R1,#+1
   \   00000078   1C00000A           BEQ      ??maincsm_onmessage_6
   \   0000007C   9A0000EA           B        ??maincsm_onmessage_1
   1390                  {
   1391                  case IPC_DATA_ARRIVED:
   1392                    if (ipc->name_from==ipc_my_name)
   \                     ??maincsm_onmessage_3:
   \   00000080   58108AE2           ADD      R1,R10,#+88
   \   00000084   010050E1           CMP      R0,R1
   \   00000088   9700001A           BNE      ??maincsm_onmessage_1
   1393                    {
   1394                      VIEW_GUI *p=FindGUIbyId(csm->view_id,NULL);
   \   0000008C   280094E5           LDR      R0,[R4, #+40]
   \   00000090   0010A0E3           MOV      R1,#+0
   \   00000094   090200EF           SWI      +521
   1395                      VIEWDATA *vd;
   1396                      int len=*((int*)(ipc->data));
   \   00000098   081099E5           LDR      R1,[R9, #+8]
   1397                      char *buf=((char*)(ipc->data))+4;
   1398                      if (p)
   \   0000009C   000050E3           CMP      R0,#+0
   1399                      {
   1400                        vd=p->vd;
   \   000000A0   34809015           LDRNE    R8,[R0, #+52]
   \   000000A4   ........           LDR      R2,[R1], #+4
   1401                        if (vd)
   \   000000A8   00005813           CMPNE    R8,#+0
   \   000000AC   0C00000A           BEQ      ??maincsm_onmessage_7
   1402                        {
   1403                          OMS_DataArrived(vd,buf,len);
   \   000000B0   0800A0E1           MOV      R0,R8
   \   000000B4   ........           _BLF     OMS_DataArrived,??OMS_DataArrived??rA
   1404                          int curr_view_line = vd->view_line;
   \   000000B8   1CA098E5           LDR      R10,[R8, #+28]
   1405                          while(LineDown(vd)); // fill line cache
   \                     ??maincsm_onmessage_8:
   \   000000BC   0800A0E1           MOV      R0,R8
   \   000000C0   ........           _BLF     LineDown,??LineDown??rA
   \   000000C4   000050E3           CMP      R0,#+0
   \   000000C8   FBFFFF1A           BNE      ??maincsm_onmessage_8
   1406                          vd->view_line = curr_view_line;
   \   000000CC   1CA088E5           STR      R10,[R8, #+28]
   1407                          if (IsGuiOnTop(csm->view_id)) DirectRedrawGUI();
   \   000000D0   280094E5           LDR      R0,[R4, #+40]
   \   000000D4   350100EF           SWI      +309
   \   000000D8   000050E3           CMP      R0,#+0
   \   000000DC   0000000A           BEQ      ??maincsm_onmessage_7
   \   000000E0   3F0100EF           SWI      +319
   1408                        }
   1409                      }
   1410                      mfree(ipc->data);
   \                     ??maincsm_onmessage_7:
   \   000000E4   080099E5           LDR      R0,[R9, #+8]
   \   000000E8   150000EF           SWI      +21
   1411                      mfree(ipc);
   \                     ??maincsm_onmessage_9:
   \   000000EC   7B0000EA           B        ??maincsm_onmessage_10
   1412                      csm_result=0;  //  
   1413                    }
   1414                    break;
   1415                  case IPC_DATA_END:
   1416                    if (ipc->name_from==ipc_my_name)
   \                     ??maincsm_onmessage_6:
   \   000000F0   58108AE2           ADD      R1,R10,#+88
   \   000000F4   010050E1           CMP      R0,R1
   \   000000F8   7B00001A           BNE      ??maincsm_onmessage_1
   1417                    {
   1418                      VIEW_GUI *p=FindGUIbyId(csm->view_id,NULL);
   \   000000FC   280094E5           LDR      R0,[R4, #+40]
   \   00000100   0010A0E3           MOV      R1,#+0
   \   00000104   090200EF           SWI      +521
   \   00000108   0080B0E1           MOVS     R8,R0
   1419                      VIEWDATA *vd;
   1420                      if (p)
   1421                      {
   1422                        vd=p->vd;
   \   0000010C   34A09815           LDRNE    R10,[R8, #+52]
   1423                        if (vd)
   \   00000110   00005A13           CMPNE    R10,#+0
   \   00000114   7100000A           BEQ      ??maincsm_onmessage_10
   1424                        {
   1425                          if (!vd->title)
   \   00000118   E4009AE5           LDR      R0,[R10, #+228]
   \   0000011C   000050E3           CMP      R0,#+0
   \   00000120   0C00001A           BNE      ??maincsm_onmessage_11
   1426                          {
   1427                            if (view_url_mode == MODE_URL)
   \   00000124   200096E5           LDR      R0,[R6, #+32]
   \   00000128   010050E3           CMP      R0,#+1
   \   0000012C   0300001A           BNE      ??maincsm_onmessage_12
   1428                            {
   1429                              UpdateCSMname(view_url+2, MODE_URL);             
   \   00000130   240096E5           LDR      R0,[R6, #+36]
   \   00000134   0110A0E3           MOV      R1,#+1
   \   00000138   020080E2           ADD      R0,R0,#+2
   \   0000013C   ........           BL       UpdateCSMname
   1430                            }
   1431                            if (view_url_mode == MODE_FILE)
   \                     ??maincsm_onmessage_12:
   \   00000140   200096E5           LDR      R0,[R6, #+32]
   \   00000144   000050E3           CMP      R0,#+0
   \   00000148   0200001A           BNE      ??maincsm_onmessage_11
   1432                            {
   1433                              UpdateCSMname(view_url, MODE_FILE);
   \   0000014C   240096E5           LDR      R0,[R6, #+36]
   \   00000150   0010A0E3           MOV      R1,#+0
   \   00000154   ........           BL       UpdateCSMname
   1434                            }
   1435                          }
   1436                          if (p->isPositionDataPresent)
   \                     ??maincsm_onmessage_11:
   \   00000158   440098E5           LDR      R0,[R8, #+68]
   \   0000015C   000050E3           CMP      R0,#+0
   \   00000160   1400000A           BEQ      ??maincsm_onmessage_13
   1437                          {
   1438                            unsigned int saved_viewline=p->view_line;
   \   00000164   3C0098E5           LDR      R0,[R8, #+60]
   1439                            int line_diff = saved_viewline - vd->view_line;
   \   00000168   1C109AE5           LDR      R1,[R10, #+28]
   1440                            int go_up = 0;
   \   0000016C   0030A0E3           MOV      R3,#+0
   \   00000170   01B050E0           SUBS     R11,R0,R1
   \   00000174   04308DE5           STR      R3,[SP, #+4]
   1441                            if (line_diff < 0)
   \   00000178   0400005A           BPL      ??maincsm_onmessage_14
   1442                            {
   1443                              go_up = 1;
   \   0000017C   0130A0E3           MOV      R3,#+1
   \   00000180   04308DE5           STR      R3,[SP, #+4]
   1444                              line_diff = vd->view_line - saved_viewline;
   \   00000184   00B041E0           SUB      R11,R1,R0
   \   00000188   000000EA           B        ??maincsm_onmessage_14
   1445                            }
   1446                            while (line_diff--)
   1447                            {
   1448                              if (go_up)
   1449                              {
   1450                                LineUp(vd);
   \                     ??maincsm_onmessage_15:
   \   0000018C   ........           _BLF     LineUp,??LineUp??rA
   1451                              }
   \                     ??maincsm_onmessage_14:
   \   00000190   0B00A0E1           MOV      R0,R11
   \   00000194   01B040E2           SUB      R11,R0,#+1
   \   00000198   000050E3           CMP      R0,#+0
   \   0000019C   0500000A           BEQ      ??maincsm_onmessage_13
   \   000001A0   04009DE5           LDR      R0,[SP, #+4]
   \   000001A4   000050E3           CMP      R0,#+0
   \   000001A8   0A00A0E1           MOV      R0,R10
   \   000001AC   F6FFFF1A           BNE      ??maincsm_onmessage_15
   1452                              else
   1453                              {
   1454                                LineDown(vd);
   \   000001B0   ........           _BLF     LineDown,??LineDown??rA
   \   000001B4   F5FFFFEA           B        ??maincsm_onmessage_14
   1455                              }
   1456                            }
   1457                          }
   1458                          if (p->pos_cur_ref != 0xFFFFFFFF)
   \                     ??maincsm_onmessage_13:
   \   000001B8   400098E5           LDR      R0,[R8, #+64]
   \   000001BC   07B0E0E1           MVN      R11,R7
   \   000001C0   0B0050E1           CMP      R0,R11
   1459                            vd->pos_cur_ref = p->pos_cur_ref;
   1460                          else
   1461                          {
   1462                            if (view_url_mode == MODE_URL)
   \   000001C4   20009605           LDREQ    R0,[R6, #+32]
   \   000001C8   28008A15           STRNE    R0,[R10, #+40]
   \   000001CC   01005003           CMPEQ    R0,#+1
   \   000001D0   0800001A           BNE      ??maincsm_onmessage_16
   1463                            {
   1464                              char* local_link = strchr(view_url+2, '#');
   \   000001D4   240096E5           LDR      R0,[R6, #+36]
   \   000001D8   2310A0E3           MOV      R1,#+35
   \   000001DC   020080E2           ADD      R0,R0,#+2
   \   000001E0   180000EF           SWI      +24
   1465                              if (local_link)
   \   000001E4   000050E3           CMP      R0,#+0
   \   000001E8   0200000A           BEQ      ??maincsm_onmessage_16
   1466                              {
   1467                                GoToLocalLinkPos(vd,local_link+1);
   \   000001EC   011080E2           ADD      R1,R0,#+1
   \   000001F0   0A00A0E1           MOV      R0,R10
   \   000001F4   ........           BL       GoToLocalLinkPos
   1468                              }  
   1469                            }
   1470                          }
   1471                          
   1472                          if (IsGuiOnTop(csm->view_id)) DirectRedrawGUI();
   \                     ??maincsm_onmessage_16:
   \   000001F8   280094E5           LDR      R0,[R4, #+40]
   \   000001FC   350100EF           SWI      +309
   \   00000200   000050E3           CMP      R0,#+0
   \   00000204   0000000A           BEQ      ??maincsm_onmessage_17
   \   00000208   3F0100EF           SWI      +319
   1473                          
   1474                          if ((p->pos_cur_ref != 0xFFFFFFFF) && (vd->pos_cur_ref == 0xFFFFFFFF))
   \                     ??maincsm_onmessage_17:
   \   0000020C   400098E5           LDR      R0,[R8, #+64]
   \   00000210   0B0050E1           CMP      R0,R11
   \   00000214   3100000A           BEQ      ??maincsm_onmessage_10
   \   00000218   28009AE5           LDR      R0,[R10, #+40]
   \   0000021C   0B0050E1           CMP      R0,R11
   \   00000220   2E00001A           BNE      ??maincsm_onmessage_10
   1475                          {
   1476                            LineDown(vd);
   \   00000224   0A00A0E1           MOV      R0,R10
   \   00000228   ........           _BLF     LineDown,??LineDown??rA
   1477                            vd->pos_cur_ref = p->pos_cur_ref;
   \   0000022C   400098E5           LDR      R0,[R8, #+64]
   \   00000230   28008AE5           STR      R0,[R10, #+40]
   1478                            if (IsGuiOnTop(csm->view_id)) DirectRedrawGUI();
   \   00000234   280094E5           LDR      R0,[R4, #+40]
   \   00000238   350100EF           SWI      +309
   \   0000023C   000050E3           CMP      R0,#+0
   \   00000240   2600000A           BEQ      ??maincsm_onmessage_10
   \   00000244   3F0100EF           SWI      +319
   1479                          }
   1480                              
   1481                        }
   1482                      }
   1483                      mfree(ipc);
   \   00000248   240000EA           B        ??maincsm_onmessage_10
   1484                      csm_result=0;  //  
   1485                    }
   1486                    break; 
   1487                  case IPC_GOTO_URL:
   1488                    if (ipc->name_from==ipc_my_name)
   \                     ??maincsm_onmessage_4:
   \   0000024C   58108AE2           ADD      R1,R10,#+88
   \   00000250   010050E1           CMP      R0,R1
   \   00000254   2400001A           BNE      ??maincsm_onmessage_1
   1489                    {
   1490                      FreeViewUrl();
   \   00000258   ........           BL       FreeViewUrl
   1491                      goto_url = ToWeb(goto_url,1,1);
   \   0000025C   280096E5           LDR      R0,[R6, #+40]
   \   00000260   0120A0E3           MOV      R2,#+1
   \   00000264   0210A0E1           MOV      R1,R2
   \   00000268   ........           _BLF     ToWeb,??ToWeb??rA
   \   0000026C   280086E5           STR      R0,[R6, #+40]
   1492                      view_url=goto_url;
   \   00000270   240086E5           STR      R0,[R6, #+36]
   1493                      view_url_mode=MODE_URL;
   \   00000274   0800A0E1           MOV      R0,R8
   \   00000278   200086E5           STR      R0,[R6, #+32]
   1494                      goto_url=NULL;
   \   0000027C   287086E5           STR      R7,[R6, #+40]
   1495                      csm->view_id=CreateViewGUI(0, ipc->data);
   \   00000280   081099E5           LDR      R1,[R9, #+8]
   \   00000284   0700A0E1           MOV      R0,R7
   \   00000288   ........           BL       CreateViewGUI
   \   0000028C   280084E5           STR      R0,[R4, #+40]
   1496                      csm_result=0;  // 
   \   00000290   120000EA           B        ??maincsm_onmessage_10
   1497                      mfree(ipc);
   1498                    }
   1499                    break;
   1500                  case IPC_GOTO_FILE:
   1501                    if (ipc->name_from==ipc_my_name)
   \                     ??maincsm_onmessage_5:
   \   00000294   58108AE2           ADD      R1,R10,#+88
   \   00000298   010050E1           CMP      R0,R1
   \   0000029C   1200001A           BNE      ??maincsm_onmessage_1
   1502                    {
   1503                      if (ParseInputFilename(goto_url))
   \   000002A0   280096E5           LDR      R0,[R6, #+40]
   \   000002A4   ........           BL       ParseInputFilename
   \   000002A8   000050E3           CMP      R0,#+0
   \   000002AC   0600000A           BEQ      ??maincsm_onmessage_18
   1504                      {
   1505                        if (ipc->data == (void*)0xFA) //Special case for OMS bookmarks
   \   000002B0   081099E5           LDR      R1,[R9, #+8]
   \   000002B4   FA0051E3           CMP      R1,#+250
   1506                          csm->view_id=CreateViewGUI(0, 0); //cached = false, no data
   \   000002B8   0010A003           MOVEQ    R1,#+0
   \   000002BC   0100A001           MOVEQ    R0,R1
   1507                        else
   1508                          csm->view_id=CreateViewGUI(1, ipc->data);
   \   000002C0   0100A013           MOVNE    R0,#+1
   \   000002C4   ........           BL       CreateViewGUI
   \   000002C8   280084E5           STR      R0,[R4, #+40]
   1509                      }
   1510                      _safe_free(goto_url);
   \                     ??maincsm_onmessage_18:
   \   000002CC   280096E5           LDR      R0,[R6, #+40]
   \   000002D0   000050E3           CMP      R0,#+0
   \   000002D4   0000000A           BEQ      ??maincsm_onmessage_19
   \   000002D8   150000EF           SWI      +21
   \                     ??maincsm_onmessage_19:
   \   000002DC   287086E5           STR      R7,[R6, #+40]
   1511                      csm_result=0;   //  
   1512                      mfree(ipc);
   \                     ??maincsm_onmessage_10:
   \   000002E0   0900A0E1           MOV      R0,R9
   \   000002E4   150000EF           SWI      +21
   \   000002E8   0080A0E3           MOV      R8,#+0
   1513                    }
   1514                    break;
   1515                  }
   1516                }
   1517              }
   1518            }
   1519            if (msg->msg==MSG_RECONFIGURE_REQ)
   \                     ??maincsm_onmessage_1:
   \   000002EC   040095E5           LDR      R0,[R5, #+4]
   \   000002F0   AF10A0E3           MOV      R1,#+175
   \   000002F4   DE1C81E3           ORR      R1,R1,#0xDE00
   \   000002F8   010050E1           CMP      R0,R1
   \   000002FC   0A00001A           BNE      ??maincsm_onmessage_2
   1520            {
   1521              if (strcmp_nocase(successed_config_filename,(char *)msg->data0)==0)
   \   00000300   90019FE5           LDR      R0,??maincsm_onmessage_20  ;; successed_config_filename
   \   00000304   0C1095E5           LDR      R1,[R5, #+12]
   \   00000308   000090E5           LDR      R0,[R0, #+0]
   \   0000030C   ........           _BLF     strcmp_nocase,??strcmp_nocase??rA
   \   00000310   000050E3           CMP      R0,#+0
   \   00000314   0400001A           BNE      ??maincsm_onmessage_2
   1522              {
   1523                //ShowMSG(1,(int)"BalletMini config updated!");
   1524                ShowMSG(1,(int)lgpData[LGP_CfgUpdated]);
   \   00000318   7C019FE5           LDR      R0,??maincsm_onmessage_20+0x4  ;; lgpData + 12
   \   0000031C   001090E5           LDR      R1,[R0, #+0]
   \   00000320   0100A0E3           MOV      R0,#+1
   \   00000324   480100EF           SWI      +328
   1525                InitConfig();
   \   00000328   ........           _BLF     InitConfig,??InitConfig??rA
   1526              }    
   1527            }
   1528            ParseSocketMsg(msg);
   \                     ??maincsm_onmessage_2:
   \   0000032C   0500A0E1           MOV      R0,R5
   \   00000330   ........           _BLF     ParseSocketMsg,??ParseSocketMsg??rA
   1529            if (msg->msg==MSG_GUI_DESTROYED)
   \   00000334   040095E5           LDR      R0,[R5, #+4]
   \   00000338   0E10A0E3           MOV      R1,#+14
   \   0000033C   641C81E3           ORR      R1,R1,#0x6400
   \   00000340   010050E1           CMP      R0,R1
   \   00000344   5100001A           BNE      ??maincsm_onmessage_21
   1530            {
   1531              if ((int)msg->data0==csm->view_id)
   \   00000348   0C0095E5           LDR      R0,[R5, #+12]
   \   0000034C   281094E5           LDR      R1,[R4, #+40]
   \   00000350   010050E1           CMP      R0,R1
   \   00000354   2D00001A           BNE      ??maincsm_onmessage_22
   1532              {
   1533                switch((int)msg->data1)
   \   00000358   100095E5           LDR      R0,[R5, #+16]
   \   0000035C   3CA19FE5           LDR      R10,??maincsm_onmessage_20+0x8  ;; GotoLink
   \   00000360   3C919FE5           LDR      R9,??maincsm_onmessage_20+0xC  ;; GotoFile
   \   00000364   FA0040E2           SUB      R0,R0,#+250
   \   00000368   050050E3           CMP      R0,#+5
   \   0000036C   2500008A           BHI      ??maincsm_onmessage_23
   \   00000370   011F8FE2           ADR      R1,??maincsm_onmessage_0
   \   00000374   0010D1E7           LDRB     R1,[R1, R0]
   \   00000378   01F18FE0           ADD      PC,PC,R1, LSL #+2
   \                     ??maincsm_onmessage_0:
   \   0000037C   1F102201           DC8      +31,+16,+34,+1
   \   00000380   0C190000           DC8      +12,+25,+0,+0
   1534                {
   1535                case 0xFD: //forward
   1536                  {
   1537                    mfree(PopPageFromStack());
   \                     ??maincsm_onmessage_24:
   \   00000384   ........           _BLF     PopPageFromStack,??PopPageFromStack??rA
   \   00000388   150000EF           SWI      +21
   1538                    if ((goto_url=ForwardPageFromStack()))
   \   0000038C   ........           _BLF     ForwardPageFromStack,??ForwardPageFromStack??rA
   \                     ??maincsm_onmessage_25:
   \   00000390   280086E5           STR      R0,[R6, #+40]
   \   00000394   000050E3           CMP      R0,#+0
   \   00000398   1A00000A           BEQ      ??maincsm_onmessage_23
   1539                    {
   1540                      SUBPROC((void*)GotoFile, getPageParams());
   \   0000039C   ........           _BLF     getPageParams,??getPageParams??rA
   \   000003A0   0010A0E1           MOV      R1,R0
   \   000003A4   0900A0E1           MOV      R0,R9
   \                     ??maincsm_onmessage_26:
   \   000003A8   710100EF           SWI      +369
   1541                      break;
   \   000003AC   170000EA           B        ??maincsm_onmessage_22
   1542                    }
   1543                    goto L_CLOSE;
   1544                  }
   1545                case 0xFE: //    
   1546                  {
   1547                    mfree(PopPageFromStack());
   \                     ??maincsm_onmessage_27:
   \   000003B0   ........           _BLF     PopPageFromStack,??PopPageFromStack??rA
   \   000003B4   150000EF           SWI      +21
   1548                    if ((goto_url=PopPageFromStack()))
   \   000003B8   ........           _BLF     PopPageFromStack,??PopPageFromStack??rA
   \   000003BC   F3FFFFEA           B        ??maincsm_onmessage_25
   1549                    {
   1550                      SUBPROC((void*)GotoFile, getPageParams());
   1551                      break;
   1552                    }
   1553                    goto L_CLOSE;
   1554                  }
   1555                case 0xFB: //reload
   1556                  {
   1557                    mfree(PopPageFromStack());
   \                     ??maincsm_onmessage_28:
   \   000003C0   ........           _BLF     PopPageFromStack,??PopPageFromStack??rA
   \   000003C4   150000EF           SWI      +21
   1558                    if (goto_url)
   \   000003C8   280096E5           LDR      R0,[R6, #+40]
   \   000003CC   000050E3           CMP      R0,#+0
   \   000003D0   0C00000A           BEQ      ??maincsm_onmessage_23
   1559                    {
   1560                      SUBPROC((void*)GotoLink, getPageParams());
   \   000003D4   ........           _BLF     getPageParams,??getPageParams??rA
   \   000003D8   0010A0E1           MOV      R1,R0
   \   000003DC   0A00A0E1           MOV      R0,R10
   \                     ??maincsm_onmessage_29:
   \   000003E0   F0FFFFEA           B        ??maincsm_onmessage_26
   1561                      break;
   1562                    }
   1563                    else
   1564                      goto L_CLOSE;
   1565                  }
   1566                case 0xFF: //  
   1567                  if (goto_url)
   \                     ??maincsm_onmessage_30:
   \   000003E4   280096E5           LDR      R0,[R6, #+40]
   \   000003E8   000050E3           CMP      R0,#+0
   \   000003EC   0500000A           BEQ      ??maincsm_onmessage_23
   1568                  {
   1569                    SUBPROC((void*)GotoLink, 0);
   \   000003F0   0010A0E3           MOV      R1,#+0
   \   000003F4   0A00A0E1           MOV      R0,R10
   \   000003F8   EAFFFFEA           B        ??maincsm_onmessage_26
   1570                    break;
   1571                  }
   1572                  else
   1573                    goto L_CLOSE;
   1574                case 0xFA:
   1575                  {
   1576                    SUBPROC((void*)GotoFile, 0xFA); //OMS bookmarks
   \                     ??maincsm_onmessage_31:
   \   000003FC   FA10A0E3           MOV      R1,#+250
   \   00000400   0900A0E1           MOV      R0,R9
   \   00000404   E7FFFFEA           B        ??maincsm_onmessage_26
   1577                    break;
   1578                  }
   1579                default:
   1580                L_CLOSE:
   1581                  csm->csm.state=-3;
   \                     ??maincsm_onmessage_23:
   \   00000408   0200E0E3           MVN      R0,#+2
   \   0000040C   100084E5           STR      R0,[R4, #+16]
   1582                  break;
   1583                }
   1584              }
   1585              if ((int)msg->data0==csm->goto_url)
   \                     ??maincsm_onmessage_22:
   \   00000410   0C0095E5           LDR      R0,[R5, #+12]
   \   00000414   2C1094E5           LDR      R1,[R4, #+44]
   \   00000418   010050E1           CMP      R0,R1
   \   0000041C   0600001A           BNE      ??maincsm_onmessage_32
   1586              {
   1587                if ((int)msg->data1==0xFF)
   \   00000420   100095E5           LDR      R0,[R5, #+16]
   \   00000424   FF0050E3           CMP      R0,#+255
   \   00000428   0200001A           BNE      ??maincsm_onmessage_33
   1588                {
   1589                  GeneralFunc_flag1(csm->view_id,0xFF);
   \   0000042C   280094E5           LDR      R0,[R4, #+40]
   \   00000430   FF10A0E3           MOV      R1,#+255
   \   00000434   3D0100EF           SWI      +317
   1590                }
   1591                csm->goto_url=0;
   \                     ??maincsm_onmessage_33:
   \   00000438   2C7084E5           STR      R7,[R4, #+44]
   1592              }
   1593              if ((int)msg->data0==csm->sel_bmk)
   \                     ??maincsm_onmessage_32:
   \   0000043C   0C0095E5           LDR      R0,[R5, #+12]
   \   00000440   301094E5           LDR      R1,[R4, #+48]
   \   00000444   010050E1           CMP      R0,R1
   \   00000448   0C00001A           BNE      ??maincsm_onmessage_34
   1594              {
   1595                if ((int)msg->data1==0xFF)
   \   0000044C   100095E5           LDR      R0,[R5, #+16]
   \   00000450   FF0050E3           CMP      R0,#+255
   \   00000454   0200001A           BNE      ??maincsm_onmessage_35
   1596                {
   1597                  GeneralFunc_flag1(csm->view_id,0xFF);
   \   00000458   280094E5           LDR      R0,[R4, #+40]
   \   0000045C   FF10A0E3           MOV      R1,#+255
   \   00000460   3D0100EF           SWI      +317
   1598                }
   1599                if ((int)msg->data1==0xFA)
   \                     ??maincsm_onmessage_35:
   \   00000464   100095E5           LDR      R0,[R5, #+16]
   \   00000468   FA0050E3           CMP      R0,#+250
   \   0000046C   0200001A           BNE      ??maincsm_onmessage_36
   1600                {
   1601                  GeneralFunc_flag1(csm->view_id,0xFA);
   \   00000470   280094E5           LDR      R0,[R4, #+40]
   \   00000474   FA10A0E3           MOV      R1,#+250
   \   00000478   3D0100EF           SWI      +317
   1602                }
   1603                csm->sel_bmk=0;
   \                     ??maincsm_onmessage_36:
   \   0000047C   307084E5           STR      R7,[R4, #+48]
   1604              }
   1605              if ((int)msg->data0==csm->main_menu_id)
   \                     ??maincsm_onmessage_34:
   \   00000480   0C0095E5           LDR      R0,[R5, #+12]
   \   00000484   341094E5           LDR      R1,[R4, #+52]
   \   00000488   010050E1           CMP      R0,R1
   1606              {
   1607                csm->main_menu_id=0;
   \   0000048C   34708405           STREQ    R7,[R4, #+52]
   1608              }
   1609            }
   1610            return(csm_result);
   \                     ??maincsm_onmessage_21:
   \   00000490   0800A0E1           MOV      R0,R8
   \   00000494   FE8FBDE8           POP      {R1-R11,PC}      ;; return
   \                     ??maincsm_onmessage_20:
   \   00000498   ........           DC32     successed_config_filename
   \   0000049C   ........           DC32     lgpData + 12
   \   000004A0   ........           DC32     GotoLink
   \   000004A4   ........           DC32     GotoFile
   1611          }
   1612          

   \                                 In segment DATA_Z, align 4, align-sorted
   1613          static unsigned short maincsm_name_body[140];
   \                     maincsm_name_body:
   \   00000000                      DS8 280
   1614          
   1615          static const struct
   1616          {
   1617            CSM_DESC maincsm;
   1618            WSHDR maincsm_name;

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "%02x">`:
   \   00000000   2530327800         DC8 "%02x"
   \   00000005   000000             DC8 0, 0, 0
   \   00000008   70253032642D       DC8 "p%02d-%02d"
   \              2530326400  
   \   00000013   00                 DC8 0
   \   00000014   424D3A202577       DC8 "BM: %w"
   \              00          
   \   0000001B   00                 DC8 0
   \   0000001C   ............       DC32 maincsm_onmessage, maincsm_oncreate, 0, 0, 0, 0, maincsm_onclose
   \              ....00000000
   \              000000000000
   \              000000000000
   \              ........    
   \   00000038   380000000100       DC32 56, 1, minus11, maincsm_name_body, 55AACCCCH, 3333AA55H, 0
   \              0000........
   \              ........CCCC
   \              AA5555AA3333
   \              00000000    
   \   00000054   8B00               DC16 139
   \   00000056   0000               DC8 0, 0
   1619          }MAINCSM =
   1620          {
   1621            {
   1622            maincsm_onmessage,
   1623            maincsm_oncreate,
   1624          #ifdef NEWSGOLD
   1625            0,
   1626            0,
   1627            0,
   1628            0,
   1629          #endif
   1630            maincsm_onclose,
   1631            sizeof(MAIN_CSM),
   1632            1,
   1633            &minus11
   1634            },
   1635            {
   1636              maincsm_name_body,
   1637              NAMECSM_MAGIC1,
   1638              NAMECSM_MAGIC2,
   1639              0x0,
   1640              139
   1641            }
   1642          };
   1643          

   \                                 In segment CODE, align 4, keep-with-next
   1644          void UpdateCSMname(char *url, int mode)
   1645          {
   \                     UpdateCSMname:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   \   00000008   0150A0E1           MOV      R5,R1
   1646            WSHDR *ws=AllocWS(256);
   \   0000000C   400FA0E3           MOV      R0,#+256
   \   00000010   250100EF           SWI      +293
   \   00000014   0060A0E1           MOV      R6,R0
   1647            switch(mode)
   \   00000018   000055E3           CMP      R5,#+0
   \   0000001C   0200000A           BEQ      ??UpdateCSMname_0
   \   00000020   015055E2           SUBS     R5,R5,#+1
   \   00000024   0300000A           BEQ      ??UpdateCSMname_1
   \   00000028   050000EA           B        ??UpdateCSMname_2
   1648            {
   1649            case MODE_FILE:
   1650              str_2ws(ws,url,255);
   \                     ??UpdateCSMname_0:
   \   0000002C   FF20A0E3           MOV      R2,#+255
   \   00000030   0410A0E1           MOV      R1,R4
   \   00000034   040000EA           B        ??UpdateCSMname_3
   1651              break;
   1652            case MODE_URL:
   1653              ascii2ws(ws,url);
   \                     ??UpdateCSMname_1:
   \   00000038   0410A0E1           MOV      R1,R4
   \   0000003C   ........           _BLF     ascii2ws,??ascii2ws??rA
   \   00000040   020000EA           B        ??UpdateCSMname_4
   1654              break;
   1655            default:
   1656              str_2ws(ws,"",1);
   \                     ??UpdateCSMname_2:
   \   00000044   0120A0E3           MOV      R2,#+1
   \   00000048   081F8FE2           ADR      R1,??UpdateCSMname_5  ;; ""
   \                     ??UpdateCSMname_3:
   \   0000004C   6C0100EF           SWI      +364
   1657              break;
   1658            }
   1659            wsprintf((WSHDR *)(&MAINCSM.maincsm_name),"BM: %w",ws);
   \                     ??UpdateCSMname_4:
   \   00000050   ........           LDR      R0,??DataTable29  ;; `?<Constant "%02x">`
   \   00000054   0620A0E1           MOV      R2,R6
   \   00000058   141080E2           ADD      R1,R0,#+20
   \   0000005C   440080E2           ADD      R0,R0,#+68
   \   00000060   240100EF           SWI      +292
   1660            FreeWS(ws);
   \   00000064   0600A0E1           MOV      R0,R6
   \   00000068   290100EF           SWI      +297
   1661          }
   \   0000006C   7080BDE8           POP      {R4-R6,PC}       ;; return
   \                     ??UpdateCSMname_5:
   \   00000070   00000000           DC8      "",+0,+0,+0
   1662          

   \                                 In segment CODE, align 4, keep-with-next
   1663          int ReadUrlFile(char *url_file)
   1664          {
   \                     ReadUrlFile:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
   \   00000004   2CD04DE2           SUB      SP,SP,#+44
   \   00000008   0040A0E1           MOV      R4,R0
   1665            int f;
   1666            unsigned int err;
   1667            int fsize;
   1668            char *buf, *s;
   1669            FSTATS stat;
   1670            if (GetFileStats(url_file,&stat,&err)==-1) return 0;
   \   0000000C   0050E0E3           MVN      R5,#+0
   \   00000010   0D20A0E1           MOV      R2,SP
   \   00000014   04108DE2           ADD      R1,SP,#+4
   \   00000018   840000EF           SWI      +132
   \   0000001C   050050E1           CMP      R0,R5
   \   00000020   0200001A           BNE      ??ReadUrlFile_0
   \                     ??ReadUrlFile_1:
   \   00000024   0000A0E3           MOV      R0,#+0
   \   00000028   2CD08DE2           ADD      SP,SP,#+44
   \   0000002C   F080BDE8           POP      {R4-R7,PC}
   1671            if ((fsize=stat.size)<=0) return 0;
   \                     ??ReadUrlFile_0:
   \   00000030   08609DE5           LDR      R6,[SP, #+8]
   \   00000034   010056E3           CMP      R6,#+1
   \   00000038   F9FFFFBA           BLT      ??ReadUrlFile_1
   1672            if ((f=fopen(url_file,A_ReadOnly+A_BIN,P_READ,&err))==-1) return 0;
   \   0000003C   0D30A0E1           MOV      R3,SP
   \   00000040   8020A0E3           MOV      R2,#+128
   \   00000044   801CA0E3           MOV      R1,#+32768
   \   00000048   0400A0E1           MOV      R0,R4
   \   0000004C   0A0000EF           SWI      +10
   \   00000050   0070A0E1           MOV      R7,R0
   \   00000054   050057E1           CMP      R7,R5
   \   00000058   F1FFFF0A           BEQ      ??ReadUrlFile_1
   1673            FreeViewUrl();
   \   0000005C   ........           BL       FreeViewUrl
   1674            buf=malloc(fsize+3);
   \   00000060   030086E2           ADD      R0,R6,#+3
   \   00000064   140000EF           SWI      +20
   \   00000068   0040A0E1           MOV      R4,R0
   1675            buf[0]='0';
   \   0000006C   3000A0E3           MOV      R0,#+48
   \   00000070   0000C4E5           STRB     R0,[R4, #+0]
   1676            buf[1]='/';
   \   00000074   2F00A0E3           MOV      R0,#+47
   \   00000078   0100C4E5           STRB     R0,[R4, #+1]
   1677            buf[fread(f,buf+2,fsize,&err)+2]=0;
   \   0000007C   0050A0E3           MOV      R5,#+0
   \   00000080   0D30A0E1           MOV      R3,SP
   \   00000084   0620A0E1           MOV      R2,R6
   \   00000088   021084E2           ADD      R1,R4,#+2
   \   0000008C   0700A0E1           MOV      R0,R7
   \   00000090   0B0000EF           SWI      +11
   \   00000094   040080E0           ADD      R0,R0,R4
   \   00000098   0250C0E5           STRB     R5,[R0, #+2]
   1678            fclose(f,&err);
   \   0000009C   0D10A0E1           MOV      R1,SP
   \   000000A0   0700A0E1           MOV      R0,R7
   \   000000A4   0D0000EF           SWI      +13
   1679            s=buf;
   \   000000A8   0400A0E1           MOV      R0,R4
   \   000000AC   0010D0E5           LDRB     R1,[R0, #+0]
   \   000000B0   210051E3           CMP      R1,#+33
   \   000000B4   0200003A           BCC      ??ReadUrlFile_2
   1680            while(*s>32) s++;
   \                     ??ReadUrlFile_3:
   \   000000B8   0110F0E5           LDRB     R1,[R0, #+1]!
   \   000000BC   210051E3           CMP      R1,#+33
   \   000000C0   FCFFFF2A           BCS      ??ReadUrlFile_3
   1681            *s++=0;
   \                     ??ReadUrlFile_2:
   \   000000C4   ........           STRB     R5,[R0], #+1
   1682            view_url=realloc(buf,s-buf);
   \   000000C8   ........           LDR      R5,??DataTable28  ;; Xipc
   \   000000CC   041040E0           SUB      R1,R0,R4
   \   000000D0   0400A0E1           MOV      R0,R4
   \   000000D4   BA0000EF           SWI      +186
   \   000000D8   240085E5           STR      R0,[R5, #+36]
   1683            view_url_mode=MODE_URL;
   \   000000DC   0100A0E3           MOV      R0,#+1
   \   000000E0   200085E5           STR      R0,[R5, #+32]
   1684            return (1);
   \   000000E4   2CD08DE2           ADD      SP,SP,#+44
   \   000000E8   F080BDE8           POP      {R4-R7,PC}       ;; return
   1685          }
   1686          

   \                                 In segment CODE, align 4, keep-with-next
   1687          static int ParseInputFilename(const char *fn)
   1688          {
   1689            if (!strcmp_nocase(fn,"bookmarks"))
   \                     ParseInputFilename:
   \   00000000   A0109FE5           LDR      R1,??ParseInputFilename_0+0x8  ;; `?<Constant "bookmarks">`
   \   00000004   70402DE9           PUSH     {R4-R6,LR}
   \   00000008   ........           LDR      R5,??DataTable28  ;; Xipc
   \   0000000C   0040A0E1           MOV      R4,R0
   \   00000010   ........           _BLF     strcmp_nocase,??strcmp_nocase??rA
   \   00000014   000050E3           CMP      R0,#+0
   1690            {
   1691              view_url_mode=MODE_BOOKMARKS;
   \   00000018   0200A003           MOVEQ    R0,#+2
   \   0000001C   20008505           STREQ    R0,[R5, #+32]
   1692              return 1;
   \   00000020   1100000A           BEQ      ??ParseInputFilename_1
   1693            }
   1694            else
   1695            {
   1696              char *s=strrchr(fn,'.');
   \   00000024   2E10A0E3           MOV      R1,#+46
   \   00000028   0400A0E1           MOV      R0,R4
   \   0000002C   170100EF           SWI      +279
   \   00000030   0060A0E1           MOV      R6,R0
   1697              FreeViewUrl();
   \   00000034   ........           BL       FreeViewUrl
   1698              if (s)
   \   00000038   000056E3           CMP      R6,#+0
   \   0000003C   1500000A           BEQ      ??ParseInputFilename_2
   1699              {
   1700                s++;
   1701                if (!strcmp_nocase(s,"oms"))
   \   00000040   161F8FE2           ADR      R1,??ParseInputFilename_0  ;; "oms"
   \   00000044   016086E2           ADD      R6,R6,#+1
   \   00000048   0600A0E1           MOV      R0,R6
   \   0000004C   ........           _BLF     strcmp_nocase,??strcmp_nocase??rA
   \   00000050   000050E3           CMP      R0,#+0
   \   00000054   0600001A           BNE      ??ParseInputFilename_3
   1702                {
   1703                  view_url=globalstr(fn);
   \   00000058   0400A0E1           MOV      R0,R4
   \   0000005C   ........           _BLF     globalstr,??globalstr??rA
   \   00000060   240085E5           STR      R0,[R5, #+36]
   1704                  view_url_mode=MODE_FILE;
   \   00000064   0000A0E3           MOV      R0,#+0
   \   00000068   200085E5           STR      R0,[R5, #+32]
   1705                }
   1706                else if (!strcmp_nocase(s,"url"))
   1707                {
   1708                  if (!ReadUrlFile((char *)fn)) return (0);
   1709                }
   1710                else return 0;
   1711                return 1;
   \                     ??ParseInputFilename_1:
   \   0000006C   0100A0E3           MOV      R0,#+1
   \   00000070   7080BDE8           POP      {R4-R6,PC}       ;; return
   \                     ??ParseInputFilename_3:
   \   00000074   0A1F8FE2           ADR      R1,??ParseInputFilename_0+0x4  ;; "url"
   \   00000078   0600A0E1           MOV      R0,R6
   \   0000007C   ........           _BLF     strcmp_nocase,??strcmp_nocase??rA
   \   00000080   000050E3           CMP      R0,#+0
   \   00000084   0300001A           BNE      ??ParseInputFilename_2
   \   00000088   0400A0E1           MOV      R0,R4
   \   0000008C   ........           BL       ReadUrlFile
   \   00000090   000050E3           CMP      R0,#+0
   \   00000094   F4FFFF1A           BNE      ??ParseInputFilename_1
   \                     ??ParseInputFilename_2:
   \   00000098   0000A0E3           MOV      R0,#+0
   \   0000009C   7080BDE8           POP      {R4-R6,PC}
   \                     ??ParseInputFilename_0:
   \   000000A0   6F6D7300           DC8      "oms"
   \   000000A4   75726C00           DC8      "url"
   \   000000A8   ........           DC32     `?<Constant "bookmarks">`
   1712              }
   1713            }
   1714            return 0;
   1715          }
   1716          

   \                                 In segment DATA_Z, align 4, align-sorted
   1717          char AUTH_PREFIX[64];
   \                     AUTH_PREFIX:
   \   00000000                      DS8 64
   1718          char AUTH_CODE[128];
   \                     AUTH_CODE:
   \   00000040                      DS8 128
   1719          

   \                                 In segment CODE, align 4, keep-with-next
   1720          int LoadAuthCode(void)
   1721          {
   1722            int f;
   1723            unsigned int err;
   1724            int fsize;
   1725            char *buf;
   1726            char *s;
   1727            int c;
   1728            FSTATS stat;
   1729            char * authdata_file = getSymbolicPath("$ballet\\AuthCode");
   \                     LoadAuthCode:
   \   00000000   ........           LDR      R0,??DataTable27  ;; `?<Constant "$ballet\\\\AuthCode">`
   \   00000004   F0402DE9           PUSH     {R4-R7,LR}
   \   00000008   2CD04DE2           SUB      SP,SP,#+44
   1730            if (GetFileStats(authdata_file,&stat,&err)==-1) return 0;
   \   0000000C   0060E0E3           MVN      R6,#+0
   \   00000010   ........           _BLF     getSymbolicPath,??getSymbolicPath??rA
   \   00000014   0050A0E1           MOV      R5,R0
   \   00000018   0D20A0E1           MOV      R2,SP
   \   0000001C   04108DE2           ADD      R1,SP,#+4
   \   00000020   840000EF           SWI      +132
   \   00000024   060050E1           CMP      R0,R6
   \   00000028   0200001A           BNE      ??LoadAuthCode_0
   \                     ??LoadAuthCode_1:
   \   0000002C   0000A0E3           MOV      R0,#+0
   \   00000030   2CD08DE2           ADD      SP,SP,#+44
   \   00000034   F080BDE8           POP      {R4-R7,PC}
   1731            if ((fsize=stat.size)<=0) return 0;
   \                     ??LoadAuthCode_0:
   \   00000038   08709DE5           LDR      R7,[SP, #+8]
   \   0000003C   010057E3           CMP      R7,#+1
   \   00000040   F9FFFFBA           BLT      ??LoadAuthCode_1
   1732            if ((f=fopen(authdata_file,A_ReadOnly+A_BIN,P_READ,&err))==-1) return 0;
   \   00000044   0D30A0E1           MOV      R3,SP
   \   00000048   8020A0E3           MOV      R2,#+128
   \   0000004C   801CA0E3           MOV      R1,#+32768
   \   00000050   0500A0E1           MOV      R0,R5
   \   00000054   0A0000EF           SWI      +10
   \   00000058   0040A0E1           MOV      R4,R0
   \   0000005C   060054E1           CMP      R4,R6
   \   00000060   F1FFFF0A           BEQ      ??LoadAuthCode_1
   1733            mfree(authdata_file);
   \   00000064   0500A0E1           MOV      R0,R5
   \   00000068   150000EF           SWI      +21
   1734            buf=malloc(fsize+1);
   \   0000006C   010087E2           ADD      R0,R7,#+1
   \   00000070   140000EF           SWI      +20
   \   00000074   0050A0E1           MOV      R5,R0
   1735            buf[fread(f,buf,fsize,&err)]=0;
   \   00000078   0060A0E3           MOV      R6,#+0
   \   0000007C   0D30A0E1           MOV      R3,SP
   \   00000080   0720A0E1           MOV      R2,R7
   \   00000084   0510A0E1           MOV      R1,R5
   \   00000088   0400A0E1           MOV      R0,R4
   \   0000008C   0B0000EF           SWI      +11
   \   00000090   0560C0E7           STRB     R6,[R0, +R5]
   1736            fclose(f,&err);
   \   00000094   0D10A0E1           MOV      R1,SP
   \   00000098   0400A0E1           MOV      R0,R4
   \   0000009C   0D0000EF           SWI      +13
   1737            s=buf;
   1738            f=0;
   1739            err=0;
   \   000000A0   98209FE5           LDR      R2,??LoadAuthCode_2  ;; AUTH_PREFIX
   \   000000A4   0500A0E1           MOV      R0,R5
   \   000000A8   0040A0E3           MOV      R4,#+0
   \   000000AC   00608DE5           STR      R6,[SP, #+0]
   \   000000B0   040000EA           B        ??LoadAuthCode_3
   1740            while((c=*s++)>=32)
   1741            {
   1742              if (c=='.') break;
   \                     ??LoadAuthCode_4:
   \   000000B4   2E0051E3           CMP      R1,#+46
   \   000000B8   0B00000A           BEQ      ??LoadAuthCode_5
   1743              if (f<63) AUTH_PREFIX[f++]=c;
   \   000000BC   3F0054E3           CMP      R4,#+63
   \   000000C0   0210C4B7           STRBLT   R1,[R4, +R2]
   \   000000C4   014084B2           ADDLT    R4,R4,#+1
   1744            }
   \                     ??LoadAuthCode_3:
   \   000000C8   ........           LDRB     R1,[R0], #+1
   \   000000CC   200051E3           CMP      R1,#+32
   \   000000D0   F7FFFFAA           BGE      ??LoadAuthCode_4
   1745            if (c)
   \   000000D4   000051E3           CMP      R1,#+0
   \   000000D8   0300001A           BNE      ??LoadAuthCode_5
   \   000000DC   120000EA           B        ??LoadAuthCode_6
   1746            {
   1747              while((c=*s)<32)
   1748              {
   1749                if (!c) goto LEND;
   \                     ??LoadAuthCode_7:
   \   000000E0   000051E3           CMP      R1,#+0
   \   000000E4   1000000A           BEQ      ??LoadAuthCode_6
   1750                s++;
   \   000000E8   010080E2           ADD      R0,R0,#+1
   1751              }
   \                     ??LoadAuthCode_5:
   \   000000EC   0010D0E5           LDRB     R1,[R0, #+0]
   \   000000F0   200051E3           CMP      R1,#+32
   \   000000F4   F9FFFFBA           BLT      ??LoadAuthCode_7
   1752              f=0;
   \   000000F8   0040A0E3           MOV      R4,#+0
   \   000000FC   030000EA           B        ??LoadAuthCode_8
   1753              while((c=*s++)>32)
   1754              {
   1755                if (c=='.') break;
   1756                if (f<127) AUTH_CODE[f++]=c;
   \                     ??LoadAuthCode_9:
   \   00000100   7F0054E3           CMP      R4,#+127
   \   00000104   023084B0           ADDLT    R3,R4,R2
   \   00000108   4010C3B5           STRBLT   R1,[R3, #+64]
   \   0000010C   014084B2           ADDLT    R4,R4,#+1
   \                     ??LoadAuthCode_8:
   \   00000110   ........           LDRB     R1,[R0], #+1
   \   00000114   210051E3           CMP      R1,#+33
   \   00000118   010000BA           BLT      ??LoadAuthCode_10
   \   0000011C   2E0051E3           CMP      R1,#+46
   \   00000120   F6FFFF1A           BNE      ??LoadAuthCode_9
   1757              }
   1758              err=1;
   \                     ??LoadAuthCode_10:
   \   00000124   0110A0E3           MOV      R1,#+1
   \   00000128   00108DE5           STR      R1,[SP, #+0]
   1759            }
   1760          LEND:
   1761            mfree(buf);
   \                     ??LoadAuthCode_6:
   \   0000012C   0500A0E1           MOV      R0,R5
   \   00000130   150000EF           SWI      +21
   1762            return err;
   \   00000134   00009DE5           LDR      R0,[SP, #+0]
   \   00000138   2CD08DE2           ADD      SP,SP,#+44
   \   0000013C   F080BDE8           POP      {R4-R7,PC}       ;; return
   \                     ??LoadAuthCode_2:
   \   00000140   ........           DC32     AUTH_PREFIX
   1763          }
   1764          

   \                                 In segment CODE, align 4, keep-with-next
   1765          int SaveAuthCode(char *prefix, char *code)
   1766          {
   \                     SaveAuthCode:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   1767            int f;
   1768            unsigned int err;
   1769            char * authdata_file = getSymbolicPath("$ballet\\AuthCode");
   \   00000008   ........           LDR      R0,??DataTable27  ;; `?<Constant "$ballet\\\\AuthCode">`
   \   0000000C   04D04DE2           SUB      SP,SP,#+4
   \   00000010   0150A0E1           MOV      R5,R1
   \   00000014   ........           _BLF     getSymbolicPath,??getSymbolicPath??rA
   \   00000018   0060A0E1           MOV      R6,R0
   1770            f=fopen(authdata_file,A_ReadWrite+A_BIN+A_Create+A_Truncate,P_READ+P_WRITE,&err); // 
   \   0000001C   0D30A0E1           MOV      R3,SP
   \   00000020   602FA0E3           MOV      R2,#+384
   \   00000024   0210A0E3           MOV      R1,#+2
   \   00000028   831C81E3           ORR      R1,R1,#0x8300
   \   0000002C   0A0000EF           SWI      +10
   \   00000030   0070A0E1           MOV      R7,R0
   1771            mfree(authdata_file);
   \   00000034   0600A0E1           MOV      R0,R6
   \   00000038   150000EF           SWI      +21
   1772            if(f==-1) return 0;
   \   0000003C   010077E3           CMN      R7,#+1
   \   00000040   0000A003           MOVEQ    R0,#+0
   \   00000044   F280BD08           POPEQ    {R1,R4-R7,PC}
   1773            fwrite(f,prefix,6,&err);
   \   00000048   0D30A0E1           MOV      R3,SP
   \   0000004C   0620A0E3           MOV      R2,#+6
   \   00000050   0410A0E1           MOV      R1,R4
   \   00000054   0700A0E1           MOV      R0,R7
   \   00000058   0C0000EF           SWI      +12
   1774            fwrite(f,".",1,&err);
   \   0000005C   134F8FE2           ADR      R4,??SaveAuthCode_0  ;; "."
   \   00000060   0D30A0E1           MOV      R3,SP
   \   00000064   0120A0E3           MOV      R2,#+1
   \   00000068   0410A0E1           MOV      R1,R4
   \   0000006C   0700A0E1           MOV      R0,R7
   \   00000070   0C0000EF           SWI      +12
   1775            fwrite(f,code,64,&err);
   \   00000074   0D30A0E1           MOV      R3,SP
   \   00000078   4020A0E3           MOV      R2,#+64
   \   0000007C   0510A0E1           MOV      R1,R5
   \   00000080   0700A0E1           MOV      R0,R7
   \   00000084   0C0000EF           SWI      +12
   1776            fwrite(f,".",1,&err);
   \   00000088   0D30A0E1           MOV      R3,SP
   \   0000008C   0120A0E3           MOV      R2,#+1
   \   00000090   0410A0E1           MOV      R1,R4
   \   00000094   0700A0E1           MOV      R0,R7
   \   00000098   0C0000EF           SWI      +12
   1777            fclose(f, &err);
   \   0000009C   0D10A0E1           MOV      R1,SP
   \   000000A0   0700A0E1           MOV      R0,R7
   \   000000A4   0D0000EF           SWI      +13
   1778            return 1;
   \   000000A8   0100A0E3           MOV      R0,#+1
   \   000000AC   F280BDE8           POP      {R1,R4-R7,PC}    ;; return
   \                     ??SaveAuthCode_0:
   \   000000B0   2E000000           DC8      ".",+0,+0
   1779          }
   1780          

   \                                 In segment CODE, align 4, keep-with-next
   1781          void GenerateFile(char *path, char *name, unsigned char *from, unsigned size)
   1782          {
   \                     GenerateFile:
   \   00000000   F0412DE9           PUSH     {R4-R8,LR}
   \   00000004   2CD04DE2           SUB      SP,SP,#+44
   \   00000008   0070A0E1           MOV      R7,R0
   \   0000000C   0180A0E1           MOV      R8,R1
   \   00000010   0240A0E1           MOV      R4,R2
   \   00000014   0350A0E1           MOV      R5,R3
   1783            unsigned ul;
   1784            int f;
   1785            FSTATS stat;
   1786            char *pathbuf;
   1787          
   1788            pathbuf = (char *)malloc(strlen(path) + strlen(name) + 1);
   \   00000018   1B0000EF           SWI      +27
   \   0000001C   0060A0E1           MOV      R6,R0
   \   00000020   0800A0E1           MOV      R0,R8
   \   00000024   1B0000EF           SWI      +27
   \   00000028   060080E0           ADD      R0,R0,R6
   \   0000002C   010080E2           ADD      R0,R0,#+1
   \   00000030   140000EF           SWI      +20
   \   00000034   0060A0E1           MOV      R6,R0
   1789            strcpy(pathbuf, path); strcat(pathbuf, name);
   \   00000038   0710A0E1           MOV      R1,R7
   \   0000003C   1A0000EF           SWI      +26
   \   00000040   0810A0E1           MOV      R1,R8
   \   00000044   0600A0E1           MOV      R0,R6
   \   00000048   170000EF           SWI      +23
   1790            
   1791            stat.size = 0;
   \   0000004C   0010A0E3           MOV      R1,#+0
   \   00000050   08108DE5           STR      R1,[SP, #+8]
   1792            GetFileStats(pathbuf,&stat,&ul);
   \   00000054   0D20A0E1           MOV      R2,SP
   \   00000058   04108DE2           ADD      R1,SP,#+4
   \   0000005C   0600A0E1           MOV      R0,R6
   \   00000060   840000EF           SWI      +132
   1793            //if (GetFileStats(pathbuf,&stat,&ul)!=-1) return;
   1794            if (stat.size==0)
   \   00000064   08009DE5           LDR      R0,[SP, #+8]
   \   00000068   000050E3           CMP      R0,#+0
   \   0000006C   1200001A           BNE      ??GenerateFile_0
   1795            {
   1796              unlink(pathbuf,&ul);
   \   00000070   0D10A0E1           MOV      R1,SP
   \   00000074   0600A0E1           MOV      R0,R6
   \   00000078   6B0100EF           SWI      +363
   1797              f = fopen(pathbuf,A_WriteOnly+A_Create+A_BIN,P_READ+P_WRITE,&ul);
   \   0000007C   0D30A0E1           MOV      R3,SP
   \   00000080   602FA0E3           MOV      R2,#+384
   \   00000084   0110A0E3           MOV      R1,#+1
   \   00000088   811C81E3           ORR      R1,R1,#0x8100
   \   0000008C   0600A0E1           MOV      R0,R6
   \   00000090   0A0000EF           SWI      +10
   \   00000094   0070A0E1           MOV      R7,R0
   1798              if (f!=-1)
   \   00000098   010077E3           CMN      R7,#+1
   \   0000009C   0600000A           BEQ      ??GenerateFile_0
   1799              {
   1800                fwrite(f,from,size,&ul);
   \   000000A0   0D30A0E1           MOV      R3,SP
   \   000000A4   0520A0E1           MOV      R2,R5
   \   000000A8   0410A0E1           MOV      R1,R4
   \   000000AC   0C0000EF           SWI      +12
   1801                fclose(f,&ul);
   \   000000B0   0D10A0E1           MOV      R1,SP
   \   000000B4   0700A0E1           MOV      R0,R7
   \   000000B8   0D0000EF           SWI      +13
   1802              }
   1803            }
   1804            mfree(pathbuf);
   \                     ??GenerateFile_0:
   \   000000BC   0600A0E1           MOV      R0,R6
   \   000000C0   150000EF           SWI      +21
   1805          
   1806          }
   \   000000C4   2CD08DE2           ADD      SP,SP,#+44
   \   000000C8   F081BDE8           POP      {R4-R8,PC}       ;; return
   1807          

   \                                 In segment CODE, align 4, keep-with-next
   1808          int ReadPatch(char *fname)
   1809             {
   \                     ReadPatch:
   \   00000000   F0412DE9           PUSH     {R4-R8,LR}
   \   00000004   4ADF4DE2           SUB      SP,SP,#+296
   \   00000008   0040A0E1           MOV      R4,R0
   1810              char *buf,*str;
   1811              FSTATS fstat;
   1812          	GetFileStats(fname, &fstat, 0);
   \   0000000C   0020A0E3           MOV      R2,#+0
   \   00000010   0D10A0E1           MOV      R1,SP
   \   00000014   840000EF           SWI      +132
   1813          	int f=fopen(fname,A_ReadOnly + A_BIN, P_READ, 0);
   \   00000018   0030A0E3           MOV      R3,#+0
   \   0000001C   8020A0E3           MOV      R2,#+128
   \   00000020   801CA0E3           MOV      R1,#+32768
   \   00000024   0400A0E1           MOV      R0,R4
   \   00000028   0A0000EF           SWI      +10
   \   0000002C   0060A0E1           MOV      R6,R0
   1814          
   1815          	if(f==-1)return -1;
   \   00000030   010076E3           CMN      R6,#+1
   \   00000034   0000E003           MVNEQ    R0,#+0
   \   00000038   2E00000A           BEQ      ??ReadPatch_0
   1816          	buf =(char*)malloc(fstat.size);
   \   0000003C   04009DE5           LDR      R0,[SP, #+4]
   1817              buf[fread(f,buf,fstat.size,0)]=0;
   \   00000040   0050A0E3           MOV      R5,#+0
   \   00000044   140000EF           SWI      +20
   \   00000048   04209DE5           LDR      R2,[SP, #+4]
   \   0000004C   0040A0E1           MOV      R4,R0
   \   00000050   0030A0E3           MOV      R3,#+0
   \   00000054   0410A0E1           MOV      R1,R4
   \   00000058   0600A0E1           MOV      R0,R6
   \   0000005C   0B0000EF           SWI      +11
   \   00000060   0450C0E7           STRB     R5,[R0, +R4]
   1818          	fclose(f,0);
   \   00000064   0510A0E1           MOV      R1,R5
   \   00000068   0600A0E1           MOV      R0,R6
   \   0000006C   0D0000EF           SWI      +13
   1819          
   1820              char line[256];
   1821              int lineSize = NULL;
   \   00000070   0560A0E1           MOV      R6,R5
   1822              int buf_pos = NULL;
   \   00000074   0570A0E1           MOV      R7,R5
   \   00000078   040000EA           B        ??ReadPatch_1
   1823          	
   1824              while(buf[buf_pos] && buf_pos <fstat.size)
   1825                  {
   1826                    if (buf[buf_pos]=='\n' || buf[buf_pos]=='\r')
   1827                    {
   1828                      if (lineSize > 0)
   1829                      {
   1830                        str = (char*)malloc(lineSize);
   1831                        memcpy(str, line, lineSize);
   1832                        str[lineSize] = NULL;
   1833                        lineSize = NULL;
   1834          			  if(str[0]==';'||(str[0]=='/'&&str[1]=='/'));else;/*func(str);*/mfree(str);
   1835          			}
   1836                    }
   1837                    else
   1838                    line[lineSize ++] = buf[buf_pos];
   \                     ??ReadPatch_2:
   \   0000007C   0410D7E7           LDRB     R1,[R7, +R4]
   \   00000080   28008DE2           ADD      R0,SP,#+40
   \   00000084   0010C6E7           STRB     R1,[R6, +R0]
   \   00000088   016086E2           ADD      R6,R6,#+1
   1839                    buf_pos ++;
   \                     ??ReadPatch_3:
   \   0000008C   017087E2           ADD      R7,R7,#+1
   \                     ??ReadPatch_1:
   \   00000090   0400D7E7           LDRB     R0,[R7, +R4]
   \   00000094   000050E3           CMP      R0,#+0
   \   00000098   1300000A           BEQ      ??ReadPatch_4
   \   0000009C   04009DE5           LDR      R0,[SP, #+4]
   \   000000A0   000057E1           CMP      R7,R0
   \   000000A4   1000002A           BCS      ??ReadPatch_4
   \   000000A8   0400D7E7           LDRB     R0,[R7, +R4]
   \   000000AC   0A0050E3           CMP      R0,#+10
   \   000000B0   0D005013           CMPNE    R0,#+13
   \   000000B4   F0FFFF1A           BNE      ??ReadPatch_2
   \   000000B8   010056E3           CMP      R6,#+1
   \   000000BC   F2FFFFBA           BLT      ??ReadPatch_3
   \   000000C0   0600A0E1           MOV      R0,R6
   \   000000C4   140000EF           SWI      +20
   \   000000C8   0080A0E1           MOV      R8,R0
   \   000000CC   0620A0E1           MOV      R2,R6
   \   000000D0   28108DE2           ADD      R1,SP,#+40
   \   000000D4   1E0100EF           SWI      +286
   \   000000D8   0850C6E7           STRB     R5,[R6, +R8]
   \   000000DC   0800A0E1           MOV      R0,R8
   \   000000E0   150000EF           SWI      +21
   \   000000E4   0060A0E3           MOV      R6,#+0
   \   000000E8   E7FFFFEA           B        ??ReadPatch_3
   1840                  }
   1841              mfree(buf);
   \                     ??ReadPatch_4:
   \   000000EC   0400A0E1           MOV      R0,R4
   \   000000F0   150000EF           SWI      +21
   1842          	return 1;
   \   000000F4   0100A0E3           MOV      R0,#+1
   \                     ??ReadPatch_0:
   \   000000F8   4ADF8DE2           ADD      SP,SP,#+296      ;; stack cleaning
   \   000000FC   F081BDE8           POP      {R4-R8,PC}       ;; return
   1843             }
   1844          

   \                                 In segment CODE, align 4, keep-with-next
   1845          int main(const char *exename, const char *filename)
   1846          {ReadPatch("sss");
   \                     main:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
   \   00000004   84D04DE2           SUB      SP,SP,#+132
   \   00000008   0060A0E1           MOV      R6,R0
   \   0000000C   0150A0E1           MOV      R5,R1
   \   00000010   650F8FE2           ADR      R0,??main_0      ;; "sss"
   \   00000014   ........           BL       ReadPatch
   1847            char dummy[sizeof(MAIN_CSM)];
   1848            char *path=strrchr(exename,'\\');
   \   00000018   5C10A0E3           MOV      R1,#+92
   \   0000001C   0600A0E1           MOV      R0,R6
   \   00000020   170100EF           SWI      +279
   \   00000024   0070B0E1           MOVS     R7,R0
   1849            int l;
   1850            if (!path) return 0; // -
   \   00000028   0000A003           MOVEQ    R0,#+0
   \   0000002C   84D08D02           ADDEQ    SP,SP,#+132
   \   00000030   F080BD08           POPEQ    {R4-R7,PC}
   1851            path++;
   1852            l=path-exename;
   1853            InitConfig();
   1854            
   1855            memcpy(BALLET_PATH,exename,l);
   \   00000034   ........           LDR      R4,??DataTable28  ;; Xipc
   \   00000038   ........           _BLF     InitConfig,??InitConfig??rA
   \   0000003C   010087E2           ADD      R0,R7,#+1
   \   00000040   062040E0           SUB      R2,R0,R6
   \   00000044   0610A0E1           MOV      R1,R6
   \   00000048   540084E2           ADD      R0,R4,#+84
   \   0000004C   1E0100EF           SWI      +286
   1856            strcpy(BALLET_EXE, exename);
   \   00000050   0610A0E1           MOV      R1,R6
   1857           
   1858            
   1859            //CheckHistory("http://perk11.info/elf");
   1860          
   1861          //  GenerateFile(IMG_PATH, RADIO_BTTN_CLKD, radio_bttn_clkd_png, radio_bttn_clkd_png_size);
   1862          //  GenerateFile(IMG_PATH, RADIO_BTTN,      radio_bttn_png,      radio_bttn_png_size);
   1863          //  GenerateFile(IMG_PATH, BUTTON_CLKD,     button_clkd_png,     button_clkd_png_size);
   1864          //  GenerateFile(IMG_PATH, BUTTON,          button_png,          button_png_size);
   1865          //  GenerateFile(IMG_PATH, TEXT_FORM,       text_form_png,       text_form_png_size);
   1866          //  GenerateFile(IMG_PATH, LIST,            list_png,            list_png_size);
   1867            
   1868            lgpInitLangPack();
   1869          
   1870            if (!LoadAuthCode())
   \   00000054   ........           LDR      R6,??DataTable29  ;; `?<Constant "%02x">`
   \   00000058   550F84E2           ADD      R0,R4,#+340
   \   0000005C   1A0000EF           SWI      +26
   \   00000060   ........           _BLF     lgpInitLangPack,??lgpInitLangPack??rA
   \   00000064   ........           BL       LoadAuthCode
   \   00000068   000050E3           CMP      R0,#+0
   \   0000006C   2E00001A           BNE      ??main_1
   1871            {
   1872              if (authcode_create_new)
   \   00000070   38019FE5           LDR      R0,??main_0+0x4  ;; authcode_create_new
   \   00000074   000090E5           LDR      R0,[R0, #+0]
   \   00000078   000050E3           CMP      R0,#+0
   \   0000007C   2A00000A           BEQ      ??main_1
   1873              {
   1874                msrand(GetSessionAge());
   \   00000080   F30100EF           SWI      +499
   \   00000084   ........           _BLF     msrand,??msrand??rA
   1875                char prefix[7];
   1876                int p1 = mrandom(15), p2 = mrandom(15);
   \   00000088   0F00A0E3           MOV      R0,#+15
   \   0000008C   ........           _BLF     mrandom,??mrandom??rA
   \   00000090   0070A0E1           MOV      R7,R0
   \   00000094   0F00A0E3           MOV      R0,#+15
   \   00000098   ........           _BLF     mrandom,??mrandom??rA
   1877                snprintf(prefix, 7, "p%02d-%02d", p1, p2);
   \   0000009C   01002DE9           PUSH     {R0}
   \   000000A0   0730A0E1           MOV      R3,R7
   \   000000A4   082086E2           ADD      R2,R6,#+8
   \   000000A8   0710A0E3           MOV      R1,#+7
   \   000000AC   04008DE2           ADD      R0,SP,#+4
   \   000000B0   1B0100EF           SWI      +283
   1878                char code[65];
   1879                for(int i = 0; i < 32; i++)
   \   000000B4   0070A0E3           MOV      R7,#+0
   \   000000B8   04D08DE2           ADD      SP,SP,#+4
   1880                  snprintf(code+(i<<1), 3, "%02x", mrandom(255));    
   \                     ??main_2:
   \   000000BC   FF00A0E3           MOV      R0,#+255
   \   000000C0   ........           _BLF     mrandom,??mrandom??rA
   \   000000C4   0030A0E1           MOV      R3,R0
   \   000000C8   0620A0E1           MOV      R2,R6
   \   000000CC   0310A0E3           MOV      R1,#+3
   \   000000D0   08008DE2           ADD      R0,SP,#+8
   \   000000D4   870080E0           ADD      R0,R0,R7, LSL #+1
   \   000000D8   1B0100EF           SWI      +283
   \   000000DC   017087E2           ADD      R7,R7,#+1
   \   000000E0   200057E3           CMP      R7,#+32
   \   000000E4   F4FFFFBA           BLT      ??main_2
   1881                
   1882                if(!SaveAuthCode(prefix, code))
   \   000000E8   08108DE2           ADD      R1,SP,#+8
   \   000000EC   0D00A0E1           MOV      R0,SP
   \   000000F0   ........           BL       SaveAuthCode
   \   000000F4   000050E3           CMP      R0,#+0
   \   000000F8   0800001A           BNE      ??main_3
   1883                {
   1884                  LockSched();
   \                     ??main_4:
   \   000000FC   460100EF           SWI      +326
   1885                  ShowMSG(1,(int)lgpData[LGP_CantLoadAuthCode]);
   \   00000100   AC009FE5           LDR      R0,??main_0+0x8  ;; lgpData + 4
   \   00000104   001090E5           LDR      R1,[R0, #+0]
   \   00000108   0100A0E3           MOV      R0,#+1
   \   0000010C   480100EF           SWI      +328
   1886                  UnlockSched();
   \   00000110   470100EF           SWI      +327
   1887                  SUBPROC((void *)Killer);
   \   00000114   ........           LDR      R0,??DataTable30  ;; Killer
   \   00000118   710100EF           SWI      +369
   1888                  return 0;
   \   0000011C   1F0000EA           B        ??main_5
   1889                }
   1890                else
   1891                  if (!LoadAuthCode())
   \                     ??main_3:
   \   00000120   ........           BL       LoadAuthCode
   \   00000124   000050E3           CMP      R0,#+0
   \   00000128   F3FFFF0A           BEQ      ??main_4
   1892                  {
   1893                    LockSched();
   1894                    ShowMSG(1,(int)lgpData[LGP_CantLoadAuthCode]);
   1895                    UnlockSched();
   1896                    SUBPROC((void *)Killer);
   1897                    return 0;
   1898                  }
   1899              } 
   1900            }
   1901          
   1902            if (ParseInputFilename(filename)) // open oms or url
   \                     ??main_1:
   \   0000012C   0500A0E1           MOV      R0,R5
   \   00000130   ........           BL       ParseInputFilename
   \   00000134   000050E3           CMP      R0,#+0
   \   00000138   0500000A           BEQ      ??main_6
   1903            {
   1904              if (view_url_mode == MODE_URL)
   \   0000013C   240094E5           LDR      R0,[R4, #+36]
   \   00000140   201094E5           LDR      R1,[R4, #+32]
   \   00000144   010051E3           CMP      R1,#+1
   1905                UpdateCSMname(view_url+2, view_url_mode);
   \   00000148   02008002           ADDEQ    R0,R0,#+2
   1906              else
   1907                UpdateCSMname(view_url, view_url_mode);
   \                     ??main_7:
   \   0000014C   ........           BL       UpdateCSMname
   1908              LockSched();
   \   00000150   0B0000EA           B        ??main_8
   1909              maincsm_id=CreateCSM(&MAINCSM.maincsm,dummy,0);
   1910              UnlockSched();
   1911            }
   1912            else
   1913            {
   1914              if (ParseInputFilename(DEFAULT_PARAM))
   \                     ??main_6:
   \   00000154   5C009FE5           LDR      R0,??main_0+0xC  ;; DEFAULT_PARAM
   \   00000158   ........           BL       ParseInputFilename
   \   0000015C   000050E3           CMP      R0,#+0
   \   00000160   0200000A           BEQ      ??main_9
   1915              {
   1916                UpdateCSMname(view_url, view_url_mode);
   \   00000164   201094E5           LDR      R1,[R4, #+32]
   \   00000168   240094E5           LDR      R0,[R4, #+36]
   \   0000016C   F6FFFFEA           B        ??main_7
   1917                LockSched();
   1918                maincsm_id=CreateCSM(&MAINCSM.maincsm,dummy,0);
   1919                UnlockSched();
   1920              }
   1921              else
   1922              {
   1923                // create smiles view
   1924                view_url_mode=MODE_NONE;
   \                     ??main_9:
   \   00000170   0300A0E3           MOV      R0,#+3
   \   00000174   200084E5           STR      R0,[R4, #+32]
   1925                UpdateCSMname(view_url, view_url_mode);
   \   00000178   240094E5           LDR      R0,[R4, #+36]
   \   0000017C   0310A0E3           MOV      R1,#+3
   \   00000180   ........           BL       UpdateCSMname
   1926                LockSched();
   \                     ??main_8:
   \   00000184   460100EF           SWI      +326
   1927                maincsm_id=CreateCSM(&MAINCSM.maincsm,dummy,0);
   \   00000188   0020A0E3           MOV      R2,#+0
   \   0000018C   4C108DE2           ADD      R1,SP,#+76
   \   00000190   1C0086E2           ADD      R0,R6,#+28
   \   00000194   070100EF           SWI      +263
   \   00000198   440084E5           STR      R0,[R4, #+68]
   1928                UnlockSched();
   \   0000019C   470100EF           SWI      +327
   \                     ??main_5:
   \   000001A0   0000A0E3           MOV      R0,#+0
   \   000001A4   84D08DE2           ADD      SP,SP,#+132
   \   000001A8   F080BDE8           POP      {R4-R7,PC}
   \                     ??main_0:
   \   000001AC   73737300           DC8      "sss"
   \   000001B0   ........           DC32     authcode_create_new
   \   000001B4   ........           DC32     lgpData + 4
   \   000001B8   ........           DC32     DEFAULT_PARAM
   1929              }
   1930            }
   1931            return 0;
   1932          }

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable0:
   \   00000000   ........           DC32     Xipc

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable1:
   \   00000000   ........           DC32     `?<Constant "$urlcache\\\\$date$time.url">`

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable2:
   \   00000000   ........           DC32     lgpData

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable5:
   \   00000000   ........           DC32     Xipc + 28

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable8:
   \   00000000   ........           DC32     ENABLE_REDRAW

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable9:
   \   00000000   ........           DC32     Xipc

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable10:
   \   00000000   ........           DC32     `?<Constant "$urlcache\\\\$date$time.url">`

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable11:
   \   00000000   ........           DC32     lgpData

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable12:
   \   00000000   ........           DC32     StopINET

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable19:
   \   00000000   ........           DC32     Xipc + 24

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable22:
   \   00000000   ........           DC32     `?<Constant "$urlcache\\\\$date$time.url">`

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable27:
   \   00000000   ........           DC32     `?<Constant "$ballet\\\\AuthCode">`

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable28:
   \   00000000   ........           DC32     Xipc

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable29:
   \   00000000   ........           DC32     `?<Constant "%02x">`

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable30:
   \   00000000   ........           DC32     Killer

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for Xipc>`:
   \   00000000   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \                     `?<Initializer for sieget_ipc>`:
   \   0000000C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \                     `?<Initializer for TERMINATED>`:
   \   00000018   00000000           DC32 0
   \                     `?<Initializer for STOPPED>`:
   \   0000001C   00000000           DC32 0
   \                     `?<Initializer for view_url_mode>`:
   \   00000020   00000000           DC8 0, 0, 0, 0
   \                     `?<Initializer for view_url>`:
   \   00000024   00000000           DC8 0, 0, 0, 0
   \                     `?<Initializer for goto_url>`:
   \   00000028   00000000           DC8 0, 0, 0, 0
   \                     `?<Initializer for from_url>`:
   \   0000002C   00000000           DC8 0, 0, 0, 0
   \                     `?<Initializer for goto_params>`:
   \   00000030   00000000           DC8 0, 0, 0, 0
   \                     `?<Initializer for ws_console>`:
   \   00000034   00000000           DC8 0, 0, 0, 0
   \                     `?<Initializer for search_string>`:
   \   00000038   00000000           DC8 0, 0, 0, 0
   \                     `?<Initializer for search_isCaseSens>`:
   \   0000003C   00000000           DC8 0, 0, 0, 0
   \                     `?<Initializer for search_inet_string>`:
   \   00000040   00000000           DC8 0, 0, 0, 0
   \                     `?<Initializer for maincsm_id>`:
   \   00000044   00000000           DC8 0, 0, 0, 0
   \                     `?<Initializer for longpress>`:
   \   00000048   00000000           DC8 0, 0, 0, 0
   \                     `?<Initializer for xtask_ipc_name>`:
   \   0000004C   585461736B00       DC8 "XTask"
   \   00000052   0000               DC8 0, 0
   \                     `?<Initializer for BALLET_PATH>`:
   \   00000054   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000064   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000074   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000084   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000094   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000000A4   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000000B4   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000000C4   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000000D4   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000000E4   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000000F4   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000104   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000114   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000124   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000134   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000144   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \                     `?<Initializer for BALLET_EXE>`:
   \   00000154   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000164   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000174   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000184   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000194   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000001A4   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000001B4   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000001C4   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000001D4   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000001E4   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000001F4   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000204   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000214   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000224   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000234   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000244   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "%uB/%uB">`:
   \   00000000   2575422F2575       DC8 "%uB/%uB"
   \              4200        

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   73737300           DC8 "sss"

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   2E00               DC8 "."

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "$ballet\\\\AuthCode">`:
   \   00000000   2462616C6C65       DC8 "$ballet\\AuthCode"
   \              745C41757468
   \              436F646500  
   \   00000011   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   6F6D7300           DC8 "oms"

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   75726C00           DC8 "url"

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   00                 DC8 ""

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "bookmarks">`:
   \   00000000   626F6F6B6D61       DC8 "bookmarks"
   \              726B7300    
   \   0000000A   0000               DC8 0, 0

   Maximum stack usage in bytes:

     Function           CSTACK
     --------           ------
     CreateViewGUI         28
     FreeViewUrl            4
     GenerateFile          68
     GoToLocalLinkPos      24
     GotoFile               8
     GotoLink               8
     KillAll                8
     Killer                 4
     LoadAuthCode          64
     ParseInputFilename    16
     ReadPatch            320
     ReadUrlFile           64
     RunOtherByURL         28
     SaveAuthCode          24
     StartGetFile        1068
     UpdateCSMname         16
     collectItemsParams    44
     main                 156
     maincsm_onclose        8
     maincsm_oncreate      16
     maincsm_onmessage     48
     method0               76
     method1               16
     method2               12
     method3                8
     method4                8
     method5              180
     method8                0
     method9                0
     patch_rect             0


   Segment part sizes:

     Function/Label                 Bytes
     --------------                 -----
     patch_rect                       24
     ENABLE_REDRAW                     4
     scr_shift                         4
     minus11                           4
     ?<Constant "$urlcache\\$date$time.url">
                                     152
     StartGetFile                    532
     collectItemsParams             2164
     method0                         684
     method1                         164
     FreeViewUrl                      12
     method2                          88
     method3                          68
     method4                          64
     RunOtherByURL                   352
     GoToLocalLinkPos                304
     Xipc                            596
     method5                        2984
     method8                           8
     method9                           8
     CreateViewGUI                   180
     gui_methods                      52
     maincsm_oncreate                112
     KillAll                          44
     Killer                           32
     maincsm_onclose                  60
     GotoLink                         96
     GotoFile                         96
     maincsm_onmessage              1192
     maincsm_name_body               280
     ?<Constant "%02x">               88
     UpdateCSMname                   116
     ReadUrlFile                     236
     ParseInputFilename              172
     AUTH_PREFIX                     192
     LoadAuthCode                    324
     SaveAuthCode                    180
     GenerateFile                    204
     ReadPatch                       256
     main                            444
     ??DataTable0                      4
     ??DataTable1                      4
     ??DataTable2                      4
     ??DataTable5                      4
     ??DataTable8                      4
     ??DataTable9                      4
     ??DataTable10                     4
     ??DataTable11                     4
     ??DataTable12                     4
     ??DataTable19                     4
     ??DataTable22                     4
     ??DataTable27                     4
     ??DataTable28                     4
     ??DataTable29                     4
     ??DataTable30                     4
     ?<Initializer for Xipc>         596
     ?<Constant "%uB/%uB">             8
     ?<Constant "sss">                 4
     ?<Constant ".">                   2
     ?<Constant "$ballet\\AuthCode">
                                      20
     ?<Constant "oms">                 4
     ?<Constant "url">                 4
     ?<Constant "">                    1
     ?<Constant "bookmarks">          12
      Others                         764

 
 12 000 bytes in segment CODE
    355 bytes in segment DATA_C
    596 bytes in segment DATA_I
    596 bytes in segment DATA_ID
    476 bytes in segment DATA_Z
     24 bytes in segment INITTAB
 
 11 236 bytes of CODE  memory (+ 788 bytes shared)
    951 bytes of CONST memory
  1 072 bytes of DATA  memory

Errors: none
Warnings: none
