##############################################################################
#                                                                            #
# IAR ARM ANSI C/C++ Compiler V4.42A/W32 EVALUATION    27/Dec/2010  18:20:06 #
# Copyright 1999-2005 IAR Systems. All rights reserved.                      #
#                                                                            #
#    Cpu mode        =  interwork                                            #
#    Endian          =  little                                               #
#    Stack alignment =  4                                                    #
#    Source file     =  C:\arm\BalletMini\mainmenu.c                         #
#    Command line    =  C:\arm\BalletMini\mainmenu.c -D NEWSGOLD -D ELKA     #
#                       -lC C:\arm\BalletMini\Release_ELKA\List\ -o          #
#                       C:\arm\BalletMini\Release_ELKA\Obj\ -s9 --no_unroll  #
#                       --no_inline --cpu_mode arm --endian little --cpu     #
#                       ARM926EJ-S --stack_align 4 --interwork -e --fpu      #
#                       None --dlib_config "C:\arm2\Embedded Workbench 4.0   #
#                       Evaluation\ARM\LIB\dl5tpainl8n.h" -I                 #
#                       "C:\arm2\Embedded Workbench 4.0 Evaluation\ARM\INC\" #
#    List file       =  C:\arm\BalletMini\Release_ELKA\List\mainmenu.lst     #
#    Object file     =  C:\arm\BalletMini\Release_ELKA\Obj\mainmenu.r79      #
#                                                                            #
#                                                                            #
##############################################################################

C:\arm\BalletMini\mainmenu.c
      1          #include "..\inc\swilib.h"
      2          #include "rect_patcher.h"

   \                                 In segment CODE, align 4, keep-with-next
   \   __??Code32?? __code __interwork __atpcs void patch_header(HEADER_DESC const *)
   \                     patch_header:
   \   00000000   10402DE9           PUSH     {R4,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   \   00000008   0000A0E3           MOV      R0,#+0
   \   0000000C   B000C4E1           STRH     R0,[R4, #+0]
   \   00000010   1800A0E3           MOV      R0,#+24
   \   00000014   B200C4E1           STRH     R0,[R4, #+2]
   \   00000018   888100EF           SWI      +33160
   \   0000001C   010040E2           SUB      R0,R0,#+1
   \   00000020   B400C4E1           STRH     R0,[R4, #+4]
   \   00000024   8A8100EF           SWI      +33162
   \   00000028   170080E2           ADD      R0,R0,#+23
   \   0000002C   B600C4E1           STRH     R0,[R4, #+6]
   \   00000030   1080BDE8           POP      {R4,PC}          ;; return

   \                                 In segment CODE, align 4, keep-with-next
   \   __??Code32?? __code __interwork __atpcs void patch_input(INPUTDIA_DESC const *)
   \                     patch_input:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   \   00000008   0000A0E3           MOV      R0,#+0
   \   0000000C   B801C4E1           STRH     R0,[R4, #+24]
   \   00000010   8A8100EF           SWI      +33162
   \   00000014   190080E2           ADD      R0,R0,#+25
   \   00000018   BA01C4E1           STRH     R0,[R4, #+26]
   \   0000001C   888100EF           SWI      +33160
   \   00000020   010040E2           SUB      R0,R0,#+1
   \   00000024   BC01C4E1           STRH     R0,[R4, #+28]
   \   00000028   898100EF           SWI      +33161
   \   0000002C   0050A0E1           MOV      R5,R0
   \   00000030   8B8100EF           SWI      +33163
   \   00000034   000045E0           SUB      R0,R5,R0
   \   00000038   010040E2           SUB      R0,R0,#+1
   \   0000003C   BE01C4E1           STRH     R0,[R4, #+30]
   \   00000040   3080BDE8           POP      {R4,R5,PC}       ;; return

   \                                 In segment CODE, align 4, keep-with-next
   \   __??Code32?? __code __interwork __atpcs void patch_header_small(HEADER_DESC *)
   \                     patch_header_small:
   \   00000000   10402DE9           PUSH     {R4,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   \   00000008   0300A0E3           MOV      R0,#+3
   \   0000000C   B000C4E1           STRH     R0,[R4, #+0]
   \   00000010   888100EF           SWI      +33160
   \   00000014   060040E2           SUB      R0,R0,#+6
   \   00000018   B400C4E1           STRH     R0,[R4, #+4]
   \   0000001C   3B00A0E3           MOV      R0,#+59
   \   00000020   B200C4E1           STRH     R0,[R4, #+2]
   \   00000024   5D00A0E3           MOV      R0,#+93
   \   00000028   B600C4E1           STRH     R0,[R4, #+6]
   \   0000002C   1080BDE8           POP      {R4,PC}          ;; return
      3          #include "view.h"
      4          #include "main.h"
      5          #include "string_works.h"
      6          #include "mainmenu.h"
      7          #include "conf_loader.h"
      8          #include "urlstack.h"
      9          #include "history.h"
     10          #include "file_works.h"
     11          #include "lang.h"
     12          #include "url_utils.h"
     13          #include "display_utils.h"
     14          #include "revision.h"
     15          
     16          extern int view_url_mode;
     17          extern char *view_url;
     18          extern char *goto_url;
     19          extern int maincsm_id;
     20          
     21          extern WSHDR *search_string;
     22          extern int search_isCaseSens;
     23          
     24          extern WSHDR *search_inet_string;
     25          
     26          //----------------------------------- Add bookmark -----------------------------
     27          
     28          const char* sEmpty = "";
     29          
     30          const char* ext_url = "url";
     31          
     32          typedef enum
     33          {
     34            IS_BACK,
     35            IS_FOLDER,
     36            IS_FILE
     37          }BListType;
     38          
     39          char * bookmarks_current_folder;
     40          
     41          typedef struct
     42          {
     43            void * next;
     44            BListType type;
     45            char * fullname;  
     46            char * name;  
     47          }BList;
     48          
     49          typedef enum
     50          {
     51            EditBookmark,
     52            CreateBookmark,
     53            RenameFolder,
     54            CreateFolder
     55          }EditBookmarkMode;
     56          
     57          EditBookmarkMode edit_mode;
     58          
     59          SOFTKEY_DESC edit_bookmark_sk[]=
     60          {
     61            {0x0018,0x0000,(int)"Add"},
     62            {0x0001,0x0000,(int)"Cancel"},
     63            {0x003D,0x0000,(int)LGP_DOIT_PIC}
     64          };
     65          

   \                                 In segment DATA_C, align 4, align-sorted
     66          static const SOFTKEYSTAB edit_bookmark_skt=
   \                     edit_bookmark_skt:
   \   00000000   ........0000       DC32 edit_bookmark_sk, 0
   \              0000        
     67          {
     68            edit_bookmark_sk,0
     69          };
     70          
     71          HEADER_DESC edit_bookmark_hdr={0,0,0,0,NULL,(int)"Bookmark...",LGP_NULL};
     72          

   \                                 In segment CODE, align 4, keep-with-next
     73          static void edit_bookmark_ghook(GUI * gui, int cmd)
     74          {
   \                     edit_bookmark_ghook:
   \   00000000   D0402DE9           PUSH     {R4,R6,R7,LR}
   \   00000004   0040A0E1           MOV      R4,R0
     75            EDITCONTROL ec;
     76            SOFTKEY_DESC sk_ok={0x0FFF,0x0000,(int)lgpData[LGP_Ok]};
   \   00000008   B0009FE5           LDR      R0,??edit_bookmark_ghook_0  ;; `?<Constant {4080, 0, 0}>`
   \   0000000C   3CD04DE2           SUB      SP,SP,#+60
   \   00000010   086090E5           LDR      R6,[R0, #+8]
   \   00000014   0C7090E5           LDR      R7,[R0, #+12]
   \   00000018   0D20A0E1           MOV      R2,SP
   \   0000001C   C00082E8           STM      R2,{R6,R7}
   \   00000020   ........           LDR      R2,??DataTable8  ;; lgpData
     77            SOFTKEY_DESC sk_cancel={0x0FF0,0x0000,(int)lgpData[LGP_Cancel]};
   \   00000024   08308DE2           ADD      R3,SP,#+8
   \   00000028   6CC092E5           LDR      R12,[R2, #+108]
     78            if (cmd == TI_CMD_FOCUS)
   \   0000002C   0A0051E3           CMP      R1,#+10
   \   00000030   04C08DE5           STR      R12,[SP, #+4]
   \   00000034   C00090E8           LDM      R0,{R6,R7}
   \   00000038   C00083E8           STM      R3,{R6,R7}
   \   0000003C   702092E5           LDR      R2,[R2, #+112]
   \   00000040   0C208DE5           STR      R2,[SP, #+12]
   \   00000044   0200001A           BNE      ??edit_bookmark_ghook_1
     79            {
     80              DisableIDLETMR();
   \   00000048   7F0100EF           SWI      +383
   \   0000004C   3CD08DE2           ADD      SP,SP,#+60
   \   00000050   D080BDE8           POP      {R4,R6,R7,PC}
     81            }
     82            if (cmd == TI_CMD_REDRAW)
   \                     ??edit_bookmark_ghook_1:
   \   00000054   070051E3           CMP      R1,#+7
   \   00000058   1600001A           BNE      ??edit_bookmark_ghook_2
     83            {
     84              SetSoftKey(gui, &sk_ok, SET_SOFT_KEY_N); // Устанавливаем на правый софткей текст "OK"
   \   0000005C   0020A0E3           MOV      R2,#+0
   \   00000060   0D10A0E1           MOV      R1,SP
   \   00000064   0400A0E1           MOV      R0,R4
   \   00000068   680100EF           SWI      +360
     85              ExtractEditControl(gui, EDIT_GetFocus(gui), &ec); // Извлекаем выделенный EDITCONTROL
   \   0000006C   0400A0E1           MOV      R0,R4
   \   00000070   820100EF           SWI      +386
   \   00000074   10208DE2           ADD      R2,SP,#+16
   \   00000078   0010A0E1           MOV      R1,R0
   \   0000007C   0400A0E1           MOV      R0,R4
   \   00000080   690100EF           SWI      +361
     86              if (ec.pWS->wsbody[0] == 0 || EDIT_GetCursorPos(gui) == 1) // Если строка пуста или курсор в начале строки
   \   00000084   38009DE5           LDR      R0,[SP, #+56]
   \   00000088   000090E5           LDR      R0,[R0, #+0]
   \   0000008C   B000D0E1           LDRH     R0,[R0, #+0]
   \   00000090   000050E3           CMP      R0,#+0
   \   00000094   0300000A           BEQ      ??edit_bookmark_ghook_3
   \   00000098   0400A0E1           MOV      R0,R4
   \   0000009C   D30100EF           SWI      +467
   \   000000A0   010050E3           CMP      R0,#+1
   \   000000A4   0300001A           BNE      ??edit_bookmark_ghook_2
     87                SetSoftKey(gui, &sk_cancel, SET_SOFT_KEY_N==0?1:0); // Ставим на левй софткей текст "Cancel"
   \                     ??edit_bookmark_ghook_3:
   \   000000A8   0120A0E3           MOV      R2,#+1
   \   000000AC   08108DE2           ADD      R1,SP,#+8
   \   000000B0   0400A0E1           MOV      R0,R4
   \   000000B4   680100EF           SWI      +360
     88            }
     89          }
   \                     ??edit_bookmark_ghook_2:
   \   000000B8   3CD08DE2           ADD      SP,SP,#+60       ;; stack cleaning
   \   000000BC   D080BDE8           POP      {R4,R6,R7,PC}    ;; return
   \                     ??edit_bookmark_ghook_0:
   \   000000C0   ........           DC32     `?<Constant {4080, 0, 0}>`
     90          

   \                                 In segment CODE, align 4, keep-with-next
     91          static void edit_bookmark_locret(void){}
   \                     edit_bookmark_locret:
   \   00000000   1EFF2FE1           BX       LR               ;; return
     92          

   \                                 In segment CODE, align 4, keep-with-next
     93          char * edit_bookmark_extract_name(GUI * gui)
     94          {
   \                     edit_bookmark_extract_name:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
   \   00000004   2CD04DE2           SUB      SP,SP,#+44
     95            EDITCONTROL ec;
     96            char * tmp_name;
     97            char * full_name;
     98            
     99            ExtractEditControl(gui, 2, &ec);
   \   00000008   0D20A0E1           MOV      R2,SP
   \   0000000C   0210A0E3           MOV      R1,#+2
   \   00000010   690100EF           SWI      +361
    100            if(!ec.pWS->wsbody[0]) return NULL;
   \   00000014   28009DE5           LDR      R0,[SP, #+40]
   \   00000018   000090E5           LDR      R0,[R0, #+0]
   \   0000001C   B000D0E1           LDRH     R0,[R0, #+0]
   \   00000020   000050E3           CMP      R0,#+0
   \   00000024   2100000A           BEQ      ??edit_bookmark_extract_name_0
    101            
    102            tmp_name = (char *)malloc(ec.maxlen);
   \   00000028   F801DDE1           LDRSH    R0,[SP, #+24]
    103            ws_2str(ec.pWS, tmp_name, ec.maxlen);
    104            full_name = (char *)malloc(strlen(bookmarks_current_folder) + strlen(tmp_name) + 13);
   \   0000002C   ........           LDR      R5,??DataTable16  ;; bookmarks_menu_sk
   \   00000030   140000EF           SWI      +20
   \   00000034   F821DDE1           LDRSH    R2,[SP, #+24]
   \   00000038   0040A0E1           MOV      R4,R0
   \   0000003C   28009DE5           LDR      R0,[SP, #+40]
   \   00000040   0410A0E1           MOV      R1,R4
   \   00000044   A30000EF           SWI      +163
   \   00000048   340095E5           LDR      R0,[R5, #+52]
   \   0000004C   1B0000EF           SWI      +27
   \   00000050   0060A0E1           MOV      R6,R0
   \   00000054   0400A0E1           MOV      R0,R4
   \   00000058   1B0000EF           SWI      +27
   \   0000005C   060080E0           ADD      R0,R0,R6
   \   00000060   0D0080E2           ADD      R0,R0,#+13
   \   00000064   140000EF           SWI      +20
    105            strcpy(full_name, bookmarks_current_folder);
   \   00000068   341095E5           LDR      R1,[R5, #+52]
   \   0000006C   0060A0E1           MOV      R6,R0
   \   00000070   1A0000EF           SWI      +26
    106            if(full_name[strlen(bookmarks_current_folder)-1] != '\\')
   \   00000074   340095E5           LDR      R0,[R5, #+52]
   \   00000078   1B0000EF           SWI      +27
   \   0000007C   060080E0           ADD      R0,R0,R6
   \   00000080   010050E5           LDRB     R0,[R0, #-1]
   \   00000084   5C0050E3           CMP      R0,#+92
   \   00000088   0200000A           BEQ      ??edit_bookmark_extract_name_1
    107              strcat(full_name, "\\");
   \   0000008C   091F8FE2           ADR      R1,??edit_bookmark_extract_name_2  ;; "\\"
   \   00000090   0600A0E1           MOV      R0,R6
   \   00000094   170000EF           SWI      +23
    108            strcat(full_name, tmp_name);
   \                     ??edit_bookmark_extract_name_1:
   \   00000098   0410A0E1           MOV      R1,R4
   \   0000009C   0600A0E1           MOV      R0,R6
   \   000000A0   170000EF           SWI      +23
    109            mfree(tmp_name);
   \   000000A4   0400A0E1           MOV      R0,R4
   \   000000A8   150000EF           SWI      +21
    110            return full_name;
   \   000000AC   0600A0E1           MOV      R0,R6
   \                     ??edit_bookmark_extract_name_0:
   \   000000B0   2CD08DE2           ADD      SP,SP,#+44       ;; stack cleaning
   \   000000B4   7080BDE8           POP      {R4-R6,PC}       ;; return
   \                     ??edit_bookmark_extract_name_2:
   \   000000B8   5C000000           DC8      "\\",+0,+0
    111          }
    112          

   \                                 In segment CODE, align 4, keep-with-next
    113          char * edit_bookmark_extract_link(GUI * gui)
    114          {
   \                     edit_bookmark_extract_link:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   \   00000004   30D04DE2           SUB      SP,SP,#+48
    115            EDITCONTROL ec;
    116            char * tmp_link;
    117            char * link;
    118            int link_len;
    119            
    120            ExtractEditControl(gui, 4, &ec);
   \   00000008   04208DE2           ADD      R2,SP,#+4
   \   0000000C   0410A0E3           MOV      R1,#+4
   \   00000010   690100EF           SWI      +361
    121            if(!ec.pWS->wsbody[0]) return NULL;
   \   00000014   2C009DE5           LDR      R0,[SP, #+44]
   \   00000018   000090E5           LDR      R0,[R0, #+0]
   \   0000001C   B000D0E1           LDRH     R0,[R0, #+0]
   \   00000020   000050E3           CMP      R0,#+0
   \   00000024   1100000A           BEQ      ??edit_bookmark_extract_link_0
    122          
    123            tmp_link = (char *)malloc(ec.maxlen);
   \   00000028   FC01DDE1           LDRSH    R0,[SP, #+28]
   \   0000002C   140000EF           SWI      +20
   \   00000030   0040A0E1           MOV      R4,R0
    124            ws_2utf8(ec.pWS, tmp_link, &link_len, 511);
   \   00000034   2C009DE5           LDR      R0,[SP, #+44]
   \   00000038   FF30A0E3           MOV      R3,#+255
   \   0000003C   403F83E3           ORR      R3,R3,#0x100
   \   00000040   0D20A0E1           MOV      R2,SP
   \   00000044   0410A0E1           MOV      R1,R4
   \   00000048   E20100EF           SWI      +482
    125            link = (char *)malloc(link_len + 1);
   \   0000004C   00009DE5           LDR      R0,[SP, #+0]
   \   00000050   010080E2           ADD      R0,R0,#+1
   \   00000054   140000EF           SWI      +20
   \   00000058   0050A0E1           MOV      R5,R0
    126            strcpy(link, tmp_link);
   \   0000005C   0410A0E1           MOV      R1,R4
   \   00000060   1A0000EF           SWI      +26
    127            mfree(tmp_link);
   \   00000064   0400A0E1           MOV      R0,R4
   \   00000068   150000EF           SWI      +21
    128            return link;
   \   0000006C   0500A0E1           MOV      R0,R5
   \                     ??edit_bookmark_extract_link_0:
   \   00000070   30D08DE2           ADD      SP,SP,#+48       ;; stack cleaning
   \   00000074   3080BDE8           POP      {R4,R5,PC}       ;; return
    129          }
    130          

   \                                 In segment CODE, align 4, keep-with-next
    131          static int edit_bookmark_onkey(GUI * gui, GUI_MSG * msg)
    132          {
   \                     edit_bookmark_onkey:
   \   00000000   F0412DE9           PUSH     {R4-R8,LR}
   \   00000004   04D04DE2           SUB      SP,SP,#+4
   \   00000008   0040A0E1           MOV      R4,R0
    133            unsigned int io_error;
    134            if (msg->keys==0xFF0)
   \   0000000C   F200D1E1           LDRSH    R0,[R1, #+2]
   \   00000010   FF0E50E3           CMP      R0,#+4080
   \   00000014   0100001A           BNE      ??edit_bookmark_onkey_0
    135            {
    136              return 1;
   \                     ??edit_bookmark_onkey_1:
   \   00000018   0100A0E3           MOV      R0,#+1
   \   0000001C   F281BDE8           POP      {R1,R4-R8,PC}
    137            }
    138            if(msg->keys==0xFFF)
   \                     ??edit_bookmark_onkey_0:
   \   00000020   FF10A0E3           MOV      R1,#+255
   \   00000024   F01E81E3           ORR      R1,R1,#0xF00
   \   00000028   010050E1           CMP      R0,R1
   \   0000002C   3400001A           BNE      ??edit_bookmark_onkey_2
    139            {
    140              BList * bl = (BList *)EDIT_GetUserPointer(gui);
    141              if(edit_mode == CreateFolder || edit_mode == RenameFolder)
   \   00000030   B4619FE5           LDR      R6,??edit_bookmark_onkey_3  ;; edit_bookmark_hdr
   \   00000034   ........           LDR      R7,??DataTable8  ;; lgpData
   \   00000038   0400A0E1           MOV      R0,R4
   \   0000003C   DF0100EF           SWI      +479
   \   00000040   0050A0E1           MOV      R5,R0
   \   00000044   1400D6E5           LDRB     R0,[R6, #+20]
   \   00000048   030050E3           CMP      R0,#+3
   \   0000004C   02005013           CMPNE    R0,#+2
   \   00000050   1A00001A           BNE      ??edit_bookmark_onkey_4
    142              {
    143                char * name;
    144                if (!(name = edit_bookmark_extract_name(gui))) goto NO_NAME;
   \   00000054   0400A0E1           MOV      R0,R4
   \   00000058   ........           BL       edit_bookmark_extract_name
   \   0000005C   0080B0E1           MOVS     R8,R0
   \   00000060   5F00000A           BEQ      ??edit_bookmark_onkey_5
    145                if (isdir(name, &io_error))
   \   00000064   0D10A0E1           MOV      R1,SP
   \   00000068   910000EF           SWI      +145
   \   0000006C   000050E3           CMP      R0,#+0
   \   00000070   0300000A           BEQ      ??edit_bookmark_onkey_6
    146                {
    147                  mfree(name);
   \   00000074   0800A0E1           MOV      R0,R8
   \   00000078   150000EF           SWI      +21
    148                  goto SAME_FOLDER;
    149                }
    150                if(edit_mode == CreateFolder)
    151                  mkdir(name, &io_error);
    152                if(edit_mode == RenameFolder)
    153                  fmove(bl->fullname, name, &io_error);
    154                mfree(name);
    155              }
    156              if(edit_mode == CreateBookmark || edit_mode == EditBookmark)
    157              {
    158                char * name;
    159                char * url;
    160                if (!(name = edit_bookmark_extract_name(gui))) goto NO_NAME;
    161                if (!(url = edit_bookmark_extract_link(gui)))
    162                {
    163                  mfree(name);
    164                  goto NO_URL;
    165                }
    166                strcat(name, ".url");
    167                if (edit_mode == CreateBookmark || strcmp(bl->fullname, name) != 0)
    168                {
    169                  if (ballet_fexists(name))
    170                  {
    171                    mfree(name);
    172                    mfree(url);
    173                    goto SAME_FILE;
    174                  }
    175                }
    176                if(edit_mode == EditBookmark)
    177                  unlink(bl->fullname, &io_error);
    178                int hFile = fopen(name, A_WriteOnly + A_Create + A_BIN, P_WRITE, &io_error);
    179                //url = ToWeb(url, 0);
    180                char * tmp_url = URL_reencode_escapes(url);
    181                fwrite(hFile, tmp_url, strlen(tmp_url), &io_error);
    182                fclose(hFile,&io_error);
    183                mfree(name);
    184                mfree(url);
    185                mfree(tmp_url);
    186              }
    187              return 1;
    188            }
    189            return 0;
    190          NO_NAME:
    191            MsgBoxError(1, (int)lgpData[LGP_EnterName]);
    192            return 0;
    193          NO_URL:
    194            MsgBoxError(1, (int)lgpData[LGP_EnterURL]);
    195            return 0;
    196          SAME_FOLDER:
    197            MsgBoxError(1, (int)lgpData[LGP_FolderExists]);
   \   0000007C   101197E5           LDR      R1,[R7, #+272]
   \   00000080   1D0000EA           B        ??edit_bookmark_onkey_7
   \                     ??edit_bookmark_onkey_6:
   \   00000084   1400D6E5           LDRB     R0,[R6, #+20]
   \   00000088   030050E3           CMP      R0,#+3
   \   0000008C   0200001A           BNE      ??edit_bookmark_onkey_8
   \   00000090   0D10A0E1           MOV      R1,SP
   \   00000094   0800A0E1           MOV      R0,R8
   \   00000098   100000EF           SWI      +16
   \                     ??edit_bookmark_onkey_8:
   \   0000009C   1400D6E5           LDRB     R0,[R6, #+20]
   \   000000A0   020050E3           CMP      R0,#+2
   \   000000A4   0300001A           BNE      ??edit_bookmark_onkey_9
   \   000000A8   080095E5           LDR      R0,[R5, #+8]
   \   000000AC   0D20A0E1           MOV      R2,SP
   \   000000B0   0810A0E1           MOV      R1,R8
   \   000000B4   8E0000EF           SWI      +142
   \                     ??edit_bookmark_onkey_9:
   \   000000B8   0800A0E1           MOV      R0,R8
   \   000000BC   150000EF           SWI      +21
   \                     ??edit_bookmark_onkey_4:
   \   000000C0   1400D6E5           LDRB     R0,[R6, #+20]
   \   000000C4   010050E3           CMP      R0,#+1
   \   000000C8   00005013           CMPNE    R0,#+0
   \   000000CC   D1FFFF1A           BNE      ??edit_bookmark_onkey_1
   \   000000D0   0400A0E1           MOV      R0,R4
   \   000000D4   ........           BL       edit_bookmark_extract_name
   \   000000D8   0080B0E1           MOVS     R8,R0
   \   000000DC   4000000A           BEQ      ??edit_bookmark_onkey_5
   \   000000E0   0400A0E1           MOV      R0,R4
   \   000000E4   ........           BL       edit_bookmark_extract_link
   \   000000E8   0040B0E1           MOVS     R4,R0
   \   000000EC   0600001A           BNE      ??edit_bookmark_onkey_10
   \   000000F0   0800A0E1           MOV      R0,R8
   \   000000F4   150000EF           SWI      +21
   \   000000F8   0C1197E5           LDR      R1,[R7, #+268]
   \                     ??edit_bookmark_onkey_7:
   \   000000FC   0100A0E3           MOV      R0,#+1
   \   00000100   4E0000EF           SWI      +78
   \                     ??edit_bookmark_onkey_2:
   \   00000104   0000A0E3           MOV      R0,#+0
   \   00000108   F281BDE8           POP      {R1,R4-R8,PC}
   \                     ??edit_bookmark_onkey_10:
   \   0000010C   DC109FE5           LDR      R1,??edit_bookmark_onkey_3+0x4  ;; `?<Constant ".url">`
   \   00000110   0800A0E1           MOV      R0,R8
   \   00000114   170000EF           SWI      +23
   \   00000118   1400D6E5           LDRB     R0,[R6, #+20]
   \   0000011C   010050E3           CMP      R0,#+1
   \   00000120   0400000A           BEQ      ??edit_bookmark_onkey_11
   \   00000124   080095E5           LDR      R0,[R5, #+8]
   \   00000128   0810A0E1           MOV      R1,R8
   \   0000012C   190000EF           SWI      +25
   \   00000130   000050E3           CMP      R0,#+0
   \   00000134   0900000A           BEQ      ??edit_bookmark_onkey_12
   \                     ??edit_bookmark_onkey_11:
   \   00000138   0800A0E1           MOV      R0,R8
   \   0000013C   ........           _BLF     ballet_fexists,??ballet_fexists??rA
   \   00000140   000050E3           CMP      R0,#+0
   \   00000144   0500000A           BEQ      ??edit_bookmark_onkey_12
   \   00000148   0800A0E1           MOV      R0,R8
   \   0000014C   150000EF           SWI      +21
   \   00000150   0400A0E1           MOV      R0,R4
   \   00000154   150000EF           SWI      +21
    198            return 0;
    199          SAME_FILE:
    200            MsgBoxError(1, (int)lgpData[LGP_FileExists]);
   \   00000158   141197E5           LDR      R1,[R7, #+276]
   \   0000015C   E6FFFFEA           B        ??edit_bookmark_onkey_7
   \                     ??edit_bookmark_onkey_12:
   \   00000160   1400D6E5           LDRB     R0,[R6, #+20]
   \   00000164   000050E3           CMP      R0,#+0
   \   00000168   0200001A           BNE      ??edit_bookmark_onkey_13
   \   0000016C   080095E5           LDR      R0,[R5, #+8]
   \   00000170   0D10A0E1           MOV      R1,SP
   \   00000174   6B0100EF           SWI      +363
   \                     ??edit_bookmark_onkey_13:
   \   00000178   0D30A0E1           MOV      R3,SP
   \   0000017C   402FA0E3           MOV      R2,#+256
   \   00000180   0110A0E3           MOV      R1,#+1
   \   00000184   811C81E3           ORR      R1,R1,#0x8100
   \   00000188   0800A0E1           MOV      R0,R8
   \   0000018C   0A0000EF           SWI      +10
   \   00000190   0050A0E1           MOV      R5,R0
   \   00000194   0400A0E1           MOV      R0,R4
   \   00000198   ........           _BLF     URL_reencode_escapes,??URL_reencode_escapes??rA
   \   0000019C   0060A0E1           MOV      R6,R0
   \   000001A0   1B0000EF           SWI      +27
   \   000001A4   0D30A0E1           MOV      R3,SP
   \   000001A8   0020A0E1           MOV      R2,R0
   \   000001AC   0610A0E1           MOV      R1,R6
   \   000001B0   0500A0E1           MOV      R0,R5
   \   000001B4   0C0000EF           SWI      +12
   \   000001B8   0D10A0E1           MOV      R1,SP
   \   000001BC   0500A0E1           MOV      R0,R5
   \   000001C0   0D0000EF           SWI      +13
   \   000001C4   0800A0E1           MOV      R0,R8
   \   000001C8   150000EF           SWI      +21
   \   000001CC   0400A0E1           MOV      R0,R4
   \   000001D0   150000EF           SWI      +21
   \   000001D4   0600A0E1           MOV      R0,R6
   \   000001D8   150000EF           SWI      +21
   \   000001DC   0100A0E3           MOV      R0,#+1
   \   000001E0   F281BDE8           POP      {R1,R4-R8,PC}
   \                     ??edit_bookmark_onkey_5:
   \   000001E4   081197E5           LDR      R1,[R7, #+264]
   \   000001E8   C3FFFFEA           B        ??edit_bookmark_onkey_7
   \                     ??edit_bookmark_onkey_3:
   \   000001EC   ........           DC32     edit_bookmark_hdr
   \   000001F0   ........           DC32     `?<Constant ".url">`
    201            return 0;
    202          }
    203          

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "">_1`:
   \   00000000   00                 DC8 ""
   \   00000001   000000             DC8 0, 0, 0
   \   00000004   01000000....       DC32 1, edit_bookmark_onkey, edit_bookmark_ghook, edit_bookmark_locret
   \              ............
   \              ........    
   \   00000014   00000000....       DC32 0, edit_bookmark_skt
   \              ....        
   \   0000001C   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   00000024   080000006400       DC32 8, 100, 101, 0, 0, 1073741824
   \              000065000000
   \              000000000000
   \              000000000040
    204          static const INPUTDIA_DESC edit_bookmark_desc =
    205          {
    206            1,
    207            edit_bookmark_onkey,
    208            edit_bookmark_ghook,
    209            (void *)edit_bookmark_locret,
    210            0,
    211            &edit_bookmark_skt,
    212            {0,0,0,0},
    213            FONT_SMALL,
    214            100,
    215            101,
    216            0,
    217            0,
    218            0x40000000
    219          };
    220          
    221          

   \                                 In segment CODE, align 4, keep-with-next
    222          int show_edit_bookmark_menu(BList * bl, EditBookmarkMode mode)
    223          {
   \                     show_edit_bookmark_menu:
   \   00000000   F04F2DE9           PUSH     {R4-R11,LR}
    224            edit_mode = mode;
   \   00000004   F8539FE5           LDR      R5,??show_edit_bookmark_menu_0  ;; edit_bookmark_hdr
    225            void * ma = malloc_adr();
    226            void * eq = AllocEQueue(ma, mfree_adr());    // Extension
    227            MAIN_CSM * main_csm;
    228            VIEW_GUI * p;
    229            EDITCONTROL ec;
    230            const char empty_str[] = "";
   \   00000008   F8839FE5           LDR      R8,??show_edit_bookmark_menu_0+0x4  ;; `?<Constant "">_1`
   \   0000000C   60D04DE2           SUB      SP,SP,#+96
   \   00000010   0040A0E1           MOV      R4,R0
    231            WSHDR * ws = AllocWS(1024);
    232          
    233            ascii2ws(ws, lgpData[LGP_NameHeader]);
   \   00000014   ........           LDR      R10,??DataTable8  ;; lgpData
    234            PrepareEditControl(&ec);
    235            ConstructEditControl(&ec, ECT_HEADER, ECF_APPEND_EOL, ws, wstrlen(ws));
    236            AddEditControlToEditQend(eq,&ec,ma);
    237            
    238            switch(edit_mode)
   \   00000018   ........           LDR      R11,??DataTable4  ;; maincsm_id
   \   0000001C   1410C5E5           STRB     R1,[R5, #+20]
   \   00000020   148000EF           SWI      +32788
   \   00000024   0060A0E1           MOV      R6,R0
   \   00000028   158000EF           SWI      +32789
   \   0000002C   0010A0E1           MOV      R1,R0
   \   00000030   0600A0E1           MOV      R0,R6
   \   00000034   630100EF           SWI      +355
   \   00000038   0010D8E5           LDRB     R1,[R8, #0]
   \   0000003C   0070A0E1           MOV      R7,R0
   \   00000040   04008DE2           ADD      R0,SP,#+4
   \   00000044   0010C0E5           STRB     R1,[R0, #+0]
   \   00000048   400EA0E3           MOV      R0,#+1024
   \   0000004C   250100EF           SWI      +293
   \   00000050   78109AE5           LDR      R1,[R10, #+120]
   \   00000054   0090A0E1           MOV      R9,R0
   \   00000058   ........           _BLF     ascii2ws,??ascii2ws??rA
   \   0000005C   0C008DE2           ADD      R0,SP,#+12
   \   00000060   640100EF           SWI      +356
   \   00000064   0900A0E1           MOV      R0,R9
   \   00000068   230100EF           SWI      +291
   \   0000006C   01002DE9           PUSH     {R0}
   \   00000070   0930A0E1           MOV      R3,R9
   \   00000074   4020A0E3           MOV      R2,#+64
   \   00000078   0110A0E3           MOV      R1,#+1
   \   0000007C   10008DE2           ADD      R0,SP,#+16
   \   00000080   650100EF           SWI      +357
   \   00000084   0620A0E1           MOV      R2,R6
   \   00000088   10108DE2           ADD      R1,SP,#+16
   \   0000008C   0700A0E1           MOV      R0,R7
   \   00000090   660100EF           SWI      +358
   \   00000094   1400D5E5           LDRB     R0,[R5, #+20]
   \   00000098   04D08DE2           ADD      SP,SP,#+4
   \   0000009C   000050E3           CMP      R0,#+0
   \   000000A0   0300000A           BEQ      ??show_edit_bookmark_menu_1
   \   000000A4   010050E2           SUBS     R0,R0,#+1
   \   000000A8   0800000A           BEQ      ??show_edit_bookmark_menu_2
   \   000000AC   010050E2           SUBS     R0,R0,#+1
   \   000000B0   1600001A           BNE      ??show_edit_bookmark_menu_3
    239            {
    240            case EditBookmark:
    241            case RenameFolder:
    242              str_2ws(ws, bl->name, strlen(bl->name));
   \                     ??show_edit_bookmark_menu_1:
   \   000000B4   0C0094E5           LDR      R0,[R4, #+12]
   \   000000B8   1B0000EF           SWI      +27
   \   000000BC   0C1094E5           LDR      R1,[R4, #+12]
   \   000000C0   0020A0E1           MOV      R2,R0
   \   000000C4   0900A0E1           MOV      R0,R9
   \   000000C8   6C0100EF           SWI      +364
   \   000000CC   120000EA           B        ??show_edit_bookmark_menu_4
    243              break;
    244            case CreateBookmark:
    245              if ((main_csm=(MAIN_CSM *)FindCSMbyID(maincsm_id)))
   \                     ??show_edit_bookmark_menu_2:
   \   000000D0   00009BE5           LDR      R0,[R11, #+0]
   \   000000D4   080100EF           SWI      +264
   \   000000D8   000050E3           CMP      R0,#+0
   \   000000DC   0E00000A           BEQ      ??show_edit_bookmark_menu_4
    246              {
    247                p=FindGUIbyId(main_csm->view_id,NULL);
   \   000000E0   280090E5           LDR      R0,[R0, #+40]
   \   000000E4   0010A0E3           MOV      R1,#+0
   \   000000E8   090200EF           SWI      +521
    248                if (p->vd->title)
   \   000000EC   340090E5           LDR      R0,[R0, #+52]
   \   000000F0   E41090E5           LDR      R1,[R0, #+228]
   \   000000F4   000051E3           CMP      R1,#+0
   \   000000F8   0200000A           BEQ      ??show_edit_bookmark_menu_5
    249                  ascii2ws(ws, p->vd->title);
   \                     ??show_edit_bookmark_menu_6:
   \   000000FC   0900A0E1           MOV      R0,R9
   \   00000100   ........           _BLF     ascii2ws,??ascii2ws??rA
   \   00000104   040000EA           B        ??show_edit_bookmark_menu_4
    250                else
    251                  ascii2ws(ws, lgpData[LGP_NewBookmark]);
   \                     ??show_edit_bookmark_menu_5:
   \   00000108   A4109AE5           LDR      R1,[R10, #+164]
   \   0000010C   FAFFFFEA           B        ??show_edit_bookmark_menu_6
    252              }
    253              break;
    254            default: wsprintf(ws, empty_str);
   \                     ??show_edit_bookmark_menu_3:
   \   00000110   04108DE2           ADD      R1,SP,#+4
   \   00000114   0900A0E1           MOV      R0,R9
   \   00000118   240100EF           SWI      +292
    255            }
    256            PrepareEditControl(&ec);
   \                     ??show_edit_bookmark_menu_4:
   \   0000011C   0C008DE2           ADD      R0,SP,#+12
   \   00000120   640100EF           SWI      +356
    257            ConstructEditControl(&ec, ECT_NORMAL_TEXT, ECF_APPEND_EOL, ws, 64);
   \   00000124   4000A0E3           MOV      R0,#+64
   \   00000128   01002DE9           PUSH     {R0}
   \   0000012C   0930A0E1           MOV      R3,R9
   \   00000130   4020A0E3           MOV      R2,#+64
   \   00000134   0310A0E3           MOV      R1,#+3
   \   00000138   10008DE2           ADD      R0,SP,#+16
   \   0000013C   650100EF           SWI      +357
    258            AddEditControlToEditQend(eq,&ec,ma);
   \   00000140   0620A0E1           MOV      R2,R6
   \   00000144   10108DE2           ADD      R1,SP,#+16
   \   00000148   0700A0E1           MOV      R0,R7
   \   0000014C   660100EF           SWI      +358
    259            
    260            if(edit_mode == CreateBookmark || edit_mode == EditBookmark)
   \   00000150   1400D5E5           LDRB     R0,[R5, #+20]
   \   00000154   04D08DE2           ADD      SP,SP,#+4
   \   00000158   010050E3           CMP      R0,#+1
   \   0000015C   00005013           CMPNE    R0,#+0
   \   00000160   8900001A           BNE      ??show_edit_bookmark_menu_7
    261            {
    262              ascii2ws(ws, lgpData[LGP_LinkHeader]);
   \   00000164   7C109AE5           LDR      R1,[R10, #+124]
   \   00000168   0900A0E1           MOV      R0,R9
   \   0000016C   ........           _BLF     ascii2ws,??ascii2ws??rA
    263              PrepareEditControl(&ec);
   \   00000170   0C008DE2           ADD      R0,SP,#+12
   \   00000174   640100EF           SWI      +356
    264              ConstructEditControl(&ec, ECT_HEADER, ECF_APPEND_EOL, ws, wstrlen(ws));
   \   00000178   0900A0E1           MOV      R0,R9
   \   0000017C   230100EF           SWI      +291
   \   00000180   01002DE9           PUSH     {R0}
   \   00000184   0930A0E1           MOV      R3,R9
   \   00000188   4020A0E3           MOV      R2,#+64
   \   0000018C   0110A0E3           MOV      R1,#+1
   \   00000190   10008DE2           ADD      R0,SP,#+16
   \   00000194   650100EF           SWI      +357
    265              AddEditControlToEditQend(eq,&ec,ma);
   \   00000198   0620A0E1           MOV      R2,R6
   \   0000019C   10108DE2           ADD      R1,SP,#+16
   \   000001A0   0700A0E1           MOV      R0,R7
   \   000001A4   660100EF           SWI      +358
    266              
    267              if (edit_mode == CreateBookmark) // Add new bookmark
   \   000001A8   1400D5E5           LDRB     R0,[R5, #+20]
   \   000001AC   04D08DE2           ADD      SP,SP,#+4
   \   000001B0   010050E3           CMP      R0,#+1
   \   000001B4   3C00001A           BNE      ??show_edit_bookmark_menu_8
    268              {
    269                if ((main_csm=(MAIN_CSM *)FindCSMbyID(maincsm_id)))
   \   000001B8   00009BE5           LDR      R0,[R11, #+0]
   \   000001BC   080100EF           SWI      +264
   \   000001C0   000050E3           CMP      R0,#+0
   \   000001C4   6100000A           BEQ      ??show_edit_bookmark_menu_9
    270                {
    271                  p=FindGUIbyId(main_csm->view_id,NULL);
   \   000001C8   280090E5           LDR      R0,[R0, #+40]
   \   000001CC   0010A0E3           MOV      R1,#+0
   \   000001D0   090200EF           SWI      +521
    272                  if (p->vd->pageurl)
   \   000001D4   340090E5           LDR      R0,[R0, #+52]
   \   000001D8   E01090E5           LDR      R1,[R0, #+224]
   \   000001DC   000051E3           CMP      R1,#+0
   \   000001E0   1300000A           BEQ      ??show_edit_bookmark_menu_10
    273                  {
    274                    char * url_start;
    275                    for(url_start = p->vd->pageurl; *url_start && *url_start != '/'; url_start++);
   \   000001E4   01B0A0E1           MOV      R11,R1
   \   000001E8   000000EA           B        ??show_edit_bookmark_menu_11
   \                     ??show_edit_bookmark_menu_12:
   \   000001EC   01B08BE2           ADD      R11,R11,#+1
   \                     ??show_edit_bookmark_menu_11:
   \   000001F0   0000DBE5           LDRB     R0,[R11, #+0]
   \   000001F4   000050E3           CMP      R0,#+0
   \   000001F8   2F005013           CMPNE    R0,#+47
   \   000001FC   FAFFFF1A           BNE      ??show_edit_bookmark_menu_12
    276                    for(; *url_start && *url_start == '/'; url_start++);
   \                     ??show_edit_bookmark_menu_13:
   \   00000200   0000DBE5           LDRB     R0,[R11, #+0]
   \   00000204   000050E3           CMP      R0,#+0
   \   00000208   0200000A           BEQ      ??show_edit_bookmark_menu_14
   \   0000020C   2F0050E3           CMP      R0,#+47
   \   00000210   01B08B02           ADDEQ    R11,R11,#+1
   \   00000214   F9FFFF0A           BEQ      ??show_edit_bookmark_menu_13
    277                    utf8_2ws(ws, url_start, strlen(url_start));
   \                     ??show_edit_bookmark_menu_14:
   \   00000218   0B00A0E1           MOV      R0,R11
   \   0000021C   1B0000EF           SWI      +27
   \   00000220   0020A0E1           MOV      R2,R0
   \   00000224   0B10A0E1           MOV      R1,R11
   \   00000228   0900A0E1           MOV      R0,R9
   \   0000022C   E30100EF           SWI      +483
   \   00000230   460000EA           B        ??show_edit_bookmark_menu_9
    278                  }
    279                  else // url не загружен
    280                  {
    281                    switch(view_url_mode)
   \                     ??show_edit_bookmark_menu_10:
   \   00000234   ........           LDR      R0,??DataTable15  ;; view_url
   \   00000238   00B090E5           LDR      R11,[R0, #+0]
   \   0000023C   ........           LDR      R0,??DataTable6  ;; view_url_mode
   \   00000240   000090E5           LDR      R0,[R0, #+0]
   \   00000244   000050E3           CMP      R0,#+0
   \   00000248   0200000A           BEQ      ??show_edit_bookmark_menu_15
   \   0000024C   010050E2           SUBS     R0,R0,#+1
   \   00000250   0600000A           BEQ      ??show_edit_bookmark_menu_16
   \   00000254   100000EA           B        ??show_edit_bookmark_menu_17
    282                    {
    283                    case MODE_FILE:
    284                      str_2ws(ws, view_url, 255);
   \                     ??show_edit_bookmark_menu_15:
   \   00000258   FF20A0E3           MOV      R2,#+255
   \   0000025C   0B10A0E1           MOV      R1,R11
   \   00000260   0900A0E1           MOV      R0,R9
   \   00000264   6C0100EF           SWI      +364
   \   00000268   380000EA           B        ??show_edit_bookmark_menu_9
    285                      break;
    286                    case MODE_URL:
    287                      {
    288                        char * url_start;
    289                        for(url_start = view_url; *url_start && *url_start != '/'; url_start++);
   \                     ??show_edit_bookmark_menu_18:
   \   0000026C   01B08BE2           ADD      R11,R11,#+1
   \                     ??show_edit_bookmark_menu_16:
   \   00000270   0000DBE5           LDRB     R0,[R11, #+0]
   \   00000274   000050E3           CMP      R0,#+0
   \   00000278   2F005013           CMPNE    R0,#+47
   \   0000027C   FAFFFF1A           BNE      ??show_edit_bookmark_menu_18
    290                        for(; *url_start && *url_start == '/'; url_start++);
   \                     ??show_edit_bookmark_menu_19:
   \   00000280   0000DBE5           LDRB     R0,[R11, #+0]
   \   00000284   000050E3           CMP      R0,#+0
   \   00000288   E2FFFF0A           BEQ      ??show_edit_bookmark_menu_14
   \   0000028C   2F0050E3           CMP      R0,#+47
   \   00000290   E0FFFF1A           BNE      ??show_edit_bookmark_menu_14
   \   00000294   01B08BE2           ADD      R11,R11,#+1
   \   00000298   F8FFFFEA           B        ??show_edit_bookmark_menu_19
    291                        utf8_2ws(ws, url_start, strlen(url_start));
    292                      }
    293                      break;
    294                    default:
    295                      ascii2ws(ws, lgpData[LGP_Absent]);
   \                     ??show_edit_bookmark_menu_17:
   \   0000029C   AC109AE5           LDR      R1,[R10, #+172]
   \   000002A0   0900A0E1           MOV      R0,R9
   \   000002A4   ........           _BLF     ascii2ws,??ascii2ws??rA
   \   000002A8   280000EA           B        ??show_edit_bookmark_menu_9
    296                      break;
    297                    }
    298                  }
    299                }
    300              }
    301              else // Edit exists bookmark
    302              {
    303                // read url file
    304                int hFile;
    305                unsigned int io_error;
    306                FSTATS fstat;
    307                if (GetFileStats(bl->fullname, &fstat, &io_error) != -1)
   \                     ??show_edit_bookmark_menu_8:
   \   000002AC   080094E5           LDR      R0,[R4, #+8]
   \   000002B0   00B0E0E3           MVN      R11,#+0
   \   000002B4   0D20A0E1           MOV      R2,SP
   \   000002B8   38108DE2           ADD      R1,SP,#+56
   \   000002BC   840000EF           SWI      +132
   \   000002C0   0B0050E1           CMP      R0,R11
    308                {
    309                  if (fstat.size > 0)
   \   000002C4   3C009D15           LDRNE    R0,[SP, #+60]
   \   000002C8   00005013           CMPNE    R0,#+0
   \   000002CC   F2FFFF0A           BEQ      ??show_edit_bookmark_menu_17
    310                  {
    311                    if ((hFile = fopen(bl->fullname, A_ReadOnly + A_BIN, P_READ, &io_error)) != -1)
   \   000002D0   080094E5           LDR      R0,[R4, #+8]
   \   000002D4   0D30A0E1           MOV      R3,SP
   \   000002D8   8020A0E3           MOV      R2,#+128
   \   000002DC   801CA0E3           MOV      R1,#+32768
   \   000002E0   0A0000EF           SWI      +10
   \   000002E4   08008DE5           STR      R0,[SP, #+8]
   \   000002E8   0B0050E1           CMP      R0,R11
   \   000002EC   EAFFFF0A           BEQ      ??show_edit_bookmark_menu_17
    312                    {
    313                      char * url = (char *)malloc(fstat.size + 1);
   \   000002F0   3C009DE5           LDR      R0,[SP, #+60]
   \   000002F4   010080E2           ADD      R0,R0,#+1
   \   000002F8   140000EF           SWI      +20
    314                      url[fread(hFile, url, fstat.size, &io_error)] = NULL;
   \   000002FC   3C209DE5           LDR      R2,[SP, #+60]
   \   00000300   00B0A0E1           MOV      R11,R0
   \   00000304   08009DE5           LDR      R0,[SP, #+8]
   \   00000308   0D30A0E1           MOV      R3,SP
   \   0000030C   0B10A0E1           MOV      R1,R11
   \   00000310   0B0000EF           SWI      +11
   \   00000314   0010A0E3           MOV      R1,#+0
   \   00000318   0B10C0E7           STRB     R1,[R0, +R11]
    315                      fclose(hFile, &io_error);
   \   0000031C   08009DE5           LDR      R0,[SP, #+8]
   \   00000320   0D10A0E1           MOV      R1,SP
   \   00000324   0D0000EF           SWI      +13
    316                      URL_unescape(url);
   \   00000328   0B00A0E1           MOV      R0,R11
   \   0000032C   ........           _BLF     URL_unescape,??URL_unescape??rA
    317                      utf8_2ws(ws, url, strlen(url));
   \   00000330   0B00A0E1           MOV      R0,R11
   \   00000334   1B0000EF           SWI      +27
   \   00000338   0020A0E1           MOV      R2,R0
   \   0000033C   0B10A0E1           MOV      R1,R11
   \   00000340   0900A0E1           MOV      R0,R9
   \   00000344   E30100EF           SWI      +483
    318                      mfree(url);
   \   00000348   0B00A0E1           MOV      R0,R11
   \   0000034C   150000EF           SWI      +21
    319                      goto Add_link;
    320                    }
    321                  }
    322                }
    323                ascii2ws(ws, lgpData[LGP_Absent]);
    324              }
    325            Add_link:
    326              PrepareEditControl(&ec);
   \                     ??show_edit_bookmark_menu_9:
   \   00000350   0C008DE2           ADD      R0,SP,#+12
   \   00000354   640100EF           SWI      +356
    327              ConstructEditControl(&ec, ECT_NORMAL_TEXT, ECF_APPEND_EOL, ws, 511);
   \   00000358   FF00A0E3           MOV      R0,#+255
   \   0000035C   400F80E3           ORR      R0,R0,#0x100
   \   00000360   01002DE9           PUSH     {R0}
   \   00000364   0930A0E1           MOV      R3,R9
   \   00000368   4020A0E3           MOV      R2,#+64
   \   0000036C   0310A0E3           MOV      R1,#+3
   \   00000370   10008DE2           ADD      R0,SP,#+16
   \   00000374   650100EF           SWI      +357
    328              AddEditControlToEditQend(eq,&ec,ma);
   \   00000378   0620A0E1           MOV      R2,R6
   \   0000037C   10108DE2           ADD      R1,SP,#+16
   \   00000380   0700A0E1           MOV      R0,R7
   \   00000384   660100EF           SWI      +358
   \   00000388   04D08DE2           ADD      SP,SP,#+4
    329            }
    330          
    331            FreeWS(ws);
   \                     ??show_edit_bookmark_menu_7:
   \   0000038C   0900A0E1           MOV      R0,R9
   \   00000390   290100EF           SWI      +297
    332            
    333            switch(edit_mode)
   \   00000394   1400D5E5           LDRB     R0,[R5, #+20]
   \   00000398   000050E3           CMP      R0,#+0
   \   0000039C   0600000A           BEQ      ??show_edit_bookmark_menu_20
   \   000003A0   010050E2           SUBS     R0,R0,#+1
   \   000003A4   0600000A           BEQ      ??show_edit_bookmark_menu_21
   \   000003A8   010050E2           SUBS     R0,R0,#+1
   \   000003AC   0200000A           BEQ      ??show_edit_bookmark_menu_20
   \   000003B0   010050E2           SUBS     R0,R0,#+1
   \   000003B4   0400000A           BEQ      ??show_edit_bookmark_menu_22
   \   000003B8   050000EA           B        ??show_edit_bookmark_menu_23
    334            {
    335            case EditBookmark:
    336            case RenameFolder:
    337              edit_bookmark_hdr.lgp_id=(int)lgpData[LGP_Edit];
   \                     ??show_edit_bookmark_menu_20:
   \   000003BC   B4009AE5           LDR      R0,[R10, #+180]
   \   000003C0   020000EA           B        ??show_edit_bookmark_menu_24
    338              break;
    339            case CreateBookmark:
    340              edit_bookmark_hdr.lgp_id=(int)lgpData[LGP_NewBookmark];
   \                     ??show_edit_bookmark_menu_21:
   \   000003C4   A4009AE5           LDR      R0,[R10, #+164]
   \   000003C8   000000EA           B        ??show_edit_bookmark_menu_24
    341              break;
    342            case CreateFolder:
    343              edit_bookmark_hdr.lgp_id=(int)lgpData[LGP_NewFolder];
   \                     ??show_edit_bookmark_menu_22:
   \   000003CC   A8009AE5           LDR      R0,[R10, #+168]
   \                     ??show_edit_bookmark_menu_24:
   \   000003D0   0C0085E5           STR      R0,[R5, #+12]
    344              break;
    345            }
    346          
    347            patch_header(&edit_bookmark_hdr);
   \                     ??show_edit_bookmark_menu_23:
   \   000003D4   0500A0E1           MOV      R0,R5
   \   000003D8   ........           _BLF     patch_header,??patch_header??rA
    348            patch_input(&edit_bookmark_desc);
   \   000003DC   040088E2           ADD      R0,R8,#+4
   \   000003E0   ........           _BLF     patch_input,??patch_input??rA
    349            return CreateInputTextDialog(&edit_bookmark_desc, &edit_bookmark_hdr, eq, 1, bl);
   \   000003E4   10002DE9           PUSH     {R4}
   \   000003E8   0130A0E3           MOV      R3,#+1
   \   000003EC   0720A0E1           MOV      R2,R7
   \   000003F0   0510A0E1           MOV      R1,R5
   \   000003F4   040088E2           ADD      R0,R8,#+4
   \   000003F8   670100EF           SWI      +359
   \   000003FC   64D08DE2           ADD      SP,SP,#+100
   \   00000400   F08FBDE8           POP      {R4-R11,PC}      ;; return
   \                     ??show_edit_bookmark_menu_0:
   \   00000404   ........           DC32     edit_bookmark_hdr
   \   00000408   ........           DC32     `?<Constant "">_1`
    350          }
    351          
    352          //--------------------------- Bookmarks options --------------------------------
    353          

   \                                 In segment CODE, align 4, keep-with-next
    354          void bookmarks_options_edit(GUI * data)
    355          {
   \                     bookmarks_options_edit:
   \   00000000   10402DE9           PUSH     {R4,LR}
    356            BList * bl = (BList *)MenuGetUserPointer(data);
   \   00000004   E00100EF           SWI      +480
   \   00000008   0040A0E1           MOV      R4,R0
    357            if(bl->type == IS_FILE)
   \   0000000C   0400D4E5           LDRB     R0,[R4, #+4]
   \   00000010   020050E3           CMP      R0,#+2
   \   00000014   0D00001A           BNE      ??bookmarks_options_edit_0
    358            {
    359              char *s=strrchr(bl->fullname,'.');
   \   00000018   080094E5           LDR      R0,[R4, #+8]
   \   0000001C   2E10A0E3           MOV      R1,#+46
   \   00000020   170100EF           SWI      +279
    360              if (s)
   \   00000024   000050E3           CMP      R0,#+0
   \   00000028   0800000A           BEQ      ??bookmarks_options_edit_0
    361              {
    362                s++;
    363                if (!strcmp_nocase(s,ext_url))
   \   0000002C   ........           LDR      R1,??DataTable14  ;; ext_url
   \   00000030   010080E2           ADD      R0,R0,#+1
   \   00000034   001091E5           LDR      R1,[R1, #+0]
   \   00000038   ........           _BLF     strcmp_nocase,??strcmp_nocase??rA
   \   0000003C   000050E3           CMP      R0,#+0
    364                {
    365                  show_edit_bookmark_menu(bl, EditBookmark);
   \   00000040   0010A003           MOVEQ    R1,#+0
    366                }
    367                else
    368                {
    369                  show_edit_bookmark_menu(bl, RenameFolder);
   \   00000044   0210A013           MOVNE    R1,#+2
   \   00000048   0400A0E1           MOV      R0,R4
   \   0000004C   ........           BL       show_edit_bookmark_menu
    370                }
    371              }
    372            }
    373            if(bl->type == IS_FOLDER)
   \                     ??bookmarks_options_edit_0:
   \   00000050   0400D4E5           LDRB     R0,[R4, #+4]
   \   00000054   010050E3           CMP      R0,#+1
   \   00000058   0200001A           BNE      ??bookmarks_options_edit_1
    374              show_edit_bookmark_menu(bl, RenameFolder);
   \   0000005C   0210A0E3           MOV      R1,#+2
   \   00000060   0400A0E1           MOV      R0,R4
   \   00000064   ........           BL       show_edit_bookmark_menu
    375            GeneralFuncF1(2);
   \                     ??bookmarks_options_edit_1:
   \   00000068   0200A0E3           MOV      R0,#+2
   \   0000006C   3B0100EF           SWI      +315
    376          }
   \   00000070   1080BDE8           POP      {R4,PC}          ;; return
    377          

   \                                 In segment CODE, align 4, keep-with-next
    378          void bookmarks_options_add_bookmark(GUI *data)
    379          {
   \                     bookmarks_options_add_bookmark:
   \   00000000   00402DE9           PUSH     {LR}
    380            BList * bl = (BList *)MenuGetUserPointer(data);
   \   00000004   E00100EF           SWI      +480
    381            show_edit_bookmark_menu(bl, CreateBookmark);
   \   00000008   0110A0E3           MOV      R1,#+1
   \   0000000C   ........           BL       show_edit_bookmark_menu
    382            GeneralFuncF1(2);
   \   00000010   0200A0E3           MOV      R0,#+2
   \   00000014   3B0100EF           SWI      +315
    383          }
   \   00000018   0080BDE8           POP      {PC}             ;; return
    384          

   \                                 In segment CODE, align 4, keep-with-next
    385          void bookmarks_options_add_folder(GUI *data)
    386          {
   \                     bookmarks_options_add_folder:
   \   00000000   00402DE9           PUSH     {LR}
    387            BList * bl = (BList *)MenuGetUserPointer(data);
   \   00000004   E00100EF           SWI      +480
    388            show_edit_bookmark_menu(bl, CreateFolder);
   \   00000008   0310A0E3           MOV      R1,#+3
   \   0000000C   ........           BL       show_edit_bookmark_menu
    389            GeneralFuncF1(2);
   \   00000010   0200A0E3           MOV      R0,#+2
   \   00000014   3B0100EF           SWI      +315
    390          }
   \   00000018   0080BDE8           POP      {PC}             ;; return
    391          

   \                                 In segment CODE, align 4, keep-with-next
    392          void bookmarks_options_delete(GUI *data)
    393          {
   \                     bookmarks_options_delete:
   \   00000000   10402DE9           PUSH     {R4,LR}
   \   00000004   04D04DE2           SUB      SP,SP,#+4
    394            unsigned int io_error;
    395            BList * bl = (BList *)MenuGetUserPointer(data);
   \   00000008   E00100EF           SWI      +480
   \   0000000C   0040A0E1           MOV      R4,R0
    396            if(bl->type == IS_FOLDER)
   \   00000010   0400D4E5           LDRB     R0,[R4, #+4]
   \   00000014   010050E3           CMP      R0,#+1
   \   00000018   0800001A           BNE      ??bookmarks_options_delete_0
    397            {
    398              if(!rmdir(bl->fullname, &io_error))
   \   0000001C   080094E5           LDR      R0,[R4, #+8]
   \   00000020   0D10A0E1           MOV      R1,SP
   \   00000024   8F0000EF           SWI      +143
   \   00000028   000050E3           CMP      R0,#+0
   \   0000002C   0300001A           BNE      ??bookmarks_options_delete_0
    399                MsgBoxError(1, (int)lgpData[LGP_FolderNotEmpty]);
   \   00000030   2C009FE5           LDR      R0,??bookmarks_options_delete_1  ;; lgpData + 284
   \   00000034   001090E5           LDR      R1,[R0, #+0]
   \   00000038   0100A0E3           MOV      R0,#+1
   \   0000003C   4E0000EF           SWI      +78
    400            }
    401            if(bl->type == IS_FILE)
   \                     ??bookmarks_options_delete_0:
   \   00000040   0400D4E5           LDRB     R0,[R4, #+4]
   \   00000044   020050E3           CMP      R0,#+2
   \   00000048   0200001A           BNE      ??bookmarks_options_delete_2
    402              unlink(bl->fullname, &io_error);
   \   0000004C   080094E5           LDR      R0,[R4, #+8]
   \   00000050   0D10A0E1           MOV      R1,SP
   \   00000054   6B0100EF           SWI      +363
    403            GeneralFuncF1(2);
   \                     ??bookmarks_options_delete_2:
   \   00000058   0200A0E3           MOV      R0,#+2
   \   0000005C   3B0100EF           SWI      +315
    404          }
   \   00000060   1180BDE8           POP      {R0,R4,PC}       ;; return
   \                     ??bookmarks_options_delete_1:
   \   00000064   ........           DC32     lgpData + 284
    405          
    406          #define OPTIONS_ITEMS_N 4
    407          HEADER_DESC bookmarks_options_header={0,0,0,0,NULL,(int)"Options:",LGP_NULL};
    408          
    409          MENUITEM_DESC bookmarks_options_items[OPTIONS_ITEMS_N]=
    410          {
    411            {NULL,(int)"Edit",          LGP_NULL, 0, NULL, MENU_FLAG3, MENU_FLAG2}, //0
    412            {NULL,(int)"Add bookmark",  LGP_NULL, 0, NULL, MENU_FLAG3, MENU_FLAG2}, //1
    413            {NULL,(int)"Add folder",    LGP_NULL, 0, NULL, MENU_FLAG3, MENU_FLAG2}, //2
    414            {NULL,(int)"Delete",        LGP_NULL, 0, NULL, MENU_FLAG3, MENU_FLAG2}, //3
    415          };
    416          

   \                                 In segment DATA_C, align 4, align-sorted
    417          const MENUPROCS_DESC bookmarks_options_procs[OPTIONS_ITEMS_N]=
   \                     bookmarks_options_procs:
   \   00000000   ............       DC32 bookmarks_options_edit, bookmarks_options_add_bookmark
   \              ....        
   \   00000008   ............       DC32 bookmarks_options_add_folder, bookmarks_options_delete
   \              ....        
    418          {
    419            bookmarks_options_edit,
    420            bookmarks_options_add_bookmark,
    421            bookmarks_options_add_folder,
    422            bookmarks_options_delete,
    423          };
    424          
    425          int bookmarks_options_softkeys[]={0,1,2};
    426          
    427          SOFTKEY_DESC bookmarks_options_sk[]=
    428          {
    429            {0x0018,0x0000,(int)"Select"},
    430            {0x0001,0x0000,(int)"Back"},
    431            {0x003D,0x0000,(int)LGP_DOIT_PIC}
    432          };
    433          
    434          SOFTKEYSTAB bookmarks_options_skt=
    435          {
    436            bookmarks_options_sk,0
    437          };
    438          
    439          MENU_DESC bookmarks_options_struct=
    440          {
    441            8, NULL, NULL, NULL,
    442            bookmarks_options_softkeys,
    443            &bookmarks_options_skt,
    444            0x10,
    445            NULL,
    446            bookmarks_options_items,   //Items
    447            bookmarks_options_procs,   //Procs
    448            OPTIONS_ITEMS_N //n
    449          };
    450          

   \                                 In segment CODE, align 4, keep-with-next
    451          void show_bookmarks_options(BList * bl)
    452          {
   \                     show_bookmarks_options:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   \   00000004   14D04DE2           SUB      SP,SP,#+20
   \   00000008   0040B0E1           MOVS     R4,R0
    453            int to_remove[OPTIONS_ITEMS_N + 1];
    454            int n = 0;
    455            if (bl)
    456            {
    457              switch(bl->type)
   \   0000000C   0410D415           LDRBNE   R1,[R4, #+4]
   \   00000010   0000A0E3           MOV      R0,#+0
   \   00000014   00005113           CMPNE    R1,#+0
   \   00000018   0400001A           BNE      ??show_bookmarks_options_0
    458              {
    459              case IS_BACK:
    460                to_remove[++ n] = 0;
   \   0000001C   0010A0E3           MOV      R1,#+0
   \   00000020   04108DE5           STR      R1,[SP, #+4]
    461                to_remove[++ n] = 3;
   \   00000024   0200A0E3           MOV      R0,#+2
   \   00000028   0320A0E3           MOV      R2,#+3
   \   0000002C   08208DE5           STR      R2,[SP, #+8]
    462                break;
    463              }
    464            }
    465            else
    466            {
    467              to_remove[++n] = 0;
    468              to_remove[++n] = 3;
    469            }
    470            
    471            if(! bl)
   \                     ??show_bookmarks_options_0:
   \   00000030   000054E3           CMP      R4,#+0
   \   00000034   0600001A           BNE      ??show_bookmarks_options_1
    472            {
    473              to_remove[++ n] = 1;
   \   00000038   010080E2           ADD      R0,R0,#+1
   \   0000003C   0D10A0E1           MOV      R1,SP
   \   00000040   0120A0E3           MOV      R2,#+1
   \   00000044   002181E7           STR      R2,[R1, +R0, LSL #+2]
    474              to_remove[++ n] = 2;
   \   00000048   010080E2           ADD      R0,R0,#+1
   \   0000004C   0220A0E3           MOV      R2,#+2
   \   00000050   002181E7           STR      R2,[R1, +R0, LSL #+2]
    475            }
    476            to_remove[0] = n;
    477            patch_header_small((HEADER_DESC*)(&bookmarks_options_header));
   \                     ??show_bookmarks_options_1:
   \   00000054   7C509FE5           LDR      R5,??show_bookmarks_options_2  ;; bookmarks_options_items
   \   00000058   00008DE5           STR      R0,[SP, #+0]
   \   0000005C   700085E2           ADD      R0,R5,#+112
   \   00000060   ........           _BLF     patch_header_small,??patch_header_small??rA
    478            
    479            bookmarks_options_header.lgp_id=(int)lgpData[LGP_Options];
   \   00000064   ........           LDR      R0,??DataTable8  ;; lgpData
    480            
    481            bookmarks_options_items[0].lgp_id_small=(int)lgpData[LGP_Edit];
    482            bookmarks_options_items[1].lgp_id_small=(int)lgpData[LGP_NewBookmark];
    483            bookmarks_options_items[2].lgp_id_small=(int)lgpData[LGP_NewFolder];
    484            bookmarks_options_items[3].lgp_id_small=(int)lgpData[LGP_Delete];
    485            
    486            bookmarks_options_sk[0].lgp_id=(int)lgpData[LGP_Select];
    487            bookmarks_options_sk[1].lgp_id=(int)lgpData[LGP_Back];
    488            
    489            CreateMenu(1, 0, &bookmarks_options_struct, &bookmarks_options_header, 0, OPTIONS_ITEMS_N, bl, to_remove);
   \   00000068   703085E2           ADD      R3,R5,#+112
   \   0000006C   C01090E5           LDR      R1,[R0, #+192]
   \   00000070   9C2085E2           ADD      R2,R5,#+156
   \   00000074   7C1085E5           STR      R1,[R5, #+124]
   \   00000078   B41090E5           LDR      R1,[R0, #+180]
   \   0000007C   041085E5           STR      R1,[R5, #+4]
   \   00000080   A41090E5           LDR      R1,[R0, #+164]
   \   00000084   201085E5           STR      R1,[R5, #+32]
   \   00000088   A81090E5           LDR      R1,[R0, #+168]
   \   0000008C   3C1085E5           STR      R1,[R5, #+60]
   \   00000090   B81090E5           LDR      R1,[R0, #+184]
   \   00000094   581085E5           STR      R1,[R5, #+88]
   \   00000098   641090E5           LDR      R1,[R0, #+100]
   \   0000009C   BC0090E5           LDR      R0,[R0, #+188]
   \   000000A0   881085E5           STR      R1,[R5, #+136]
   \   000000A4   900085E5           STR      R0,[R5, #+144]
   \   000000A8   0D00A0E1           MOV      R0,SP
   \   000000AC   01002DE9           PUSH     {R0}
   \   000000B0   10002DE9           PUSH     {R4}
   \   000000B4   0010A0E3           MOV      R1,#+0
   \   000000B8   0400A0E3           MOV      R0,#+4
   \   000000BC   01002DE9           PUSH     {R0}
   \   000000C0   0000A0E3           MOV      R0,#+0
   \   000000C4   01002DE9           PUSH     {R0}
   \   000000C8   0100A0E3           MOV      R0,#+1
   \   000000CC   520100EF           SWI      +338
    490          }
   \   000000D0   24D08DE2           ADD      SP,SP,#+36
   \   000000D4   3080BDE8           POP      {R4,R5,PC}       ;; return
   \                     ??show_bookmarks_options_2:
   \   000000D8   ........           DC32     bookmarks_options_items
    491          
    492          //------------------------------- Bookmarks menu -------------------------------
    493          
    494          volatile BList * bl_top;
    495          

   \                                 In segment CODE, align 4, keep-with-next
    496          void Free_BList(void)
    497          {
   \                     Free_BList:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
    498            LockSched();
    499            BList * bl = (BList *)bl_top;
   \   00000004   ........           LDR      R4,??DataTable16  ;; bookmarks_menu_sk
   \   00000008   460100EF           SWI      +326
   \   0000000C   385094E5           LDR      R5,[R4, #+56]
    500            bl_top = NULL;
   \   00000010   0060A0E3           MOV      R6,#+0
   \   00000014   386084E5           STR      R6,[R4, #+56]
    501            UnlockSched();
   \   00000018   470100EF           SWI      +327
   \   0000001C   000055E3           CMP      R5,#+0
   \   00000020   0400000A           BEQ      ??Free_BList_0
    502            while(bl)
    503            {
    504              BList * bl_prev = bl;
   \                     ??Free_BList_1:
   \   00000024   0500A0E1           MOV      R0,R5
    505              bl = bl->next;
   \   00000028   005095E5           LDR      R5,[R5, #+0]
    506              mfree(bl_prev);
   \   0000002C   150000EF           SWI      +21
    507            }
   \   00000030   000055E3           CMP      R5,#+0
   \   00000034   FAFFFF1A           BNE      ??Free_BList_1
    508            if(bookmarks_current_folder)
   \                     ??Free_BList_0:
   \   00000038   340094E5           LDR      R0,[R4, #+52]
   \   0000003C   000050E3           CMP      R0,#+0
   \   00000040   0000000A           BEQ      ??Free_BList_2
    509              mfree(bookmarks_current_folder);
   \   00000044   150000EF           SWI      +21
    510            bookmarks_current_folder = NULL;
   \                     ??Free_BList_2:
   \   00000048   346084E5           STR      R6,[R4, #+52]
    511          }
   \   0000004C   7080BDE8           POP      {R4-R6,PC}       ;; return
    512          

   \                                 In segment CODE, align 4, keep-with-next
    513          BList * AddToFList(const char* full_name, const char *name, BListType type)
    514          {
   \                     AddToFList:
   \   00000000   F0412DE9           PUSH     {R4-R8,LR}
   \   00000004   0050A0E1           MOV      R5,R0
   \   00000008   0160A0E1           MOV      R6,R1
   \   0000000C   0270A0E1           MOV      R7,R2
    515            int l_fname;
    516            BList * bn = malloc(sizeof(BList)+(l_fname=strlen(full_name))+strlen(name)+2);
   \   00000010   1B0000EF           SWI      +27
   \   00000014   0080A0E1           MOV      R8,R0
   \   00000018   0600A0E1           MOV      R0,R6
   \   0000001C   1B0000EF           SWI      +27
   \   00000020   080080E0           ADD      R0,R0,R8
   \   00000024   120080E2           ADD      R0,R0,#+18
   \   00000028   140000EF           SWI      +20
   \   0000002C   0040A0E1           MOV      R4,R0
    517            bn->fullname=(char *)bn + sizeof(BList);
   \   00000030   100084E2           ADD      R0,R4,#+16
   \   00000034   080084E5           STR      R0,[R4, #+8]
    518            bn->name=(char *)bn+sizeof(BList)+l_fname+1;
   \   00000038   040088E0           ADD      R0,R8,R4
   \   0000003C   110080E2           ADD      R0,R0,#+17
   \   00000040   0C0084E5           STR      R0,[R4, #+12]
    519            strcpy(bn->fullname,full_name);
   \   00000044   080094E5           LDR      R0,[R4, #+8]
   \   00000048   0510A0E1           MOV      R1,R5
   \   0000004C   1A0000EF           SWI      +26
    520            strcpy(bn->name,name);
   \   00000050   0C0094E5           LDR      R0,[R4, #+12]
   \   00000054   0610A0E1           MOV      R1,R6
   \   00000058   1A0000EF           SWI      +26
    521            bn->type = type;
   \   0000005C   0470C4E5           STRB     R7,[R4, #+4]
    522            bn->next = NULL;
   \   00000060   0000A0E3           MOV      R0,#+0
   \   00000064   000084E5           STR      R0,[R4, #+0]
    523            BList * bl=(BList *)bl_top;
   \   00000068   ........           LDR      R0,??DataTable16  ;; bookmarks_menu_sk
   \   0000006C   385090E5           LDR      R5,[R0, #+56]
    524            if (bl)
   \   00000070   000055E3           CMP      R5,#+0
   \   00000074   0D00000A           BEQ      ??AddToFList_0
    525            {
    526              BList * pr =(BList *)&bl_top;
   \   00000078   386080E2           ADD      R6,R0,#+56
    527              while(strcmp_nocase(bl->name, bn->name) < 0)
   \                     ??AddToFList_1:
   \   0000007C   0C0095E5           LDR      R0,[R5, #+12]
   \   00000080   0C1094E5           LDR      R1,[R4, #+12]
   \   00000084   ........           _BLF     strcmp_nocase,??strcmp_nocase??rA
   \   00000088   000050E3           CMP      R0,#+0
   \   0000008C   0300005A           BPL      ??AddToFList_2
    528              {
    529                pr = bl;
   \   00000090   0560A0E1           MOV      R6,R5
    530                bl = bl->next;
   \   00000094   005095E5           LDR      R5,[R5, #+0]
    531                if (!bl) break;
   \   00000098   000055E3           CMP      R5,#+0
   \   0000009C   F6FFFF1A           BNE      ??AddToFList_1
    532              }
    533              bn->next = bl;
   \                     ??AddToFList_2:
   \   000000A0   005084E5           STR      R5,[R4, #+0]
    534              pr->next = bn;
   \   000000A4   004086E5           STR      R4,[R6, #+0]
   \   000000A8   0400A0E1           MOV      R0,R4
   \   000000AC   F081BDE8           POP      {R4-R8,PC}
    535            }
    536            else
    537            {
    538              bl_top = bn;
   \                     ??AddToFList_0:
   \   000000B0   384080E5           STR      R4,[R0, #+56]
    539            }
    540            return (bn);
   \   000000B4   0400A0E1           MOV      R0,R4
   \   000000B8   F081BDE8           POP      {R4-R8,PC}       ;; return
    541          }
    542          

   \                                 In segment CODE, align 4, keep-with-next
    543          int FindFiles(char * str)
    544          {
   \                     FindFiles:
   \   00000000   F04F2DE9           PUSH     {R4-R11,LR}
    545            DIR_ENTRY de;
    546            unsigned int err;
    547            char *rev,*s,*d;
    548            int i, c, n=0;
    549            char path[256];
    550            char name[128];
    551            
    552            strcpy(path,str);
    553            
    554            Free_BList();
    555            
    556            bookmarks_current_folder = (char *)malloc(strlen(path) + 1);
   \   00000004   ........           LDR      R5,??DataTable16  ;; bookmarks_menu_sk
    557            strcpy(bookmarks_current_folder, path);
    558          
    559            s=path;
    560            d=name;
    561            rev=0;
    562            
    563            char * bookmarks_path = getSymbolicPath("$bookmarks\\");
   \   00000008   ........           LDR      R11,??DataTable19  ;; `?<Constant "...">`
   \   0000000C   CCD04DE2           SUB      SP,SP,#+204
   \   00000010   40DE4DE2           SUB      SP,SP,#+1024
   \   00000014   0010A0E1           MOV      R1,R0
   \   00000018   D30F8DE2           ADD      R0,SP,#+844
   \   0000001C   1A0000EF           SWI      +26
   \   00000020   ........           BL       Free_BList
   \   00000024   D30F8DE2           ADD      R0,SP,#+844
   \   00000028   1B0000EF           SWI      +27
   \   0000002C   010080E2           ADD      R0,R0,#+1
   \   00000030   140000EF           SWI      +20
   \   00000034   340085E5           STR      R0,[R5, #+52]
   \   00000038   D31F8DE2           ADD      R1,SP,#+844
   \   0000003C   1A0000EF           SWI      +26
   \   00000040   D38F8DE2           ADD      R8,SP,#+844
   \   00000044   4C908DE2           ADD      R9,SP,#+76
   \   00000048   34008BE2           ADD      R0,R11,#+52
   \   0000004C   ........           _BLF     getSymbolicPath,??getSymbolicPath??rA
    564            const char back[]="...";
   \   00000050   00109BE5           LDR      R1,[R11, #0]
   \   00000054   0070A0E1           MOV      R7,R0
   \   00000058   04008DE2           ADD      R0,SP,#+4
   \   0000005C   001080E5           STR      R1,[R0, #+0]
    565            if(strcmp_nocase(bookmarks_current_folder, bookmarks_path) != 0)
   \   00000060   340095E5           LDR      R0,[R5, #+52]
   \   00000064   0040A0E3           MOV      R4,#+0
   \   00000068   409E89E2           ADD      R9,R9,#+1024
   \   0000006C   0060A0E3           MOV      R6,#+0
   \   00000070   04A0A0E1           MOV      R10,R4
   \   00000074   0710A0E1           MOV      R1,R7
   \   00000078   ........           _BLF     strcmp_nocase,??strcmp_nocase??rA
   \   0000007C   000050E3           CMP      R0,#+0
   \   00000080   0600001A           BNE      ??FindFiles_0
   \   00000084   0F0000EA           B        ??FindFiles_1
    566            {
    567              while((c=*s++))
    568              {
    569                *d++ = c;
   \                     ??FindFiles_2:
   \   00000088   ........           STRB     R0,[R9], #+1
    570                if (c == '\\' && *s != '\0')
   \   0000008C   5C0050E3           CMP      R0,#+92
   \   00000090   0200001A           BNE      ??FindFiles_0
   \   00000094   0000D8E5           LDRB     R0,[R8, #+0]
   \   00000098   000050E3           CMP      R0,#+0
    571                  rev=d;
   \   0000009C   09A0A011           MOVNE    R10,R9
    572              }
   \                     ??FindFiles_0:
   \   000000A0   ........           LDRB     R0,[R8], #+1
   \   000000A4   000050E3           CMP      R0,#+0
   \   000000A8   F6FFFF1A           BNE      ??FindFiles_2
    573              *rev = 0;
   \   000000AC   0060CAE5           STRB     R6,[R10, #+0]
    574              AddToFList(name, back, IS_BACK);
   \   000000B0   0020A0E3           MOV      R2,#+0
   \   000000B4   04108DE2           ADD      R1,SP,#+4
   \   000000B8   4C008DE2           ADD      R0,SP,#+76
   \   000000BC   400E80E2           ADD      R0,R0,#+1024
   \   000000C0   ........           BL       AddToFList
    575              n++;
   \   000000C4   0140A0E3           MOV      R4,#+1
    576            }
    577            mfree(bookmarks_path);
   \                     ??FindFiles_1:
   \   000000C8   0700A0E1           MOV      R0,R7
   \   000000CC   150000EF           SWI      +21
    578            
    579            i=strlen(path);
   \   000000D0   D30F8DE2           ADD      R0,SP,#+844
   \   000000D4   1B0000EF           SWI      +27
   \   000000D8   0070A0E1           MOV      R7,R0
    580            path[i++]='*';
   \   000000DC   D30F8DE2           ADD      R0,SP,#+844
   \   000000E0   000087E0           ADD      R0,R7,R0
   \   000000E4   2A10A0E3           MOV      R1,#+42
   \   000000E8   0010C0E5           STRB     R1,[R0, #+0]
    581            path[i]=0;
   \   000000EC   0160C0E5           STRB     R6,[R0, #+1]
    582            if (FindFirstFile(&de,path,&err))
   \   000000F0   0D20A0E1           MOV      R2,SP
   \   000000F4   D31F8DE2           ADD      R1,SP,#+844
   \   000000F8   08008DE2           ADD      R0,SP,#+8
   \   000000FC   6B0000EF           SWI      +107
   \   00000100   000050E3           CMP      R0,#+0
   \   00000104   3700000A           BEQ      ??FindFiles_3
    583            {
    584              do
    585              {
    586                i=strlen(de.folder_name);
   \                     ??FindFiles_4:
   \   00000108   3C008DE2           ADD      R0,SP,#+60
   \   0000010C   1B0000EF           SWI      +27
   \   00000110   0050A0E1           MOV      R5,R0
    587                strcpy(path,de.folder_name);
   \   00000114   3C108DE2           ADD      R1,SP,#+60
   \   00000118   D30F8DE2           ADD      R0,SP,#+844
   \   0000011C   1A0000EF           SWI      +26
    588                path[i++]='\\';
   \   00000120   D30F8DE2           ADD      R0,SP,#+844
   \   00000124   000085E0           ADD      R0,R5,R0
   \   00000128   5C50A0E3           MOV      R5,#+92
   \   0000012C   ........           STRB     R5,[R0], #+1
    589                strcpy(path+i,de.file_name);
   \   00000130   BD108DE2           ADD      R1,SP,#+189
   \   00000134   1A0000EF           SWI      +26
    590                if (de.file_attr&FA_DIRECTORY)
   \   00000138   F403DDE1           LDRSH    R0,[SP, #+52]
   \   0000013C   014084E2           ADD      R4,R4,#+1
   \   00000140   100010E3           TST      R0,#0x10
   \   00000144   0C00000A           BEQ      ??FindFiles_5
    591                {
    592                  i=strlen(path);
   \   00000148   D30F8DE2           ADD      R0,SP,#+844
   \   0000014C   1B0000EF           SWI      +27
   \   00000150   0070A0E1           MOV      R7,R0
    593                  path[i++]='\\';
   \   00000154   D30F8DE2           ADD      R0,SP,#+844
   \   00000158   000087E0           ADD      R0,R7,R0
   \   0000015C   0050C0E5           STRB     R5,[R0, #+0]
    594                  path[i]=0;
   \   00000160   0160C0E5           STRB     R6,[R0, #+1]
    595                  strcpy(name, de.file_name);
   \   00000164   BD108DE2           ADD      R1,SP,#+189
   \   00000168   4C008DE2           ADD      R0,SP,#+76
   \   0000016C   400E80E2           ADD      R0,R0,#+1024
   \   00000170   1A0000EF           SWI      +26
    596                  AddToFList(path,name,IS_FOLDER);
   \   00000174   0120A0E3           MOV      R2,#+1
   \   00000178   110000EA           B        ??FindFiles_6
    597                  n ++;
    598                }
    599                else
    600                {
    601                  i = strlen(de.file_name);
   \                     ??FindFiles_5:
   \   0000017C   BD008DE2           ADD      R0,SP,#+189
   \   00000180   1B0000EF           SWI      +27
   \   00000184   0070A0E1           MOV      R7,R0
    602                  strncpy(name, de.file_name, i);
   \   00000188   0720A0E1           MOV      R2,R7
   \   0000018C   BD108DE2           ADD      R1,SP,#+189
   \   00000190   4C008DE2           ADD      R0,SP,#+76
   \   00000194   400E80E2           ADD      R0,R0,#+1024
   \   00000198   160100EF           SWI      +278
    603                  name[i] = NULL;
   \   0000019C   4C008DE2           ADD      R0,SP,#+76
   \   000001A0   400E80E2           ADD      R0,R0,#+1024
   \   000001A4   0060C7E7           STRB     R6,[R7, +R0]
    604                  char* pext = strrchr(name, '.');
   \   000001A8   2E10A0E3           MOV      R1,#+46
   \   000001AC   4C008DE2           ADD      R0,SP,#+76
   \   000001B0   400E80E2           ADD      R0,R0,#+1024
   \   000001B4   170100EF           SWI      +279
    605                  if (pext)
   \   000001B8   000050E3           CMP      R0,#+0
    606                    *pext = 0;
   \   000001BC   0060C015           STRBNE   R6,[R0, #+0]
    607                  AddToFList(path, name, IS_FILE);
   \   000001C0   0220A0E3           MOV      R2,#+2
   \                     ??FindFiles_6:
   \   000001C4   4C108DE2           ADD      R1,SP,#+76
   \   000001C8   401E81E2           ADD      R1,R1,#+1024
   \   000001CC   D30F8DE2           ADD      R0,SP,#+844
   \   000001D0   ........           BL       AddToFList
    608                  n ++;
    609                }
    610              }
    611              while(FindNextFile(&de,&err));
   \   000001D4   0D10A0E1           MOV      R1,SP
   \   000001D8   08008DE2           ADD      R0,SP,#+8
   \   000001DC   6C0000EF           SWI      +108
   \   000001E0   000050E3           CMP      R0,#+0
   \   000001E4   C7FFFF1A           BNE      ??FindFiles_4
    612            }
    613            FindClose(&de,&err);
   \                     ??FindFiles_3:
   \   000001E8   0D10A0E1           MOV      R1,SP
   \   000001EC   08008DE2           ADD      R0,SP,#+8
   \   000001F0   6D0000EF           SWI      +109
    614            return n;
   \   000001F4   0400A0E1           MOV      R0,R4
   \   000001F8   CCD08DE2           ADD      SP,SP,#+204
   \   000001FC   40DE8DE2           ADD      SP,SP,#+1024
   \   00000200   F08FBDE8           POP      {R4-R11,PC}      ;; return
    615          }
    616          

   \                                 In segment CODE, align 4, keep-with-next
    617          BList * FindBListByNS(int * i, BListType type)
    618          {
    619            BList * bl = (BList *)bl_top;
   \                     FindBListByNS:
   \   00000000   3C209FE5           LDR      R2,??FindBListByNS_0  ;; bookmarks_menu_sk + 56
   \   00000004   010000EA           B        ??FindBListByNS_1
    620            while(bl)
    621            {
    622              if (bl->type == type)
    623              {
    624                if (!(*i)) return (bl);
    625                (*i)--;
   \                     ??FindBListByNS_2:
   \   00000008   013043E2           SUB      R3,R3,#+1
   \   0000000C   003080E5           STR      R3,[R0, #+0]
    626              }    
    627              bl = bl->next;
   \                     ??FindBListByNS_1:
   \   00000010   002092E5           LDR      R2,[R2, #+0]
   \   00000014   000052E3           CMP      R2,#+0
   \   00000018   0700000A           BEQ      ??FindBListByNS_3
   \   0000001C   0430D2E5           LDRB     R3,[R2, #+4]
   \   00000020   010053E1           CMP      R3,R1
   \   00000024   F9FFFF1A           BNE      ??FindBListByNS_1
   \   00000028   003090E5           LDR      R3,[R0, #+0]
   \   0000002C   000053E3           CMP      R3,#+0
   \   00000030   F4FFFF1A           BNE      ??FindBListByNS_2
   \   00000034   0200A0E1           MOV      R0,R2
   \   00000038   1EFF2FE1           BX       LR
    628            }
    629            return bl;
   \                     ??FindBListByNS_3:
   \   0000003C   0000A0E3           MOV      R0,#+0
   \   00000040   1EFF2FE1           BX       LR               ;; return
   \                     ??FindBListByNS_0:
   \   00000044   ........           DC32     bookmarks_menu_sk + 56
    630          }
    631            

   \                                 In segment CODE, align 4, keep-with-next
    632          BList * FindBListByN(int n)
    633          {
   \                     FindBListByN:
   \   00000000   01402DE9           PUSH     {R0,LR}
    634            BList * bl;
    635            bl = FindBListByNS(&n, IS_BACK);   if ((!n)&&(bl)) return(bl);
   \   00000004   0010A0E3           MOV      R1,#+0
   \   00000008   0D00A0E1           MOV      R0,SP
   \   0000000C   ........           BL       FindBListByNS
   \   00000010   00109DE5           LDR      R1,[SP, #+0]
   \   00000014   000051E3           CMP      R1,#+0
   \   00000018   0100001A           BNE      ??FindBListByN_0
   \   0000001C   000050E3           CMP      R0,#+0
   \   00000020   0280BD18           POPNE    {R1,PC}
    636            bl = FindBListByNS(&n, IS_FOLDER); if ((!n)&&(bl)) return(bl);
   \                     ??FindBListByN_0:
   \   00000024   0110A0E3           MOV      R1,#+1
   \   00000028   0D00A0E1           MOV      R0,SP
   \   0000002C   ........           BL       FindBListByNS
   \   00000030   00109DE5           LDR      R1,[SP, #+0]
   \   00000034   000051E3           CMP      R1,#+0
   \   00000038   0100001A           BNE      ??FindBListByN_1
   \   0000003C   000050E3           CMP      R0,#+0
   \   00000040   0280BD18           POPNE    {R1,PC}
    637            bl = FindBListByNS(&n, IS_FILE);   if ((!n)&&(bl)) return(bl);
   \                     ??FindBListByN_1:
   \   00000044   0210A0E3           MOV      R1,#+2
   \   00000048   0D00A0E1           MOV      R0,SP
   \   0000004C   ........           BL       FindBListByNS
   \   00000050   0280BDE8           POP      {R1,PC}
    638            return bl;
    639          }
    640          

   \                                 In segment CODE, align 4, keep-with-next
    641          int bookmarks_menu_onkey(void *data, GUI_MSG *msg)
    642          {
   \                     bookmarks_menu_onkey:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
   \   00000004   0050A0E1           MOV      R5,R0
   \   00000008   0160A0E1           MOV      R6,R1
    643            BList * bl = FindBListByN(GetCurMenuItem(data));
   \   0000000C   8F0100EF           SWI      +399
   \   00000010   ........           BL       FindBListByN
   \   00000014   0040A0E1           MOV      R4,R0
    644            
    645            if (msg->keys==0x3D)
   \   00000018   F200D6E1           LDRSH    R0,[R6, #+2]
   \   0000001C   3D0050E3           CMP      R0,#+61
   \   00000020   3A00001A           BNE      ??bookmarks_menu_onkey_0
    646            {
    647              if (bl) 
   \   00000024   000054E3           CMP      R4,#+0
   \   00000028   3C00000A           BEQ      ??bookmarks_menu_onkey_1
    648              {
    649                if (bl->type == IS_FOLDER || bl->type == IS_BACK)
   \   0000002C   0410D4E5           LDRB     R1,[R4, #+4]
   \   00000030   080094E5           LDR      R0,[R4, #+8]
   \   00000034   010051E3           CMP      R1,#+1
   \   00000038   00005113           CMPNE    R1,#+0
   \   0000003C   0900001A           BNE      ??bookmarks_menu_onkey_2
    650                {
    651                  Menu_SetItemCountDyn(data, FindFiles(bl->fullname));
   \   00000040   ........           BL       FindFiles
   \   00000044   0010A0E1           MOV      R1,R0
   \   00000048   0500A0E1           MOV      R0,R5
   \   0000004C   E60100EF           SWI      +486
    652                  SetCursorToMenuItem(data, 0);
   \   00000050   0010A0E3           MOV      R1,#+0
   \   00000054   0500A0E1           MOV      R0,R5
   \   00000058   C40100EF           SWI      +452
    653                  RefreshGUI();
   \   0000005C   960100EF           SWI      +406
    654                }
    655                else
    656                {
    657                  char *s=strrchr(bl->fullname,'.');
    658                  if (s)
    659                  {
    660                    s++;
    661                    if (!strcmp_nocase(s,"oms"))
    662                    {
    663                      goto_url=globalstr(bl->fullname);
    664                      return (0xFA);
    665                    }
    666                    if (!strcmp_nocase(s,ext_url))
    667                    {
    668                      if (ReadUrlFile(bl->fullname))
    669                      {
    670                        int len = strlen(view_url);
    671                        _safe_free(goto_url);
    672                        goto_url = URL_reencode_escapes(view_url);
    673                        return (0xFF);
    674                      }
    675                    }
    676                  }
    677                  return (1);
    678                }
    679              }
    680              return(-1);
   \   00000060   0000E0E3           MVN      R0,#+0
   \   00000064   7080BDE8           POP      {R4-R6,PC}
   \                     ??bookmarks_menu_onkey_2:
   \   00000068   2E10A0E3           MOV      R1,#+46
   \   0000006C   170100EF           SWI      +279
   \   00000070   0050B0E1           MOVS     R5,R0
   \   00000074   2300000A           BEQ      ??bookmarks_menu_onkey_3
   \   00000078   ........           LDR      R6,??DataTable27  ;; goto_url
   \   0000007C   2B1F8FE2           ADR      R1,??bookmarks_menu_onkey_4  ;; "oms"
   \   00000080   015080E2           ADD      R5,R0,#+1
   \   00000084   0500A0E1           MOV      R0,R5
   \   00000088   ........           _BLF     strcmp_nocase,??strcmp_nocase??rA
   \   0000008C   000050E3           CMP      R0,#+0
   \   00000090   0400001A           BNE      ??bookmarks_menu_onkey_5
   \   00000094   080094E5           LDR      R0,[R4, #+8]
   \   00000098   ........           _BLF     globalstr,??globalstr??rA
   \   0000009C   000086E5           STR      R0,[R6, #+0]
   \   000000A0   FA00A0E3           MOV      R0,#+250
   \   000000A4   7080BDE8           POP      {R4-R6,PC}
   \                     ??bookmarks_menu_onkey_5:
   \   000000A8   ........           LDR      R0,??DataTable14  ;; ext_url
   \   000000AC   001090E5           LDR      R1,[R0, #+0]
   \   000000B0   0500A0E1           MOV      R0,R5
   \   000000B4   ........           _BLF     strcmp_nocase,??strcmp_nocase??rA
   \   000000B8   000050E3           CMP      R0,#+0
   \   000000BC   1100001A           BNE      ??bookmarks_menu_onkey_3
   \   000000C0   080094E5           LDR      R0,[R4, #+8]
   \   000000C4   ........           _BLF     ReadUrlFile,??ReadUrlFile??rA
   \   000000C8   000050E3           CMP      R0,#+0
   \   000000CC   0D00000A           BEQ      ??bookmarks_menu_onkey_3
   \   000000D0   ........           LDR      R4,??DataTable15  ;; view_url
   \   000000D4   000094E5           LDR      R0,[R4, #+0]
   \   000000D8   1B0000EF           SWI      +27
   \   000000DC   000096E5           LDR      R0,[R6, #+0]
   \   000000E0   000050E3           CMP      R0,#+0
   \   000000E4   0100000A           BEQ      ??bookmarks_menu_onkey_6
   \   000000E8   150000EF           SWI      +21
   \   000000EC   0000A0E3           MOV      R0,#+0
   \                     ??bookmarks_menu_onkey_6:
   \   000000F0   000086E5           STR      R0,[R6, #+0]
   \   000000F4   000094E5           LDR      R0,[R4, #+0]
   \   000000F8   ........           _BLF     URL_reencode_escapes,??URL_reencode_escapes??rA
   \   000000FC   000086E5           STR      R0,[R6, #+0]
   \   00000100   FF00A0E3           MOV      R0,#+255
   \   00000104   7080BDE8           POP      {R4-R6,PC}
   \                     ??bookmarks_menu_onkey_3:
   \   00000108   0100A0E3           MOV      R0,#+1
   \   0000010C   7080BDE8           POP      {R4-R6,PC}
    681            }
    682            if (msg->keys==0x18)
   \                     ??bookmarks_menu_onkey_0:
   \   00000110   180050E3           CMP      R0,#+24
   \   00000114   0300001A           BNE      ??bookmarks_menu_onkey_7
    683            {
    684              show_bookmarks_options(bl);
   \   00000118   0400A0E1           MOV      R0,R4
   \   0000011C   ........           BL       show_bookmarks_options
    685              return (-1);
   \                     ??bookmarks_menu_onkey_1:
   \   00000120   0000E0E3           MVN      R0,#+0
   \   00000124   7080BDE8           POP      {R4-R6,PC}
    686            }
    687            return (0);
   \                     ??bookmarks_menu_onkey_7:
   \   00000128   0000A0E3           MOV      R0,#+0
   \   0000012C   7080BDE8           POP      {R4-R6,PC}       ;; return
   \                     ??bookmarks_menu_onkey_4:
   \   00000130   6F6D7300           DC8      "oms"
    688          }
    689          
    690          int bookmarks_menu_icons[2];
    691          

   \                                 In segment CODE, align 4, keep-with-next
    692          void bookmarks_menu_ghook(void *data, int cmd)
    693          {
   \                     bookmarks_menu_ghook:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
    694            if (cmd == TI_CMD_DESTROY)
   \   00000004   ........           LDR      R5,??DataTable16  ;; bookmarks_menu_sk
   \   00000008   0040A0E1           MOV      R4,R0
   \   0000000C   030051E3           CMP      R1,#+3
   \   00000010   0A00001A           BNE      ??bookmarks_menu_ghook_0
    695            {
    696              for(int i = 0; i < 2; i++)
   \   00000014   0040A0E3           MOV      R4,#+0
   \                     ??bookmarks_menu_ghook_1:
   \   00000018   040185E0           ADD      R0,R5,R4, LSL #+2
   \   0000001C   2C0090E5           LDR      R0,[R0, #+44]
   \   00000020   000050E3           CMP      R0,#+0
   \   00000024   0000000A           BEQ      ??bookmarks_menu_ghook_2
    697                if (bookmarks_menu_icons[i])
    698                  mfree((void *)bookmarks_menu_icons[i]);
   \   00000028   150000EF           SWI      +21
   \                     ??bookmarks_menu_ghook_2:
   \   0000002C   014084E2           ADD      R4,R4,#+1
   \   00000030   020054E3           CMP      R4,#+2
   \   00000034   F7FFFFBA           BLT      ??bookmarks_menu_ghook_1
    699              Free_BList();   
   \   00000038   ........           BL       Free_BList
   \   0000003C   3080BDE8           POP      {R4,R5,PC}
    700            }
    701            if (cmd == TI_CMD_FOCUS)
   \                     ??bookmarks_menu_ghook_0:
   \   00000040   0A0051E3           CMP      R1,#+10
   \   00000044   3080BD18           POPNE    {R4,R5,PC}
    702            {
    703              DisableIDLETMR();
   \   00000048   7F0100EF           SWI      +383
    704              if(bookmarks_current_folder)
   \   0000004C   340095E5           LDR      R0,[R5, #+52]
   \   00000050   000050E3           CMP      R0,#+0
   \   00000054   3080BD08           POPEQ    {R4,R5,PC}
    705              {
    706                Menu_SetItemCountDyn(data, FindFiles(bookmarks_current_folder));
   \   00000058   ........           BL       FindFiles
   \   0000005C   0010A0E1           MOV      R1,R0
   \   00000060   0400A0E1           MOV      R0,R4
   \   00000064   E60100EF           SWI      +486
    707                SetCursorToMenuItem(data, 0);
   \   00000068   0010A0E3           MOV      R1,#+0
   \   0000006C   0400A0E1           MOV      R0,R4
   \   00000070   C40100EF           SWI      +452
    708              }
    709            }
    710          }
   \   00000074   3080BDE8           POP      {R4,R5,PC}       ;; return
    711          

   \                                 In segment CODE, align 4, keep-with-next
    712          void bookmarks_menu_iconhndl(void * data, int curitem, void * user_pointer)
    713          {
   \                     bookmarks_menu_iconhndl:
   \   00000000   F0472DE9           PUSH     {R4-R10,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   \   00000008   0150A0E1           MOV      R5,R1
    714            WSHDR * ws;
    715            void * item = AllocMenuItem(data);
   \   0000000C   970100EF           SWI      +407
   \   00000010   0060A0E1           MOV      R6,R0
    716            BList * bl = FindBListByN(curitem);
   \   00000014   0500A0E1           MOV      R0,R5
   \   00000018   ........           BL       FindBListByN
   \   0000001C   0080B0E1           MOVS     R8,R0
    717            if (bl)
   \   00000020   3000000A           BEQ      ??bookmarks_menu_iconhndl_0
    718            {
    719              int len = strlen(bl->name);
   \   00000024   0C0098E5           LDR      R0,[R8, #+12]
   \   00000028   1B0000EF           SWI      +27
   \   0000002C   0090A0E1           MOV      R9,R0
    720              ws = AllocMenuWS(data, len + 4);
   \   00000030   041089E2           ADD      R1,R9,#+4
   \   00000034   0400A0E1           MOV      R0,R4
   \   00000038   980100EF           SWI      +408
    721              str_2ws(ws, bl->name, len);
   \   0000003C   0C1098E5           LDR      R1,[R8, #+12]
   \   00000040   0070A0E1           MOV      R7,R0
   \   00000044   0920A0E1           MOV      R2,R9
    722              if (bl->type == IS_BACK || bl->type == IS_FOLDER)
   \   00000048   ........           LDR      R9,??DataTable17  ;; bookmarks_menu_sk
   \   0000004C   6C0100EF           SWI      +364
   \   00000050   0400D8E5           LDRB     R0,[R8, #+4]
   \   00000054   000050E3           CMP      R0,#+0
   \   00000058   01005013           CMPNE    R0,#+1
   \   0000005C   0400001A           BNE      ??bookmarks_menu_iconhndl_1
    723                SetMenuItemIconArray(data, item, &bookmarks_menu_icons[1]);
   \   00000060   302089E2           ADD      R2,R9,#+48
   \                     ??bookmarks_menu_iconhndl_2:
   \   00000064   0610A0E1           MOV      R1,R6
   \   00000068   0400A0E1           MOV      R0,R4
   \   0000006C   990100EF           SWI      +409
   \   00000070   240000EA           B        ??bookmarks_menu_iconhndl_3
    724              else
    725              {
    726                WSHDR* wsext = AllocWS(256);
   \                     ??bookmarks_menu_iconhndl_1:
   \   00000074   400FA0E3           MOV      R0,#+256
   \   00000078   250100EF           SWI      +293
   \   0000007C   00A0A0E1           MOV      R10,R0
    727                char* pext = strrchr(bl->fullname, '.');
   \   00000080   080098E5           LDR      R0,[R8, #+8]
   \   00000084   2E10A0E3           MOV      R1,#+46
   \   00000088   170100EF           SWI      +279
    728                if (pext)
   \   0000008C   000050E3           CMP      R0,#+0
   \   00000090   0400000A           BEQ      ??bookmarks_menu_iconhndl_4
    729                  str_2ws(wsext, pext+1, 255);
   \   00000094   FF20A0E3           MOV      R2,#+255
   \   00000098   011080E2           ADD      R1,R0,#+1
   \   0000009C   0A00A0E1           MOV      R0,R10
   \   000000A0   6C0100EF           SWI      +364
   \   000000A4   020000EA           B        ??bookmarks_menu_iconhndl_5
    730                else
    731                  CutWSTR(wsext, 0);
   \                     ??bookmarks_menu_iconhndl_4:
   \   000000A8   0010A0E3           MOV      R1,#+0
   \   000000AC   0A00A0E1           MOV      R0,R10
   \   000000B0   260100EF           SWI      +294
    732                int uid = GetExtUid_ws(wsext);
   \                     ??bookmarks_menu_iconhndl_5:
   \   000000B4   0A00A0E1           MOV      R0,R10
   \   000000B8   D00100EF           SWI      +464
   \   000000BC   0080A0E1           MOV      R8,R0
    733                FreeWS(wsext);
   \   000000C0   0A00A0E1           MOV      R0,R10
   \   000000C4   290100EF           SWI      +297
    734                if (uid)
   \   000000C8   000058E3           CMP      R8,#+0
   \   000000CC   0300000A           BEQ      ??bookmarks_menu_iconhndl_6
    735                {
    736                  TREGEXPLEXT* pr = get_regextpnt_by_uid(uid);
   \   000000D0   0800A0E1           MOV      R0,R8
   \   000000D4   CF0100EF           SWI      +463
    737                  SetMenuItemIconArray(data, item, pr->icon1);
   \   000000D8   0C2090E5           LDR      R2,[R0, #+12]
   \   000000DC   E0FFFFEA           B        ??bookmarks_menu_iconhndl_2
    738                }
    739                else
    740                  SetMenuItemIconArray(data, item, &bookmarks_menu_icons[0]);
   \                     ??bookmarks_menu_iconhndl_6:
   \   000000E0   2C2089E2           ADD      R2,R9,#+44
   \   000000E4   DEFFFFEA           B        ??bookmarks_menu_iconhndl_2
    741              }
    742            }
    743            else
    744            {
    745              ws = AllocMenuWS(data, 10);
   \                     ??bookmarks_menu_iconhndl_0:
   \   000000E8   0A10A0E3           MOV      R1,#+10
   \   000000EC   0400A0E1           MOV      R0,R4
   \   000000F0   980100EF           SWI      +408
   \   000000F4   0070A0E1           MOV      R7,R0
    746              ascii2ws(ws, lgpData[LGP_Error]);
   \   000000F8   ........           LDR      R0,??DataTable28  ;; lgpData + 24
   \   000000FC   001090E5           LDR      R1,[R0, #+0]
   \   00000100   0700A0E1           MOV      R0,R7
   \   00000104   ........           _BLF     ascii2ws,??ascii2ws??rA
    747            }
    748            SetMenuItemText(data, item, ws, curitem);
   \                     ??bookmarks_menu_iconhndl_3:
   \   00000108   0530A0E1           MOV      R3,R5
   \   0000010C   0720A0E1           MOV      R2,R7
   \   00000110   0610A0E1           MOV      R1,R6
   \   00000114   0400A0E1           MOV      R0,R4
   \   00000118   9A0100EF           SWI      +410
    749          }
   \   0000011C   F087BDE8           POP      {R4-R10,PC}      ;; return
    750          
    751          int bookmarks_menu_softkeys[]={0,1,2};
    752          SOFTKEY_DESC bookmarks_menu_sk[]=
    753          {
    754            {0x0018,0x0000,(int)"Options"},
    755            {0x0001,0x0000,(int)"Back"},
    756            {0x003D,0x0000,(int)LGP_DOIT_PIC}
    757          };
    758          
    759          SOFTKEYSTAB bookmarks_menu_skt=
    760          {
    761            bookmarks_menu_sk,0
    762          };
    763          
    764          HEADER_DESC bookmarks_menu_header={0,0,0,0,NULL,NULL,LGP_NULL};
    765          
    766          MENU_DESC bookmarks_menu_struct=
    767          {
    768            8, bookmarks_menu_onkey, bookmarks_menu_ghook, NULL,
    769            bookmarks_menu_softkeys,
    770            &bookmarks_menu_skt,
    771            0x11,
    772            bookmarks_menu_iconhndl,
    773            NULL,   //Items
    774            NULL,   //Procs
    775            0   //n
    776          };
    777          

   \                                 In segment CODE, align 4, keep-with-next
    778          int CreateBookmarksMenu()
    779          {
   \                     CreateBookmarksMenu:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
    780            bookmarks_current_folder = NULL;
   \   00000004   98409FE5           LDR      R4,??CreateBookmarksMenu_0  ;; bookmarks_menu_sk
    781            char * bm_pic = getSymbolicPath("$resources\\bookmark.png");
   \   00000008   ........           LDR      R5,??DataTable19  ;; `?<Constant "...">`
   \   0000000C   0000A0E3           MOV      R0,#+0
   \   00000010   340084E5           STR      R0,[R4, #+52]
   \   00000014   1C0085E2           ADD      R0,R5,#+28
   \   00000018   ........           _BLF     getSymbolicPath,??getSymbolicPath??rA
   \   0000001C   0060A0E1           MOV      R6,R0
    782            char * dir_pic = getSymbolicPath("$resources\\folder.png");
   \   00000020   040085E2           ADD      R0,R5,#+4
   \   00000024   ........           _BLF     getSymbolicPath,??getSymbolicPath??rA
    783            bookmarks_menu_icons[0] = (int)bm_pic;
   \   00000028   2C6084E5           STR      R6,[R4, #+44]
    784            bookmarks_menu_icons[1] = (int)dir_pic;
   \   0000002C   300084E5           STR      R0,[R4, #+48]
    785            
    786            char * bookmarks_path = getSymbolicPath("$bookmarks\\");
   \   00000030   340085E2           ADD      R0,R5,#+52
   \   00000034   ........           _BLF     getSymbolicPath,??getSymbolicPath??rA
   \   00000038   0050A0E1           MOV      R5,R0
    787            patch_header(&bookmarks_menu_header);
   \   0000003C   180084E2           ADD      R0,R4,#+24
   \   00000040   ........           _BLF     patch_header,??patch_header??rA
    788            bookmarks_menu_sk[0].lgp_id=(int)lgpData[LGP_Options];
   \   00000044   ........           LDR      R0,??DataTable38  ;; lgpData
   \   00000048   C01090E5           LDR      R1,[R0, #+192]
   \   0000004C   041084E5           STR      R1,[R4, #+4]
    789            bookmarks_menu_sk[1].lgp_id=(int)lgpData[LGP_Cancel];
   \   00000050   701090E5           LDR      R1,[R0, #+112]
    790            bookmarks_menu_header.lgp_id=(int)lgpData[LGP_SelectBookmarkHeader];
   \   00000054   C40090E5           LDR      R0,[R0, #+196]
   \   00000058   0C1084E5           STR      R1,[R4, #+12]
   \   0000005C   240084E5           STR      R0,[R4, #+36]
    791            int gui_id = CreateMenu(0, 0, &bookmarks_menu_struct, &bookmarks_menu_header, 0, FindFiles(bookmarks_path), 0, 0);
   \   00000060   0500A0E1           MOV      R0,R5
   \   00000064   ........           BL       FindFiles
   \   00000068   0010A0E3           MOV      R1,#+0
   \   0000006C   02002DE9           PUSH     {R1}
   \   00000070   02002DE9           PUSH     {R1}
   \   00000074   01002DE9           PUSH     {R0}
   \   00000078   183084E2           ADD      R3,R4,#+24
   \   0000007C   3C2084E2           ADD      R2,R4,#+60
   \   00000080   0000A0E3           MOV      R0,#+0
   \   00000084   01002DE9           PUSH     {R0}
   \   00000088   520100EF           SWI      +338
   \   0000008C   0040A0E1           MOV      R4,R0
    792            mfree(bookmarks_path);
   \   00000090   0500A0E1           MOV      R0,R5
   \   00000094   150000EF           SWI      +21
    793            return gui_id;
   \   00000098   0400A0E1           MOV      R0,R4
   \   0000009C   10D08DE2           ADD      SP,SP,#+16
   \   000000A0   7080BDE8           POP      {R4-R6,PC}       ;; return
   \                     ??CreateBookmarksMenu_0:
   \   000000A4   ........           DC32     bookmarks_menu_sk
    794          }
    795          
    796          //--------------------------------- Search menu --------------------------------
    797          
    798          #define   MAX_SEARCH_ENGINES 32
    799          
    800          SOFTKEY_DESC search_menu_sk[]=
    801          {
    802            {0x0018,0x0000,(int)"Search"},
    803            {0x0001,0x0000,(int)"Cancel"},
    804            {0x003D,0x0000,(int)LGP_DOIT_PIC}
    805          };
    806          

   \                                 In segment DATA_C, align 4, align-sorted
    807          static const SOFTKEYSTAB search_menu_skt=
   \                     search_menu_skt:
   \   00000000   ........0000       DC32 search_menu_sk, 0
   \              0000        
    808          {
    809            search_menu_sk,0
    810          };
    811          
    812          static int search_engine_count=0;
    813          static int selected_search_engine=0;
    814          static char * search_engines[MAX_SEARCH_ENGINES];
    815          

   \                                 In segment CODE, align 4, keep-with-next
    816          static void free_search_engines()
    817          {
   \                     free_search_engines:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
    818            LockSched();
    819            char ** p=search_engines;
   \   00000004   ........           LDR      R4,??DataTable35  ;; search_menu_sk
   \   00000008   460100EF           SWI      +326
    820            for(int i=search_engine_count-1;i>=0;i--) mfree(*p++);
   \   0000000C   5C0094E5           LDR      R0,[R4, #+92]
   \   00000010   645084E2           ADD      R5,R4,#+100
   \   00000014   016050E2           SUBS     R6,R0,#+1
   \   00000018   0300004A           BMI      ??free_search_engines_0
   \                     ??free_search_engines_1:
   \   0000001C   ........           LDR      R0,[R5], #+4
   \   00000020   150000EF           SWI      +21
   \   00000024   016056E2           SUBS     R6,R6,#+1
   \   00000028   FBFFFF5A           BPL      ??free_search_engines_1
    821            search_engine_count=0;
   \                     ??free_search_engines_0:
   \   0000002C   0000A0E3           MOV      R0,#+0
   \   00000030   5C0084E5           STR      R0,[R4, #+92]
    822            UnlockSched();
   \   00000034   470100EF           SWI      +327
    823          };
   \   00000038   7080BDE8           POP      {R4-R6,PC}       ;; return
    824          

   \                                 In segment CODE, align 4, keep-with-next
    825          static void get_search_engines()
    826          {
   \                     get_search_engines:
   \   00000000   F0412DE9           PUSH     {R4-R8,LR}
    827            free_search_engines();  
    828                
    829            char **sep=search_engines;
   \   00000004   ........           LDR      R4,??DataTable35  ;; search_menu_sk
    830            unsigned int err;
    831            DIR_ENTRY de;
    832            char str[128];  
    833            
    834            char * search_path = getSymbolicPath("$search\\");
   \   00000008   ........           LDR      R7,??DataTable25  ;; `?<Constant "%s%s.url">`
   \   0000000C   F2DF4DE2           SUB      SP,SP,#+968
   \   00000010   ........           BL       free_search_engines
   \   00000014   645084E2           ADD      R5,R4,#+100
   \   00000018   140087E2           ADD      R0,R7,#+20
   \   0000001C   ........           _BLF     getSymbolicPath,??getSymbolicPath??rA
   \   00000020   0060A0E1           MOV      R6,R0
    835            char * s=search_path;
    836            strcpy(str,s);
   \   00000024   0610A0E1           MOV      R1,R6
   \   00000028   D20F8DE2           ADD      R0,SP,#+840
   \   0000002C   1A0000EF           SWI      +26
    837            strcat(str,"*.url");
   \   00000030   0C1087E2           ADD      R1,R7,#+12
   \   00000034   D20F8DE2           ADD      R0,SP,#+840
   \   00000038   170000EF           SWI      +23
    838            if (FindFirstFile(&de,str,&err))
   \   0000003C   0D20A0E1           MOV      R2,SP
   \   00000040   D21F8DE2           ADD      R1,SP,#+840
   \   00000044   04008DE2           ADD      R0,SP,#+4
   \   00000048   6B0000EF           SWI      +107
   \   0000004C   000050E3           CMP      R0,#+0
   \   00000050   1B00000A           BEQ      ??get_search_engines_0
    839            {
    840              do
    841              {
    842                if (!(de.file_attr&FA_DIRECTORY))
   \                     ??get_search_engines_1:
   \   00000054   F003DDE1           LDRSH    R0,[SP, #+48]
   \   00000058   100010E3           TST      R0,#0x10
   \   0000005C   1300001A           BNE      ??get_search_engines_2
    843                {
    844                  if(search_engine_count>=MAX_SEARCH_ENGINES) break;        
   \   00000060   5C0094E5           LDR      R0,[R4, #+92]
   \   00000064   200050E3           CMP      R0,#+32
   \   00000068   150000AA           BGE      ??get_search_engines_0
    845                  int l=strlen(de.file_name); 
   \   0000006C   B9008DE2           ADD      R0,SP,#+185
   \   00000070   1B0000EF           SWI      +27
   \   00000074   0080A0E1           MOV      R8,R0
    846                  char * s=malloc(strlen(de.file_name)+1);
   \   00000078   B9008DE2           ADD      R0,SP,#+185
   \   0000007C   1B0000EF           SWI      +27
   \   00000080   010080E2           ADD      R0,R0,#+1
   \   00000084   140000EF           SWI      +20
   \   00000088   0070A0E1           MOV      R7,R0
    847                  strcpy(s,de.file_name);
   \   0000008C   B9108DE2           ADD      R1,SP,#+185
   \   00000090   1A0000EF           SWI      +26
    848                  s[l-4]=0;
   \   00000094   070088E0           ADD      R0,R8,R7
   \   00000098   0010A0E3           MOV      R1,#+0
   \   0000009C   041040E5           STRB     R1,[R0, #-4]
    849                  search_engine_count++;
   \   000000A0   5C0094E5           LDR      R0,[R4, #+92]
   \   000000A4   010080E2           ADD      R0,R0,#+1
   \   000000A8   5C0084E5           STR      R0,[R4, #+92]
    850                  *sep++=s;
   \   000000AC   ........           STR      R7,[R5], #+4
    851                }
    852              }
    853              while(FindNextFile(&de,&err));
   \                     ??get_search_engines_2:
   \   000000B0   0D10A0E1           MOV      R1,SP
   \   000000B4   04008DE2           ADD      R0,SP,#+4
   \   000000B8   6C0000EF           SWI      +108
   \   000000BC   000050E3           CMP      R0,#+0
   \   000000C0   E3FFFF1A           BNE      ??get_search_engines_1
    854            }
    855            FindClose(&de, &err);
   \                     ??get_search_engines_0:
   \   000000C4   0D10A0E1           MOV      R1,SP
   \   000000C8   04008DE2           ADD      R0,SP,#+4
   \   000000CC   6D0000EF           SWI      +109
    856            mfree(search_path);
   \   000000D0   0600A0E1           MOV      R0,R6
   \   000000D4   150000EF           SWI      +21
    857            if(selected_search_engine>=search_engine_count) selected_search_engine=search_engine_count-1;
   \   000000D8   5C0094E5           LDR      R0,[R4, #+92]
   \   000000DC   601094E5           LDR      R1,[R4, #+96]
   \   000000E0   000051E1           CMP      R1,R0
   \   000000E4   010040A2           SUBGE    R0,R0,#+1
   \   000000E8   600084A5           STRGE    R0,[R4, #+96]
    858          };
   \   000000EC   F2DF8DE2           ADD      SP,SP,#+968
   \   000000F0   F081BDE8           POP      {R4-R8,PC}       ;; return
    859          

   \                                 In segment CODE, align 4, keep-with-next
    860          void search_menu_locret(void){}
   \                     search_menu_locret:
   \   00000000   1EFF2FE1           BX       LR               ;; return
    861          

   \                                 In segment CODE, align 4, keep-with-next
    862          int search_menu_onkey(GUI *data, GUI_MSG *msg)
    863          {
   \                     search_menu_onkey:
   \   00000000   F04F2DE9           PUSH     {R4-R11,LR}
   \   00000004   57DF4DE2           SUB      SP,SP,#+348
    864            EDITCONTROL ec;
    865            if (msg->keys==0xFFF)
   \   00000008   F210D1E1           LDRSH    R1,[R1, #+2]
   \   0000000C   FF20A0E3           MOV      R2,#+255
   \   00000010   F02E82E3           ORR      R2,R2,#0xF00
   \   00000014   020051E1           CMP      R1,R2
   \   00000018   CA00001A           BNE      ??search_menu_onkey_0
    866            {
    867              if(selected_search_engine<0)return 0;
   \   0000001C   ........           LDR      R4,??DataTable35  ;; search_menu_sk
   \   00000020   601094E5           LDR      R1,[R4, #+96]
   \   00000024   000051E3           CMP      R1,#+0
   \   00000028   C600004A           BMI      ??search_menu_onkey_0
    868          
    869              //query
    870              ExtractEditControl(data,2,&ec);
   \   0000002C   422F8DE2           ADD      R2,SP,#+264
    871              WSHDR *ws = ec.pWS;
    872              wstrcpy(search_inet_string, ws);
    873              int ql=ws->wsbody[0];
    874              
    875              //read url file    
    876              int f,fsize;
    877              unsigned int err;
    878              
    879              char *s, *url;
    880              FSTATS stat;
    881              char url_file[256];
    882              
    883              char * search_path = getSymbolicPath("$search\\");
   \   00000030   ........           LDR      R5,??DataTable25  ;; `?<Constant "%s%s.url">`
   \   00000034   0210A0E3           MOV      R1,#+2
   \   00000038   690100EF           SWI      +361
   \   0000003C   30719DE5           LDR      R7,[SP, #+304]
   \   00000040   ........           LDR      R0,??DataTable31  ;; search_inet_string
   \   00000044   0710A0E1           MOV      R1,R7
   \   00000048   000090E5           LDR      R0,[R0, #+0]
   \   0000004C   1F0100EF           SWI      +287
   \   00000050   000097E5           LDR      R0,[R7, #+0]
   \   00000054   B080D0E1           LDRH     R8,[R0, #+0]
   \   00000058   140085E2           ADD      R0,R5,#+20
   \   0000005C   ........           _BLF     getSymbolicPath,??getSymbolicPath??rA
   \   00000060   0060A0E1           MOV      R6,R0
    884              const char* _ss = "%s%s.url";
    885              sprintf(url_file,_ss, search_path, search_engines[selected_search_engine]);
   \   00000064   600094E5           LDR      R0,[R4, #+96]
   \   00000068   0620A0E1           MOV      R2,R6
   \   0000006C   000184E0           ADD      R0,R4,R0, LSL #+2
   \   00000070   643090E5           LDR      R3,[R0, #+100]
   \   00000074   0510A0E1           MOV      R1,R5
   \   00000078   08008DE2           ADD      R0,SP,#+8
   \   0000007C   160000EF           SWI      +22
    886              mfree(search_path);
   \   00000080   0600A0E1           MOV      R0,R6
   \   00000084   150000EF           SWI      +21
    887              if (GetFileStats(url_file,&stat,&err)==-1) goto fail;
   \   00000088   0050E0E3           MVN      R5,#+0
   \   0000008C   0D20A0E1           MOV      R2,SP
   \   00000090   4D1F8DE2           ADD      R1,SP,#+308
   \   00000094   08008DE2           ADD      R0,SP,#+8
   \   00000098   840000EF           SWI      +132
   \   0000009C   050050E1           CMP      R0,R5
   \   000000A0   A400000A           BEQ      ??search_menu_onkey_1
    888              if ((fsize=stat.size)<=0)  goto fail;
   \   000000A4   38419DE5           LDR      R4,[SP, #+312]
   \   000000A8   010054E3           CMP      R4,#+1
   \   000000AC   A10000BA           BLT      ??search_menu_onkey_1
    889              if ((f=fopen(url_file,A_ReadOnly+A_BIN,P_READ,&err))==-1) goto fail;    
   \   000000B0   0D30A0E1           MOV      R3,SP
   \   000000B4   8020A0E3           MOV      R2,#+128
   \   000000B8   801CA0E3           MOV      R1,#+32768
   \   000000BC   08008DE2           ADD      R0,SP,#+8
   \   000000C0   0A0000EF           SWI      +10
   \   000000C4   0060A0E1           MOV      R6,R0
   \   000000C8   050056E1           CMP      R6,R5
   \   000000CC   9900000A           BEQ      ??search_menu_onkey_1
    890              
    891              url=(char*)malloc(fsize+1);
   \   000000D0   010084E2           ADD      R0,R4,#+1
   \   000000D4   140000EF           SWI      +20
   \   000000D8   0050A0E1           MOV      R5,R0
   \   000000DC   0D30A0E1           MOV      R3,SP
   \   000000E0   0420A0E1           MOV      R2,R4
   \   000000E4   0510A0E1           MOV      R1,R5
   \   000000E8   0600A0E1           MOV      R0,R6
    892              url[fread(f,url,fsize,&err)]=0;    
   \   000000EC   0B0000EF           SWI      +11
   \   000000F0   0010A0E3           MOV      R1,#+0
   \   000000F4   0510C0E7           STRB     R1,[R0, +R5]
    893              fclose(f,&err);  
   \   000000F8   0D10A0E1           MOV      R1,SP
   \   000000FC   0600A0E1           MOV      R0,R6
   \   00000100   0D0000EF           SWI      +13
    894              s=url;
   \   00000104   0500A0E1           MOV      R0,R5
   \   00000108   0010D0E5           LDRB     R1,[R0, #+0]
   \   0000010C   210051E3           CMP      R1,#+33
   \   00000110   0200003A           BCC      ??search_menu_onkey_2
    895              while(*s>32) s++;
   \                     ??search_menu_onkey_3:
   \   00000114   0110F0E5           LDRB     R1,[R0, #+1]!
   \   00000118   210051E3           CMP      R1,#+33
   \   0000011C   FCFFFF2A           BCS      ??search_menu_onkey_3
    896              *s=0;
    897              fsize=strlen(url);
    898              
    899              //build search url
    900              _safe_free(goto_url);
   \                     ??search_menu_onkey_2:
   \   00000120   ........           LDR      R6,??DataTable27  ;; goto_url
   \   00000124   0010A0E3           MOV      R1,#+0
   \   00000128   0010C0E5           STRB     R1,[R0, #+0]
   \   0000012C   0500A0E1           MOV      R0,R5
   \   00000130   1B0000EF           SWI      +27
   \   00000134   0040A0E1           MOV      R4,R0
   \   00000138   000096E5           LDR      R0,[R6, #+0]
   \   0000013C   000050E3           CMP      R0,#+0
   \   00000140   0100000A           BEQ      ??search_menu_onkey_4
   \   00000144   150000EF           SWI      +21
   \   00000148   0000A0E3           MOV      R0,#+0
   \                     ??search_menu_onkey_4:
   \   0000014C   000086E5           STR      R0,[R6, #+0]
    901              goto_url=malloc(2+fsize+6*ql+2);    
   \   00000150   0600A0E3           MOV      R0,#+6
   \   00000154   904821E0           MLA      R1,R0,R8,R4
   \   00000158   040081E2           ADD      R0,R1,#+4
   \   0000015C   140000EF           SWI      +20
   \   00000160   000086E5           STR      R0,[R6, #+0]
    902              goto_url[0]='0';
   \   00000164   3010A0E3           MOV      R1,#+48
   \   00000168   0010C0E5           STRB     R1,[R0, #+0]
    903              goto_url[1]='/';          
   \   0000016C   000096E5           LDR      R0,[R6, #+0]
   \   00000170   2F10A0E3           MOV      R1,#+47
   \   00000174   0110C0E5           STRB     R1,[R0, #+1]
    904              
    905              s=strstr(url, "%s");
   \   00000178   751F8FE2           ADR      R1,??search_menu_onkey_5  ;; "%s"
   \   0000017C   0500A0E1           MOV      R0,R5
   \   00000180   180100EF           SWI      +280
   \   00000184   000050E3           CMP      R0,#+0
   \   00000188   3400000A           BEQ      ??search_menu_onkey_6
    906              char* ts;
    907              if(s)
    908              {
    909                int ofs=s-url;
   \   0000018C   059040E0           SUB      R9,R0,R5
    910                memcpy(goto_url+2,url,ofs);
   \   00000190   000096E5           LDR      R0,[R6, #+0]
   \   00000194   0920A0E1           MOV      R2,R9
   \   00000198   0510A0E1           MOV      R1,R5
   \   0000019C   020080E2           ADD      R0,R0,#+2
   \   000001A0   1E0100EF           SWI      +286
    911                s=goto_url+2+ofs;
   \   000001A4   000096E5           LDR      R0,[R6, #+0]
    912                for (int i=0; i<ql; i++) *s++=char16to8(ws->wsbody[i+1]);
   \   000001A8   00B0A0E3           MOV      R11,#+0
   \   000001AC   000089E0           ADD      R0,R9,R0
   \   000001B0   02A080E2           ADD      R10,R0,#+2
   \   000001B4   010058E3           CMP      R8,#+1
   \   000001B8   060000AA           BGE      ??search_menu_onkey_7
   \   000001BC   070000EA           B        ??search_menu_onkey_8
   \                     ??search_menu_onkey_9:
   \   000001C0   000097E5           LDR      R0,[R7, #+0]
   \   000001C4   8B0080E0           ADD      R0,R0,R11, LSL #+1
   \   000001C8   B200D0E1           LDRH     R0,[R0, #+2]
   \   000001CC   01B08BE2           ADD      R11,R11,#+1
   \   000001D0   ........           _BLF     char16to8,??char16to8??rA
   \   000001D4   ........           STRB     R0,[R10], #+1
   \                     ??search_menu_onkey_7:
   \   000001D8   08005BE1           CMP      R11,R8
   \   000001DC   F7FFFFBA           BLT      ??search_menu_onkey_9
    913                *s = 0;
   \                     ??search_menu_onkey_8:
   \   000001E0   0000A0E3           MOV      R0,#+0
   \   000001E4   0000CAE5           STRB     R0,[R10, #+0]
    914                ts = malloc(ql+1);
   \   000001E8   010088E2           ADD      R0,R8,#+1
   \   000001EC   140000EF           SWI      +20
   \   000001F0   0070A0E1           MOV      R7,R0
    915                strcpy(ts,goto_url+2+ofs);
   \   000001F4   000096E5           LDR      R0,[R6, #+0]
   \   000001F8   000089E0           ADD      R0,R9,R0
   \   000001FC   021080E2           ADD      R1,R0,#+2
   \   00000200   0700A0E1           MOV      R0,R7
   \   00000204   1A0000EF           SWI      +26
    916                ts = ToWeb(ts,1,0);
   \   00000208   0020A0E3           MOV      R2,#+0
   \   0000020C   0110A0E3           MOV      R1,#+1
   \   00000210   0700A0E1           MOV      R0,R7
   \   00000214   ........           _BLF     ToWeb,??ToWeb??rA
   \   00000218   0070A0E1           MOV      R7,R0
    917                memcpy(goto_url+2+ofs,ts,strlen(ts));
   \   0000021C   1B0000EF           SWI      +27
   \   00000220   0020A0E1           MOV      R2,R0
   \   00000224   000096E5           LDR      R0,[R6, #+0]
   \   00000228   0710A0E1           MOV      R1,R7
   \   0000022C   000089E0           ADD      R0,R9,R0
   \   00000230   020080E2           ADD      R0,R0,#+2
   \   00000234   1E0100EF           SWI      +286
    918                memcpy(goto_url+2+ofs+strlen(ts),url+ofs+2,fsize-ofs-1);
   \   00000238   0700A0E1           MOV      R0,R7
   \   0000023C   1B0000EF           SWI      +27
   \   00000240   003096E5           LDR      R3,[R6, #+0]
   \   00000244   091044E0           SUB      R1,R4,R9
   \   00000248   012041E2           SUB      R2,R1,#+1
   \   0000024C   051089E0           ADD      R1,R9,R5
   \   00000250   021081E2           ADD      R1,R1,#+2
   \   00000254   033089E0           ADD      R3,R9,R3
   \   00000258   030080E0           ADD      R0,R0,R3
   \   0000025C   270000EA           B        ??search_menu_onkey_10
    919              }
    920              else
    921              {
    922                memcpy(goto_url+2,url,fsize);  
   \                     ??search_menu_onkey_6:
   \   00000260   000096E5           LDR      R0,[R6, #+0]
   \   00000264   0420A0E1           MOV      R2,R4
   \   00000268   0510A0E1           MOV      R1,R5
   \   0000026C   020080E2           ADD      R0,R0,#+2
   \   00000270   1E0100EF           SWI      +286
    923                s=goto_url+2+fsize;
   \   00000274   000096E5           LDR      R0,[R6, #+0]
    924                for (int i=0; i<ql; i++) *s++=char16to8(ws->wsbody[i+1]);
   \   00000278   0090A0E3           MOV      R9,#+0
   \   0000027C   000084E0           ADD      R0,R4,R0
   \   00000280   02A080E2           ADD      R10,R0,#+2
   \   00000284   010058E3           CMP      R8,#+1
   \   00000288   060000AA           BGE      ??search_menu_onkey_11
   \   0000028C   070000EA           B        ??search_menu_onkey_12
   \                     ??search_menu_onkey_13:
   \   00000290   000097E5           LDR      R0,[R7, #+0]
   \   00000294   890080E0           ADD      R0,R0,R9, LSL #+1
   \   00000298   B200D0E1           LDRH     R0,[R0, #+2]
   \   0000029C   019089E2           ADD      R9,R9,#+1
   \   000002A0   ........           _BLF     char16to8,??char16to8??rA
   \   000002A4   ........           STRB     R0,[R10], #+1
   \                     ??search_menu_onkey_11:
   \   000002A8   080059E1           CMP      R9,R8
   \   000002AC   F7FFFFBA           BLT      ??search_menu_onkey_13
    925                *s = 0;
   \                     ??search_menu_onkey_12:
   \   000002B0   0000A0E3           MOV      R0,#+0
   \   000002B4   0000CAE5           STRB     R0,[R10, #+0]
    926                ts = malloc(ql+1);
   \   000002B8   010088E2           ADD      R0,R8,#+1
   \   000002BC   140000EF           SWI      +20
   \   000002C0   0070A0E1           MOV      R7,R0
    927                strcpy(ts,goto_url+2+fsize);
   \   000002C4   000096E5           LDR      R0,[R6, #+0]
   \   000002C8   000084E0           ADD      R0,R4,R0
   \   000002CC   021080E2           ADD      R1,R0,#+2
   \   000002D0   0700A0E1           MOV      R0,R7
   \   000002D4   1A0000EF           SWI      +26
    928                ts = ToWeb(ts,1,0);
   \   000002D8   0020A0E3           MOV      R2,#+0
   \   000002DC   0110A0E3           MOV      R1,#+1
   \   000002E0   0700A0E1           MOV      R0,R7
   \   000002E4   ........           _BLF     ToWeb,??ToWeb??rA
   \   000002E8   0070A0E1           MOV      R7,R0
    929                memcpy(goto_url+2+fsize,ts,strlen(ts)+1);
   \   000002EC   1B0000EF           SWI      +27
   \   000002F0   012080E2           ADD      R2,R0,#+1
   \   000002F4   000096E5           LDR      R0,[R6, #+0]
   \   000002F8   0710A0E1           MOV      R1,R7
   \   000002FC   000084E0           ADD      R0,R4,R0
   \                     ??search_menu_onkey_10:
   \   00000300   020080E2           ADD      R0,R0,#+2
   \   00000304   1E0100EF           SWI      +286
    930              };  
    931              mfree(ts);
   \   00000308   0700A0E1           MOV      R0,R7
   \   0000030C   150000EF           SWI      +21
    932              mfree(url);
   \   00000310   0500A0E1           MOV      R0,R5
   \   00000314   150000EF           SWI      +21
    933              goto_url = ToWeb(goto_url,0,0);
   \   00000318   000096E5           LDR      R0,[R6, #+0]
   \   0000031C   0020A0E3           MOV      R2,#+0
   \   00000320   0010A0E3           MOV      R1,#+0
   \   00000324   ........           _BLF     ToWeb,??ToWeb??rA
   \   00000328   000086E5           STR      R0,[R6, #+0]
    934              
    935              return (0xFF);     
   \   0000032C   FF00A0E3           MOV      R0,#+255
   \   00000330   57DF8DE2           ADD      SP,SP,#+348
   \   00000334   F08FBDE8           POP      {R4-R11,PC}
    936              
    937            fail:
    938              ShowMSG(2,(int)lgpData[LGP_Error]);
   \                     ??search_menu_onkey_1:
   \   00000338   ........           LDR      R0,??DataTable28  ;; lgpData + 24
   \   0000033C   001090E5           LDR      R1,[R0, #+0]
   \   00000340   0200A0E3           MOV      R0,#+2
   \   00000344   480100EF           SWI      +328
    939              return (0);
   \                     ??search_menu_onkey_0:
   \   00000348   0000A0E3           MOV      R0,#+0
   \   0000034C   57DF8DE2           ADD      SP,SP,#+348
   \   00000350   F08FBDE8           POP      {R4-R11,PC}      ;; return
   \                     ??search_menu_onkey_5:
   \   00000354   25730000           DC8      "%s",+0
    940            }
    941            return (0);
    942          }
    943          

   \                                 In segment CODE, align 4, keep-with-next
    944          void search_menu_ghook(GUI *data, int cmd)
    945          {
    946            SOFTKEY_DESC sk={0x0FFF,0x0000,(int)lgpData[LGP_Search]};
   \                     search_menu_ghook:
   \   00000000   D4209FE5           LDR      R2,??search_menu_ghook_0  ;; `?<Constant {4095, 0, 0}>_3`
   \   00000004   70402DE9           PUSH     {R4-R6,LR}
   \   00000008   08D04DE2           SUB      SP,SP,#+8
   \   0000000C   0C0092E8           LDM      R2,{R2,R3}
   \   00000010   0040A0E1           MOV      R4,R0
   \   00000014   0D00A0E1           MOV      R0,SP
   \   00000018   0C0080E8           STM      R0,{R2,R3}
   \   0000001C   BC209FE5           LDR      R2,??search_menu_ghook_0+0x4  ;; lgpData + 252
    947            
    948            if(cmd == TI_CMD_DESTROY)
   \   00000020   030051E3           CMP      R1,#+3
   \   00000024   002092E5           LDR      R2,[R2, #+0]
   \   00000028   04208DE5           STR      R2,[SP, #+4]
   \   0000002C   0100001A           BNE      ??search_menu_ghook_1
    949            {
    950              free_search_engines();
   \   00000030   ........           BL       free_search_engines
   \   00000034   7380BDE8           POP      {R0,R1,R4-R6,PC}
    951            }
    952            if (cmd == TI_CMD_REDRAW)
   \                     ??search_menu_ghook_1:
   \   00000038   070051E3           CMP      R1,#+7
   \   0000003C   0400001A           BNE      ??search_menu_ghook_2
    953            {
    954              SetSoftKey(data,&sk,SET_SOFT_KEY_N);
   \   00000040   0020A0E3           MOV      R2,#+0
   \   00000044   0D10A0E1           MOV      R1,SP
   \   00000048   0400A0E1           MOV      R0,R4
   \   0000004C   680100EF           SWI      +360
   \   00000050   7380BDE8           POP      {R0,R1,R4-R6,PC}
    955            }
    956            if (cmd == TI_CMD_FOCUS)
   \                     ??search_menu_ghook_2:
   \   00000054   0A0051E3           CMP      R1,#+10
   \   00000058   0100001A           BNE      ??search_menu_ghook_3
    957            {
    958              DisableIDLETMR();
   \   0000005C   7F0100EF           SWI      +383
   \   00000060   7380BDE8           POP      {R0,R1,R4-R6,PC}
    959            }
    960            if (cmd == TI_CMD_COMBOBOX_FOCUS)
   \                     ??search_menu_ghook_3:
   \   00000064   0D0051E3           CMP      R1,#+13
   \   00000068   7380BD18           POPNE    {R0,R1,R4-R6,PC}
    961            {
    962              int cbi=EDIT_GetFocus(data);
    963              if(cbi==4)
   \   0000006C   0400A0E1           MOV      R0,R4
   \   00000070   820100EF           SWI      +386
   \   00000074   040050E3           CMP      R0,#+4
   \   00000078   7380BD18           POPNE    {R0,R1,R4-R6,PC}
    964              {
    965                WSHDR * ews=AllocWS(128);    
    966                selected_search_engine=EDIT_GetItemNumInFocusedComboBox(data)-1;
   \   0000007C   ........           LDR      R6,??DataTable35  ;; search_menu_sk
   \   00000080   8000A0E3           MOV      R0,#+128
   \   00000084   250100EF           SWI      +293
   \   00000088   0050A0E1           MOV      R5,R0
   \   0000008C   0400A0E1           MOV      R0,R4
   \   00000090   800100EF           SWI      +384
   \   00000094   010040E2           SUB      R0,R0,#+1
   \   00000098   600086E5           STR      R0,[R6, #+96]
    967                if(selected_search_engine>=0&&selected_search_engine<search_engine_count)
   \   0000009C   000050E3           CMP      R0,#+0
   \   000000A0   0A00004A           BMI      ??search_menu_ghook_4
   \   000000A4   5C1096E5           LDR      R1,[R6, #+92]
   \   000000A8   010050E1           CMP      R0,R1
   \   000000AC   070000AA           BGE      ??search_menu_ghook_4
    968                {
    969                  str_2ws(ews,search_engines[selected_search_engine],128);
   \   000000B0   8020A0E3           MOV      R2,#+128
   \   000000B4   000186E0           ADD      R0,R6,R0, LSL #+2
   \   000000B8   641090E5           LDR      R1,[R0, #+100]
   \   000000BC   0500A0E1           MOV      R0,R5
   \   000000C0   6C0100EF           SWI      +364
    970                  EDIT_SetTextToFocused(data,ews);
   \   000000C4   0510A0E1           MOV      R1,R5
   \   000000C8   0400A0E1           MOV      R0,R4
   \   000000CC   810100EF           SWI      +385
    971                };
    972                FreeWS(ews);
   \                     ??search_menu_ghook_4:
   \   000000D0   0500A0E1           MOV      R0,R5
   \   000000D4   290100EF           SWI      +297
    973              };
    974            }
    975          }
   \   000000D8   7380BDE8           POP      {R0,R1,R4-R6,PC}  ;; return
   \                     ??search_menu_ghook_0:
   \   000000DC   ........           DC32     `?<Constant {4095, 0, 0}>_3`
   \   000000E0   ........           DC32     lgpData + 252
    976          
    977          HEADER_DESC search_menu_header={0,0,0,0,NULL,(int)"Search:",0x7FFFFFFF};
    978          
    979          INPUTDIA_DESC search_menu_struct=
    980          {
    981            1,
    982            search_menu_onkey,
    983            search_menu_ghook,
    984            (void *)search_menu_locret,
    985            0,
    986            &search_menu_skt,
    987            {0,0,0,0},
    988            FONT_SMALL,
    989            100,
    990            101,
    991            0,
    992            0,
    993            0x40000000
    994          };
    995          
    996          

   \                                 In segment CODE, align 4, keep-with-next
    997          static int CreateSearchDialog()
    998          {
   \                     CreateSearchDialog:
   \   00000000   F0412DE9           PUSH     {R4-R8,LR}
    999            get_search_engines();
   1000          
   1001            void *ma=malloc_adr();
   1002            void *eq;
   1003            EDITCONTROL ec;
   1004          
   1005            WSHDR * ews=AllocWS(1024);
   1006          
   1007            PrepareEditControl(&ec);
   1008            eq=AllocEQueue(ma,mfree_adr());
   1009          
   1010            ascii2ws(ews,lgpData[LGP_TextHeader]);
   \   00000004   ........           LDR      R7,??DataTable38  ;; lgpData
   1011            ConstructEditControl(&ec,ECT_HEADER,ECF_APPEND_EOL,ews,1024);
   1012            AddEditControlToEditQend(eq,&ec,ma);
   1013          
   1014            wstrcpy(ews,search_inet_string);
   1015            ConstructEditControl(&ec,ECT_NORMAL_TEXT,ECF_APPEND_EOL,ews,1024);
   1016            AddEditControlToEditQend(eq,&ec,ma);
   1017            
   1018            ascii2ws(ews,lgpData[LGP_SearchEngine]);
   1019            ConstructEditControl(&ec,ECT_HEADER,ECF_APPEND_EOL,ews,1024);
   1020            AddEditControlToEditQend(eq,&ec,ma);
   1021            
   1022            wsprintf(ews,sEmpty);
   \   00000008   88819FE5           LDR      R8,??CreateSearchDialog_0  ;; search_menu_sk
   \   0000000C   2CD04DE2           SUB      SP,SP,#+44
   \   00000010   ........           BL       get_search_engines
   \   00000014   148000EF           SWI      +32788
   \   00000018   0040A0E1           MOV      R4,R0
   \   0000001C   400EA0E3           MOV      R0,#+1024
   \   00000020   250100EF           SWI      +293
   \   00000024   0050A0E1           MOV      R5,R0
   \   00000028   0D00A0E1           MOV      R0,SP
   \   0000002C   640100EF           SWI      +356
   \   00000030   158000EF           SWI      +32789
   \   00000034   0010A0E1           MOV      R1,R0
   \   00000038   0400A0E1           MOV      R0,R4
   \   0000003C   630100EF           SWI      +355
   \   00000040   801097E5           LDR      R1,[R7, #+128]
   \   00000044   0060A0E1           MOV      R6,R0
   \   00000048   0500A0E1           MOV      R0,R5
   \   0000004C   ........           _BLF     ascii2ws,??ascii2ws??rA
   \   00000050   400EA0E3           MOV      R0,#+1024
   \   00000054   01002DE9           PUSH     {R0}
   \   00000058   0530A0E1           MOV      R3,R5
   \   0000005C   4020A0E3           MOV      R2,#+64
   \   00000060   0110A0E3           MOV      R1,#+1
   \   00000064   04008DE2           ADD      R0,SP,#+4
   \   00000068   650100EF           SWI      +357
   \   0000006C   0420A0E1           MOV      R2,R4
   \   00000070   04108DE2           ADD      R1,SP,#+4
   \   00000074   0600A0E1           MOV      R0,R6
   \   00000078   660100EF           SWI      +358
   \   0000007C   ........           LDR      R0,??DataTable31  ;; search_inet_string
   \   00000080   001090E5           LDR      R1,[R0, #+0]
   \   00000084   0500A0E1           MOV      R0,R5
   \   00000088   1F0100EF           SWI      +287
   \   0000008C   400EA0E3           MOV      R0,#+1024
   \   00000090   01002DE9           PUSH     {R0}
   \   00000094   0530A0E1           MOV      R3,R5
   \   00000098   4020A0E3           MOV      R2,#+64
   \   0000009C   0310A0E3           MOV      R1,#+3
   \   000000A0   08008DE2           ADD      R0,SP,#+8
   \   000000A4   650100EF           SWI      +357
   \   000000A8   0420A0E1           MOV      R2,R4
   \   000000AC   08108DE2           ADD      R1,SP,#+8
   \   000000B0   0600A0E1           MOV      R0,R6
   \   000000B4   660100EF           SWI      +358
   \   000000B8   841097E5           LDR      R1,[R7, #+132]
   \   000000BC   0500A0E1           MOV      R0,R5
   \   000000C0   ........           _BLF     ascii2ws,??ascii2ws??rA
   \   000000C4   400EA0E3           MOV      R0,#+1024
   \   000000C8   01002DE9           PUSH     {R0}
   \   000000CC   0530A0E1           MOV      R3,R5
   \   000000D0   4020A0E3           MOV      R2,#+64
   \   000000D4   0110A0E3           MOV      R1,#+1
   \   000000D8   0C008DE2           ADD      R0,SP,#+12
   \   000000DC   650100EF           SWI      +357
   \   000000E0   0420A0E1           MOV      R2,R4
   \   000000E4   0C108DE2           ADD      R1,SP,#+12
   \   000000E8   0600A0E1           MOV      R0,R6
   \   000000EC   660100EF           SWI      +358
   \   000000F0   581098E5           LDR      R1,[R8, #+88]
   \   000000F4   0500A0E1           MOV      R0,R5
   \   000000F8   240100EF           SWI      +292
   1023            ConstructComboBox(&ec,7,ECF_APPEND_EOL,ews,32,0,search_engine_count,selected_search_engine+1);
   \   000000FC   600098E5           LDR      R0,[R8, #+96]
   \   00000100   0530A0E1           MOV      R3,R5
   \   00000104   010080E2           ADD      R0,R0,#+1
   \   00000108   01002DE9           PUSH     {R0}
   \   0000010C   5C0098E5           LDR      R0,[R8, #+92]
   \   00000110   4020A0E3           MOV      R2,#+64
   \   00000114   01002DE9           PUSH     {R0}
   \   00000118   0710A0E3           MOV      R1,#+7
   \   0000011C   0000A0E3           MOV      R0,#+0
   \   00000120   01002DE9           PUSH     {R0}
   \   00000124   2000A0E3           MOV      R0,#+32
   \   00000128   01002DE9           PUSH     {R0}
   \   0000012C   1C008DE2           ADD      R0,SP,#+28
   \   00000130   840100EF           SWI      +388
   1024            AddEditControlToEditQend(eq,&ec,ma);
   \   00000134   0420A0E1           MOV      R2,R4
   \   00000138   1C108DE2           ADD      R1,SP,#+28
   \   0000013C   0600A0E1           MOV      R0,R6
   \   00000140   660100EF           SWI      +358
   1025            
   1026            FreeWS(ews);
   \   00000144   0500A0E1           MOV      R0,R5
   \   00000148   290100EF           SWI      +297
   1027            patch_header(&search_menu_header);
   \   0000014C   180088E2           ADD      R0,R8,#+24
   \   00000150   ........           _BLF     patch_header,??patch_header??rA
   1028            patch_input(&search_menu_struct);
   \   00000154   E40088E2           ADD      R0,R8,#+228
   \   00000158   ........           _BLF     patch_input,??patch_input??rA
   1029            search_menu_sk[0].lgp_id=(int)lgpData[LGP_Search];
   \   0000015C   FC0097E5           LDR      R0,[R7, #+252]
   1030            search_menu_sk[1].lgp_id=(int)lgpData[LGP_Cancel];
   1031            search_menu_header.lgp_id=(int)lgpData[LGP_SearchHeader];
   1032            return CreateInputTextDialog(&search_menu_struct, &search_menu_header, eq, 1, 0);  
   \   00000160   0130A0E3           MOV      R3,#+1
   \   00000164   040088E5           STR      R0,[R8, #+4]
   \   00000168   700097E5           LDR      R0,[R7, #+112]
   \   0000016C   0620A0E1           MOV      R2,R6
   \   00000170   0C0088E5           STR      R0,[R8, #+12]
   \   00000174   C80097E5           LDR      R0,[R7, #+200]
   \   00000178   181088E2           ADD      R1,R8,#+24
   \   0000017C   240088E5           STR      R0,[R8, #+36]
   \   00000180   0000A0E3           MOV      R0,#+0
   \   00000184   01002DE9           PUSH     {R0}
   \   00000188   E40088E2           ADD      R0,R8,#+228
   \   0000018C   670100EF           SWI      +359
   \   00000190   4CD08DE2           ADD      SP,SP,#+76
   \   00000194   F081BDE8           POP      {R4-R8,PC}       ;; return
   \                     ??CreateSearchDialog_0:
   \   00000198   ........           DC32     search_menu_sk
   1033          };
   1034          
   1035          //--------------------------------Find string menu------------------------------
   1036          SOFTKEY_DESC find_box_menu_sk[]=
   1037          {
   1038            {0x0018,0x0000,(int)"Ok"},
   1039            {0x0001,0x0000,(int)"Cancel"},
   1040            {0x003D,0x0000,(int)LGP_DOIT_PIC}
   1041          };
   1042          

   \                                 In segment DATA_C, align 4, align-sorted
   1043          static const SOFTKEYSTAB find_box_menu_skt=
   \                     find_box_menu_skt:
   \   00000000   ........0000       DC32 find_box_menu_sk, 0
   \              0000        

   \                                 In segment DATA_I, align 4, align-sorted
   \                     search_menu_sk:
   \   00000000                      DS8 24
   \   00000018                      REQUIRE `?<Initializer for search_menu_sk>`
   \                     search_menu_header:
   \   00000018                      DS8 20
   \   0000002C                      REQUIRE `?<Initializer for search_menu_header>`
   \                     find_box_menu_sk:
   \   0000002C                      DS8 24
   \   00000044                      REQUIRE `?<Initializer for find_box_menu_sk>`
   1044          {
   1045            find_box_menu_sk,0
   1046          };
   1047          
   1048          HEADER_DESC find_box_hdr={0,0,0,0,NULL,(int)"Find:",LGP_NULL};
   \                     find_box_hdr:
   \   00000044                      DS8 20
   \   00000058                      REQUIRE `?<Initializer for find_box_hdr>`
   \                     sEmpty:
   \   00000058                      DS8 4
   \   0000005C                      REQUIRE `?<Initializer for sEmpty>`
   \   0000005C                      DS8 4
   \   00000060                      REQUIRE `?<Initializer for search_engine_count>`
   \   00000060                      DS8 4
   \   00000064                      REQUIRE `?<Initializer for selected_search_engine>`
   \   00000064                      DS8 128
   \   000000E4                      REQUIRE `?<Initializer for search_engines>`
   \                     search_menu_struct:
   \   000000E4                      DS8 56
   \   0000011C                      REQUIRE `?<Initializer for search_menu_struct>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     ext_url:
   \   00000000                      DS8 4
   \   00000004                      REQUIRE `?<Initializer for ext_url>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     bookmarks_menu_sk:
   \   00000000                      DS8 24
   \   00000018                      REQUIRE `?<Initializer for bookmarks_menu_sk>`
   \                     bookmarks_menu_header:
   \   00000018                      DS8 20
   \   0000002C                      REQUIRE `?<Initializer for bookmarks_menu_header>`
   \                     bookmarks_menu_icons:
   \   0000002C                      DS8 8
   \   00000034                      REQUIRE `?<Initializer for bookmarks_menu_icons>`
   \                     bookmarks_current_folder:
   \   00000034                      DS8 4
   \   00000038                      REQUIRE `?<Initializer for bookmarks_current_folder>`
   \                     bl_top:
   \   00000038                      DS8 4
   \   0000003C                      REQUIRE `?<Initializer for bl_top>`
   \                     bookmarks_menu_struct:
   \   0000003C                      DS8 44
   \   00000068                      REQUIRE `?<Initializer for bookmarks_menu_struct>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     edit_bookmark_hdr:
   \   00000000                      DS8 20
   \   00000014                      REQUIRE `?<Initializer for edit_bookmark_hdr>`
   \                     edit_mode:
   \   00000014                      DS8 1
   \   00000015                      REQUIRE `?<Initializer for edit_mode>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     edit_bookmark_sk:
   \   00000000                      DS8 24
   \   00000018                      REQUIRE `?<Initializer for edit_bookmark_sk>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     bookmarks_options_items:
   \   00000000                      DS8 112
   \   00000070                      REQUIRE `?<Initializer for bookmarks_options_items>`
   \                     bookmarks_options_header:
   \   00000070                      DS8 20
   \   00000084                      REQUIRE `?<Initializer for bookmarks_options_header>`
   \                     bookmarks_options_sk:
   \   00000084                      DS8 24
   \   0000009C                      REQUIRE `?<Initializer for bookmarks_options_sk>`
   \                     bookmarks_options_struct:
   \   0000009C                      DS8 44
   \   000000C8                      REQUIRE `?<Initializer for bookmarks_options_struct>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     bookmarks_options_softkeys:
   \   00000000                      DS8 12
   \   0000000C                      REQUIRE `?<Initializer for bookmarks_options_softkeys>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     bookmarks_options_skt:
   \   00000000                      DS8 8
   \   00000008                      REQUIRE `?<Initializer for bookmarks_options_skt>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     bookmarks_menu_softkeys:
   \   00000000                      DS8 12
   \   0000000C                      REQUIRE `?<Initializer for bookmarks_menu_softkeys>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     bookmarks_menu_skt:
   \   00000000                      DS8 8
   \   00000008                      REQUIRE `?<Initializer for bookmarks_menu_skt>`
   1049          

   \                                 In segment CODE, align 4, keep-with-next
   1050          static void find_box_ghook(GUI *data, int cmd)
   1051          {
   1052            const char* _t = "%t";
   1053            int i;
   1054            WSHDR* ews;
   1055            SOFTKEY_DESC sk={0x0FFF,0x0000,(int)lgpData[LGP_Ok]};
   \                     find_box_ghook:
   \   00000000   D4209FE5           LDR      R2,??find_box_ghook_0+0x4  ;; `?<Constant {4095, 0, 0}>`
   \   00000004   F0432DE9           PUSH     {R4-R9,LR}
   \   00000008   08D04DE2           SUB      SP,SP,#+8
   \   0000000C   0C0092E8           LDM      R2,{R2,R3}
   \   00000010   ........           LDR      R6,??DataTable38  ;; lgpData
   \   00000014   0040A0E1           MOV      R4,R0
   \   00000018   0D00A0E1           MOV      R0,SP
   \   0000001C   0C0080E8           STM      R0,{R2,R3}
   \   00000020   6C2096E5           LDR      R2,[R6, #+108]
   \   00000024   2B5F8FE2           ADR      R5,??find_box_ghook_0  ;; "%t"
   \   00000028   04208DE5           STR      R2,[SP, #+4]
   1056            if (cmd==0x0A)
   \   0000002C   0A0051E3           CMP      R1,#+10
   \   00000030   0100001A           BNE      ??find_box_ghook_1
   1057            {
   1058              DisableIDLETMR();
   \   00000034   7F0100EF           SWI      +383
   \   00000038   F383BDE8           POP      {R0,R1,R4-R9,PC}
   1059            }
   1060            if (cmd==7)
   \                     ??find_box_ghook_1:
   \   0000003C   070051E3           CMP      R1,#+7
   \   00000040   0400001A           BNE      ??find_box_ghook_2
   1061            {
   1062              SetSoftKey(data,&sk,SET_SOFT_KEY_N);
   \   00000044   0020A0E3           MOV      R2,#+0
   \   00000048   0D10A0E1           MOV      R1,SP
   \   0000004C   0400A0E1           MOV      R0,R4
   \   00000050   680100EF           SWI      +360
   \   00000054   F383BDE8           POP      {R0,R1,R4-R9,PC}
   1063            }
   1064            if (cmd==0x0D)
   \                     ??find_box_ghook_2:
   \   00000058   0D0051E3           CMP      R1,#+13
   \   0000005C   F383BD18           POPNE    {R0,R1,R4-R9,PC}
   1065            {
   1066              ews = AllocWS(256);
   \   00000060   400FA0E3           MOV      R0,#+256
   \   00000064   250100EF           SWI      +293
   \   00000068   0070A0E1           MOV      R7,R0
   1067              if ((i=EDIT_GetItemNumInFocusedComboBox(data)))
   \   0000006C   0400A0E1           MOV      R0,R4
   \   00000070   800100EF           SWI      +384
   \   00000074   0080B0E1           MOVS     R8,R0
   \   00000078   1000000A           BEQ      ??find_box_ghook_3
   1068              {
   1069                VIEWDATA* vd = EDIT_GetUserPointer(data);
   1070                if (i == 2)
   \   0000007C   5C909FE5           LDR      R9,??find_box_ghook_0+0x8  ;; search_isCaseSens
   \   00000080   0400A0E1           MOV      R0,R4
   \   00000084   DF0100EF           SWI      +479
   \   00000088   020058E3           CMP      R8,#+2
   \   0000008C   0500001A           BNE      ??find_box_ghook_4
   1071                {
   1072                 wsprintf(ews,_t,lgpData[LGP_Yes]);
   \   00000090   202196E5           LDR      R2,[R6, #+288]
   \   00000094   0510A0E1           MOV      R1,R5
   \   00000098   0700A0E1           MOV      R0,R7
   \   0000009C   240100EF           SWI      +292
   1073                 search_isCaseSens = 1;
   \   000000A0   0100A0E3           MOV      R0,#+1
   \   000000A4   040000EA           B        ??find_box_ghook_5
   1074                }
   1075                else
   1076                {
   1077                 wsprintf(ews,_t,lgpData[LGP_No]); 
   \                     ??find_box_ghook_4:
   \   000000A8   242196E5           LDR      R2,[R6, #+292]
   \   000000AC   0510A0E1           MOV      R1,R5
   \   000000B0   0700A0E1           MOV      R0,R7
   \   000000B4   240100EF           SWI      +292
   1078                 search_isCaseSens = 0;
   \   000000B8   0000A0E3           MOV      R0,#+0
   \                     ??find_box_ghook_5:
   \   000000BC   000089E5           STR      R0,[R9, #+0]
   1079                }
   1080              }
   1081              EDIT_SetTextToFocused(data,ews);
   \                     ??find_box_ghook_3:
   \   000000C0   0710A0E1           MOV      R1,R7
   \   000000C4   0400A0E1           MOV      R0,R4
   \   000000C8   810100EF           SWI      +385
   1082              FreeWS(ews);
   \   000000CC   0700A0E1           MOV      R0,R7
   \   000000D0   290100EF           SWI      +297
   1083            }
   1084          }
   \   000000D4   F383BDE8           POP      {R0,R1,R4-R9,PC}  ;; return
   \                     ??find_box_ghook_0:
   \   000000D8   25740000           DC8      "%t",+0
   \   000000DC   ........           DC32     `?<Constant {4095, 0, 0}>`
   \   000000E0   ........           DC32     search_isCaseSens
   1085          

   \                                 In segment CODE, align 4, keep-with-next
   1086          static void find_box_locret(void){}
   \                     find_box_locret:
   \   00000000   1EFF2FE1           BX       LR               ;; return
   1087          
   1088          

   \                                 In segment CODE, align 4, keep-with-next
   1089          static int find_box_onkey(GUI *data, GUI_MSG *msg)
   1090          {
   \                     find_box_onkey:
   \   00000000   10402DE9           PUSH     {R4,LR}
   \   00000004   2CD04DE2           SUB      SP,SP,#+44
   \   00000008   0040A0E1           MOV      R4,R0
   1091            EDITCONTROL ec;
   1092            VIEWDATA* vd;
   1093            if (msg->keys==0xFFF)
   \   0000000C   F200D1E1           LDRSH    R0,[R1, #+2]
   \   00000010   FF10A0E3           MOV      R1,#+255
   \   00000014   F01E81E3           ORR      R1,R1,#0xF00
   \   00000018   010050E1           CMP      R0,R1
   \   0000001C   0F00001A           BNE      ??find_box_onkey_0
   1094            {
   1095              ExtractEditControl(data,2,&ec);
   \   00000020   0D20A0E1           MOV      R2,SP
   \   00000024   0210A0E3           MOV      R1,#+2
   \   00000028   0400A0E1           MOV      R0,R4
   \   0000002C   690100EF           SWI      +361
   1096              vd = EDIT_GetUserPointer(data);
   \   00000030   0400A0E1           MOV      R0,R4
   \   00000034   DF0100EF           SWI      +479
   1097              wstrcpy(search_string, ec.pWS);
   \   00000038   28109DE5           LDR      R1,[SP, #+40]
   \   0000003C   0040A0E1           MOV      R4,R0
   \   00000040   ........           LDR      R0,??DataTable36  ;; search_string
   \   00000044   000090E5           LDR      R0,[R0, #+0]
   \   00000048   1F0100EF           SWI      +287
   1098              FindStringOnPage(vd);
   \   0000004C   0400A0E1           MOV      R0,R4
   \   00000050   ........           _BLF     FindStringOnPage,??FindStringOnPage??rA
   1099              return (0xFF);
   \   00000054   FF00A0E3           MOV      R0,#+255
   \   00000058   2CD08DE2           ADD      SP,SP,#+44
   \   0000005C   1080BDE8           POP      {R4,PC}
   1100            }
   1101            return (0);
   \                     ??find_box_onkey_0:
   \   00000060   0000A0E3           MOV      R0,#+0
   \   00000064   2CD08DE2           ADD      SP,SP,#+44
   \   00000068   1080BDE8           POP      {R4,PC}          ;; return
   1102          }
   1103          

   \                                 In segment DATA_C, align 4, align-sorted
   1104          static const INPUTDIA_DESC find_box_desc =
   \                     find_box_desc:
   \   00000000   01000000....       DC32 1, find_box_onkey, find_box_ghook, find_box_locret, 0
   \              ............
   \              ........0000
   \              0000        
   \   00000014   ........           DC32 find_box_menu_skt
   \   00000018   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   00000020   080000006400       DC32 8, 100, 101, 0, 0, 1073741824
   \              000065000000
   \              000000000000
   \              000000000040
   1105          {
   1106            1,
   1107            find_box_onkey,
   1108            find_box_ghook,
   1109            (void *)find_box_locret,
   1110            0,
   1111            &find_box_menu_skt,
   1112            {0,0,0,0},
   1113            FONT_SMALL,
   1114            100,
   1115            101,
   1116            0,
   1117            //  0x00000001 - Выровнять по правому краю
   1118            //  0x00000002 - Выровнять по центру
   1119            //  0x00000004 - Инверсия знакомест
   1120            //  0x00000008 - UnderLine
   1121            //  0x00000020 - Не переносить слова
   1122            //  0x00000200 - bold
   1123            0,
   1124            //  0x00000002 - ReadOnly
   1125            //  0x00000004 - Не двигается курсор
   1126            //  0x40000000 - Поменять местами софт-кнопки
   1127            0x40000000
   1128          };
   1129          

   \                                 In segment CODE, align 4, keep-with-next
   1130          int CreateFindDialog(VIEWDATA *vd)
   1131          {
   \                     CreateFindDialog:
   \   00000000   F0432DE9           PUSH     {R4-R9,LR}
   1132            
   1133            void *ma=malloc_adr();
   1134            void *eq;
   1135            EDITCONTROL ec;
   1136            WSHDR * ews=AllocWS(256);
   1137            
   1138            eq=AllocEQueue(ma,mfree_adr());
   1139            
   1140            ascii2ws(ews,lgpData[LGP_FindString]);
   \   00000004   ........           LDR      R6,??DataTable38  ;; lgpData
   \   00000008   2CD04DE2           SUB      SP,SP,#+44
   1141            ConstructEditControl(&ec,ECT_HEADER,ECF_APPEND_EOL,ews,128);
   1142            AddEditControlToEditQend(eq,&ec,ma);
   1143            
   1144            PrepareEditControl(&ec);
   1145            ConstructEditControl(&ec,ECT_NORMAL_TEXT,ECF_APPEND_EOL,search_string,256);
   1146            AddEditControlToEditQend(eq,&ec,ma);
   1147            
   1148            ascii2ws(ews,lgpData[LGP_MatchCase]);
   1149            ConstructEditControl(&ec,ECT_HEADER,ECF_APPEND_EOL,ews,128);
   1150            AddEditControlToEditQend(eq,&ec,ma);
   1151           
   1152            wsprintf(ews,sEmpty);
   \   0000000C   ........           LDR      R9,??DataTable35  ;; search_menu_sk
   \   00000010   0040A0E1           MOV      R4,R0
   \   00000014   148000EF           SWI      +32788
   \   00000018   0070A0E1           MOV      R7,R0
   \   0000001C   400FA0E3           MOV      R0,#+256
   \   00000020   250100EF           SWI      +293
   \   00000024   0080A0E1           MOV      R8,R0
   \   00000028   158000EF           SWI      +32789
   \   0000002C   0010A0E1           MOV      R1,R0
   \   00000030   0700A0E1           MOV      R0,R7
   \   00000034   630100EF           SWI      +355
   \   00000038   881096E5           LDR      R1,[R6, #+136]
   \   0000003C   0050A0E1           MOV      R5,R0
   \   00000040   0800A0E1           MOV      R0,R8
   \   00000044   ........           _BLF     ascii2ws,??ascii2ws??rA
   \   00000048   8000A0E3           MOV      R0,#+128
   \   0000004C   01002DE9           PUSH     {R0}
   \   00000050   0830A0E1           MOV      R3,R8
   \   00000054   4020A0E3           MOV      R2,#+64
   \   00000058   0110A0E3           MOV      R1,#+1
   \   0000005C   04008DE2           ADD      R0,SP,#+4
   \   00000060   650100EF           SWI      +357
   \   00000064   0720A0E1           MOV      R2,R7
   \   00000068   04108DE2           ADD      R1,SP,#+4
   \   0000006C   0500A0E1           MOV      R0,R5
   \   00000070   660100EF           SWI      +358
   \   00000074   04008DE2           ADD      R0,SP,#+4
   \   00000078   640100EF           SWI      +356
   \   0000007C   400FA0E3           MOV      R0,#+256
   \   00000080   01002DE9           PUSH     {R0}
   \   00000084   ........           LDR      R0,??DataTable36  ;; search_string
   \   00000088   4020A0E3           MOV      R2,#+64
   \   0000008C   003090E5           LDR      R3,[R0, #+0]
   \   00000090   0310A0E3           MOV      R1,#+3
   \   00000094   08008DE2           ADD      R0,SP,#+8
   \   00000098   650100EF           SWI      +357
   \   0000009C   0720A0E1           MOV      R2,R7
   \   000000A0   08108DE2           ADD      R1,SP,#+8
   \   000000A4   0500A0E1           MOV      R0,R5
   \   000000A8   660100EF           SWI      +358
   \   000000AC   D41096E5           LDR      R1,[R6, #+212]
   \   000000B0   0800A0E1           MOV      R0,R8
   \   000000B4   ........           _BLF     ascii2ws,??ascii2ws??rA
   \   000000B8   8000A0E3           MOV      R0,#+128
   \   000000BC   01002DE9           PUSH     {R0}
   \   000000C0   0830A0E1           MOV      R3,R8
   \   000000C4   4020A0E3           MOV      R2,#+64
   \   000000C8   0110A0E3           MOV      R1,#+1
   \   000000CC   0C008DE2           ADD      R0,SP,#+12
   \   000000D0   650100EF           SWI      +357
   \   000000D4   0720A0E1           MOV      R2,R7
   \   000000D8   0C108DE2           ADD      R1,SP,#+12
   \   000000DC   0500A0E1           MOV      R0,R5
   \   000000E0   660100EF           SWI      +358
   \   000000E4   581099E5           LDR      R1,[R9, #+88]
   \   000000E8   0800A0E1           MOV      R0,R8
   \   000000EC   240100EF           SWI      +292
   1153            ConstructComboBox(&ec,7,ECF_APPEND_EOL,ews,32,0,2,1);
   \   000000F0   0100A0E3           MOV      R0,#+1
   \   000000F4   01002DE9           PUSH     {R0}
   \   000000F8   0830A0E1           MOV      R3,R8
   \   000000FC   4020A0E3           MOV      R2,#+64
   \   00000100   0710A0E3           MOV      R1,#+7
   \   00000104   0200A0E3           MOV      R0,#+2
   \   00000108   01002DE9           PUSH     {R0}
   \   0000010C   0000A0E3           MOV      R0,#+0
   \   00000110   01002DE9           PUSH     {R0}
   \   00000114   2000A0E3           MOV      R0,#+32
   \   00000118   01002DE9           PUSH     {R0}
   \   0000011C   1C008DE2           ADD      R0,SP,#+28
   \   00000120   840100EF           SWI      +388
   1154            AddEditControlToEditQend(eq,&ec,ma);
   \   00000124   0720A0E1           MOV      R2,R7
   1155            FreeWS(ews);
   1156          
   1157            patch_header(&find_box_hdr);
   1158            patch_input(&find_box_desc);
   \   00000128   58709FE5           LDR      R7,??CreateFindDialog_0  ;; find_box_desc
   \   0000012C   1C108DE2           ADD      R1,SP,#+28
   \   00000130   0500A0E1           MOV      R0,R5
   \   00000134   660100EF           SWI      +358
   \   00000138   0800A0E1           MOV      R0,R8
   \   0000013C   290100EF           SWI      +297
   \   00000140   440089E2           ADD      R0,R9,#+68
   \   00000144   ........           _BLF     patch_header,??patch_header??rA
   \   00000148   0700A0E1           MOV      R0,R7
   \   0000014C   ........           _BLF     patch_input,??patch_input??rA
   1159            find_box_menu_sk[0].lgp_id=(int)lgpData[LGP_Ok];
   \   00000150   6C0096E5           LDR      R0,[R6, #+108]
   1160            find_box_menu_sk[1].lgp_id=(int)lgpData[LGP_Cancel];
   1161            find_box_hdr.lgp_id=(int)lgpData[LGP_FindHeader];
   1162            return CreateInputTextDialog(&find_box_desc,&find_box_hdr,eq,1,vd);
   \   00000154   0130A0E3           MOV      R3,#+1
   \   00000158   300089E5           STR      R0,[R9, #+48]
   \   0000015C   700096E5           LDR      R0,[R6, #+112]
   \   00000160   0520A0E1           MOV      R2,R5
   \   00000164   380089E5           STR      R0,[R9, #+56]
   \   00000168   CC0096E5           LDR      R0,[R6, #+204]
   \   0000016C   441089E2           ADD      R1,R9,#+68
   \   00000170   500089E5           STR      R0,[R9, #+80]
   \   00000174   10002DE9           PUSH     {R4}
   \   00000178   0700A0E1           MOV      R0,R7
   \   0000017C   670100EF           SWI      +359
   \   00000180   4CD08DE2           ADD      SP,SP,#+76
   \   00000184   F083BDE8           POP      {R4-R9,PC}       ;; return
   \                     ??CreateFindDialog_0:
   \   00000188   ........           DC32     find_box_desc
   1163          }
   1164          
   1165          //-------------------------------Save Page--------------------------------------
   1166          SOFTKEY_DESC savepage_box_menu_sk[]=
   1167          {
   1168            {0x0018,0x0000,(int)"Ok"},
   1169            {0x0001,0x0000,(int)"Cancel"},
   1170            {0x003D,0x0000,(int)LGP_DOIT_PIC}
   1171          };
   1172          

   \                                 In segment DATA_C, align 4, align-sorted
   1173          static const SOFTKEYSTAB savepage_box_menu_skt=
   \                     savepage_box_menu_skt:
   \   00000000   ........0000       DC32 savepage_box_menu_sk, 0
   \              0000        

   \                                 In segment DATA_I, align 4, align-sorted
   \                     savepage_box_menu_sk:
   \   00000000                      DS8 24
   \   00000018                      REQUIRE `?<Initializer for savepage_box_menu_sk>`
   1174          {
   1175            savepage_box_menu_sk,0
   1176          };
   1177          
   1178          HEADER_DESC savepage_box_hdr={0,0,0,0,NULL,(int)"Save page:",LGP_NULL};
   \                     savepage_box_hdr:
   \   00000018                      DS8 20
   \   0000002C                      REQUIRE `?<Initializer for savepage_box_hdr>`
   1179          

   \                                 In segment CODE, align 4, keep-with-next
   1180          static void savepage_box_ghook(GUI *data, int cmd)
   1181          {
   1182            SOFTKEY_DESC sk={0x0FFF,0x0000,(int)lgpData[LGP_Ok]};
   \                     savepage_box_ghook:
   \   00000000   44309FE5           LDR      R3,??savepage_box_ghook_0  ;; `?<Constant {4095, 0, 0}>_1`
   \   00000004   30402DE9           PUSH     {R4,R5,LR}
   \   00000008   08D04DE2           SUB      SP,SP,#+8
   \   0000000C   300093E8           LDM      R3,{R4,R5}
   \   00000010   38309FE5           LDR      R3,??savepage_box_ghook_0+0x4  ;; lgpData + 108
   \   00000014   0D20A0E1           MOV      R2,SP
   \   00000018   300082E8           STM      R2,{R4,R5}
   \   0000001C   003093E5           LDR      R3,[R3, #+0]
   1183            if (cmd==0x0A)
   \   00000020   0A0051E3           CMP      R1,#+10
   \   00000024   04308DE5           STR      R3,[SP, #+4]
   \   00000028   0100001A           BNE      ??savepage_box_ghook_1
   1184            {
   1185              DisableIDLETMR();
   \   0000002C   7F0100EF           SWI      +383
   \   00000030   3380BDE8           POP      {R0,R1,R4,R5,PC}
   1186            }
   1187            if (cmd==7)
   \                     ??savepage_box_ghook_1:
   \   00000034   070051E3           CMP      R1,#+7
   \   00000038   3380BD18           POPNE    {R0,R1,R4,R5,PC}
   1188            {
   1189              SetSoftKey(data,&sk,SET_SOFT_KEY_N);
   \   0000003C   0020A0E3           MOV      R2,#+0
   \   00000040   0D10A0E1           MOV      R1,SP
   \   00000044   680100EF           SWI      +360
   1190            }
   1191          }
   \   00000048   3380BDE8           POP      {R0,R1,R4,R5,PC}  ;; return
   \                     ??savepage_box_ghook_0:
   \   0000004C   ........           DC32     `?<Constant {4095, 0, 0}>_1`
   \   00000050   ........           DC32     lgpData + 108
   1192          

   \                                 In segment CODE, align 4, keep-with-next
   1193          static void savepage_box_locret(void){}
   \                     savepage_box_locret:
   \   00000000   1EFF2FE1           BX       LR               ;; return
   1194          
   1195          #define BUF_SIZE 0x4000

   \                                 In segment CODE, align 4, keep-with-next
   1196          int fcopy(char* src, char* dst) //From MC source code
   1197          {
   \                     fcopy:
   \   00000000   F0432DE9           PUSH     {R4-R9,LR}
   \   00000004   2CD04DE2           SUB      SP,SP,#+44
   1198          	int fi=-1, fo=-1;
   1199          	char* buff=0;
   1200          	int cb, left;
   1201          	int res = 0;
   1202                  unsigned int err;
   1203                  FSTATS fs;
   1204          	if (GetFileStats(dst,&fs,&err)!=-1)
   \   00000008   ........           LDR      R8,??DataTable38  ;; lgpData
   \   0000000C   0060A0E1           MOV      R6,R0
   \   00000010   0170A0E1           MOV      R7,R1
   \   00000014   0050A0E3           MOV      R5,#+0
   \   00000018   0040A0E3           MOV      R4,#+0
   \   0000001C   0490E0E1           MVN      R9,R4
   \   00000020   0D20A0E1           MOV      R2,SP
   \   00000024   04108DE2           ADD      R1,SP,#+4
   \   00000028   0700A0E1           MOV      R0,R7
   \   0000002C   840000EF           SWI      +132
   \   00000030   090050E1           CMP      R0,R9
   \   00000034   0500000A           BEQ      ??fcopy_0
   1205                    ShowMSG(1, (int)lgpData[LGP_FileExists]); 
   \   00000038   141198E5           LDR      R1,[R8, #+276]
   \   0000003C   0100A0E3           MOV      R0,#+1
   \   00000040   480100EF           SWI      +328
   \   00000044   0400A0E1           MOV      R0,R4
   \   00000048   2CD08DE2           ADD      SP,SP,#+44
   \   0000004C   F083BDE8           POP      {R4-R9,PC}
   1206                  else
   1207                  {
   1208          	  fi = fopen(src, A_ReadOnly + A_BIN, P_READ, &err);
   \                     ??fcopy_0:
   \   00000050   0D30A0E1           MOV      R3,SP
   \   00000054   8020A0E3           MOV      R2,#+128
   \   00000058   801CA0E3           MOV      R1,#+32768
   \   0000005C   0600A0E1           MOV      R0,R6
   \   00000060   0A0000EF           SWI      +10
   \   00000064   0060A0E1           MOV      R6,R0
   1209                    if (fi != -1) 
   \   00000068   090056E1           CMP      R6,R9
   \   0000006C   2800000A           BEQ      ??fcopy_1
   1210                    {
   1211                            fo = fopen(dst, A_ReadWrite+A_BIN+A_Create+A_Truncate, P_READ+P_WRITE, &err);
   \   00000070   0D30A0E1           MOV      R3,SP
   \   00000074   602FA0E3           MOV      R2,#+384
   \   00000078   0210A0E3           MOV      R1,#+2
   \   0000007C   831C81E3           ORR      R1,R1,#0x8300
   \   00000080   0700A0E1           MOV      R0,R7
   \   00000084   0A0000EF           SWI      +10
   \   00000088   0070A0E1           MOV      R7,R0
   1212                            if (fo != -1) 
   \   0000008C   090057E1           CMP      R7,R9
   \   00000090   3800000A           BEQ      ??fcopy_2
   1213                            {
   1214            
   1215                                    left = lseek(fi, 0, S_END, &err, &err);
   \   00000094   0D00A0E1           MOV      R0,SP
   \   00000098   01002DE9           PUSH     {R0}
   \   0000009C   04308DE2           ADD      R3,SP,#+4
   \   000000A0   0220A0E3           MOV      R2,#+2
   \   000000A4   0010A0E3           MOV      R1,#+0
   \   000000A8   0600A0E1           MOV      R0,R6
   \   000000AC   0F0000EF           SWI      +15
   \   000000B0   0080A0E1           MOV      R8,R0
   1216                                    lseek(fi, 0, S_SET, &err, &err);
   \   000000B4   04008DE2           ADD      R0,SP,#+4
   \   000000B8   01002DE9           PUSH     {R0}
   \   000000BC   08308DE2           ADD      R3,SP,#+8
   \   000000C0   0420A0E1           MOV      R2,R4
   \   000000C4   0210A0E1           MOV      R1,R2
   \   000000C8   0600A0E1           MOV      R0,R6
   \   000000CC   0F0000EF           SWI      +15
   1217                                    if (left)
   \   000000D0   000058E3           CMP      R8,#+0
   \   000000D4   08D08DE2           ADD      SP,SP,#+8
   \   000000D8   2200000A           BEQ      ??fcopy_3
   1218                                    {
   1219                                            buff = malloc(BUF_SIZE);
   \   000000DC   400CA0E3           MOV      R0,#+16384
   \   000000E0   140000EF           SWI      +20
   \   000000E4   0050B0E1           MOVS     R5,R0
   1220                                            if (!buff) goto L_EXIT;
   \   000000E8   0C00001A           BNE      ??fcopy_4
   1221                                    }
   1222                                    while (left) 
   1223                                    {
   1224                                            cb = left < BUF_SIZE ? left : BUF_SIZE;
   1225                                            left -= cb;
   1226            
   1227                                            if (fread(fi, buff, cb, &err) != cb) goto L_EXIT;
   1228                                            if (fwrite(fo, buff, cb, &err) != cb) goto L_EXIT;
   1229                                    }
   1230                                    res = 1;
   1231                            }
   1232                            else
   1233                              ShowMSG(1, (int)lgpData[LGP_FileInvalid]);
   1234                              
   1235                    }
   1236                  }
   1237          L_EXIT:
   1238          	if (buff) mfree(buff);
   \                     ??fcopy_5:
   \   000000EC   000055E3           CMP      R5,#+0
   \   000000F0   0100000A           BEQ      ??fcopy_6
   \   000000F4   0500A0E1           MOV      R0,R5
   \   000000F8   150000EF           SWI      +21
   1239          	if (fo != -1) fclose(fo, &err);
   \                     ??fcopy_6:
   \   000000FC   0D10A0E1           MOV      R1,SP
   \   00000100   0700A0E1           MOV      R0,R7
   \   00000104   0D0000EF           SWI      +13
   1240          	if (fi !=- 1) fclose(fi, &err);
   \                     ??fcopy_7:
   \   00000108   0D10A0E1           MOV      R1,SP
   \   0000010C   0600A0E1           MOV      R0,R6
   \   00000110   0D0000EF           SWI      +13
   1241          	return res;
   \                     ??fcopy_1:
   \   00000114   0400A0E1           MOV      R0,R4
   \   00000118   2CD08DE2           ADD      SP,SP,#+44
   \   0000011C   F083BDE8           POP      {R4-R9,PC}       ;; return
   \                     ??fcopy_4:
   \   00000120   400C58E3           CMP      R8,#+16384
   \   00000124   0890A0B1           MOVLT    R9,R8
   \   00000128   409CA0A3           MOVGE    R9,#+16384
   \   0000012C   098048E0           SUB      R8,R8,R9
   \   00000130   0D30A0E1           MOV      R3,SP
   \   00000134   0920A0E1           MOV      R2,R9
   \   00000138   0510A0E1           MOV      R1,R5
   \   0000013C   0600A0E1           MOV      R0,R6
   \   00000140   0B0000EF           SWI      +11
   \   00000144   090050E1           CMP      R0,R9
   \   00000148   E7FFFF1A           BNE      ??fcopy_5
   \   0000014C   0D30A0E1           MOV      R3,SP
   \   00000150   0920A0E1           MOV      R2,R9
   \   00000154   0510A0E1           MOV      R1,R5
   \   00000158   0700A0E1           MOV      R0,R7
   \   0000015C   0C0000EF           SWI      +12
   \   00000160   090050E1           CMP      R0,R9
   \   00000164   E0FFFF1A           BNE      ??fcopy_5
   \                     ??fcopy_3:
   \   00000168   000058E3           CMP      R8,#+0
   \   0000016C   EBFFFF1A           BNE      ??fcopy_4
   \   00000170   0140A0E3           MOV      R4,#+1
   \   00000174   DCFFFFEA           B        ??fcopy_5
   \                     ??fcopy_2:
   \   00000178   181198E5           LDR      R1,[R8, #+280]
   \   0000017C   0100A0E3           MOV      R0,#+1
   \   00000180   480100EF           SWI      +328
   \   00000184   DFFFFFEA           B        ??fcopy_7
   1242          }
   1243          

   \                                 In segment CODE, align 4, keep-with-next
   1244          static int savepage_box_onkey(GUI *data, GUI_MSG *msg)
   1245          {
   \                     savepage_box_onkey:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
   \   00000004   6BDF4DE2           SUB      SP,SP,#+428
   1246            EDITCONTROL ec;
   1247            if (msg->keys==0xFFF)
   \   00000008   F210D1E1           LDRSH    R1,[R1, #+2]
   \   0000000C   FF20A0E3           MOV      R2,#+255
   \   00000010   F02E82E3           ORR      R2,R2,#0xF00
   \   00000014   020051E1           CMP      R1,R2
   \   00000018   2000001A           BNE      ??savepage_box_onkey_0
   1248            {
   1249              char fname[256];
   1250              char tfname[128];
   1251              ExtractEditControl(data,2,&ec);
   1252              char* src_fname = getCurrPageName();
   1253              strcpy(fname, "$pages\\");
   \   0000001C   88509FE5           LDR      R5,??savepage_box_onkey_1  ;; `?<Constant "$pages\\\\">`
   \   00000020   602F8DE2           ADD      R2,SP,#+384
   \   00000024   0210A0E3           MOV      R1,#+2
   \   00000028   690100EF           SWI      +361
   \   0000002C   ........           _BLF     getCurrPageName,??getCurrPageName??rA
   \   00000030   0040A0E1           MOV      R4,R0
   \   00000034   0510A0E1           MOV      R1,R5
   \   00000038   0D00A0E1           MOV      R0,SP
   \   0000003C   1A0000EF           SWI      +26
   1254              ws_2str(ec.pWS, tfname, 127);
   \   00000040   A8019DE5           LDR      R0,[SP, #+424]
   \   00000044   7F20A0E3           MOV      R2,#+127
   \   00000048   401F8DE2           ADD      R1,SP,#+256
   \   0000004C   A30000EF           SWI      +163
   1255              strcat(fname, tfname);
   \   00000050   401F8DE2           ADD      R1,SP,#+256
   \   00000054   0D00A0E1           MOV      R0,SP
   \   00000058   170000EF           SWI      +23
   1256              strcat(fname,".oms");
   \   0000005C   081085E2           ADD      R1,R5,#+8
   \   00000060   0D00A0E1           MOV      R0,SP
   \   00000064   170000EF           SWI      +23
   1257              char* dest_fname = getSymbolicPath(fname);
   \   00000068   0D00A0E1           MOV      R0,SP
   \   0000006C   ........           _BLF     getSymbolicPath,??getSymbolicPath??rA
   \   00000070   0050A0E1           MOV      R5,R0
   1258              int res = fcopy(src_fname, dest_fname);
   \   00000074   0510A0E1           MOV      R1,R5
   \   00000078   0400A0E1           MOV      R0,R4
   \   0000007C   ........           BL       fcopy
   \   00000080   0060A0E1           MOV      R6,R0
   1259              mfree(src_fname);
   \   00000084   0400A0E1           MOV      R0,R4
   \   00000088   150000EF           SWI      +21
   1260              mfree(dest_fname);
   \   0000008C   0500A0E1           MOV      R0,R5
   \   00000090   150000EF           SWI      +21
   1261              if (res)
   \   00000094   000056E3           CMP      R6,#+0
   1262                return (0xFF);
   \   00000098   FF00A013           MOVNE    R0,#+255
   \   0000009C   0000001A           BNE      ??savepage_box_onkey_2
   1263            }
   1264            return (0);
   \                     ??savepage_box_onkey_0:
   \   000000A0   0000A0E3           MOV      R0,#+0
   \                     ??savepage_box_onkey_2:
   \   000000A4   6BDF8DE2           ADD      SP,SP,#+428      ;; stack cleaning
   \   000000A8   7080BDE8           POP      {R4-R6,PC}       ;; return
   \                     ??savepage_box_onkey_1:
   \   000000AC   ........           DC32     `?<Constant "$pages\\\\">`
   1265          }
   1266          

   \                                 In segment DATA_C, align 4, align-sorted
   1267          static const INPUTDIA_DESC savepage_box_desc =
   \                     savepage_box_desc:
   \   00000000   01000000....       DC32 1, savepage_box_onkey, savepage_box_ghook, savepage_box_locret, 0
   \              ............
   \              ........0000
   \              0000        
   \   00000014   ........           DC32 savepage_box_menu_skt
   \   00000018   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   00000020   080000006400       DC32 8, 100, 101, 0, 0, 1073741824
   \              000065000000
   \              000000000000
   \              000000000040
   1268          {
   1269            1,
   1270            savepage_box_onkey,
   1271            savepage_box_ghook,
   1272            (void *)savepage_box_locret,
   1273            0,
   1274            &savepage_box_menu_skt,
   1275            {0,0,0,0},
   1276            FONT_SMALL,
   1277            100,
   1278            101,
   1279            0,
   1280            //  0x00000001 - Выровнять по правому краю
   1281            //  0x00000002 - Выровнять по центру
   1282            //  0x00000004 - Инверсия знакомест
   1283            //  0x00000008 - UnderLine
   1284            //  0x00000020 - Не переносить слова
   1285            //  0x00000200 - bold
   1286            0,
   1287            //  0x00000002 - ReadOnly
   1288            //  0x00000004 - Не двигается курсор
   1289            //  0x40000000 - Поменять местами софт-кнопки
   1290            0x40000000
   1291          };
   1292          

   \                                 In segment CODE, align 4, keep-with-next
   1293          int CreateSavePageDialog(VIEWDATA *vd)
   1294          {
   \                     CreateSavePageDialog:
   \   00000000   F0412DE9           PUSH     {R4-R8,LR}
   1295            
   1296            void *ma=malloc_adr();
   1297            void *eq;
   1298            EDITCONTROL ec;
   1299            WSHDR * ews=AllocWS(256);
   1300            
   1301            eq=AllocEQueue(ma,mfree_adr());
   1302            
   1303            ascii2ws(ews,lgpData[LGP_SavePageString]);
   \   00000004   ........           LDR      R6,??DataTable38  ;; lgpData
   \   00000008   2CD04DE2           SUB      SP,SP,#+44
   \   0000000C   0040A0E1           MOV      R4,R0
   \   00000010   148000EF           SWI      +32788
   \   00000014   0070A0E1           MOV      R7,R0
   \   00000018   400FA0E3           MOV      R0,#+256
   \   0000001C   250100EF           SWI      +293
   \   00000020   0080A0E1           MOV      R8,R0
   \   00000024   158000EF           SWI      +32789
   \   00000028   0010A0E1           MOV      R1,R0
   \   0000002C   0700A0E1           MOV      R0,R7
   \   00000030   630100EF           SWI      +355
   \   00000034   8C1096E5           LDR      R1,[R6, #+140]
   \   00000038   0050A0E1           MOV      R5,R0
   \   0000003C   0800A0E1           MOV      R0,R8
   \   00000040   ........           _BLF     ascii2ws,??ascii2ws??rA
   1304            ConstructEditControl(&ec,ECT_HEADER,ECF_APPEND_EOL,ews,128);
   \   00000044   8000A0E3           MOV      R0,#+128
   \   00000048   01002DE9           PUSH     {R0}
   \   0000004C   0830A0E1           MOV      R3,R8
   \   00000050   4020A0E3           MOV      R2,#+64
   \   00000054   0110A0E3           MOV      R1,#+1
   \   00000058   04008DE2           ADD      R0,SP,#+4
   \   0000005C   650100EF           SWI      +357
   1305            AddEditControlToEditQend(eq,&ec,ma);
   \   00000060   0720A0E1           MOV      R2,R7
   \   00000064   04108DE2           ADD      R1,SP,#+4
   \   00000068   0500A0E1           MOV      R0,R5
   \   0000006C   660100EF           SWI      +358
   1306            
   1307            PrepareEditControl(&ec);
   \   00000070   04008DE2           ADD      R0,SP,#+4
   \   00000074   640100EF           SWI      +356
   1308            ascii2ws(ews, vd->title);
   \   00000078   E41094E5           LDR      R1,[R4, #+228]
   \   0000007C   0800A0E1           MOV      R0,R8
   \   00000080   ........           _BLF     ascii2ws,??ascii2ws??rA
   1309            ConstructEditControl(&ec,ECT_NORMAL_TEXT,ECF_APPEND_EOL,ews,256);
   \   00000084   400FA0E3           MOV      R0,#+256
   \   00000088   01002DE9           PUSH     {R0}
   \   0000008C   0830A0E1           MOV      R3,R8
   \   00000090   4020A0E3           MOV      R2,#+64
   \   00000094   0310A0E3           MOV      R1,#+3
   \   00000098   08008DE2           ADD      R0,SP,#+8
   \   0000009C   650100EF           SWI      +357
   1310            AddEditControlToEditQend(eq,&ec,ma);
   \   000000A0   0720A0E1           MOV      R2,R7
   1311          
   1312            FreeWS(ews);
   1313            patch_header(&savepage_box_hdr);
   \   000000A4   5C709FE5           LDR      R7,??CreateSavePageDialog_0  ;; savepage_box_menu_sk
   \   000000A8   08108DE2           ADD      R1,SP,#+8
   \   000000AC   0500A0E1           MOV      R0,R5
   \   000000B0   660100EF           SWI      +358
   \   000000B4   0800A0E1           MOV      R0,R8
   1314            patch_input(&savepage_box_desc);
   \   000000B8   4C809FE5           LDR      R8,??CreateSavePageDialog_0+0x4  ;; savepage_box_desc
   \   000000BC   290100EF           SWI      +297
   \   000000C0   180087E2           ADD      R0,R7,#+24
   \   000000C4   ........           _BLF     patch_header,??patch_header??rA
   \   000000C8   0800A0E1           MOV      R0,R8
   \   000000CC   ........           _BLF     patch_input,??patch_input??rA
   1315            savepage_box_menu_sk[0].lgp_id=(int)lgpData[LGP_Ok];
   \   000000D0   6C0096E5           LDR      R0,[R6, #+108]
   1316            savepage_box_menu_sk[1].lgp_id=(int)lgpData[LGP_Cancel];
   1317            savepage_box_hdr.lgp_id=(int)lgpData[LGP_SavePageHeader];
   1318            return CreateInputTextDialog(&savepage_box_desc,&savepage_box_hdr,eq,1,vd);
   \   000000D4   0130A0E3           MOV      R3,#+1
   \   000000D8   040087E5           STR      R0,[R7, #+4]
   \   000000DC   700096E5           LDR      R0,[R6, #+112]
   \   000000E0   0520A0E1           MOV      R2,R5
   \   000000E4   0C0087E5           STR      R0,[R7, #+12]
   \   000000E8   D00096E5           LDR      R0,[R6, #+208]
   \   000000EC   181087E2           ADD      R1,R7,#+24
   \   000000F0   240087E5           STR      R0,[R7, #+36]
   \   000000F4   10002DE9           PUSH     {R4}
   \   000000F8   0800A0E1           MOV      R0,R8
   \   000000FC   670100EF           SWI      +359
   \   00000100   38D08DE2           ADD      SP,SP,#+56
   \   00000104   F081BDE8           POP      {R4-R8,PC}       ;; return
   \                     ??CreateSavePageDialog_0:
   \   00000108   ........           DC32     savepage_box_menu_sk
   \   0000010C   ........           DC32     savepage_box_desc
   1319          }
   1320          
   1321          //------------------------------- History menu ---------------------------------
   1322          

   \                                 In segment CODE, align 4, keep-with-next
   1323          int history_menu_onkey(void *gui, GUI_MSG *msg) //history
   1324          {
   \                     history_menu_onkey:
   \   00000000   F0412DE9           PUSH     {R4-R8,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   \   00000008   0160A0E1           MOV      R6,R1
   1325            char **history = MenuGetUserPointer(gui);
   \   0000000C   E00100EF           SWI      +480
   \   00000010   0050A0E1           MOV      R5,R0
   1326          
   1327            int i = GetCurMenuItem(gui);
   \   00000014   0400A0E1           MOV      R0,R4
   \   00000018   8F0100EF           SWI      +399
   1328            if (msg->keys==0x3D || msg->keys==0x18)
   \   0000001C   F210D6E1           LDRSH    R1,[R6, #+2]
   \   00000020   0040A0E3           MOV      R4,#+0
   \   00000024   3D0051E3           CMP      R1,#+61
   \   00000028   18005113           CMPNE    R1,#+24
   \   0000002C   2000001A           BNE      ??history_menu_onkey_0
   1329            {
   1330              if (history[i])
   \   00000030   005185E0           ADD      R5,R5,R0, LSL #+2
   \   00000034   000095E5           LDR      R0,[R5, #+0]
   \   00000038   000050E3           CMP      R0,#+0
   \   0000003C   1A00000A           BEQ      ??history_menu_onkey_1
   1331              {
   1332                char *histdelim = strchr(history[i], '|');
   \   00000040   7C10A0E3           MOV      R1,#+124
   \   00000044   180000EF           SWI      +24
   1333                if (histdelim)
   \   00000048   000050E3           CMP      R0,#+0
   \   0000004C   1600000A           BEQ      ??history_menu_onkey_1
   1334                {
   1335                  *histdelim = 0;   
   1336                  _safe_free(goto_url);
   \   00000050   ........           LDR      R6,??DataTable53  ;; goto_url
   \   00000054   0040C0E5           STRB     R4,[R0, #+0]
   \   00000058   000096E5           LDR      R0,[R6, #+0]
   \   0000005C   000050E3           CMP      R0,#+0
   \   00000060   0000000A           BEQ      ??history_menu_onkey_2
   \   00000064   150000EF           SWI      +21
   \                     ??history_menu_onkey_2:
   \   00000068   004086E5           STR      R4,[R6, #+0]
   1337                  goto_url=malloc(strlen(history[i])+3);
   \   0000006C   000095E5           LDR      R0,[R5, #+0]
   \   00000070   1B0000EF           SWI      +27
   \   00000074   030080E2           ADD      R0,R0,#+3
   \   00000078   140000EF           SWI      +20
   \   0000007C   000086E5           STR      R0,[R6, #+0]
   1338                  goto_url[0] = '0'; goto_url[1] = '/';      
   \   00000080   3010A0E3           MOV      R1,#+48
   \   00000084   0010C0E5           STRB     R1,[R0, #+0]
   \   00000088   000096E5           LDR      R0,[R6, #+0]
   \   0000008C   2F10A0E3           MOV      R1,#+47
   \   00000090   0110C0E5           STRB     R1,[R0, #+1]
   1339                  strcpy(goto_url+2,history[i]);
   \   00000094   000096E5           LDR      R0,[R6, #+0]
   \   00000098   001095E5           LDR      R1,[R5, #+0]
   \   0000009C   020080E2           ADD      R0,R0,#+2
   \   000000A0   1A0000EF           SWI      +26
   1340                  return (0xFF);
   \   000000A4   FF00A0E3           MOV      R0,#+255
   \   000000A8   F081BDE8           POP      {R4-R8,PC}
   1341                }
   1342              }
   1343              return(1);
   \                     ??history_menu_onkey_1:
   \   000000AC   0100A0E3           MOV      R0,#+1
   \   000000B0   F081BDE8           POP      {R4-R8,PC}
   1344            }
   1345            if (msg->gbsmsg->msg==KEY_DOWN)
   \                     ??history_menu_onkey_0:
   \   000000B4   041096E5           LDR      R1,[R6, #+4]
   \   000000B8   9330A0E3           MOV      R3,#+147
   \   000000BC   042091E5           LDR      R2,[R1, #+4]
   \   000000C0   403F83E3           ORR      R3,R3,#0x100
   \   000000C4   030052E1           CMP      R2,R3
   \   000000C8   2800001A           BNE      ??history_menu_onkey_3
   1346            {
   1347              if (msg->gbsmsg->submess == '#')
   \   000000CC   005185E0           ADD      R5,R5,R0, LSL #+2
   \   000000D0   080091E5           LDR      R0,[R1, #+8]
   \   000000D4   230050E3           CMP      R0,#+35
   \   000000D8   1700001A           BNE      ??history_menu_onkey_4
   1348              {
   1349                if (history[i])
   \   000000DC   000095E5           LDR      R0,[R5, #+0]
   \   000000E0   000050E3           CMP      R0,#+0
   \   000000E4   1400000A           BEQ      ??history_menu_onkey_4
   1350                {
   1351                  char *histdelim = strchr(history[i], '|');
   \   000000E8   7C10A0E3           MOV      R1,#+124
   \   000000EC   180000EF           SWI      +24
   \   000000F0   0070B0E1           MOVS     R7,R0
   1352                  if (histdelim)
   \   000000F4   1000000A           BEQ      ??history_menu_onkey_4
   1353                  {
   1354                    char* histurl = malloc(histdelim-history[i]+1);;
   \   000000F8   000095E5           LDR      R0,[R5, #+0]
   \   000000FC   000047E0           SUB      R0,R7,R0
   \   00000100   010080E2           ADD      R0,R0,#+1
   \   00000104   140000EF           SWI      +20
   \   00000108   0080A0E1           MOV      R8,R0
   1355                    memcpy(histurl, history[i], histdelim-history[i]);
   \   0000010C   000095E5           LDR      R0,[R5, #+0]
   \   00000110   002047E0           SUB      R2,R7,R0
   \   00000114   0010A0E1           MOV      R1,R0
   \   00000118   0800A0E1           MOV      R0,R8
   \   0000011C   1E0100EF           SWI      +286
   1356                    histurl[histdelim-history[i]] = 0;
   \   00000120   000095E5           LDR      R0,[R5, #+0]
   \   00000124   000047E0           SUB      R0,R7,R0
   \   00000128   0840C0E7           STRB     R4,[R0, +R8]
   1357                    ShowLink(histurl);
   \   0000012C   0800A0E1           MOV      R0,R8
   \   00000130   ........           _BLF     ShowLink,??ShowLink??rA
   1358                    mfree(histurl);
   \   00000134   0800A0E1           MOV      R0,R8
   \   00000138   150000EF           SWI      +21
   1359                  }
   1360                }
   1361              }
   1362              if (msg->gbsmsg->submess == '*')
   \                     ??history_menu_onkey_4:
   \   0000013C   040096E5           LDR      R0,[R6, #+4]
   \   00000140   080090E5           LDR      R0,[R0, #+8]
   \   00000144   2A0050E3           CMP      R0,#+42
   \   00000148   0800001A           BNE      ??history_menu_onkey_3
   1363              {
   1364                if (history[i])
   \   0000014C   000095E5           LDR      R0,[R5, #+0]
   \   00000150   000050E3           CMP      R0,#+0
   \   00000154   F081BD08           POPEQ    {R4-R8,PC}
   1365                {
   1366                  char* histtitle = strchr(history[i], '|');
   \   00000158   7C10A0E3           MOV      R1,#+124
   \   0000015C   180000EF           SWI      +24
   1367                  if (histtitle)
   \   00000160   000050E3           CMP      R0,#+0
   \   00000164   F081BD08           POPEQ    {R4-R8,PC}
   1368                  {
   1369                    ShowLink(histtitle+1);
   \   00000168   010080E2           ADD      R0,R0,#+1
   \   0000016C   ........           _BLF     ShowLink,??ShowLink??rA
   1370                  }
   1371                }
   1372              }
   1373            }
   1374            return (0);
   \                     ??history_menu_onkey_3:
   \   00000170   0000A0E3           MOV      R0,#+0
   \   00000174   F081BDE8           POP      {R4-R8,PC}       ;; return
   1375          }
   1376          

   \                                 In segment CODE, align 4, keep-with-next
   1377          void history_menu_ghook(void *gui, int cmd)
   1378          {
   \                     history_menu_ghook:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
   \   00000004   0140A0E1           MOV      R4,R1
   1379            extern const int HISTORY_DEPTH;
   1380            int i;
   1381            char **history = MenuGetUserPointer(gui);
   \   00000008   E00100EF           SWI      +480
   \   0000000C   0050A0E1           MOV      R5,R0
   1382            if (cmd == TI_CMD_DESTROY)
   \   00000010   030054E3           CMP      R4,#+3
   \   00000014   1100001A           BNE      ??history_menu_ghook_0
   1383            {
   1384              for(i = 0; i < HISTORY_DEPTH; i++)
   \   00000018   50009FE5           LDR      R0,??history_menu_ghook_1  ;; HISTORY_DEPTH
   \   0000001C   0040A0E3           MOV      R4,#+0
   \   00000020   006090E5           LDR      R6,[R0, #+0]
   \   00000024   010056E3           CMP      R6,#+1
   \   00000028   070000AA           BGE      ??history_menu_ghook_2
   \   0000002C   0500A0E1           MOV      R0,R5
   \   00000030   150000EF           SWI      +21
   \   00000034   7080BDE8           POP      {R4-R6,PC}
   1385                if(history[i])
   \                     ??history_menu_ghook_3:
   \   00000038   040195E7           LDR      R0,[R5, +R4, LSL #+2]
   \   0000003C   000050E3           CMP      R0,#+0
   \   00000040   0000000A           BEQ      ??history_menu_ghook_4
   1386                  mfree(history[i]);
   \   00000044   150000EF           SWI      +21
   \                     ??history_menu_ghook_4:
   \   00000048   014084E2           ADD      R4,R4,#+1
   \                     ??history_menu_ghook_2:
   \   0000004C   060054E1           CMP      R4,R6
   \   00000050   F8FFFFBA           BLT      ??history_menu_ghook_3
   1387              mfree(history);
   \   00000054   0500A0E1           MOV      R0,R5
   \   00000058   150000EF           SWI      +21
   \   0000005C   7080BDE8           POP      {R4-R6,PC}
   1388            }
   1389            if (cmd == TI_CMD_FOCUS)
   \                     ??history_menu_ghook_0:
   \   00000060   0A0054E3           CMP      R4,#+10
   \   00000064   7080BD18           POPNE    {R4-R6,PC}
   1390            {
   1391              DisableIDLETMR();
   \   00000068   7F0100EF           SWI      +383
   1392            }
   1393          }
   \   0000006C   7080BDE8           POP      {R4-R6,PC}       ;; return
   \                     ??history_menu_ghook_1:
   \   00000070   ........           DC32     HISTORY_DEPTH
   1394          

   \                                 In segment CODE, align 4, keep-with-next
   1395          void history_menu_iconhndl(void *gui, int cur_item, void *user_pointer)
   1396          {
   \                     history_menu_iconhndl:
   \   00000000   F0412DE9           PUSH     {R4-R8,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   \   00000008   0150A0E1           MOV      R5,R1
   \   0000000C   0260A0E1           MOV      R6,R2
   1397            char **history=user_pointer;
   1398            int len;
   1399            WSHDR *ws;
   1400            void *item=AllocMenuItem(gui);
   \   00000010   970100EF           SWI      +407
   \   00000014   0070A0E1           MOV      R7,R0
   1401          
   1402            if (history[cur_item])
   \   00000018   050196E7           LDR      R0,[R6, +R5, LSL #+2]
   \   0000001C   000050E3           CMP      R0,#+0
   \   00000020   0C00000A           BEQ      ??history_menu_iconhndl_0
   1403            {
   1404              char* histtitle = strchr(history[cur_item], '|');
   \   00000024   7C10A0E3           MOV      R1,#+124
   \   00000028   180000EF           SWI      +24
   \   0000002C   0060B0E1           MOVS     R6,R0
   1405              if (histtitle)
   \   00000030   0800000A           BEQ      ??history_menu_iconhndl_0
   1406              {
   1407                histtitle++;
   1408                len=strlen(histtitle);
   \   00000034   016080E2           ADD      R6,R0,#+1
   \   00000038   0600A0E1           MOV      R0,R6
   \   0000003C   1B0000EF           SWI      +27
   1409                ws=AllocMenuWS(gui,len+4);
   \   00000040   041080E2           ADD      R1,R0,#+4
   \   00000044   0400A0E1           MOV      R0,R4
   \   00000048   980100EF           SWI      +408
   \   0000004C   0080A0E1           MOV      R8,R0
   1410                ascii2ws(ws,histtitle);
   \   00000050   0610A0E1           MOV      R1,R6
   \   00000054   060000EA           B        ??history_menu_iconhndl_1
   1411              }
   1412              else
   1413              {
   1414                ws=AllocMenuWS(gui,10);
   \                     ??history_menu_iconhndl_0:
   \   00000058   0A10A0E3           MOV      R1,#+10
   \   0000005C   0400A0E1           MOV      R0,R4
   \   00000060   980100EF           SWI      +408
   \   00000064   0080A0E1           MOV      R8,R0
   1415                ascii2ws(ws,lgpData[LGP_Error]);
   \   00000068   ........           LDR      R0,??DataTable40  ;; lgpData + 24
   \   0000006C   001090E5           LDR      R1,[R0, #+0]
   \   00000070   0800A0E1           MOV      R0,R8
   \                     ??history_menu_iconhndl_1:
   \   00000074   ........           _BLF     ascii2ws,??ascii2ws??rA
   1416              }
   1417            }
   1418            else
   1419            {
   1420              ws=AllocMenuWS(gui,10);
   1421              ascii2ws(ws,lgpData[LGP_Error]);
   1422            }
   1423            SetMenuItemText(gui, item, ws, cur_item);
   \   00000078   0530A0E1           MOV      R3,R5
   \   0000007C   0820A0E1           MOV      R2,R8
   \   00000080   0710A0E1           MOV      R1,R7
   \   00000084   0400A0E1           MOV      R0,R4
   \   00000088   9A0100EF           SWI      +410
   1424          }
   \   0000008C   F081BDE8           POP      {R4-R8,PC}       ;; return
   1425          

   \                                 In segment DATA_I, align 4, align-sorted
   1426          int history_menu_softkeys[]={0,1,2};
   \                     history_menu_softkeys:
   \   00000000                      DS8 12
   \   0000000C                      REQUIRE `?<Initializer for history_menu_softkeys>`

   \                                 In segment DATA_I, align 4, align-sorted
   1427          SOFTKEY_DESC history_menu_sk[]=
   \                     history_menu_sk:
   \   00000000                      DS8 24
   \   00000018                      REQUIRE `?<Initializer for history_menu_sk>`
   1428          {
   1429            {0x0018,0x0000,(int)"Go"},
   1430            {0x0001,0x0000,(int)"Cancel"},
   1431            {0x003D,0x0000,(int)LGP_DOIT_PIC}
   1432          };
   1433          
   1434          SOFTKEYSTAB history_menu_skt=
   1435          {
   1436            history_menu_sk,0
   1437          };
   1438          
   1439          HEADER_DESC history_menu_header={0,0,0,0,NULL,(int)"History:",LGP_NULL};
   \                     history_menu_header:
   \   00000018                      DS8 20
   \   0000002C                      REQUIRE `?<Initializer for history_menu_header>`
   1440          
   1441          MENU_DESC history_menu_struct=
   \                     history_menu_struct:
   \   0000002C                      DS8 44
   \   00000058                      REQUIRE `?<Initializer for history_menu_struct>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     history_menu_skt:
   \   00000000                      DS8 8
   \   00000008                      REQUIRE `?<Initializer for history_menu_skt>`
   1442          {
   1443            8, history_menu_onkey, history_menu_ghook, NULL,
   1444            history_menu_softkeys,
   1445            &history_menu_skt,
   1446            0x10,
   1447            history_menu_iconhndl,
   1448            NULL,   //Items
   1449            NULL,   //Procs
   1450            0   //n
   1451          };
   1452          

   \                                 In segment CODE, align 4, keep-with-next
   1453          int CreateHistoryMenu()
   1454          {
   \                     CreateHistoryMenu:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   \   00000004   04D04DE2           SUB      SP,SP,#+4
   1455            int depth;
   1456            char **history;
   1457            history = GetHistory(&depth);
   \   00000008   0D00A0E1           MOV      R0,SP
   \   0000000C   ........           _BLF     GetHistory,??GetHistory??rA
   \   00000010   0040A0E1           MOV      R4,R0
   1458            if (!depth) return 0;
   \   00000014   00009DE5           LDR      R0,[SP, #+0]
   \   00000018   000050E3           CMP      R0,#+0
   \   0000001C   3280BD08           POPEQ    {R1,R4,R5,PC}
   1459            patch_header(&history_menu_header);
   \   00000020   54509FE5           LDR      R5,??CreateHistoryMenu_0  ;; history_menu_sk
   \   00000024   180085E2           ADD      R0,R5,#+24
   \   00000028   ........           _BLF     patch_header,??patch_header??rA
   1460            history_menu_sk[0].lgp_id=(int)lgpData[LGP_Go];
   \   0000002C   ........           LDR      R0,??DataTable56  ;; lgpData
   1461            history_menu_sk[1].lgp_id=(int)lgpData[LGP_Cancel];
   1462            history_menu_header.lgp_id=(int)lgpData[LGP_HistoryHeader];
   1463            return CreateMenu(0, 0, &history_menu_struct, &history_menu_header, 0, depth, history, 0);
   \   00000030   183085E2           ADD      R3,R5,#+24
   \   00000034   D81090E5           LDR      R1,[R0, #+216]
   \   00000038   2C2085E2           ADD      R2,R5,#+44
   \   0000003C   041085E5           STR      R1,[R5, #+4]
   \   00000040   701090E5           LDR      R1,[R0, #+112]
   \   00000044   DC0090E5           LDR      R0,[R0, #+220]
   \   00000048   0C1085E5           STR      R1,[R5, #+12]
   \   0000004C   240085E5           STR      R0,[R5, #+36]
   \   00000050   0000A0E3           MOV      R0,#+0
   \   00000054   01002DE9           PUSH     {R0}
   \   00000058   10002DE9           PUSH     {R4}
   \   0000005C   08009DE5           LDR      R0,[SP, #+8]
   \   00000060   0010A0E3           MOV      R1,#+0
   \   00000064   01002DE9           PUSH     {R0}
   \   00000068   0000A0E3           MOV      R0,#+0
   \   0000006C   01002DE9           PUSH     {R0}
   \   00000070   520100EF           SWI      +338
   \   00000074   10D08DE2           ADD      SP,SP,#+16
   \   00000078   3280BDE8           POP      {R1,R4,R5,PC}    ;; return
   \                     ??CreateHistoryMenu_0:
   \   0000007C   ........           DC32     history_menu_sk
   1464          }
   1465          
   1466          //--------------------------------- Url input ----------------------------------
   1467          
   1468          SOFTKEY_DESC input_url_sk[]=
   1469          {
   1470            {0x0018,0x0000, NULL},
   1471            {0x0001,0x0000, NULL},
   1472            {0x003D,0x0000, (int)LGP_DOIT_PIC}
   1473          };
   1474          

   \                                 In segment DATA_C, align 4, align-sorted
   1475          static const SOFTKEYSTAB input_url_skt=
   \                     input_url_skt:
   \   00000000   ........0000       DC32 input_url_sk, 0
   \              0000        

   \                                 In segment DATA_I, align 4, align-sorted
   \                     input_url_sk:
   \   00000000                      DS8 24
   \   00000018                      REQUIRE `?<Initializer for input_url_sk>`
   1476          {
   1477            input_url_sk,0
   1478          };
   1479          
   1480          
   1481          HEADER_DESC input_url_header={0,0,0,0,NULL,NULL,LGP_NULL};
   \                     input_url_header:
   \   00000018                      DS8 20
   \   0000002C                      REQUIRE `?<Initializer for input_url_header>`
   1482          

   \                                 In segment CODE, align 4, keep-with-next
   1483          static void input_url_ghook(GUI *data, int cmd)
   1484          {
   1485            SOFTKEY_DESC sk={0x0FFF,0x0000,(int)lgpData[LGP_Go]};
   \                     input_url_ghook:
   \   00000000   44309FE5           LDR      R3,??input_url_ghook_0  ;; `?<Constant {4095, 0, 0}>_2`
   \   00000004   30402DE9           PUSH     {R4,R5,LR}
   \   00000008   08D04DE2           SUB      SP,SP,#+8
   \   0000000C   300093E8           LDM      R3,{R4,R5}
   \   00000010   38309FE5           LDR      R3,??input_url_ghook_0+0x4  ;; lgpData + 216
   \   00000014   0D20A0E1           MOV      R2,SP
   \   00000018   300082E8           STM      R2,{R4,R5}
   \   0000001C   003093E5           LDR      R3,[R3, #+0]
   1486            if (cmd==TI_CMD_FOCUS)
   \   00000020   0A0051E3           CMP      R1,#+10
   \   00000024   04308DE5           STR      R3,[SP, #+4]
   \   00000028   0100001A           BNE      ??input_url_ghook_1
   1487            {
   1488              DisableIDLETMR();
   \   0000002C   7F0100EF           SWI      +383
   \   00000030   3380BDE8           POP      {R0,R1,R4,R5,PC}
   1489            }
   1490            if (cmd==TI_CMD_REDRAW)
   \                     ??input_url_ghook_1:
   \   00000034   070051E3           CMP      R1,#+7
   \   00000038   3380BD18           POPNE    {R0,R1,R4,R5,PC}
   1491            {
   1492              SetSoftKey(data,&sk,SET_SOFT_KEY_N);
   \   0000003C   0020A0E3           MOV      R2,#+0
   \   00000040   0D10A0E1           MOV      R1,SP
   \   00000044   680100EF           SWI      +360
   1493            }
   1494          }
   \   00000048   3380BDE8           POP      {R0,R1,R4,R5,PC}  ;; return
   \                     ??input_url_ghook_0:
   \   0000004C   ........           DC32     `?<Constant {4095, 0, 0}>_2`
   \   00000050   ........           DC32     lgpData + 216
   1495          

   \                                 In segment CODE, align 4, keep-with-next
   1496          static void input_url_locret(void){}
   \                     input_url_locret:
   \   00000000   1EFF2FE1           BX       LR               ;; return
   1497          

   \                                 In segment CODE, align 4, keep-with-next
   1498          void input_url_options(USR_MENU_ITEM *item)
   1499          {
   \                     input_url_options:
   \   00000000   10402DE9           PUSH     {R4,LR}
   \   00000004   2CD04DE2           SUB      SP,SP,#+44
   \   00000008   0040A0E1           MOV      R4,R0
   1500            if (item->type==0)
   \   0000000C   0000D4E5           LDRB     R0,[R4, #+0]
   \   00000010   000050E3           CMP      R0,#+0
   1501            {
   1502              switch(item->cur_item)
   \   00000014   B800D401           LDRHEQ   R0,[R4, #+8]
   \   00000018   00005003           CMPEQ    R0,#+0
   \   0000001C   0300001A           BNE      ??input_url_options_0
   1503              {
   1504                case 0: ascii2ws(item->ws,lgpData[LGP_Clear]);break;
   \   00000020   44009FE5           LDR      R0,??input_url_options_1  ;; lgpData + 300
   \   00000024   001090E5           LDR      R1,[R0, #+0]
   \   00000028   0C0094E5           LDR      R0,[R4, #+12]
   \   0000002C   ........           _BLF     ascii2ws,??ascii2ws??rA
   1505              }
   1506            }
   1507            if (item->type==1)
   \                     ??input_url_options_0:
   \   00000030   0000D4E5           LDRB     R0,[R4, #+0]
   \   00000034   010050E3           CMP      R0,#+1
   \   00000038   0900001A           BNE      ??input_url_options_2
   1508            {
   1509              GUI *gui = (GUI*)(item->user_pointer);
   1510              EDITCONTROL ec;
   1511              ExtractEditControl(gui,1,&ec);
   \   0000003C   040094E5           LDR      R0,[R4, #+4]
   \   00000040   0D20A0E1           MOV      R2,SP
   \   00000044   0110A0E3           MOV      R1,#+1
   \   00000048   690100EF           SWI      +361
   1512              if (item->cur_item == 0)
   \   0000004C   B800D4E1           LDRH     R0,[R4, #+8]
   \   00000050   000050E3           CMP      R0,#+0
   \   00000054   0200001A           BNE      ??input_url_options_2
   1513                CutWSTR(ec.pWS,0);
   \   00000058   28009DE5           LDR      R0,[SP, #+40]
   \   0000005C   0010A0E3           MOV      R1,#+0
   \   00000060   260100EF           SWI      +294
   1514            }   
   1515          }
   \                     ??input_url_options_2:
   \   00000064   2CD08DE2           ADD      SP,SP,#+44       ;; stack cleaning
   \   00000068   1080BDE8           POP      {R4,PC}          ;; return
   \                     ??input_url_options_1:
   \   0000006C   ........           DC32     lgpData + 300
   1516          

   \                                 In segment CODE, align 4, keep-with-next
   1517          static int input_url_onkey(GUI *data, GUI_MSG *msg)
   1518          {
   \                     input_url_onkey:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
   \   00000004   2CD04DE2           SUB      SP,SP,#+44
   1519            if (msg->keys==0xFFF || msg->keys == 0x18)
   \   00000008   F220D1E1           LDRSH    R2,[R1, #+2]
   \   0000000C   FF30A0E3           MOV      R3,#+255
   \   00000010   F03E83E3           ORR      R3,R3,#0xF00
   \   00000014   030052E1           CMP      R2,R3
   \   00000018   18005213           CMPNE    R2,#+24
   \   0000001C   2D00001A           BNE      ??input_url_onkey_0
   1520            {
   1521              EDITCONTROL ec;
   1522              ExtractEditControl(data,1,&ec);
   1523              _safe_free(goto_url);
   \   00000020   ........           LDR      R4,??DataTable53  ;; goto_url
   \   00000024   0D20A0E1           MOV      R2,SP
   \   00000028   0110A0E3           MOV      R1,#+1
   \   0000002C   690100EF           SWI      +361
   \   00000030   000094E5           LDR      R0,[R4, #+0]
   \   00000034   000050E3           CMP      R0,#+0
   \   00000038   0000000A           BEQ      ??input_url_onkey_1
   \   0000003C   150000EF           SWI      +21
   \                     ??input_url_onkey_1:
   \   00000040   0050A0E3           MOV      R5,#+0
   \   00000044   005084E5           STR      R5,[R4, #+0]
   1524              char * s = goto_url = (char *)malloc(ec.pWS->wsbody[0]+3);
   \   00000048   28009DE5           LDR      R0,[SP, #+40]
   1525              *s++='0';
   1526              *s++='/';
   1527              for (int i=0; i<ec.pWS->wsbody[0]; i++) *s++=char16to8(ec.pWS->wsbody[i+1]);
   \   0000004C   0070A0E3           MOV      R7,#+0
   \   00000050   000090E5           LDR      R0,[R0, #+0]
   \   00000054   B000D0E1           LDRH     R0,[R0, #+0]
   \   00000058   030080E2           ADD      R0,R0,#+3
   \   0000005C   140000EF           SWI      +20
   \   00000060   000084E5           STR      R0,[R4, #+0]
   \   00000064   0060A0E1           MOV      R6,R0
   \   00000068   3000A0E3           MOV      R0,#+48
   \   0000006C   ........           STRB     R0,[R6], #+1
   \   00000070   2F00A0E3           MOV      R0,#+47
   \   00000074   ........           STRB     R0,[R6], #+1
   \   00000078   28009DE5           LDR      R0,[SP, #+40]
   \   0000007C   000090E5           LDR      R0,[R0, #+0]
   \   00000080   B000D0E1           LDRH     R0,[R0, #+0]
   \   00000084   000050E3           CMP      R0,#+0
   \   00000088   0500001A           BNE      ??input_url_onkey_2
   \   0000008C   090000EA           B        ??input_url_onkey_3
   \                     ??input_url_onkey_4:
   \   00000090   870080E0           ADD      R0,R0,R7, LSL #+1
   \   00000094   B200D0E1           LDRH     R0,[R0, #+2]
   \   00000098   017087E2           ADD      R7,R7,#+1
   \   0000009C   ........           _BLF     char16to8,??char16to8??rA
   \   000000A0   ........           STRB     R0,[R6], #+1
   \                     ??input_url_onkey_2:
   \   000000A4   28009DE5           LDR      R0,[SP, #+40]
   \   000000A8   000090E5           LDR      R0,[R0, #+0]
   \   000000AC   B010D0E1           LDRH     R1,[R0, #+0]
   \   000000B0   010057E1           CMP      R7,R1
   \   000000B4   F5FFFFBA           BLT      ??input_url_onkey_4
   1528              *s = 0;
   \                     ??input_url_onkey_3:
   \   000000B8   0050C6E5           STRB     R5,[R6, #+0]
   1529              goto_url = ToWeb(goto_url,0,0);
   \   000000BC   000094E5           LDR      R0,[R4, #+0]
   \   000000C0   0020A0E3           MOV      R2,#+0
   \   000000C4   0210A0E1           MOV      R1,R2
   \   000000C8   ........           _BLF     ToWeb,??ToWeb??rA
   \   000000CC   000084E5           STR      R0,[R4, #+0]
   1530              return 0xFF;
   \   000000D0   FF00A0E3           MOV      R0,#+255
   \   000000D4   0C0000EA           B        ??input_url_onkey_5
   1531            }
   1532            if ((msg->gbsmsg->msg==KEY_DOWN) && (msg->gbsmsg->submess == ENTER_BUTTON))
   \                     ??input_url_onkey_0:
   \   000000D8   041091E5           LDR      R1,[R1, #+4]
   \   000000DC   9330A0E3           MOV      R3,#+147
   \   000000E0   042091E5           LDR      R2,[R1, #+4]
   \   000000E4   403F83E3           ORR      R3,R3,#0x100
   \   000000E8   030052E1           CMP      R2,R3
   \   000000EC   08109105           LDREQ    R1,[R1, #+8]
   \   000000F0   1A005103           CMPEQ    R1,#+26
   \   000000F4   0600001A           BNE      ??input_url_onkey_6
   1533            {
   1534              EDIT_OpenOptionMenuWithUserItems(data,input_url_options,data,1);
   \   000000F8   20109FE5           LDR      R1,??input_url_onkey_7  ;; input_url_options
   \   000000FC   0130A0E3           MOV      R3,#+1
   \   00000100   0020A0E1           MOV      R2,R0
   \   00000104   E50100EF           SWI      +485
   1535              return -1;
   \   00000108   0000E0E3           MVN      R0,#+0
   \                     ??input_url_onkey_5:
   \   0000010C   2CD08DE2           ADD      SP,SP,#+44
   \   00000110   F080BDE8           POP      {R4-R7,PC}
   1536            }
   1537            return (0);
   \                     ??input_url_onkey_6:
   \   00000114   0000A0E3           MOV      R0,#+0
   \   00000118   2CD08DE2           ADD      SP,SP,#+44
   \   0000011C   F080BDE8           POP      {R4-R7,PC}       ;; return
   \                     ??input_url_onkey_7:
   \   00000120   ........           DC32     input_url_options
   1538          }
   1539          

   \                                 In segment DATA_C, align 4, align-sorted
   1540          static const INPUTDIA_DESC input_url_desc =
   \                     input_url_desc:
   \   00000000   01000000....       DC32 1, input_url_onkey, input_url_ghook, input_url_locret, 0
   \              ............
   \              ........0000
   \              0000        
   \   00000014   ........           DC32 input_url_skt
   \   00000018   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   00000020   080000006400       DC32 8, 100, 101, 0, 0, 1073741824
   \              000065000000
   \              000000000000
   \              000000000040
   1541          {
   1542            1,
   1543            input_url_onkey,
   1544            input_url_ghook,
   1545            (void *)input_url_locret,
   1546            0,
   1547            &input_url_skt,
   1548            {0,0,0,0},
   1549            FONT_SMALL,
   1550            100,
   1551            101,
   1552            0,
   1553            //  0x00000001 - Выровнять по правому краю
   1554            //  0x00000002 - Выровнять по центру
   1555            //  0x00000004 - Инверсия знакомест
   1556            //  0x00000008 - UnderLine
   1557            //  0x00000020 - Не переносить слова
   1558            //  0x00000200 - bold
   1559            0,
   1560            //  0x00000002 - ReadOnly
   1561            //  0x00000004 - Не двигается курсор
   1562            //  0x40000000 - Поменять местами софт-кнопки
   1563            0x40000000
   1564          };
   1565          
   1566          

   \                                 In segment CODE, align 4, keep-with-next
   1567          int CreateInputUrl()
   1568          {
   \                     CreateInputUrl:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
   \   00000004   2CD04DE2           SUB      SP,SP,#+44
   1569            void *ma=malloc_adr();
   \   00000008   148000EF           SWI      +32788
   \   0000000C   0040A0E1           MOV      R4,R0
   1570            void *eq;
   1571            char *url_start = "";
   1572            EDITCONTROL ec;
   1573            
   1574            eq=AllocEQueue(ma,mfree_adr());    // Extension
   \   00000010   158000EF           SWI      +32789
   \   00000014   0010A0E1           MOV      R1,R0
   \   00000018   0400A0E1           MOV      R0,R4
   \   0000001C   630100EF           SWI      +355
   \   00000020   0050A0E1           MOV      R5,R0
   1575            WSHDR *ews=AllocWS(1024);
   \   00000024   400EA0E3           MOV      R0,#+1024
   \   00000028   250100EF           SWI      +293
   \   0000002C   0060A0E1           MOV      R6,R0
   1576          
   1577            MAIN_CSM *main_csm;
   1578            if ((main_csm=(MAIN_CSM *)FindCSMbyID(maincsm_id)))
   \   00000030   ........           LDR      R0,??DataTable55  ;; maincsm_id
   \   00000034   5B7F8FE2           ADR      R7,??CreateInputUrl_0  ;; ""
   \   00000038   000090E5           LDR      R0,[R0, #+0]
   \   0000003C   080100EF           SWI      +264
   \   00000040   000050E3           CMP      R0,#+0
   \   00000044   2E00000A           BEQ      ??CreateInputUrl_1
   1579            {
   1580              VIEW_GUI *p=FindGUIbyId(main_csm->view_id,NULL);
   \   00000048   280090E5           LDR      R0,[R0, #+40]
   \   0000004C   0010A0E3           MOV      R1,#+0
   \   00000050   090200EF           SWI      +521
   1581              if (p->vd->pageurl)
   \   00000054   340090E5           LDR      R0,[R0, #+52]
   \   00000058   E01090E5           LDR      R1,[R0, #+224]
   \   0000005C   000051E3           CMP      R1,#+0
   \   00000060   0D00000A           BEQ      ??CreateInputUrl_2
   1582              {
   1583                for(url_start = p->vd->pageurl; *url_start && *url_start != '/'; url_start++);
   \   00000064   0170A0E1           MOV      R7,R1
   \   00000068   000000EA           B        ??CreateInputUrl_3
   \                     ??CreateInputUrl_4:
   \   0000006C   017087E2           ADD      R7,R7,#+1
   \                     ??CreateInputUrl_3:
   \   00000070   0000D7E5           LDRB     R0,[R7, #+0]
   \   00000074   000050E3           CMP      R0,#+0
   \   00000078   2F005013           CMPNE    R0,#+47
   \   0000007C   FAFFFF1A           BNE      ??CreateInputUrl_4
   1584                for(; *url_start && *url_start == '/'; url_start++);
   \                     ??CreateInputUrl_5:
   \   00000080   0000D7E5           LDRB     R0,[R7, #+0]
   \   00000084   000050E3           CMP      R0,#+0
   \   00000088   1D00000A           BEQ      ??CreateInputUrl_1
   \   0000008C   2F0050E3           CMP      R0,#+47
   \   00000090   1B00001A           BNE      ??CreateInputUrl_1
   \   00000094   017087E2           ADD      R7,R7,#+1
   \   00000098   F8FFFFEA           B        ??CreateInputUrl_5
   1585              }
   1586              else
   1587              {
   1588                switch(view_url_mode)
   \                     ??CreateInputUrl_2:
   \   0000009C   ........           LDR      R1,??DataTable44  ;; view_url_mode
   \   000000A0   ........           LDR      R0,??DataTable45  ;; view_url
   \   000000A4   001091E5           LDR      R1,[R1, #+0]
   \   000000A8   000090E5           LDR      R0,[R0, #+0]
   \   000000AC   000051E3           CMP      R1,#+0
   \   000000B0   0200000A           BEQ      ??CreateInputUrl_6
   \   000000B4   011051E2           SUBS     R1,R1,#+1
   \   000000B8   0200000A           BEQ      ??CreateInputUrl_7
   \   000000BC   100000EA           B        ??CreateInputUrl_1
   1589                {
   1590                case MODE_FILE:
   1591                  url_start=view_url;
   \                     ??CreateInputUrl_6:
   \   000000C0   0070A0E1           MOV      R7,R0
   1592                  URL_unescape(url_start);
   \   000000C4   0D0000EA           B        ??CreateInputUrl_8
   1593                  break;
   1594                case MODE_URL:
   1595                  for(url_start = view_url; *url_start && *url_start != '/'; url_start++);
   \                     ??CreateInputUrl_7:
   \   000000C8   0070A0E1           MOV      R7,R0
   \   000000CC   000000EA           B        ??CreateInputUrl_9
   \                     ??CreateInputUrl_10:
   \   000000D0   017087E2           ADD      R7,R7,#+1
   \                     ??CreateInputUrl_9:
   \   000000D4   0000D7E5           LDRB     R0,[R7, #+0]
   \   000000D8   000050E3           CMP      R0,#+0
   \   000000DC   2F005013           CMPNE    R0,#+47
   \   000000E0   FAFFFF1A           BNE      ??CreateInputUrl_10
   1596                  for(; *url_start && *url_start == '/'; url_start++);
   \                     ??CreateInputUrl_11:
   \   000000E4   0000D7E5           LDRB     R0,[R7, #+0]
   \   000000E8   000050E3           CMP      R0,#+0
   \   000000EC   0200000A           BEQ      ??CreateInputUrl_12
   \   000000F0   2F0050E3           CMP      R0,#+47
   \   000000F4   01708702           ADDEQ    R7,R7,#+1
   \   000000F8   F9FFFF0A           BEQ      ??CreateInputUrl_11
   1597                  URL_unescape(url_start);
   \                     ??CreateInputUrl_12:
   \   000000FC   0700A0E1           MOV      R0,R7
   \                     ??CreateInputUrl_8:
   \   00000100   ........           _BLF     URL_unescape,??URL_unescape??rA
   1598                  break;
   1599                default:
   1600                  break;
   1601                }
   1602              }
   1603            }
   1604            utf8_2ws(ews, url_start, 1024);
   \                     ??CreateInputUrl_1:
   \   00000104   402EA0E3           MOV      R2,#+1024
   \   00000108   0710A0E1           MOV      R1,R7
   \   0000010C   0600A0E1           MOV      R0,R6
   \   00000110   E30100EF           SWI      +483
   1605            
   1606            PrepareEditControl(&ec);
   \   00000114   0D00A0E1           MOV      R0,SP
   \   00000118   640100EF           SWI      +356
   1607            ConstructEditControl(&ec,ECT_NORMAL_TEXT, ECF_APPEND_EOL, ews, 1024);
   \   0000011C   400EA0E3           MOV      R0,#+1024
   \   00000120   01002DE9           PUSH     {R0}
   \   00000124   0630A0E1           MOV      R3,R6
   \   00000128   4020A0E3           MOV      R2,#+64
   \   0000012C   0310A0E3           MOV      R1,#+3
   \   00000130   04008DE2           ADD      R0,SP,#+4
   \   00000134   650100EF           SWI      +357
   1608            AddEditControlToEditQend(eq,&ec,ma); //2
   \   00000138   0420A0E1           MOV      R2,R4
   1609          
   1610            FreeWS(ews);
   1611            patch_header(&input_url_header);
   \   0000013C   68409FE5           LDR      R4,??CreateInputUrl_0+0x4  ;; input_url_sk
   \   00000140   04108DE2           ADD      R1,SP,#+4
   \   00000144   0500A0E1           MOV      R0,R5
   \   00000148   660100EF           SWI      +358
   \   0000014C   0600A0E1           MOV      R0,R6
   1612            patch_input(&input_url_desc);
   \   00000150   58609FE5           LDR      R6,??CreateInputUrl_0+0x8  ;; input_url_desc
   \   00000154   290100EF           SWI      +297
   \   00000158   180084E2           ADD      R0,R4,#+24
   \   0000015C   ........           _BLF     patch_header,??patch_header??rA
   \   00000160   0600A0E1           MOV      R0,R6
   \   00000164   ........           _BLF     patch_input,??patch_input??rA
   1613            input_url_sk[0].lgp_id=(int)lgpData[LGP_Go];
   \   00000168   ........           LDR      R0,??DataTable56  ;; lgpData
   1614            input_url_sk[1].lgp_id=(int)lgpData[LGP_Cancel];
   1615            input_url_header.lgp_id=(int)lgpData[LGP_AddressHeader];
   1616            return CreateInputTextDialog(&input_url_desc, &input_url_header, eq,1,0);
   \   0000016C   0130A0E3           MOV      R3,#+1
   \   00000170   D81090E5           LDR      R1,[R0, #+216]
   \   00000174   0520A0E1           MOV      R2,R5
   \   00000178   041084E5           STR      R1,[R4, #+4]
   \   0000017C   701090E5           LDR      R1,[R0, #+112]
   \   00000180   E00090E5           LDR      R0,[R0, #+224]
   \   00000184   0C1084E5           STR      R1,[R4, #+12]
   \   00000188   240084E5           STR      R0,[R4, #+36]
   \   0000018C   0000A0E3           MOV      R0,#+0
   \   00000190   01002DE9           PUSH     {R0}
   \   00000194   181084E2           ADD      R1,R4,#+24
   \   00000198   0600A0E1           MOV      R0,R6
   \   0000019C   670100EF           SWI      +359
   \   000001A0   34D08DE2           ADD      SP,SP,#+52
   \   000001A4   F080BDE8           POP      {R4-R7,PC}       ;; return
   \                     ??CreateInputUrl_0:
   \   000001A8   00000000           DC8      "",+0,+0,+0
   \   000001AC   ........           DC32     input_url_sk
   \   000001B0   ........           DC32     input_url_desc
   1617          }
   1618          
   1619          //--------------------------------- Main menu ----------------------------------
   1620          

   \                                 In segment CODE, align 4, keep-with-next
   1621          static void main_menu_goto_url(GUI *gui)
   1622          {
   1623            MAIN_CSM *main_csm;
   1624            int goto_url_id;
   1625            if ((main_csm=(MAIN_CSM *)FindCSMbyID(maincsm_id)))
   \                     main_menu_goto_url:
   \   00000000   ........           LDR      R0,??DataTable55  ;; maincsm_id
   \   00000004   10402DE9           PUSH     {R4,LR}
   \   00000008   000090E5           LDR      R0,[R0, #+0]
   \   0000000C   080100EF           SWI      +264
   \   00000010   0040B0E1           MOVS     R4,R0
   \   00000014   0100000A           BEQ      ??main_menu_goto_url_0
   1626            {
   1627              goto_url_id=CreateInputUrl();
   1628              main_csm->goto_url=goto_url_id;
   \   00000018   ........           BL       CreateInputUrl
   \   0000001C   2C0084E5           STR      R0,[R4, #+44]
   1629            } 
   1630            GeneralFuncF1(1);  
   \                     ??main_menu_goto_url_0:
   \   00000020   0100A0E3           MOV      R0,#+1
   \   00000024   3B0100EF           SWI      +315
   1631          }
   \   00000028   1080BDE8           POP      {R4,PC}          ;; return
   1632          

   \                                 In segment CODE, align 4, keep-with-next
   1633          static void main_menu_goto_bookmarks(GUI *gui)
   1634          {
   1635            MAIN_CSM *main_csm;
   1636            int bookmark_menu_id;
   1637            if ((main_csm=(MAIN_CSM *)FindCSMbyID(maincsm_id)))
   \                     main_menu_goto_bookmarks:
   \   00000000   ........           LDR      R0,??DataTable55  ;; maincsm_id
   \   00000004   10402DE9           PUSH     {R4,LR}
   \   00000008   000090E5           LDR      R0,[R0, #+0]
   \   0000000C   080100EF           SWI      +264
   \   00000010   0040B0E1           MOVS     R4,R0
   \   00000014   0100000A           BEQ      ??main_menu_goto_bookmarks_0
   1638            {
   1639              bookmark_menu_id=CreateBookmarksMenu();
   1640              main_csm->sel_bmk=bookmark_menu_id;
   \   00000018   ........           BL       CreateBookmarksMenu
   \   0000001C   300084E5           STR      R0,[R4, #+48]
   1641            } 
   1642            GeneralFuncF1(1);
   \                     ??main_menu_goto_bookmarks_0:
   \   00000020   0100A0E3           MOV      R0,#+1
   \   00000024   3B0100EF           SWI      +315
   1643          }
   \   00000028   1080BDE8           POP      {R4,PC}          ;; return
   1644          
   1645          

   \                                 In segment CODE, align 4, keep-with-next
   1646          static void main_menu_search(GUI *gui)
   1647          {
   1648            MAIN_CSM *main_csm;
   1649            int search_id;
   1650            if ((main_csm=(MAIN_CSM *)FindCSMbyID(maincsm_id)))
   \                     main_menu_search:
   \   00000000   ........           LDR      R0,??DataTable55  ;; maincsm_id
   \   00000004   10402DE9           PUSH     {R4,LR}
   \   00000008   000090E5           LDR      R0,[R0, #+0]
   \   0000000C   080100EF           SWI      +264
   \   00000010   0040B0E1           MOVS     R4,R0
   \   00000014   0100000A           BEQ      ??main_menu_search_0
   1651            {
   1652              search_id=CreateSearchDialog();
   1653              main_csm->goto_url=search_id;
   \   00000018   ........           BL       CreateSearchDialog
   \   0000001C   2C0084E5           STR      R0,[R4, #+44]
   1654            } 
   1655            GeneralFuncF1(1);
   \                     ??main_menu_search_0:
   \   00000020   0100A0E3           MOV      R0,#+1
   \   00000024   3B0100EF           SWI      +315
   1656          }
   \   00000028   1080BDE8           POP      {R4,PC}          ;; return
   1657          

   \                                 In segment CODE, align 4, keep-with-next
   1658          static void main_menu_find(GUI *gui)
   1659          {
   \                     main_menu_find:
   \   00000000   10402DE9           PUSH     {R4,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   1660            if (FindCSMbyID(maincsm_id))
   \   00000008   ........           LDR      R0,??DataTable55  ;; maincsm_id
   \   0000000C   000090E5           LDR      R0,[R0, #+0]
   \   00000010   080100EF           SWI      +264
   \   00000014   000050E3           CMP      R0,#+0
   \   00000018   0200000A           BEQ      ??main_menu_find_0
   1661            {
   1662              CreateFindDialog(MenuGetUserPointer(gui));
   \   0000001C   0400A0E1           MOV      R0,R4
   \   00000020   E00100EF           SWI      +480
   \   00000024   ........           BL       CreateFindDialog
   1663            } 
   1664            GeneralFuncF1(1);
   \                     ??main_menu_find_0:
   \   00000028   0100A0E3           MOV      R0,#+1
   \   0000002C   3B0100EF           SWI      +315
   1665          }
   \   00000030   1080BDE8           POP      {R4,PC}          ;; return
   1666          
   1667          

   \                                 In segment CODE, align 4, keep-with-next
   1668          static void main_menu_goto_history(GUI *gui)
   1669          {
   1670            MAIN_CSM *main_csm;
   1671            int history_menu_id;
   1672            if ((main_csm=(MAIN_CSM *)FindCSMbyID(maincsm_id)))
   \                     main_menu_goto_history:
   \   00000000   ........           LDR      R0,??DataTable55  ;; maincsm_id
   \   00000004   10402DE9           PUSH     {R4,LR}
   \   00000008   000090E5           LDR      R0,[R0, #+0]
   \   0000000C   080100EF           SWI      +264
   \   00000010   0040B0E1           MOVS     R4,R0
   \   00000014   0100000A           BEQ      ??main_menu_goto_history_0
   1673            {
   1674              history_menu_id=CreateHistoryMenu();
   1675              main_csm->sel_bmk=history_menu_id;
   \   00000018   ........           BL       CreateHistoryMenu
   \   0000001C   300084E5           STR      R0,[R4, #+48]
   1676            } 
   1677            GeneralFuncF1(1);
   \                     ??main_menu_goto_history_0:
   \   00000020   0100A0E3           MOV      R0,#+1
   \   00000024   3B0100EF           SWI      +315
   1678          }
   \   00000028   1080BDE8           POP      {R4,PC}          ;; return
   1679          

   \                                 In segment CODE, align 4, keep-with-next
   1680          static void main_menu_options(GUI *gui)
   1681          {
   \                     main_menu_options:
   \   00000000   10402DE9           PUSH     {R4,LR}
   1682            WSHDR *ws;
   1683            ws=AllocWS(150);
   \   00000004   9600A0E3           MOV      R0,#+150
   \   00000008   250100EF           SWI      +293
   \   0000000C   0040A0E1           MOV      R4,R0
   1684            str_2ws(ws,successed_config_filename,128);
   \   00000010   30009FE5           LDR      R0,??main_menu_options_0  ;; successed_config_filename
   \   00000014   8020A0E3           MOV      R2,#+128
   \   00000018   001090E5           LDR      R1,[R0, #+0]
   \   0000001C   0400A0E1           MOV      R0,R4
   \   00000020   6C0100EF           SWI      +364
   1685            ExecuteFile(ws,0,0);
   \   00000024   0020A0E3           MOV      R2,#+0
   \   00000028   0010A0E3           MOV      R1,#+0
   \   0000002C   0400A0E1           MOV      R0,R4
   \   00000030   940000EF           SWI      +148
   1686            FreeWS(ws);
   \   00000034   0400A0E1           MOV      R0,R4
   \   00000038   290100EF           SWI      +297
   1687            GeneralFuncF1(1);
   \   0000003C   0100A0E3           MOV      R0,#+1
   \   00000040   3B0100EF           SWI      +315
   1688          }
   \   00000044   1080BDE8           POP      {R4,PC}          ;; return
   \                     ??main_menu_options_0:
   \   00000048   ........           DC32     successed_config_filename
   1689          

   \                                 In segment CODE, align 4, keep-with-next
   1690          static void main_menu_quit(GUI *gui)
   1691          {
   1692            MAIN_CSM *main_csm;
   1693            if ((main_csm=(MAIN_CSM *)FindCSMbyID(maincsm_id)))
   \                     main_menu_quit:
   \   00000000   ........           LDR      R0,??DataTable55  ;; maincsm_id
   \   00000004   30402DE9           PUSH     {R4,R5,LR}
   \   00000008   000090E5           LDR      R0,[R0, #+0]
   \   0000000C   080100EF           SWI      +264
   \   00000010   0040B0E1           MOVS     R4,R0
   \   00000014   0900000A           BEQ      ??main_menu_quit_0
   1694            {
   1695              _safe_free(goto_url);
   \   00000018   ........           LDR      R5,??DataTable53  ;; goto_url
   \   0000001C   000095E5           LDR      R0,[R5, #+0]
   \   00000020   000050E3           CMP      R0,#+0
   \   00000024   0100000A           BEQ      ??main_menu_quit_1
   \   00000028   150000EF           SWI      +21
   \   0000002C   0000A0E3           MOV      R0,#+0
   \                     ??main_menu_quit_1:
   \   00000030   000085E5           STR      R0,[R5, #+0]
   1696              GeneralFunc_flag1(main_csm->view_id,0xFF);
   \   00000034   280094E5           LDR      R0,[R4, #+40]
   \   00000038   FF10A0E3           MOV      R1,#+255
   \   0000003C   3D0100EF           SWI      +317
   1697              GeneralFuncF1(1);
   1698            }
   1699            else
   1700            {
   1701              GeneralFuncF1(1);
   \                     ??main_menu_quit_0:
   \   00000040   0100A0E3           MOV      R0,#+1
   \   00000044   3B0100EF           SWI      +315
   1702            }
   1703          }
   \   00000048   3080BDE8           POP      {R4,R5,PC}       ;; return
   1704          

   \                                 In segment CODE, align 4, keep-with-next
   1705          static void main_menu_savepage(GUI *gui)
   1706          {
   \                     main_menu_savepage:
   \   00000000   10402DE9           PUSH     {R4,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   1707            if (FindCSMbyID(maincsm_id))
   \   00000008   ........           LDR      R0,??DataTable55  ;; maincsm_id
   \   0000000C   000090E5           LDR      R0,[R0, #+0]
   \   00000010   080100EF           SWI      +264
   \   00000014   000050E3           CMP      R0,#+0
   \   00000018   0200000A           BEQ      ??main_menu_savepage_0
   1708            {
   1709              CreateSavePageDialog(MenuGetUserPointer(gui));
   \   0000001C   0400A0E1           MOV      R0,R4
   \   00000020   E00100EF           SWI      +480
   \   00000024   ........           BL       CreateSavePageDialog
   1710            } 
   1711            GeneralFuncF1(1);
   \                     ??main_menu_savepage_0:
   \   00000028   0100A0E3           MOV      R0,#+1
   \   0000002C   3B0100EF           SWI      +315
   1712          }
   \   00000030   1080BDE8           POP      {R4,PC}          ;; return
   1713          

   \                                 In segment DATA_C, align 4, align-sorted
   1714          static const int main_menu_softkeys[]={0,1,2};
   \                     main_menu_softkeys:
   \   00000000   000000000100       DC32 0, 1, 2
   \              000002000000
   1715          
   1716          SOFTKEY_DESC main_menu_sk[]=
   1717          {
   1718            {0x0018,0x0000,(int)"Select"},
   1719            {0x0001,0x0000,(int)"Back"},
   1720            {0x003D,0x0000,(int)LGP_DOIT_PIC}
   1721          };
   1722          

   \                                 In segment DATA_C, align 4, align-sorted
   1723          static const SOFTKEYSTAB main_menu_skt=
   \                     main_menu_skt:
   \   00000000   ........0000       DC32 main_menu_sk, 0
   \              0000        

   \                                 In segment DATA_I, align 4, align-sorted
   1724          {
   1725            main_menu_sk,0
   1726          };
   1727          
   1728          #define MAIN_MENU_ITEMS_N 8
   1729          HEADER_DESC main_menu_header={0,0,0,0,NULL,(int)"Menu:",LGP_NULL};
   1730          
   1731          MENUITEM_DESC main_menu_items[MAIN_MENU_ITEMS_N]=
   \                     main_menu_items:
   \   00000000                      DS8 224
   \   000000E0                      REQUIRE `?<Initializer for main_menu_items>`
   \                     main_menu_sk:
   \   000000E0                      DS8 24
   \   000000F8                      REQUIRE `?<Initializer for main_menu_sk>`
   \                     main_menu_header:
   \   000000F8                      DS8 20
   \   0000010C                      REQUIRE `?<Initializer for main_menu_header>`
   1732          {
   1733            {NULL, NULL, LGP_NULL, 0, NULL, MENU_FLAG3, MENU_FLAG2}, //0
   1734            {NULL, NULL, LGP_NULL, 0, NULL, MENU_FLAG3, MENU_FLAG2}, //1
   1735            {NULL, NULL, LGP_NULL, 0, NULL, MENU_FLAG3, MENU_FLAG2}, //2
   1736            {NULL, NULL, LGP_NULL, 0, NULL, MENU_FLAG3, MENU_FLAG2}, //3
   1737            {NULL, NULL, LGP_NULL, 0, NULL, MENU_FLAG3, MENU_FLAG2}, //3
   1738            {NULL, NULL, LGP_NULL, 0, NULL, MENU_FLAG3, MENU_FLAG2}, //3
   1739            {NULL, NULL, LGP_NULL, 0, NULL, MENU_FLAG3, MENU_FLAG2}, //3
   1740            {NULL, NULL, LGP_NULL, 0, NULL, MENU_FLAG3, MENU_FLAG2}  //4
   1741          };
   1742          

   \                                 In segment DATA_C, align 4, align-sorted
   1743          static const MENUPROCS_DESC main_menu_procs[MAIN_MENU_ITEMS_N]=
   \                     main_menu_procs:
   \   00000000   ............       DC32 main_menu_goto_url, main_menu_goto_bookmarks
   \              ....        
   \   00000008   ............       DC32 main_menu_goto_history, main_menu_options, main_menu_search
   \              ............
   \   00000014   ............       DC32 main_menu_find, main_menu_savepage, main_menu_quit
   \              ............
   1744          {
   1745            main_menu_goto_url,
   1746            main_menu_goto_bookmarks,
   1747            main_menu_goto_history,
   1748            main_menu_options,
   1749            main_menu_search,
   1750            main_menu_find,
   1751            main_menu_savepage,
   1752            main_menu_quit
   1753          };
   1754          

   \                                 In segment CODE, align 4, keep-with-next
   1755          static void main_menu_ghook(void *data, int cmd)
   1756          {
   \                     main_menu_ghook:
   \   00000000   00402DE9           PUSH     {LR}
   1757            if (cmd == TI_CMD_FOCUS)
   \   00000004   0A0051E3           CMP      R1,#+10
   \   00000008   0080BD18           POPNE    {PC}
   1758            {
   1759              DisableIDLETMR();
   \   0000000C   7F0100EF           SWI      +383
   1760            }
   1761          }
   \   00000010   0080BDE8           POP      {PC}             ;; return
   1762          

   \                                 In segment CODE, align 4, keep-with-next
   1763          static void About()
   1764          {
   1765            #define COPYRIGHT "BalletMini\nRevision %d\n(C) by Rst7/CBSIE\nKren\nKalemas\nSinclair\nCaptain_SISka\nThe_Zen\nMiha_r"
   1766            char s[256];
   1767            snprintf(s,255,COPYRIGHT,__SVN_REVISION__);
   \                     About:
   \   00000000   28209FE5           LDR      R2,??About_0     ;; `?<Constant "BalletMini\\nRevision %...">`
   \   00000004   00402DE9           PUSH     {LR}
   \   00000008   40DF4DE2           SUB      SP,SP,#+256
   \   0000000C   0030A0E3           MOV      R3,#+0
   \   00000010   FF10A0E3           MOV      R1,#+255
   \   00000014   0D00A0E1           MOV      R0,SP
   \   00000018   1B0100EF           SWI      +283
   1768            ShowMSG(2, (int)s);
   \   0000001C   0D10A0E1           MOV      R1,SP
   \   00000020   0200A0E3           MOV      R0,#+2
   \   00000024   480100EF           SWI      +328
   1769          }
   \   00000028   40DF8DE2           ADD      SP,SP,#+256
   \   0000002C   0080BDE8           POP      {PC}             ;; return
   \                     ??About_0:
   \   00000030   ........           DC32     `?<Constant "BalletMini\\nRevision %...">`
   1770          
   1771          

   \                                 In segment CODE, align 4, keep-with-next
   1772          static int main_menu_onkey(void *data, GUI_MSG *msg)
   1773          {
   \                     main_menu_onkey:
   \   00000000   00402DE9           PUSH     {LR}
   1774            if ((msg->gbsmsg->msg==KEY_DOWN) && (msg->gbsmsg->submess == '#'))
   \   00000004   040091E5           LDR      R0,[R1, #+4]
   \   00000008   9320A0E3           MOV      R2,#+147
   \   0000000C   041090E5           LDR      R1,[R0, #+4]
   \   00000010   402F82E3           ORR      R2,R2,#0x100
   \   00000014   020051E1           CMP      R1,R2
   \   00000018   08009005           LDREQ    R0,[R0, #+8]
   \   0000001C   23005003           CMPEQ    R0,#+35
   \   00000020   0000001A           BNE      ??main_menu_onkey_0
   1775            {
   1776              About();
   \   00000024   ........           BL       About
   1777            }
   1778            return 0;
   \                     ??main_menu_onkey_0:
   \   00000028   0000A0E3           MOV      R0,#+0
   \   0000002C   0080BDE8           POP      {PC}             ;; return
   1779          }
   1780          

   \                                 In segment DATA_C, align 4, align-sorted
   1781          static const MENU_DESC main_menu_struct=
   \                     main_menu_struct:
   \   00000000   08000000....       DC32 8, main_menu_onkey, main_menu_ghook, 0H, main_menu_softkeys
   \              ............
   \              00000000....
   \              ....        
   \   00000014   ........1000       DC32 main_menu_skt, 16, 0H, main_menu_items, main_menu_procs, 8
   \              000000000000
   \              ............
   \              ....08000000
   1782          {
   1783            8, main_menu_onkey, main_menu_ghook, NULL,
   1784            main_menu_softkeys,
   1785            &main_menu_skt,
   1786            0x10,//MENU_FLAG,
   1787            NULL,
   1788            main_menu_items,//menuitems,
   1789            main_menu_procs,//menuprocs,
   1790            MAIN_MENU_ITEMS_N
   1791          };
   1792          

   \                                 In segment CODE, align 4, keep-with-next
   1793          int CreateMainMenu(VIEWDATA *vd)
   1794          {
   \                     CreateMainMenu:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   1795            MAIN_CSM * main_csm;
   1796            int main_menu_id;
   1797            if ((main_csm=(MAIN_CSM *)FindCSMbyID(maincsm_id)))
   \   00000008   ........           LDR      R0,??DataTable55  ;; maincsm_id
   \   0000000C   000090E5           LDR      R0,[R0, #+0]
   \   00000010   080100EF           SWI      +264
   \   00000014   0050B0E1           MOVS     R5,R0
   \   00000018   2700000A           BEQ      ??CreateMainMenu_0
   1798            {
   1799              patch_header(&main_menu_header);
   \   0000001C   A0609FE5           LDR      R6,??CreateMainMenu_1  ;; main_menu_items
   \   00000020   F80086E2           ADD      R0,R6,#+248
   \   00000024   ........           _BLF     patch_header,??patch_header??rA
   1800              main_menu_sk[0].lgp_id=(int)lgpData[LGP_Select];
   \   00000028   ........           LDR      R0,??DataTable56  ;; lgpData
   1801              main_menu_sk[1].lgp_id=(int)lgpData[LGP_Back];
   1802              main_menu_header.lgp_id=(int)lgpData[LGP_Menu];
   1803              main_menu_items[0].lgp_id_small=(int)lgpData[LGP_GoTo];
   1804              main_menu_items[1].lgp_id_small=(int)lgpData[LGP_Bookmarks];
   1805              main_menu_items[2].lgp_id_small=(int)lgpData[LGP_History];
   1806              main_menu_items[3].lgp_id_small=(int)lgpData[LGP_Settings];
   1807              main_menu_items[4].lgp_id_small=(int)lgpData[LGP_Search];
   1808              main_menu_items[5].lgp_id_small=(int)lgpData[LGP_Find];
   1809              main_menu_items[6].lgp_id_small=(int)lgpData[LGP_SavePage];
   1810              main_menu_items[7].lgp_id_small=(int)lgpData[LGP_Exit];
   1811            
   1812              main_menu_id=CreateMenu(0, 0, &main_menu_struct, &main_menu_header, 0, MAIN_MENU_ITEMS_N, vd, 0);
   \   0000002C   94209FE5           LDR      R2,??CreateMainMenu_1+0x4  ;; main_menu_struct
   \   00000030   641090E5           LDR      R1,[R0, #+100]
   \   00000034   F83086E2           ADD      R3,R6,#+248
   \   00000038   E41086E5           STR      R1,[R6, #+228]
   \   0000003C   BC1090E5           LDR      R1,[R0, #+188]
   \   00000040   EC1086E5           STR      R1,[R6, #+236]
   \   00000044   E41090E5           LDR      R1,[R0, #+228]
   \   00000048   041186E5           STR      R1,[R6, #+260]
   \   0000004C   E81090E5           LDR      R1,[R0, #+232]
   \   00000050   041086E5           STR      R1,[R6, #+4]
   \   00000054   EC1090E5           LDR      R1,[R0, #+236]
   \   00000058   201086E5           STR      R1,[R6, #+32]
   \   0000005C   F01090E5           LDR      R1,[R0, #+240]
   \   00000060   3C1086E5           STR      R1,[R6, #+60]
   \   00000064   F41090E5           LDR      R1,[R0, #+244]
   \   00000068   581086E5           STR      R1,[R6, #+88]
   \   0000006C   FC1090E5           LDR      R1,[R0, #+252]
   \   00000070   741086E5           STR      R1,[R6, #+116]
   \   00000074   001190E5           LDR      R1,[R0, #+256]
   \   00000078   901086E5           STR      R1,[R6, #+144]
   \   0000007C   041190E5           LDR      R1,[R0, #+260]
   \   00000080   F80090E5           LDR      R0,[R0, #+248]
   \   00000084   AC1086E5           STR      R1,[R6, #+172]
   \   00000088   C80086E5           STR      R0,[R6, #+200]
   \   0000008C   0000A0E3           MOV      R0,#+0
   \   00000090   01002DE9           PUSH     {R0}
   \   00000094   10002DE9           PUSH     {R4}
   \   00000098   0010A0E3           MOV      R1,#+0
   \   0000009C   0800A0E3           MOV      R0,#+8
   \   000000A0   01002DE9           PUSH     {R0}
   \   000000A4   0000A0E3           MOV      R0,#+0
   \   000000A8   01002DE9           PUSH     {R0}
   \   000000AC   520100EF           SWI      +338
   \   000000B0   0060A0E1           MOV      R6,R0
   1813              main_csm->main_menu_id=main_menu_id;
   \   000000B4   346085E5           STR      R6,[R5, #+52]
   \   000000B8   10D08DE2           ADD      SP,SP,#+16
   1814            }
   1815            return main_menu_id;
   \                     ??CreateMainMenu_0:
   \   000000BC   0600A0E1           MOV      R0,R6
   \   000000C0   7080BDE8           POP      {R4-R6,PC}       ;; return
   \                     ??CreateMainMenu_1:
   \   000000C4   ........           DC32     main_menu_items
   \   000000C8   ........           DC32     main_menu_struct
   1816          }

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable4:
   \   00000000   ........           DC32     maincsm_id

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable6:
   \   00000000   ........           DC32     view_url_mode

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable8:
   \   00000000   ........           DC32     lgpData

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable14:
   \   00000000   ........           DC32     ext_url

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable15:
   \   00000000   ........           DC32     view_url

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable16:
   \   00000000   ........           DC32     bookmarks_menu_sk

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable17:
   \   00000000   ........           DC32     bookmarks_menu_sk

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable19:
   \   00000000   ........           DC32     `?<Constant "...">`

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable25:
   \   00000000   ........           DC32     `?<Constant "%s%s.url">`

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable27:
   \   00000000   ........           DC32     goto_url

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable28:
   \   00000000   ........           DC32     lgpData + 24

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable31:
   \   00000000   ........           DC32     search_inet_string

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable35:
   \   00000000   ........           DC32     search_menu_sk

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable36:
   \   00000000   ........           DC32     search_string

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable38:
   \   00000000   ........           DC32     lgpData

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable40:
   \   00000000   ........           DC32     lgpData + 24

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable44:
   \   00000000   ........           DC32     view_url_mode

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable45:
   \   00000000   ........           DC32     view_url

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable53:
   \   00000000   ........           DC32     goto_url

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable55:
   \   00000000   ........           DC32     maincsm_id

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable56:
   \   00000000   ........           DC32     lgpData

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for search_menu_sk>`:
   \   00000000   18000000           DC16 24, 0
   \   00000004   ........           DC32 `?<Constant "Search">`
   \   00000008   01000000           DC16 1, 0
   \   0000000C   ........           DC32 `?<Constant "Cancel">`
   \   00000010   3D000000           DC16 61, 0
   \   00000014   FBC0FF7F           DC32 2147467515
   \                     `?<Initializer for search_menu_header>`:
   \   00000018   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   00000020   00000000....       DC32 0H, `?<Constant "Search:">`, 2147483647
   \              ....FFFFFF7F
   \                     `?<Initializer for find_box_menu_sk>`:
   \   0000002C   18000000           DC16 24, 0
   \   00000030   ........           DC32 `?<Constant "Ok">`
   \   00000034   01000000           DC16 1, 0
   \   00000038   ........           DC32 `?<Constant "Cancel">`
   \   0000003C   3D000000           DC16 61, 0
   \   00000040   FBC0FF7F           DC32 2147467515
   \                     `?<Initializer for find_box_hdr>`:
   \   00000044   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   0000004C   00000000....       DC32 0H, `?<Constant "Find:">`, 2147483647
   \              ....FFFFFF7F
   \                     `?<Initializer for sEmpty>`:
   \   00000058   ........           DC32 `?<Constant "">`
   \                     `?<Initializer for search_engine_count>`:
   \   0000005C   00000000           DC32 0
   \                     `?<Initializer for selected_search_engine>`:
   \   00000060   00000000           DC32 0
   \                     `?<Initializer for search_engines>`:
   \   00000064   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000074   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000084   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000094   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000000A4   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000000B4   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000000C4   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000000D4   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \                     `?<Initializer for search_menu_struct>`:
   \   000000E4   01000000....       DC32 1, search_menu_onkey, search_menu_ghook, search_menu_locret, 0
   \              ............
   \              ........0000
   \              0000        
   \   000000F8   ........           DC32 search_menu_skt
   \   000000FC   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   00000104   080000006400       DC32 8, 100, 101, 0, 0, 1073741824
   \              000065000000
   \              000000000000
   \              000000000040

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for ext_url>`:
   \   00000000   ........           DC32 `?<Constant "url">`

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for bookmarks_menu_sk>`:
   \   00000000   18000000           DC16 24, 0
   \   00000004   ........           DC32 `?<Constant "Options">`
   \   00000008   01000000           DC16 1, 0
   \   0000000C   ........           DC32 `?<Constant "Back">`
   \   00000010   3D000000           DC16 61, 0
   \   00000014   FBC0FF7F           DC32 2147467515
   \                     `?<Initializer for bookmarks_menu_header>`:
   \   00000018   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   00000020   000000000000       DC32 0H, 0, 2147483647
   \              0000FFFFFF7F
   \                     `?<Initializer for bookmarks_menu_icons>`:
   \   0000002C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0
   \              0000        
   \                     `?<Initializer for bookmarks_current_folder>`:
   \   00000034   00000000           DC8 0, 0, 0, 0
   \                     `?<Initializer for bl_top>`:
   \   00000038   00000000           DC8 0, 0, 0, 0
   \                     `?<Initializer for bookmarks_menu_struct>`:
   \   0000003C   08000000....       DC32 8, bookmarks_menu_onkey, bookmarks_menu_ghook, 0H
   \              ............
   \              00000000    
   \   0000004C   ............       DC32 bookmarks_menu_softkeys, bookmarks_menu_skt, 17
   \              ....11000000
   \   00000058   ........0000       DC32 bookmarks_menu_iconhndl, 0H, 0H, 0
   \              000000000000
   \              00000000    

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for edit_bookmark_hdr>`:
   \   00000000   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   00000008   00000000....       DC32 0H, `?<Constant "Bookmark...">`, 2147483647
   \              ....FFFFFF7F
   \                     `?<Initializer for edit_mode>`:
   \   00000014   00                 DC8 0

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for edit_bookmark_sk>`:
   \   00000000   18000000           DC16 24, 0
   \   00000004   ........           DC32 `?<Constant "Add">`
   \   00000008   01000000           DC16 1, 0
   \   0000000C   ........           DC32 `?<Constant "Cancel">`
   \   00000010   3D000000           DC16 61, 0
   \   00000014   FBC0FF7F           DC32 2147467515

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for bookmarks_options_items>`:
   \   00000000   00000000....       DC32 0H, `?<Constant "Edit">`, 2147483647, 0, 0H, 3, 1442, 0H
   \              ....FFFFFF7F
   \              000000000000
   \              000003000000
   \              A20500000000
   \              0000        
   \   00000020   ........FFFF       DC32 `?<Constant "Add bookmark">`, 2147483647, 0, 0H, 3, 1442, 0H
   \              FF7F00000000
   \              000000000300
   \              0000A2050000
   \              00000000    
   \   0000003C   ........FFFF       DC32 `?<Constant "Add folder">`, 2147483647, 0, 0H, 3, 1442, 0H
   \              FF7F00000000
   \              000000000300
   \              0000A2050000
   \              00000000    
   \   00000058   ........FFFF       DC32 `?<Constant "Delete">`, 2147483647, 0, 0H, 3, 1442
   \              FF7F00000000
   \              000000000300
   \              0000A2050000
   \                     `?<Initializer for bookmarks_options_header>`:
   \   00000070   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   00000078   00000000....       DC32 0H, `?<Constant "Options:">`, 2147483647
   \              ....FFFFFF7F
   \                     `?<Initializer for bookmarks_options_sk>`:
   \   00000084   18000000           DC16 24, 0
   \   00000088   ........           DC32 `?<Constant "Select">`
   \   0000008C   01000000           DC16 1, 0
   \   00000090   ........           DC32 `?<Constant "Back">`
   \   00000094   3D000000           DC16 61, 0
   \   00000098   FBC0FF7F           DC32 2147467515
   \                     `?<Initializer for bookmarks_options_struct>`:
   \   0000009C   080000000000       DC32 8, 0H, 0H, 0H, bookmarks_options_softkeys, bookmarks_options_skt
   \              000000000000
   \              00000000....
   \              ............
   \   000000B4   100000000000       DC32 16, 0H, bookmarks_options_items, bookmarks_options_procs, 4
   \              0000........
   \              ........0400
   \              0000        

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for bookmarks_options_softkeys>`:
   \   00000000   000000000100       DC32 0, 1, 2
   \              000002000000

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for bookmarks_options_skt>`:
   \   00000000   ........0000       DC32 bookmarks_options_sk, 0
   \              0000        

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for bookmarks_menu_softkeys>`:
   \   00000000   000000000100       DC32 0, 1, 2
   \              000002000000

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for bookmarks_menu_skt>`:
   \   00000000   ........0000       DC32 bookmarks_menu_sk, 0
   \              0000        

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for savepage_box_menu_sk>`:
   \   00000000   18000000           DC16 24, 0
   \   00000004   ........           DC32 `?<Constant "Ok">`
   \   00000008   01000000           DC16 1, 0
   \   0000000C   ........           DC32 `?<Constant "Cancel">`
   \   00000010   3D000000           DC16 61, 0
   \   00000014   FBC0FF7F           DC32 2147467515
   \                     `?<Initializer for savepage_box_hdr>`:
   \   00000018   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   00000020   00000000....       DC32 0H, `?<Constant "Save page:">`, 2147483647
   \              ....FFFFFF7F

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for history_menu_softkeys>`:
   \   00000000   000000000100       DC32 0, 1, 2
   \              000002000000

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for history_menu_sk>`:
   \   00000000   18000000           DC16 24, 0
   \   00000004   ........           DC32 `?<Constant "Go">`
   \   00000008   01000000           DC16 1, 0
   \   0000000C   ........           DC32 `?<Constant "Cancel">`
   \   00000010   3D000000           DC16 61, 0
   \   00000014   FBC0FF7F           DC32 2147467515
   \                     `?<Initializer for history_menu_header>`:
   \   00000018   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   00000020   00000000....       DC32 0H, `?<Constant "History:">`, 2147483647
   \              ....FFFFFF7F
   \                     `?<Initializer for history_menu_struct>`:
   \   0000002C   08000000....       DC32 8, history_menu_onkey, history_menu_ghook, 0H
   \              ............
   \              00000000    
   \   0000003C   ............       DC32 history_menu_softkeys, history_menu_skt, 16, history_menu_iconhndl
   \              ....10000000
   \              ........    
   \   0000004C   000000000000       DC32 0H, 0H, 0
   \              000000000000

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for history_menu_skt>`:
   \   00000000   ........0000       DC32 history_menu_sk, 0
   \              0000        

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for input_url_sk>`:
   \   00000000   18000000           DC16 24, 0
   \   00000004   00000000           DC32 0
   \   00000008   01000000           DC16 1, 0
   \   0000000C   00000000           DC32 0
   \   00000010   3D000000           DC16 61, 0
   \   00000014   FBC0FF7F           DC32 2147467515
   \                     `?<Initializer for input_url_header>`:
   \   00000018   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   00000020   000000000000       DC32 0H, 0, 2147483647
   \              0000FFFFFF7F

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for main_menu_items>`:
   \   00000000   000000000000       DC32 0H, 0, 2147483647, 0, 0H, 3, 1442, 0H, 0, 2147483647, 0, 0H, 3
   \              0000FFFFFF7F
   \              000000000000
   \              000003000000
   \              A20500000000
   \              000000000000
   \              FFFFFF7F0000
   \              000000000000
   \              03000000    
   \   00000034   A20500000000       DC32 1442, 0H, 0, 2147483647, 0, 0H, 3, 1442, 0H, 0, 2147483647, 0, 0H
   \              000000000000
   \              FFFFFF7F0000
   \              000000000000
   \              03000000A205
   \              000000000000
   \              00000000FFFF
   \              FF7F00000000
   \              00000000    
   \   00000068   03000000A205       DC32 3, 1442, 0H, 0, 2147483647, 0, 0H, 3, 1442, 0H, 0, 2147483647, 0
   \              000000000000
   \              00000000FFFF
   \              FF7F00000000
   \              000000000300
   \              0000A2050000
   \              000000000000
   \              0000FFFFFF7F
   \              00000000    
   \   0000009C   000000000300       DC32 0H, 3, 1442, 0H, 0, 2147483647, 0, 0H, 3, 1442, 0H, 0, 2147483647
   \              0000A2050000
   \              000000000000
   \              0000FFFFFF7F
   \              000000000000
   \              000003000000
   \              A20500000000
   \              000000000000
   \              FFFFFF7F    
   \   000000D0   000000000000       DC32 0, 0H, 3, 1442
   \              000003000000
   \              A2050000    
   \                     `?<Initializer for main_menu_sk>`:
   \   000000E0   18000000           DC16 24, 0
   \   000000E4   ........           DC32 `?<Constant "Select">`
   \   000000E8   01000000           DC16 1, 0
   \   000000EC   ........           DC32 `?<Constant "Back">`
   \   000000F0   3D000000           DC16 61, 0
   \   000000F4   FBC0FF7F           DC32 2147467515
   \                     `?<Initializer for main_menu_header>`:
   \   000000F8   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   00000100   00000000....       DC32 0H, `?<Constant "Menu:">`, 2147483647
   \              ....FFFFFF7F

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "...">`:
   \   00000000   2E2E2E00           DC8 "..."
   \   00000004   247265736F75       DC8 "$resources\\folder.png"
   \              726365735C66
   \              6F6C6465722E
   \              706E6700    
   \   0000001A   0000               DC8 0, 0
   \   0000001C   247265736F75       DC8 "$resources\\bookmark.png"
   \              726365735C62
   \              6F6F6B6D6172
   \              6B2E706E6700
   \   00000034   24626F6F6B6D       DC8 "$bookmarks\\"
   \              61726B735C00

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Bookmark...">`:
   \   00000000   426F6F6B6D61       DC8 "Bookmark..."
   \              726B2E2E2E00

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Cancel">`:
   \   00000000   43616E63656C       DC8 "Cancel"
   \              00          
   \   00000007   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Add">`:
   \   00000000   41646400           DC8 "Add"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "url">`:
   \   00000000   75726C00           DC8 "url"

   \                                 In segment DATA_C, align 1, align-sorted
   \                     `?<Constant "">`:
   \   00000000   00                 DC8 ""

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Menu:">`:
   \   00000000   4D656E753A00       DC8 "Menu:"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant {4095, 0, 0}>`:
   \   00000000   FF0F0000           DC16 4095, 0
   \   00000004   00000000           DC32 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant {4095, 0, 0}>_1`:
   \   00000000   FF0F0000           DC16 4095, 0
   \   00000004   00000000           DC32 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "$pages\\\\">`:
   \   00000000   247061676573       DC8 "$pages\\"
   \              5C00        
   \   00000008   2E6F6D7300         DC8 ".oms"
   \   0000000D   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant {4095, 0, 0}>_2`:
   \   00000000   FF0F0000           DC16 4095, 0
   \   00000004   00000000           DC32 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "BalletMini\\nRevision %...">`:
   \   00000000   42616C6C6574       DC8 42H, 61H, 6CH, 6CH, 65H, 74H, 4DH, 69H
   \              4D69        
   \   00000008   6E690A526576       DC8 6EH, 69H, 0AH, 52H, 65H, 76H, 69H, 73H
   \              6973        
   \   00000010   696F6E202564       DC8 69H, 6FH, 6EH, 20H, 25H, 64H, 0AH, 28H
   \              0A28        
   \   00000018   432920627920       DC8 43H, 29H, 20H, 62H, 79H, 20H, 52H, 73H
   \              5273        
   \   00000020   74372F434253       DC8 74H, 37H, 2FH, 43H, 42H, 53H, 49H, 45H
   \              4945        
   \   00000028   0A4B72656E0A       DC8 0AH, 4BH, 72H, 65H, 6EH, 0AH, 4BH, 61H
   \              4B61        
   \   00000030   6C656D61730A       DC8 6CH, 65H, 6DH, 61H, 73H, 0AH, 53H, 69H
   \              5369        
   \   00000038   6E636C616972       DC8 6EH, 63H, 6CH, 61H, 69H, 72H, 0AH, 43H
   \              0A43        
   \   00000040   61707461696E       DC8 61H, 70H, 74H, 61H, 69H, 6EH, 5FH, 53H
   \              5F53        
   \   00000048   49536B610A54       DC8 49H, 53H, 6BH, 61H, 0AH, 54H, 68H, 65H
   \              6865        
   \   00000050   5F5A656E0A4D       DC8 5FH, 5AH, 65H, 6EH, 0AH, 4DH, 69H, 68H
   \              6968        
   \   00000058   615F7200           DC8 61H, 5FH, 72H, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant {4095, 0, 0}>_3`:
   \   00000000   FF0F0000           DC16 4095, 0
   \   00000004   00000000           DC32 0

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   257300             DC8 "%s"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "%s%s.url">`:
   \   00000000   257325732E75       DC8 "%s%s.url"
   \              726C00      
   \   00000009   000000             DC8 0, 0, 0
   \   0000000C   2A2E75726C00       DC8 "*.url"
   \   00000012   0000               DC8 0, 0
   \   00000014   247365617263       DC8 "$search\\"
   \              685C00      
   \   0000001D   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   6F6D7300           DC8 "oms"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant ".url">`:
   \   00000000   2E75726C00         DC8 ".url"
   \   00000005   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   5C00               DC8 "\\"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant {4080, 0, 0}>`:
   \   00000000   F00F0000           DC16 4080, 0
   \   00000004   00000000           DC32 0
   \   00000008   FF0F0000           DC16 4095, 0
   \   0000000C   00000000           DC32 0

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   257400             DC8 "%t"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "History:">`:
   \   00000000   486973746F72       DC8 "History:"
   \              793A00      
   \   00000009   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 1, align-sorted
   \                     `?<Constant "Go">`:
   \   00000000   476F00             DC8 "Go"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Save page:">`:
   \   00000000   536176652070       DC8 "Save page:"
   \              6167653A00  
   \   0000000B   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Find:">`:
   \   00000000   46696E643A00       DC8 "Find:"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 1, align-sorted
   \                     `?<Constant "Ok">`:
   \   00000000   4F6B00             DC8 "Ok"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Search:">`:
   \   00000000   536561726368       DC8 "Search:"
   \              3A00        

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Search">`:
   \   00000000   536561726368       DC8 "Search"
   \              00          
   \   00000007   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Options">`:
   \   00000000   4F7074696F6E       DC8 "Options"
   \              7300        

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Add bookmark">`:
   \   00000000   41646420626F       DC8 "Add bookmark"
   \              6F6B6D61726B
   \              00          
   \   0000000D   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Back">`:
   \   00000000   4261636B00         DC8 "Back"
   \   00000005   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Select">`:
   \   00000000   53656C656374       DC8 "Select"
   \              00          
   \   00000007   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Delete">`:
   \   00000000   44656C657465       DC8 "Delete"
   \              00          
   \   00000007   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Add folder">`:
   \   00000000   41646420666F       DC8 "Add folder"
   \              6C64657200  
   \   0000000B   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Edit">`:
   \   00000000   4564697400         DC8 "Edit"
   \   00000005   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Options:">`:
   \   00000000   4F7074696F6E       DC8 "Options:"
   \              733A00      
   \   00000009   000000             DC8 0, 0, 0

   Maximum stack usage in bytes:

     Function                       CSTACK
     --------                       ------
     About                            260
     AddToFList                        24
     CreateBookmarksMenu               32
     CreateFindDialog                 104
     CreateHistoryMenu                 32
     CreateInputUrl                    72
     CreateMainMenu                    32
     CreateSavePageDialog              80
     CreateSearchDialog               100
     FindBListByN                       8
     FindBListByNS                      0
     FindFiles                       1264
     Free_BList                        16
     bookmarks_menu_ghook              12
     bookmarks_menu_iconhndl           32
     bookmarks_menu_onkey              16
     bookmarks_options_add_bookmark     4
     bookmarks_options_add_folder       4
     bookmarks_options_delete          12
     bookmarks_options_edit             8
     edit_bookmark_extract_link        60
     edit_bookmark_extract_name        60
     edit_bookmark_ghook               76
     edit_bookmark_locret               0
     edit_bookmark_onkey               28
     fcopy                             80
     find_box_ghook                    36
     find_box_locret                    0
     find_box_onkey                    52
     free_search_engines               16
     get_search_engines               992
     history_menu_ghook                16
     history_menu_iconhndl             24
     history_menu_onkey                24
     input_url_ghook                   20
     input_url_locret                   0
     input_url_onkey                   64
     input_url_options                 52
     main_menu_find                     8
     main_menu_ghook                    4
     main_menu_goto_bookmarks           8
     main_menu_goto_history             8
     main_menu_goto_url                 8
     main_menu_onkey                    4
     main_menu_options                  8
     main_menu_quit                    12
     main_menu_savepage                 8
     main_menu_search                   8
     patch_header                       8
     patch_header_small                 8
     patch_input                       12
     savepage_box_ghook                20
     savepage_box_locret                0
     savepage_box_onkey               444
     search_menu_ghook                 24
     search_menu_locret                 0
     search_menu_onkey                384
     show_bookmarks_options            48
     show_edit_bookmark_menu          136


   Segment part sizes:

     Function/Label                 Bytes
     --------------                 -----
     patch_header                     52
     patch_input                      68
     patch_header_small               48
     edit_bookmark_skt                 8
     edit_bookmark_ghook             196
     edit_bookmark_locret              4
     edit_bookmark_extract_name      188
     edit_bookmark_extract_link      120
     edit_bookmark_onkey             500
     ?<Constant "">_1                 60
     show_edit_bookmark_menu        1036
     bookmarks_options_edit          116
     bookmarks_options_add_bookmark   28
     bookmarks_options_add_folder     28
     bookmarks_options_delete        104
     bookmarks_options_procs          16
     show_bookmarks_options          220
     Free_BList                       80
     AddToFList                      188
     FindFiles                       516
     FindBListByNS                    72
     FindBListByN                     84
     bookmarks_menu_onkey            308
     bookmarks_menu_ghook            120
     bookmarks_menu_iconhndl         288
     CreateBookmarksMenu             168
     search_menu_skt                   8
     free_search_engines              60
     get_search_engines              244
     search_menu_locret                4
     search_menu_onkey               856
     search_menu_ghook               228
     CreateSearchDialog              412
     find_box_menu_skt                 8
     search_menu_sk                  284
     ext_url                           4
     bookmarks_menu_sk               104
     edit_bookmark_hdr                21
     edit_bookmark_sk                 24
     bookmarks_options_items         200
     bookmarks_options_softkeys       12
     bookmarks_options_skt             8
     bookmarks_menu_softkeys          12
     bookmarks_menu_skt                8
     find_box_ghook                  228
     find_box_locret                   4
     find_box_onkey                  108
     find_box_desc                    56
     CreateFindDialog                396
     savepage_box_menu_skt             8
     savepage_box_menu_sk             44
     savepage_box_ghook               84
     savepage_box_locret               4
     fcopy                           392
     savepage_box_onkey              176
     savepage_box_desc                56
     CreateSavePageDialog            272
     history_menu_onkey              376
     history_menu_ghook              116
     history_menu_iconhndl           144
     history_menu_softkeys            12
     history_menu_sk                  88
     history_menu_skt                  8
     CreateHistoryMenu               128
     input_url_skt                     8
     input_url_sk                     44
     input_url_ghook                  84
     input_url_locret                  4
     input_url_options               112
     input_url_onkey                 292
     input_url_desc                   56
     CreateInputUrl                  436
     main_menu_goto_url               44
     main_menu_goto_bookmarks         44
     main_menu_search                 44
     main_menu_find                   52
     main_menu_goto_history           44
     main_menu_options                76
     main_menu_quit                   76
     main_menu_savepage               52
     main_menu_softkeys               12
     main_menu_skt                     8
     main_menu_items                 268
     main_menu_procs                  32
     main_menu_ghook                  20
     About                            52
     main_menu_onkey                  48
     main_menu_struct                 44
     CreateMainMenu                  204
     ??DataTable4                      4
     ??DataTable6                      4
     ??DataTable8                      4
     ??DataTable14                     4
     ??DataTable15                     4
     ??DataTable16                     4
     ??DataTable17                     4
     ??DataTable19                     4
     ??DataTable25                     4
     ??DataTable27                     4
     ??DataTable28                     4
     ??DataTable31                     4
     ??DataTable35                     4
     ??DataTable36                     4
     ??DataTable38                     4
     ??DataTable40                     4
     ??DataTable44                     4
     ??DataTable45                     4
     ??DataTable53                     4
     ??DataTable55                     4
     ??DataTable56                     4
     ?<Initializer for search_menu_sk>
                                     284
     ?<Initializer for ext_url>        4
     ?<Initializer for bookmarks_menu_sk>
                                     104
     ?<Initializer for edit_bookmark_hdr>
                                      21
     ?<Initializer for edit_bookmark_sk>
                                      24
     ?<Initializer for bookmarks_options_items>
                                     200
     ?<Initializer for bookmarks_options_softkeys>
                                      12
     ?<Initializer for bookmarks_options_skt>
                                       8
     ?<Initializer for bookmarks_menu_softkeys>
                                      12
     ?<Initializer for bookmarks_menu_skt>
                                       8
     ?<Initializer for savepage_box_menu_sk>
                                      44
     ?<Initializer for history_menu_softkeys>
                                      12
     ?<Initializer for history_menu_sk>
                                      88
     ?<Initializer for history_menu_skt>
                                       8
     ?<Initializer for input_url_sk>
                                      44
     ?<Initializer for main_menu_items>
                                     268
     ?<Constant "...">                64
     ?<Constant "Bookmark...">        12
     ?<Constant "Cancel">              8
     ?<Constant "Add">                 4
     ?<Constant "url">                 4
     ?<Constant "">                    1
     ?<Constant "Menu:">               8
     ?<Constant {4095, 0, 0}>          8
     ?<Constant {4095, 0, 0}>_1        8
     ?<Constant "$pages\\">           16
     ?<Constant {4095, 0, 0}>_2        8
     ?<Constant "BalletMini\nRevision %...">
                                      92
     ?<Constant {4095, 0, 0}>_3        8
     ?<Constant "%s">                  3
     ?<Constant "%s%s.url">           32
     ?<Constant "oms">                 4
     ?<Constant ".url">                8
     ?<Constant "\\">                  2
     ?<Constant {4080, 0, 0}>         16
     ?<Constant "%t">                  3
     ?<Constant "History:">           12
     ?<Constant "Go">                  3
     ?<Constant "Save page:">         12
     ?<Constant "Find:">               8
     ?<Constant "Ok">                  3
     ?<Constant "Search:">             8
     ?<Constant "Search">              8
     ?<Constant "Options">             8
     ?<Constant "Add bookmark">       16
     ?<Constant "Back">                8
     ?<Constant "Select">              8
     ?<Constant "Delete">              8
     ?<Constant "Add folder">         12
     ?<Constant "Edit">                8
     ?<Constant "Options:">           12
      Others                         440

 
 10 960 bytes in segment CODE
    823 bytes in segment DATA_C
  1 141 bytes in segment DATA_I
  1 141 bytes in segment DATA_ID
     12 bytes in segment INITTAB
 
 10 364 bytes of CODE  memory (+ 608 bytes shared)
  1 964 bytes of CONST memory
  1 141 bytes of DATA  memory

Errors: none
Warnings: none
