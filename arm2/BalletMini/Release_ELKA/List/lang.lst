##############################################################################
#                                                                            #
# IAR ARM ANSI C/C++ Compiler V4.42A/W32 EVALUATION    27/Dec/2010  18:20:03 #
# Copyright 1999-2005 IAR Systems. All rights reserved.                      #
#                                                                            #
#    Cpu mode        =  interwork                                            #
#    Endian          =  little                                               #
#    Stack alignment =  4                                                    #
#    Source file     =  C:\arm\BalletMini\lang.c                             #
#    Command line    =  C:\arm\BalletMini\lang.c -D NEWSGOLD -D ELKA -lC     #
#                       C:\arm\BalletMini\Release_ELKA\List\ -o              #
#                       C:\arm\BalletMini\Release_ELKA\Obj\ -s9 --no_unroll  #
#                       --no_inline --cpu_mode arm --endian little --cpu     #
#                       ARM926EJ-S --stack_align 4 --interwork -e --fpu      #
#                       None --dlib_config "C:\arm2\Embedded Workbench 4.0   #
#                       Evaluation\ARM\LIB\dl5tpainl8n.h" -I                 #
#                       "C:\arm2\Embedded Workbench 4.0 Evaluation\ARM\INC\" #
#    List file       =  C:\arm\BalletMini\Release_ELKA\List\lang.lst         #
#    Object file     =  C:\arm\BalletMini\Release_ELKA\Obj\lang.r79          #
#                                                                            #
#                                                                            #
##############################################################################

C:\arm\BalletMini\lang.c
      1          #include "..\inc\swilib.h"
      2          #include "lang.h"
      3          #include "file_works.h"
      4          

   \                                 In segment DATA_Z, align 4, align-sorted
      5          char * lgpData[LGP_DATA_NUM];
   \                     lgpData:
   \   00000000                      DS8 312
      6          int lgpLoaded;
   \                     lgpLoaded:
   \   00000138                      DS8 4
      7          

   \                                 In segment CODE, align 4, keep-with-next
      8          void lgpInitLangPack(void)
      9          {
   \                     lgpInitLangPack:
   \   00000000   F04F2DE9           PUSH     {R4-R11,LR}
     10            int hFile;
     11            unsigned int io_error = NULL;
     12            char * lang_file = getSymbolicPath("$ballet\\lang.txt");
   \   00000004   78549FE5           LDR      R5,??lgpInitLangPack_0+0x1C  ;; `?<Constant "RF empty!">`
     13            
     14            for (int i = 0; i < LGP_DATA_NUM; i ++)
   \   00000008   ........           LDR      R7,??DataTable1  ;; lgpData
   \   0000000C   ACD04DE2           SUB      SP,SP,#+172
   \   00000010   0040A0E3           MOV      R4,#+0
   \   00000014   00408DE5           STR      R4,[SP, #+0]
   \   00000018   200085E2           ADD      R0,R5,#+32
   \   0000001C   ........           _BLF     getSymbolicPath,??getSymbolicPath??rA
   \   00000020   0060A0E1           MOV      R6,R0
   \   00000024   0000A0E3           MOV      R0,#+0
     15              lgpData[i] = NULL;
   \                     ??lgpInitLangPack_1:
   \   00000028   004187E7           STR      R4,[R7, +R0, LSL #+2]
   \   0000002C   010080E2           ADD      R0,R0,#+1
   \   00000030   4E0050E3           CMP      R0,#+78
   \   00000034   FBFFFFBA           BLT      ??lgpInitLangPack_1
     16            lgpLoaded = 0;
   \   00000038   384187E5           STR      R4,[R7, #+312]
     17            
     18            char * buf;
     19            FSTATS fstat;
     20            
     21            if (GetFileStats(lang_file, &fstat, &io_error) != -1)
   \   0000003C   0480E0E1           MVN      R8,R4
   \   00000040   0D20A0E1           MOV      R2,SP
   \   00000044   04108DE2           ADD      R1,SP,#+4
   \   00000048   0600A0E1           MOV      R0,R6
   \   0000004C   840000EF           SWI      +132
   \   00000050   080050E1           CMP      R0,R8
   \   00000054   6300000A           BEQ      ??lgpInitLangPack_2
     22            {
     23              if((hFile = fopen(lang_file, A_ReadOnly + A_BIN, P_READ, &io_error))!=-1)
   \   00000058   0D30A0E1           MOV      R3,SP
   \   0000005C   8020A0E3           MOV      R2,#+128
   \   00000060   801CA0E3           MOV      R1,#+32768
   \   00000064   0600A0E1           MOV      R0,R6
   \   00000068   0A0000EF           SWI      +10
   \   0000006C   0090A0E1           MOV      R9,R0
   \   00000070   080059E1           CMP      R9,R8
   \   00000074   5B00000A           BEQ      ??lgpInitLangPack_2
     24              {
     25                if (buf =(char *)malloc(fstat.size + 1))
   \   00000078   08009DE5           LDR      R0,[SP, #+8]
   \   0000007C   010080E2           ADD      R0,R0,#+1
   \   00000080   140000EF           SWI      +20
   \   00000084   0080B0E1           MOVS     R8,R0
   \   00000088   5300000A           BEQ      ??lgpInitLangPack_3
     26                {
     27                  buf[fread(hFile, buf, fstat.size, &io_error)] = NULL;
   \   0000008C   08209DE5           LDR      R2,[SP, #+8]
   \   00000090   0D30A0E1           MOV      R3,SP
   \   00000094   0810A0E1           MOV      R1,R8
   \   00000098   0900A0E1           MOV      R0,R9
   \   0000009C   0B0000EF           SWI      +11
   \   000000A0   0840C0E7           STRB     R4,[R0, +R8]
     28                  fclose(hFile, &io_error);
   \   000000A4   0D10A0E1           MOV      R1,SP
   \   000000A8   0900A0E1           MOV      R0,R9
   \   000000AC   0D0000EF           SWI      +13
     29                  
     30                  char line[128];
     31                  int lineSize = NULL;
   \   000000B0   0090A0E3           MOV      R9,#+0
     32                  int lp_id = NULL;
   \   000000B4   04A0A0E1           MOV      R10,R4
     33                  int buf_pos = NULL;
   \   000000B8   04B0A0E1           MOV      R11,R4
   \   000000BC   040000EA           B        ??lgpInitLangPack_4
     34                  while(buf[buf_pos] && buf_pos < fstat.size && lp_id < LGP_DATA_NUM)
     35                  {
     36                    if (buf[buf_pos]=='\n' || buf[buf_pos]=='\r')
     37                    {
     38                      if (lineSize > 0)
     39                      {
     40                        lgpData[lp_id] = (char *)malloc(lineSize+1);
     41                        memcpy(lgpData[lp_id], line, lineSize);
     42                        lgpData[lp_id][lineSize] = NULL;
     43                        lp_id ++;
     44                        lineSize = NULL;
     45                      }
     46                    }
     47                    else
     48                      line[lineSize ++] = buf[buf_pos];
   \                     ??lgpInitLangPack_5:
   \   000000C0   0820DBE7           LDRB     R2,[R11, +R8]
   \   000000C4   2C108DE2           ADD      R1,SP,#+44
   \   000000C8   0120C9E7           STRB     R2,[R9, +R1]
   \   000000CC   0090A0E1           MOV      R9,R0
     49                    buf_pos ++;
   \                     ??lgpInitLangPack_6:
   \   000000D0   01B08BE2           ADD      R11,R11,#+1
   \                     ??lgpInitLangPack_4:
   \   000000D4   0810DBE7           LDRB     R1,[R11, +R8]
   \   000000D8   010089E2           ADD      R0,R9,#+1
   \   000000DC   000051E3           CMP      R1,#+0
   \   000000E0   1400000A           BEQ      ??lgpInitLangPack_7
   \   000000E4   08109DE5           LDR      R1,[SP, #+8]
   \   000000E8   01005BE1           CMP      R11,R1
   \   000000EC   1100002A           BCS      ??lgpInitLangPack_7
   \   000000F0   4E005AE3           CMP      R10,#+78
   \   000000F4   0F0000AA           BGE      ??lgpInitLangPack_7
   \   000000F8   0810DBE7           LDRB     R1,[R11, +R8]
   \   000000FC   0A0051E3           CMP      R1,#+10
   \   00000100   0D005113           CMPNE    R1,#+13
   \   00000104   EDFFFF1A           BNE      ??lgpInitLangPack_5
   \   00000108   010059E3           CMP      R9,#+1
   \   0000010C   EFFFFFBA           BLT      ??lgpInitLangPack_6
   \   00000110   140000EF           SWI      +20
   \   00000114   0A0187E7           STR      R0,[R7, +R10, LSL #+2]
   \   00000118   0920A0E1           MOV      R2,R9
   \   0000011C   2C108DE2           ADD      R1,SP,#+44
   \   00000120   1E0100EF           SWI      +286
   \   00000124   0A0197E7           LDR      R0,[R7, +R10, LSL #+2]
   \   00000128   01A08AE2           ADD      R10,R10,#+1
   \   0000012C   0040C9E7           STRB     R4,[R9, +R0]
   \   00000130   0090A0E3           MOV      R9,#+0
   \   00000134   E5FFFFEA           B        ??lgpInitLangPack_6
     50                  }
     51                  if (lineSize > 0 && lp_id < LGP_DATA_NUM) // eof
   \                     ??lgpInitLangPack_7:
   \   00000138   010059E3           CMP      R9,#+1
   \   0000013C   080000BA           BLT      ??lgpInitLangPack_8
   \   00000140   4E005AE3           CMP      R10,#+78
   \   00000144   060000AA           BGE      ??lgpInitLangPack_8
     52                  {
     53                    lgpData[lp_id] = (char *)malloc(lineSize+1);
   \   00000148   140000EF           SWI      +20
   \   0000014C   0A0187E7           STR      R0,[R7, +R10, LSL #+2]
     54                    memcpy(lgpData[lp_id], line, lineSize);
   \   00000150   0920A0E1           MOV      R2,R9
   \   00000154   2C108DE2           ADD      R1,SP,#+44
   \   00000158   1E0100EF           SWI      +286
     55                    lgpData[lp_id][lineSize] = NULL;
   \   0000015C   0A0197E7           LDR      R0,[R7, +R10, LSL #+2]
   \   00000160   0040C9E7           STRB     R4,[R9, +R0]
     56                    lp_id ++;
     57                    lineSize = NULL;
     58                  }
     59                  mfree(buf);
   \                     ??lgpInitLangPack_8:
   \   00000164   0800A0E1           MOV      R0,R8
   \   00000168   150000EF           SWI      +21
     60                  lgpLoaded = 1;
   \   0000016C   0100A0E3           MOV      R0,#+1
   \   00000170   380187E5           STR      R0,[R7, #+312]
     61                  
     62                  // old langpack
     63                  if (strlen(lgpData[LGP_LangCode]) > 2)
   \   00000174   340197E5           LDR      R0,[R7, #+308]
   \   00000178   1B0000EF           SWI      +27
   \   0000017C   030050E3           CMP      R0,#+3
   \   00000180   0600003A           BCC      ??lgpInitLangPack_9
     64                  {
     65                    mfree(lgpData[LGP_LangCode]);
   \   00000184   340197E5           LDR      R0,[R7, #+308]
   \   00000188   150000EF           SWI      +21
     66                    lgpData[LGP_LangCode] = (char *)malloc(3);
   \   0000018C   0300A0E3           MOV      R0,#+3
   \   00000190   140000EF           SWI      +20
   \   00000194   340187E5           STR      R0,[R7, #+308]
     67                    strcpy(lgpData[LGP_LangCode],"ru");
   \   00000198   B21F8FE2           ADR      R1,??lgpInitLangPack_0  ;; "ru"
   \   0000019C   1A0000EF           SWI      +26
     68                  }
     69                  for (int i = 0; i < LGP_DATA_NUM; i ++)
     70                  {
     71                    if (!lgpData[i])
   \                     ??lgpInitLangPack_9:
   \   000001A0   040197E7           LDR      R0,[R7, +R4, LSL #+2]
   \   000001A4   000050E3           CMP      R0,#+0
   \   000001A8   0400001A           BNE      ??lgpInitLangPack_10
     72                    {
     73                      lgpData[i] = (char *)malloc(32);
   \   000001AC   2000A0E3           MOV      R0,#+32
   \   000001B0   140000EF           SWI      +20
   \   000001B4   040187E7           STR      R0,[R7, +R4, LSL #+2]
     74                      strcpy(lgpData[i], "Error! Update lang.txt!");
   \   000001B8   341085E2           ADD      R1,R5,#+52
   \   000001BC   1A0000EF           SWI      +26
     75                    }
     76                  }
   \                     ??lgpInitLangPack_10:
   \   000001C0   014084E2           ADD      R4,R4,#+1
   \   000001C4   4E0054E3           CMP      R4,#+78
   \   000001C8   F4FFFFBA           BLT      ??lgpInitLangPack_9
     77                  mfree(lang_file);
   \   000001CC   0600A0E1           MOV      R0,R6
   \   000001D0   150000EF           SWI      +21
     78                  return;
   \   000001D4   ACD08DE2           ADD      SP,SP,#+172
   \   000001D8   F08FBDE8           POP      {R4-R11,PC}
     79                }
     80                fclose(hFile, &io_error);
   \                     ??lgpInitLangPack_3:
   \   000001DC   0D10A0E1           MOV      R1,SP
   \   000001E0   0900A0E1           MOV      R0,R9
   \   000001E4   0D0000EF           SWI      +13
     81              }
     82            }
     83            mfree(lang_file);
   \                     ??lgpInitLangPack_2:
   \   000001E8   0600A0E1           MOV      R0,R6
   \   000001EC   150000EF           SWI      +21
     84            lgpData[LGP_CantOpenFile]=          "Can't open file!";
   \   000001F0   4C0085E2           ADD      R0,R5,#+76
   \   000001F4   000087E5           STR      R0,[R7, #+0]
     85            lgpData[LGP_CantLoadAuthCode]=      "Can't load AuthCode!";
   \   000001F8   600085E2           ADD      R0,R5,#+96
   \   000001FC   040087E5           STR      R0,[R7, #+4]
     86            lgpData[LGP_HistoryFileFailed]=     "Can't open history.txt!";
   \   00000200   780085E2           ADD      R0,R5,#+120
   \   00000204   080087E5           STR      R0,[R7, #+8]
     87            lgpData[LGP_CfgUpdated]=            "Config updated!";
   \   00000208   900085E2           ADD      R0,R5,#+144
   \   0000020C   0C0087E5           STR      R0,[R7, #+12]
     88            lgpData[LGP_RefUnderConstruction]=  "Ref \'%c\' under construction!";
   \   00000210   A00085E2           ADD      R0,R5,#+160
   \   00000214   100087E5           STR      R0,[R7, #+16]
     89            lgpData[LGP_RefEmpty]=              "RF empty!";
   \   00000218   145087E5           STR      R5,[R7, #+20]
     90            lgpData[LGP_Error]=                 "Error!";
   \   0000021C   D00085E2           ADD      R0,R5,#+208
   \   00000220   180087E5           STR      R0,[R7, #+24]
     91            lgpData[LGP_Stop]=                  "Stop";
   \   00000224   D80085E2           ADD      R0,R5,#+216
   \   00000228   1C0087E5           STR      R0,[R7, #+28]
     92            lgpData[LGP_WaitDNR]=               "Wait DNR...";
   \   0000022C   E00085E2           ADD      R0,R5,#+224
   \   00000230   200087E5           STR      R0,[R7, #+32]
     93            lgpData[LGP_IpConnect]=             "Ip connect...";
   \   00000234   EC0085E2           ADD      R0,R5,#+236
   \   00000238   240087E5           STR      R0,[R7, #+36]
     94            lgpData[LGP_GetHostByName]=         "Get host by name";
   \   0000023C   FC0085E2           ADD      R0,R5,#+252
   \   00000240   280087E5           STR      R0,[R7, #+40]
     95            lgpData[LGP_FaultDNR]=              "DNR fault!";
   \   00000244   440F85E2           ADD      R0,R5,#+272
   \   00000248   2C0087E5           STR      R0,[R7, #+44]
     96            lgpData[LGP_OkDNR]=                 "DNR ok!";
   \   0000024C   470F85E2           ADD      R0,R5,#+284
   \   00000250   300087E5           STR      R0,[R7, #+48]
     97            lgpData[LGP_OpenSocket]=            "Open socket...";
   \   00000254   490F85E2           ADD      R0,R5,#+292
   \   00000258   340087E5           STR      R0,[R7, #+52]
     98            lgpData[LGP_ConnectFault]=          "Connect fault...";
   \   0000025C   4D0F85E2           ADD      R0,R5,#+308
   \   00000260   380087E5           STR      R0,[R7, #+56]
     99            lgpData[LGP_AnswerDNR]=             "DNR answer...";
   \   00000264   C00085E2           ADD      R0,R5,#+192
   \   00000268   3C0087E5           STR      R0,[R7, #+60]
    100            lgpData[LGP_Connected]=             "Connected...";
   \   0000026C   520F85E2           ADD      R0,R5,#+328
   \   00000270   400087E5           STR      R0,[R7, #+64]
    101            lgpData[LGP_DataReceived]=          "Data received...";
   \   00000274   560F85E2           ADD      R0,R5,#+344
   \   00000278   440087E5           STR      R0,[R7, #+68]
    102            lgpData[LGP_DataSending]=           "Sending... %uB left";
   \   0000027C   5B0F85E2           ADD      R0,R5,#+364
   \   00000280   480087E5           STR      R0,[R7, #+72]
    103            lgpData[LGP_DataSent]=              "Waiting for answer...";
   \   00000284   600F85E2           ADD      R0,R5,#+384
   \   00000288   4C0087E5           STR      R0,[R7, #+76]
    104            lgpData[LGP_RemoteClosed]=          "Remote closed!";
   \   0000028C   660F85E2           ADD      R0,R5,#+408
   \   00000290   500087E5           STR      R0,[R7, #+80]
    105            lgpData[LGP_LocalClosed]=           "Local closed!";
   \   00000294   6A0F85E2           ADD      R0,R5,#+424
   \   00000298   540087E5           STR      R0,[R7, #+84]
    106            lgpData[LGP_InetBusy]=              "INET process busy!";
   \   0000029C   6E0F85E2           ADD      R0,R5,#+440
   \   000002A0   580087E5           STR      R0,[R7, #+88]
    107            lgpData[LGP_EnableGPRS]=            "Enable GPRS first!";
   \   000002A4   730F85E2           ADD      R0,R5,#+460
   \   000002A8   5C0087E5           STR      R0,[R7, #+92]
    108            lgpData[LGP_UnderConstruction]=     "Under Construction!";
   \   000002AC   780F85E2           ADD      R0,R5,#+480
   \   000002B0   600087E5           STR      R0,[R7, #+96]
    109            lgpData[LGP_Select]=                "Select";
   \   000002B4   7D0F85E2           ADD      R0,R5,#+500
   \   000002B8   640087E5           STR      R0,[R7, #+100]
    110            lgpData[LGP_Close]=                 "Close";
   \   000002BC   7F0F85E2           ADD      R0,R5,#+508
   \   000002C0   680087E5           STR      R0,[R7, #+104]
    111            lgpData[LGP_Ok]=                    "Ok";
   \   000002C4   680F8FE2           ADR      R0,??lgpInitLangPack_0+0x4  ;; "Ok"
   \   000002C8   6C0087E5           STR      R0,[R7, #+108]
    112            lgpData[LGP_Cancel]=                "Cancel";
   \   000002CC   810F85E2           ADD      R0,R5,#+516
   \   000002D0   700087E5           STR      R0,[R7, #+112]
    113            lgpData[LGP_Templates]=             "Templates";
   \   000002D4   830F85E2           ADD      R0,R5,#+524
   \   000002D8   740087E5           STR      R0,[R7, #+116]
    114            lgpData[LGP_NameHeader]=            "Name:";
   \   000002DC   860FA0E3           MOV      R0,#+536
   \   000002E0   051080E0           ADD      R1,R0,R5
   \   000002E4   781087E5           STR      R1,[R7, #+120]
    115            lgpData[LGP_LinkHeader]=            "Link:";
   \   000002E8   881F85E2           ADD      R1,R5,#+544
   \   000002EC   7C1087E5           STR      R1,[R7, #+124]
    116            lgpData[LGP_TextHeader]=            "Text:";
   \   000002F0   8A1F85E2           ADD      R1,R5,#+552
   \   000002F4   801087E5           STR      R1,[R7, #+128]
    117            lgpData[LGP_SearchEngine]=          "Search engine:";
   \   000002F8   8C1F85E2           ADD      R1,R5,#+560
   \   000002FC   841087E5           STR      R1,[R7, #+132]
    118            lgpData[LGP_FindString]=            "Find:";
   \   00000300   901F85E2           ADD      R1,R5,#+576
   \   00000304   881087E5           STR      R1,[R7, #+136]
    119            lgpData[LGP_SavePageString]=        "Name:";
   \   00000308   050080E0           ADD      R0,R0,R5
   \   0000030C   8C0087E5           STR      R0,[R7, #+140]
    120            lgpData[LGP_SelectHeader]=          "Select:";
   \   00000310   920F85E2           ADD      R0,R5,#+584
   \   00000314   900087E5           STR      R0,[R7, #+144]
    121            lgpData[LGP_EnterHeader]=           "Enter:";
   \   00000318   940F85E2           ADD      R0,R5,#+592
   \   0000031C   940087E5           STR      R0,[R7, #+148]
    122            lgpData[LGP_Add]=                   "Add";
   \   00000320   520F8FE2           ADR      R0,??lgpInitLangPack_0+0x8  ;; "Add"
   \   00000324   980087E5           STR      R0,[R7, #+152]
    123            lgpData[LGP_BookmarkHeader]=        "Bookmark...";
   \   00000328   960F85E2           ADD      R0,R5,#+600
   \   0000032C   9C0087E5           STR      R0,[R7, #+156]
    124            lgpData[LGP_Save]=                  "Save";
   \   00000330   990F85E2           ADD      R0,R5,#+612
   \   00000334   A00087E5           STR      R0,[R7, #+160]
    125            lgpData[LGP_NewBookmark]=           "New bookmark";
   \   00000338   9B0F85E2           ADD      R0,R5,#+620
   \   0000033C   A40087E5           STR      R0,[R7, #+164]
    126            lgpData[LGP_NewFolder]=             "New folder";
   \   00000340   9F0F85E2           ADD      R0,R5,#+636
   \   00000344   A80087E5           STR      R0,[R7, #+168]
    127            lgpData[LGP_Absent]=                "Absent";
   \   00000348   A20F85E2           ADD      R0,R5,#+648
   \   0000034C   AC0087E5           STR      R0,[R7, #+172]
    128            lgpData[LGP_OptionsHeader]=         "Options:";
   \   00000350   A40F85E2           ADD      R0,R5,#+656
   \   00000354   B00087E5           STR      R0,[R7, #+176]
    129            lgpData[LGP_Edit]=                  "Edit";
   \   00000358   A70F85E2           ADD      R0,R5,#+668
   \   0000035C   B40087E5           STR      R0,[R7, #+180]
    130            lgpData[LGP_Delete]=                "Delete";
   \   00000360   A90F85E2           ADD      R0,R5,#+676
   \   00000364   B80087E5           STR      R0,[R7, #+184]
    131            lgpData[LGP_Back]=                  "Back";
   \   00000368   AB0F85E2           ADD      R0,R5,#+684
   \   0000036C   BC0087E5           STR      R0,[R7, #+188]
    132            lgpData[LGP_Options]=               "Options";
   \   00000370   AD0F85E2           ADD      R0,R5,#+692
   \   00000374   C00087E5           STR      R0,[R7, #+192]
    133            lgpData[LGP_SelectBookmarkHeader]=  "Select bookmark:";
   \   00000378   AF0F85E2           ADD      R0,R5,#+700
   \   0000037C   C40087E5           STR      R0,[R7, #+196]
    134            lgpData[LGP_SearchHeader]=          "Search:";
   \   00000380   B40F85E2           ADD      R0,R5,#+720
   \   00000384   C80087E5           STR      R0,[R7, #+200]
    135            lgpData[LGP_FindHeader]=            "Find string:";
   \   00000388   B60F85E2           ADD      R0,R5,#+728
   \   0000038C   CC0087E5           STR      R0,[R7, #+204]
    136            lgpData[LGP_SavePageHeader]=        "Enter name:";
   \   00000390   BA0F85E2           ADD      R0,R5,#+744
   \   00000394   D00087E5           STR      R0,[R7, #+208]
    137            lgpData[LGP_MatchCase]=             "Match case";
   \   00000398   BD0F85E2           ADD      R0,R5,#+756
   \   0000039C   D40087E5           STR      R0,[R7, #+212]
    138            lgpData[LGP_Go]=                    "Go";
   \   000003A0   330F8FE2           ADR      R0,??lgpInitLangPack_0+0xC  ;; "Go"
   \   000003A4   D80087E5           STR      R0,[R7, #+216]
    139            lgpData[LGP_HistoryHeader]=         "History:";
   \   000003A8   C00F85E2           ADD      R0,R5,#+768
   \   000003AC   DC0087E5           STR      R0,[R7, #+220]
    140            lgpData[LGP_AddressHeader]=         "Address";
   \   000003B0   C30F85E2           ADD      R0,R5,#+780
   \   000003B4   E00087E5           STR      R0,[R7, #+224]
    141            lgpData[LGP_Menu]=                  "Menu";
   \   000003B8   C50F85E2           ADD      R0,R5,#+788
   \   000003BC   E40087E5           STR      R0,[R7, #+228]
    142            lgpData[LGP_GoTo]=                  "Go to";
   \   000003C0   C70F85E2           ADD      R0,R5,#+796
   \   000003C4   E80087E5           STR      R0,[R7, #+232]
    143            lgpData[LGP_Bookmarks]=             "Bookmarks";
   \   000003C8   C90F85E2           ADD      R0,R5,#+804
   \   000003CC   EC0087E5           STR      R0,[R7, #+236]
    144            lgpData[LGP_History]=               "History";
   \   000003D0   CC0F85E2           ADD      R0,R5,#+816
   \   000003D4   F00087E5           STR      R0,[R7, #+240]
    145            lgpData[LGP_Settings]=              "Settings";
   \   000003D8   CE0F85E2           ADD      R0,R5,#+824
   \   000003DC   F40087E5           STR      R0,[R7, #+244]
    146            lgpData[LGP_Exit]=                  "Exit";
   \   000003E0   D10F85E2           ADD      R0,R5,#+836
   \   000003E4   F80087E5           STR      R0,[R7, #+248]
    147            lgpData[LGP_Search]=                "Search";
   \   000003E8   D30F85E2           ADD      R0,R5,#+844
   \   000003EC   FC0087E5           STR      R0,[R7, #+252]
    148            lgpData[LGP_Find]=                  "Find on page";
   \   000003F0   D50F85E2           ADD      R0,R5,#+852
   \   000003F4   000187E5           STR      R0,[R7, #+256]
    149            lgpData[LGP_SavePage]=              "Save page";
   \   000003F8   D90F85E2           ADD      R0,R5,#+868
   \   000003FC   040187E5           STR      R0,[R7, #+260]
    150            lgpData[LGP_EnterName]=             "Enter name!";
   \   00000400   DC0F85E2           ADD      R0,R5,#+880
   \   00000404   080187E5           STR      R0,[R7, #+264]
    151            lgpData[LGP_EnterURL]=              "Enter URL!";
   \   00000408   DF0F85E2           ADD      R0,R5,#+892
   \   0000040C   0C0187E5           STR      R0,[R7, #+268]
    152            lgpData[LGP_FolderExists]=          "Folder is already exists!";
   \   00000410   E20F85E2           ADD      R0,R5,#+904
   \   00000414   100187E5           STR      R0,[R7, #+272]
    153            lgpData[LGP_FileExists]=            "File is already exists!";
   \   00000418   E90F85E2           ADD      R0,R5,#+932
   \   0000041C   140187E5           STR      R0,[R7, #+276]
    154            lgpData[LGP_FileInvalid]=           "Invalid filename";
   \   00000420   EF0F85E2           ADD      R0,R5,#+956
   \   00000424   180187E5           STR      R0,[R7, #+280]
    155            lgpData[LGP_FolderNotEmpty]=        "Folder is not empty!";
   \   00000428   F40F85E2           ADD      R0,R5,#+976
   \   0000042C   1C0187E5           STR      R0,[R7, #+284]
    156            lgpData[LGP_Yes]=                   "Yes";
   \   00000430   100F8FE2           ADR      R0,??lgpInitLangPack_0+0x10  ;; "Yes"
   \   00000434   200187E5           STR      R0,[R7, #+288]
    157            lgpData[LGP_No]=                    "No";
   \   00000438   0F0F8FE2           ADR      R0,??lgpInitLangPack_0+0x14  ;; "No"
   \   0000043C   240187E5           STR      R0,[R7, #+292]
    158            lgpData[LGP_Root]=                  "Root";
   \   00000440   FA0F85E2           ADD      R0,R5,#+1000
   \   00000444   280187E5           STR      R0,[R7, #+296]
    159            lgpData[LGP_Clear]=                 "Clear text";
   \   00000448   FC0F85E2           ADD      R0,R5,#+1008
   \   0000044C   2C0187E5           STR      R0,[R7, #+300]
    160            lgpData[LGP_AddToTemplate]=         "Add to templates";
   \   00000450   0C0085E2           ADD      R0,R5,#+12
   \   00000454   300187E5           STR      R0,[R7, #+304]
    161              
    162            
    163            lgpData[LGP_LangCode]=              "en";
   \   00000458   080F8FE2           ADR      R0,??lgpInitLangPack_0+0x18  ;; "en"
   \   0000045C   340187E5           STR      R0,[R7, #+308]
    164          }
   \   00000460   ACD08DE2           ADD      SP,SP,#+172
   \   00000464   F08FBDE8           POP      {R4-R11,PC}      ;; return
   \                     ??lgpInitLangPack_0:
   \   00000468   72750000           DC8      "ru",+0
   \   0000046C   4F6B0000           DC8      "Ok",+0
   \   00000470   41646400           DC8      "Add"
   \   00000474   476F0000           DC8      "Go",+0
   \   00000478   59657300           DC8      "Yes"
   \   0000047C   4E6F0000           DC8      "No",+0
   \   00000480   656E0000           DC8      "en",+0
   \   00000484   ........           DC32     `?<Constant "RF empty!">`
    165          

   \                                 In segment CODE, align 4, keep-with-next
    166          void lgpFreeLangPack(void)
    167          {
   \                     lgpFreeLangPack:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
    168            if (!lgpLoaded) return;
   \   00000004   ........           LDR      R4,??DataTable1  ;; lgpData
   \   00000008   380194E5           LDR      R0,[R4, #+312]
   \   0000000C   000050E3           CMP      R0,#+0
   \   00000010   3080BD08           POPEQ    {R4,R5,PC}
    169            for (int i = 0; i < LGP_DATA_NUM; i ++)
   \   00000014   0050A0E3           MOV      R5,#+0
    170            {
    171              if (lgpData[i])
   \                     ??lgpFreeLangPack_0:
   \   00000018   050194E7           LDR      R0,[R4, +R5, LSL #+2]
   \   0000001C   000050E3           CMP      R0,#+0
   \   00000020   0000000A           BEQ      ??lgpFreeLangPack_1
    172                mfree(lgpData[i]);
   \   00000024   150000EF           SWI      +21
    173            }
   \                     ??lgpFreeLangPack_1:
   \   00000028   015085E2           ADD      R5,R5,#+1
   \   0000002C   4E0055E3           CMP      R5,#+78
   \   00000030   F8FFFFBA           BLT      ??lgpFreeLangPack_0
   \   00000034   3080BDE8           POP      {R4,R5,PC}       ;; return
    174          }

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable1:
   \   00000000   ........           DC32     lgpData

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "RF empty!">`:
   \   00000000   524620656D70       DC8 "RF empty!"
   \              74792100    
   \   0000000A   0000               DC8 0, 0
   \   0000000C   41646420746F       DC8 "Add to templates"
   \              2074656D706C
   \              6174657300  
   \   0000001D   000000             DC8 0, 0, 0
   \   00000020   2462616C6C65       DC8 "$ballet\\lang.txt"
   \              745C6C616E67
   \              2E74787400  
   \   00000031   000000             DC8 0, 0, 0
   \   00000034   4572726F7221       DC8 "Error! Update lang.txt!"
   \              205570646174
   \              65206C616E67
   \              2E7478742100
   \   0000004C   43616E277420       DC8 "Can't open file!"
   \              6F70656E2066
   \              696C652100  
   \   0000005D   000000             DC8 0, 0, 0
   \   00000060   43616E277420       DC8 "Can't load AuthCode!"
   \              6C6F61642041
   \              757468436F64
   \              652100      
   \   00000075   000000             DC8 0, 0, 0
   \   00000078   43616E277420       DC8 "Can't open history.txt!"
   \              6F70656E2068
   \              6973746F7279
   \              2E7478742100
   \   00000090   436F6E666967       DC8 "Config updated!"
   \              207570646174
   \              65642100    
   \   000000A0   526566202725       DC8 "Ref '%c' under construction!"
   \              632720756E64
   \              657220636F6E
   \              737472756374
   \              696F6E2100  
   \   000000BD   000000             DC8 0, 0, 0
   \   000000C0   444E5220616E       DC8 "DNR answer..."
   \              737765722E2E
   \              2E00        
   \   000000CE   0000               DC8 0, 0
   \   000000D0   4572726F7221       DC8 "Error!"
   \              00          
   \   000000D7   00                 DC8 0
   \   000000D8   53746F7000         DC8 "Stop"
   \   000000DD   000000             DC8 0, 0, 0
   \   000000E0   576169742044       DC8 "Wait DNR..."
   \              4E522E2E2E00
   \   000000EC   497020636F6E       DC8 "Ip connect..."
   \              6E6563742E2E
   \              2E00        
   \   000000FA   0000               DC8 0, 0
   \   000000FC   47657420686F       DC8 "Get host by name"
   \              737420627920
   \              6E616D6500  
   \   0000010D   000000             DC8 0, 0, 0
   \   00000110   444E52206661       DC8 "DNR fault!"
   \              756C742100  
   \   0000011B   00                 DC8 0
   \   0000011C   444E52206F6B       DC8 "DNR ok!"
   \              2100        
   \   00000124   4F70656E2073       DC8 "Open socket..."
   \              6F636B65742E
   \              2E2E00      
   \   00000133   00                 DC8 0
   \   00000134   436F6E6E6563       DC8 "Connect fault..."
   \              74206661756C
   \              742E2E2E00  
   \   00000145   000000             DC8 0, 0, 0
   \   00000148   436F6E6E6563       DC8 "Connected..."
   \              7465642E2E2E
   \              00          
   \   00000155   000000             DC8 0, 0, 0
   \   00000158   446174612072       DC8 "Data received..."
   \              656365697665
   \              642E2E2E00  
   \   00000169   000000             DC8 0, 0, 0
   \   0000016C   53656E64696E       DC8 "Sending... %uB left"
   \              672E2E2E2025
   \              7542206C6566
   \              7400        
   \   00000180   57616974696E       DC8 "Waiting for answer..."
   \              6720666F7220
   \              616E73776572
   \              2E2E2E00    
   \   00000196   0000               DC8 0, 0
   \   00000198   52656D6F7465       DC8 "Remote closed!"
   \              20636C6F7365
   \              642100      
   \   000001A7   00                 DC8 0
   \   000001A8   4C6F63616C20       DC8 "Local closed!"
   \              636C6F736564
   \              2100        
   \   000001B6   0000               DC8 0, 0
   \   000001B8   494E45542070       DC8 "INET process busy!"
   \              726F63657373
   \              206275737921
   \              00          
   \   000001CB   00                 DC8 0
   \   000001CC   456E61626C65       DC8 "Enable GPRS first!"
   \              204750525320
   \              666972737421
   \              00          
   \   000001DF   00                 DC8 0
   \   000001E0   556E64657220       DC8 "Under Construction!"
   \              436F6E737472
   \              756374696F6E
   \              2100        
   \   000001F4   53656C656374       DC8 "Select"
   \              00          
   \   000001FB   00                 DC8 0
   \   000001FC   436C6F736500       DC8 "Close"
   \   00000202   0000               DC8 0, 0
   \   00000204   43616E63656C       DC8 "Cancel"
   \              00          
   \   0000020B   00                 DC8 0
   \   0000020C   54656D706C61       DC8 "Templates"
   \              74657300    
   \   00000216   0000               DC8 0, 0
   \   00000218   4E616D653A00       DC8 "Name:"
   \   0000021E   0000               DC8 0, 0
   \   00000220   4C696E6B3A00       DC8 "Link:"
   \   00000226   0000               DC8 0, 0
   \   00000228   546578743A00       DC8 "Text:"
   \   0000022E   0000               DC8 0, 0
   \   00000230   536561726368       DC8 "Search engine:"
   \              20656E67696E
   \              653A00      
   \   0000023F   00                 DC8 0
   \   00000240   46696E643A00       DC8 "Find:"
   \   00000246   0000               DC8 0, 0
   \   00000248   53656C656374       DC8 "Select:"
   \              3A00        
   \   00000250   456E7465723A       DC8 "Enter:"
   \              00          
   \   00000257   00                 DC8 0
   \   00000258   426F6F6B6D61       DC8 "Bookmark..."
   \              726B2E2E2E00
   \   00000264   5361766500         DC8 "Save"
   \   00000269   000000             DC8 0, 0, 0
   \   0000026C   4E657720626F       DC8 "New bookmark"
   \              6F6B6D61726B
   \              00          
   \   00000279   000000             DC8 0, 0, 0
   \   0000027C   4E657720666F       DC8 "New folder"
   \              6C64657200  
   \   00000287   00                 DC8 0
   \   00000288   416273656E74       DC8 "Absent"
   \              00          
   \   0000028F   00                 DC8 0
   \   00000290   4F7074696F6E       DC8 "Options:"
   \              733A00      
   \   00000299   000000             DC8 0, 0, 0
   \   0000029C   4564697400         DC8 "Edit"
   \   000002A1   000000             DC8 0, 0, 0
   \   000002A4   44656C657465       DC8 "Delete"
   \              00          
   \   000002AB   00                 DC8 0
   \   000002AC   4261636B00         DC8 "Back"
   \   000002B1   000000             DC8 0, 0, 0
   \   000002B4   4F7074696F6E       DC8 "Options"
   \              7300        
   \   000002BC   53656C656374       DC8 "Select bookmark:"
   \              20626F6F6B6D
   \              61726B3A00  
   \   000002CD   000000             DC8 0, 0, 0
   \   000002D0   536561726368       DC8 "Search:"
   \              3A00        
   \   000002D8   46696E642073       DC8 "Find string:"
   \              7472696E673A
   \              00          
   \   000002E5   000000             DC8 0, 0, 0
   \   000002E8   456E74657220       DC8 "Enter name:"
   \              6E616D653A00
   \   000002F4   4D6174636820       DC8 "Match case"
   \              6361736500  
   \   000002FF   00                 DC8 0
   \   00000300   486973746F72       DC8 "History:"
   \              793A00      
   \   00000309   000000             DC8 0, 0, 0
   \   0000030C   416464726573       DC8 "Address"
   \              7300        
   \   00000314   4D656E7500         DC8 "Menu"
   \   00000319   000000             DC8 0, 0, 0
   \   0000031C   476F20746F00       DC8 "Go to"
   \   00000322   0000               DC8 0, 0
   \   00000324   426F6F6B6D61       DC8 "Bookmarks"
   \              726B7300    
   \   0000032E   0000               DC8 0, 0
   \   00000330   486973746F72       DC8 "History"
   \              7900        
   \   00000338   53657474696E       DC8 "Settings"
   \              677300      
   \   00000341   000000             DC8 0, 0, 0
   \   00000344   4578697400         DC8 "Exit"
   \   00000349   000000             DC8 0, 0, 0
   \   0000034C   536561726368       DC8 "Search"
   \              00          
   \   00000353   00                 DC8 0
   \   00000354   46696E64206F       DC8 "Find on page"
   \              6E2070616765
   \              00          
   \   00000361   000000             DC8 0, 0, 0
   \   00000364   536176652070       DC8 "Save page"
   \              61676500    
   \   0000036E   0000               DC8 0, 0
   \   00000370   456E74657220       DC8 "Enter name!"
   \              6E616D652100
   \   0000037C   456E74657220       DC8 "Enter URL!"
   \              55524C2100  
   \   00000387   00                 DC8 0
   \   00000388   466F6C646572       DC8 "Folder is already exists!"
   \              20697320616C
   \              726561647920
   \              657869737473
   \              2100        
   \   000003A2   0000               DC8 0, 0
   \   000003A4   46696C652069       DC8 "File is already exists!"
   \              7320616C7265
   \              616479206578
   \              697374732100
   \   000003BC   496E76616C69       DC8 "Invalid filename"
   \              642066696C65
   \              6E616D6500  
   \   000003CD   000000             DC8 0, 0, 0
   \   000003D0   466F6C646572       DC8 "Folder is not empty!"
   \              206973206E6F
   \              7420656D7074
   \              792100      
   \   000003E5   000000             DC8 0, 0, 0
   \   000003E8   526F6F7400         DC8 "Root"
   \   000003ED   000000             DC8 0, 0, 0
   \   000003F0   436C65617220       DC8 "Clear text"
   \              7465787400  
   \   000003FB   00                 DC8 0

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   727500             DC8 "ru"

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   656E00             DC8 "en"

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   4F6B00             DC8 "Ok"

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   41646400           DC8 "Add"

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   476F00             DC8 "Go"

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   59657300           DC8 "Yes"

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   4E6F00             DC8 "No"

   Maximum stack usage in bytes:

     Function        CSTACK
     --------        ------
     lgpFreeLangPack    12
     lgpInitLangPack   208


   Segment part sizes:

     Function/Label          Bytes
     --------------          -----
     lgpData                  316
     lgpInitLangPack         1160
     lgpFreeLangPack           56
     ??DataTable1               4
     ?<Constant "RF empty!"> 1020
     ?<Constant "ru">           3
     ?<Constant "en">           3
     ?<Constant "Ok">           3
     ?<Constant "Add">          4
     ?<Constant "Go">           3
     ?<Constant "Yes">          4
     ?<Constant "No">           3
      Others                   32

 
 1 240 bytes in segment CODE
 1 043 bytes in segment DATA_C
   316 bytes in segment DATA_Z
    12 bytes in segment INITTAB
 
 1 220 bytes of CODE  memory (+ 32 bytes shared)
 1 043 bytes of CONST memory
   316 bytes of DATA  memory

Errors: none
Warnings: none
