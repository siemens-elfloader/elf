##############################################################################
#                                                                            #
# IAR ARM ANSI C/C++ Compiler V4.42A/W32 EVALUATION    21/Dec/2010  16:55:41 #
# Copyright 1999-2005 IAR Systems. All rights reserved.                      #
#                                                                            #
#    Cpu mode        =  interwork                                            #
#    Endian          =  little                                               #
#    Stack alignment =  4                                                    #
#    Source file     =  C:\arm\callwriter\main.c                             #
#    Command line    =  C:\arm\callwriter\main.c -lC                         #
#                       C:\arm\callwriter\Release_SGOLD\List\ -o             #
#                       C:\arm\callwriter\Release_SGOLD\Obj\ -s9             #
#                       --no_unroll --no_clustering --cpu_mode arm --endian  #
#                       little --cpu ARM926EJ-S --stack_align 4 --interwork  #
#                       -e --fpu None -I "C:\arm2\Embedded Workbench 4.0     #
#                       Evaluation\ARM\INC\" --inline_threshold=2            #
#    List file       =  C:\arm\callwriter\Release_SGOLD\List\main.lst        #
#    Object file     =  C:\arm\callwriter\Release_SGOLD\Obj\main.r79         #
#                                                                            #
#                                                                            #
##############################################################################

C:\arm\callwriter\main.c
      1          #include "..\inc\swilib.h"
      2          #include "conf_loader.h"
      3          #include "obs/obs.c"

   \                                 In segment DATA_Z, align 4, align-sorted
   \   int __data object
   \                     object:
   \   00000000                      DS8 4

   \                                 In segment DATA_Z, align 4, align-sorted
   \   int __data action
   \                     action:
   \   00000000                      DS8 4

   \                                 In segment DATA_Z, align 4, align-sorted
   \   char __data RecordName[256]
   \                     RecordName:
   \   00000000                      DS8 256

   \                                 In segment CODE, align 4, keep-with-next
   \   __??Code32?? __code __interwork __atpcs int Obs_CreateAmrFile(char *)
   \                     Obs_CreateAmrFile:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
   \   00000004   54519FE5           LDR      R5,??Obs_CreateAmrFile_0+0x8  ;; folder
   \   00000008   54419FE5           LDR      R4,??Obs_CreateAmrFile_0+0xC  ;; RecordName
   \   0000000C   0070A0E1           MOV      R7,R0
   \   00000010   0500A0E1           MOV      R0,R5
   \   00000014   1B0000EF           SWI      +27
   \   00000018   050080E0           ADD      R0,R0,R5
   \   0000001C   010050E5           LDRB     R0,[R0, #-1]
   \   00000020   5C0050E3           CMP      R0,#+92
   \   00000024   0300001A           BNE      ??Obs_CreateAmrFile_1
   \   00000028   0510A0E1           MOV      R1,R5
   \   0000002C   0400A0E1           MOV      R0,R4
   \   00000030   1A0000EF           SWI      +26
   \   00000034   040000EA           B        ??Obs_CreateAmrFile_2
   \                     ??Obs_CreateAmrFile_1:
   \   00000038   0530A0E1           MOV      R3,R5
   \   0000003C   452F8FE2           ADR      R2,??Obs_CreateAmrFile_0  ;; "\\%s"
   \   00000040   FF10A0E3           MOV      R1,#+255
   \   00000044   0400A0E1           MOV      R0,R4
   \   00000048   1B0100EF           SWI      +283
   \                     ??Obs_CreateAmrFile_2:
   \   0000004C   400FA0E3           MOV      R0,#+256
   \   00000050   250100EF           SWI      +293
   \   00000054   0050A0E1           MOV      R5,R0
   \   00000058   3F1F8FE2           ADR      R1,??Obs_CreateAmrFile_0+0x4  ;; "amr"
   \   0000005C   240100EF           SWI      +292
   \   00000060   0500A0E1           MOV      R0,R5
   \   00000064   D00100EF           SWI      +464
   \   00000068   0710A0E1           MOV      R1,R7
   \   0000006C   ........           LDR      R7,??DataTable6  ;; object
   \   00000070   0060A0E1           MOV      R6,R0
   \   00000074   0400A0E1           MOV      R0,R4
   \   00000078   170000EF           SWI      +23
   \   0000007C   000097E5           LDR      R0,[R7, #+0]
   \   00000080   0030A0E3           MOV      R3,#+0
   \   00000084   000050E3           CMP      R0,#+0
   \   00000088   0000A013           MOVNE    R0,#+0
   \   0000008C   00008715           STRNE    R0,[R7, #+0]
   \   00000090   01002DE9           PUSH     {R0}
   \   00000094   0220A0E3           MOV      R2,#+2
   \   00000098   0610A0E1           MOV      R1,R6
   \   0000009C   0000A0E3           MOV      R0,#+0
   \   000000A0   01002DE9           PUSH     {R0}
   \   000000A4   0100A0E3           MOV      R0,#+1
   \   000000A8   01002DE9           PUSH     {R0}
   \   000000AC   3000A0E3           MOV      R0,#+48
   \   000000B0   590200EF           SWI      +601
   \   000000B4   000087E5           STR      R0,[R7, #+0]
   \   000000B8   FF20A0E3           MOV      R2,#+255
   \   000000BC   0410A0E1           MOV      R1,R4
   \   000000C0   0500A0E1           MOV      R0,R5
   \   000000C4   6C0100EF           SWI      +364
   \   000000C8   000097E5           LDR      R0,[R7, #+0]
   \   000000CC   0410A0E1           MOV      R1,R4
   \   000000D0   760200EF           SWI      +630
   \   000000D4   5F0000EF           SWI      +95
   \   000000D8   8F10E0E3           MVN      R1,#+143
   \   000000DC   401FC1E3           BIC      R1,R1,#0x100
   \   000000E0   001081E0           ADD      R1,R1,R0
   \   000000E4   000097E5           LDR      R0,[R7, #+0]
   \   000000E8   740200EF           SWI      +628
   \   000000EC   74009FE5           LDR      R0,??Obs_CreateAmrFile_0+0x10  ;; amrmode
   \   000000F0   000090E5           LDR      R0,[R0, #+0]
   \   000000F4   0CD08DE2           ADD      SP,SP,#+12
   \   000000F8   000050E3           CMP      R0,#+0
   \   000000FC   0400000A           BEQ      ??Obs_CreateAmrFile_3
   \   00000100   010050E2           SUBS     R0,R0,#+1
   \   00000104   0400000A           BEQ      ??Obs_CreateAmrFile_4
   \   00000108   010050E2           SUBS     R0,R0,#+1
   \   0000010C   0400000A           BEQ      ??Obs_CreateAmrFile_5
   \   00000110   060000EA           B        ??Obs_CreateAmrFile_6
   \                     ??Obs_CreateAmrFile_3:
   \   00000114   0010A0E3           MOV      R1,#+0
   \   00000118   020000EA           B        ??Obs_CreateAmrFile_7
   \                     ??Obs_CreateAmrFile_4:
   \   0000011C   0410A0E3           MOV      R1,#+4
   \   00000120   000000EA           B        ??Obs_CreateAmrFile_7
   \                     ??Obs_CreateAmrFile_5:
   \   00000124   0710A0E3           MOV      R1,#+7
   \                     ??Obs_CreateAmrFile_7:
   \   00000128   000097E5           LDR      R0,[R7, #+0]
   \   0000012C   720200EF           SWI      +626
   \                     ??Obs_CreateAmrFile_6:
   \   00000130   000097E5           LDR      R0,[R7, #+0]
   \   00000134   0010A0E3           MOV      R1,#+0
   \   00000138   750200EF           SWI      +629
   \   0000013C   0500A0E1           MOV      R0,R5
   \   00000140   290100EF           SWI      +297
   \   00000144   ........           LDR      R0,??DataTable7  ;; action
   \   00000148   0110A0E3           MOV      R1,#+1
   \   0000014C   001080E5           STR      R1,[R0, #+0]
   \   00000150   0100A0E3           MOV      R0,#+1
   \   00000154   F080BDE8           POP      {R4-R7,PC}       ;; return
   \                     ??Obs_CreateAmrFile_0:
   \   00000158   5C257300           DC8      "\\%s"
   \   0000015C   616D7200           DC8      "amr"
   \   00000160   ........           DC32     folder
   \   00000164   ........           DC32     RecordName
   \   00000168   ........           DC32     amrmode

   \                                 In segment CODE, align 4, keep-with-next
   \   __??Code32?? __code __interwork __atpcs int Obs_StopAmrWrite()
   \                     Obs_StopAmrWrite:
   \   00000000   ........           LDR      R0,??DataTable6  ;; object
   \   00000004   00402DE9           PUSH     {LR}
   \   00000008   000090E5           LDR      R0,[R0, #+0]
   \   0000000C   670200EF           SWI      +615
   \   00000010   ........           LDR      R0,??DataTable7  ;; action
   \   00000014   0310A0E3           MOV      R1,#+3
   \   00000018   001080E5           STR      R1,[R0, #+0]
   \   0000001C   ........           BL       Obs_DeleteObj
   \   00000020   0100A0E3           MOV      R0,#+1
   \   00000024   0080BDE8           POP      {PC}             ;; return

   \                                 In segment CODE, align 4, keep-with-next
   \   __??Code32?? __code __interwork __atpcs int Obs_StartAmrWrite()
   \                     Obs_StartAmrWrite:
   \   00000000   ........           LDR      R0,??DataTable6  ;; object
   \   00000004   00402DE9           PUSH     {LR}
   \   00000008   000090E5           LDR      R0,[R0, #+0]
   \   0000000C   5E0200EF           SWI      +606
   \   00000010   ........           LDR      R0,??DataTable7  ;; action
   \   00000014   0210A0E3           MOV      R1,#+2
   \   00000018   001080E5           STR      R1,[R0, #+0]
   \   0000001C   0100A0E3           MOV      R0,#+1
   \   00000020   0080BDE8           POP      {PC}             ;; return

   \                                 In segment CODE, align 4, keep-with-next
   \   __??Code32?? __code __interwork __atpcs int Obs_DeleteObj()
   \                     Obs_DeleteObj:
   \   00000000   ........           LDR      R0,??DataTable6  ;; object
   \   00000004   00402DE9           PUSH     {LR}
   \   00000008   000090E5           LDR      R0,[R0, #+0]
   \   0000000C   5A0200EF           SWI      +602
   \   00000010   ........           LDR      R0,??DataTable7  ;; action
   \   00000014   0010A0E3           MOV      R1,#+0
   \   00000018   001080E5           STR      R1,[R0, #+0]
   \   0000001C   0100A0E3           MOV      R0,#+1
   \   00000020   0080BDE8           POP      {PC}             ;; return
      4          
      5          

   \                                 In segment DATA_C, align 4, align-sorted
      6          const int minus11=-11;
   \                     minus11:
   \   00000000   F5FFFFFF           DC32 -11
      7          
      8          typedef struct
      9          {
     10            CSM_RAM csm;
     11          }MAIN_CSM;
     12          

   \                                 In segment DATA_Z, align 4, align-sorted
     13          char elfname[24];
   \                     elfname:
   \   00000000                      DS8 24
     14          
     15          

   \                                 In segment DATA_Z, align 4, align-sorted
     16          int auto_answer=0;
   \                     auto_answer:
   \   00000000                      DS8 4
     17          void Close();

   \                                 In segment DATA_Z, align 4, align-sorted
     18          TDate d;
   \                     d:
   \   00000000                      DS8 8

   \                                 In segment DATA_Z, align 4, align-sorted
     19          TTime real_time,t;
   \                     real_time:
   \   00000000                      DS8 8

   \                                 In segment DATA_Z, align 4, align-sorted
   \                     t:
   \   00000000                      DS8 8

   \                                 In segment DATA_Z, align 4, align-sorted
     20          char name[32];
   \                     name:
   \   00000000                      DS8 32
     21          extern const int profile;
     22          extern const int time_on_sec,time_on_min,time_off_sec,time_off_min;
     23          extern const int time_on_on,time_off_off;
     24          extern const int opmod;
     25          extern const unsigned int Key1,Key1Type,Key2,Key2Type;
     26          

   \                                 In segment DATA_Z, align 4, align-sorted
     27          GBSTMR tmr;
   \                     tmr:
   \   00000000                      DS8 16
     28          void Auto();
     29          

   \                                 In segment DATA_Z, align 4, align-sorted
     30          unsigned int in=0,out=0,autom=0;
   \                     in:
   \   00000000                      DS8 4

   \                                 In segment DATA_Z, align 4, align-sorted
   \                     out:
   \   00000000                      DS8 4

   \                                 In segment DATA_Z, align 4, align-sorted
   \                     autom:
   \   00000000                      DS8 4
     31          
     32          

   \                                 In segment DATA_Z, align 1, align-sorted
     33          static volatile char is_call=0; //0 - нет звонка 1 - исходщий(не пишется) 2 - входящий(не пишется) 3 - исходщий(пишется) 4 - входящий(пишется)
   \                     is_call:
   \   00000000                      DS8 1
     34          int my_keyhook(int submsg, int msg);
     35          
     36          void UpdateCSMname(void);
     37          typedef struct
     38          {
     39            GUI gui;
     40            WSHDR *ws1;
     41            WSHDR *ws2;
     42            int i1;
     43          }MAIN_GUI;

   \                                 In segment DATA_Z, align 4, align-sorted
     44          CSM_RAM *icsm;
   \                     icsm:
   \   00000000                      DS8 4
     45          
     46          
     47          extern void kill_data(void *p, void (*func_p)(void *));

   \                                 In segment DATA_Z, align 4, align-sorted
     48          int (*old_icsm_onMessage)(CSM_RAM*,GBS_MSG*);
   \                     old_icsm_onMessage:
   \   00000000                      DS8 4
     49          
     50          
     51          #pragma inline=forced
     52          int toupper(int c)
     53          {
     54            if ((c>='a')&&(c<='z')) c+='A'-'a';
     55            return(c);
     56          }
     57          

   \                                 In segment CODE, align 4, keep-with-next
     58          int strcmp_nocase(const char *s1,const char *s2)
     59          {
     60            int i;
     61            int c;
     62            while(!(i=(c=toupper(*s1++))-toupper(*s2++))) if (!c) break;
   \                     strcmp_nocase:
   \                     ??strcmp_nocase_0:
   \   00000000   0020D0E5           LDRB     R2,[R0, #+0]
   \   00000004   610052E3           CMP      R2,#+97
   \   00000008   010000BA           BLT      ??strcmp_nocase_1
   \   0000000C   7B0052E3           CMP      R2,#+123
   \   00000010   202042B2           SUBLT    R2,R2,#+32
   \                     ??strcmp_nocase_1:
   \   00000014   00C0D1E5           LDRB     R12,[R1, #+0]
   \   00000018   010080E2           ADD      R0,R0,#+1
   \   0000001C   0230A0E1           MOV      R3,R2
   \   00000020   61005CE3           CMP      R12,#+97
   \   00000024   010000BA           BLT      ??strcmp_nocase_2
   \   00000028   7B005CE3           CMP      R12,#+123
   \   0000002C   20C04CB2           SUBLT    R12,R12,#+32
   \                     ??strcmp_nocase_2:
   \   00000030   011081E2           ADD      R1,R1,#+1
   \   00000034   0C2052E0           SUBS     R2,R2,R12
   \   00000038   0100001A           BNE      ??strcmp_nocase_3
   \   0000003C   000053E3           CMP      R3,#+0
   \   00000040   EEFFFF1A           BNE      ??strcmp_nocase_0
     63            return(i);
   \                     ??strcmp_nocase_3:
   \   00000044   0200A0E1           MOV      R0,R2
   \   00000048   1EFF2FE1           BX       LR               ;; return
     64          }
     65          

   \                                 In segment CODE, align 4, keep-with-next
     66          void OpenCall()
     67          {
   \                     OpenCall:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
     68              if(is_call!=3&&is_call!=4)
   \   00000004   ........           LDR      R5,??DataTable37  ;; is_call
   \   00000008   0000D5E5           LDRB     R0,[R5, #+0]
   \   0000000C   030050E3           CMP      R0,#+3
   \   00000010   0000D515           LDRBNE   R0,[R5, #+0]
   \   00000014   04005013           CMPNE    R0,#+4
   \   00000018   F080BD08           POPEQ    {R4-R7,PC}
     69            {
     70            GetDateTime(&d,&t);
   \   0000001C   60619FE5           LDR      R6,??OpenCall_0  ;; d
   \   00000020   60719FE5           LDR      R7,??OpenCall_0+0x4  ;; t
     71            sprintf(name,"unknown_%d-%d-%u_%d-%d-%d.amr",d.day,d.month,d.year,t.hour,t.min,t.sec);
   \   00000024   60419FE5           LDR      R4,??OpenCall_0+0x8  ;; name
   \   00000028   0710A0E1           MOV      R1,R7
   \   0000002C   0600A0E1           MOV      R0,R6
   \   00000030   B40000EF           SWI      +180
   \   00000034   0200D7E5           LDRB     R0,[R7, #+2]
   \   00000038   50119FE5           LDR      R1,??OpenCall_0+0xC  ;; `?<Constant "unknown_%d-%d-%u_%d-%...">`
   \   0000003C   01002DE9           PUSH     {R0}
   \   00000040   0100D7E5           LDRB     R0,[R7, #+1]
   \   00000044   01002DE9           PUSH     {R0}
   \   00000048   0000D7E5           LDRB     R0,[R7, #+0]
   \   0000004C   01002DE9           PUSH     {R0}
   \   00000050   000096E5           LDR      R0,[R6, #+0]
   \   00000054   01002DE9           PUSH     {R0}
   \   00000058   0430D6E5           LDRB     R3,[R6, #+4]
   \   0000005C   0520D6E5           LDRB     R2,[R6, #+5]
   \   00000060   0400A0E1           MOV      R0,R4
   \   00000064   160000EF           SWI      +22
     72            if(auto_answer){sprintf(name,"auto\\%d-%d-%u_%d-%d-%d.amr",d.day,d.month,d.year,t.hour,t.min,t.sec);real_time.sec=0;real_time.min=0;Close();autom++;}
   \   00000068   ........           LDR      R0,??DataTable36  ;; auto_answer
   \   0000006C   000090E5           LDR      R0,[R0, #+0]
   \   00000070   10D08DE2           ADD      SP,SP,#+16
   \   00000074   000050E3           CMP      R0,#+0
   \   00000078   1600000A           BEQ      ??OpenCall_1
   \   0000007C   0200D7E5           LDRB     R0,[R7, #+2]
   \   00000080   0C119FE5           LDR      R1,??OpenCall_0+0x10  ;; `?<Constant "auto\\\\%d-%d-%u_%d-%d-%...">`
   \   00000084   01002DE9           PUSH     {R0}
   \   00000088   0100D7E5           LDRB     R0,[R7, #+1]
   \   0000008C   01002DE9           PUSH     {R0}
   \   00000090   0000D7E5           LDRB     R0,[R7, #+0]
   \   00000094   01002DE9           PUSH     {R0}
   \   00000098   000096E5           LDR      R0,[R6, #+0]
   \   0000009C   01002DE9           PUSH     {R0}
   \   000000A0   0430D6E5           LDRB     R3,[R6, #+4]
   \   000000A4   0520D6E5           LDRB     R2,[R6, #+5]
   \   000000A8   0400A0E1           MOV      R0,R4
   \   000000AC   160000EF           SWI      +22
   \   000000B0   ........           LDR      R0,??DataTable16  ;; real_time
   \   000000B4   0010A0E3           MOV      R1,#+0
   \   000000B8   0210C0E5           STRB     R1,[R0, #+2]
   \   000000BC   0110C0E5           STRB     R1,[R0, #+1]
   \   000000C0   ........           BL       Close
   \   000000C4   ........           LDR      R0,??DataTable40  ;; autom
   \   000000C8   001090E5           LDR      R1,[R0, #+0]
   \   000000CC   011081E2           ADD      R1,R1,#+1
   \   000000D0   001080E5           STR      R1,[R0, #+0]
   \   000000D4   250000EA           B        ??OpenCall_2
   \                     ??OpenCall_1:
   \   000000D8   0520D6E5           LDRB     R2,[R6, #+5]
   \   000000DC   0430D6E5           LDRB     R3,[R6, #+4]
   \   000000E0   0100D7E5           LDRB     R0,[R7, #+1]
   \   000000E4   0210D7E5           LDRB     R1,[R7, #+2]
   \   000000E8   0070D7E5           LDRB     R7,[R7, #+0]
   \   000000EC   006096E5           LDR      R6,[R6, #+0]
   \   000000F0   00C0D5E5           LDRB     R12,[R5, #+0]
   \   000000F4   01005CE3           CMP      R12,#+1
   \   000000F8   0C00001A           BNE      ??OpenCall_3
     73            else{
     74              if(is_call==1){out++;sprintf(name,"out\\%d-%d-%u_%d-%d-%d.amr",d.day,d.month,d.year,t.hour,t.min,t.sec);is_call=3;}
   \   000000FC   ........           LDR      R12,??DataTable42  ;; out
   \   00000100   00E09CE5           LDR      LR,[R12, #+0]
   \   00000104   01E08EE2           ADD      LR,LR,#+1
   \   00000108   00E08CE5           STR      LR,[R12, #+0]
   \   0000010C   02002DE9           PUSH     {R1}
   \   00000110   80109FE5           LDR      R1,??OpenCall_0+0x14  ;; `?<Constant "out\\\\%d-%d-%u_%d-%d-%d...">`
   \   00000114   01002DE9           PUSH     {R0}
   \   00000118   80002DE9           PUSH     {R7}
   \   0000011C   40002DE9           PUSH     {R6}
   \   00000120   0400A0E1           MOV      R0,R4
   \   00000124   160000EF           SWI      +22
   \   00000128   0300A0E3           MOV      R0,#+3
   \   0000012C   0E0000EA           B        ??OpenCall_4
     75              else if(is_call==2){in++;sprintf(name,"in\\%d-%d-%u_%d-%d-%d.amr",d.day,d.month,d.year,t.hour,t.min,t.sec);is_call=4;}}
   \                     ??OpenCall_3:
   \   00000130   00C0D5E5           LDRB     R12,[R5, #+0]
   \   00000134   02005CE3           CMP      R12,#+2
   \   00000138   0D00001A           BNE      ??OpenCall_5
   \   0000013C   ........           LDR      R12,??DataTable43  ;; in
   \   00000140   00E09CE5           LDR      LR,[R12, #+0]
   \   00000144   01E08EE2           ADD      LR,LR,#+1
   \   00000148   00E08CE5           STR      LR,[R12, #+0]
   \   0000014C   02002DE9           PUSH     {R1}
   \   00000150   44109FE5           LDR      R1,??OpenCall_0+0x18  ;; `?<Constant "in\\\\%d-%d-%u_%d-%d-%d.amr">`
   \   00000154   01002DE9           PUSH     {R0}
   \   00000158   80002DE9           PUSH     {R7}
   \   0000015C   40002DE9           PUSH     {R6}
   \   00000160   0400A0E1           MOV      R0,R4
   \   00000164   160000EF           SWI      +22
   \   00000168   0400A0E3           MOV      R0,#+4
   \                     ??OpenCall_4:
   \   0000016C   0000C5E5           STRB     R0,[R5, #+0]
   \                     ??OpenCall_2:
   \   00000170   10D08DE2           ADD      SP,SP,#+16       ;; stack cleaning
     76            
     77            Obs_CreateAmrFile(name);
   \                     ??OpenCall_5:
   \   00000174   0400A0E1           MOV      R0,R4
   \   00000178   ........           BL       Obs_CreateAmrFile
     78            Obs_StartAmrWrite();
   \   0000017C   ........           BL       Obs_StartAmrWrite
     79              }
     80            
     81          }
   \   00000180   F080BDE8           POP      {R4-R7,PC}       ;; return
   \                     ??OpenCall_0:
   \   00000184   ........           DC32     d
   \   00000188   ........           DC32     t
   \   0000018C   ........           DC32     name
   \   00000190   ........           DC32     `?<Constant "unknown_%d-%d-%u_%d-%...">`
   \   00000194   ........           DC32     `?<Constant "auto\\\\%d-%d-%u_%d-%d-%...">`
   \   00000198   ........           DC32     `?<Constant "out\\\\%d-%d-%u_%d-%d-%d...">`
   \   0000019C   ........           DC32     `?<Constant "in\\\\%d-%d-%u_%d-%d-%d.amr">`

   \                                 In segment CODE, align 4, keep-with-next
     82          void CloseCall()
     83          {
   \                     CloseCall:
   \   00000000   10402DE9           PUSH     {R4,LR}
     84            if(is_call==3||is_call==4)
   \   00000004   ........           LDR      R4,??DataTable37  ;; is_call
   \   00000008   0000D4E5           LDRB     R0,[R4, #+0]
   \   0000000C   030050E3           CMP      R0,#+3
   \   00000010   0000D415           LDRBNE   R0,[R4, #+0]
   \   00000014   04005013           CMPNE    R0,#+4
   \   00000018   1080BD18           POPNE    {R4,PC}
     85            {
     86               Obs_StopAmrWrite();
   \   0000001C   ........           BL       Obs_StopAmrWrite
     87               is_call=0;
     88               auto_answer=0;
   \   00000020   ........           LDR      R1,??DataTable36  ;; auto_answer
   \   00000024   0000A0E3           MOV      R0,#+0
   \   00000028   0000C4E5           STRB     R0,[R4, #+0]
   \   0000002C   000081E5           STR      R0,[R1, #+0]
     89               real_time.sec=0;
   \   00000030   ........           LDR      R1,??DataTable16  ;; real_time
   \   00000034   0200C1E5           STRB     R0,[R1, #+2]
     90               real_time.min=0;
   \   00000038   0100C1E5           STRB     R0,[R1, #+1]
     91               UpdateCSMname();
   \   0000003C   ........           LDR      R0,??DataTable40  ;; autom
   \   00000040   ........           LDR      R1,??DataTable41  ;; `?<Constant "in:%d out:%d auto:%d">`
   \   00000044   000090E5           LDR      R0,[R0, #+0]
   \   00000048   01002DE9           PUSH     {R0}
   \   0000004C   ........           LDR      R0,??DataTable42  ;; out
   \   00000050   003090E5           LDR      R3,[R0, #+0]
   \   00000054   ........           LDR      R0,??DataTable43  ;; in
   \   00000058   002090E5           LDR      R2,[R0, #+0]
   \   0000005C   08009FE5           LDR      R0,??CloseCall_0  ;; MAINCSM + 24
   \   00000060   240100EF           SWI      +292
   \   00000064   04D08DE2           ADD      SP,SP,#+4
     92            }
     93          }
   \   00000068   1080BDE8           POP      {R4,PC}          ;; return
   \                     ??CloseCall_0:
   \   0000006C   ........           DC32     MAINCSM + 24
     94          

   \                                 In segment CODE, align 4, keep-with-next
     95          int MyIDLECSM_onMessage(CSM_RAM* data,GBS_MSG* msg)
     96          {
     97            int csm_result;
     98            csm_result=old_icsm_onMessage(data,msg);
   \                     MyIDLECSM_onMessage:
   \   00000000   ........           LDR      R2,??DataTable45  ;; old_icsm_onMessage
   \   00000004   70402DE9           PUSH     {R4-R6,LR}
   \   00000008   002092E5           LDR      R2,[R2, #+0]
   \   0000000C   0140A0E1           MOV      R4,R1
   \   00000010   32FF2FE1           BLX      R2
   \   00000014   0050A0E1           MOV      R5,R0
     99            if(profile==0||profile==GetProfile())
   \   00000018   B4009FE5           LDR      R0,??MyIDLECSM_onMessage_0  ;; profile
   \   0000001C   006090E5           LDR      R6,[R0, #+0]
   \   00000020   000056E3           CMP      R6,#+0
   \   00000024   0200000A           BEQ      ??MyIDLECSM_onMessage_1
   \   00000028   B60000EF           SWI      +182
   \   0000002C   000056E1           CMP      R6,R0
   \   00000030   2500001A           BNE      ??MyIDLECSM_onMessage_2
    100            {
    101            if (msg->msg==MSG_INCOMMING_CALL&&!is_call){is_call=2;Auto();}
   \                     ??MyIDLECSM_onMessage_1:
   \   00000034   F200D4E1           LDRSH    R0,[R4, #+2]
   \   00000038   ........           LDR      R6,??DataTable37  ;; is_call
   \   0000003C   080050E3           CMP      R0,#+8
   \   00000040   0500001A           BNE      ??MyIDLECSM_onMessage_3
   \   00000044   0000D6E5           LDRB     R0,[R6, #+0]
   \   00000048   000050E3           CMP      R0,#+0
   \   0000004C   1E00001A           BNE      ??MyIDLECSM_onMessage_2
   \   00000050   0200A0E3           MOV      R0,#+2
   \   00000054   0000C6E5           STRB     R0,[R6, #+0]
   \   00000058   ........           BL       Auto
    102            
    103            if (((msg->msg==MSG_STATE_OF_CALL)&&(msg->submess==1)&&((int)msg->data0==2))&&is_call!=3&&is_call!=4)
   \                     ??MyIDLECSM_onMessage_3:
   \   0000005C   F200D4E1           LDRSH    R0,[R4, #+2]
   \   00000060   0B0050E3           CMP      R0,#+11
   \   00000064   1200001A           BNE      ??MyIDLECSM_onMessage_4
   \   00000068   040094E5           LDR      R0,[R4, #+4]
   \   0000006C   010050E3           CMP      R0,#+1
   \   00000070   08009405           LDREQ    R0,[R4, #+8]
   \   00000074   02005003           CMPEQ    R0,#+2
   \   00000078   1300001A           BNE      ??MyIDLECSM_onMessage_2
   \   0000007C   0000D6E5           LDRB     R0,[R6, #+0]
   \   00000080   030050E3           CMP      R0,#+3
   \   00000084   0000D615           LDRBNE   R0,[R6, #+0]
   \   00000088   04005013           CMPNE    R0,#+4
   \   0000008C   0E00000A           BEQ      ??MyIDLECSM_onMessage_2
    104            {
    105              if(is_call==0)is_call=1;
   \   00000090   0000D6E5           LDRB     R0,[R6, #+0]
   \   00000094   000050E3           CMP      R0,#+0
   \   00000098   0100A003           MOVEQ    R0,#+1
   \   0000009C   0000C605           STRBEQ   R0,[R6, #+0]
    106              if(opmod==0)OpenCall();
   \   000000A0   ........           LDR      R0,??DataTable33  ;; opmod
   \   000000A4   000090E5           LDR      R0,[R0, #+0]
   \   000000A8   000050E3           CMP      R0,#+0
   \   000000AC   0000001A           BNE      ??MyIDLECSM_onMessage_4
   \   000000B0   ........           BL       OpenCall
    107            }
    108            if(msg->msg == MSG_END_CALL) 
   \                     ??MyIDLECSM_onMessage_4:
   \   000000B4   F200D4E1           LDRSH    R0,[R4, #+2]
   \   000000B8   0D0050E3           CMP      R0,#+13
   \   000000BC   0200001A           BNE      ??MyIDLECSM_onMessage_2
    109            {
    110               CloseCall();
   \   000000C0   ........           BL       CloseCall
    111               is_call=0;
   \   000000C4   0000A0E3           MOV      R0,#+0
   \   000000C8   0000C6E5           STRB     R0,[R6, #+0]
    112            }
    113            }
    114            return(csm_result);
   \                     ??MyIDLECSM_onMessage_2:
   \   000000CC   0500A0E1           MOV      R0,R5
   \   000000D0   7080BDE8           POP      {R4-R6,PC}       ;; return
   \                     ??MyIDLECSM_onMessage_0:
   \   000000D4   ........           DC32     profile
    115          }
    116          

   \                                 In segment CODE, align 4, keep-with-next
    117          int maincsm_onmessage(CSM_RAM* data,GBS_MSG* msg)
    118          {
   \                     maincsm_onmessage:
   \   00000000   10402DE9           PUSH     {R4,LR}
   \   00000004   24D04DE2           SUB      SP,SP,#+36
    119             if(msg->msg == MSG_RECONFIGURE_REQ) 
   \   00000008   F200D1E1           LDRSH    R0,[R1, #+2]
   \   0000000C   F120A0E3           MOV      R2,#+241
   \   00000010   C02F82E3           ORR      R2,R2,#0x300
   \   00000014   020050E1           CMP      R0,R2
   \   00000018   0F00001A           BNE      ??maincsm_onmessage_0
    120            {
    121              extern const char *successed_config_filename;
    122              if (strcmp_nocase(successed_config_filename,(char *)msg->data0)==0)
   \   0000001C   44009FE5           LDR      R0,??maincsm_onmessage_1  ;; successed_config_filename
   \   00000020   081091E5           LDR      R1,[R1, #+8]
   \   00000024   000090E5           LDR      R0,[R0, #+0]
   \   00000028   ........           BL       strcmp_nocase
   \   0000002C   000050E3           CMP      R0,#+0
   \   00000030   0900001A           BNE      ??maincsm_onmessage_0
    123              {
    124                char msg[36];
    125                sprintf(msg,"%s обновлен!",elfname);
   \   00000034   ........           LDR      R4,??DataTable39  ;; elfname
   \   00000038   2C109FE5           LDR      R1,??maincsm_onmessage_1+0x4  ;; `?<Constant "%s \\356\\341\\355\\356\\342\\353\\345\\35`
   \   0000003C   0420A0E1           MOV      R2,R4
   \   00000040   0D00A0E1           MOV      R0,SP
   \   00000044   160000EF           SWI      +22
    126                ShowMSG(1,(int)msg);
   \   00000048   0D10A0E1           MOV      R1,SP
   \   0000004C   0100A0E3           MOV      R0,#+1
   \   00000050   480100EF           SWI      +328
    127                InitConfig(elfname);
   \   00000054   0400A0E1           MOV      R0,R4
   \   00000058   ........           _BLF     InitConfig,??InitConfig??rA
    128              }
    129            }
    130            return (1);  
   \                     ??maincsm_onmessage_0:
   \   0000005C   0100A0E3           MOV      R0,#+1
   \   00000060   24D08DE2           ADD      SP,SP,#+36
   \   00000064   1080BDE8           POP      {R4,PC}          ;; return
   \                     ??maincsm_onmessage_1:
   \   00000068   ........           DC32     successed_config_filename
   \   0000006C   ........           DC32     `?<Constant "%s \\356\\341\\355\\356\\342\\353\\345\\35`
    131          }
    132          

   \                                 In segment CODE, align 4, keep-with-next
    133          static void maincsm_oncreate(CSM_RAM *data)
    134          {
    135            AddKeybMsgHook((void *)my_keyhook);
   \                     maincsm_oncreate:
   \   00000000   ........           LDR      R0,??DataTable29  ;; my_keyhook
   \   00000004   00402DE9           PUSH     {LR}
   \   00000008   2B0100EF           SWI      +299
    136          }
   \   0000000C   0080BDE8           POP      {PC}             ;; return

   \                                 In segment CODE, align 4, keep-with-next
    137          static void Killer(void)
    138          {
   \                     Killer:
   \   00000000   00402DE9           PUSH     {LR}
    139            extern void *ELF_BEGIN;
    140            kill_data(&ELF_BEGIN,(void (*)(void *))mfree_adr());
   \   00000004   158000EF           SWI      +32789
   \   00000008   0010A0E1           MOV      R1,R0
   \   0000000C   04009FE5           LDR      R0,??Killer_0    ;; ELF_BEGIN
   \   00000010   0040BDE8           POP      {LR}             ;; Pop
   \   00000014   ........           _BF      kill_data,??kill_data??rA  ;; tailcall
   \                     ??Killer_0:
   \   00000018   ........           DC32     ELF_BEGIN
    141          }
    142          

   \                                 In segment CODE, align 4, keep-with-next
    143          static void maincsm_onclose(CSM_RAM *csm)
    144          {
    145            ((CSM_DESC*)icsm->constr)->onMessage=old_icsm_onMessage;
   \                     maincsm_onclose:
   \   00000000   ........           LDR      R0,??DataTable44  ;; icsm
   \   00000004   ........           LDR      R1,??DataTable45  ;; old_icsm_onMessage
   \   00000008   00402DE9           PUSH     {LR}
   \   0000000C   000090E5           LDR      R0,[R0, #+0]
   \   00000010   001091E5           LDR      R1,[R1, #+0]
   \   00000014   080090E5           LDR      R0,[R0, #+8]
   \   00000018   001080E5           STR      R1,[R0, #+0]
    146            GBS_DelTimer(&tmr);
   \   0000001C   ........           LDR      R0,??DataTable38  ;; tmr
   \   00000020   8C0100EF           SWI      +396
    147            RemoveKeybMsgHook((void *)my_keyhook);
   \   00000024   ........           LDR      R0,??DataTable29  ;; my_keyhook
   \   00000028   2D0100EF           SWI      +301
    148            SUBPROC((void *)Killer);
   \   0000002C   04009FE5           LDR      R0,??maincsm_onclose_0  ;; Killer
   \   00000030   710100EF           SWI      +369
    149          }
   \   00000034   0080BDE8           POP      {PC}             ;; return
   \                     ??maincsm_onclose_0:
   \   00000038   ........           DC32     Killer
    150          

   \                                 In segment DATA_Z, align 4, align-sorted
    151          static unsigned short maincsm_name_body[140];
   \                     maincsm_name_body:
   \   00000000                      DS8 280
    152          
    153          static const struct
    154          {
    155            CSM_DESC maincsm;
    156            WSHDR maincsm_name;

   \                                 In segment DATA_C, align 4, align-sorted
    157          }MAINCSM =
   \                     MAINCSM:
   \   00000000   ............       DC32 maincsm_onmessage, maincsm_oncreate, maincsm_onclose, 40, 1
   \              ............
   \              280000000100
   \              0000        
   \   00000014   ............       DC32 minus11, maincsm_name_body, 55AACCCCH, 3333AA55H, 0
   \              ....CCCCAA55
   \              55AA33330000
   \              0000        
   \   00000028   8B00               DC16 139
   \   0000002A   0000               DC8 0, 0
    158          {
    159            {
    160            maincsm_onmessage,
    161            maincsm_oncreate,
    162          #ifdef NEWSGOLD
    163            0,
    164            0,
    165            0,
    166            0,
    167          #endif
    168            maincsm_onclose,
    169            sizeof(MAIN_CSM),
    170            1,
    171            &minus11
    172            },
    173            {
    174              maincsm_name_body,
    175              NAMECSM_MAGIC1,
    176              NAMECSM_MAGIC2,
    177              0x0,
    178              139
    179            }
    180          };
    181          
    182          static void UpdateCSMname(void)
    183          {
    184            wsprintf((WSHDR *)(&MAINCSM.maincsm_name),"in:%d out:%d auto:%d",in,out,autom);
    185          }
    186          

   \                                 In segment CODE, align 4, keep-with-next
    187          void Close()
    188          {
    189            if(time_off_off)
   \                     Close:
   \   00000000   84009FE5           LDR      R0,??Close_0     ;; time_off_off
   \   00000004   00402DE9           PUSH     {LR}
   \   00000008   000090E5           LDR      R0,[R0, #+0]
   \   0000000C   000050E3           CMP      R0,#+0
   \   00000010   0080BD08           POPEQ    {PC}
    190          {
    191            if(real_time.sec++>=60)real_time.min++;
   \   00000014   ........           LDR      R0,??DataTable35  ;; real_time
   \   00000018   0210D0E5           LDRB     R1,[R0, #+2]
   \   0000001C   012081E2           ADD      R2,R1,#+1
   \   00000020   3C0051E3           CMP      R1,#+60
   \   00000024   0110D025           LDRBCS   R1,[R0, #+1]
   \   00000028   0220C0E5           STRB     R2,[R0, #+2]
    192            if(real_time.sec>=time_off_sec&&real_time.min>=time_off_min)
   \   0000002C   022CA0E1           MOV      R2,R2, LSL #+24
   \   00000030   01108122           ADDCS    R1,R1,#+1
   \   00000034   0110C025           STRBCS   R1,[R0, #+1]
   \   00000038   50109FE5           LDR      R1,??Close_0+0x4  ;; time_off_sec
   \   0000003C   001091E5           LDR      R1,[R1, #+0]
   \   00000040   220C51E1           CMP      R1,R2, LSR #+24
   \   00000044   0B0000CA           BGT      ??Close_1
   \   00000048   0100D0E5           LDRB     R0,[R0, #+1]
   \   0000004C   40109FE5           LDR      R1,??Close_0+0x8  ;; time_off_min
   \   00000050   001091E5           LDR      R1,[R1, #+0]
   \   00000054   010050E1           CMP      R0,R1
   \   00000058   060000BA           BLT      ??Close_1
    193            {
    194              GBS_SendMessage(MMI_CEPID,KEY_DOWN,RED_BUTTON);
   \   0000005C   0C20A0E3           MOV      R2,#+12
   \   00000060   9310A0E3           MOV      R1,#+147
   \   00000064   401F81E3           ORR      R1,R1,#0x100
   \   00000068   0900A0E3           MOV      R0,#+9
   \   0000006C   420C80E3           ORR      R0,R0,#0x4200
   \   00000070   000100EF           SWI      +256
    195              return;
   \   00000074   0080BDE8           POP      {PC}
    196            }
    197            GBS_StartTimerProc(&tmr,SEC,Close);
   \                     ??Close_1:
   \   00000078   18209FE5           LDR      R2,??Close_0+0xC  ;; Close
   \   0000007C   ........           LDR      R0,??DataTable38  ;; tmr
   \   00000080   D810A0E3           MOV      R1,#+216
   \   00000084   4D0000EF           SWI      +77
   \   00000088   0080BDE8           POP      {PC}             ;; return
   \                     ??Close_0:
   \   0000008C   ........           DC32     time_off_off
   \   00000090   ........           DC32     time_off_sec
   \   00000094   ........           DC32     time_off_min
   \   00000098   ........           DC32     Close
    198          }
    199          }

   \                                 In segment CODE, align 4, keep-with-next
    200          void key()
    201          {
    202          if(is_call==1||is_call==2)OpenCall();
   \                     key:
   \   00000000   ........           LDR      R0,??DataTable37  ;; is_call
   \   00000004   0010D0E5           LDRB     R1,[R0, #+0]
   \   00000008   010051E3           CMP      R1,#+1
   \   0000000C   0010D015           LDRBNE   R1,[R0, #+0]
   \   00000010   02005113           CMPNE    R1,#+2
   \   00000014   0000001A           BNE      ??key_0
   \   00000018   ........           B        OpenCall         ;; tailcall
    203          else if(is_call==3||is_call==4)CloseCall();
   \                     ??key_0:
   \   0000001C   0010D0E5           LDRB     R1,[R0, #+0]
   \   00000020   030051E3           CMP      R1,#+3
   \   00000024   0000D015           LDRBNE   R0,[R0, #+0]
   \   00000028   04005013           CMPNE    R0,#+4
   \   0000002C   1EFF2F11           BXNE     LR
   \   00000030   ........           B        CloseCall        ;; tailcall
    204          }
    205          

   \                                 In segment CODE, align 4, keep-with-next
    206          int my_keyhook(int submsg, int msg)
    207          {
    208          char mode=0;
    209            if(opmod==1&&is_call!=0)
   \                     my_keyhook:
   \   00000000   ........           LDR      R2,??DataTable33  ;; opmod
   \   00000004   30402DE9           PUSH     {R4,R5,LR}
   \   00000008   002092E5           LDR      R2,[R2, #+0]
   \   0000000C   010052E3           CMP      R2,#+1
   \   00000010   2100001A           BNE      ??my_keyhook_0
   \   00000014   ........           LDR      R2,??DataTable37  ;; is_call
   \   00000018   0020D2E5           LDRB     R2,[R2, #+0]
   \   0000001C   000052E3           CMP      R2,#+0
   \   00000020   1D00000A           BEQ      ??my_keyhook_0
    210            {
    211              if(Key1Type==0&&msg==KEY_DOWN&&submsg==Key1){key();return(2);}
   \   00000024   78209FE5           LDR      R2,??my_keyhook_1  ;; Key1
   \   00000028   78309FE5           LDR      R3,??my_keyhook_1+0x4  ;; Key1Type
   \   0000002C   002092E5           LDR      R2,[R2, #+0]
   \   00000030   003093E5           LDR      R3,[R3, #+0]
   \   00000034   93C0A0E3           MOV      R12,#+147
   \   00000038   40CF8CE3           ORR      R12,R12,#0x100
   \   0000003C   000053E3           CMP      R3,#+0
   \   00000040   0C005101           CMPEQ    R1,R12
   \   00000044   02005001           CMPEQ    R0,R2
   \   00000048   0200001A           BNE      ??my_keyhook_2
   \                     ??my_keyhook_3:
   \   0000004C   ........           BL       key
   \   00000050   0200A0E3           MOV      R0,#+2
   \   00000054   3080BDE8           POP      {R4,R5,PC}
    212              if(Key2Type==0&&msg==KEY_DOWN&&submsg==Key2){key();return(2);}
   \                     ??my_keyhook_2:
   \   00000058   4C409FE5           LDR      R4,??my_keyhook_1+0x8  ;; Key2
   \   0000005C   4C509FE5           LDR      R5,??my_keyhook_1+0xC  ;; Key2Type
   \   00000060   004094E5           LDR      R4,[R4, #+0]
   \   00000064   005095E5           LDR      R5,[R5, #+0]
   \   00000068   000055E3           CMP      R5,#+0
   \   0000006C   0C005101           CMPEQ    R1,R12
   \   00000070   04005001           CMPEQ    R0,R4
   \   00000074   F4FFFF0A           BEQ      ??my_keyhook_3
    213              if(Key1Type==1&&msg==LONG_PRESS&&submsg==Key1){key();return(2);}
   \   00000078   02C08CE2           ADD      R12,R12,#+2
   \   0000007C   010053E3           CMP      R3,#+1
   \   00000080   0C005101           CMPEQ    R1,R12
   \   00000084   02005001           CMPEQ    R0,R2
   \   00000088   EFFFFF0A           BEQ      ??my_keyhook_3
    214              if(Key2Type==1&&msg==LONG_PRESS&&submsg==Key2){key();return(2);}
   \   0000008C   010055E3           CMP      R5,#+1
   \   00000090   0C005101           CMPEQ    R1,R12
   \   00000094   04005001           CMPEQ    R0,R4
   \   00000098   EBFFFF0A           BEQ      ??my_keyhook_3
    215              if(Key1Type==2&&Key2Type==2)
    216              {
    217                
    218            if(msg==KEY_UP)mode=0;
    219            if(msg==KEY_DOWN)
    220            {
    221              if(submsg==Key1)mode=1;
    222              else if(submsg==Key2 && mode==1){key();return(2);}
    223            }
    224            }
    225            }
    226            return (0);
   \                     ??my_keyhook_0:
   \   0000009C   0000A0E3           MOV      R0,#+0
   \   000000A0   3080BDE8           POP      {R4,R5,PC}       ;; return
   \                     ??my_keyhook_1:
   \   000000A4   ........           DC32     Key1
   \   000000A8   ........           DC32     Key1Type
   \   000000AC   ........           DC32     Key2
   \   000000B0   ........           DC32     Key2Type
    227          }
    228          

   \                                 In segment CODE, align 4, keep-with-next
    229          void Auto()
    230          {
    231              if(time_on_on)
   \                     Auto:
   \   00000000   9C009FE5           LDR      R0,??Auto_0      ;; time_on_on
   \   00000004   00402DE9           PUSH     {LR}
   \   00000008   000090E5           LDR      R0,[R0, #+0]
   \   0000000C   000050E3           CMP      R0,#+0
   \   00000010   0080BD08           POPEQ    {PC}
    232          {
    233            if(real_time.sec++>=60)real_time.min++;
   \   00000014   ........           LDR      R0,??DataTable35  ;; real_time
   \   00000018   0210D0E5           LDRB     R1,[R0, #+2]
   \   0000001C   012081E2           ADD      R2,R1,#+1
   \   00000020   3C0051E3           CMP      R1,#+60
   \   00000024   0110D025           LDRBCS   R1,[R0, #+1]
   \   00000028   0220C0E5           STRB     R2,[R0, #+2]
    234            if(real_time.sec>=time_on_sec&&real_time.min>=time_on_min)
   \   0000002C   022CA0E1           MOV      R2,R2, LSL #+24
   \   00000030   01108122           ADDCS    R1,R1,#+1
   \   00000034   0110C025           STRBCS   R1,[R0, #+1]
   \   00000038   68109FE5           LDR      R1,??Auto_0+0x4  ;; time_on_sec
   \   0000003C   001091E5           LDR      R1,[R1, #+0]
   \   00000040   220C51E1           CMP      R1,R2, LSR #+24
   \   00000044   0D0000CA           BGT      ??Auto_1
   \   00000048   0100D0E5           LDRB     R0,[R0, #+1]
   \   0000004C   58109FE5           LDR      R1,??Auto_0+0x8  ;; time_on_min
   \   00000050   001091E5           LDR      R1,[R1, #+0]
   \   00000054   010050E1           CMP      R0,R1
   \   00000058   080000BA           BLT      ??Auto_1
    235            {
    236              auto_answer=1;
   \   0000005C   ........           LDR      R0,??DataTable36  ;; auto_answer
   \   00000060   0110A0E3           MOV      R1,#+1
   \   00000064   001080E5           STR      R1,[R0, #+0]
    237              GBS_SendMessage(MMI_CEPID,KEY_DOWN,GREEN_BUTTON);
   \   00000068   0B20A0E3           MOV      R2,#+11
   \   0000006C   621F82E2           ADD      R1,R2,#+392
   \   00000070   0900A0E3           MOV      R0,#+9
   \   00000074   420C80E3           ORR      R0,R0,#0x4200
   \   00000078   000100EF           SWI      +256
    238              return;
   \   0000007C   0080BDE8           POP      {PC}
    239            }
    240            if(is_call==2)
   \                     ??Auto_1:
   \   00000080   ........           LDR      R0,??DataTable37  ;; is_call
   \   00000084   0000D0E5           LDRB     R0,[R0, #+0]
   \   00000088   020050E3           CMP      R0,#+2
   \   0000008C   0080BD18           POPNE    {PC}
    241            GBS_StartTimerProc(&tmr,SEC,Auto);
   \   00000090   18209FE5           LDR      R2,??Auto_0+0xC  ;; Auto
   \   00000094   ........           LDR      R0,??DataTable38  ;; tmr
   \   00000098   D810A0E3           MOV      R1,#+216
   \   0000009C   4D0000EF           SWI      +77
   \   000000A0   0080BDE8           POP      {PC}             ;; return
   \                     ??Auto_0:
   \   000000A4   ........           DC32     time_on_on
   \   000000A8   ........           DC32     time_on_sec
   \   000000AC   ........           DC32     time_on_min
   \   000000B0   ........           DC32     Auto
    242          }
    243          }
    244          

   \                                 In segment CODE, align 4, keep-with-next
    245          char *GetName(char *fname){return strrchr(fname,'\\')+1;}
   \                     GetName:
   \   00000000   00402DE9           PUSH     {LR}
   \   00000004   5C10A0E3           MOV      R1,#+92
   \   00000008   170100EF           SWI      +279
   \   0000000C   010080E2           ADD      R0,R0,#+1
   \   00000010   0080BDE8           POP      {PC}             ;; return

   \                                 In segment CODE, align 4, keep-with-next
    246          int main(char *arg,char *arg2)
    247          {
   \                     main:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
    248            strcpy(elfname,GetName(arg));
   \   00000004   ........           LDR      R4,??DataTable39  ;; elfname
   \   00000008   28D04DE2           SUB      SP,SP,#+40
   \   0000000C   5C10A0E3           MOV      R1,#+92
   \   00000010   170100EF           SWI      +279
   \   00000014   011080E2           ADD      R1,R0,#+1
   \   00000018   0400A0E1           MOV      R0,R4
   \   0000001C   1A0000EF           SWI      +26
    249            InitConfig(elfname);
   \   00000020   0400A0E1           MOV      R0,R4
    250            CSM_RAM *save_cmpc;
    251            char dummy[sizeof(MAIN_CSM)];
    252            UpdateCSMname();  
   \   00000024   AC409FE5           LDR      R4,??main_0      ;; MAINCSM
   \   00000028   ........           _BLF     InitConfig,??InitConfig??rA
   \   0000002C   ........           LDR      R0,??DataTable40  ;; autom
   \   00000030   ........           LDR      R1,??DataTable41  ;; `?<Constant "in:%d out:%d auto:%d">`
   \   00000034   000090E5           LDR      R0,[R0, #+0]
   \   00000038   01002DE9           PUSH     {R0}
   \   0000003C   ........           LDR      R0,??DataTable42  ;; out
   \   00000040   003090E5           LDR      R3,[R0, #+0]
   \   00000044   ........           LDR      R0,??DataTable43  ;; in
   \   00000048   002090E5           LDR      R2,[R0, #+0]
   \   0000004C   180084E2           ADD      R0,R4,#+24
   \   00000050   240100EF           SWI      +292
    253            LockSched();
   \   00000054   460100EF           SWI      +326
    254            save_cmpc=CSM_root()->csm_q->current_msg_processing_csm;
   \   00000058   068100EF           SWI      +33030
   \   0000005C   080090E5           LDR      R0,[R0, #+8]
   \   00000060   045090E5           LDR      R5,[R0, #+4]
    255            CSM_root()->csm_q->current_msg_processing_csm=CSM_root()->csm_q->csm.first;
   \   00000064   068100EF           SWI      +33030
   \   00000068   0060A0E1           MOV      R6,R0
   \   0000006C   068100EF           SWI      +33030
   \   00000070   080090E5           LDR      R0,[R0, #+8]
   \   00000074   081096E5           LDR      R1,[R6, #+8]
   \   00000078   080090E5           LDR      R0,[R0, #+8]
    256            CreateCSM(&MAINCSM.maincsm,dummy,0);
   \   0000007C   0020A0E3           MOV      R2,#+0
   \   00000080   040081E5           STR      R0,[R1, #+4]
   \   00000084   04108DE2           ADD      R1,SP,#+4
   \   00000088   0400A0E1           MOV      R0,R4
    257            CSM_root()->csm_q->current_msg_processing_csm=save_cmpc;
    258            UnlockSched();
    259            icsm=FindCSMbyID(CSM_root()->idle_id); 
   \   0000008C   ........           LDR      R4,??DataTable44  ;; icsm
   \   00000090   070100EF           SWI      +263
   \   00000094   068100EF           SWI      +33030
   \   00000098   080090E5           LDR      R0,[R0, #+8]
   \   0000009C   045080E5           STR      R5,[R0, #+4]
   \   000000A0   470100EF           SWI      +327
   \   000000A4   068100EF           SWI      +33030
   \   000000A8   040090E5           LDR      R0,[R0, #+4]
   \   000000AC   080100EF           SWI      +264
   \   000000B0   ........           LDR      R1,??DataTable45  ;; old_icsm_onMessage
   \   000000B4   000084E5           STR      R0,[R4, #+0]
   \   000000B8   080090E5           LDR      R0,[R0, #+8]
   \   000000BC   002090E5           LDR      R2,[R0, #+0]
   \   000000C0   002081E5           STR      R2,[R1, #+0]
    260            old_icsm_onMessage=((CSM_DESC*)icsm->constr)->onMessage; 
    261            ((CSM_DESC*)icsm->constr)->onMessage=MyIDLECSM_onMessage;
   \   000000C4   10109FE5           LDR      R1,??main_0+0x4  ;; MyIDLECSM_onMessage
   \   000000C8   001080E5           STR      R1,[R0, #+0]
    262            return 0;
   \   000000CC   0000A0E3           MOV      R0,#+0
   \   000000D0   2CD08DE2           ADD      SP,SP,#+44
   \   000000D4   7080BDE8           POP      {R4-R6,PC}       ;; return
   \                     ??main_0:
   \   000000D8   ........           DC32     MAINCSM
   \   000000DC   ........           DC32     MyIDLECSM_onMessage
    263          }

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable6:
   \   00000000   ........           DC32     object

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable7:
   \   00000000   ........           DC32     action

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable16:
   \   00000000   ........           DC32     real_time

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable29:
   \   00000000   ........           DC32     my_keyhook

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable33:
   \   00000000   ........           DC32     opmod

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable35:
   \   00000000   ........           DC32     real_time

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable36:
   \   00000000   ........           DC32     auto_answer

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable37:
   \   00000000   ........           DC32     is_call

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable38:
   \   00000000   ........           DC32     tmr

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable39:
   \   00000000   ........           DC32     elfname

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable40:
   \   00000000   ........           DC32     autom

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable41:
   \   00000000   ........           DC32     `?<Constant "in:%d out:%d auto:%d">`

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable42:
   \   00000000   ........           DC32     out

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable43:
   \   00000000   ........           DC32     in

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable44:
   \   00000000   ........           DC32     icsm

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable45:
   \   00000000   ........           DC32     old_icsm_onMessage

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   5C257300           DC8 "\\%s"

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   616D7200           DC8 "amr"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "unknown_%d-%d-%u_%d-%...">`:
   \   00000000   756E6B6E6F77       DC8 "unknown_%d-%d-%u_%d-%d-%d.amr"
   \              6E5F25642D25
   \              642D25755F25
   \              642D25642D25
   \              642E616D7200
   \   0000001E   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "auto\\\\%d-%d-%u_%d-%d-%...">`:
   \   00000000   6175746F5C25       DC8 "auto\\%d-%d-%u_%d-%d-%d.amr"
   \              642D25642D25
   \              755F25642D25
   \              642D25642E61
   \              6D7200      
   \   0000001B   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "out\\\\%d-%d-%u_%d-%d-%d...">`:
   \   00000000   6F75745C2564       DC8 "out\\%d-%d-%u_%d-%d-%d.amr"
   \              2D25642D2575
   \              5F25642D2564
   \              2D25642E616D
   \              7200        
   \   0000001A   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "in\\\\%d-%d-%u_%d-%d-%d.amr">`:
   \   00000000   696E5C25642D       DC8 "in\\%d-%d-%u_%d-%d-%d.amr"
   \              25642D25755F
   \              25642D25642D
   \              25642E616D72
   \              00          
   \   00000019   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "%s \\356\\341\\355\\356\\342\\353\\345\\35`:
   \   00000000   257320EEE1ED       DC8 "%s \356\341\355\356\342\353\345\355!"
   \              EEE2EBE5ED21
   \              00          
   \   0000000D   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "in:%d out:%d auto:%d">`:
   \   00000000   696E3A256420       DC8 "in:%d out:%d auto:%d"
   \              6F75743A2564
   \              206175746F3A
   \              256400      
   \   00000015   000000             DC8 0, 0, 0

   Maximum stack usage in bytes:

     Function            CSTACK
     --------            ------
     Auto                    4
     Close                   4
     CloseCall              12
     GetName                 4
     Killer                  4
     MyIDLECSM_onMessage    16
     Obs_CreateAmrFile      32
     Obs_DeleteObj           4
     Obs_StartAmrWrite       4
     Obs_StopAmrWrite        4
     OpenCall               36
     key                     4
     main                   60
     maincsm_onclose         4
     maincsm_oncreate        4
     maincsm_onmessage      44
     my_keyhook             12
     strcmp_nocase           0


   Segment part sizes:

     Function/Label                 Bytes
     --------------                 -----
     object                            4
     action                            4
     RecordName                      256
     Obs_CreateAmrFile               364
     Obs_StopAmrWrite                 40
     Obs_StartAmrWrite                36
     Obs_DeleteObj                    36
     minus11                           4
     elfname                          24
     auto_answer                       4
     d                                 8
     real_time                         8
     t                                 8
     name                             32
     tmr                              16
     in                                4
     out                               4
     autom                             4
     is_call                           1
     icsm                              4
     old_icsm_onMessage                4
     ??strcmp_nocase_0                76
     OpenCall                        416
     CloseCall                       112
     MyIDLECSM_onMessage             216
     maincsm_onmessage               112
     maincsm_oncreate                 16
     Killer                           28
     maincsm_onclose                  60
     maincsm_name_body               280
     MAINCSM                          44
     Close                           156
     key                              52
     my_keyhook                      180
     Auto                            180
     GetName                          20
     main                            224
     ??DataTable6                      4
     ??DataTable7                      4
     ??DataTable16                     4
     ??DataTable29                     4
     ??DataTable33                     4
     ??DataTable35                     4
     ??DataTable36                     4
     ??DataTable37                     4
     ??DataTable38                     4
     ??DataTable39                     4
     ??DataTable40                     4
     ??DataTable41                     4
     ??DataTable42                     4
     ??DataTable43                     4
     ??DataTable44                     4
     ??DataTable45                     4
     ?<Constant "\\%s">                4
     ?<Constant "amr">                 4
     ?<Constant "unknown_%d-%d-%u_%d-%...">
                                      32
     ?<Constant "auto\\%d-%d-%u_%d-%d-%...">
                                      28
     ?<Constant "out\\%d-%d-%u_%d-%d-%d...">
                                      28
     ?<Constant "in\\%d-%d-%u_%d-%d-%d.amr">
                                      28
     ?<Constant "%s \356\341\355\356\342\353\345\35
                                      16
     ?<Constant "in:%d out:%d auto:%d">
                                      24
      Others                         108

 
 2 484 bytes in segment CODE
   212 bytes in segment DATA_C
   665 bytes in segment DATA_Z
    12 bytes in segment INITTAB
 
 2 388 bytes of CODE  memory (+ 108 bytes shared)
   212 bytes of CONST memory
   665 bytes of DATA  memory

Errors: none
Warnings: none
