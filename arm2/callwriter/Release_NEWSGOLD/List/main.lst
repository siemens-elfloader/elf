##############################################################################
#                                                                            #
# IAR ARM ANSI C/C++ Compiler V4.42A/W32 EVALUATION    12/Aug/2012  15:43:00 #
# Copyright 1999-2005 IAR Systems. All rights reserved.                      #
#                                                                            #
#    Cpu mode        =  interwork                                            #
#    Endian          =  little                                               #
#    Stack alignment =  4                                                    #
#    Source file     =  C:\arm\callwriter\main.c                             #
#    Command line    =  C:\arm\callwriter\main.c -D NEWSGOLD -lC             #
#                       C:\arm\callwriter\Release_NEWSGOLD\List\ -lA         #
#                       C:\arm\callwriter\Release_NEWSGOLD\List\ -o          #
#                       C:\arm\callwriter\Release_NEWSGOLD\Obj\ -s9          #
#                       --cpu_mode arm --endian little --cpu ARM926EJ-S      #
#                       --stack_align 4 --interwork -e --fpu None            #
#                       --dlib_config "C:\arm2\Embedded Workbench 4.0        #
#                       Evaluation\ARM\LIB\dl5tpainl8f.h" -I                 #
#                       "C:\arm2\Embedded Workbench 4.0                      #
#                       Evaluation\ARM\INC\" --inline_threshold=4            #
#    List file       =  C:\arm\callwriter\Release_NEWSGOLD\List\main.lst     #
#    Object file     =  C:\arm\callwriter\Release_NEWSGOLD\Obj\main.r79      #
#                                                                            #
#                                                                            #
##############################################################################

C:\arm\callwriter\main.c
      1          #include "..\inc\swilib.h"
      2          #include "conf_loader.h"
      3          #include "obs/obs.c"

   \                                 In segment CODE, align 4, keep-with-next
   \   __??Code32?? __code __interwork __atpcs int Obs_CreateAmrFile(char *)
   \                     Obs_CreateAmrFile:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
   \   00000004   C8519FE5           LDR      R5,??Obs_CreateAmrFile_0+0x8  ;; folder
   \   00000008   ........           LDR      R4,??DataTable16  ;; d
   \   0000000C   0070A0E1           MOV      R7,R0
   \   00000010   0500A0E1           MOV      R0,R5
   \   00000014   1B0000EF           SWI      +27
   \   00000018   050080E0           ADD      R0,R0,R5
   \   0000001C   010050E5           LDRB     R0,[R0, #-1]
   \   00000020   5C0050E3           CMP      R0,#+92
   \   00000024   0300001A           BNE      ??Obs_CreateAmrFile_1
   \   00000028   0510A0E1           MOV      R1,R5
   \   0000002C   3C0084E2           ADD      R0,R4,#+60
   \   00000030   1A0000EF           SWI      +26
   \   00000034   040000EA           B        ??Obs_CreateAmrFile_2
   \                     ??Obs_CreateAmrFile_1:
   \   00000038   0530A0E1           MOV      R3,R5
   \   0000003C   622F8FE2           ADR      R2,??Obs_CreateAmrFile_0  ;; "\\%s"
   \   00000040   FF10A0E3           MOV      R1,#+255
   \   00000044   3C0084E2           ADD      R0,R4,#+60
   \   00000048   1B0100EF           SWI      +283
   \                     ??Obs_CreateAmrFile_2:
   \   0000004C   400FA0E3           MOV      R0,#+256
   \   00000050   250100EF           SWI      +293
   \   00000054   0050A0E1           MOV      R5,R0
   \   00000058   5C1F8FE2           ADR      R1,??Obs_CreateAmrFile_0+0x4  ;; "amr"
   \   0000005C   240100EF           SWI      +292
   \   00000060   0500A0E1           MOV      R0,R5
   \   00000064   D00100EF           SWI      +464
   \   00000068   0060A0E1           MOV      R6,R0
   \   0000006C   0710A0E1           MOV      R1,R7
   \   00000070   3C0084E2           ADD      R0,R4,#+60
   \   00000074   170000EF           SWI      +23
   \   00000078   FF20A0E3           MOV      R2,#+255
   \   0000007C   3C1084E2           ADD      R1,R4,#+60
   \   00000080   0500A0E1           MOV      R0,R5
   \   00000084   6C0100EF           SWI      +364
   \   00000088   080094E5           LDR      R0,[R4, #+8]
   \   0000008C   A330A0E3           MOV      R3,#+163
   \   00000090   000050E3           CMP      R0,#+0
   \   00000094   0000A013           MOVNE    R0,#+0
   \   00000098   08008415           STRNE    R0,[R4, #+8]
   \   0000009C   01002DE9           PUSH     {R0}
   \   000000A0   703C83E3           ORR      R3,R3,#0x7000
   \   000000A4   0220A0E3           MOV      R2,#+2
   \   000000A8   0610A0E1           MOV      R1,R6
   \   000000AC   0000A0E3           MOV      R0,#+0
   \   000000B0   01002DE9           PUSH     {R0}
   \   000000B4   01002DE9           PUSH     {R0}
   \   000000B8   3400A0E3           MOV      R0,#+52
   \   000000BC   590200EF           SWI      +601
   \   000000C0   080084E5           STR      R0,[R4, #+8]
   \   000000C4   0510A0E1           MOV      R1,R5
   \   000000C8   760200EF           SWI      +630
   \   000000CC   5F0000EF           SWI      +95
   \   000000D0   F310E0E3           MVN      R1,#+243
   \   000000D4   401FC1E3           BIC      R1,R1,#0x100
   \   000000D8   001081E0           ADD      R1,R1,R0
   \   000000DC   080094E5           LDR      R0,[R4, #+8]
   \   000000E0   740200EF           SWI      +628
   \   000000E4   EC009FE5           LDR      R0,??Obs_CreateAmrFile_0+0xC  ;; amrmode
   \   000000E8   000090E5           LDR      R0,[R0, #+0]
   \   000000EC   0CD08DE2           ADD      SP,SP,#+12
   \   000000F0   010050E2           SUBS     R0,R0,#+1
   \   000000F4   0200000A           BEQ      ??Obs_CreateAmrFile_3
   \   000000F8   010050E2           SUBS     R0,R0,#+1
   \   000000FC   0200000A           BEQ      ??Obs_CreateAmrFile_4
   \   00000100   030000EA           B        ??Obs_CreateAmrFile_5
   \                     ??Obs_CreateAmrFile_3:
   \   00000104   0410A0E3           MOV      R1,#+4
   \   00000108   020000EA           B        ??Obs_CreateAmrFile_6
   \                     ??Obs_CreateAmrFile_4:
   \   0000010C   0710A0E3           MOV      R1,#+7
   \   00000110   000000EA           B        ??Obs_CreateAmrFile_6
   \                     ??Obs_CreateAmrFile_5:
   \   00000114   0010A0E3           MOV      R1,#+0
   \                     ??Obs_CreateAmrFile_6:
   \   00000118   080094E5           LDR      R0,[R4, #+8]
   \   0000011C   720200EF           SWI      +626
   \   00000120   B4109FE5           LDR      R1,??Obs_CreateAmrFile_0+0x10  ;; bitrate
   \   00000124   080094E5           LDR      R0,[R4, #+8]
   \   00000128   001091E5           LDR      R1,[R1, #+0]
   \   0000012C   011051E2           SUBS     R1,R1,#+1
   \   00000130   0200000A           BEQ      ??Obs_CreateAmrFile_7
   \   00000134   011051E2           SUBS     R1,R1,#+1
   \   00000138   0300000A           BEQ      ??Obs_CreateAmrFile_8
   \   0000013C   050000EA           B        ??Obs_CreateAmrFile_9
   \                     ??Obs_CreateAmrFile_7:
   \   00000140   E810A0E3           MOV      R1,#+232
   \   00000144   701D81E3           ORR      R1,R1,#0x1C00
   \   00000148   040000EA           B        ??Obs_CreateAmrFile_10
   \                     ??Obs_CreateAmrFile_8:
   \   0000014C   A810A0E3           MOV      R1,#+168
   \   00000150   BC1D81E3           ORR      R1,R1,#0x2F00
   \   00000154   010000EA           B        ??Obs_CreateAmrFile_10
   \                     ??Obs_CreateAmrFile_9:
   \   00000158   8E10A0E3           MOV      R1,#+142
   \   0000015C   481D81E3           ORR      R1,R1,#0x1200
   \                     ??Obs_CreateAmrFile_10:
   \   00000160   780200EF           SWI      +632
   \   00000164   080094E5           LDR      R0,[R4, #+8]
   \   00000168   A010A0E3           MOV      R1,#+160
   \   0000016C   6E0200EF           SWI      +622
   \   00000170   080094E5           LDR      R0,[R4, #+8]
   \   00000174   0110A0E3           MOV      R1,#+1
   \   00000178   730200EF           SWI      +627
   \   0000017C   080094E5           LDR      R0,[R4, #+8]
   \   00000180   0110A0E3           MOV      R1,#+1
   \   00000184   710200EF           SWI      +625
   \   00000188   080094E5           LDR      R0,[R4, #+8]
   \   0000018C   0010A0E3           MOV      R1,#+0
   \   00000190   6F0200EF           SWI      +623
   \   00000194   080094E5           LDR      R0,[R4, #+8]
   \   00000198   0010A0E3           MOV      R1,#+0
   \   0000019C   700200EF           SWI      +624
   \   000001A0   080094E5           LDR      R0,[R4, #+8]
   \   000001A4   0B10A0E3           MOV      R1,#+11
   \   000001A8   790200EF           SWI      +633
   \   000001AC   080094E5           LDR      R0,[R4, #+8]
   \   000001B0   0010A0E3           MOV      R1,#+0
   \   000001B4   750200EF           SWI      +629
   \   000001B8   0500A0E1           MOV      R0,R5
   \   000001BC   290100EF           SWI      +297
   \   000001C0   0100A0E3           MOV      R0,#+1
   \   000001C4   0C0084E5           STR      R0,[R4, #+12]
   \   000001C8   F080BDE8           POP      {R4-R7,PC}       ;; return
   \                     ??Obs_CreateAmrFile_0:
   \   000001CC   5C257300           DC8      "\\%s"
   \   000001D0   616D7200           DC8      "amr"
   \   000001D4   ........           DC32     folder
   \   000001D8   ........           DC32     amrmode
   \   000001DC   ........           DC32     bitrate

   \                                 In segment CODE, align 4, keep-with-next
   \   __??Code32?? __code __interwork __atpcs int Obs_StopAmrWrite()
   \                     Obs_StopAmrWrite:
   \   00000000   10402DE9           PUSH     {R4,LR}
   \   00000004   ........           LDR      R4,??DataTable16  ;; d
   \   00000008   080094E5           LDR      R0,[R4, #+8]
   \   0000000C   670200EF           SWI      +615
   \   00000010   0300A0E3           MOV      R0,#+3
   \   00000014   0C0084E5           STR      R0,[R4, #+12]
   \   00000018   080094E5           LDR      R0,[R4, #+8]
   \   0000001C   5A0200EF           SWI      +602
   \   00000020   0000A0E3           MOV      R0,#+0
   \   00000024   0C0084E5           STR      R0,[R4, #+12]
   \   00000028   1080BDE8           POP      {R4,PC}          ;; return

   \                                 In segment CODE, align 4, keep-with-next
   \   __??Code32?? __code __interwork __atpcs int Obs_StartAmrWrite()
   \                     Obs_StartAmrWrite:
   \   00000000   10402DE9           PUSH     {R4,LR}
   \   00000004   ........           LDR      R4,??DataTable16  ;; d
   \   00000008   080094E5           LDR      R0,[R4, #+8]
   \   0000000C   5E0200EF           SWI      +606
   \   00000010   0200A0E3           MOV      R0,#+2
   \   00000014   0C0084E5           STR      R0,[R4, #+12]
   \   00000018   1080BDE8           POP      {R4,PC}          ;; return

   \                                 In segment CODE, align 4, keep-with-next
   \   __??Code32?? __code __interwork __atpcs int Obs_DeleteObj()
   \                     Obs_DeleteObj:
   \   00000000   10402DE9           PUSH     {R4,LR}
   \   00000004   ........           LDR      R4,??DataTable16  ;; d
   \   00000008   080094E5           LDR      R0,[R4, #+8]
   \   0000000C   5A0200EF           SWI      +602
   \   00000010   0000A0E3           MOV      R0,#+0
   \   00000014   0C0084E5           STR      R0,[R4, #+12]
   \   00000018   1080BDE8           POP      {R4,PC}          ;; return
      4          #include "call/call.c"

   \                                 In segment CODE, align 4, keep-with-next
   \   __??Code32?? __code __interwork __atpcs void func(char const *)
   \                     func:
   \   00000000   00402DE9           PUSH     {LR}
   \   00000004   000050E3           CMP      R0,#+0
   \   00000008   0080BD08           POPEQ    {PC}
   \   0000000C   1020A0E3           MOV      R2,#+16
   \   00000010   0010A0E3           MOV      R1,#+0
   \   00000014   ........           _BLF     strtoul,??strtoul??rA
   \   00000018   710100EF           SWI      +369
   \   0000001C   0080BDE8           POP      {PC}             ;; return

   \                                 In segment CODE, align 4, keep-with-next
   \   __??Code32?? __code __interwork __atpcs void OpenCall()
   \                     OpenCall:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
   \   00000004   98419FE5           LDR      R4,??OpenCall_0+0x4  ;; d
   \   00000008   3800D4E5           LDRB     R0,[R4, #+56]
   \   0000000C   030050E3           CMP      R0,#+3
   \   00000010   3800D415           LDRBNE   R0,[R4, #+56]
   \   00000014   04005013           CMPNE    R0,#+4
   \   00000018   3800D415           LDRBNE   R0,[R4, #+56]
   \   0000001C   06005013           CMPNE    R0,#+6
   \   00000020   7080BD08           POPEQ    {R4-R6,PC}
   \   00000024   301084E2           ADD      R1,R4,#+48
   \   00000028   78619FE5           LDR      R6,??OpenCall_0+0x8  ;; `?<Constant "unknown_%d-%d-%u_%d-%...">`
   \   0000002C   0400A0E1           MOV      R0,R4
   \   00000030   B40000EF           SWI      +180
   \   00000034   3200D4E5           LDRB     R0,[R4, #+50]
   \   00000038   535FA0E3           MOV      R5,#+332
   \   0000003C   0610A0E1           MOV      R1,R6
   \   00000040   01002DE9           PUSH     {R0}
   \   00000044   3100D4E5           LDRB     R0,[R4, #+49]
   \   00000048   01002DE9           PUSH     {R0}
   \   0000004C   3000D4E5           LDRB     R0,[R4, #+48]
   \   00000050   01002DE9           PUSH     {R0}
   \   00000054   000094E5           LDR      R0,[R4, #+0]
   \   00000058   01002DE9           PUSH     {R0}
   \   0000005C   0430D4E5           LDRB     R3,[R4, #+4]
   \   00000060   0520D4E5           LDRB     R2,[R4, #+5]
   \   00000064   040085E0           ADD      R0,R5,R4
   \   00000068   160000EF           SWI      +22
   \   0000006C   3800D4E5           LDRB     R0,[R4, #+56]
   \   00000070   10D08DE2           ADD      SP,SP,#+16
   \   00000074   050050E3           CMP      R0,#+5
   \   00000078   0B00001A           BNE      ??OpenCall_1
   \   0000007C   201086E2           ADD      R1,R6,#+32
   \   00000080   040085E0           ADD      R0,R5,R4
   \   00000084   1A0000EF           SWI      +26
   \   00000088   0000A0E3           MOV      R0,#+0
   \   0000008C   2A00C4E5           STRB     R0,[R4, #+42]
   \   00000090   2900C4E5           STRB     R0,[R4, #+41]
   \   00000094   ........           BL       Close
   \   00000098   180094E5           LDR      R0,[R4, #+24]
   \   0000009C   010080E2           ADD      R0,R0,#+1
   \   000000A0   180084E5           STR      R0,[R4, #+24]
   \   000000A4   0600A0E3           MOV      R0,#+6
   \   000000A8   3800C4E5           STRB     R0,[R4, #+56]
   \                     ??OpenCall_1:
   \   000000AC   3800D4E5           LDRB     R0,[R4, #+56]
   \   000000B0   010050E3           CMP      R0,#+1
   \   000000B4   0700001A           BNE      ??OpenCall_2
   \   000000B8   140094E5           LDR      R0,[R4, #+20]
   \   000000BC   281086E2           ADD      R1,R6,#+40
   \   000000C0   010080E2           ADD      R0,R0,#+1
   \   000000C4   140084E5           STR      R0,[R4, #+20]
   \   000000C8   040085E0           ADD      R0,R5,R4
   \   000000CC   1A0000EF           SWI      +26
   \   000000D0   0300A0E3           MOV      R0,#+3
   \   000000D4   3800C4E5           STRB     R0,[R4, #+56]
   \                     ??OpenCall_2:
   \   000000D8   3800D4E5           LDRB     R0,[R4, #+56]
   \   000000DC   020050E3           CMP      R0,#+2
   \   000000E0   0700001A           BNE      ??OpenCall_3
   \   000000E4   100094E5           LDR      R0,[R4, #+16]
   \   000000E8   2C1F8FE2           ADR      R1,??OpenCall_0  ;; "in\\"
   \   000000EC   010080E2           ADD      R0,R0,#+1
   \   000000F0   100084E5           STR      R0,[R4, #+16]
   \   000000F4   040085E0           ADD      R0,R5,R4
   \   000000F8   1A0000EF           SWI      +26
   \   000000FC   0400A0E3           MOV      R0,#+4
   \   00000100   3800C4E5           STRB     R0,[R4, #+56]
   \                     ??OpenCall_3:
   \   00000104   3200D4E5           LDRB     R0,[R4, #+50]
   \   00000108   042085E0           ADD      R2,R5,R4
   \   0000010C   301086E2           ADD      R1,R6,#+48
   \   00000110   01002DE9           PUSH     {R0}
   \   00000114   3100D4E5           LDRB     R0,[R4, #+49]
   \   00000118   01002DE9           PUSH     {R0}
   \   0000011C   3000D4E5           LDRB     R0,[R4, #+48]
   \   00000120   01002DE9           PUSH     {R0}
   \   00000124   000094E5           LDR      R0,[R4, #+0]
   \   00000128   01002DE9           PUSH     {R0}
   \   0000012C   0400D4E5           LDRB     R0,[R4, #+4]
   \   00000130   01002DE9           PUSH     {R0}
   \   00000134   0530D4E5           LDRB     R3,[R4, #+5]
   \   00000138   040085E0           ADD      R0,R5,R4
   \   0000013C   160000EF           SWI      +22
   \   00000140   040085E0           ADD      R0,R5,R4
   \   00000144   ........           BL       Obs_CreateAmrFile
   \   00000148   080094E5           LDR      R0,[R4, #+8]
   \   0000014C   5E0200EF           SWI      +606
   \   00000150   0200A0E3           MOV      R0,#+2
   \   00000154   0C0084E5           STR      R0,[R4, #+12]
   \   00000158   3800D4E5           LDRB     R0,[R4, #+56]
   \   0000015C   14D08DE2           ADD      SP,SP,#+20
   \   00000160   060050E3           CMP      R0,#+6
   \   00000164   0100001A           BNE      ??OpenCall_4
   \   00000168   3C009FE5           LDR      R0,??OpenCall_0+0xC  ;; mic
   \   0000016C   ........           BL       func
   \                     ??OpenCall_4:
   \   00000170   3800D4E5           LDRB     R0,[R4, #+56]
   \   00000174   030050E3           CMP      R0,#+3
   \   00000178   3800D415           LDRBNE   R0,[R4, #+56]
   \   0000017C   04005013           CMPNE    R0,#+4
   \   00000180   7080BD18           POPNE    {R4-R6,PC}
   \   00000184   24009FE5           LDR      R0,??OpenCall_0+0x10  ;; ena_loud
   \   00000188   000090E5           LDR      R0,[R0, #+0]
   \   0000018C   000050E3           CMP      R0,#+0
   \   00000190   7080BD08           POPEQ    {R4-R6,PC}
   \   00000194   18009FE5           LDR      R0,??OpenCall_0+0x14  ;; loud
   \   00000198   ........           BL       func
   \   0000019C   7080BDE8           POP      {R4-R6,PC}       ;; return
   \                     ??OpenCall_0:
   \   000001A0   696E5C00           DC8      "in\\"
   \   000001A4   ........           DC32     d
   \   000001A8   ........           DC32     `?<Constant "unknown_%d-%d-%u_%d-%...">`
   \   000001AC   ........           DC32     mic
   \   000001B0   ........           DC32     ena_loud
   \   000001B4   ........           DC32     loud

   \                                 In segment CODE, align 4, keep-with-next
   \   __??Code32?? __code __interwork __atpcs void CloseCall()
   \                     CloseCall:
   \   00000000   10402DE9           PUSH     {R4,LR}
   \   00000004   ........           LDR      R4,??DataTable16  ;; d
   \   00000008   3800D4E5           LDRB     R0,[R4, #+56]
   \   0000000C   030050E3           CMP      R0,#+3
   \   00000010   3800D415           LDRBNE   R0,[R4, #+56]
   \   00000014   04005013           CMPNE    R0,#+4
   \   00000018   3800D415           LDRBNE   R0,[R4, #+56]
   \   0000001C   06005013           CMPNE    R0,#+6
   \   00000020   1080BD18           POPNE    {R4,PC}
   \   00000024   ........           BL       Obs_StopAmrWrite
   \   00000028   0000A0E3           MOV      R0,#+0
   \   0000002C   3800C4E5           STRB     R0,[R4, #+56]
   \   00000030   181094E5           LDR      R1,[R4, #+24]
   \   00000034   ........           LDR      R0,??DataTable17  ;; `?<Constant "in:%d out:%d auto:%d">`
   \   00000038   02002DE9           PUSH     {R1}
   \   0000003C   143094E5           LDR      R3,[R4, #+20]
   \   00000040   102094E5           LDR      R2,[R4, #+16]
   \   00000044   0010A0E1           MOV      R1,R0
   \   00000048   400080E2           ADD      R0,R0,#+64
   \   0000004C   240100EF           SWI      +292
   \   00000050   04D08DE2           ADD      SP,SP,#+4
   \   00000054   1080BDE8           POP      {R4,PC}          ;; return

   \                                 In segment CODE, align 4, keep-with-next
   \   __??Code32?? __code __interwork __atpcs void Close()
   \                     Close:
   \   00000000   88009FE5           LDR      R0,??Close_0     ;; time_off_off
   \   00000004   00402DE9           PUSH     {LR}
   \   00000008   000090E5           LDR      R0,[R0, #+0]
   \   0000000C   000050E3           CMP      R0,#+0
   \   00000010   0080BD08           POPEQ    {PC}
   \   00000014   ........           LDR      R0,??DataTable16  ;; d
   \   00000018   2A10D0E5           LDRB     R1,[R0, #+42]
   \   0000001C   012081E2           ADD      R2,R1,#+1
   \   00000020   3C0051E3           CMP      R1,#+60
   \   00000024   2910D025           LDRBCS   R1,[R0, #+41]
   \   00000028   2A20C0E5           STRB     R2,[R0, #+42]
   \   0000002C   022CA0E1           MOV      R2,R2, LSL #+24
   \   00000030   01108122           ADDCS    R1,R1,#+1
   \   00000034   2910C025           STRBCS   R1,[R0, #+41]
   \   00000038   54109FE5           LDR      R1,??Close_0+0x4  ;; time_off_sec
   \   0000003C   001091E5           LDR      R1,[R1, #+0]
   \   00000040   011081E2           ADD      R1,R1,#+1
   \   00000044   220C51E1           CMP      R1,R2, LSR #+24
   \   00000048   0B0000CA           BGT      ??Close_1
   \   0000004C   2910D0E5           LDRB     R1,[R0, #+41]
   \   00000050   40209FE5           LDR      R2,??Close_0+0x8  ;; time_off_min
   \   00000054   002092E5           LDR      R2,[R2, #+0]
   \   00000058   020051E1           CMP      R1,R2
   \   0000005C   060000BA           BLT      ??Close_1
   \   00000060   0C20A0E3           MOV      R2,#+12
   \   00000064   9310A0E3           MOV      R1,#+147
   \   00000068   401F81E3           ORR      R1,R1,#0x100
   \   0000006C   0900A0E3           MOV      R0,#+9
   \   00000070   420C80E3           ORR      R0,R0,#0x4200
   \   00000074   000100EF           SWI      +256
   \   00000078   0080BDE8           POP      {PC}
   \                     ??Close_1:
   \   0000007C   18209FE5           LDR      R2,??Close_0+0xC  ;; Close
   \   00000080   D810A0E3           MOV      R1,#+216
   \   00000084   4F0F80E2           ADD      R0,R0,#+316
   \   00000088   4D0000EF           SWI      +77
   \   0000008C   0080BDE8           POP      {PC}             ;; return
   \                     ??Close_0:
   \   00000090   ........           DC32     time_off_off
   \   00000094   ........           DC32     time_off_sec
   \   00000098   ........           DC32     time_off_min
   \   0000009C   ........           DC32     Close

   \                                 In segment CODE, align 4, keep-with-next
   \   __??Code32?? __code __interwork __atpcs void Auto()
   \                     Auto:
   \   00000000   98009FE5           LDR      R0,??Auto_0      ;; time_on_on
   \   00000004   00402DE9           PUSH     {LR}
   \   00000008   000090E5           LDR      R0,[R0, #+0]
   \   0000000C   000050E3           CMP      R0,#+0
   \   00000010   0080BD08           POPEQ    {PC}
   \   00000014   ........           LDR      R0,??DataTable16  ;; d
   \   00000018   2A10D0E5           LDRB     R1,[R0, #+42]
   \   0000001C   012081E2           ADD      R2,R1,#+1
   \   00000020   3C0051E3           CMP      R1,#+60
   \   00000024   2910D025           LDRBCS   R1,[R0, #+41]
   \   00000028   2A20C0E5           STRB     R2,[R0, #+42]
   \   0000002C   022CA0E1           MOV      R2,R2, LSL #+24
   \   00000030   01108122           ADDCS    R1,R1,#+1
   \   00000034   2910C025           STRBCS   R1,[R0, #+41]
   \   00000038   64109FE5           LDR      R1,??Auto_0+0x4  ;; time_on_sec
   \   0000003C   001091E5           LDR      R1,[R1, #+0]
   \   00000040   011081E2           ADD      R1,R1,#+1
   \   00000044   220C51E1           CMP      R1,R2, LSR #+24
   \   00000048   0C0000CA           BGT      ??Auto_1
   \   0000004C   2910D0E5           LDRB     R1,[R0, #+41]
   \   00000050   50209FE5           LDR      R2,??Auto_0+0x8  ;; time_on_min
   \   00000054   002092E5           LDR      R2,[R2, #+0]
   \   00000058   020051E1           CMP      R1,R2
   \   0000005C   070000BA           BLT      ??Auto_1
   \   00000060   0510A0E3           MOV      R1,#+5
   \   00000064   3810C0E5           STRB     R1,[R0, #+56]
   \   00000068   0B20A0E3           MOV      R2,#+11
   \   0000006C   621F82E2           ADD      R1,R2,#+392
   \   00000070   0900A0E3           MOV      R0,#+9
   \   00000074   420C80E3           ORR      R0,R0,#0x4200
   \   00000078   000100EF           SWI      +256
   \   0000007C   0080BDE8           POP      {PC}
   \                     ??Auto_1:
   \   00000080   3810D0E5           LDRB     R1,[R0, #+56]
   \   00000084   020051E3           CMP      R1,#+2
   \   00000088   0080BD18           POPNE    {PC}
   \   0000008C   18209FE5           LDR      R2,??Auto_0+0xC  ;; Auto
   \   00000090   D810A0E3           MOV      R1,#+216
   \   00000094   4F0F80E2           ADD      R0,R0,#+316
   \   00000098   4D0000EF           SWI      +77
   \   0000009C   0080BDE8           POP      {PC}             ;; return
   \                     ??Auto_0:
   \   000000A0   ........           DC32     time_on_on
   \   000000A4   ........           DC32     time_on_sec
   \   000000A8   ........           DC32     time_on_min
   \   000000AC   ........           DC32     Auto
      5          
      6          //#define DBG//если у вас эп 3.0(с рисованием) можете раскоментить и выводить всякую ересь
      7          unsigned int number=0x0;
      8          
      9          #ifdef DBG
     10          void DrwText(WSHDR *ws, LCDLAYER *layer, int x1, int y1, int x2, int y2, int font, int text_attribute, char *Pen,  char *Brush)
     11          {
     12            DRWOBJ_01 drw = {1, 0x10, 0, Pen[0], Pen[1], Pen[2], Pen[3], Brush[0], Brush[1], Brush[2], Brush[3], x1, y1, x2, y2, ws, font, text_attribute, 0};
     13            PushDRWOBJOnLAYER((DRWOBJ_S *)&drw, layer);
     14          }
     15          int pid_from=0,msg3=0,submess=0,data0=0,data1=0;
     16          void TimeDraw(LCDLAYER *layer)
     17          {
     18          
     19          
     20              WSHDR *ws = AllocWS(64);
     21              char red[4] = {255, 0, 0, 100};
     22              char black[4] = {0, 0, 0, 100};
     23            //  wsprintf(ws, "is_call %d sec %d min %d mode:%d number%d", is_call,real_time.sec,real_time.min,opmod,number);
     24              wsprintf(ws, "pid_from:%d msg:%d submess:%d data0:%d data1:%d", pid_from,msg3,submess,data0,data1);
     25              DrwText(ws, layer, 0, 0, layer->w - 1, layer->h - 1, FONT_SMALL, 2, red,  black);
     26              FreeWS(ws);
     27             
     28          }
     29          void CREDRAW()
     30          {
     31            LCDRedrawLAYER(Ram_LCD_Overlay_Layer());
     32          }
     33          #endif
     34          

   \                                 In segment DATA_C, align 4, align-sorted
     35          const int minus11=-11;
   \                     minus11:
   \   00000000   F5FFFFFF           DC32 -11
     36          
     37          typedef struct
     38          {
     39            CSM_RAM csm;
     40          }MAIN_CSM;
     41          
     42          char *elfname;
     43          
     44          int my_keyhook(int submsg, int msg);
     45          
     46          typedef struct
     47          {
     48            GUI gui;
     49            WSHDR *ws1;
     50            WSHDR *ws2;
     51            int i1;
     52          }MAIN_GUI;
     53          
     54          CSM_RAM *icsm;
     55          
     56          extern void kill_data(void *p, void (*func_p)(void *));
     57          int (*old_icsm_onMessage)(CSM_RAM*,GBS_MSG*);
     58          
     59          
     60          #pragma inline=forced
     61          int toupper(int c)
     62          {
     63            if ((c>='a')&&(c<='z')) c+='A'-'a';
     64            return(c);
     65          }
     66          

   \                                 In segment CODE, align 4, keep-with-next
     67          int strcmp_nocase(const char *s1,const char *s2)
     68          {
     69            int i;
     70            int c;
     71            while(!(i=(c=toupper(*s1++))-toupper(*s2++))) if (!c) break;
   \                     strcmp_nocase:
   \                     ??strcmp_nocase_0:
   \   00000000   0020D0E5           LDRB     R2,[R0, #+0]
   \   00000004   610052E3           CMP      R2,#+97
   \   00000008   010000BA           BLT      ??strcmp_nocase_1
   \   0000000C   7B0052E3           CMP      R2,#+123
   \   00000010   202042B2           SUBLT    R2,R2,#+32
   \                     ??strcmp_nocase_1:
   \   00000014   00C0D1E5           LDRB     R12,[R1, #+0]
   \   00000018   010080E2           ADD      R0,R0,#+1
   \   0000001C   0230A0E1           MOV      R3,R2
   \   00000020   61005CE3           CMP      R12,#+97
   \   00000024   010000BA           BLT      ??strcmp_nocase_2
   \   00000028   7B005CE3           CMP      R12,#+123
   \   0000002C   20C04CB2           SUBLT    R12,R12,#+32
   \                     ??strcmp_nocase_2:
   \   00000030   011081E2           ADD      R1,R1,#+1
   \   00000034   0C2052E0           SUBS     R2,R2,R12
   \   00000038   0100001A           BNE      ??strcmp_nocase_3
   \   0000003C   000053E3           CMP      R3,#+0
   \   00000040   EEFFFF1A           BNE      ??strcmp_nocase_0
     72            return(i);
   \                     ??strcmp_nocase_3:
   \   00000044   0200A0E1           MOV      R0,R2
   \   00000048   1EFF2FE1           BX       LR               ;; return
     73          }
     74          

   \                                 In segment CODE, align 4, keep-with-next
     75          int MyIDLECSM_onMessage(CSM_RAM* data,GBS_MSG* msg)
     76          {
   \                     MyIDLECSM_onMessage:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
     77            int csm_result=old_icsm_onMessage(data,msg);
   \   00000004   ........           LDR      R4,??DataTable16  ;; d
   \   00000008   0150A0E1           MOV      R5,R1
   \   0000000C   242094E5           LDR      R2,[R4, #+36]
   \   00000010   32FF2FE1           BLX      R2
   \   00000014   0060A0E1           MOV      R6,R0
     78            if(profile==0||profile==GetProfile())
   \   00000018   D0009FE5           LDR      R0,??MyIDLECSM_onMessage_0  ;; profile
   \   0000001C   007090E5           LDR      R7,[R0, #+0]
   \   00000020   000057E3           CMP      R7,#+0
   \   00000024   0200000A           BEQ      ??MyIDLECSM_onMessage_1
   \   00000028   B60000EF           SWI      +182
   \   0000002C   000057E1           CMP      R7,R0
   \   00000030   2C00001A           BNE      ??MyIDLECSM_onMessage_2
     79            {
     80            if (msg->msg==MSG_INCOMMING_CALL&&is_call==CALL_NULL){is_call=CALL_IN;Auto();}
   \                     ??MyIDLECSM_onMessage_1:
   \   00000034   040095E5           LDR      R0,[R5, #+4]
   \   00000038   600C50E3           CMP      R0,#+24576
   \   0000003C   0500001A           BNE      ??MyIDLECSM_onMessage_3
   \   00000040   3800D4E5           LDRB     R0,[R4, #+56]
   \   00000044   000050E3           CMP      R0,#+0
   \   00000048   2600001A           BNE      ??MyIDLECSM_onMessage_2
   \   0000004C   0200A0E3           MOV      R0,#+2
   \   00000050   3800C4E5           STRB     R0,[R4, #+56]
   \   00000054   ........           BL       Auto
     81            
     82            if (((msg->msg==MSG_STATE_OF_CALL)&&(msg->submess==1)&&((int)msg->data0==2))&&is_call!=CALL_OUTW&&is_call!=CALL_INW&&is_call!=CALL_AUTOW)
   \                     ??MyIDLECSM_onMessage_3:
   \   00000058   040095E5           LDR      R0,[R5, #+4]
   \   0000005C   0910A0E3           MOV      R1,#+9
   \   00000060   601C81E3           ORR      R1,R1,#0x6000
   \   00000064   010050E1           CMP      R0,R1
   \   00000068   1400001A           BNE      ??MyIDLECSM_onMessage_4
   \   0000006C   080095E5           LDR      R0,[R5, #+8]
   \   00000070   010050E3           CMP      R0,#+1
   \   00000074   0C009505           LDREQ    R0,[R5, #+12]
   \   00000078   02005003           CMPEQ    R0,#+2
   \   0000007C   1900001A           BNE      ??MyIDLECSM_onMessage_2
   \   00000080   3800D4E5           LDRB     R0,[R4, #+56]
   \   00000084   030050E3           CMP      R0,#+3
   \   00000088   3800D415           LDRBNE   R0,[R4, #+56]
   \   0000008C   04005013           CMPNE    R0,#+4
   \   00000090   3800D415           LDRBNE   R0,[R4, #+56]
   \   00000094   06005013           CMPNE    R0,#+6
   \   00000098   1200000A           BEQ      ??MyIDLECSM_onMessage_2
     83            {
     84             
     85             if(is_call==CALL_NULL)is_call=CALL_OUT;
   \   0000009C   3800D4E5           LDRB     R0,[R4, #+56]
   \   000000A0   000050E3           CMP      R0,#+0
   \   000000A4   0100A003           MOVEQ    R0,#+1
   \   000000A8   3800C405           STRBEQ   R0,[R4, #+56]
     86              if(opmod == 0)OpenCall();
   \   000000AC   ........           LDR      R0,??DataTable14  ;; opmod
   \   000000B0   000090E5           LDR      R0,[R0, #+0]
   \   000000B4   000050E3           CMP      R0,#+0
   \   000000B8   0000001A           BNE      ??MyIDLECSM_onMessage_4
   \   000000BC   ........           BL       OpenCall
     87            }
     88            if(msg->msg == MSG_END_CALL) 
   \                     ??MyIDLECSM_onMessage_4:
   \   000000C0   040095E5           LDR      R0,[R5, #+4]
   \   000000C4   0B10A0E3           MOV      R1,#+11
   \   000000C8   601C81E3           ORR      R1,R1,#0x6000
   \   000000CC   010050E1           CMP      R0,R1
   \   000000D0   0400001A           BNE      ??MyIDLECSM_onMessage_2
     89            {
     90               CloseCall();
   \   000000D4   ........           BL       CloseCall
     91               real_time.sec=0;
   \   000000D8   0000A0E3           MOV      R0,#+0
   \   000000DC   2A00C4E5           STRB     R0,[R4, #+42]
     92               real_time.min=0;
   \   000000E0   2900C4E5           STRB     R0,[R4, #+41]
     93               is_call=CALL_NULL;
   \   000000E4   3800C4E5           STRB     R0,[R4, #+56]
     94            }
     95            }
     96            return(csm_result);
   \                     ??MyIDLECSM_onMessage_2:
   \   000000E8   0600A0E1           MOV      R0,R6
   \   000000EC   F080BDE8           POP      {R4-R7,PC}       ;; return
   \                     ??MyIDLECSM_onMessage_0:
   \   000000F0   ........           DC32     profile
     97          }
     98          

   \                                 In segment CODE, align 4, keep-with-next
     99          int maincsm_onmessage(CSM_RAM* data,GBS_MSG* msg)
    100          {
   \                     maincsm_onmessage:
   \   00000000   00402DE9           PUSH     {LR}
    101            extern const char *successed_config_filename;
    102            if(msg->msg == MSG_RECONFIGURE_REQ&&strcmp_nocase(successed_config_filename,(char *)msg->data0)==0) 
   \   00000004   040091E5           LDR      R0,[R1, #+4]
   \   00000008   AF20A0E3           MOV      R2,#+175
   \   0000000C   DE2C82E3           ORR      R2,R2,#0xDE00
   \   00000010   020050E1           CMP      R0,R2
   \   00000014   0800001A           BNE      ??maincsm_onmessage_0
   \   00000018   24009FE5           LDR      R0,??maincsm_onmessage_1  ;; successed_config_filename
   \   0000001C   0C1091E5           LDR      R1,[R1, #+12]
   \   00000020   000090E5           LDR      R0,[R0, #+0]
   \   00000024   ........           BL       strcmp_nocase
   \   00000028   000050E3           CMP      R0,#+0
   \   0000002C   0200001A           BNE      ??maincsm_onmessage_0
    103            InitConfig(elfname);
   \   00000030   10009FE5           LDR      R0,??maincsm_onmessage_1+0x4  ;; d + 28
   \   00000034   000090E5           LDR      R0,[R0, #+0]
   \   00000038   ........           _BLF     InitConfig,??InitConfig??rA
    104            return (1);  
   \                     ??maincsm_onmessage_0:
   \   0000003C   0100A0E3           MOV      R0,#+1
   \   00000040   0080BDE8           POP      {PC}             ;; return
   \                     ??maincsm_onmessage_1:
   \   00000044   ........           DC32     successed_config_filename
   \   00000048   ........           DC32     d + 28
    105          }
    106          

   \                                 In segment CODE, align 4, keep-with-next
    107          static void maincsm_oncreate(CSM_RAM *data)
    108          {
    109            AddKeybMsgHook((void *)my_keyhook);
   \                     maincsm_oncreate:
   \   00000000   ........           LDR      R0,??DataTable12  ;; my_keyhook
   \   00000004   00402DE9           PUSH     {LR}
   \   00000008   2B0100EF           SWI      +299
    110          }
   \   0000000C   0080BDE8           POP      {PC}             ;; return

   \                                 In segment CODE, align 4, keep-with-next
    111          static void Killer(void)
    112          {
   \                     Killer:
   \   00000000   00402DE9           PUSH     {LR}
    113            extern void *ELF_BEGIN;
    114            kill_data(&ELF_BEGIN,(void (*)(void *))mfree_adr());
   \   00000004   158000EF           SWI      +32789
   \   00000008   0010A0E1           MOV      R1,R0
   \   0000000C   04009FE5           LDR      R0,??Killer_0    ;; ELF_BEGIN
   \   00000010   0040BDE8           POP      {LR}             ;; Pop
   \   00000014   ........           _BF      kill_data,??kill_data??rA  ;; tailcall
   \                     ??Killer_0:
   \   00000018   ........           DC32     ELF_BEGIN
    115          }
    116          

   \                                 In segment CODE, align 4, keep-with-next
    117          static void maincsm_onclose(CSM_RAM *csm)
    118          {
   \                     maincsm_onclose:
   \   00000000   10402DE9           PUSH     {R4,LR}
    119            ((CSM_DESC*)icsm->constr)->onMessage=old_icsm_onMessage;
   \   00000004   ........           LDR      R4,??DataTable16  ;; d
   \   00000008   200094E5           LDR      R0,[R4, #+32]
   \   0000000C   241094E5           LDR      R1,[R4, #+36]
   \   00000010   080090E5           LDR      R0,[R0, #+8]
   \   00000014   001080E5           STR      R1,[R0, #+0]
    120            GBS_DelTimer(&tmr);
   \   00000018   4F0F84E2           ADD      R0,R4,#+316
   \   0000001C   8C0100EF           SWI      +396
    121          #ifdef DBG
    122             DHS_removeProc(TimeDraw);
    123          #endif
    124             if(elfname!=0)mfree(elfname);
   \   00000020   1C0094E5           LDR      R0,[R4, #+28]
   \   00000024   000050E3           CMP      R0,#+0
   \   00000028   0000000A           BEQ      ??maincsm_onclose_0
   \   0000002C   150000EF           SWI      +21
    125            RemoveKeybMsgHook((void *)my_keyhook);
   \                     ??maincsm_onclose_0:
   \   00000030   ........           LDR      R0,??DataTable12  ;; my_keyhook
   \   00000034   2D0100EF           SWI      +301
    126            SUBPROC((void *)Killer);
   \   00000038   04009FE5           LDR      R0,??maincsm_onclose_1  ;; Killer
   \   0000003C   710100EF           SWI      +369
    127          }
   \   00000040   1080BDE8           POP      {R4,PC}          ;; return
   \                     ??maincsm_onclose_1:
   \   00000044   ........           DC32     Killer
    128          
    129          static unsigned short maincsm_name_body[140];
    130          
    131          static const struct
    132          {
    133            CSM_DESC maincsm;
    134            WSHDR maincsm_name;

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "in:%d out:%d auto:%d">`:
   \   00000000   696E3A256420       DC8 "in:%d out:%d auto:%d"
   \              6F75743A2564
   \              206175746F3A
   \              256400      
   \   00000015   000000             DC8 0, 0, 0
   \   00000018   ............       DC32 maincsm_onmessage, maincsm_oncreate, 0, 0, 0, 0, maincsm_onclose
   \              ....00000000
   \              000000000000
   \              000000000000
   \              ........    
   \   00000034   280000000100       DC32 40, 1, minus11, maincsm_name_body, 55AACCCCH, 3333AA55H, 0
   \              0000........
   \              ........CCCC
   \              AA5555AA3333
   \              00000000    
   \   00000050   8B00               DC16 139
   \   00000052   0000               DC8 0, 0
    135          }MAINCSM =
    136          {
    137            {
    138            maincsm_onmessage,
    139            maincsm_oncreate,
    140          #ifdef NEWSGOLD
    141            0,
    142            0,
    143            0,
    144            0,
    145          #endif
    146            maincsm_onclose,
    147            sizeof(MAIN_CSM),
    148            1,
    149            &minus11
    150            },
    151            {
    152              maincsm_name_body,
    153              NAMECSM_MAGIC1,
    154              NAMECSM_MAGIC2,
    155              0x0,
    156              139
    157            }
    158          };
    159          
    160          inline void UpdateCSMname()
    161          {
    162          wsprintf((WSHDR *)(&MAINCSM.maincsm_name),"in:%d out:%d auto:%d",in,out,autocall);
    163          }
    164          

   \                                 In segment CODE, align 4, keep-with-next
    165          void key()
    166          {
   \                     key:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
    167          int temp=0;
    168          if(is_call==CALL_OUT||is_call==CALL_IN)OpenCall();
   \   00000004   ........           LDR      R4,??DataTable16  ;; d
   \   00000008   3800D4E5           LDRB     R0,[R4, #+56]
   \   0000000C   010050E3           CMP      R0,#+1
   \   00000010   3800D415           LDRBNE   R0,[R4, #+56]
   \   00000014   02005013           CMPNE    R0,#+2
   \   00000018   0100001A           BNE      ??key_0
   \   0000001C   3040BDE8           POP      {R4,R5,LR}       ;; Pop
   \   00000020   ........           B        OpenCall         ;; tailcall
    169          else if(is_call==CALL_OUTW||is_call==CALL_INW){temp=is_call;CloseCall();is_call=temp;}
   \                     ??key_0:
   \   00000024   3800D4E5           LDRB     R0,[R4, #+56]
   \   00000028   030050E3           CMP      R0,#+3
   \   0000002C   3800D415           LDRBNE   R0,[R4, #+56]
   \   00000030   04005013           CMPNE    R0,#+4
   \   00000034   3080BD18           POPNE    {R4,R5,PC}
   \   00000038   3850D4E5           LDRB     R5,[R4, #+56]
   \   0000003C   ........           BL       CloseCall
   \   00000040   3850C4E5           STRB     R5,[R4, #+56]
    170          }
   \   00000044   3080BDE8           POP      {R4,R5,PC}       ;; return

   \                                 In segment DATA_Z, align 4, align-sorted
   \   TDate __data d
   \                     d:
   \   00000000                      DS8 8
   \   int __data object
   \                     object:
   \   00000008                      DS8 4
   \   int __data action
   \                     action:
   \   0000000C                      DS8 4
   \   unsigned int __data in
   \                     in:
   \   00000010                      DS8 4
   \   unsigned int __data out
   \                     out:
   \   00000014                      DS8 4
   \   unsigned int __data autocall
   \                     autocall:
   \   00000018                      DS8 4
   \                     elfname:
   \   0000001C                      DS8 4
   \                     icsm:
   \   00000020                      DS8 4
   \                     old_icsm_onMessage:
   \   00000024                      DS8 4
   \   TTime __data real_time
   \                     real_time:
   \   00000028                      DS8 8
   \   TTime __data t
   \                     t:
   \   00000030                      DS8 8
   \   00000038                      DS8 1
    171          char mode=0;
   \                     mode:
   \   00000039                      DS8 1
   \   0000003A                      DS8 2
   \   char __data RecordName[256]
   \                     RecordName:
   \   0000003C                      DS8 256
   \   GBSTMR __data tmr
   \                     tmr:
   \   0000013C                      DS8 16
   \   char __data name[32]
   \                     name:
   \   0000014C                      DS8 32

   \                                 In segment DATA_Z, align 4, align-sorted
   \                     number:
   \   00000000                      DS8 4

   \                                 In segment DATA_Z, align 4, align-sorted
   \                     maincsm_name_body:
   \   00000000                      DS8 280

   \                                 In segment CODE, align 4, keep-with-next
    172          int my_keyhook(int submsg, int msg)
    173          {
    174            if(opmod==1&&is_call!=CALL_NULL)
   \                     my_keyhook:
   \   00000000   ........           LDR      R2,??DataTable14  ;; opmod
   \   00000004   F0402DE9           PUSH     {R4-R7,LR}
   \   00000008   002092E5           LDR      R2,[R2, #+0]
   \   0000000C   010052E3           CMP      R2,#+1
   \   00000010   3300001A           BNE      ??my_keyhook_0
   \   00000014   ........           LDR      R2,??DataTable16  ;; d
   \   00000018   3830D2E5           LDRB     R3,[R2, #+56]
   \   0000001C   000053E3           CMP      R3,#+0
   \   00000020   2F00000A           BEQ      ??my_keyhook_0
    175            {
    176              if((Key1Type==0&&msg==KEY_DOWN&&submsg==Key1)||(Key2Type==0&&msg==KEY_DOWN&&submsg==Key2)||
    177              (Key1Type==1&&msg==LONG_PRESS&&submsg==Key1)||(Key2Type==1&&msg==LONG_PRESS&&submsg==Key2))
   \   00000024   C0309FE5           LDR      R3,??my_keyhook_1  ;; Key1
   \   00000028   C0409FE5           LDR      R4,??my_keyhook_1+0x4  ;; Key1Type
   \   0000002C   003093E5           LDR      R3,[R3, #+0]
   \   00000030   00C094E5           LDR      R12,[R4, #+0]
   \   00000034   9340A0E3           MOV      R4,#+147
   \   00000038   404F84E3           ORR      R4,R4,#0x100
   \   0000003C   00005CE3           CMP      R12,#+0
   \   00000040   04005101           CMPEQ    R1,R4
   \   00000044   03005001           CMPEQ    R0,R3
   \   00000048   1000000A           BEQ      ??my_keyhook_2
   \   0000004C   A0509FE5           LDR      R5,??my_keyhook_1+0x8  ;; Key2
   \   00000050   A0609FE5           LDR      R6,??my_keyhook_1+0xC  ;; Key2Type
   \   00000054   005095E5           LDR      R5,[R5, #+0]
   \   00000058   006096E5           LDR      R6,[R6, #+0]
   \   0000005C   000056E3           CMP      R6,#+0
   \   00000060   04005101           CMPEQ    R1,R4
   \   00000064   05005001           CMPEQ    R0,R5
   \   00000068   0800000A           BEQ      ??my_keyhook_2
   \   0000006C   027084E2           ADD      R7,R4,#+2
   \   00000070   01005CE3           CMP      R12,#+1
   \   00000074   07005101           CMPEQ    R1,R7
   \   00000078   03005001           CMPEQ    R0,R3
   \   0000007C   0300000A           BEQ      ??my_keyhook_2
   \   00000080   010056E3           CMP      R6,#+1
   \   00000084   07005101           CMPEQ    R1,R7
   \   00000088   05005001           CMPEQ    R0,R5
   \   0000008C   0200001A           BNE      ??my_keyhook_3
    178              {
    179                key();
   \                     ??my_keyhook_2:
   \   00000090   ........           BL       key
    180                return(2);
   \   00000094   0200A0E3           MOV      R0,#+2
   \   00000098   F080BDE8           POP      {R4-R7,PC}
    181              }
    182              
    183               if(Key1Type==2&&Key2Type==2)
   \                     ??my_keyhook_3:
   \   0000009C   02005CE3           CMP      R12,#+2
   \   000000A0   02005603           CMPEQ    R6,#+2
   \   000000A4   0E00001A           BNE      ??my_keyhook_0
    184              {
    185            if(msg==KEY_UP)mode=0;
   \   000000A8   650F51E3           CMP      R1,#+404
   \   000000AC   0300001A           BNE      ??my_keyhook_4
   \   000000B0   0000A0E3           MOV      R0,#+0
   \                     ??my_keyhook_5:
   \   000000B4   3900C2E5           STRB     R0,[R2, #+57]
   \   000000B8   0000A0E3           MOV      R0,#+0
   \   000000BC   F080BDE8           POP      {R4-R7,PC}
    186            if(msg==KEY_DOWN)
   \                     ??my_keyhook_4:
   \   000000C0   040051E1           CMP      R1,R4
   \   000000C4   0600001A           BNE      ??my_keyhook_0
    187            {if(submsg==Key1)mode=1;else if(submsg==Key2 && mode==1){key();return(2);}}
   \   000000C8   030050E1           CMP      R0,R3
   \   000000CC   0100A003           MOVEQ    R0,#+1
   \   000000D0   F7FFFF0A           BEQ      ??my_keyhook_5
   \   000000D4   050050E1           CMP      R0,R5
   \   000000D8   3900D205           LDRBEQ   R0,[R2, #+57]
   \   000000DC   01005003           CMPEQ    R0,#+1
   \   000000E0   EAFFFF0A           BEQ      ??my_keyhook_2
    188            
    189              }
    190            }
    191            return (0);
   \                     ??my_keyhook_0:
   \   000000E4   0000A0E3           MOV      R0,#+0
   \   000000E8   F080BDE8           POP      {R4-R7,PC}       ;; return
   \                     ??my_keyhook_1:
   \   000000EC   ........           DC32     Key1
   \   000000F0   ........           DC32     Key1Type
   \   000000F4   ........           DC32     Key2
   \   000000F8   ........           DC32     Key2Type
    192          }
    193          

   \                                 In segment CODE, align 4, keep-with-next
    194          int main(char *arg,char *arg2)
    195          {
   \                     main:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
    196            elfname=malloc(strlen(strrchr(arg,'\\')+1)+1);
   \   00000004   ........           LDR      R4,??DataTable16  ;; d
   \   00000008   28D04DE2           SUB      SP,SP,#+40
   \   0000000C   0050A0E1           MOV      R5,R0
   \   00000010   5C10A0E3           MOV      R1,#+92
   \   00000014   170100EF           SWI      +279
   \   00000018   010080E2           ADD      R0,R0,#+1
   \   0000001C   1B0000EF           SWI      +27
   \   00000020   010080E2           ADD      R0,R0,#+1
   \   00000024   140000EF           SWI      +20
   \   00000028   1C0084E5           STR      R0,[R4, #+28]
    197            strcpy(elfname,strrchr(arg,'\\')+1);
   \   0000002C   5C10A0E3           MOV      R1,#+92
   \   00000030   0500A0E1           MOV      R0,R5
    198            InitConfig(elfname);
    199            CSM_RAM *save_cmpc;
    200            char dummy[sizeof(MAIN_CSM)];
    201            UpdateCSMname();  
   \   00000034   ........           LDR      R5,??DataTable17  ;; `?<Constant "in:%d out:%d auto:%d">`
   \   00000038   170100EF           SWI      +279
   \   0000003C   011080E2           ADD      R1,R0,#+1
   \   00000040   1C0094E5           LDR      R0,[R4, #+28]
   \   00000044   1A0000EF           SWI      +26
   \   00000048   1C0094E5           LDR      R0,[R4, #+28]
   \   0000004C   ........           _BLF     InitConfig,??InitConfig??rA
   \   00000050   180094E5           LDR      R0,[R4, #+24]
   \   00000054   0510A0E1           MOV      R1,R5
   \   00000058   01002DE9           PUSH     {R0}
   \   0000005C   143094E5           LDR      R3,[R4, #+20]
   \   00000060   102094E5           LDR      R2,[R4, #+16]
   \   00000064   400085E2           ADD      R0,R5,#+64
   \   00000068   240100EF           SWI      +292
    202            LockSched();
   \   0000006C   460100EF           SWI      +326
    203            save_cmpc=CSM_root()->csm_q->current_msg_processing_csm;
   \   00000070   068100EF           SWI      +33030
   \   00000074   080090E5           LDR      R0,[R0, #+8]
   \   00000078   046090E5           LDR      R6,[R0, #+4]
    204            CSM_root()->csm_q->current_msg_processing_csm=CSM_root()->csm_q->csm.first;
   \   0000007C   068100EF           SWI      +33030
   \   00000080   0070A0E1           MOV      R7,R0
   \   00000084   068100EF           SWI      +33030
   \   00000088   080090E5           LDR      R0,[R0, #+8]
   \   0000008C   081097E5           LDR      R1,[R7, #+8]
   \   00000090   080090E5           LDR      R0,[R0, #+8]
    205            CreateCSM(&MAINCSM.maincsm,dummy,0);
   \   00000094   0020A0E3           MOV      R2,#+0
   \   00000098   040081E5           STR      R0,[R1, #+4]
   \   0000009C   04108DE2           ADD      R1,SP,#+4
   \   000000A0   180085E2           ADD      R0,R5,#+24
   \   000000A4   070100EF           SWI      +263
    206            CSM_root()->csm_q->current_msg_processing_csm=save_cmpc;
   \   000000A8   068100EF           SWI      +33030
   \   000000AC   080090E5           LDR      R0,[R0, #+8]
   \   000000B0   046080E5           STR      R6,[R0, #+4]
    207            UnlockSched();
   \   000000B4   470100EF           SWI      +327
    208            icsm=FindCSMbyID(CSM_root()->idle_id); 
   \   000000B8   068100EF           SWI      +33030
   \   000000BC   040090E5           LDR      R0,[R0, #+4]
   \   000000C0   080100EF           SWI      +264
   \   000000C4   200084E5           STR      R0,[R4, #+32]
   \   000000C8   080090E5           LDR      R0,[R0, #+8]
   \   000000CC   001090E5           LDR      R1,[R0, #+0]
   \   000000D0   241084E5           STR      R1,[R4, #+36]
    209            old_icsm_onMessage=((CSM_DESC*)icsm->constr)->onMessage; 
    210            ((CSM_DESC*)icsm->constr)->onMessage=MyIDLECSM_onMessage;
   \   000000D4   0C109FE5           LDR      R1,??main_0      ;; MyIDLECSM_onMessage
   \   000000D8   001080E5           STR      R1,[R0, #+0]
    211            #ifdef DBG
    212            DHS_addProc(TimeDraw);
    213            CREDRAW();
    214          #endif
    215            return 0;
   \   000000DC   0000A0E3           MOV      R0,#+0
   \   000000E0   2CD08DE2           ADD      SP,SP,#+44
   \   000000E4   F080BDE8           POP      {R4-R7,PC}       ;; return
   \                     ??main_0:
   \   000000E8   ........           DC32     MyIDLECSM_onMessage
    216          }

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable12:
   \   00000000   ........           DC32     my_keyhook

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable14:
   \   00000000   ........           DC32     opmod

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable16:
   \   00000000   ........           DC32     d

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable17:
   \   00000000   ........           DC32     `?<Constant "in:%d out:%d auto:%d">`

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   5C257300           DC8 "\\%s"

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   616D7200           DC8 "amr"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "unknown_%d-%d-%u_%d-%...">`:
   \   00000000   756E6B6E6F77       DC8 "unknown_%d-%d-%u_%d-%d-%d.amr"
   \              6E5F25642D25
   \              642D25755F25
   \              642D25642D25
   \              642E616D7200
   \   0000001E   0000               DC8 0, 0
   \   00000020   6175746F5C00       DC8 "auto\\"
   \   00000026   0000               DC8 0, 0
   \   00000028   6F75745C00         DC8 "out\\"
   \   0000002D   000000             DC8 0, 0, 0
   \   00000030   257325642D25       DC8 "%s%d-%d-%u_%d-%d-%d.amr"
   \              642D25755F25
   \              642D25642D25
   \              642E616D7200

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   696E5C00           DC8 "in\\"

   Maximum stack usage in bytes:

     Function            CSTACK
     --------            ------
     Auto                    4
     Close                   4
     CloseCall              12
     Killer                  4
     MyIDLECSM_onMessage    20
     Obs_CreateAmrFile      32
     Obs_DeleteObj           8
     Obs_StartAmrWrite       8
     Obs_StopAmrWrite        8
     OpenCall               36
     func                    4
     key                    12
     main                   64
     maincsm_onclose         8
     maincsm_oncreate        4
     maincsm_onmessage       4
     my_keyhook             20
     strcmp_nocase           0


   Segment part sizes:

     Function/Label                 Bytes
     --------------                 -----
     Obs_CreateAmrFile               480
     Obs_StopAmrWrite                 44
     Obs_StartAmrWrite                28
     Obs_DeleteObj                    28
     func                             32
     OpenCall                        440
     CloseCall                        88
     Close                           160
     Auto                            176
     minus11                           4
     ??strcmp_nocase_0                76
     MyIDLECSM_onMessage             244
     maincsm_onmessage                76
     maincsm_oncreate                 16
     Killer                           28
     maincsm_onclose                  72
     ?<Constant "in:%d out:%d auto:%d">
                                      84
     key                              72
     d                               364
     number                            4
     maincsm_name_body               280
     my_keyhook                      252
     main                            236
     ??DataTable12                     4
     ??DataTable14                     4
     ??DataTable16                     4
     ??DataTable17                     4
     ?<Constant "\\%s">                4
     ?<Constant "amr">                 4
     ?<Constant "unknown_%d-%d-%u_%d-%...">
                                      72
     ?<Constant "in\\">                4
      Others                         120

 
 2 672 bytes in segment CODE
   172 bytes in segment DATA_C
   648 bytes in segment DATA_Z
    12 bytes in segment INITTAB
 
 2 564 bytes of CODE  memory (+ 120 bytes shared)
   172 bytes of CONST memory
   648 bytes of DATA  memory

Errors: none
Warnings: none
