##############################################################################
#                                                                            #
# IAR ARM ANSI C/C++ Compiler V4.42A/W32 EVALUATION    15/Feb/2011  01:38:41 #
# Copyright 1999-2005 IAR Systems. All rights reserved.                      #
#                                                                            #
#    Cpu mode        =  interwork                                            #
#    Endian          =  little                                               #
#    Stack alignment =  4                                                    #
#    Source file     =  C:\arm\SieJC_BR\JID_Enter_UI.c                       #
#    Command line    =  C:\arm\SieJC_BR\JID_Enter_UI.c -D NEWSGOLD -D ELKA   #
#                       --preprocess C:\arm\SieJC_BR\Release_ELKA\List\ -lC  #
#                       C:\arm\SieJC_BR\Release_ELKA\List\ -o                #
#                       C:\arm\SieJC_BR\Release_ELKA\Obj\ -s9 --no_unroll    #
#                       --cpu_mode arm --endian little --cpu ARM926EJ-S      #
#                       --stack_align 4 --interwork -e --fpu None            #
#                       --dlib_config "C:\arm2\Embedded Workbench 4.0        #
#                       Evaluation\ARM\LIB\dl5tpainl8n.h" -I                 #
#                       "C:\arm2\Embedded Workbench 4.0                      #
#                       Evaluation\ARM\INC\" --inline_threshold=2            #
#    List file       =  C:\arm\SieJC_BR\Release_ELKA\List\JID_Enter_UI.lst   #
#    Object file     =  C:\arm\SieJC_BR\Release_ELKA\Obj\JID_Enter_UI.r79    #
#                                                                            #
#                                                                            #
##############################################################################

C:\arm\SieJC_BR\JID_Enter_UI.c
      1          #include "../inc/swilib.h"
      2          #include "main.h"
      3          #include "string_util.h"
      4          #include "jabber_util.h"
      5          #include "groups_util.h"
      6          #include "JID_Enter_UI.h"
      7          #include "lang.h"
      8          #include "rect_patcher.h"
      9          
     10          typedef struct {
     11            char jid_ask;
     12            char jid_del;
     13            char jid_add;
     14          } JIDENTER_SETTINGS;
     15          

   \                                 In segment DATA_I, align 4, align-sorted
     16          SOFTKEY_DESC jid_menu_sk[]=
   \                     jid_menu_sk:
   \   00000000                      DS8 24
   \   00000018                      REQUIRE `?<Initializer for jid_menu_sk>`
     17          {
     18            {0x0018,0x0000,(int)LG_SELECT},
     19            {0x0001,0x0000,(int)LG_BACK},
     20            {0x003D,0x0000,(int)LGP_DOIT_PIC}
     21          };
     22          

   \                                 In segment DATA_I, align 4, align-sorted
     23          SOFTKEYSTAB jid_menu_skt=
   \                     jid_menu_skt:
   \   00000000                      DS8 8
   \   00000008                      REQUIRE `?<Initializer for jid_menu_skt>`
     24          {
     25            jid_menu_sk,0
     26          };
     27          
     28          JIDENTER_SETTINGS jid_set;
     29          
     30          WSHDR* jews;
     31          char jTerminate=0;
     32          
     33          typedef struct
     34          {
     35            GUI *ed_grgui;
     36            int count;
     37          }GRLIST_STRUCT;
     38          

   \                                 In segment CODE, align 4, keep-with-next
     39          void ed_grouplist_handler(USR_MENU_ITEM *item)
     40          {
   \                     ed_grouplist_handler:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
   \   00000004   0050A0E1           MOV      R5,R0
     41            GRLIST_STRUCT *gr_str=item->user_pointer;
     42            int i=item->cur_item;
     43            if (item->type==0)
   \   00000008   0000D5E5           LDRB     R0,[R5, #+0]
   \   0000000C   044095E5           LDR      R4,[R5, #+4]
   \   00000010   B860D5E1           LDRH     R6,[R5, #+8]
   \   00000014   000050E3           CMP      R0,#+0
   \   00000018   0800001A           BNE      ??ed_grouplist_handler_0
     44            {
     45                if (i<gr_str->count) utf8_2ws(item->ws,GetGroupNameByID(i+1),80);//пропускаем "No group"
   \   0000001C   040094E5           LDR      R0,[R4, #+4]
   \   00000020   000056E1           CMP      R6,R0
   \   00000024   7080BDA8           POPGE    {R4-R6,PC}
   \   00000028   010086E2           ADD      R0,R6,#+1
   \   0000002C   ........           _BLF     GetGroupNameByID,??GetGroupNameByID??rA
   \   00000030   0010A0E1           MOV      R1,R0
   \   00000034   0C0095E5           LDR      R0,[R5, #+12]
   \   00000038   5020A0E3           MOV      R2,#+80
   \   0000003C   E30100EF           SWI      +483
     46            }
     47            if (item->type==1)
   \                     ??ed_grouplist_handler_0:
   \   00000040   0000D5E5           LDRB     R0,[R5, #+0]
   \   00000044   010050E3           CMP      R0,#+1
   \   00000048   7080BD18           POPNE    {R4-R6,PC}
     48            {
     49                if (i<gr_str->count)
   \   0000004C   040094E5           LDR      R0,[R4, #+4]
   \   00000050   000056E1           CMP      R6,R0
   \   00000054   7080BDA8           POPGE    {R4-R6,PC}
     50                {
     51          	int c;
     52          	char *p=GetGroupNameByID(i+1); //пропускаем "No group"
   \   00000058   010086E2           ADD      R0,R6,#+1
   \   0000005C   ........           _BLF     GetGroupNameByID,??GetGroupNameByID??rA
   \   00000060   0050A0E1           MOV      R5,R0
     53          	WSHDR *ed_ws=AllocWS(strlen(p));
   \   00000064   1B0000EF           SWI      +27
   \   00000068   250100EF           SWI      +293
   \   0000006C   0060A0E1           MOV      R6,R0
   \   00000070   030000EA           B        ??ed_grouplist_handler_1
     54                  {
     55                    while(c=*p++)
     56                    {
     57                      wsAppendChar(ed_ws,char8to16(c));
   \                     ??ed_grouplist_handler_2:
   \   00000074   ........           _BLF     char8to16,??char8to16??rA
   \   00000078   0010A0E1           MOV      R1,R0
   \   0000007C   0600A0E1           MOV      R0,R6
   \   00000080   1C0000EF           SWI      +28
     58                    }
   \                     ??ed_grouplist_handler_1:
   \   00000084   ........           LDRB     R0,[R5], #+1
   \   00000088   000050E3           CMP      R0,#+0
   \   0000008C   F8FFFF1A           BNE      ??ed_grouplist_handler_2
     59                    EDIT_SetTextToEditControl(gr_str->ed_grgui,6,ed_ws);
   \   00000090   000094E5           LDR      R0,[R4, #+0]
   \   00000094   0620A0E1           MOV      R2,R6
   \   00000098   0610A0E3           MOV      R1,#+6
   \   0000009C   DE0100EF           SWI      +478
     60                  }
     61          	FreeWS(ed_ws);
   \   000000A0   0600A0E1           MOV      R0,R6
   \   000000A4   290100EF           SWI      +297
     62                }
     63            }
     64          }
   \   000000A8   7080BDE8           POP      {R4-R6,PC}       ;; return
     65          

   \                                 In segment CODE, align 4, keep-with-next
     66          int jed1_onkey(GUI *data, GUI_MSG *msg)
     67          {
   \                     jed1_onkey:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
     68            //-1 - do redraw
     69            //1: close
     70            // Если зелёная кнопка либо нажата кнопка, которую мы повесили в cmd=7
     71            if(msg->gbsmsg->submess==GREEN_BUTTON || msg->keys==0x18)
   \   00000004   ........           LDR      R5,??DataTable1  ;; jed1_desc
   \   00000008   0040A0E1           MOV      R4,R0
   \   0000000C   040091E5           LDR      R0,[R1, #+4]
   \   00000010   0160A0E3           MOV      R6,#+1
   \   00000014   082090E5           LDR      R2,[R0, #+8]
   \   00000018   0B0052E3           CMP      R2,#+11
   \   0000001C   F210D111           LDRSHNE  R1,[R1, #+2]
   \   00000020   18005113           CMPNE    R1,#+24
     72            {
     73              jTerminate = 1;
   \   00000024   5360C505           STRBEQ   R6,[R5, #+83]
     74              return 1;
     75            }
     76            
     77            if (msg->keys==0x0FF0) //Левый софт СГОЛД
   \   00000028   FF0E5113           CMPNE    R1,#+4080
     78            {
     79              return(1);
   \   0000002C   0100A003           MOVEQ    R0,#+1
   \   00000030   7080BD08           POPEQ    {R4-R6,PC}
     80            }
     81          if (msg->gbsmsg->msg==KEY_DOWN)
   \   00000034   041090E5           LDR      R1,[R0, #+4]
   \   00000038   9320A0E3           MOV      R2,#+147
   \   0000003C   402F82E3           ORR      R2,R2,#0x100
   \   00000040   020051E1           CMP      R1,R2
     82            {
     83              if (msg->gbsmsg->submess==ENTER_BUTTON)
   \   00000044   08009005           LDREQ    R0,[R0, #+8]
   \   00000048   1A005003           CMPEQ    R0,#+26
   \   0000004C   2F00001A           BNE      ??jed1_onkey_0
     84              {
     85                if (EDIT_GetFocus(data)==8)
   \   00000050   0400A0E1           MOV      R0,R4
   \   00000054   820100EF           SWI      +386
   \   00000058   080050E3           CMP      R0,#+8
   \   0000005C   1700001A           BNE      ??jed1_onkey_1
     86                {
     87              jid_set.jid_ask=!jid_set.jid_ask;  //8 пункт при добавлении контакта "Запрос авторизации",
   \   00000060   5010D5E5           LDRB     R1,[R5, #+80]
     88              jid_set.jid_del=!jid_set.jid_del;  // а при удалении "Удалить"
     89              CutWSTR(jews,0);
   \   00000064   4C0095E5           LDR      R0,[R5, #+76]
   \   00000068   000051E3           CMP      R1,#+0
   \   0000006C   0110A003           MOVEQ    R1,#+1
   \   00000070   0010A013           MOVNE    R1,#+0
   \   00000074   5010C5E5           STRB     R1,[R5, #+80]
   \   00000078   5110D5E5           LDRB     R1,[R5, #+81]
   \   0000007C   000051E3           CMP      R1,#+0
   \   00000080   0060A013           MOVNE    R6,#+0
   \   00000084   5160C5E5           STRB     R6,[R5, #+81]
   \   00000088   0010A0E3           MOV      R1,#+0
   \   0000008C   260100EF           SWI      +294
     90              wsAppendChar(jews, jid_set.jid_del?CBOX_CHECKED:CBOX_UNCHECKED);
   \   00000090   5100D5E5           LDRB     R0,[R5, #+81]
   \   00000094   000050E3           CMP      R0,#+0
   \   00000098   4C0095E5           LDR      R0,[R5, #+76]
   \   0000009C   1610A013           MOVNE    R1,#+22
   \   000000A0   1710A003           MOVEQ    R1,#+23
   \   000000A4   E11C81E3           ORR      R1,R1,#0xE100
   \   000000A8   1C0000EF           SWI      +28
     91              EDIT_SetTextToFocused(data,jews);
   \   000000AC   4C1095E5           LDR      R1,[R5, #+76]
   \   000000B0   0400A0E1           MOV      R0,R4
   \   000000B4   810100EF           SWI      +385
     92              return (-1);
   \   000000B8   0000E0E3           MVN      R0,#+0
   \   000000BC   7080BDE8           POP      {R4-R6,PC}
     93                }
     94          
     95                if ((EDIT_GetFocus(data)==6)&&(!EDIT_IsMarkModeActive(data)))
   \                     ??jed1_onkey_1:
   \   000000C0   0400A0E1           MOV      R0,R4
   \   000000C4   820100EF           SWI      +386
   \   000000C8   060050E3           CMP      R0,#+6
   \   000000CC   0F00001A           BNE      ??jed1_onkey_0
   \   000000D0   0400A0E1           MOV      R0,R4
   \   000000D4   D80100EF           SWI      +472
   \   000000D8   000050E3           CMP      R0,#+0
   \   000000DC   0B00001A           BNE      ??jed1_onkey_0
     96                {
     97                  GRLIST_STRUCT *gr_str=EDIT_GetUserPointer(data);
   \   000000E0   0400A0E1           MOV      R0,R4
   \   000000E4   DF0100EF           SWI      +479
   \   000000E8   0050A0E1           MOV      R5,R0
     98                  int i=gr_str->count=GetGroupCount();
   \   000000EC   ........           _BLF     GetGroupCount,??GetGroupCount??rA
     99                  EDIT_OpenOptionMenuWithUserItems(data,ed_grouplist_handler,gr_str,i);
   \   000000F0   20109FE5           LDR      R1,??jed1_onkey_2  ;; ed_grouplist_handler
   \   000000F4   040085E5           STR      R0,[R5, #+4]
   \   000000F8   0030A0E1           MOV      R3,R0
   \   000000FC   0520A0E1           MOV      R2,R5
   \   00000100   0400A0E1           MOV      R0,R4
   \   00000104   E50100EF           SWI      +485
    100                  return (-1);
   \   00000108   000066E2           RSB      R0,R6,#+0
   \   0000010C   7080BDE8           POP      {R4-R6,PC}
    101                }
    102              }
    103            }
    104            return 0;
   \                     ??jed1_onkey_0:
   \   00000110   0000A0E3           MOV      R0,#+0
   \   00000114   7080BDE8           POP      {R4-R6,PC}       ;; return
   \                     ??jed1_onkey_2:
   \   00000118   ........           DC32     ed_grouplist_handler
    105          }
    106          

   \                                 In segment CODE, align 4, keep-with-next
    107          void jed1_ghook(GUI *data, int cmd)
    108          {
   \                     jed1_ghook:
   \   00000000   F0432DE9           PUSH     {R4-R9,LR}
    109            EDITCONTROL ec;
    110            static SOFTKEY_DESC mmmmsk={0x0018, 0x0000,(int)LG_OK};
    111            if (cmd==TI_CMD_CREATE)
   \   00000004   ........           LDR      R5,??DataTable1  ;; jed1_desc
   \   00000008   72DF4DE2           SUB      SP,SP,#+456
   \   0000000C   0080A0E1           MOV      R8,R0
   \   00000010   0140A0E1           MOV      R4,R1
   \   00000014   020054E3           CMP      R4,#+2
   \   00000018   0200001A           BNE      ??jed1_ghook_0
    112            {
    113                GRLIST_STRUCT *gr_str=EDIT_GetUserPointer(data);
   \   0000001C   DF0100EF           SWI      +479
    114                gr_str->ed_grgui=data;
   \   00000020   008080E5           STR      R8,[R0, #+0]
   \   00000024   0F0000EA           B        ??jed1_ghook_1
    115            }
    116            if (cmd==TI_CMD_REDRAW)
   \                     ??jed1_ghook_0:
   \   00000028   070054E3           CMP      R4,#+7
   \   0000002C   0A00001A           BNE      ??jed1_ghook_2
    117            {
    118              //OnRun
    119              ExtractEditControl(data,2,&ec);    
   \   00000030   0C208DE2           ADD      R2,SP,#+12
   \   00000034   0210A0E3           MOV      R1,#+2
   \   00000038   690100EF           SWI      +361
    120              wstrcpy(jews,ec.pWS);
   \   0000003C   34109DE5           LDR      R1,[SP, #+52]
   \   00000040   4C0095E5           LDR      R0,[R5, #+76]
   \   00000044   1F0100EF           SWI      +287
    121          #ifndef NEWSGOLD
    122            static const SOFTKEY_DESC sk_cancel={0x0FF0,0x0000,(int)LG_CLOSE};
    123          #endif
    124          #ifdef NEWSGOLD    
    125              SetSoftKey(data,&mmmmsk,0);
   \   00000048   0020A0E3           MOV      R2,#+0
   \   0000004C   541085E2           ADD      R1,R5,#+84
   \   00000050   0800A0E1           MOV      R0,R8
   \   00000054   680100EF           SWI      +360
   \   00000058   020000EA           B        ??jed1_ghook_1
    126          #else
    127              SetSoftKey(data,&mmmmsk,1);
    128              if (ec.pWS->wsbody[0]==0)
    129                SetSoftKey(data,&sk_cancel,SET_SOFT_KEY_N==0?1:0);    
    130          #endif 
    131            }
    132            
    133            if(cmd==TI_CMD_FOCUS)   // Фокусирование
   \                     ??jed1_ghook_2:
   \   0000005C   0A0054E3           CMP      R4,#+10
   \   00000060   0000001A           BNE      ??jed1_ghook_1
    134            {
    135               DisableIDLETMR();   // Отключаем таймер выхода по таймауту
   \   00000064   7F0100EF           SWI      +383
    136            }
    137          
    138            if(jTerminate)
   \                     ??jed1_ghook_1:
   \   00000068   5300D5E5           LDRB     R0,[R5, #+83]
   \   0000006C   000050E3           CMP      R0,#+0
   \   00000070   8800000A           BEQ      ??jed1_ghook_3
    139           {
    140             char* jid_jid = NULL;
    141             char* jid_name = NULL;
    142             char* jid_group = NULL;
    143             jTerminate=0;
    144             size_t st_len;
    145             st_len = wstrlen(jews)*2;
   \   00000074   4C0095E5           LDR      R0,[R5, #+76]
   \   00000078   0090A0E3           MOV      R9,#+0
   \   0000007C   5390C5E5           STRB     R9,[R5, #+83]
   \   00000080   230100EF           SWI      +291
   \   00000084   8000A0E1           LSL      R0,R0,#+1
   \   00000088   00008DE5           STR      R0,[SP, #+0]
    146             if(st_len)
   \   0000008C   000050E3           CMP      R0,#+0
   \   00000090   0600000A           BEQ      ??jed1_ghook_4
    147             {
    148                jid_jid =  utf16_to_utf8((char**)jews,&st_len);
   \   00000094   4C0095E5           LDR      R0,[R5, #+76]
   \   00000098   0D10A0E1           MOV      R1,SP
   \   0000009C   ........           _BLF     utf16_to_utf8,??utf16_to_utf8??rA
   \   000000A0   0060A0E1           MOV      R6,R0
    149                jid_jid[st_len]='\0';
   \   000000A4   00009DE5           LDR      R0,[SP, #+0]
   \   000000A8   0690C0E7           STRB     R9,[R0, +R6]
   \   000000AC   000000EA           B        ??jed1_ghook_5
    150             } else jid_jid = NULL;
   \                     ??jed1_ghook_4:
   \   000000B0   0060A0E3           MOV      R6,#+0
    151           
    152             ExtractEditControl(data,4,&ec);    
   \                     ??jed1_ghook_5:
   \   000000B4   0C208DE2           ADD      R2,SP,#+12
   \   000000B8   0410A0E3           MOV      R1,#+4
   \   000000BC   0800A0E1           MOV      R0,R8
   \   000000C0   690100EF           SWI      +361
    153             wstrcpy(jews,ec.pWS);
   \   000000C4   34109DE5           LDR      R1,[SP, #+52]
   \   000000C8   4C0095E5           LDR      R0,[R5, #+76]
   \   000000CC   1F0100EF           SWI      +287
    154             st_len = wstrlen(jews)*2;
   \   000000D0   4C0095E5           LDR      R0,[R5, #+76]
   \   000000D4   230100EF           SWI      +291
   \   000000D8   8000A0E1           LSL      R0,R0,#+1
   \   000000DC   00008DE5           STR      R0,[SP, #+0]
    155             if(st_len)
   \   000000E0   000050E3           CMP      R0,#+0
   \   000000E4   0600000A           BEQ      ??jed1_ghook_6
    156             {
    157                jid_name =  utf16_to_utf8((char**)jews,&st_len);
   \   000000E8   4C0095E5           LDR      R0,[R5, #+76]
   \   000000EC   0D10A0E1           MOV      R1,SP
   \   000000F0   ........           _BLF     utf16_to_utf8,??utf16_to_utf8??rA
   \   000000F4   0070A0E1           MOV      R7,R0
    158                jid_name[st_len]='\0';
   \   000000F8   00009DE5           LDR      R0,[SP, #+0]
   \   000000FC   0790C0E7           STRB     R9,[R0, +R7]
   \   00000100   000000EA           B        ??jed1_ghook_7
    159             }else jid_name=NULL;
   \                     ??jed1_ghook_6:
   \   00000104   0070A0E3           MOV      R7,#+0
    160            
    161              ExtractEditControl(data,6,&ec);
   \                     ??jed1_ghook_7:
   \   00000108   0C208DE2           ADD      R2,SP,#+12
   \   0000010C   0610A0E3           MOV      R1,#+6
   \   00000110   0800A0E1           MOV      R0,R8
   \   00000114   690100EF           SWI      +361
    162              wstrcpy(jews,ec.pWS);
   \   00000118   34109DE5           LDR      R1,[SP, #+52]
   \   0000011C   4C0095E5           LDR      R0,[R5, #+76]
   \   00000120   1F0100EF           SWI      +287
    163              st_len = wstrlen(jews)*2;
   \   00000124   4C0095E5           LDR      R0,[R5, #+76]
   \   00000128   230100EF           SWI      +291
   \   0000012C   8000A0E1           LSL      R0,R0,#+1
   \   00000130   00008DE5           STR      R0,[SP, #+0]
    164             if(st_len)
   \   00000134   000050E3           CMP      R0,#+0
   \   00000138   0600000A           BEQ      ??jed1_ghook_8
    165             {
    166                jid_group =  utf16_to_utf8((char**)jews,&st_len);
   \   0000013C   4C0095E5           LDR      R0,[R5, #+76]
   \   00000140   0D10A0E1           MOV      R1,SP
   \   00000144   ........           _BLF     utf16_to_utf8,??utf16_to_utf8??rA
   \   00000148   0080A0E1           MOV      R8,R0
    167                jid_group[st_len]='\0';
   \   0000014C   00009DE5           LDR      R0,[SP, #+0]
   \   00000150   0890C0E7           STRB     R9,[R0, +R8]
   \   00000154   000000EA           B        ??jed1_ghook_9
    168             } else jid_group =NULL;
   \                     ??jed1_ghook_8:
   \   00000158   0080A0E3           MOV      R8,#+0
    169             
    170           if(jid_jid)
   \                     ??jed1_ghook_9:
   \   0000015C   54919FE5           LDR      R9,??jed1_ghook_10+0x8  ;; `?<Constant "roster3">`
   \   00000160   000056E3           CMP      R6,#+0
   \   00000164   3C00000A           BEQ      ??jed1_ghook_11
    171           {
    172            char answer[400];
    173            char di[] = "roster3";
   \   00000168   0C0099E8           LDM      R9,{R2,R3}
   \   0000016C   04008DE2           ADD      R0,SP,#+4
   \   00000170   0C0080E8           STM      R0,{R2,R3}
    174            if((jid_set.jid_del)&&(jid_set.jid_add))
   \   00000174   5100D5E5           LDRB     R0,[R5, #+81]
   \   00000178   000050E3           CMP      R0,#+0
   \   0000017C   5200D515           LDRBNE   R0,[R5, #+82]
   \   00000180   00005013           CMPNE    R0,#+0
   \   00000184   0600000A           BEQ      ??jed1_ghook_12
    175            {
    176               sprintf(answer, "<item jid='%s' subscription='remove'/>", Mask_Special_Syms(jid_jid));
   \   00000188   0600A0E1           MOV      R0,R6
   \   0000018C   ........           _BLF     Mask_Special_Syms,??Mask_Special_Syms??rA
   \   00000190   0020A0E1           MOV      R2,R0
   \   00000194   081089E2           ADD      R1,R9,#+8
   \   00000198   38008DE2           ADD      R0,SP,#+56
   \   0000019C   160000EF           SWI      +22
   \   000001A0   1B0000EA           B        ??jed1_ghook_13
    177            }
    178            else
    179            {
    180              sprintf(answer, "<item jid='%s'", Mask_Special_Syms(jid_jid));
   \                     ??jed1_ghook_12:
   \   000001A4   0600A0E1           MOV      R0,R6
   \   000001A8   ........           _BLF     Mask_Special_Syms,??Mask_Special_Syms??rA
   \   000001AC   0020A0E1           MOV      R2,R0
   \   000001B0   301089E2           ADD      R1,R9,#+48
   \   000001B4   38008DE2           ADD      R0,SP,#+56
   \   000001B8   160000EF           SWI      +22
    181              if(jid_name)
   \   000001BC   000057E3           CMP      R7,#+0
   \   000001C0   0600000A           BEQ      ??jed1_ghook_14
    182                {
    183                sprintf(answer,"%s name='%s'",answer, Mask_Special_Syms(jid_name));
   \   000001C4   0700A0E1           MOV      R0,R7
   \   000001C8   ........           _BLF     Mask_Special_Syms,??Mask_Special_Syms??rA
   \   000001CC   0030A0E1           MOV      R3,R0
   \   000001D0   38208DE2           ADD      R2,SP,#+56
   \   000001D4   401089E2           ADD      R1,R9,#+64
   \   000001D8   38008DE2           ADD      R0,SP,#+56
   \   000001DC   160000EF           SWI      +22
    184                }
    185              if(jid_group)
   \                     ??jed1_ghook_14:
   \   000001E0   000058E3           CMP      R8,#+0
   \   000001E4   0700000A           BEQ      ??jed1_ghook_15
    186              {
    187                sprintf(answer,"%s><group>%s</group></item>",answer, Mask_Special_Syms(jid_group));
   \   000001E8   0800A0E1           MOV      R0,R8
   \   000001EC   ........           _BLF     Mask_Special_Syms,??Mask_Special_Syms??rA
   \   000001F0   0030A0E1           MOV      R3,R0
   \   000001F4   38208DE2           ADD      R2,SP,#+56
   \   000001F8   501089E2           ADD      R1,R9,#+80
   \   000001FC   38008DE2           ADD      R0,SP,#+56
   \   00000200   160000EF           SWI      +22
   \   00000204   020000EA           B        ??jed1_ghook_13
    188              }
    189              else 
    190              {
    191                strcat(answer,"/>");
   \                     ??jed1_ghook_15:
   \   00000208   281F8FE2           ADR      R1,??jed1_ghook_10  ;; "/>"
   \   0000020C   38008DE2           ADD      R0,SP,#+56
   \   00000210   170000EF           SWI      +23
    192              }
    193            }
    194          
    195            SendIq(NULL, IQTYPE_SET, di, IQ_ROSTER, answer);
   \                     ??jed1_ghook_13:
   \   00000214   38008DE2           ADD      R0,SP,#+56
   \   00000218   01002DE9           PUSH     {R0}
   \   0000021C   6C3089E2           ADD      R3,R9,#+108
   \   00000220   08208DE2           ADD      R2,SP,#+8
   \   00000224   221F8FE2           ADR      R1,??jed1_ghook_10+0x4  ;; "set"
   \   00000228   0000A0E3           MOV      R0,#+0
   \   0000022C   ........           _BLF     SendIq,??SendIq??rA
    196            if((!jid_set.jid_add)&&(jid_set.jid_ask))
   \   00000230   5200D5E5           LDRB     R0,[R5, #+82]
   \   00000234   04D08DE2           ADD      SP,SP,#+4
   \   00000238   000050E3           CMP      R0,#+0
   \   0000023C   0900001A           BNE      ??jed1_ghook_16
   \   00000240   5000D5E5           LDRB     R0,[R5, #+80]
   \   00000244   000050E3           CMP      R0,#+0
   \   00000248   0600000A           BEQ      ??jed1_ghook_16
    197              {
    198                Send_ShortPresence(jid_jid,8);//посылаем запрос авторизации
   \   0000024C   0810A0E3           MOV      R1,#+8
   \   00000250   0600A0E1           MOV      R0,R6
   \   00000254   ........           _BLF     Send_ShortPresence,??Send_ShortPresence??rA
   \   00000258   020000EA           B        ??jed1_ghook_16
    199              }
    200           } else ShowMSG(1,(int)LG_JENOJID);
   \                     ??jed1_ghook_11:
   \   0000025C   801089E2           ADD      R1,R9,#+128
   \   00000260   0100A0E3           MOV      R0,#+1
   \   00000264   480100EF           SWI      +328
    201           if(jid_name) mfree(jid_name);
   \                     ??jed1_ghook_16:
   \   00000268   000057E3           CMP      R7,#+0
   \   0000026C   0100000A           BEQ      ??jed1_ghook_17
   \   00000270   0700A0E1           MOV      R0,R7
   \   00000274   150000EF           SWI      +21
    202           if(jid_jid) mfree(jid_jid);
   \                     ??jed1_ghook_17:
   \   00000278   000056E3           CMP      R6,#+0
   \   0000027C   0100000A           BEQ      ??jed1_ghook_18
   \   00000280   0600A0E1           MOV      R0,R6
   \   00000284   150000EF           SWI      +21
    203           if(jid_group) mfree(jid_group);
   \                     ??jed1_ghook_18:
   \   00000288   000058E3           CMP      R8,#+0
   \   0000028C   0100000A           BEQ      ??jed1_ghook_3
   \   00000290   0800A0E1           MOV      R0,R8
   \   00000294   150000EF           SWI      +21
    204           //end if(jid_jid)
    205           }
    206          
    207            if(cmd==TI_CMD_DESTROY)     // onDestroy
   \                     ??jed1_ghook_3:
   \   00000298   030054E3           CMP      R4,#+3
   \   0000029C   0100001A           BNE      ??jed1_ghook_19
    208            {
    209              FreeWS(jews);
   \   000002A0   4C0095E5           LDR      R0,[R5, #+76]
   \   000002A4   290100EF           SWI      +297
    210            }
    211          }
   \                     ??jed1_ghook_19:
   \   000002A8   72DF8DE2           ADD      SP,SP,#+456      ;; stack cleaning
   \   000002AC   F083BDE8           POP      {R4-R9,PC}       ;; return
   \                     ??jed1_ghook_10:
   \   000002B0   2F3E0000           DC8      "/>",+0
   \   000002B4   73657400           DC8      "set"
   \   000002B8   ........           DC32     `?<Constant "roster3">`
    212          
    213          HEADER_DESC jed1_hdr={0,0,131,21,NULL,(int)LG_JECONTACTHDR,LGP_NULL};
    214          

   \                                 In segment CODE, align 4, keep-with-next
    215          void jed1_locret(void){}
   \                     jed1_locret:
   \   00000000   1EFF2FE1           BX       LR               ;; return

   \                                 In segment DATA_I, align 4, align-sorted
    216          
    217          INPUTDIA_DESC jed1_desc=
   \                     jed1_desc:
   \   00000000                      DS8 56
   \   00000038                      REQUIRE `?<Initializer for jed1_desc>`
   \                     jed1_hdr:
   \   00000038                      DS8 20
   \   0000004C                      REQUIRE `?<Initializer for jed1_hdr>`
   \                     jews:
   \   0000004C                      DS8 4
   \   00000050                      REQUIRE `?<Initializer for jews>`
   \                     jid_set:
   \   00000050                      DS8 3
   \   00000053                      REQUIRE `?<Initializer for jid_set>`
   \                     jTerminate:
   \   00000053                      DS8 1
   \   00000054                      REQUIRE `?<Initializer for jTerminate>`
   \   00000054                      DS8 8
   \   0000005C                      REQUIRE `?<Initializer for mmmmsk>`
    218          {
    219            1,
    220            jed1_onkey,
    221            jed1_ghook,
    222            (void *)jed1_locret,
    223            0,
    224            &jid_menu_skt,
    225            {0,22,131,153},
    226            4,
    227            100,
    228            101,
    229            0,
    230          
    231          //  0x00000001 - Выровнять по правому краю
    232          //  0x00000002 - Выровнять по центру
    233          //  0x00000004 - Инверсия знакомест
    234          //  0x00000008 - UnderLine
    235          //  0x00000020 - Не переносить слова
    236          //  0x00000200 - bold
    237            0,
    238          
    239          //  0x00000002 - ReadOnly
    240          //  0x00000004 - Не двигается курсор
    241          //  0x40000000 - Поменять местами софт-кнопки
    242            0x40000000
    243          };
    244          

   \                                 In segment CODE, align 4, keep-with-next
    245          void Disp_JID_Enter_Dialog(CLIST* ClEx)
    246          {
   \                     Disp_JID_Enter_Dialog:
   \   00000000   F04F2DE9           PUSH     {R4-R11,LR}
    247            //mode 0=edit; 1=add;
    248            jid_set.jid_del=NULL;
   \   00000004   B0739FE5           LDR      R7,??Disp_JID_Enter_Dialog_0+0x4  ;; jed1_desc
   \   00000008   2CD04DE2           SUB      SP,SP,#+44
   \   0000000C   0060A0E3           MOV      R6,#+0
    249            jid_set.jid_ask=NULL;  
   \   00000010   B065C7E1           STRH     R6,[R7, #+80]
    250            char *jid = "";
   \   00000014   E7AF8FE2           ADR      R10,??Disp_JID_Enter_Dialog_0  ;; ""
   \   00000018   0A40A0E1           MOV      R4,R10
    251            char *name = "";
   \   0000001C   0A50A0E1           MOV      R5,R10
    252            char *group = "";
    253            if(ClEx)
   \   00000020   000050E3           CMP      R0,#+0
   \   00000024   0900000A           BEQ      ??Disp_JID_Enter_Dialog_1
    254            {
    255            jid_set.jid_add=1;
   \   00000028   0110A0E3           MOV      R1,#+1
   \   0000002C   5210C7E5           STRB     R1,[R7, #+82]
    256            jid = ClEx->JID;
   \   00000030   004090E5           LDR      R4,[R0, #+0]
    257            name = ClEx->name;
   \   00000034   105090E5           LDR      R5,[R0, #+16]
    258            if(ClEx->group!=0) group = GetGroupNameByID(ClEx->group); //0я группа виртуальная, непоказываем
   \   00000038   1600D0E5           LDRB     R0,[R0, #+22]
   \   0000003C   000050E3           CMP      R0,#+0
   \   00000040   0300000A           BEQ      ??Disp_JID_Enter_Dialog_2
   \   00000044   ........           _BLF     GetGroupNameByID,??GetGroupNameByID??rA
   \   00000048   00A0A0E1           MOV      R10,R0
   \   0000004C   000000EA           B        ??Disp_JID_Enter_Dialog_2
    259            }
    260            else
    261            {
    262            jid_set.jid_add=NULL;    
   \                     ??Disp_JID_Enter_Dialog_1:
   \   00000050   5260C7E5           STRB     R6,[R7, #+82]
    263            }
    264            
    265            void *ma=malloc_adr();
    266          
    267            void *eq;
    268            EDITCONTROL ec;
    269            jews=AllocWS(256);
    270            eq=AllocEQueue(ma,mfree_adr());
    271            
    272            PrepareEditControl(&ec);
    273            ascii2ws(jews, "JID:");
   \                     ??Disp_JID_Enter_Dialog_2:
   \   00000054   64B39FE5           LDR      R11,??Disp_JID_Enter_Dialog_0+0x8  ;; `?<Constant "JID:">`
   \   00000058   148000EF           SWI      +32788
   \   0000005C   0080A0E1           MOV      R8,R0
   \   00000060   400FA0E3           MOV      R0,#+256
   \   00000064   250100EF           SWI      +293
   \   00000068   4C0087E5           STR      R0,[R7, #+76]
   \   0000006C   158000EF           SWI      +32789
   \   00000070   0010A0E1           MOV      R1,R0
   \   00000074   0800A0E1           MOV      R0,R8
   \   00000078   630100EF           SWI      +355
   \   0000007C   0090A0E1           MOV      R9,R0
   \   00000080   0D00A0E1           MOV      R0,SP
   \   00000084   640100EF           SWI      +356
   \   00000088   4C0097E5           LDR      R0,[R7, #+76]
   \   0000008C   0B10A0E1           MOV      R1,R11
   \   00000090   ........           _BLF     ascii2ws,??ascii2ws??rA
    274            ConstructEditControl(&ec,1,ECF_APPEND_EOL,jews,256);
   \   00000094   400FA0E3           MOV      R0,#+256
   \   00000098   01002DE9           PUSH     {R0}
   \   0000009C   4C3097E5           LDR      R3,[R7, #+76]
   \   000000A0   4020A0E3           MOV      R2,#+64
   \   000000A4   0110A0E3           MOV      R1,#+1
   \   000000A8   04008DE2           ADD      R0,SP,#+4
   \   000000AC   650100EF           SWI      +357
    275            AddEditControlToEditQend(eq,&ec,ma);
   \   000000B0   0820A0E1           MOV      R2,R8
   \   000000B4   04108DE2           ADD      R1,SP,#+4
   \   000000B8   0900A0E1           MOV      R0,R9
   \   000000BC   660100EF           SWI      +358
    276          
    277            PrepareEditControl(&ec);
   \   000000C0   04008DE2           ADD      R0,SP,#+4
   \   000000C4   640100EF           SWI      +356
    278            utf8_2ws(jews, jid, 64);
   \   000000C8   4C0097E5           LDR      R0,[R7, #+76]
   \   000000CC   4020A0E3           MOV      R2,#+64
   \   000000D0   0410A0E1           MOV      R1,R4
   \   000000D4   E30100EF           SWI      +483
    279            if(jid_set.jid_add)ConstructEditControl(&ec,1,ECF_APPEND_EOL,jews,128);//2 если меняем контакт ЖИД недаем изменить
   \   000000D8   5200D7E5           LDRB     R0,[R7, #+82]
   \   000000DC   04D08DE2           ADD      SP,SP,#+4
   \   000000E0   4020A0E3           MOV      R2,#+64
   \   000000E4   000050E3           CMP      R0,#+0
   \   000000E8   8000A0E3           MOV      R0,#+128
   \   000000EC   01002DE9           PUSH     {R0}
   \   000000F0   4C3097E5           LDR      R3,[R7, #+76]
   \   000000F4   0110A013           MOVNE    R1,#+1
    280             else ConstructEditControl(&ec,3,ECF_APPEND_EOL,jews,128);//2
   \   000000F8   0310A003           MOVEQ    R1,#+3
   \   000000FC   04008DE2           ADD      R0,SP,#+4
   \   00000100   650100EF           SWI      +357
   \   00000104   04D08DE2           ADD      SP,SP,#+4
    281            AddEditControlToEditQend(eq,&ec,ma);  
   \   00000108   0820A0E1           MOV      R2,R8
   \   0000010C   0D10A0E1           MOV      R1,SP
   \   00000110   0900A0E1           MOV      R0,R9
   \   00000114   660100EF           SWI      +358
    282          
    283            PrepareEditControl(&ec);
   \   00000118   0D00A0E1           MOV      R0,SP
   \   0000011C   640100EF           SWI      +356
    284            ascii2ws(jews, LG_NICK);
   \   00000120   4C0097E5           LDR      R0,[R7, #+76]
   \   00000124   08108BE2           ADD      R1,R11,#+8
   \   00000128   ........           _BLF     ascii2ws,??ascii2ws??rA
    285            ConstructEditControl(&ec,1,ECF_APPEND_EOL,jews,256);
   \   0000012C   400FA0E3           MOV      R0,#+256
   \   00000130   01002DE9           PUSH     {R0}
   \   00000134   4C3097E5           LDR      R3,[R7, #+76]
   \   00000138   4020A0E3           MOV      R2,#+64
   \   0000013C   0110A0E3           MOV      R1,#+1
   \   00000140   04008DE2           ADD      R0,SP,#+4
   \   00000144   650100EF           SWI      +357
    286            AddEditControlToEditQend(eq,&ec,ma);  
   \   00000148   0820A0E1           MOV      R2,R8
   \   0000014C   04108DE2           ADD      R1,SP,#+4
   \   00000150   0900A0E1           MOV      R0,R9
   \   00000154   660100EF           SWI      +358
    287          
    288            PrepareEditControl(&ec);
   \   00000158   04008DE2           ADD      R0,SP,#+4
   \   0000015C   640100EF           SWI      +356
    289            utf8_2ws(jews, name, 64);
   \   00000160   4C0097E5           LDR      R0,[R7, #+76]
   \   00000164   4020A0E3           MOV      R2,#+64
   \   00000168   0510A0E1           MOV      R1,R5
   \   0000016C   E30100EF           SWI      +483
    290            ConstructEditControl(&ec,3,ECF_APPEND_EOL,jews,80);     // 4
   \   00000170   5000A0E3           MOV      R0,#+80
   \   00000174   01002DE9           PUSH     {R0}
   \   00000178   4C3097E5           LDR      R3,[R7, #+76]
   \   0000017C   4020A0E3           MOV      R2,#+64
   \   00000180   0310A0E3           MOV      R1,#+3
   \   00000184   08008DE2           ADD      R0,SP,#+8
   \   00000188   650100EF           SWI      +357
    291            AddEditControlToEditQend(eq,&ec,ma);  
   \   0000018C   0820A0E1           MOV      R2,R8
   \   00000190   08108DE2           ADD      R1,SP,#+8
   \   00000194   0900A0E1           MOV      R0,R9
   \   00000198   660100EF           SWI      +358
    292            
    293            PrepareEditControl(&ec);
   \   0000019C   08008DE2           ADD      R0,SP,#+8
   \   000001A0   640100EF           SWI      +356
    294            ascii2ws(jews, LG_JEGROUP);
   \   000001A4   4C0097E5           LDR      R0,[R7, #+76]
   \   000001A8   10108BE2           ADD      R1,R11,#+16
   \   000001AC   ........           _BLF     ascii2ws,??ascii2ws??rA
    295            ConstructEditControl(&ec,1,ECF_APPEND_EOL,jews,256);      
   \   000001B0   400FA0E3           MOV      R0,#+256
   \   000001B4   01002DE9           PUSH     {R0}
   \   000001B8   4C3097E5           LDR      R3,[R7, #+76]
   \   000001BC   4020A0E3           MOV      R2,#+64
   \   000001C0   0110A0E3           MOV      R1,#+1
   \   000001C4   0C008DE2           ADD      R0,SP,#+12
   \   000001C8   650100EF           SWI      +357
    296            AddEditControlToEditQend(eq,&ec,ma);  
   \   000001CC   0820A0E1           MOV      R2,R8
   \   000001D0   0C108DE2           ADD      R1,SP,#+12
   \   000001D4   0900A0E1           MOV      R0,R9
   \   000001D8   660100EF           SWI      +358
    297          
    298            PrepareEditControl(&ec);
   \   000001DC   0C008DE2           ADD      R0,SP,#+12
   \   000001E0   640100EF           SWI      +356
    299            utf8_2ws(jews, group, 64);
   \   000001E4   4C0097E5           LDR      R0,[R7, #+76]
   \   000001E8   4020A0E3           MOV      R2,#+64
   \   000001EC   0A10A0E1           MOV      R1,R10
   \   000001F0   E30100EF           SWI      +483
    300            ConstructEditControl(&ec,3,ECF_APPEND_EOL,jews,80);    //6
   \   000001F4   5000A0E3           MOV      R0,#+80
   \   000001F8   01002DE9           PUSH     {R0}
   \   000001FC   4C3097E5           LDR      R3,[R7, #+76]
   \   00000200   4020A0E3           MOV      R2,#+64
   \   00000204   0310A0E3           MOV      R1,#+3
   \   00000208   10008DE2           ADD      R0,SP,#+16
   \   0000020C   650100EF           SWI      +357
    301            AddEditControlToEditQend(eq,&ec,ma);
   \   00000210   0820A0E1           MOV      R2,R8
   \   00000214   10108DE2           ADD      R1,SP,#+16
   \   00000218   0900A0E1           MOV      R0,R9
   \   0000021C   660100EF           SWI      +358
    302          
    303            PrepareEditControl(&ec);
   \   00000220   10008DE2           ADD      R0,SP,#+16
   \   00000224   640100EF           SWI      +356
    304            if (!jid_set.jid_add)
   \   00000228   5200D7E5           LDRB     R0,[R7, #+82]
   \   0000022C   1740A0E3           MOV      R4,#+23
   \   00000230   E14C84E3           ORR      R4,R4,#0xE100
   \   00000234   0150C4E3           BIC      R5,R4,#0x1
   \   00000238   000050E3           CMP      R0,#+0
   \   0000023C   10D08DE2           ADD      SP,SP,#+16
   \   00000240   1400001A           BNE      ??Disp_JID_Enter_Dialog_3
    305            {
    306              ascii2ws(jews, LG_JEASK);
   \   00000244   4C0097E5           LDR      R0,[R7, #+76]
   \   00000248   18108BE2           ADD      R1,R11,#+24
   \   0000024C   ........           _BLF     ascii2ws,??ascii2ws??rA
    307              ConstructEditControl(&ec,1,ECF_APPEND_EOL,jews,256);      
   \   00000250   400FA0E3           MOV      R0,#+256
   \   00000254   01002DE9           PUSH     {R0}
   \   00000258   4C3097E5           LDR      R3,[R7, #+76]
   \   0000025C   4020A0E3           MOV      R2,#+64
   \   00000260   0110A0E3           MOV      R1,#+1
   \   00000264   04008DE2           ADD      R0,SP,#+4
   \   00000268   650100EF           SWI      +357
    308              AddEditControlToEditQend(eq,&ec,ma);
   \   0000026C   0820A0E1           MOV      R2,R8
   \   00000270   04108DE2           ADD      R1,SP,#+4
   \   00000274   0900A0E1           MOV      R0,R9
   \   00000278   660100EF           SWI      +358
    309          
    310              PrepareEditControl(&ec);
   \   0000027C   04008DE2           ADD      R0,SP,#+4
   \   00000280   640100EF           SWI      +356
    311              CutWSTR(jews, 0);
   \   00000284   4C0097E5           LDR      R0,[R7, #+76]
   \   00000288   0010A0E3           MOV      R1,#+0
   \   0000028C   260100EF           SWI      +294
    312              wsAppendChar(jews, jid_set.jid_ask?CBOX_CHECKED:CBOX_UNCHECKED);
   \   00000290   5000D7E5           LDRB     R0,[R7, #+80]
   \   00000294   130000EA           B        ??Disp_JID_Enter_Dialog_4
    313              ConstructEditControl(&ec,ECT_LINK,ECF_APPEND_EOL,jews,jews->wsbody[0]); //8
    314            }
    315            else
    316            {
    317              ascii2ws(jews, LG_JEDELCONTACT);
   \                     ??Disp_JID_Enter_Dialog_3:
   \   00000298   4C0097E5           LDR      R0,[R7, #+76]
   \   0000029C   2C108BE2           ADD      R1,R11,#+44
   \   000002A0   ........           _BLF     ascii2ws,??ascii2ws??rA
    318              ConstructEditControl(&ec,1,ECF_APPEND_EOL,jews,256);      
   \   000002A4   400FA0E3           MOV      R0,#+256
   \   000002A8   01002DE9           PUSH     {R0}
   \   000002AC   4C3097E5           LDR      R3,[R7, #+76]
   \   000002B0   4020A0E3           MOV      R2,#+64
   \   000002B4   0110A0E3           MOV      R1,#+1
   \   000002B8   04008DE2           ADD      R0,SP,#+4
   \   000002BC   650100EF           SWI      +357
    319              AddEditControlToEditQend(eq,&ec,ma);
   \   000002C0   0820A0E1           MOV      R2,R8
   \   000002C4   04108DE2           ADD      R1,SP,#+4
   \   000002C8   0900A0E1           MOV      R0,R9
   \   000002CC   660100EF           SWI      +358
    320          
    321            PrepareEditControl(&ec);
   \   000002D0   04008DE2           ADD      R0,SP,#+4
   \   000002D4   640100EF           SWI      +356
    322            CutWSTR(jews, 0);
   \   000002D8   4C0097E5           LDR      R0,[R7, #+76]
   \   000002DC   0010A0E3           MOV      R1,#+0
   \   000002E0   260100EF           SWI      +294
    323            wsAppendChar(jews, jid_set.jid_del?CBOX_CHECKED:CBOX_UNCHECKED);
   \   000002E4   5100D7E5           LDRB     R0,[R7, #+81]
   \                     ??Disp_JID_Enter_Dialog_4:
   \   000002E8   04D08DE2           ADD      SP,SP,#+4
   \   000002EC   000050E3           CMP      R0,#+0
   \   000002F0   4C0097E5           LDR      R0,[R7, #+76]
   \   000002F4   0540A011           MOVNE    R4,R5
   \   000002F8   0410A0E1           MOV      R1,R4
   \   000002FC   1C0000EF           SWI      +28
    324            ConstructEditControl(&ec,ECT_LINK,ECF_APPEND_EOL,jews,jews->wsbody[0]); //8
   \   00000300   4C3097E5           LDR      R3,[R7, #+76]
   \   00000304   4020A0E3           MOV      R2,#+64
   \   00000308   000093E5           LDR      R0,[R3, #+0]
   \   0000030C   0910A0E3           MOV      R1,#+9
   \   00000310   B000D0E1           LDRH     R0,[R0, #+0]
   \   00000314   01002DE9           PUSH     {R0}
   \   00000318   04008DE2           ADD      R0,SP,#+4
   \   0000031C   650100EF           SWI      +357
   \   00000320   04D08DE2           ADD      SP,SP,#+4
    325            }
    326            AddEditControlToEditQend(eq,&ec,ma); 
   \   00000324   0820A0E1           MOV      R2,R8
   \   00000328   0D10A0E1           MOV      R1,SP
   \   0000032C   0900A0E1           MOV      R0,R9
   \   00000330   660100EF           SWI      +358
    327            GRLIST_STRUCT *gr_str=malloc(sizeof(GRLIST_STRUCT));
   \   00000334   0800A0E3           MOV      R0,#+8
   \   00000338   140000EF           SWI      +20
   \   0000033C   0040A0E1           MOV      R4,R0
    328            patch_input(&jed1_desc);
   \   00000340   B861C7E1           STRH     R6,[R7, #+24]
   \   00000344   8A8100EF           SWI      +33162
   \   00000348   190080E2           ADD      R0,R0,#+25
   \   0000034C   BA01C7E1           STRH     R0,[R7, #+26]
   \   00000350   888100EF           SWI      +33160
   \   00000354   010040E2           SUB      R0,R0,#+1
   \   00000358   BC01C7E1           STRH     R0,[R7, #+28]
   \   0000035C   898100EF           SWI      +33161
   \   00000360   0050A0E1           MOV      R5,R0
   \   00000364   8B8100EF           SWI      +33163
   \   00000368   000045E0           SUB      R0,R5,R0
   \   0000036C   010040E2           SUB      R0,R0,#+1
   \   00000370   BE01C7E1           STRH     R0,[R7, #+30]
    329            patch_header(&jed1_hdr);
   \   00000374   B863C7E1           STRH     R6,[R7, #+56]
   \   00000378   1800A0E3           MOV      R0,#+24
   \   0000037C   BA03C7E1           STRH     R0,[R7, #+58]
   \   00000380   888100EF           SWI      +33160
   \   00000384   010040E2           SUB      R0,R0,#+1
   \   00000388   BC03C7E1           STRH     R0,[R7, #+60]
   \   0000038C   8A8100EF           SWI      +33162
   \   00000390   180080E2           ADD      R0,R0,#+24
   \   00000394   BE03C7E1           STRH     R0,[R7, #+62]
    330            CreateInputTextDialog(&jed1_desc,&jed1_hdr,eq,1,gr_str);
   \   00000398   10002DE9           PUSH     {R4}
   \   0000039C   0130A0E3           MOV      R3,#+1
   \   000003A0   0920A0E1           MOV      R2,R9
   \   000003A4   381087E2           ADD      R1,R7,#+56
   \   000003A8   0700A0E1           MOV      R0,R7
   \   000003AC   670100EF           SWI      +359
    331          }
   \   000003B0   30D08DE2           ADD      SP,SP,#+48
   \   000003B4   F08FBDE8           POP      {R4-R11,PC}      ;; return
   \                     ??Disp_JID_Enter_Dialog_0:
   \   000003B8   00000000           DC8      "",+0,+0,+0
   \   000003BC   ........           DC32     jed1_desc
   \   000003C0   ........           DC32     `?<Constant "JID:">`

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable1:
   \   00000000   ........           DC32     jed1_desc

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for jid_menu_sk>`:
   \   00000000   18000000           DC16 24, 0
   \   00000004   ........           DC32 `?<Constant "\\302\\373\\341\\356\\360">`
   \   00000008   01000000           DC16 1, 0
   \   0000000C   ........           DC32 `?<Constant "\\315\\340\\347\\340\\344">`
   \   00000010   3D000000           DC16 61, 0
   \   00000014   FBC0FF7F           DC32 2147467515

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for jid_menu_skt>`:
   \   00000000   ........0000       DC32 jid_menu_sk, 0
   \              0000        

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for jed1_desc>`:
   \   00000000   01000000....       DC32 1, jed1_onkey, jed1_ghook, jed1_locret, 0, jid_menu_skt
   \              ............
   \              ........0000
   \              0000........
   \   00000018   000016008300       DC16 0, 22, 131, 153
   \              9900        
   \   00000020   040000006400       DC32 4, 100, 101, 0, 0, 1073741824
   \              000065000000
   \              000000000000
   \              000000000040
   \                     `?<Initializer for jed1_hdr>`:
   \   00000038   000000008300       DC16 0, 0, 131, 21
   \              1500        
   \   00000040   00000000....       DC32 0H, `?<Constant "\\312\\356\\355\\362\\340\\352\\362:">`
   \              ....        
   \   00000048   FFFFFF7F           DC32 2147483647
   \                     `?<Initializer for jews>`:
   \   0000004C   00000000           DC8 0, 0, 0, 0
   \                     `?<Initializer for jid_set>`:
   \   00000050   000000             DC8 0, 0, 0
   \                     `?<Initializer for jTerminate>`:
   \   00000053   00                 DC8 0
   \                     `?<Initializer for mmmmsk>`:
   \   00000054   18000000           DC16 24, 0
   \   00000058   ........           DC32 `?<Constant "OK">`

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "\\302\\373\\341\\356\\360">`:
   \   00000000   C2FBE1EEF000       DC8 "\302\373\341\356\360"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "\\315\\340\\347\\340\\344">`:
   \   00000000   CDE0E7E0E400       DC8 "\315\340\347\340\344"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "\\312\\356\\355\\362\\340\\352\\362:">`:
   \   00000000   CAEEEDF2E0EA       DC8 "\312\356\355\362\340\352\362:"
   \              F23A00      
   \   00000009   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "roster3">`:
   \   00000000   726F73746572       DC8 "roster3"
   \              3300        
   \   00000008   3C6974656D20       DC8 "<item jid='%s' subscription='remove'/>"
   \              6A69643D2725
   \              732720737562
   \              736372697074
   \              696F6E3D2772
   \              656D6F766527
   \              2F3E00      
   \   0000002F   00                 DC8 0
   \   00000030   3C6974656D20       DC8 "<item jid='%s'"
   \              6A69643D2725
   \              732700      
   \   0000003F   00                 DC8 0
   \   00000040   2573206E616D       DC8 "%s name='%s'"
   \              653D27257327
   \              00          
   \   0000004D   000000             DC8 0, 0, 0
   \   00000050   25733E3C6772       DC8 "%s><group>%s</group></item>"
   \              6F75703E2573
   \              3C2F67726F75
   \              703E3C2F6974
   \              656D3E00    
   \   0000006C   6A6162626572       DC8 "jabber:iq:roster"
   \              3A69713A726F
   \              7374657200  
   \   0000007D   000000             DC8 0, 0, 0
   \   00000080   CDE5F2204A49       DC8 "\315\345\362 JID\340!"
   \              44E02100    
   \   0000008A   0000               DC8 0, 0

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   2F3E00             DC8 "/>"

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   73657400           DC8 "set"

   \                                 In segment DATA_C, align 1, align-sorted
   \                     `?<Constant "OK">`:
   \   00000000   4F4B00             DC8 "OK"

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   00                 DC8 ""

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "JID:">`:
   \   00000000   4A49443A00         DC8 "JID:"
   \   00000005   000000             DC8 0, 0, 0
   \   00000008   CDE8EA3A00         DC8 "\315\350\352:"
   \   0000000D   000000             DC8 0, 0, 0
   \   00000010   C3F0F3EFEFE0       DC8 "\303\360\363\357\357\340:"
   \              3A00        
   \   00000018   C7E0EFF0EEF1       DC8 "\307\340\357\360\356\361\350\362\374 \357\356\344\357\350\361\352\363:"
   \              E8F2FC20EFEE
   \              E4EFE8F1EAF3
   \              3A00        
   \   0000002C   D3E4E0EBE8F2       DC8 "\323\344\340\353\350\362\374 \352\356\355\362\340\352\362:"
   \              FC20EAEEEDF2
   \              E0EAF23A00  
   \   0000003D   000000             DC8 0, 0, 0
    332          
    333          //EOL,EOF

   Maximum stack usage in bytes:

     Function              CSTACK
     --------              ------
     Disp_JID_Enter_Dialog    96
     ed_grouplist_handler     16
     jed1_ghook              488
     jed1_locret               0
     jed1_onkey               16


   Segment part sizes:

     Function/Label                 Bytes
     --------------                 -----
     jid_menu_sk                      24
     jid_menu_skt                      8
     ed_grouplist_handler            172
     jed1_onkey                      284
     jed1_ghook                      700
     jed1_locret                       4
     jed1_desc                        92
     Disp_JID_Enter_Dialog           964
     ??DataTable1                      4
     ?<Initializer for jid_menu_sk>   24
     ?<Initializer for jid_menu_skt>
                                       8
     ?<Initializer for jed1_desc>     92
     ?<Constant "\302\373\341\356\360">
                                       8
     ?<Constant "\315\340\347\340\344">
                                       8
     ?<Constant "\312\356\355\362\340\352\362:">
                                      12
     ?<Constant "roster3">           140
     ?<Constant "/>">                  3
     ?<Constant "set">                 4
     ?<Constant "OK">                  3
     ?<Constant "">                    1
     ?<Constant "JID:">               64
      Others                         128

 
 2 244 bytes in segment CODE
   243 bytes in segment DATA_C
   124 bytes in segment DATA_I
   124 bytes in segment DATA_ID
    12 bytes in segment INITTAB
 
 2 128 bytes of CODE  memory (+ 128 bytes shared)
   367 bytes of CONST memory
   124 bytes of DATA  memory

Errors: none
Warnings: none
