##############################################################################
#                                                                            #
# IAR ARM ANSI C/C++ Compiler V4.42A/W32 EVALUATION    15/Feb/2011  01:38:31 #
# Copyright 1999-2005 IAR Systems. All rights reserved.                      #
#                                                                            #
#    Cpu mode        =  interwork                                            #
#    Endian          =  little                                               #
#    Stack alignment =  4                                                    #
#    Source file     =  C:\arm\SieJC_BR\cont_menu.c                          #
#    Command line    =  C:\arm\SieJC_BR\cont_menu.c -D NEWSGOLD -D ELKA      #
#                       --preprocess C:\arm\SieJC_BR\Release_ELKA\List\ -lC  #
#                       C:\arm\SieJC_BR\Release_ELKA\List\ -o                #
#                       C:\arm\SieJC_BR\Release_ELKA\Obj\ -s9 --no_unroll    #
#                       --cpu_mode arm --endian little --cpu ARM926EJ-S      #
#                       --stack_align 4 --interwork -e --fpu None            #
#                       --dlib_config "C:\arm2\Embedded Workbench 4.0        #
#                       Evaluation\ARM\LIB\dl5tpainl8n.h" -I                 #
#                       "C:\arm2\Embedded Workbench 4.0                      #
#                       Evaluation\ARM\INC\" --inline_threshold=2            #
#    List file       =  C:\arm\SieJC_BR\Release_ELKA\List\cont_menu.lst      #
#    Object file     =  C:\arm\SieJC_BR\Release_ELKA\Obj\cont_menu.r79       #
#                                                                            #
#                                                                            #
##############################################################################

C:\arm\SieJC_BR\cont_menu.c
      1          #include "../inc/swilib.h"
      2          #include "main.h"
      3          #include "clist_util.h"
      4          #include "jabber_util.h"
      5          #include "string_util.h"
      6          #include "JID_Enter_UI.h"
      7          #include "vCard.h"
      8          #include "lang.h"
      9          #include "rect_patcher.h"
     10          
     11          char *room_name;
     12          char *room_jid;
     13          MUC_ADMIN macmd;
     14          int reason_pos;
     15          extern void ConstructReasonDlg(char *name, char *jid, MUC_ADMIN muccmd);
     16          
     17          #define MAX_ITEMS 12       // Максимальное количество пунктов меню
     18          
     19          #define MI_CONF_LEAVE       1
     20          #define MI_QUERY_VERSION    2
     21          #define MI_LOGIN_LOGOUT     3
     22          #define MI_DISCO_QUERY      4
     23          #define MI_HISTORY_OPEN     5
     24          #define MI_TIME_QUERY       6
     25          #define MI_VCARD_QUERY      7
     26          #define MI_MUC_ADMIN        8
     27          #define MI_LASTACTIV_QUERY  9
     28          #define MI_SUBSCRIBES_MENU  10
     29          #define MI_CHANGECONTACT_VERSION  11
     30          #define MI_CONF_CLEAR       12
     31          char Menu_Contents[MAX_ITEMS-1];
     32          int cmS_ICONS[MAX_ITEMS+1];
     33          
     34          
     35          int Contact_MenuID;
     36          int Req_Close_Cont_Menu=0;

   \                                 In segment DATA_C, align 4, align-sorted
     37          const char contmenu_header[]=LG_MENUCONTACT;
   \                     contmenu_header:
   \   00000000   CCE5EDFE20EA       DC8 "\314\345\355\376 \352\356\355\362\340\352\362\340"
   \              EEEDF2E0EAF2
   \              E000        
   \   0000000E   0000               DC8 0, 0
     38          int menusoftkeys[]={0,1,2};
     39          HEADER_DESC contact_menuhdr={0,0,0,0,NULL,(int)contmenu_header,LGP_NULL};
     40          SOFTKEY_DESC clmenu_sk[]=
     41          {
     42            {0x0018,0x0000,(int)LG_SELECT},
     43            {0x0001,0x0000,(int)LG_BACK},
     44            {0x003D,0x0000,(int)LGP_DOIT_PIC}
     45          };
     46          
     47          SOFTKEYSTAB clmenu_skt=
     48          {
     49            clmenu_sk,0
     50          };
     51          
     52          
     53          void contact_menu_ghook(void *data, int cmd);
     54          int contact_menu_onkey(void *data, GUI_MSG *msg);
     55          void contact_menu_iconhndl(void *data, int curitem, void *unk);
     56          
     57          MENU_DESC contact_menu=
     58          {
     59            8,contact_menu_onkey,contact_menu_ghook,NULL,
     60            menusoftkeys,
     61            &clmenu_skt,
     62            0x11,
     63            contact_menu_iconhndl,
     64            NULL,   //Items
     65            NULL,   //Procs
     66            0   //n
     67          };
     68          
     69          //////////////////////// Menu "muc#admin" ///////////////////////////
     70          #define MAX_MUC_ADMIN_ITEMS 10
     71          
     72          #define MA_CONF_KICK_THIS   1
     73          #define MA_CONF_BAN_THIS    2
     74          #define MA_CONF_VREJ_THIS   3
     75          #define MA_CONF_VGR_THIS    4
     76          #define MA_CONF_PARTICIPANT 5
     77          #define MA_CONF_MEMBER      6
     78          #define MA_CONF_MODERATOR   7
     79          #define MA_CONF_MGR         8
     80          #define MA_CONF_ADMIN       9
     81          #define MA_CONF_OWNER       10
     82          
     83          char MA_Menu_Contents[MAX_MUC_ADMIN_ITEMS-1];

   \                                 In segment DATA_C, align 4, align-sorted
     84          const char ma_menu_header[]=LG_MUC_ADMIN;
   \                     ma_menu_header:
   \   00000000   6D7563236164       DC8 "muc#admin"
   \              6D696E00    
   \   0000000A   0000               DC8 0, 0
     85          int mamenusoftkeys[]={0,1,2};
     86          HEADER_DESC ma_menuhdr={0,0,0,0,NULL,(int)ma_menu_header,LGP_NULL};
     87          SOFTKEY_DESC ma_menu_sk[]=
     88          {
     89            {0x0018,0x0000,(int)LG_SELECT},
     90            {0x0001,0x0000,(int)LG_BACK},
     91            {0x003D,0x0000,(int)LGP_DOIT_PIC}
     92          };
     93          
     94          SOFTKEYSTAB ma_menu_skt=
     95          {
     96            ma_menu_sk,0
     97          };
     98          
     99          void ma_menu_ghook(void *data, int cmd);
    100          int ma_menu_onkey(void *data, GUI_MSG *msg);
    101          void ma_menu_iconhndl(void *data, int curitem, void *unk);
    102          
    103          MENU_DESC ma_menu=
    104          {
    105            8,ma_menu_onkey,ma_menu_ghook,NULL,
    106            mamenusoftkeys,
    107            &ma_menu_skt,
    108            0x10, // 0x11 если надо меню с иконками
    109            ma_menu_iconhndl,
    110            NULL,   //Items
    111            NULL,   //Procs
    112            0   //n
    113          };
    114          

   \                                 In segment CODE, align 4, keep-with-next
    115          void InitMAMenuArray()
    116          {
    117            for(int i=0;i<MAX_MUC_ADMIN_ITEMS;i++)MA_Menu_Contents[i]=0;
   \                     InitMAMenuArray:
   \   00000000   0000A0E3           MOV      R0,#+0
   \   00000004   0020A0E3           MOV      R2,#+0
   \                     ??InitMAMenuArray_0:
   \   00000008   ........           LDR      R1,??DataTable10  ;; ma_menuhdr
   \   0000000C   011080E0           ADD      R1,R0,R1
   \   00000010   1420C1E5           STRB     R2,[R1, #+20]
   \   00000014   010080E2           ADD      R0,R0,#+1
   \   00000018   0A0050E3           CMP      R0,#+10
   \   0000001C   F9FFFFBA           BLT      ??InitMAMenuArray_0
    118          }
   \   00000020   1EFF2FE1           BX       LR               ;; return
    119          

   \                                 In segment CODE, align 4, keep-with-next
    120          void Disp_MA_Menu()
    121          {
   \                     Disp_MA_Menu:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
    122            TRESOURCE *Act_contact = CList_GetActiveContact();
    123            InitMAMenuArray();
    124            int n_items=0;
    125            //Определяем, каие будут пункты в меню меню muc#admin для текущего контакта
    126          
    127          TRESOURCE* MYMUCRES = CList_IsResourceInList(CList_FindMUCByJID(CList_FindContactByJID(Act_contact->full_name)->JID)->conf_jid);
    128          //MYMUCRES->muc_privs.role); //Вот наша роль
    129          //MYMUCRES->muc_privs.aff); //Вот наша афилатион
    130          //да извратно, но почемуто работает
    131          if (MYMUCRES->muc_privs.aff<AFFILIATION_ADMIN) //Если мы мембер-модератор или ноне-модератор, а текущий контакт не модератор(это мы раньше проверяли, когда думали, отображать ли muc#admin)
   \   00000004   F8519FE5           LDR      R5,??Disp_MA_Menu_0  ;; ma_menuhdr
   \   00000008   0040A0E3           MOV      R4,#+0
   \   0000000C   ........           _BLF     CList_GetActiveContact,??CList_GetActiveContact??rA
   \   00000010   0060A0E1           MOV      R6,R0
   \   00000014   ........           BL       InitMAMenuArray
   \   00000018   040096E5           LDR      R0,[R6, #+4]
   \   0000001C   ........           _BLF     CList_FindContactByJID,??CList_FindContactByJID??rA
   \   00000020   000090E5           LDR      R0,[R0, #+0]
   \   00000024   ........           _BLF     CList_FindMUCByJID,??CList_FindMUCByJID??rA
   \   00000028   000090E5           LDR      R0,[R0, #+0]
   \   0000002C   ........           _BLF     CList_IsResourceInList,??CList_IsResourceInList??rA
   \   00000030   20C0D0E5           LDRB     R12,[R0, #+32]
   \   00000034   0130A0E3           MOV      R3,#+1
   \   00000038   0310A0E3           MOV      R1,#+3
   \   0000003C   0420A0E3           MOV      R2,#+4
   \   00000040   03005CE3           CMP      R12,#+3
   \   00000044   0600002A           BCS      ??Disp_MA_Menu_1
    132            {
    133             MA_Menu_Contents[n_items++]=MA_CONF_KICK_THIS; //кикать мы можем всех, кто прошел через условия
   \   00000048   1430C5E5           STRB     R3,[R5, #+20]
    134            if(Act_contact->muc_privs.role==ROLE_VISITOR) // если текущий контакт визитор, ему можно давать голос
   \   0000004C   2100D6E5           LDRB     R0,[R6, #+33]
    135            {
    136                 MA_Menu_Contents[n_items++]=MA_CONF_VGR_THIS;    
   \   00000050   0240A0E3           MOV      R4,#+2
   \   00000054   010050E3           CMP      R0,#+1
   \   00000058   1510C515           STRBNE   R1,[R5, #+21]
   \   0000005C   1520C505           STRBEQ   R2,[R5, #+21]
   \   00000060   520000EA           B        ??Disp_MA_Menu_2
    137            }
    138            else  //иначе его можно сделать визитором
    139            {
    140                 MA_Menu_Contents[n_items++]=MA_CONF_VREJ_THIS;
    141            }
    142            //всё, на этом наши права закончились 
    143            }
    144          
    145            else
    146            {
    147            if(Act_contact->muc_privs.role!=ROLE_MODERATOR) //если текущий контакт не модератор, его можно кикать
   \                     ??Disp_MA_Menu_1:
   \   00000064   21C0D6E5           LDRB     R12,[R6, #+33]
   \   00000068   03005CE3           CMP      R12,#+3
    148            {
    149                 MA_Menu_Contents[n_items++]=MA_CONF_KICK_THIS; 
   \   0000006C   1430C515           STRBNE   R3,[R5, #+20]
    150            }
    151                 
    152            if(MYMUCRES->muc_privs.aff==AFFILIATION_OWNER||MYMUCRES->muc_privs.aff>Act_contact->muc_privs.aff)
   \   00000070   2030D0E5           LDRB     R3,[R0, #+32]
   \   00000074   0140A013           MOVNE    R4,#+1
   \   00000078   040053E3           CMP      R3,#+4
   \   0000007C   0200000A           BEQ      ??Disp_MA_Menu_3
   \   00000080   20C0D6E5           LDRB     R12,[R6, #+32]
   \   00000084   03005CE1           CMP      R12,R3
   \   00000088   0300002A           BCS      ??Disp_MA_Menu_4
    153            {
    154                MA_Menu_Contents[n_items++]=MA_CONF_BAN_THIS; // банить можно всех кто хуже нас по affiliation, или равны, если мы овнер
   \                     ??Disp_MA_Menu_3:
   \   0000008C   053084E0           ADD      R3,R4,R5
   \   00000090   02C0A0E3           MOV      R12,#+2
   \   00000094   14C0C3E5           STRB     R12,[R3, #+20]
   \   00000098   014084E2           ADD      R4,R4,#+1
    155            }
    156            
    157            if(Act_contact->muc_privs.role==ROLE_VISITOR) // если текущий контакт визитор, ему можно давать голос
   \                     ??Disp_MA_Menu_4:
   \   0000009C   21C0D6E5           LDRB     R12,[R6, #+33]
   \   000000A0   013084E2           ADD      R3,R4,#+1
   \   000000A4   01005CE3           CMP      R12,#+1
    158            {
    159                 MA_Menu_Contents[n_items++]=MA_CONF_VGR_THIS;    
   \   000000A8   05108400           ADDEQ    R1,R4,R5
   \   000000AC   1420C105           STRBEQ   R2,[R1, #+20]
   \   000000B0   0400000A           BEQ      ??Disp_MA_Menu_5
    160            }
    161            else if(Act_contact->muc_privs.aff<AFFILIATION_ADMIN) //если текущий контакт не визитор, не админ, и не овнер, его можно сделать визитором
   \   000000B4   2020D6E5           LDRB     R2,[R6, #+32]
   \   000000B8   030052E3           CMP      R2,#+3
   \   000000BC   0200002A           BCS      ??Disp_MA_Menu_6
    162            {
    163                 MA_Menu_Contents[n_items++]=MA_CONF_VREJ_THIS;
   \   000000C0   052084E0           ADD      R2,R4,R5
   \   000000C4   1410C2E5           STRB     R1,[R2, #+20]
   \                     ??Disp_MA_Menu_5:
   \   000000C8   0340A0E1           MOV      R4,R3
    164            }
    165            if(Act_contact->muc_privs.aff>AFFILIATION_NONE&&(MYMUCRES->muc_privs.aff>Act_contact->muc_privs.aff||MYMUCRES->muc_privs.aff==AFFILIATION_OWNER)) 
   \                     ??Disp_MA_Menu_6:
   \   000000CC   2010D6E5           LDRB     R1,[R6, #+32]
   \   000000D0   000051E3           CMP      R1,#+0
   \   000000D4   0800000A           BEQ      ??Disp_MA_Menu_7
   \   000000D8   2020D0E5           LDRB     R2,[R0, #+32]
   \   000000DC   020051E1           CMP      R1,R2
   \   000000E0   0100003A           BCC      ??Disp_MA_Menu_8
   \   000000E4   040052E3           CMP      R2,#+4
   \   000000E8   0300001A           BNE      ??Disp_MA_Menu_7
    166              //если контакт не none и хуже нас или если мы овнер, его можно делать мембером
    167            {
    168                 MA_Menu_Contents[n_items++]=MA_CONF_PARTICIPANT;
   \                     ??Disp_MA_Menu_8:
   \   000000EC   051084E0           ADD      R1,R4,R5
   \   000000F0   0520A0E3           MOV      R2,#+5
   \   000000F4   1420C1E5           STRB     R2,[R1, #+20]
   \   000000F8   014084E2           ADD      R4,R4,#+1
    169            }
    170            if(Act_contact->muc_privs.aff!=AFFILIATION_MEMBER&&(MYMUCRES->muc_privs.aff>Act_contact->muc_privs.aff||MYMUCRES->muc_privs.aff==AFFILIATION_OWNER)) 
   \                     ??Disp_MA_Menu_7:
   \   000000FC   2010D6E5           LDRB     R1,[R6, #+32]
   \   00000100   020051E3           CMP      R1,#+2
   \   00000104   0800000A           BEQ      ??Disp_MA_Menu_9
   \   00000108   2020D0E5           LDRB     R2,[R0, #+32]
   \   0000010C   020051E1           CMP      R1,R2
   \   00000110   0100003A           BCC      ??Disp_MA_Menu_10
   \   00000114   040052E3           CMP      R2,#+4
   \   00000118   0300001A           BNE      ??Disp_MA_Menu_9
    171              //если текущий контакт не мембер и хуже нас, его можно делать мембером (и админов с овнерами можно)
    172            {
    173                 MA_Menu_Contents[n_items++]=MA_CONF_MEMBER;
   \                     ??Disp_MA_Menu_10:
   \   0000011C   051084E0           ADD      R1,R4,R5
   \   00000120   0620A0E3           MOV      R2,#+6
   \   00000124   1420C1E5           STRB     R2,[R1, #+20]
   \   00000128   014084E2           ADD      R4,R4,#+1
    174            }
    175            if(Act_contact->muc_privs.role!=ROLE_MODERATOR) // если текущий не модератор, его можно делать модератором
   \                     ??Disp_MA_Menu_9:
   \   0000012C   2120D6E5           LDRB     R2,[R6, #+33]
   \   00000130   011084E2           ADD      R1,R4,#+1
   \   00000134   030052E3           CMP      R2,#+3
    176            {
    177                MA_Menu_Contents[n_items++]=MA_CONF_MODERATOR;
   \   00000138   05208410           ADDNE    R2,R4,R5
   \   0000013C   0730A013           MOVNE    R3,#+7
   \   00000140   0400001A           BNE      ??Disp_MA_Menu_11
    178            }
    179            else if(Act_contact->muc_privs.aff<AFFILIATION_ADMIN) // если текущий контакт модератор, но не админ или овнер, у него можно забирать модератора
   \   00000144   2020D6E5           LDRB     R2,[R6, #+32]
   \   00000148   030052E3           CMP      R2,#+3
   \   0000014C   0300002A           BCS      ??Disp_MA_Menu_12
    180            {
    181                MA_Menu_Contents[n_items++]=MA_CONF_MGR;
   \   00000150   052084E0           ADD      R2,R4,R5
   \   00000154   0830A0E3           MOV      R3,#+8
   \                     ??Disp_MA_Menu_11:
   \   00000158   1430C2E5           STRB     R3,[R2, #+20]
   \   0000015C   0140A0E1           MOV      R4,R1
    182            }
    183            if(Act_contact->muc_privs.aff!=AFFILIATION_ADMIN&&MYMUCRES->muc_privs.aff==AFFILIATION_OWNER) // если текущий контакт не админ а мы овнер, его можо делать админом
   \                     ??Disp_MA_Menu_12:
   \   00000160   2010D6E5           LDRB     R1,[R6, #+32]
   \   00000164   030051E3           CMP      R1,#+3
   \   00000168   0600000A           BEQ      ??Disp_MA_Menu_13
   \   0000016C   2010D0E5           LDRB     R1,[R0, #+32]
   \   00000170   040051E3           CMP      R1,#+4
   \   00000174   0300001A           BNE      ??Disp_MA_Menu_13
    184            {
    185                MA_Menu_Contents[n_items++]=MA_CONF_ADMIN;
   \   00000178   051084E0           ADD      R1,R4,R5
   \   0000017C   0920A0E3           MOV      R2,#+9
   \   00000180   1420C1E5           STRB     R2,[R1, #+20]
   \   00000184   014084E2           ADD      R4,R4,#+1
    186            }
    187            if(Act_contact->muc_privs.aff!=AFFILIATION_OWNER&&MYMUCRES->muc_privs.aff==AFFILIATION_OWNER) // если текущий контакт не овнер а мы овнер, его можно делать овнером
   \                     ??Disp_MA_Menu_13:
   \   00000188   2010D6E5           LDRB     R1,[R6, #+32]
   \   0000018C   040051E3           CMP      R1,#+4
   \   00000190   0600000A           BEQ      ??Disp_MA_Menu_2
   \   00000194   2000D0E5           LDRB     R0,[R0, #+32]
   \   00000198   040050E3           CMP      R0,#+4
   \   0000019C   0300001A           BNE      ??Disp_MA_Menu_2
    188            {
    189                MA_Menu_Contents[n_items++]=MA_CONF_OWNER; 
   \   000001A0   050084E0           ADD      R0,R4,R5
   \   000001A4   0A10A0E3           MOV      R1,#+10
   \   000001A8   1410C0E5           STRB     R1,[R0, #+20]
   \   000001AC   014084E2           ADD      R4,R4,#+1
    190            }
    191            }
    192            patch_rect(&ma_menuhdr.rc,0,YDISP,ScreenW()-1,HeaderH()+YDISP);
   \                     ??Disp_MA_Menu_2:
   \   000001B0   8A8100EF           SWI      +33162
   \   000001B4   0060A0E1           MOV      R6,R0
   \   000001B8   888100EF           SWI      +33160
   \   000001BC   181086E2           ADD      R1,R6,#+24
   \   000001C0   010040E2           SUB      R0,R0,#+1
   \   000001C4   0020A0E3           MOV      R2,#+0
   \   000001C8   B020C5E1           STRH     R2,[R5, #+0]
   \   000001CC   1820A0E3           MOV      R2,#+24
   \   000001D0   B220C5E1           STRH     R2,[R5, #+2]
   \   000001D4   B400C5E1           STRH     R0,[R5, #+4]
   \   000001D8   B610C5E1           STRH     R1,[R5, #+6]
    193            CreateMenu(0,0,&ma_menu,&ma_menuhdr,0,n_items,0,0);
   \   000001DC   0000A0E3           MOV      R0,#+0
   \   000001E0   01002DE9           PUSH     {R0}
   \   000001E4   01002DE9           PUSH     {R0}
   \   000001E8   10002DE9           PUSH     {R4}
   \   000001EC   01002DE9           PUSH     {R0}
   \   000001F0   0530A0E1           MOV      R3,R5
   \   000001F4   202085E2           ADD      R2,R5,#+32
   \   000001F8   0010A0E3           MOV      R1,#+0
   \   000001FC   520100EF           SWI      +338
    194          }
   \   00000200   7F80BDE8           POP      {R0-R6,PC}       ;; return
   \                     ??Disp_MA_Menu_0:
   \   00000204   ........           DC32     ma_menuhdr
    195          
    196          //>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
    197          //podpiska
    198          #define MAX_CONTC_ITEMS 5
    199          
    200          #define CONTC_SUBSCRIBE    1
    201          #define CONTC_SUBSCRIBED   2
    202          #define CONTC_UNSUBSCRIBED 3
    203          #define CONTC_UNSUBSCRIBE  4
    204          
    205          char CONTC_Menu_Contents[MAX_CONTC_ITEMS-1];

   \                                 In segment DATA_C, align 4, align-sorted
    206          const char contc_menu_header[]=LG_AUTHTYPE;
   \                     contc_menu_header:
   \   00000000   C0E2F2EEF0E8       DC8 "\300\342\362\356\360\350\347\340\366\350\377"
   \              E7E0F6E8FF00
    207          int contcmenusoftkeys[]={0,1,2};
    208          HEADER_DESC contc_menuhdr={0,0,0,0,NULL,(int)contc_menu_header,LGP_NULL};
    209          SOFTKEY_DESC contc_menu_sk[]=
    210          {
    211            {0x0018,0x0000,(int)LG_SELECT},
    212            {0x0001,0x0000,(int)LG_BACK},
    213            {0x003D,0x0000,(int)LGP_DOIT_PIC}
    214          };
    215          
    216          SOFTKEYSTAB contc_menu_skt=
    217          {
    218            contc_menu_sk,0
    219          };
    220          
    221          void contc_menu_ghook(void *data, int cmd);
    222          int contc_menu_onkey(void *data, GUI_MSG *msg);
    223          void contc_menu_iconhndl(void *data, int curitem, void *unk);
    224          
    225          MENU_DESC contc_menu=
    226          {
    227            8,contc_menu_onkey,contc_menu_ghook,NULL,
    228            contcmenusoftkeys,
    229            &contc_menu_skt,
    230            0x10, // 0x11 если надо меню с иконками
    231            contc_menu_iconhndl,
    232            NULL,   //Items
    233            NULL,   //Procs
    234            0   //n
    235          };
    236          

   \                                 In segment CODE, align 4, keep-with-next
    237          void InitContMenuArray()
    238          {
    239            for(int i=0;i<MAX_CONTC_ITEMS;i++)CONTC_Menu_Contents[i]=0;
   \                     InitContMenuArray:
   \   00000000   0000A0E3           MOV      R0,#+0
   \   00000004   0020A0E3           MOV      R2,#+0
   \                     ??InitContMenuArray_0:
   \   00000008   ........           LDR      R1,??DataTable13  ;; contc_menuhdr
   \   0000000C   011080E0           ADD      R1,R0,R1
   \   00000010   1420C1E5           STRB     R2,[R1, #+20]
   \   00000014   010080E2           ADD      R0,R0,#+1
   \   00000018   050050E3           CMP      R0,#+5
   \   0000001C   F9FFFFBA           BLT      ??InitContMenuArray_0
    240          }
   \   00000020   1EFF2FE1           BX       LR               ;; return
    241          

   \                                 In segment CODE, align 4, keep-with-next
    242          void Disp_Cont_Menu()
    243          {
   \                     Disp_Cont_Menu:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
    244          //  TRESOURCE *Act_contact = CList_GetActiveContact();
    245          //  CLIST* CLAct_contact=CList_FindContactByJID(CList_GetActiveContact()->full_name);
    246            InitContMenuArray();
    247            int n_items=0;
    248            CONTC_Menu_Contents[n_items++]=CONTC_SUBSCRIBE;//zaprosit` 
   \   00000004   7C409FE5           LDR      R4,??Disp_Cont_Menu_0  ;; contc_menuhdr
   \   00000008   ........           BL       InitContMenuArray
   \   0000000C   0100A0E3           MOV      R0,#+1
   \   00000010   1400C4E5           STRB     R0,[R4, #+20]
    249          //  if((CLAct_contact->subscription == SUB_BOTH)||(CLAct_contact->subscription==SUB_FROM))
    250             {
    251                 CONTC_Menu_Contents[n_items++]=CONTC_UNSUBSCRIBE; //Otozvat` podpisku
   \   00000014   0400A0E3           MOV      R0,#+4
   \   00000018   1500C4E5           STRB     R0,[R4, #+21]
    252             }
    253          //   if((Act_contact->status == PRESENCE_SUBSCRIBE))//Если контакт запрвшивает подписку...
    254             {
    255               CONTC_Menu_Contents[n_items++]=CONTC_UNSUBSCRIBED;//otkazat`
   \   0000001C   0300A0E3           MOV      R0,#+3
   \   00000020   1600C4E5           STRB     R0,[R4, #+22]
    256               CONTC_Menu_Contents[n_items++]=CONTC_SUBSCRIBED;//soglasitsja
   \   00000024   0200A0E3           MOV      R0,#+2
   \   00000028   1700C4E5           STRB     R0,[R4, #+23]
    257             }
    258            patch_rect(&contc_menuhdr.rc,0,YDISP,ScreenW()-1,HeaderH()+YDISP);
   \   0000002C   8A8100EF           SWI      +33162
   \   00000030   0050A0E1           MOV      R5,R0
   \   00000034   888100EF           SWI      +33160
   \   00000038   181085E2           ADD      R1,R5,#+24
   \   0000003C   010040E2           SUB      R0,R0,#+1
   \   00000040   0020A0E3           MOV      R2,#+0
   \   00000044   B020C4E1           STRH     R2,[R4, #+0]
   \   00000048   1820A0E3           MOV      R2,#+24
   \   0000004C   B220C4E1           STRH     R2,[R4, #+2]
   \   00000050   B400C4E1           STRH     R0,[R4, #+4]
   \   00000054   B610C4E1           STRH     R1,[R4, #+6]
    259            if (n_items != 0) CreateMenu(0,0,&contc_menu,&contc_menuhdr,0,n_items,0,0);
   \   00000058   0000A0E3           MOV      R0,#+0
   \   0000005C   01002DE9           PUSH     {R0}
   \   00000060   01002DE9           PUSH     {R0}
   \   00000064   0430A0E1           MOV      R3,R4
   \   00000068   182084E2           ADD      R2,R4,#+24
   \   0000006C   0010A0E3           MOV      R1,#+0
   \   00000070   0400A0E3           MOV      R0,#+4
   \   00000074   01002DE9           PUSH     {R0}
   \   00000078   0000A0E3           MOV      R0,#+0
   \   0000007C   01002DE9           PUSH     {R0}
   \   00000080   520100EF           SWI      +338
    260          }
   \   00000084   3F80BDE8           POP      {R0-R5,PC}       ;; return
   \                     ??Disp_Cont_Menu_0:
   \   00000088   ........           DC32     contc_menuhdr
    261          /////////////////////////////////////////////////////////////////////
    262          

   \                                 In segment CODE, align 4, keep-with-next
    263          void contact_menu_ghook(void *data, int cmd)
    264          {
   \                     contact_menu_ghook:
   \   00000000   00402DE9           PUSH     {LR}
    265            if (cmd==0x0A)  // onFocus
   \   00000004   0A0051E3           CMP      R1,#+10
   \   00000008   0080BD18           POPNE    {PC}
    266            {
    267              DisableIDLETMR();
   \   0000000C   7F0100EF           SWI      +383
    268              if(Req_Close_Cont_Menu)
   \   00000010   ........           LDR      R0,??DataTable7  ;; contact_menuhdr
   \   00000014   4C1090E5           LDR      R1,[R0, #+76]
   \   00000018   000051E3           CMP      R1,#+0
   \   0000001C   0080BD08           POPEQ    {PC}
    269              {
    270                Req_Close_Cont_Menu=0;
   \   00000020   0010A0E3           MOV      R1,#+0
   \   00000024   4C1080E5           STR      R1,[R0, #+76]
    271                GeneralFunc_flag1(Contact_MenuID,1);
   \   00000028   480090E5           LDR      R0,[R0, #+72]
   \   0000002C   0110A0E3           MOV      R1,#+1
   \   00000030   3D0100EF           SWI      +317
    272              }
    273            }
    274          }
   \   00000034   0080BDE8           POP      {PC}             ;; return
    275          
    276          /*
    277          Обработчик нажатий клавиш меню. Отсюда следует вызывать необходимые действия
    278          
    279          */

   \                                 In segment CODE, align 4, keep-with-next
    280          int contact_menu_onkey(void *data, GUI_MSG *msg)
    281          {
   \                     contact_menu_onkey:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
   \   00000004   0140A0E1           MOV      R4,R1
    282            int i=GetCurMenuItem(data);
   \   00000008   8F0100EF           SWI      +399
    283            if(msg->keys==0x18 || msg->keys==0x3D)
   \   0000000C   F210D4E1           LDRSH    R1,[R4, #+2]
   \   00000010   180051E3           CMP      R1,#+24
   \   00000014   3D005113           CMPNE    R1,#+61
   \   00000018   7000001A           BNE      ??contact_menu_onkey_1
    284            {
    285              switch(Menu_Contents[i])
   \   0000001C   ........           LDR      R1,??DataTable7  ;; contact_menuhdr
   \   00000020   C0419FE5           LDR      R4,??contact_menu_onkey_2  ;; `?<Constant "<presence to=\\'%s\\'/>">`
   \   00000024   010080E0           ADD      R0,R0,R1
   \   00000028   5000D0E5           LDRB     R0,[R0, #+80]
   \   0000002C   010040E2           SUB      R0,R0,#+1
   \   00000030   0B0050E3           CMP      R0,#+11
   \   00000034   6400008A           BHI      ??contact_menu_onkey_3
   \   00000038   011F8FE2           ADR      R1,??contact_menu_onkey_0
   \   0000003C   0010D1E7           LDRB     R1,[R1, R0]
   \   00000040   01F18FE0           ADD      PC,PC,R1, LSL #+2
   \                     ??contact_menu_onkey_0:
   \   00000044   02232737           DC8      +2,+35,+39,+55
   \   00000048   3B121658           DC8      +59,+18,+22,+88
   \   0000004C   1F5A5C08           DC8      +31,+90,+92,+8
    286              {
    287              case MI_CONF_LEAVE:
    288                {
    289                  CLIST* room=CList_FindContactByJID(CList_GetActiveContact()->full_name);
   \                     ??contact_menu_onkey_4:
   \   00000050   ........           _BLF     CList_GetActiveContact,??CList_GetActiveContact??rA
   \   00000054   040090E5           LDR      R0,[R0, #+4]
   \   00000058   ........           _BLF     CList_FindContactByJID,??CList_FindContactByJID??rA
    290                  Send_Leave_Conference(room->JID);
   \   0000005C   000090E5           LDR      R0,[R0, #+0]
   \   00000060   ........           _BLF     Send_Leave_Conference,??Send_Leave_Conference??rA
    291                  break;
   \   00000064   070000EA           B        ??contact_menu_onkey_5
    292                }
    293              case MI_CONF_CLEAR:
    294                {
    295                  TRESOURCE *Reso_Ex = CList_GetActiveContact();
   \                     ??contact_menu_onkey_6:
   \   00000068   ........           _BLF     CList_GetActiveContact,??CList_GetActiveContact??rA
   \   0000006C   0040A0E1           MOV      R4,R0
    296                  KillMsgList(Reso_Ex->log);
   \   00000070   1C0094E5           LDR      R0,[R4, #+28]
   \   00000074   ........           _BLF     KillMsgList,??KillMsgList??rA
    297                  Reso_Ex->log = NULL;
   \   00000078   0000A0E3           MOV      R0,#+0
   \   0000007C   1C0084E5           STR      R0,[R4, #+28]
    298                  Reso_Ex->has_unread_msg=0;
   \   00000080   140084E5           STR      R0,[R4, #+20]
    299                  Reso_Ex->total_msg_count=0;
   \   00000084   180084E5           STR      R0,[R4, #+24]
    300                  break;
   \                     ??contact_menu_onkey_5:
   \   00000088   0100A0E3           MOV      R0,#+1
   \   0000008C   7080BDE8           POP      {R4-R6,PC}
    301                }
    302              case MI_TIME_QUERY:
    303                {
    304                  Send_Time_Request((CList_GetActiveContact()->full_name));
   \                     ??contact_menu_onkey_7:
   \   00000090   ........           _BLF     CList_GetActiveContact,??CList_GetActiveContact??rA
   \   00000094   040090E5           LDR      R0,[R0, #+4]
   \   00000098   ........           _BLF     Send_Time_Request,??Send_Time_Request??rA
    305                  break;
   \   0000009C   F9FFFFEA           B        ??contact_menu_onkey_5
    306                }
    307          
    308              case MI_VCARD_QUERY:
    309                {
    310                  if (!Show_vCard(CList_GetActiveContact()->full_name))
   \                     ??contact_menu_onkey_8:
   \   000000A0   ........           _BLF     CList_GetActiveContact,??CList_GetActiveContact??rA
   \   000000A4   040090E5           LDR      R0,[R0, #+4]
   \   000000A8   ........           _BLF     Show_vCard,??Show_vCard??rA
   \   000000AC   000050E3           CMP      R0,#+0
   \   000000B0   4800001A           BNE      ??contact_menu_onkey_9
    311                    Send_Vcard_Request((CList_GetActiveContact()->full_name));
   \   000000B4   ........           _BLF     CList_GetActiveContact,??CList_GetActiveContact??rA
   \   000000B8   040090E5           LDR      R0,[R0, #+4]
   \   000000BC   ........           _BLF     Send_Vcard_Request,??Send_Vcard_Request??rA
   \   000000C0   F0FFFFEA           B        ??contact_menu_onkey_5
    312                  break;
    313                }
    314          
    315              case MI_LASTACTIV_QUERY:
    316              {
    317                Send_LastActivity_Request((CList_GetActiveContact()->full_name));
   \                     ??contact_menu_onkey_10:
   \   000000C4   ........           _BLF     CList_GetActiveContact,??CList_GetActiveContact??rA
   \   000000C8   040090E5           LDR      R0,[R0, #+4]
   \   000000CC   ........           _BLF     Send_LastActivity_Request,??Send_LastActivity_Request??rA
    318                break;
   \   000000D0   ECFFFFEA           B        ??contact_menu_onkey_5
    319              }
    320          
    321              case MI_QUERY_VERSION:
    322                {
    323          
    324                  Send_Version_Request(CList_GetActiveContact()->full_name);
   \                     ??contact_menu_onkey_11:
   \   000000D4   ........           _BLF     CList_GetActiveContact,??CList_GetActiveContact??rA
   \   000000D8   040090E5           LDR      R0,[R0, #+4]
   \   000000DC   ........           _BLF     Send_Version_Request,??Send_Version_Request??rA
    325                  break;
   \   000000E0   E8FFFFEA           B        ??contact_menu_onkey_5
    326                }
    327          
    328              case MI_LOGIN_LOGOUT:
    329                {
    330          
    331                  char *pres_str = malloc(256);
   \                     ??contact_menu_onkey_12:
   \   000000E4   400FA0E3           MOV      R0,#+256
   \   000000E8   140000EF           SWI      +20
   \   000000EC   0050A0E1           MOV      R5,R0
    332                  TRESOURCE *Transport = CList_GetActiveContact();
   \   000000F0   ........           _BLF     CList_GetActiveContact,??CList_GetActiveContact??rA
    333                  if(Transport->status==PRESENCE_OFFLINE)
   \   000000F4   0910D0E5           LDRB     R1,[R0, #+9]
   \   000000F8   043090E5           LDR      R3,[R0, #+4]
    334                  {
    335                    snprintf(pres_str,255,"<presence to='%s'/>", Transport->full_name);
    336                  }
    337                  else
    338                  {
    339                    snprintf(pres_str,255,"<presence to='%s' type='unavailable'/>", Transport->full_name);
   \   000000FC   0500A0E1           MOV      R0,R5
   \   00000100   060051E3           CMP      R1,#+6
   \   00000104   0420A001           MOVEQ    R2,R4
   \   00000108   14208412           ADDNE    R2,R4,#+20
   \   0000010C   FF10A0E3           MOV      R1,#+255
   \   00000110   1B0100EF           SWI      +283
    340                  }
    341                  SUBPROC((void*)_sendandfree,pres_str);
   \   00000114   D0009FE5           LDR      R0,??contact_menu_onkey_2+0x4  ;; _sendandfree
   \   00000118   0510A0E1           MOV      R1,R5
   \   0000011C   710100EF           SWI      +369
    342                  break;
   \   00000120   D8FFFFEA           B        ??contact_menu_onkey_5
    343                }
    344          
    345              case MI_DISCO_QUERY:
    346                {
    347                  Send_DiscoInfo_Request(CList_GetActiveContact()->full_name);
   \                     ??contact_menu_onkey_13:
   \   00000124   ........           _BLF     CList_GetActiveContact,??CList_GetActiveContact??rA
   \   00000128   040090E5           LDR      R0,[R0, #+4]
   \   0000012C   ........           _BLF     Send_DiscoInfo_Request,??Send_DiscoInfo_Request??rA
    348                  break;
   \   00000130   D4FFFFEA           B        ??contact_menu_onkey_5
    349                }
    350                ////////////////////////HISTORY
    351              case MI_HISTORY_OPEN:
    352                {
    353          	extern const char HIST_PATH[128];
    354                  char *fn=malloc(1024);
   \                     ??contact_menu_onkey_14:
   \   00000134   400EA0E3           MOV      R0,#+1024
   \   00000138   140000EF           SWI      +20
   \   0000013C   0050A0E1           MOV      R5,R0
    355                  sprintf(fn,"%s%s.txt",HIST_PATH,CList_FindContactByJID(CList_GetActiveContact()->full_name)->JID);
   \   00000140   ........           _BLF     CList_GetActiveContact,??CList_GetActiveContact??rA
   \   00000144   040090E5           LDR      R0,[R0, #+4]
   \   00000148   ........           _BLF     CList_FindContactByJID,??CList_FindContactByJID??rA
   \   0000014C   003090E5           LDR      R3,[R0, #+0]
   \   00000150   98209FE5           LDR      R2,??contact_menu_onkey_2+0x8  ;; HIST_PATH
   \   00000154   3C1084E2           ADD      R1,R4,#+60
   \   00000158   0500A0E1           MOV      R0,R5
   \   0000015C   160000EF           SWI      +22
    356                  int len = strlen(fn)+16;
   \   00000160   0500A0E1           MOV      R0,R5
   \   00000164   1B0000EF           SWI      +27
   \   00000168   104080E2           ADD      R4,R0,#+16
    357                  WSHDR *wsfn = AllocWS(len);
   \   0000016C   0400A0E1           MOV      R0,R4
   \   00000170   250100EF           SWI      +293
   \   00000174   0060A0E1           MOV      R6,R0
    358                  utf8_2ws(wsfn, fn, len);
   \   00000178   0420A0E1           MOV      R2,R4
   \   0000017C   0510A0E1           MOV      R1,R5
   \   00000180   E30100EF           SWI      +483
    359                  ExecuteFile(wsfn,NULL,NULL);
   \   00000184   0020A0E3           MOV      R2,#+0
   \   00000188   0010A0E3           MOV      R1,#+0
   \   0000018C   0600A0E1           MOV      R0,R6
   \   00000190   940000EF           SWI      +148
    360                  FreeWS(wsfn);
   \   00000194   0600A0E1           MOV      R0,R6
   \   00000198   290100EF           SWI      +297
    361                  mfree(fn);
   \   0000019C   0500A0E1           MOV      R0,R5
   \   000001A0   150000EF           SWI      +21
    362                  break;
   \   000001A4   B7FFFFEA           B        ??contact_menu_onkey_5
    363                }
    364                
    365              case MI_MUC_ADMIN:
    366                {
    367                  Disp_MA_Menu();
   \                     ??contact_menu_onkey_15:
   \   000001A8   ........           BL       Disp_MA_Menu
    368                  break;
   \   000001AC   B5FFFFEA           B        ??contact_menu_onkey_5
    369                }
    370                
    371              case MI_SUBSCRIBES_MENU:
    372                {
    373                  Disp_Cont_Menu();
   \                     ??contact_menu_onkey_16:
   \   000001B0   ........           BL       Disp_Cont_Menu
    374                  break;
   \   000001B4   B3FFFFEA           B        ??contact_menu_onkey_5
    375                }
    376          
    377              case MI_CHANGECONTACT_VERSION:
    378                {
    379                  Disp_JID_Enter_Dialog(CList_FindContactByJID(CList_GetActiveContact()->full_name));
   \                     ??contact_menu_onkey_17:
   \   000001B8   ........           _BLF     CList_GetActiveContact,??CList_GetActiveContact??rA
   \   000001BC   040090E5           LDR      R0,[R0, #+4]
   \   000001C0   ........           _BLF     CList_FindContactByJID,??CList_FindContactByJID??rA
   \   000001C4   ........           _BLF     Disp_JID_Enter_Dialog,??Disp_JID_Enter_Dialog??rA
    380                  break;
   \   000001C8   AEFFFFEA           B        ??contact_menu_onkey_5
    381                }      
    382              default:
    383                {
    384                  MsgBoxError(1,(int)LG_UNKACTION);
   \                     ??contact_menu_onkey_3:
   \   000001CC   481084E2           ADD      R1,R4,#+72
   \   000001D0   0100A0E3           MOV      R0,#+1
   \   000001D4   4E0000EF           SWI      +78
    385                }
    386              }
    387          
    388              return 1;
   \                     ??contact_menu_onkey_9:
   \   000001D8   0100A0E3           MOV      R0,#+1
   \   000001DC   7080BDE8           POP      {R4-R6,PC}
    389            }
    390            //  Req_Close_Cont_Menu = 1;
    391            return 0;
   \                     ??contact_menu_onkey_1:
   \   000001E0   0000A0E3           MOV      R0,#+0
   \   000001E4   7080BDE8           POP      {R4-R6,PC}       ;; return
   \                     ??contact_menu_onkey_2:
   \   000001E8   ........           DC32     `?<Constant "<presence to=\\'%s\\'/>">`
   \   000001EC   ........           DC32     _sendandfree
   \   000001F0   ........           DC32     HIST_PATH
    392          }
    393          

   \                                 In segment CODE, align 4, keep-with-next
    394          void InitMenuArray()
    395          {
    396            for(int i=0;i<MAX_ITEMS;i++)Menu_Contents[i]=0;
   \                     InitMenuArray:
   \   00000000   0000A0E3           MOV      R0,#+0
   \   00000004   0020A0E3           MOV      R2,#+0
   \                     ??InitMenuArray_0:
   \   00000008   ........           LDR      R1,??DataTable7  ;; contact_menuhdr
   \   0000000C   011080E0           ADD      R1,R0,R1
   \   00000010   5020C1E5           STRB     R2,[R1, #+80]
   \   00000014   010080E2           ADD      R0,R0,#+1
   \   00000018   0C0050E3           CMP      R0,#+12
   \   0000001C   F9FFFFBA           BLT      ??InitMenuArray_0
    397          }
   \   00000020   1EFF2FE1           BX       LR               ;; return
    398          
    399          /*
    400          Обработчик появления пунктов динамического меню
    401          Тут мы сами создаём каждый пункт, указывая для него иконку и текст.
    402          При создании мы опираемся на данные массива Menu_Contents, в котором описано,
    403          какие пункты и в каком порядке необходимо создать.
    404          */

   \                                 In segment CODE, align 4, keep-with-next
    405          void contact_menu_iconhndl(void *data, int curitem, void *unk)
    406          {
   \                     contact_menu_iconhndl:
   \   00000000   F0412DE9           PUSH     {R4-R8,LR}
    407            //  cmS_ICONS[0]=(int)cmdummy_icon;
    408            WSHDR *ws;
    409            char test_str[48];
    410            void *item=AllocMenuItem(data);
    411            strcpy(test_str,"(ошибка)");
   \   00000004   ........           LDR      R8,??DataTable12  ;; `?<Constant "(\\356\\370\\350\\341\\352\\340)">`
    412          
    413            TRESOURCE *Act_contact = CList_GetActiveContact();
    414          
    415            switch(Menu_Contents[curitem])
   \   00000008   ........           LDR      R7,??DataTable7  ;; contact_menuhdr
   \   0000000C   30D04DE2           SUB      SP,SP,#+48
   \   00000010   0040A0E1           MOV      R4,R0
   \   00000014   0150A0E1           MOV      R5,R1
   \   00000018   970100EF           SWI      +407
   \   0000001C   0060A0E1           MOV      R6,R0
   \   00000020   0810A0E1           MOV      R1,R8
   \   00000024   0D00A0E1           MOV      R0,SP
   \   00000028   1A0000EF           SWI      +26
   \   0000002C   ........           _BLF     CList_GetActiveContact,??CList_GetActiveContact??rA
   \   00000030   071085E0           ADD      R1,R5,R7
   \   00000034   5010D1E5           LDRB     R1,[R1, #+80]
   \   00000038   011041E2           SUB      R1,R1,#+1
   \   0000003C   0B0051E3           CMP      R1,#+11
   \   00000040   2100008A           BHI      ??contact_menu_iconhndl_1
   \   00000044   012F8FE2           ADR      R2,??contact_menu_iconhndl_0
   \   00000048   0120D2E7           LDRB     R2,[R2, R1]
   \   0000004C   02F18FE0           ADD      PC,PC,R2, LSL #+2
   \                     ??contact_menu_iconhndl_0:
   \   00000050   02061208           DC8      +2,+6,+18,+8
   \   00000054   100A0C17           DC8      +16,+10,+12,+23
   \   00000058   0E191B04           DC8      +14,+25,+27,+4
    416            {
    417            case MI_CONF_LEAVE:
    418              {
    419                strcpy(test_str,LG_ABANDON);
   \                     ??contact_menu_iconhndl_2:
   \   0000005C   0C1088E2           ADD      R1,R8,#+12
   \   00000060   170000EA           B        ??contact_menu_iconhndl_3
    420                break;
    421              }
    422            case MI_CONF_CLEAR:
    423              {
    424                strcpy(test_str,LG_MUCCLEAR);
   \                     ??contact_menu_iconhndl_4:
   \   00000064   181088E2           ADD      R1,R8,#+24
   \   00000068   150000EA           B        ??contact_menu_iconhndl_3
    425                break;
    426              }
    427          
    428            case MI_QUERY_VERSION:
    429              {
    430                strcpy(test_str,LG_VERCLIENT);
   \                     ??contact_menu_iconhndl_5:
   \   0000006C   3C1088E2           ADD      R1,R8,#+60
   \   00000070   130000EA           B        ??contact_menu_iconhndl_3
    431                break;
    432              }
    433          
    434            case MI_DISCO_QUERY:
    435              {
    436                strcpy(test_str,LG_INFOFDISC);
   \                     ??contact_menu_iconhndl_6:
   \   00000074   2C1088E2           ADD      R1,R8,#+44
   \   00000078   110000EA           B        ??contact_menu_iconhndl_3
    437                break;
    438              }
    439            case MI_TIME_QUERY:
    440              {
    441                strcpy(test_str,LG_QUERYTIME);
   \                     ??contact_menu_iconhndl_7:
   \   0000007C   4C1088E2           ADD      R1,R8,#+76
   \   00000080   0F0000EA           B        ??contact_menu_iconhndl_3
    442                break;
    443              }
    444          
    445            case MI_VCARD_QUERY:
    446              {
    447                strcpy(test_str,LG_QUERYVCARD);
   \                     ??contact_menu_iconhndl_8:
   \   00000084   5C1088E2           ADD      R1,R8,#+92
   \   00000088   0D0000EA           B        ??contact_menu_iconhndl_3
    448                break;
    449              }
    450          
    451            case MI_LASTACTIV_QUERY:
    452              {
    453                strcpy(test_str,LG_QUERYLAST);
   \                     ??contact_menu_iconhndl_9:
   \   0000008C   641088E2           ADD      R1,R8,#+100
   \   00000090   0B0000EA           B        ??contact_menu_iconhndl_3
    454                break;
    455              }
    456          
    457            case MI_HISTORY_OPEN:
    458              {
    459                strcpy(test_str,LG_OHISTORY);
   \                     ??contact_menu_iconhndl_10:
   \   00000094   701088E2           ADD      R1,R8,#+112
   \   00000098   090000EA           B        ??contact_menu_iconhndl_3
    460                break;
    461              }
    462            case MI_LOGIN_LOGOUT:
    463              {
    464                if(Act_contact->status==PRESENCE_OFFLINE)
   \                     ??contact_menu_iconhndl_11:
   \   0000009C   0900D0E5           LDRB     R0,[R0, #+9]
   \   000000A0   060050E3           CMP      R0,#+6
   \   000000A4   84108812           ADDNE    R1,R8,#+132
    465                {
    466                  strcpy(test_str,LG_ON);
   \   000000A8   78108802           ADDEQ    R1,R8,#+120
   \   000000AC   040000EA           B        ??contact_menu_iconhndl_3
    467                }
    468                else
    469                {
    470                  strcpy(test_str,LG_OFF);
    471                }
    472                break;
    473              }
    474              
    475            case MI_MUC_ADMIN:
    476              {
    477                strcpy(test_str,LG_MUC_ADMIN);
   \                     ??contact_menu_iconhndl_12:
   \   000000B0   901088E2           ADD      R1,R8,#+144
   \   000000B4   020000EA           B        ??contact_menu_iconhndl_3
    478                break;
    479              }
    480              
    481            case MI_SUBSCRIBES_MENU:
    482              {
    483                strcpy(test_str,LG_SUBSCR);
   \                     ??contact_menu_iconhndl_13:
   \   000000B8   9C1088E2           ADD      R1,R8,#+156
   \   000000BC   000000EA           B        ??contact_menu_iconhndl_3
    484                break;
    485              }
    486            case MI_CHANGECONTACT_VERSION:
    487              {
    488                strcpy(test_str,LG_EDIT);
   \                     ??contact_menu_iconhndl_14:
   \   000000C0   A81088E2           ADD      R1,R8,#+168
   \                     ??contact_menu_iconhndl_3:
   \   000000C4   0D00A0E1           MOV      R0,SP
   \   000000C8   1A0000EF           SWI      +26
    489                break;
    490              }
    491          
    492            }
    493            //ShowMSG(1,(int)test_str);
    494            ws=AllocMenuWS(data,strlen(test_str));
   \                     ??contact_menu_iconhndl_1:
   \   000000CC   0D00A0E1           MOV      R0,SP
   \   000000D0   1B0000EF           SWI      +27
   \   000000D4   0010A0E1           MOV      R1,R0
   \   000000D8   0400A0E1           MOV      R0,R4
   \   000000DC   980100EF           SWI      +408
   \   000000E0   0080A0E1           MOV      R8,R0
    495            ascii2ws(ws, test_str);
   \   000000E4   0D10A0E1           MOV      R1,SP
   \   000000E8   ........           _BLF     ascii2ws,??ascii2ws??rA
    496          
    497            SetMenuItemIconArray(data,item,cmS_ICONS+Menu_Contents[curitem]);
   \   000000EC   070085E0           ADD      R0,R5,R7
   \   000000F0   5000D0E5           LDRB     R0,[R0, #+80]
   \   000000F4   0610A0E1           MOV      R1,R6
   \   000000F8   000187E0           ADD      R0,R7,R0, LSL #+2
   \   000000FC   142080E2           ADD      R2,R0,#+20
   \   00000100   0400A0E1           MOV      R0,R4
   \   00000104   990100EF           SWI      +409
    498            SetMenuItemText(data,item,ws,curitem);
   \   00000108   0530A0E1           MOV      R3,R5
   \   0000010C   0820A0E1           MOV      R2,R8
   \   00000110   0610A0E1           MOV      R1,R6
   \   00000114   0400A0E1           MOV      R0,R4
   \   00000118   9A0100EF           SWI      +410
    499            //SetMenuItemIcon(data,curitem,Menu_Contents[curitem]);  // 0 = индекс иконки
    500            /*
    501            CLIST *t;
    502            WSHDR *ws;
    503            void *item=AllocMenuItem(data);
    504          
    505            t=FindContactByN(curitem);
    506            if (t)
    507            {
    508            ws=AllocMenuWS(data,strlen(t->name));
    509            wsprintf(ws,percent_t,t->name);
    510          }
    511            else
    512            {
    513            ws=AllocMenuWS(data,10);
    514            wsprintf(ws,"error");
    515          }
    516            SetMenuItemIconArray(data,item,S_ICONS);
    517            SetMenuItemText(data,item,ws,curitem);
    518            SetMenuItemIcon(data,curitem,GetIconIndex(t));
    519            */
    520          };
   \   0000011C   30D08DE2           ADD      SP,SP,#+48
   \   00000120   F081BDE8           POP      {R4-R8,PC}       ;; return
    521          
    522          /*
    523          #define MI_CONF_LEAVE       1
    524          #define MI_CONF_KICK_THIS   2
    525          #define MI_CONF_BAN_THIS    3
    526          #define MI_CONF_VREJ_THIS   4
    527          #define MI_CONF_VGR_THIS    5
    528          #define MI_QUERY_VERSION    6
    529          */
    530          extern const char PATH_TO_PIC[128];
    531          
    532          char ICON_CONF_LEAVE[128];// = {(int)PATH_TO_PIC"menu_muc_leave.png",0};

   \                                 In segment DATA_Z, align 4, align-sorted
    533          char ICON_CONF_KICK_THIS[128];
   \                     ICON_CONF_KICK_THIS:
   \   00000000                      DS8 128

   \                                 In segment DATA_Z, align 4, align-sorted
    534          char ICON_CONF_BAN_THIS[128];
   \                     ICON_CONF_BAN_THIS:
   \   00000000                      DS8 128

   \                                 In segment DATA_Z, align 4, align-sorted
    535          char ICON_CONF_VREJ_THIS[128];
   \                     ICON_CONF_VREJ_THIS:
   \   00000000                      DS8 128

   \                                 In segment DATA_Z, align 4, align-sorted
    536          char ICON_CONF_VGR_THIS[128];
   \                     ICON_CONF_VGR_THIS:
   \   00000000                      DS8 128
    537          char ICON_QUERY_VERSION[128];
    538          char ICON_LOGIN_LOGOUT[128];
    539          char ICON_QUERY_DISCO[128];
    540          char ICON_HISTORY_OPEN[128];
    541          char ICON_QUERY_TIME[128];
    542          char ICON_QUERY_VCARD[128];
    543          char ICON_MUC_ADMIN[128];
    544          char ICON_QUERY_LASTACTIV[128];
    545          char ICON_SUBSCRIBE_MENU[128];
    546          

   \                                 In segment CODE, align 4, keep-with-next
    547          void Init_Icon_array()
    548          {
   \                     Init_Icon_array:
   \   00000000   F04F2DE9           PUSH     {R4-R11,LR}
    549            TRESOURCE *Act_contact = CList_GetActiveContact();
    550          
    551            strcpy(ICON_CONF_LEAVE, PATH_TO_PIC);strcat(ICON_CONF_LEAVE, "menu_muc_leave.png");
   \   00000004   ........           LDR      R4,??DataTable7  ;; contact_menuhdr
   \   00000008   9CA19FE5           LDR      R10,??Init_Icon_array_0  ;; `?<Constant "menu_muc_leave.png">`
   \   0000000C   9CB19FE5           LDR      R11,??Init_Icon_array_0+0x4  ;; PATH_TO_PIC
   \   00000010   ........           _BLF     CList_GetActiveContact,??CList_GetActiveContact??rA
   \   00000014   0090A0E1           MOV      R9,R0
   \   00000018   0B10A0E1           MOV      R1,R11
   \   0000001C   880084E2           ADD      R0,R4,#+136
   \   00000020   1A0000EF           SWI      +26
   \   00000024   0A10A0E1           MOV      R1,R10
   \   00000028   880084E2           ADD      R0,R4,#+136
   \   0000002C   170000EF           SWI      +23
   \   00000030   0B10A0E1           MOV      R1,R11
   \   00000034   420F84E2           ADD      R0,R4,#+264
    552            strcpy(ICON_QUERY_VERSION, PATH_TO_PIC);strcat(ICON_QUERY_VERSION, "menu_version.png");
   \   00000038   1A0000EF           SWI      +26
   \   0000003C   14108AE2           ADD      R1,R10,#+20
   \   00000040   420F84E2           ADD      R0,R4,#+264
   \   00000044   170000EF           SWI      +23
   \   00000048   0B10A0E1           MOV      R1,R11
   \   0000004C   820F84E2           ADD      R0,R4,#+520
    553            strcpy(ICON_QUERY_DISCO, PATH_TO_PIC);strcat(ICON_QUERY_DISCO, "menu_disco.png");
   \   00000050   1A0000EF           SWI      +26
   \   00000054   28108AE2           ADD      R1,R10,#+40
   \   00000058   820F84E2           ADD      R0,R4,#+520
   \   0000005C   170000EF           SWI      +23
   \   00000060   0B10A0E1           MOV      R1,R11
   \   00000064   A20F84E2           ADD      R0,R4,#+648
    554            strcpy(ICON_HISTORY_OPEN, PATH_TO_PIC);strcat(ICON_HISTORY_OPEN, "menu_history.png");
   \   00000068   1A0000EF           SWI      +26
   \   0000006C   38108AE2           ADD      R1,R10,#+56
   \   00000070   A20F84E2           ADD      R0,R4,#+648
   \   00000074   170000EF           SWI      +23
   \   00000078   0B10A0E1           MOV      R1,R11
   \   0000007C   C20F84E2           ADD      R0,R4,#+776
    555            strcpy(ICON_QUERY_TIME, PATH_TO_PIC);strcat(ICON_QUERY_TIME, "menu_time.png");
   \   00000080   1A0000EF           SWI      +26
   \   00000084   4C108AE2           ADD      R1,R10,#+76
   \   00000088   C20F84E2           ADD      R0,R4,#+776
   \   0000008C   170000EF           SWI      +23
   \   00000090   0B10A0E1           MOV      R1,R11
   \   00000094   E20F84E2           ADD      R0,R4,#+904
    556            strcpy(ICON_QUERY_VCARD, PATH_TO_PIC);strcat(ICON_QUERY_VCARD, "menu_vcard.png");
   \   00000098   1A0000EF           SWI      +26
   \   0000009C   5C108AE2           ADD      R1,R10,#+92
   \   000000A0   E20F84E2           ADD      R0,R4,#+904
   \   000000A4   170000EF           SWI      +23
    557            strcpy(ICON_QUERY_LASTACTIV, PATH_TO_PIC);strcat(ICON_QUERY_LASTACTIV, "menu_idle.png");
   \   000000A8   8850A0E3           MOV      R5,#+136
   \   000000AC   405E85E3           ORR      R5,R5,#0x400
   \   000000B0   0B10A0E1           MOV      R1,R11
   \   000000B4   040085E0           ADD      R0,R5,R4
   \   000000B8   1A0000EF           SWI      +26
   \   000000BC   6C108AE2           ADD      R1,R10,#+108
   \   000000C0   040085E0           ADD      R0,R5,R4
   \   000000C4   170000EF           SWI      +23
    558            strcpy(ICON_LOGIN_LOGOUT, PATH_TO_PIC);
   \   000000C8   626FA0E3           MOV      R6,#+392
   \   000000CC   0B10A0E1           MOV      R1,R11
   \   000000D0   040086E0           ADD      R0,R6,R4
   \   000000D4   1A0000EF           SWI      +26
    559            strcpy(ICON_MUC_ADMIN, PATH_TO_PIC);strcat(ICON_MUC_ADMIN, "menu_kick.png");
   \   000000D8   8070C5E3           BIC      R7,R5,#0x80
   \   000000DC   0B10A0E1           MOV      R1,R11
   \   000000E0   040087E0           ADD      R0,R7,R4
   \   000000E4   1A0000EF           SWI      +26
   \   000000E8   7C108AE2           ADD      R1,R10,#+124
   \   000000EC   040087E0           ADD      R0,R7,R4
   \   000000F0   170000EF           SWI      +23
    560            strcpy(ICON_SUBSCRIBE_MENU, PATH_TO_PIC);strcat(ICON_SUBSCRIBE_MENU, "menu_kick.png");  
   \   000000F4   808085E2           ADD      R8,R5,#+128
   \   000000F8   0B10A0E1           MOV      R1,R11
   \   000000FC   040088E0           ADD      R0,R8,R4
   \   00000100   1A0000EF           SWI      +26
   \   00000104   7C108AE2           ADD      R1,R10,#+124
   \   00000108   040088E0           ADD      R0,R8,R4
   \   0000010C   170000EF           SWI      +23
    561            if(Act_contact->entry_type==T_TRANSPORT)
   \   00000110   0800D9E5           LDRB     R0,[R9, #+8]
   \   00000114   040050E3           CMP      R0,#+4
   \   00000118   0500001A           BNE      ??Init_Icon_array_1
    562              if(Act_contact->status==PRESENCE_OFFLINE)
   \   0000011C   0900D9E5           LDRB     R0,[R9, #+9]
   \   00000120   060050E3           CMP      R0,#+6
    563              {
    564                strcat(ICON_LOGIN_LOGOUT, "menu_version.png");
   \   00000124   14108A02           ADDEQ    R1,R10,#+20
    565              }
    566              else strcat(ICON_LOGIN_LOGOUT, "menu_no_icon.png");
   \   00000128   8C108A12           ADDNE    R1,R10,#+140
   \   0000012C   040086E0           ADD      R0,R6,R4
   \   00000130   170000EF           SWI      +23
    567          
    568            for(int i=0;i<=MAX_ITEMS;i++)cmS_ICONS[i]=0;
   \                     ??Init_Icon_array_1:
   \   00000134   0000A0E3           MOV      R0,#+0
   \   00000138   0020A0E3           MOV      R2,#+0
   \                     ??Init_Icon_array_2:
   \   0000013C   001184E0           ADD      R1,R4,R0, LSL #+2
   \   00000140   142081E5           STR      R2,[R1, #+20]
   \   00000144   010080E2           ADD      R0,R0,#+1
   \   00000148   0D0050E3           CMP      R0,#+13
   \   0000014C   FAFFFFBA           BLT      ??Init_Icon_array_2
    569            cmS_ICONS[MI_CONF_LEAVE]=(int)ICON_CONF_LEAVE;
   \   00000150   880084E2           ADD      R0,R4,#+136
   \   00000154   180084E5           STR      R0,[R4, #+24]
    570            cmS_ICONS[MI_QUERY_VERSION]=(int)ICON_QUERY_VERSION;
   \   00000158   420F84E2           ADD      R0,R4,#+264
   \   0000015C   1C0084E5           STR      R0,[R4, #+28]
    571            cmS_ICONS[MI_DISCO_QUERY]=(int)ICON_QUERY_DISCO;
   \   00000160   820F84E2           ADD      R0,R4,#+520
   \   00000164   240084E5           STR      R0,[R4, #+36]
    572            cmS_ICONS[MI_HISTORY_OPEN]=(int)ICON_HISTORY_OPEN;
   \   00000168   A20F84E2           ADD      R0,R4,#+648
   \   0000016C   280084E5           STR      R0,[R4, #+40]
    573            cmS_ICONS[MI_TIME_QUERY]=(int)ICON_QUERY_TIME;
   \   00000170   C20F84E2           ADD      R0,R4,#+776
   \   00000174   2C0084E5           STR      R0,[R4, #+44]
    574            cmS_ICONS[MI_VCARD_QUERY]=(int)ICON_QUERY_VCARD;
   \   00000178   E20F84E2           ADD      R0,R4,#+904
   \   0000017C   300084E5           STR      R0,[R4, #+48]
    575            cmS_ICONS[MI_LASTACTIV_QUERY]=(int)ICON_QUERY_LASTACTIV;  
   \   00000180   040085E0           ADD      R0,R5,R4
   \   00000184   380084E5           STR      R0,[R4, #+56]
    576            cmS_ICONS[MI_LOGIN_LOGOUT]=(int)ICON_LOGIN_LOGOUT;
   \   00000188   040086E0           ADD      R0,R6,R4
   \   0000018C   200084E5           STR      R0,[R4, #+32]
    577            cmS_ICONS[MI_MUC_ADMIN]=(int)ICON_MUC_ADMIN;
   \   00000190   040087E0           ADD      R0,R7,R4
   \   00000194   340084E5           STR      R0,[R4, #+52]
    578            cmS_ICONS[MI_SUBSCRIBES_MENU]=(int)  ICON_SUBSCRIBE_MENU;
   \   00000198   040088E0           ADD      R0,R8,R4
   \   0000019C   3C0084E5           STR      R0,[R4, #+60]
    579            cmS_ICONS[MI_CHANGECONTACT_VERSION]=(int)  ICON_SUBSCRIBE_MENU;
   \   000001A0   400084E5           STR      R0,[R4, #+64]
    580            cmS_ICONS[MI_CONF_CLEAR]=(int)ICON_SUBSCRIBE_MENU;
   \   000001A4   440084E5           STR      R0,[R4, #+68]
    581          }
   \   000001A8   F08FBDE8           POP      {R4-R11,PC}      ;; return
   \                     ??Init_Icon_array_0:
   \   000001AC   ........           DC32     `?<Constant "menu_muc_leave.png">`
   \   000001B0   ........           DC32     PATH_TO_PIC
    582          

   \                                 In segment CODE, align 4, keep-with-next
    583          void Disp_Contact_Menu()
    584          {
   \                     Disp_Contact_Menu:
   \   00000000   F04F2DE9           PUSH     {R4-R11,LR}
    585            int n_items=0;
   \   00000004   0070A0E3           MOV      R7,#+0
    586            InitMenuArray();
   \   00000008   ........           BL       InitMenuArray
    587            Init_Icon_array();
   \   0000000C   ........           BL       Init_Icon_array
    588            TRESOURCE *Act_contact = CList_GetActiveContact();
   \   00000010   ........           _BLF     CList_GetActiveContact,??CList_GetActiveContact??rA
   \   00000014   0040B0E1           MOVS     R4,R0
    589            // Теперь определяем, какие пункты у нас будут, и сколько
    590            if(!Act_contact)return;
   \   00000018   F08FBD08           POPEQ    {R4-R11,PC}
    591            if(Act_contact->entry_type==T_CONF_ROOT)
   \   0000001C   0800D4E5           LDRB     R0,[R4, #+8]
   \   00000020   70629FE5           LDR      R6,??Disp_Contact_Menu_0  ;; contact_menuhdr
   \   00000024   0450A0E3           MOV      R5,#+4
   \   00000028   020050E3           CMP      R0,#+2
   \   0000002C   1200001A           BNE      ??Disp_Contact_Menu_1
    592            {
    593              if(Act_contact->status!=PRESENCE_OFFLINE) Menu_Contents[n_items++]=MI_CONF_LEAVE;
   \   00000030   0900D4E5           LDRB     R0,[R4, #+9]
    594              Menu_Contents[n_items++]=MI_HISTORY_OPEN;
   \   00000034   0510A0E3           MOV      R1,#+5
   \   00000038   060050E3           CMP      R0,#+6
   \   0000003C   0100A013           MOVNE    R0,#+1
   \   00000040   5000C615           STRBNE   R0,[R6, #+80]
   \   00000044   0170A013           MOVNE    R7,#+1
   \   00000048   060087E0           ADD      R0,R7,R6
   \   0000004C   5010C0E5           STRB     R1,[R0, #+80]
   \   00000050   010087E2           ADD      R0,R7,#+1
    595              Menu_Contents[n_items++]=MI_DISCO_QUERY;
   \   00000054   061080E0           ADD      R1,R0,R6
   \   00000058   5050C1E5           STRB     R5,[R1, #+80]
   \   0000005C   017080E2           ADD      R7,R0,#+1
    596              if(Act_contact->total_msg_count) Menu_Contents[n_items++]=MI_CONF_CLEAR;
   \   00000060   180094E5           LDR      R0,[R4, #+24]
   \   00000064   000050E3           CMP      R0,#+0
   \   00000068   0300000A           BEQ      ??Disp_Contact_Menu_1
   \   0000006C   060087E0           ADD      R0,R7,R6
   \   00000070   0C10A0E3           MOV      R1,#+12
   \   00000074   5010C0E5           STRB     R1,[R0, #+80]
   \   00000078   017087E2           ADD      R7,R7,#+1
    597            }
    598          
    599            if((Act_contact->entry_type==T_CONF_NODE)&&(Act_contact->status!=PRESENCE_OFFLINE))
   \                     ??Disp_Contact_Menu_1:
   \   0000007C   0800D4E5           LDRB     R0,[R4, #+8]
   \   00000080   0680A0E3           MOV      R8,#+6
   \   00000084   0290A0E3           MOV      R9,#+2
   \   00000088   07A0A0E3           MOV      R10,#+7
   \   0000008C   09B0A0E3           MOV      R11,#+9
   \   00000090   030050E3           CMP      R0,#+3
   \   00000094   2B00001A           BNE      ??Disp_Contact_Menu_2
   \   00000098   0900D4E5           LDRB     R0,[R4, #+9]
   \   0000009C   060050E3           CMP      R0,#+6
   \   000000A0   6300000A           BEQ      ??Disp_Contact_Menu_3
    600            {
    601              TRESOURCE* MYMUCRES = CList_IsResourceInList(CList_FindMUCByJID(CList_FindContactByJID(Act_contact->full_name)->JID)->conf_jid);
   \   000000A4   040094E5           LDR      R0,[R4, #+4]
   \   000000A8   ........           _BLF     CList_FindContactByJID,??CList_FindContactByJID??rA
   \   000000AC   000090E5           LDR      R0,[R0, #+0]
   \   000000B0   ........           _BLF     CList_FindMUCByJID,??CList_FindMUCByJID??rA
   \   000000B4   000090E5           LDR      R0,[R0, #+0]
   \   000000B8   ........           _BLF     CList_IsResourceInList,??CList_IsResourceInList??rA
    602              Menu_Contents[n_items++]=MI_QUERY_VERSION;
   \   000000BC   061087E0           ADD      R1,R7,R6
   \   000000C0   5090C1E5           STRB     R9,[R1, #+80]
   \   000000C4   011087E2           ADD      R1,R7,#+1
    603              Menu_Contents[n_items++]=MI_DISCO_QUERY;
   \   000000C8   062081E0           ADD      R2,R1,R6
   \   000000CC   5050C2E5           STRB     R5,[R2, #+80]
   \   000000D0   011081E2           ADD      R1,R1,#+1
    604              Menu_Contents[n_items++]=MI_VCARD_QUERY;
   \   000000D4   062081E0           ADD      R2,R1,R6
   \   000000D8   50A0C2E5           STRB     R10,[R2, #+80]
   \   000000DC   011081E2           ADD      R1,R1,#+1
    605              Menu_Contents[n_items++]=MI_TIME_QUERY;
   \   000000E0   062081E0           ADD      R2,R1,R6
   \   000000E4   5080C2E5           STRB     R8,[R2, #+80]
   \   000000E8   011081E2           ADD      R1,R1,#+1
    606              Menu_Contents[n_items++]=MI_LASTACTIV_QUERY;
   \   000000EC   062081E0           ADD      R2,R1,R6
   \   000000F0   50B0C2E5           STRB     R11,[R2, #+80]
   \   000000F4   017081E2           ADD      R7,R1,#+1
    607            if(!(MYMUCRES->muc_privs.role<ROLE_MODERATOR)&&(MYMUCRES->muc_privs.aff>Act_contact->muc_privs.aff||(MYMUCRES->muc_privs.aff<AFFILIATION_ADMIN&&Act_contact->muc_privs.role<ROLE_MODERATOR))||MYMUCRES->muc_privs.aff==AFFILIATION_OWNER)
   \   000000F8   2110D0E5           LDRB     R1,[R0, #+33]
   \   000000FC   030051E3           CMP      R1,#+3
   \   00000100   0900003A           BCC      ??Disp_Contact_Menu_4
   \   00000104   2010D0E5           LDRB     R1,[R0, #+32]
   \   00000108   2020D4E5           LDRB     R2,[R4, #+32]
   \   0000010C   010052E1           CMP      R2,R1
   \   00000110   0800003A           BCC      ??Disp_Contact_Menu_5
   \   00000114   030051E3           CMP      R1,#+3
   \   00000118   0300002A           BCS      ??Disp_Contact_Menu_4
   \   0000011C   2100D4E5           LDRB     R0,[R4, #+33]
   \   00000120   030050E3           CMP      R0,#+3
   \   00000124   0300003A           BCC      ??Disp_Contact_Menu_5
   \   00000128   060000EA           B        ??Disp_Contact_Menu_2
   \                     ??Disp_Contact_Menu_4:
   \   0000012C   2000D0E5           LDRB     R0,[R0, #+32]
   \   00000130   040050E3           CMP      R0,#+4
   \   00000134   0300001A           BNE      ??Disp_Contact_Menu_2
    608              {
    609                Menu_Contents[n_items++]=MI_MUC_ADMIN;
   \                     ??Disp_Contact_Menu_5:
   \   00000138   060087E0           ADD      R0,R7,R6
   \   0000013C   0810A0E3           MOV      R1,#+8
   \   00000140   5010C0E5           STRB     R1,[R0, #+80]
   \   00000144   017087E2           ADD      R7,R7,#+1
    610              }
    611            }
    612          
    613            if((Act_contact->entry_type==T_NORMAL)||(Act_contact->entry_type==T_VIRTUAL))
   \                     ??Disp_Contact_Menu_2:
   \   00000148   0820D4E5           LDRB     R2,[R4, #+8]
   \   0000014C   0B00A0E3           MOV      R0,#+11
   \   00000150   0A10A0E3           MOV      R1,#+10
   \   00000154   000052E3           CMP      R2,#+0
   \   00000158   01005213           CMPNE    R2,#+1
   \   0000015C   1800001A           BNE      ??Disp_Contact_Menu_6
    614            {
    615              Menu_Contents[n_items++]=MI_QUERY_VERSION;
   \   00000160   062087E0           ADD      R2,R7,R6
   \   00000164   5090C2E5           STRB     R9,[R2, #+80]
   \   00000168   012087E2           ADD      R2,R7,#+1
    616              Menu_Contents[n_items++]=MI_HISTORY_OPEN;
   \   0000016C   063082E0           ADD      R3,R2,R6
   \   00000170   0570A0E3           MOV      R7,#+5
   \   00000174   5070C3E5           STRB     R7,[R3, #+80]
   \   00000178   012082E2           ADD      R2,R2,#+1
    617              Menu_Contents[n_items++]=MI_DISCO_QUERY;
   \   0000017C   063082E0           ADD      R3,R2,R6
   \   00000180   5050C3E5           STRB     R5,[R3, #+80]
   \   00000184   012082E2           ADD      R2,R2,#+1
    618              Menu_Contents[n_items++]=MI_VCARD_QUERY;
   \   00000188   063082E0           ADD      R3,R2,R6
   \   0000018C   50A0C3E5           STRB     R10,[R3, #+80]
   \   00000190   012082E2           ADD      R2,R2,#+1
    619              Menu_Contents[n_items++]=MI_TIME_QUERY;
   \   00000194   063082E0           ADD      R3,R2,R6
   \   00000198   5080C3E5           STRB     R8,[R3, #+80]
   \   0000019C   012082E2           ADD      R2,R2,#+1
    620              Menu_Contents[n_items++]=MI_LASTACTIV_QUERY;
   \   000001A0   063082E0           ADD      R3,R2,R6
   \   000001A4   50B0C3E5           STRB     R11,[R3, #+80]
   \   000001A8   012082E2           ADD      R2,R2,#+1
    621              Menu_Contents[n_items++]=MI_SUBSCRIBES_MENU;
   \   000001AC   063082E0           ADD      R3,R2,R6
   \   000001B0   5010C3E5           STRB     R1,[R3, #+80]
   \   000001B4   012082E2           ADD      R2,R2,#+1
    622              Menu_Contents[n_items++]=MI_CHANGECONTACT_VERSION;
   \   000001B8   063082E0           ADD      R3,R2,R6
   \   000001BC   5000C3E5           STRB     R0,[R3, #+80]
   \   000001C0   017082E2           ADD      R7,R2,#+1
    623            }
    624          
    625            if(Act_contact->entry_type==T_TRANSPORT)
   \                     ??Disp_Contact_Menu_6:
   \   000001C4   0820D4E5           LDRB     R2,[R4, #+8]
   \   000001C8   040052E3           CMP      R2,#+4
   \   000001CC   1800001A           BNE      ??Disp_Contact_Menu_3
    626            {
    627              Menu_Contents[n_items++]=MI_LOGIN_LOGOUT;
   \   000001D0   062087E0           ADD      R2,R7,R6
   \   000001D4   0330A0E3           MOV      R3,#+3
   \   000001D8   5030C2E5           STRB     R3,[R2, #+80]
   \   000001DC   012087E2           ADD      R2,R7,#+1
    628              Menu_Contents[n_items++]=MI_QUERY_VERSION;
   \   000001E0   063082E0           ADD      R3,R2,R6
   \   000001E4   5090C3E5           STRB     R9,[R3, #+80]
   \   000001E8   012082E2           ADD      R2,R2,#+1
    629              Menu_Contents[n_items++]=MI_DISCO_QUERY;
   \   000001EC   063082E0           ADD      R3,R2,R6
   \   000001F0   5050C3E5           STRB     R5,[R3, #+80]
   \   000001F4   012082E2           ADD      R2,R2,#+1
    630              Menu_Contents[n_items++]=MI_VCARD_QUERY;
   \   000001F8   063082E0           ADD      R3,R2,R6
   \   000001FC   50A0C3E5           STRB     R10,[R3, #+80]
   \   00000200   012082E2           ADD      R2,R2,#+1
    631              Menu_Contents[n_items++]=MI_TIME_QUERY;
   \   00000204   063082E0           ADD      R3,R2,R6
   \   00000208   5080C3E5           STRB     R8,[R3, #+80]
   \   0000020C   012082E2           ADD      R2,R2,#+1
    632              Menu_Contents[n_items++]=MI_LASTACTIV_QUERY;
   \   00000210   063082E0           ADD      R3,R2,R6
   \   00000214   50B0C3E5           STRB     R11,[R3, #+80]
   \   00000218   012082E2           ADD      R2,R2,#+1
    633              Menu_Contents[n_items++]=MI_SUBSCRIBES_MENU;
   \   0000021C   063082E0           ADD      R3,R2,R6
   \   00000220   5010C3E5           STRB     R1,[R3, #+80]
   \   00000224   011082E2           ADD      R1,R2,#+1
    634              Menu_Contents[n_items++]=MI_CHANGECONTACT_VERSION;
   \   00000228   062081E0           ADD      R2,R1,R6
   \   0000022C   5000C2E5           STRB     R0,[R2, #+80]
   \   00000230   017081E2           ADD      R7,R1,#+1
    635            }
    636            
    637            if(n_items)
   \                     ??Disp_Contact_Menu_3:
   \   00000234   000057E3           CMP      R7,#+0
   \   00000238   F08FBD08           POPEQ    {R4-R11,PC}
    638            {
    639              patch_rect(&contact_menuhdr.rc,0,YDISP,ScreenW()-1,HeaderH()+YDISP);
   \   0000023C   8A8100EF           SWI      +33162
   \   00000240   0040A0E1           MOV      R4,R0
   \   00000244   888100EF           SWI      +33160
   \   00000248   181084E2           ADD      R1,R4,#+24
   \   0000024C   010040E2           SUB      R0,R0,#+1
   \   00000250   0020A0E3           MOV      R2,#+0
   \   00000254   B020C6E1           STRH     R2,[R6, #+0]
   \   00000258   1820A0E3           MOV      R2,#+24
   \   0000025C   B220C6E1           STRH     R2,[R6, #+2]
   \   00000260   B400C6E1           STRH     R0,[R6, #+4]
   \   00000264   B610C6E1           STRH     R1,[R6, #+6]
    640              Contact_MenuID=CreateMenu(0,0,&contact_menu,&contact_menuhdr,0,n_items,0,0);
   \   00000268   0000A0E3           MOV      R0,#+0
   \   0000026C   01002DE9           PUSH     {R0}
   \   00000270   01002DE9           PUSH     {R0}
   \   00000274   80002DE9           PUSH     {R7}
   \   00000278   01002DE9           PUSH     {R0}
   \   0000027C   0630A0E1           MOV      R3,R6
   \   00000280   5C2086E2           ADD      R2,R6,#+92
   \   00000284   0010A0E3           MOV      R1,#+0
   \   00000288   520100EF           SWI      +338
   \   0000028C   480086E5           STR      R0,[R6, #+72]
   \   00000290   10D08DE2           ADD      SP,SP,#+16
   \   00000294   F08FBDE8           POP      {R4-R11,PC}      ;; return
   \                     ??Disp_Contact_Menu_0:
   \   00000298   ........           DC32     contact_menuhdr
    641            }
    642            //else
    643            //{
    644            //MsgBoxError(1,(int)LG_NOSUPACTION);
    645            //}
    646          }
    647          
    648          //////////////////////// Menu "muc#admin" ///////////////////////////

   \                                 In segment CODE, align 4, keep-with-next
    649          void ma_menu_ghook(void *data, int cmd)
    650          {
   \                     ma_menu_ghook:
   \   00000000   00402DE9           PUSH     {LR}
    651            if (cmd==0x0A)  // onFocus
   \   00000004   0A0051E3           CMP      R1,#+10
   \   00000008   0080BD18           POPNE    {PC}
    652            {
    653              DisableIDLETMR();
   \   0000000C   7F0100EF           SWI      +383
    654            }
    655          }
   \   00000010   0080BDE8           POP      {PC}             ;; return
    656          

   \                                 In segment CODE, align 4, keep-with-next
    657          int ma_menu_onkey(void *data, GUI_MSG *msg)
    658          {
   \                     ma_menu_onkey:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
   \   00000004   0150A0E1           MOV      R5,R1
    659            int i=GetCurMenuItem(data);
   \   00000008   8F0100EF           SWI      +399
   \   0000000C   0060A0E1           MOV      R6,R0
    660            MUC_ADMIN admin_cmd;
    661            if(msg->keys==0x18 || msg->keys==0x3D)
   \   00000010   F200D5E1           LDRSH    R0,[R5, #+2]
   \   00000014   180050E3           CMP      R0,#+24
   \   00000018   3D005013           CMPNE    R0,#+61
   \   0000001C   2C00001A           BNE      ??ma_menu_onkey_0
    662            {
    663              CLIST* room=CList_FindContactByJID(CList_GetActiveContact()->full_name);
   \   00000020   ........           _BLF     CList_GetActiveContact,??CList_GetActiveContact??rA
   \   00000024   040090E5           LDR      R0,[R0, #+4]
   \   00000028   ........           _BLF     CList_FindContactByJID,??CList_FindContactByJID??rA
   \   0000002C   0050A0E1           MOV      R5,R0
    664              char* nick = Get_Resource_Name_By_FullJID(CList_GetActiveContact()->full_name);
   \   00000030   ........           _BLF     CList_GetActiveContact,??CList_GetActiveContact??rA
   \   00000034   040090E5           LDR      R0,[R0, #+4]
   \   00000038   ........           _BLF     Get_Resource_Name_By_FullJID,??Get_Resource_Name_By_FullJID??rA
   \   0000003C   0010A0E1           MOV      R1,R0
   \   00000040   ........           LDR      R0,??DataTable10  ;; ma_menuhdr
   \   00000044   000086E0           ADD      R0,R6,R0
   \   00000048   1400D0E5           LDRB     R0,[R0, #+20]
   \   0000004C   010050E3           CMP      R0,#+1
    665              if(MA_Menu_Contents[i]==MA_CONF_KICK_THIS)admin_cmd=ADM_KICK;
   \   00000050   0040A003           MOVEQ    R4,#+0
   \   00000054   1900000A           BEQ      ??ma_menu_onkey_1
    666              if(MA_Menu_Contents[i]==MA_CONF_BAN_THIS)admin_cmd=ADM_BAN;
   \   00000058   020050E3           CMP      R0,#+2
   \   0000005C   0140A003           MOVEQ    R4,#+1
   \   00000060   1600000A           BEQ      ??ma_menu_onkey_1
    667              if(MA_Menu_Contents[i]==MA_CONF_VREJ_THIS)admin_cmd=ADM_VOICE_REMOVE;
   \   00000064   030050E3           CMP      R0,#+3
   \   00000068   0240A003           MOVEQ    R4,#+2
   \   0000006C   1300000A           BEQ      ??ma_menu_onkey_1
    668              if(MA_Menu_Contents[i]==MA_CONF_VGR_THIS)admin_cmd=ADM_VOICE_GRANT;
   \   00000070   040050E3           CMP      R0,#+4
   \   00000074   0340A003           MOVEQ    R4,#+3
   \   00000078   1000000A           BEQ      ??ma_menu_onkey_1
    669              if(MA_Menu_Contents[i]==MA_CONF_PARTICIPANT)admin_cmd=ADM_PARTICIPANT;
   \   0000007C   050050E3           CMP      R0,#+5
   \   00000080   0440A003           MOVEQ    R4,#+4
   \   00000084   0D00000A           BEQ      ??ma_menu_onkey_1
    670              if(MA_Menu_Contents[i]==MA_CONF_MEMBER)admin_cmd=ADM_MEMBER;
   \   00000088   060050E3           CMP      R0,#+6
   \   0000008C   0540A003           MOVEQ    R4,#+5
   \   00000090   0A00000A           BEQ      ??ma_menu_onkey_1
    671              if(MA_Menu_Contents[i]==MA_CONF_MODERATOR)admin_cmd=ADM_MODERATOR;
   \   00000094   070050E3           CMP      R0,#+7
   \   00000098   0640A003           MOVEQ    R4,#+6
   \   0000009C   0700000A           BEQ      ??ma_menu_onkey_1
    672              if(MA_Menu_Contents[i]==MA_CONF_MGR)admin_cmd=ADM_MODERATOR_REMOVE;
   \   000000A0   080050E3           CMP      R0,#+8
   \   000000A4   0740A003           MOVEQ    R4,#+7
   \   000000A8   0400000A           BEQ      ??ma_menu_onkey_1
    673              if(MA_Menu_Contents[i]==MA_CONF_ADMIN)admin_cmd=ADM_ADMIN;
   \   000000AC   090050E3           CMP      R0,#+9
   \   000000B0   0840A003           MOVEQ    R4,#+8
   \   000000B4   0100000A           BEQ      ??ma_menu_onkey_1
    674              if(MA_Menu_Contents[i]==MA_CONF_OWNER)admin_cmd=ADM_OWNER;
   \   000000B8   0A0050E3           CMP      R0,#+10
   \   000000BC   0940A003           MOVEQ    R4,#+9
    675              ConstructReasonDlg(room->JID, nick, admin_cmd);
   \                     ??ma_menu_onkey_1:
   \   000000C0   000095E5           LDR      R0,[R5, #+0]
   \   000000C4   0420A0E1           MOV      R2,R4
   \   000000C8   ........           BL       ConstructReasonDlg
    676              //MUC_Admin_Command(room->JID, nick, admin_cmd, "SieJC_muc#admin");
    677              return 1;
   \   000000CC   0100A0E3           MOV      R0,#+1
   \   000000D0   7080BDE8           POP      {R4-R6,PC}
    678            }
    679            return 0;
   \                     ??ma_menu_onkey_0:
   \   000000D4   0000A0E3           MOV      R0,#+0
   \   000000D8   7080BDE8           POP      {R4-R6,PC}       ;; return
    680          }
    681          

   \                                 In segment CODE, align 4, keep-with-next
    682          void ma_menu_iconhndl(void *data, int curitem, void *unk)
    683          {
   \                     ma_menu_iconhndl:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
    684            WSHDR *ws;
    685            char test_str[48];
    686            void *item=AllocMenuItem(data);
    687            strcpy(test_str,"(ошибка)");
   \   00000004   ........           LDR      R7,??DataTable12  ;; `?<Constant "(\\356\\370\\350\\341\\352\\340)">`
   \   00000008   30D04DE2           SUB      SP,SP,#+48
   \   0000000C   0040A0E1           MOV      R4,R0
   \   00000010   0150A0E1           MOV      R5,R1
   \   00000014   970100EF           SWI      +407
   \   00000018   0060A0E1           MOV      R6,R0
   \   0000001C   0710A0E1           MOV      R1,R7
   \   00000020   0D00A0E1           MOV      R0,SP
   \   00000024   1A0000EF           SWI      +26
    688          
    689            TRESOURCE *Act_contact = CList_GetActiveContact();
   \   00000028   ........           _BLF     CList_GetActiveContact,??CList_GetActiveContact??rA
    690          
    691            switch(MA_Menu_Contents[curitem])
   \   0000002C   ........           LDR      R0,??DataTable10  ;; ma_menuhdr
   \   00000030   000085E0           ADD      R0,R5,R0
   \   00000034   1400D0E5           LDRB     R0,[R0, #+20]
   \   00000038   010040E2           SUB      R0,R0,#+1
   \   0000003C   090050E3           CMP      R0,#+9
   \   00000040   1A00008A           BHI      ??ma_menu_iconhndl_1
   \   00000044   011F8FE2           ADR      R1,??ma_menu_iconhndl_0
   \   00000048   0010D1E7           LDRB     R1,[R1, R0]
   \   0000004C   01F18FE0           ADD      PC,PC,R1, LSL #+2
   \                     ??ma_menu_iconhndl_0:
   \   00000050   02040608           DC8      +2,+4,+6,+8
   \   00000054   0A0C100E           DC8      +10,+12,+16,+14
   \   00000058   12140000           DC8      +18,+20,+0,+0
    692            {
    693            case MA_CONF_KICK_THIS:
    694              {
    695                strcpy(test_str,LG_KIK);
   \                     ??ma_menu_iconhndl_2:
   \   0000005C   221F8FE2           ADR      R1,??ma_menu_iconhndl_3  ;; "Кик"
   \   00000060   100000EA           B        ??ma_menu_iconhndl_4
    696                break;
    697              }
    698            case MA_CONF_BAN_THIS:
    699              {
    700                strcpy(test_str,LG_BAN);
   \                     ??ma_menu_iconhndl_5:
   \   00000064   211F8FE2           ADR      R1,??ma_menu_iconhndl_3+0x4  ;; "Бан"
   \   00000068   0E0000EA           B        ??ma_menu_iconhndl_4
    701                break;
    702              }
    703            case MA_CONF_VREJ_THIS:
    704              {
    705                strcpy(test_str,LG_LVOISE);
   \                     ??ma_menu_iconhndl_6:
   \   0000006C   B41087E2           ADD      R1,R7,#+180
   \   00000070   0C0000EA           B        ??ma_menu_iconhndl_4
    706                break;
    707              }
    708            case MA_CONF_VGR_THIS:
    709              {
    710                strcpy(test_str,LG_GVOISE);
   \                     ??ma_menu_iconhndl_7:
   \   00000074   C41087E2           ADD      R1,R7,#+196
   \   00000078   0A0000EA           B        ??ma_menu_iconhndl_4
    711                break;
    712              }
    713          
    714            case MA_CONF_PARTICIPANT:
    715              {
    716                strcpy(test_str,LG_PARTICIPANT);
   \                     ??ma_menu_iconhndl_8:
   \   0000007C   D01087E2           ADD      R1,R7,#+208
   \   00000080   080000EA           B        ??ma_menu_iconhndl_4
    717                break;
    718              }
    719          
    720            case MA_CONF_MEMBER:
    721              {
    722                strcpy(test_str,LG_MEMBER);
   \                     ??ma_menu_iconhndl_9:
   \   00000084   531F87E2           ADD      R1,R7,#+332
   \   00000088   060000EA           B        ??ma_menu_iconhndl_4
    723                break;
    724              }
    725            case MA_CONF_MGR:
    726              {
    727                strcpy(test_str,LG_MODERATOR_REMOVE);
   \                     ??ma_menu_iconhndl_10:
   \   0000008C   E01087E2           ADD      R1,R7,#+224
   \   00000090   040000EA           B        ??ma_menu_iconhndl_4
    728                break;   
    729              }
    730              
    731            case MA_CONF_MODERATOR:
    732              {
    733                strcpy(test_str,LG_MODERATOR);
   \                     ??ma_menu_iconhndl_11:
   \   00000094   F41087E2           ADD      R1,R7,#+244
   \   00000098   020000EA           B        ??ma_menu_iconhndl_4
    734                break;
    735              }
    736          
    737            case MA_CONF_ADMIN:
    738              {
    739                strcpy(test_str,LG_ADMIN);
   \                     ??ma_menu_iconhndl_12:
   \   0000009C   411F87E2           ADD      R1,R7,#+260
   \   000000A0   000000EA           B        ??ma_menu_iconhndl_4
    740                break;
    741              }
    742          
    743            case MA_CONF_OWNER:
    744              {
    745                strcpy(test_str,LG_OWNER);
   \                     ??ma_menu_iconhndl_13:
   \   000000A4   441F87E2           ADD      R1,R7,#+272
   \                     ??ma_menu_iconhndl_4:
   \   000000A8   0D00A0E1           MOV      R0,SP
   \   000000AC   1A0000EF           SWI      +26
    746                break;
    747              }
    748            }
    749          
    750            ws=AllocMenuWS(data,strlen(test_str));
   \                     ??ma_menu_iconhndl_1:
   \   000000B0   0D00A0E1           MOV      R0,SP
   \   000000B4   1B0000EF           SWI      +27
   \   000000B8   0010A0E1           MOV      R1,R0
   \   000000BC   0400A0E1           MOV      R0,R4
   \   000000C0   980100EF           SWI      +408
   \   000000C4   0070A0E1           MOV      R7,R0
    751            ascii2ws(ws, test_str);
   \   000000C8   0D10A0E1           MOV      R1,SP
   \   000000CC   ........           _BLF     ascii2ws,??ascii2ws??rA
    752          
    753            SetMenuItemText(data,item,ws,curitem);
   \   000000D0   0530A0E1           MOV      R3,R5
   \   000000D4   0720A0E1           MOV      R2,R7
   \   000000D8   0610A0E1           MOV      R1,R6
   \   000000DC   0400A0E1           MOV      R0,R4
   \   000000E0   9A0100EF           SWI      +410
    754          }
   \   000000E4   30D08DE2           ADD      SP,SP,#+48
   \   000000E8   F080BDE8           POP      {R4-R7,PC}       ;; return
   \                     ??ma_menu_iconhndl_3:
   \   000000EC   CAE8EA00           DC8      "Кик"
   \   000000F0   C1E0ED00           DC8      "Бан"
    755          
    756          //////////SUBSCRIBE

   \                                 In segment CODE, align 4, keep-with-next
    757          void contc_menu_ghook(void *data, int cmd)
    758          {
   \                     contc_menu_ghook:
   \   00000000   00402DE9           PUSH     {LR}
    759            if (cmd==0x0A)  // onFocus
   \   00000004   0A0051E3           CMP      R1,#+10
   \   00000008   0080BD18           POPNE    {PC}
    760            {
    761              DisableIDLETMR();
   \   0000000C   7F0100EF           SWI      +383
    762            }
    763          }
   \   00000010   0080BDE8           POP      {PC}             ;; return
    764          

   \                                 In segment CODE, align 4, keep-with-next
    765          int contc_menu_onkey(void *data, GUI_MSG *msg)
    766          {
   \                     contc_menu_onkey:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   \   00000004   0140A0E1           MOV      R4,R1
    767            int i=GetCurMenuItem(data);
   \   00000008   8F0100EF           SWI      +399
   \   0000000C   0050A0E1           MOV      R5,R0
    768            if(msg->keys==0x18 || msg->keys==0x3D)
   \   00000010   F200D4E1           LDRSH    R0,[R4, #+2]
   \   00000014   180050E3           CMP      R0,#+24
   \   00000018   3D005013           CMPNE    R0,#+61
   \   0000001C   1E00001A           BNE      ??contc_menu_onkey_0
    769            {
    770              char* jid=CList_FindContactByJID(CList_GetActiveContact()->full_name)->JID;
   \   00000020   ........           _BLF     CList_GetActiveContact,??CList_GetActiveContact??rA
   \   00000024   040090E5           LDR      R0,[R0, #+4]
   \   00000028   ........           _BLF     CList_FindContactByJID,??CList_FindContactByJID??rA
    771          //    char* nick = Get_Resource_Name_By_FullJID(CList_GetActiveContact()->full_name);
    772              switch(CONTC_Menu_Contents[i])
   \   0000002C   ........           LDR      R1,??DataTable13  ;; contc_menuhdr
   \   00000030   000090E5           LDR      R0,[R0, #+0]
   \   00000034   011085E0           ADD      R1,R5,R1
   \   00000038   1410D1E5           LDRB     R1,[R1, #+20]
   \   0000003C   011051E2           SUBS     R1,R1,#+1
   \   00000040   0600000A           BEQ      ??contc_menu_onkey_1
   \   00000044   011051E2           SUBS     R1,R1,#+1
   \   00000048   0600000A           BEQ      ??contc_menu_onkey_2
   \   0000004C   011051E2           SUBS     R1,R1,#+1
   \   00000050   0A00000A           BEQ      ??contc_menu_onkey_3
   \   00000054   011051E2           SUBS     R1,R1,#+1
   \   00000058   0600000A           BEQ      ??contc_menu_onkey_4
   \   0000005C   090000EA           B        ??contc_menu_onkey_5
    773              {
    774              case CONTC_SUBSCRIBE:
    775                {
    776                  Send_ShortPresence(jid,8);
   \                     ??contc_menu_onkey_1:
   \   00000060   0810A0E3           MOV      R1,#+8
   \   00000064   000000EA           B        ??contc_menu_onkey_6
    777                break;    
    778                }
    779              case CONTC_SUBSCRIBED:
    780                {
    781                  Send_ShortPresence(jid,9);
   \                     ??contc_menu_onkey_2:
   \   00000068   0910A0E3           MOV      R1,#+9
   \                     ??contc_menu_onkey_6:
   \   0000006C   ........           _BLF     Send_ShortPresence,??Send_ShortPresence??rA
   \   00000070   0100A0E3           MOV      R0,#+1
   \   00000074   3080BDE8           POP      {R4,R5,PC}
    782                break;    
    783                }
    784              case CONTC_UNSUBSCRIBE:
    785                {
    786                  Send_ShortPresence(jid,10);
   \                     ??contc_menu_onkey_4:
   \   00000078   0A10A0E3           MOV      R1,#+10
   \   0000007C   FAFFFFEA           B        ??contc_menu_onkey_6
    787                break;    
    788                }
    789              case CONTC_UNSUBSCRIBED:
    790                {
    791                  Send_ShortPresence(jid,11);
   \                     ??contc_menu_onkey_3:
   \   00000080   0B10A0E3           MOV      R1,#+11
   \   00000084   F8FFFFEA           B        ??contc_menu_onkey_6
    792                break;    
    793                }
    794           default:
    795              {
    796                MsgBoxError(1,(int)LG_UNKACTION);
   \                     ??contc_menu_onkey_5:
   \   00000088   14109FE5           LDR      R1,??contc_menu_onkey_7  ;; `?<Constant "<presence to=\\'%s\\'/>">` + 72
   \   0000008C   0100A0E3           MOV      R0,#+1
   \   00000090   4E0000EF           SWI      +78
    797              }      
    798              }
    799              return 1;
   \   00000094   0100A0E3           MOV      R0,#+1
   \   00000098   3080BDE8           POP      {R4,R5,PC}
    800            }
    801            return 0;
   \                     ??contc_menu_onkey_0:
   \   0000009C   0000A0E3           MOV      R0,#+0
   \   000000A0   3080BDE8           POP      {R4,R5,PC}       ;; return
   \                     ??contc_menu_onkey_7:
   \   000000A4   ........           DC32     `?<Constant "<presence to=\\'%s\\'/>">` + 72
    802          }
    803          

   \                                 In segment CODE, align 4, keep-with-next
    804          void contc_menu_iconhndl(void *data, int curitem, void *unk)
    805          {
   \                     contc_menu_iconhndl:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
    806            WSHDR *ws;
    807            char test_str[48];
    808            void *item=AllocMenuItem(data);
    809            strcpy(test_str,"(ошибка)");
   \   00000004   ........           LDR      R7,??DataTable12  ;; `?<Constant "(\\356\\370\\350\\341\\352\\340)">`
   \   00000008   30D04DE2           SUB      SP,SP,#+48
   \   0000000C   0040A0E1           MOV      R4,R0
   \   00000010   0150A0E1           MOV      R5,R1
   \   00000014   970100EF           SWI      +407
   \   00000018   0060A0E1           MOV      R6,R0
   \   0000001C   0710A0E1           MOV      R1,R7
   \   00000020   0D00A0E1           MOV      R0,SP
   \   00000024   1A0000EF           SWI      +26
    810          
    811            TRESOURCE *Act_contact = CList_GetActiveContact();
   \   00000028   ........           _BLF     CList_GetActiveContact,??CList_GetActiveContact??rA
    812          
    813            switch(CONTC_Menu_Contents[curitem])
   \   0000002C   ........           LDR      R0,??DataTable13  ;; contc_menuhdr
   \   00000030   000085E0           ADD      R0,R5,R0
   \   00000034   1400D0E5           LDRB     R0,[R0, #+20]
   \   00000038   010050E2           SUBS     R0,R0,#+1
   \   0000003C   0600000A           BEQ      ??contc_menu_iconhndl_0
   \   00000040   010050E2           SUBS     R0,R0,#+1
   \   00000044   0600000A           BEQ      ??contc_menu_iconhndl_1
   \   00000048   010050E2           SUBS     R0,R0,#+1
   \   0000004C   0600000A           BEQ      ??contc_menu_iconhndl_2
   \   00000050   010050E2           SUBS     R0,R0,#+1
   \   00000054   0600000A           BEQ      ??contc_menu_iconhndl_3
   \   00000058   080000EA           B        ??contc_menu_iconhndl_4
    814            {
    815            case CONTC_SUBSCRIBE:
    816              {
    817                strcpy(test_str,LG_SUBSCRIBE);
   \                     ??contc_menu_iconhndl_0:
   \   0000005C   481F87E2           ADD      R1,R7,#+288
   \   00000060   040000EA           B        ??contc_menu_iconhndl_5
    818                break;
    819              }
    820            case CONTC_SUBSCRIBED:
    821              {
    822                strcpy(test_str,LG_SUBSCRIBED);
   \                     ??contc_menu_iconhndl_1:
   \   00000064   4B1F87E2           ADD      R1,R7,#+300
   \   00000068   020000EA           B        ??contc_menu_iconhndl_5
    823                break;
    824              }
    825            case CONTC_UNSUBSCRIBED:
    826              {
    827                strcpy(test_str,LG_UNSUBSCRIBED);
   \                     ??contc_menu_iconhndl_2:
   \   0000006C   4E1F87E2           ADD      R1,R7,#+312
   \   00000070   000000EA           B        ??contc_menu_iconhndl_5
    828                break;
    829              }
    830            case CONTC_UNSUBSCRIBE:
    831              {
    832                strcpy(test_str,LG_UNSUBSCRIBE);
   \                     ??contc_menu_iconhndl_3:
   \   00000074   511F87E2           ADD      R1,R7,#+324
   \                     ??contc_menu_iconhndl_5:
   \   00000078   0D00A0E1           MOV      R0,SP
   \   0000007C   1A0000EF           SWI      +26
    833                break;
    834              }
    835            }
    836          
    837            ws=AllocMenuWS(data,strlen(test_str));
   \                     ??contc_menu_iconhndl_4:
   \   00000080   0D00A0E1           MOV      R0,SP
   \   00000084   1B0000EF           SWI      +27
   \   00000088   0010A0E1           MOV      R1,R0
   \   0000008C   0400A0E1           MOV      R0,R4
   \   00000090   980100EF           SWI      +408
   \   00000094   0070A0E1           MOV      R7,R0
    838            ascii2ws(ws, test_str);
   \   00000098   0D10A0E1           MOV      R1,SP
   \   0000009C   ........           _BLF     ascii2ws,??ascii2ws??rA
    839            SetMenuItemText(data,item,ws,curitem);
   \   000000A0   0530A0E1           MOV      R3,R5
   \   000000A4   0720A0E1           MOV      R2,R7
   \   000000A8   0610A0E1           MOV      R1,R6
   \   000000AC   0400A0E1           MOV      R0,R4
   \   000000B0   9A0100EF           SWI      +410
    840          }
   \   000000B4   30D08DE2           ADD      SP,SP,#+48
   \   000000B8   F080BDE8           POP      {R4-R7,PC}       ;; return
    841          
    842          //=====================================================
    843          

   \                                 In segment CODE, align 4, keep-with-next
    844          int reason_onkey(GUI *gui, GUI_MSG *msg)
    845          {
   \                     reason_onkey:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
   \   00000004   30D04DE2           SUB      SP,SP,#+48
   \   00000008   0040A0E1           MOV      R4,R0
    846            if (msg->gbsmsg->msg == KEY_DOWN)
   \   0000000C   040091E5           LDR      R0,[R1, #+4]
   \   00000010   9330A0E3           MOV      R3,#+147
   \   00000014   042090E5           LDR      R2,[R0, #+4]
   \   00000018   403F83E3           ORR      R3,R3,#0x100
   \   0000001C   030052E1           CMP      R2,R3
   \   00000020   1B00001A           BNE      ??reason_onkey_0
    847            {
    848              if ((msg->gbsmsg->submess == GREEN_BUTTON) || (msg->keys == 0x0018))
   \   00000024   080090E5           LDR      R0,[R0, #+8]
   \   00000028   0B0050E3           CMP      R0,#+11
   \   0000002C   F200D111           LDRSHNE  R0,[R1, #+2]
   \   00000030   18005013           CMPNE    R0,#+24
   \   00000034   1600001A           BNE      ??reason_onkey_0
    849              {
    850                EDITCONTROL ec;
    851                char *s = malloc(256);
    852                int len;
    853                ExtractEditControl(gui, reason_pos, &ec);
   \   00000038   60609FE5           LDR      R6,??reason_onkey_1  ;; reason_desc
   \   0000003C   400FA0E3           MOV      R0,#+256
   \   00000040   140000EF           SWI      +20
   \   00000044   541096E5           LDR      R1,[R6, #+84]
   \   00000048   0050A0E1           MOV      R5,R0
   \   0000004C   04208DE2           ADD      R2,SP,#+4
   \   00000050   0400A0E1           MOV      R0,R4
   \   00000054   690100EF           SWI      +361
    854                ws_2utf8(ec.pWS, s, &len, 256);
   \   00000058   2C009DE5           LDR      R0,[SP, #+44]
   \   0000005C   403FA0E3           MOV      R3,#+256
   \   00000060   0D20A0E1           MOV      R2,SP
   \   00000064   0510A0E1           MOV      R1,R5
   \   00000068   E20100EF           SWI      +482
    855                MUC_Admin_Command(room_name, room_jid, macmd, s);
   \   0000006C   5820D6E5           LDRB     R2,[R6, #+88]
   \   00000070   501096E5           LDR      R1,[R6, #+80]
   \   00000074   4C0096E5           LDR      R0,[R6, #+76]
   \   00000078   0530A0E1           MOV      R3,R5
   \   0000007C   ........           _BLF     MUC_Admin_Command,??MUC_Admin_Command??rA
    856                mfree(s);
   \   00000080   0500A0E1           MOV      R0,R5
   \   00000084   150000EF           SWI      +21
    857                return 1;
   \   00000088   0100A0E3           MOV      R0,#+1
   \   0000008C   30D08DE2           ADD      SP,SP,#+48
   \   00000090   7080BDE8           POP      {R4-R6,PC}
    858              }
    859            }
    860            return 0;
   \                     ??reason_onkey_0:
   \   00000094   0000A0E3           MOV      R0,#+0
   \   00000098   30D08DE2           ADD      SP,SP,#+48
   \   0000009C   7080BDE8           POP      {R4-R6,PC}       ;; return
   \                     ??reason_onkey_1:
   \   000000A0   ........           DC32     reason_desc
    861          }
    862          

   \                                 In segment CODE, align 4, keep-with-next
    863          void reason_ghook(GUI *gui, int cmd)
    864          {
   \                     reason_ghook:
   \   00000000   00402DE9           PUSH     {LR}
    865            if (cmd == 7)
   \   00000004   070051E3           CMP      R1,#+7
   \   00000008   0080BD18           POPNE    {PC}
    866            {
    867              static SOFTKEY_DESC sk = {0x0018, 0x0000, (int)LG_OK};
    868          #ifdef NEWSGOLD
    869              SetSoftKey(gui, &sk, 0);
   \   0000000C   08109FE5           LDR      R1,??reason_ghook_0  ;; ??sk
   \   00000010   0020A0E3           MOV      R2,#+0
   \   00000014   680100EF           SWI      +360
    870          #else
    871              SetSoftKey(gui, &sk, 1);
    872          #endif
    873            }
    874          }
   \   00000018   0080BDE8           POP      {PC}             ;; return
   \                     ??reason_ghook_0:
   \   0000001C   ........           DC32     ??sk
    875          

   \                                 In segment CODE, align 4, keep-with-next
    876          void reason_locret(void) {};
   \                     reason_locret:
   \   00000000   1EFF2FE1           BX       LR               ;; return

   \                                 In segment DATA_I, align 4, align-sorted
    877          
    878          SOFTKEY_DESC reason_sk[]=
    879          {
    880            {0x0018,0x0000,(int)LG_OK},
    881            {0x0001,0x0000,(int)LG_CLOSE},
    882            {0x003D,0x0000,(int)LGP_DOIT_PIC}
    883          };
    884          
    885          SOFTKEYSTAB reason_skt=
    886          {
    887            reason_sk,0
    888          };
    889          
    890          HEADER_DESC reason_hdr={0,0,0,0,NULL,(int)LG_REASON,LGP_NULL};
    891          
    892          INPUTDIA_DESC reason_desc=
   \                     reason_desc:
   \   00000000                      DS8 56
   \   00000038                      REQUIRE `?<Initializer for reason_desc>`
   \                     reason_hdr:
   \   00000038                      DS8 20
   \   0000004C                      REQUIRE `?<Initializer for reason_hdr>`
   \                     room_name:
   \   0000004C                      DS8 4
   \   00000050                      REQUIRE `?<Initializer for room_name>`
   \                     room_jid:
   \   00000050                      DS8 4
   \   00000054                      REQUIRE `?<Initializer for room_jid>`
   \                     reason_pos:
   \   00000054                      DS8 4
   \   00000058                      REQUIRE `?<Initializer for reason_pos>`
   \                     macmd:
   \   00000058                      DS8 1
   \   00000059                      REQUIRE `?<Initializer for macmd>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     contact_menuhdr:
   \   00000000                      DS8 20
   \   00000014                      REQUIRE `?<Initializer for contact_menuhdr>`
   \                     cmS_ICONS:
   \   00000014                      DS8 52
   \   00000048                      REQUIRE `?<Initializer for cmS_ICONS>`
   \                     Contact_MenuID:
   \   00000048                      DS8 4
   \   0000004C                      REQUIRE `?<Initializer for Contact_MenuID>`
   \                     Req_Close_Cont_Menu:
   \   0000004C                      DS8 4
   \   00000050                      REQUIRE `?<Initializer for Req_Close_Cont_Menu>`
   \                     Menu_Contents:
   \   00000050                      DS8 12
   \   0000005C                      REQUIRE `?<Initializer for Menu_Contents>`
   \                     contact_menu:
   \   0000005C                      DS8 44
   \   00000088                      REQUIRE `?<Initializer for contact_menu>`
   \                     ICON_CONF_LEAVE:
   \   00000088                      DS8 128
   \   00000108                      REQUIRE `?<Initializer for ICON_CONF_LEAVE>`
   \                     ICON_QUERY_VERSION:
   \   00000108                      DS8 128
   \   00000188                      REQUIRE `?<Initializer for ICON_QUERY_VERSION>`
   \                     ICON_LOGIN_LOGOUT:
   \   00000188                      DS8 128
   \   00000208                      REQUIRE `?<Initializer for ICON_LOGIN_LOGOUT>`
   \                     ICON_QUERY_DISCO:
   \   00000208                      DS8 128
   \   00000288                      REQUIRE `?<Initializer for ICON_QUERY_DISCO>`
   \                     ICON_HISTORY_OPEN:
   \   00000288                      DS8 128
   \   00000308                      REQUIRE `?<Initializer for ICON_HISTORY_OPEN>`
   \                     ICON_QUERY_TIME:
   \   00000308                      DS8 128
   \   00000388                      REQUIRE `?<Initializer for ICON_QUERY_TIME>`
   \                     ICON_QUERY_VCARD:
   \   00000388                      DS8 128
   \   00000408                      REQUIRE `?<Initializer for ICON_QUERY_VCARD>`
   \                     ICON_MUC_ADMIN:
   \   00000408                      DS8 128
   \   00000488                      REQUIRE `?<Initializer for ICON_MUC_ADMIN>`
   \                     ICON_QUERY_LASTACTIV:
   \   00000488                      DS8 128
   \   00000508                      REQUIRE `?<Initializer for ICON_QUERY_LASTACTIV>`
   \                     ICON_SUBSCRIBE_MENU:
   \   00000508                      DS8 128
   \   00000588                      REQUIRE `?<Initializer for ICON_SUBSCRIBE_MENU>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     menusoftkeys:
   \   00000000                      DS8 12
   \   0000000C                      REQUIRE `?<Initializer for menusoftkeys>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     clmenu_sk:
   \   00000000                      DS8 24
   \   00000018                      REQUIRE `?<Initializer for clmenu_sk>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     clmenu_skt:
   \   00000000                      DS8 8
   \   00000008                      REQUIRE `?<Initializer for clmenu_skt>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     ma_menuhdr:
   \   00000000                      DS8 20
   \   00000014                      REQUIRE `?<Initializer for ma_menuhdr>`
   \                     MA_Menu_Contents:
   \   00000014                      DS8 12
   \   00000020                      REQUIRE `?<Initializer for MA_Menu_Contents>`
   \                     ma_menu:
   \   00000020                      DS8 44
   \   0000004C                      REQUIRE `?<Initializer for ma_menu>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     mamenusoftkeys:
   \   00000000                      DS8 12
   \   0000000C                      REQUIRE `?<Initializer for mamenusoftkeys>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     ma_menu_sk:
   \   00000000                      DS8 24
   \   00000018                      REQUIRE `?<Initializer for ma_menu_sk>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     ma_menu_skt:
   \   00000000                      DS8 8
   \   00000008                      REQUIRE `?<Initializer for ma_menu_skt>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     contc_menuhdr:
   \   00000000                      DS8 20
   \   00000014                      REQUIRE `?<Initializer for contc_menuhdr>`
   \                     CONTC_Menu_Contents:
   \   00000014                      DS8 4
   \   00000018                      REQUIRE `?<Initializer for CONTC_Menu_Contents>`
   \                     contc_menu:
   \   00000018                      DS8 44
   \   00000044                      REQUIRE `?<Initializer for contc_menu>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     contcmenusoftkeys:
   \   00000000                      DS8 12
   \   0000000C                      REQUIRE `?<Initializer for contcmenusoftkeys>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     contc_menu_sk:
   \   00000000                      DS8 24
   \   00000018                      REQUIRE `?<Initializer for contc_menu_sk>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     contc_menu_skt:
   \   00000000                      DS8 8
   \   00000008                      REQUIRE `?<Initializer for contc_menu_skt>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     ??sk:
   \   00000000                      DS8 8
   \   00000008                      REQUIRE `?<Initializer for sk>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     reason_sk:
   \   00000000                      DS8 24
   \   00000018                      REQUIRE `?<Initializer for reason_sk>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     reason_skt:
   \   00000000                      DS8 8
   \   00000008                      REQUIRE `?<Initializer for reason_skt>`
    893          {
    894            1,
    895            reason_onkey,
    896            reason_ghook,
    897            (void *)reason_locret,
    898            0,
    899            &reason_skt,
    900            {0,0,0,0},
    901            4,
    902            100,
    903            101,
    904            0,
    905            0,
    906            0x40000000
    907          };
    908          

   \                                 In segment CODE, align 4, keep-with-next
    909          void ConstructReasonDlg(char *name, char *jid, MUC_ADMIN muccmd)
    910          {
   \                     ConstructReasonDlg:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
   \   00000004   2CD04DE2           SUB      SP,SP,#+44
    911            switch (muccmd)
   \   00000008   010052E3           CMP      R2,#+1
   \   0000000C   3F00008A           BHI      ??ConstructReasonDlg_0
    912            {
    913            case ADM_KICK:
    914            case ADM_BAN:
    915              {
    916                room_name = name;
   \   00000010   0C419FE5           LDR      R4,??ConstructReasonDlg_1+0x4  ;; reason_desc
   \   00000014   4C0084E5           STR      R0,[R4, #+76]
    917                room_jid = jid;
   \   00000018   501084E5           STR      R1,[R4, #+80]
    918                macmd = muccmd;
   \   0000001C   5820C4E5           STRB     R2,[R4, #+88]
    919                
    920                WSHDR *ws = AllocWS(256);
   \   00000020   400FA0E3           MOV      R0,#+256
   \   00000024   250100EF           SWI      +293
   \   00000028   0060A0E1           MOV      R6,R0
    921                EDITCONTROL ec;
    922                void *ma=malloc_adr();
   \   0000002C   148000EF           SWI      +32788
   \   00000030   0070A0E1           MOV      R7,R0
    923                void *eq=AllocEQueue(ma,mfree_adr());
   \   00000034   158000EF           SWI      +32789
   \   00000038   0010A0E1           MOV      R1,R0
   \   0000003C   0700A0E1           MOV      R0,R7
   \   00000040   630100EF           SWI      +355
    924                
    925                wsprintf(ws, "SieJC_muc#admin");
   \   00000044   DC109FE5           LDR      R1,??ConstructReasonDlg_1+0x8  ;; `?<Constant "SieJC_muc#admin">`
   \   00000048   0050A0E1           MOV      R5,R0
   \   0000004C   0600A0E1           MOV      R0,R6
   \   00000050   240100EF           SWI      +292
    926                PrepareEditControl(&ec);
   \   00000054   0D00A0E1           MOV      R0,SP
   \   00000058   640100EF           SWI      +356
    927                ConstructEditControl(&ec, ECT_NORMAL_TEXT, 0, ws, 256);
   \   0000005C   400FA0E3           MOV      R0,#+256
   \   00000060   01002DE9           PUSH     {R0}
   \   00000064   0630A0E1           MOV      R3,R6
   \   00000068   0020A0E3           MOV      R2,#+0
   \   0000006C   0310A0E3           MOV      R1,#+3
   \   00000070   04008DE2           ADD      R0,SP,#+4
   \   00000074   650100EF           SWI      +357
    928                reason_pos = AddEditControlToEditQend(eq,&ec,ma);
   \   00000078   0720A0E1           MOV      R2,R7
   \   0000007C   04108DE2           ADD      R1,SP,#+4
   \   00000080   0500A0E1           MOV      R0,R5
   \   00000084   660100EF           SWI      +358
   \   00000088   540084E5           STR      R0,[R4, #+84]
    929                
    930                patch_header(&reason_hdr);
   \   0000008C   0060A0E3           MOV      R6,#+0
   \   00000090   B863C4E1           STRH     R6,[R4, #+56]
   \   00000094   1800A0E3           MOV      R0,#+24
   \   00000098   BA03C4E1           STRH     R0,[R4, #+58]
   \   0000009C   888100EF           SWI      +33160
   \   000000A0   010040E2           SUB      R0,R0,#+1
   \   000000A4   BC03C4E1           STRH     R0,[R4, #+60]
   \   000000A8   8A8100EF           SWI      +33162
   \   000000AC   180080E2           ADD      R0,R0,#+24
   \   000000B0   BE03C4E1           STRH     R0,[R4, #+62]
    931                patch_input(&reason_desc);
   \   000000B4   B861C4E1           STRH     R6,[R4, #+24]
   \   000000B8   8A8100EF           SWI      +33162
   \   000000BC   190080E2           ADD      R0,R0,#+25
   \   000000C0   BA01C4E1           STRH     R0,[R4, #+26]
   \   000000C4   888100EF           SWI      +33160
   \   000000C8   010040E2           SUB      R0,R0,#+1
   \   000000CC   BC01C4E1           STRH     R0,[R4, #+28]
   \   000000D0   898100EF           SWI      +33161
   \   000000D4   0060A0E1           MOV      R6,R0
   \   000000D8   8B8100EF           SWI      +33163
   \   000000DC   000046E0           SUB      R0,R6,R0
   \   000000E0   010040E2           SUB      R0,R0,#+1
   \   000000E4   BE01C4E1           STRH     R0,[R4, #+30]
    932                CreateInputTextDialog(&reason_desc,&reason_hdr,eq,1,NULL);
   \   000000E8   0000A0E3           MOV      R0,#+0
   \   000000EC   01002DE9           PUSH     {R0}
   \   000000F0   0130A0E3           MOV      R3,#+1
   \   000000F4   0520A0E1           MOV      R2,R5
   \   000000F8   381084E2           ADD      R1,R4,#+56
   \   000000FC   0400A0E1           MOV      R0,R4
   \   00000100   670100EF           SWI      +359
    933                break;
   \   00000104   08D08DE2           ADD      SP,SP,#+8
   \   00000108   2CD08DE2           ADD      SP,SP,#+44
   \   0000010C   F080BDE8           POP      {R4-R7,PC}
    934              }
    935            default:
    936              {
    937                MUC_Admin_Command(name, jid, muccmd, "");
   \                     ??ConstructReasonDlg_0:
   \   00000110   023F8FE2           ADR      R3,??ConstructReasonDlg_1  ;; ""
   \   00000114   ........           _BLF     MUC_Admin_Command,??MUC_Admin_Command??rA
    938              }
    939            }
    940          }
   \   00000118   2CD08DE2           ADD      SP,SP,#+44
   \   0000011C   F080BDE8           POP      {R4-R7,PC}       ;; return
   \                     ??ConstructReasonDlg_1:
   \   00000120   00000000           DC8      "",+0,+0,+0
   \   00000124   ........           DC32     reason_desc
   \   00000128   ........           DC32     `?<Constant "SieJC_muc#admin">`

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable7:
   \   00000000   ........           DC32     contact_menuhdr

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable10:
   \   00000000   ........           DC32     ma_menuhdr

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable12:
   \   00000000   ........           DC32     `?<Constant "(\\356\\370\\350\\341\\352\\340)">`

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable13:
   \   00000000   ........           DC32     contc_menuhdr

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for reason_desc>`:
   \   00000000   01000000....       DC32 1, reason_onkey, reason_ghook, reason_locret, 0, reason_skt
   \              ............
   \              ........0000
   \              0000........
   \   00000018   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   00000020   040000006400       DC32 4, 100, 101, 0, 0, 1073741824
   \              000065000000
   \              000000000000
   \              000000000040
   \                     `?<Initializer for reason_hdr>`:
   \   00000038   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   00000040   00000000....       DC32 0H, `?<Constant "\\317\\360\\350\\367\\350\\355\\340">`
   \              ....        
   \   00000048   FFFFFF7F           DC32 2147483647
   \                     `?<Initializer for room_name>`:
   \   0000004C   00000000           DC8 0, 0, 0, 0
   \                     `?<Initializer for room_jid>`:
   \   00000050   00000000           DC8 0, 0, 0, 0
   \                     `?<Initializer for reason_pos>`:
   \   00000054   00000000           DC8 0, 0, 0, 0
   \                     `?<Initializer for macmd>`:
   \   00000058   00                 DC8 0

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for contact_menuhdr>`:
   \   00000000   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   00000008   00000000....       DC32 0H, contmenu_header, 2147483647
   \              ....FFFFFF7F
   \                     `?<Initializer for cmS_ICONS>`:
   \   00000014   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000024   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000034   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              000000000000
   \              0000        
   \                     `?<Initializer for Contact_MenuID>`:
   \   00000048   00000000           DC8 0, 0, 0, 0
   \                     `?<Initializer for Req_Close_Cont_Menu>`:
   \   0000004C   00000000           DC32 0
   \                     `?<Initializer for Menu_Contents>`:
   \   00000050   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \                     `?<Initializer for contact_menu>`:
   \   0000005C   08000000....       DC32 8, contact_menu_onkey, contact_menu_ghook, 0H, menusoftkeys
   \              ............
   \              00000000....
   \              ....        
   \   00000070   ........1100       DC32 clmenu_skt, 17, contact_menu_iconhndl, 0H, 0H, 0
   \              0000........
   \              000000000000
   \              000000000000
   \                     `?<Initializer for ICON_CONF_LEAVE>`:
   \   00000088   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000098   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000000A8   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000000B8   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000000C8   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000000D8   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000000E8   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000000F8   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \                     `?<Initializer for ICON_QUERY_VERSION>`:
   \   00000108   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000118   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000128   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000138   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000148   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000158   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000168   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000178   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \                     `?<Initializer for ICON_LOGIN_LOGOUT>`:
   \   00000188   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000198   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000001A8   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000001B8   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000001C8   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000001D8   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000001E8   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000001F8   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \                     `?<Initializer for ICON_QUERY_DISCO>`:
   \   00000208   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000218   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000228   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000238   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000248   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000258   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000268   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000278   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \                     `?<Initializer for ICON_HISTORY_OPEN>`:
   \   00000288   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000298   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000002A8   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000002B8   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000002C8   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000002D8   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000002E8   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000002F8   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \                     `?<Initializer for ICON_QUERY_TIME>`:
   \   00000308   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000318   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000328   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000338   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000348   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000358   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000368   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000378   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \                     `?<Initializer for ICON_QUERY_VCARD>`:
   \   00000388   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000398   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000003A8   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000003B8   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000003C8   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000003D8   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000003E8   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000003F8   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \                     `?<Initializer for ICON_MUC_ADMIN>`:
   \   00000408   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000418   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000428   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000438   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000448   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000458   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000468   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000478   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \                     `?<Initializer for ICON_QUERY_LASTACTIV>`:
   \   00000488   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000498   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000004A8   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000004B8   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000004C8   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000004D8   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000004E8   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000004F8   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \                     `?<Initializer for ICON_SUBSCRIBE_MENU>`:
   \   00000508   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000518   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000528   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000538   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000548   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000558   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000568   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000578   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for menusoftkeys>`:
   \   00000000   000000000100       DC32 0, 1, 2
   \              000002000000

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for clmenu_sk>`:
   \   00000000   18000000           DC16 24, 0
   \   00000004   ........           DC32 `?<Constant "\\302\\373\\341\\356\\360">`
   \   00000008   01000000           DC16 1, 0
   \   0000000C   ........           DC32 `?<Constant "\\315\\340\\347\\340\\344">`
   \   00000010   3D000000           DC16 61, 0
   \   00000014   FBC0FF7F           DC32 2147467515

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for clmenu_skt>`:
   \   00000000   ........0000       DC32 clmenu_sk, 0
   \              0000        

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for ma_menuhdr>`:
   \   00000000   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   00000008   00000000....       DC32 0H, ma_menu_header, 2147483647
   \              ....FFFFFF7F
   \                     `?<Initializer for MA_Menu_Contents>`:
   \   00000014   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \                     `?<Initializer for ma_menu>`:
   \   00000020   08000000....       DC32 8, ma_menu_onkey, ma_menu_ghook, 0H, mamenusoftkeys, ma_menu_skt
   \              ............
   \              00000000....
   \              ............
   \   00000038   10000000....       DC32 16, ma_menu_iconhndl, 0H, 0H, 0
   \              ....00000000
   \              000000000000
   \              0000        

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for mamenusoftkeys>`:
   \   00000000   000000000100       DC32 0, 1, 2
   \              000002000000

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for ma_menu_sk>`:
   \   00000000   18000000           DC16 24, 0
   \   00000004   ........           DC32 `?<Constant "\\302\\373\\341\\356\\360">`
   \   00000008   01000000           DC16 1, 0
   \   0000000C   ........           DC32 `?<Constant "\\315\\340\\347\\340\\344">`
   \   00000010   3D000000           DC16 61, 0
   \   00000014   FBC0FF7F           DC32 2147467515

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for ma_menu_skt>`:
   \   00000000   ........0000       DC32 ma_menu_sk, 0
   \              0000        

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for contc_menuhdr>`:
   \   00000000   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   00000008   00000000....       DC32 0H, contc_menu_header, 2147483647
   \              ....FFFFFF7F
   \                     `?<Initializer for CONTC_Menu_Contents>`:
   \   00000014   00000000           DC8 0, 0, 0, 0
   \                     `?<Initializer for contc_menu>`:
   \   00000018   08000000....       DC32 8, contc_menu_onkey, contc_menu_ghook, 0H, contcmenusoftkeys
   \              ............
   \              00000000....
   \              ....        
   \   0000002C   ........1000       DC32 contc_menu_skt, 16, contc_menu_iconhndl, 0H, 0H, 0
   \              0000........
   \              000000000000
   \              000000000000

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for contcmenusoftkeys>`:
   \   00000000   000000000100       DC32 0, 1, 2
   \              000002000000

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for contc_menu_sk>`:
   \   00000000   18000000           DC16 24, 0
   \   00000004   ........           DC32 `?<Constant "\\302\\373\\341\\356\\360">`
   \   00000008   01000000           DC16 1, 0
   \   0000000C   ........           DC32 `?<Constant "\\315\\340\\347\\340\\344">`
   \   00000010   3D000000           DC16 61, 0
   \   00000014   FBC0FF7F           DC32 2147467515

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for contc_menu_skt>`:
   \   00000000   ........0000       DC32 contc_menu_sk, 0
   \              0000        

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for sk>`:
   \   00000000   18000000           DC16 24, 0
   \   00000004   ........           DC32 `?<Constant "OK">`

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for reason_sk>`:
   \   00000000   18000000           DC16 24, 0
   \   00000004   ........           DC32 `?<Constant "OK">`
   \   00000008   01000000           DC16 1, 0
   \   0000000C   ........           DC32 `?<Constant "\\307\\340\\352\\360\\373\\362\\374">`
   \   00000010   3D000000           DC16 61, 0
   \   00000014   FBC0FF7F           DC32 2147467515

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for reason_skt>`:
   \   00000000   ........0000       DC32 reason_sk, 0
   \              0000        

   \                                 In segment DATA_C, align 1, align-sorted
   \                     `?<Constant "OK">`:
   \   00000000   4F4B00             DC8 "OK"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "\\307\\340\\352\\360\\373\\362\\374">`:
   \   00000000   C7E0EAF0FBF2       DC8 "\307\340\352\360\373\362\374"
   \              FC00        

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "\\317\\360\\350\\367\\350\\355\\340">`:
   \   00000000   CFF0E8F7E8ED       DC8 "\317\360\350\367\350\355\340"
   \              E000        

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "<presence to=\\'%s\\'/>">`:
   \   00000000   3C7072657365       DC8 "<presence to='%s'/>"
   \              6E636520746F
   \              3D272573272F
   \              3E00        
   \   00000014   3C7072657365       DC8 "<presence to='%s' type='unavailable'/>"
   \              6E636520746F
   \              3D2725732720
   \              747970653D27
   \              756E61766169
   \              6C61626C6527
   \              2F3E00      
   \   0000003B   00                 DC8 0
   \   0000003C   257325732E74       DC8 "%s%s.txt"
   \              787400      
   \   00000045   000000             DC8 0, 0, 0
   \   00000048   C4E5E9F1F2E2       DC8 "\304\345\351\361\362\342\350\345 \355\345\350\347\342\345\361\362\355\356 \350\353\350 \355\345 \357\356\344\344\345\360\346\350\342\340\345\362\361\377!"
   \              E8E520EDE5E8
   \              E7E2E5F1F2ED
   \              EE20E8EBE820
   \              EDE520EFEEE4
   \              E4E5F0E6E8E2
   \              E0E5F2F1FF21
   \              00          
   \   00000073   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "(\\356\\370\\350\\341\\352\\340)">`:
   \   00000000   28EEF8E8E1EA       DC8 "(\356\370\350\341\352\340)"
   \              E02900      
   \   00000009   000000             DC8 0, 0, 0
   \   0000000C   CFEEEAE8EDF3       DC8 "\317\356\352\350\355\363\362\374"
   \              F2FC00      
   \   00000015   000000             DC8 0, 0, 0
   \   00000018   CEF7E8F1F2E8       DC8 "\316\367\350\361\362\350\362\374 \361\356\356\341\371\345\355\350\377"
   \              F2FC20F1EEEE
   \              E1F9E5EDE8FF
   \              00          
   \   0000002B   00                 DC8 0
   \   0000002C   C8EDF4EE20E8       DC8 "\310\355\364\356 \350\347 Disco"
   \              E72044697363
   \              6F00        
   \   0000003A   0000               DC8 0, 0
   \   0000003C   C2E5F0F1E8FF       DC8 "\302\345\360\361\350\377 \352\353\350\345\355\362\340"
   \              20EAEBE8E5ED
   \              F2E000      
   \   0000004B   00                 DC8 0
   \   0000004C   C2F0E5ECFF20       DC8 "\302\360\345\354\377 \352\353\350\345\355\362\340"
   \              EAEBE8E5EDF2
   \              E000        
   \   0000005A   0000               DC8 0, 0
   \   0000005C   764361726400       DC8 "vCard"
   \   00000062   0000               DC8 0, 0
   \   00000064   C1E5E7E4E5E9       DC8 "\301\345\347\344\345\351\361\362\342\350\345"
   \              F1F2E2E8E500
   \   00000070   C8F1F2EEF0E8       DC8 "\310\361\362\356\360\350\377"
   \              FF00        
   \   00000078   C2EAEBFEF7E8       DC8 "\302\352\353\376\367\350\362\374"
   \              F2FC00      
   \   00000081   000000             DC8 0, 0, 0
   \   00000084   CEF2EAEBFEF7       DC8 "\316\362\352\353\376\367\350\362\374"
   \              E8F2FC00    
   \   0000008E   0000               DC8 0, 0
   \   00000090   6D7563236164       DC8 "muc#admin"
   \              6D696E00    
   \   0000009A   0000               DC8 0, 0
   \   0000009C   CFEEE4EFE8F1       DC8 "\317\356\344\357\350\361\352\340"
   \              EAE000      
   \   000000A5   000000             DC8 0, 0, 0
   \   000000A8   C8E7ECE5EDE8       DC8 "\310\347\354\345\355\350\362\374"
   \              F2FC00      
   \   000000B1   000000             DC8 0, 0, 0
   \   000000B4   CEF2EDFFF2FC       DC8 "\316\362\355\377\362\374 \343\356\353\356\361"
   \              20E3EEEBEEF1
   \              00          
   \   000000C1   000000             DC8 0, 0, 0
   \   000000C4   C4E0F2FC20E3       DC8 "\304\340\362\374 \343\356\353\356\361"
   \              EEEBEEF100  
   \   000000CF   00                 DC8 0
   \   000000D0   CEF2EDFFF2FC       DC8 "\316\362\355\377\362\374 \367\353\345\355\361\362\342\356"
   \              20F7EBE5EDF1
   \              F2E2EE00    
   \   000000E0   CEF2EDFFF2FC       DC8 "\316\362\355\377\362\374 \354\356\344\345\360\340\362\356\360\340"
   \              20ECEEE4E5F0
   \              E0F2EEF0E000
   \   000000F2   0000               DC8 0, 0
   \   000000F4   C4E0F2FC20EC       DC8 "\304\340\362\374 \354\356\344\345\360\340\362\356\360\340"
   \              EEE4E5F0E0F2
   \              EEF0E000    
   \   00000104   C4E0F2FC20E0       DC8 "\304\340\362\374 \340\344\354\350\355\340"
   \              E4ECE8EDE000
   \   00000110   C4E0F2FC20E2       DC8 "\304\340\362\374 \342\353\340\344\345\353\374\366\340"
   \              EBE0E4E5EBFC
   \              F6E000      
   \   0000011F   00                 DC8 0
   \   00000120   C7E0EFF0EEF1       DC8 "\307\340\357\360\356\361\350\362\374"
   \              E8F2FC00    
   \   0000012A   0000               DC8 0, 0
   \   0000012C   D0E0E7F0E5F8       DC8 "\320\340\347\360\345\370\350\362\374"
   \              E8F2FC00    
   \   00000136   0000               DC8 0, 0
   \   00000138   CEF2EAEBEEED       DC8 "\316\362\352\353\356\355\350\362\374"
   \              E8F2FC00    
   \   00000142   0000               DC8 0, 0
   \   00000144   D3E4E0EBE8F2       DC8 "\323\344\340\353\350\362\374"
   \              FC00        
   \   0000014C   C4E0F2FC20F7       DC8 "\304\340\362\374 \367\353\345\355\361\362\342\356"
   \              EBE5EDF1F2E2
   \              EE00        
   \   0000015A   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "menu_muc_leave.png">`:
   \   00000000   6D656E755F6D       DC8 "menu_muc_leave.png"
   \              75635F6C6561
   \              76652E706E67
   \              00          
   \   00000013   00                 DC8 0
   \   00000014   6D656E755F76       DC8 "menu_version.png"
   \              657273696F6E
   \              2E706E6700  
   \   00000025   000000             DC8 0, 0, 0
   \   00000028   6D656E755F64       DC8 "menu_disco.png"
   \              6973636F2E70
   \              6E6700      
   \   00000037   00                 DC8 0
   \   00000038   6D656E755F68       DC8 "menu_history.png"
   \              6973746F7279
   \              2E706E6700  
   \   00000049   000000             DC8 0, 0, 0
   \   0000004C   6D656E755F74       DC8 "menu_time.png"
   \              696D652E706E
   \              6700        
   \   0000005A   0000               DC8 0, 0
   \   0000005C   6D656E755F76       DC8 "menu_vcard.png"
   \              636172642E70
   \              6E6700      
   \   0000006B   00                 DC8 0
   \   0000006C   6D656E755F69       DC8 "menu_idle.png"
   \              646C652E706E
   \              6700        
   \   0000007A   0000               DC8 0, 0
   \   0000007C   6D656E755F6B       DC8 "menu_kick.png"
   \              69636B2E706E
   \              6700        
   \   0000008A   0000               DC8 0, 0
   \   0000008C   6D656E755F6E       DC8 "menu_no_icon.png"
   \              6F5F69636F6E
   \              2E706E6700  
   \   0000009D   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   CAE8EA00           DC8 "\312\350\352"

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   C1E0ED00           DC8 "\301\340\355"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "\\315\\340\\347\\340\\344">`:
   \   00000000   CDE0E7E0E400       DC8 "\315\340\347\340\344"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "SieJC_muc#admin">`:
   \   00000000   5369654A435F       DC8 "SieJC_muc#admin"
   \              6D7563236164
   \              6D696E00    

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   00                 DC8 ""

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "\\302\\373\\341\\356\\360">`:
   \   00000000   C2FBE1EEF000       DC8 "\302\373\341\356\360"
   \   00000006   0000               DC8 0, 0

   Maximum stack usage in bytes:

     Function              CSTACK
     --------              ------
     ConstructReasonDlg       72
     Disp_Cont_Menu           28
     Disp_Contact_Menu        52
     Disp_MA_Menu             32
     InitContMenuArray         0
     InitMAMenuArray           0
     InitMenuArray             0
     Init_Icon_array          36
     contact_menu_ghook        4
     contact_menu_iconhndl    72
     contact_menu_onkey       16
     contc_menu_ghook          4
     contc_menu_iconhndl      68
     contc_menu_onkey         12
     ma_menu_ghook             4
     ma_menu_iconhndl         68
     ma_menu_onkey            16
     reason_ghook              4
     reason_locret             0
     reason_onkey             64


   Segment part sizes:

     Function/Label                 Bytes
     --------------                 -----
     contmenu_header                  16
     ma_menu_header                   12
     InitMAMenuArray                  36
     Disp_MA_Menu                    520
     contc_menu_header                12
     InitContMenuArray                36
     Disp_Cont_Menu                  140
     contact_menu_ghook               56
     contact_menu_onkey              500
     InitMenuArray                    36
     contact_menu_iconhndl           292
     ICON_CONF_KICK_THIS             128
     ICON_CONF_BAN_THIS              128
     ICON_CONF_VREJ_THIS             128
     ICON_CONF_VGR_THIS              128
     Init_Icon_array                 436
     Disp_Contact_Menu               668
     ma_menu_ghook                    20
     ma_menu_onkey                   220
     ma_menu_iconhndl                244
     contc_menu_ghook                 20
     contc_menu_onkey                168
     contc_menu_iconhndl             188
     reason_onkey                    164
     reason_ghook                     32
     reason_locret                     4
     reason_desc                      89
     contact_menuhdr                1416
     menusoftkeys                     12
     clmenu_sk                        24
     clmenu_skt                        8
     ma_menuhdr                       76
     mamenusoftkeys                   12
     ma_menu_sk                       24
     ma_menu_skt                       8
     contc_menuhdr                    68
     contcmenusoftkeys                12
     contc_menu_sk                    24
     contc_menu_skt                    8
     sk                                8
     reason_sk                        24
     reason_skt                        8
     ConstructReasonDlg              300
     ??DataTable7                      4
     ??DataTable10                     4
     ??DataTable12                     4
     ??DataTable13                     4
     ?<Initializer for reason_desc>   89
     ?<Initializer for contact_menuhdr>
                                    1416
     ?<Initializer for menusoftkeys>
                                      12
     ?<Initializer for clmenu_sk>     24
     ?<Initializer for clmenu_skt>     8
     ?<Initializer for ma_menuhdr>    76
     ?<Initializer for mamenusoftkeys>
                                      12
     ?<Initializer for ma_menu_sk>    24
     ?<Initializer for ma_menu_skt>    8
     ?<Initializer for contc_menuhdr>
                                      68
     ?<Initializer for contcmenusoftkeys>
                                      12
     ?<Initializer for contc_menu_sk>
                                      24
     ?<Initializer for contc_menu_skt>
                                       8
     ?<Initializer for sk>             8
     ?<Initializer for reason_sk>     24
     ?<Initializer for reason_skt>     8
     ?<Constant "OK">                  3
     ?<Constant "\307\340\352\360\373\362\374">
                                       8
     ?<Constant "\317\360\350\367\350\355\340">
                                       8
     ?<Constant "<presence to=\'%s\'/>">
                                     116
     ?<Constant "(\356\370\350\341\352\340)">
                                     348
     ?<Constant "menu_muc_leave.png">
                                     160
     ?<Constant "\312\350\352">        4
     ?<Constant "\301\340\355">        4
     ?<Constant "\315\340\347\340\344">
                                       8
     ?<Constant "SieJC_muc#admin">    16
     ?<Constant "">                    1
     ?<Constant "\302\373\341\356\360">
                                       8
      Others                         308

 
 4 380 bytes in segment CODE
   724 bytes in segment DATA_C
 1 821 bytes in segment DATA_I
 1 821 bytes in segment DATA_ID
   512 bytes in segment DATA_Z
    24 bytes in segment INITTAB
 
 4 096 bytes of CODE  memory (+ 308 bytes shared)
 2 545 bytes of CONST memory
 2 333 bytes of DATA  memory

Errors: none
Warnings: none
