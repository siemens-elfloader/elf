##############################################################################
#                                                                            #
# IAR ARM ANSI C/C++ Compiler V4.42A/W32 EVALUATION    23/Feb/2011  16:37:55 #
# Copyright 1999-2005 IAR Systems. All rights reserved.                      #
#                                                                            #
#    Cpu mode        =  interwork                                            #
#    Endian          =  little                                               #
#    Stack alignment =  4                                                    #
#    Source file     =  C:\arm\siejc\JID_Enter_UI.c                          #
#    Command line    =  C:\arm\siejc\JID_Enter_UI.c -D NEWSGOLD -D ELKA      #
#                       --preprocess C:\arm\siejc\Release_ELKA\List\ -lC     #
#                       C:\arm\siejc\Release_ELKA\List\ -o                   #
#                       C:\arm\siejc\Release_ELKA\Obj\ -s9 --no_unroll       #
#                       --cpu_mode arm --endian little --cpu ARM926EJ-S      #
#                       --stack_align 4 --interwork -e --fpu None            #
#                       --dlib_config "C:\arm2\Embedded Workbench 4.0        #
#                       Evaluation\ARM\LIB\dl5tpainl8f.h" -I                 #
#                       "C:\arm2\Embedded Workbench 4.0                      #
#                       Evaluation\ARM\INC\" --inline_threshold=2            #
#    List file       =  C:\arm\siejc\Release_ELKA\List\JID_Enter_UI.lst      #
#    Object file     =  C:\arm\siejc\Release_ELKA\Obj\JID_Enter_UI.r79       #
#                                                                            #
#                                                                            #
##############################################################################

C:\arm\siejc\JID_Enter_UI.c
      1          #include "../inc/swilib.h"
      2          #include "main.h"
      3          #include "string_util.h"
      4          #include "jabber_util.h"
      5          #include "groups_util.h"
      6          #include "JID_Enter_UI.h"
      7          #include "lang.h"
      8          #include "rect_patcher.h"
      9          #include "xml_gen.h"
     10          
     11          typedef struct {
     12            char jid_ask;
     13            char jid_del;
     14            char jid_add;
     15          } JIDENTER_SETTINGS;
     16          

   \                                 In segment DATA_I, align 4, align-sorted
     17          SOFTKEY_DESC jid_menu_sk[]=
   \                     jid_menu_sk:
   \   00000000                      DS8 24
   \   00000018                      REQUIRE `?<Initializer for jid_menu_sk>`
     18          {
     19            {0x0018,0x0000,(int)LG_SELECT},
     20            {0x0001,0x0000,(int)LG_BACK},
     21            {0x003D,0x0000,(int)LGP_DOIT_PIC}
     22          };
     23          

   \                                 In segment DATA_I, align 4, align-sorted
     24          SOFTKEYSTAB jid_menu_skt=
   \                     jid_menu_skt:
   \   00000000                      DS8 8
   \   00000008                      REQUIRE `?<Initializer for jid_menu_skt>`
     25          {
     26            jid_menu_sk,0
     27          };
     28          
     29          JIDENTER_SETTINGS jid_set;
     30          
     31          WSHDR* jews;
     32          char jTerminate=0;
     33          
     34          typedef struct
     35          {
     36            GUI *ed_grgui;
     37            int count;
     38          }GRLIST_STRUCT;
     39          

   \                                 In segment CODE, align 4, keep-with-next
     40          void ed_grouplist_handler(USR_MENU_ITEM *item)
     41          {
   \                     ed_grouplist_handler:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
   \   00000004   0050A0E1           MOV      R5,R0
     42            GRLIST_STRUCT *gr_str=item->user_pointer;
     43            int i=item->cur_item;
     44            if (item->type==0)
   \   00000008   0000D5E5           LDRB     R0,[R5, #+0]
   \   0000000C   044095E5           LDR      R4,[R5, #+4]
   \   00000010   B860D5E1           LDRH     R6,[R5, #+8]
   \   00000014   000050E3           CMP      R0,#+0
   \   00000018   0800001A           BNE      ??ed_grouplist_handler_0
     45            {
     46                if (i<gr_str->count) utf8_2ws(item->ws,GetGroupNameByID(i+1),80);//пропускаем "No group"
   \   0000001C   040094E5           LDR      R0,[R4, #+4]
   \   00000020   000056E1           CMP      R6,R0
   \   00000024   7080BDA8           POPGE    {R4-R6,PC}
   \   00000028   010086E2           ADD      R0,R6,#+1
   \   0000002C   ........           _BLF     GetGroupNameByID,??GetGroupNameByID??rA
   \   00000030   5020A0E3           MOV      R2,#+80
   \   00000034   0010A0E1           MOV      R1,R0
   \   00000038   0C0095E5           LDR      R0,[R5, #+12]
   \   0000003C   E30100EF           SWI      +483
     47            }
     48            if (item->type==1)
   \                     ??ed_grouplist_handler_0:
   \   00000040   0000D5E5           LDRB     R0,[R5, #+0]
   \   00000044   010050E3           CMP      R0,#+1
   \   00000048   7080BD18           POPNE    {R4-R6,PC}
     49            {
     50                if (i<gr_str->count)
   \   0000004C   040094E5           LDR      R0,[R4, #+4]
   \   00000050   000056E1           CMP      R6,R0
   \   00000054   7080BDA8           POPGE    {R4-R6,PC}
     51                {
     52          	char *p=GetGroupNameByID(i+1); //пропускаем "No group"
   \   00000058   010086E2           ADD      R0,R6,#+1
   \   0000005C   ........           _BLF     GetGroupNameByID,??GetGroupNameByID??rA
   \   00000060   0050A0E1           MOV      R5,R0
     53          	WSHDR *ed_ws=AllocWS(strlen(p)*2);
   \   00000064   1B0000EF           SWI      +27
   \   00000068   8000A0E1           LSL      R0,R0,#+1
   \   0000006C   250100EF           SWI      +293
   \   00000070   0060A0E1           MOV      R6,R0
     54                  utf8_2ws(ed_ws,p,strlen(p)*2);
   \   00000074   0500A0E1           MOV      R0,R5
   \   00000078   1B0000EF           SWI      +27
   \   0000007C   8020A0E1           LSL      R2,R0,#+1
   \   00000080   0510A0E1           MOV      R1,R5
   \   00000084   0600A0E1           MOV      R0,R6
   \   00000088   E30100EF           SWI      +483
     55                  EDIT_SetTextToEditControl(gr_str->ed_grgui,6,ed_ws);
   \   0000008C   000094E5           LDR      R0,[R4, #+0]
   \   00000090   0620A0E1           MOV      R2,R6
   \   00000094   0610A0E3           MOV      R1,#+6
   \   00000098   DE0100EF           SWI      +478
     56          	FreeWS(ed_ws);
   \   0000009C   0600A0E1           MOV      R0,R6
   \   000000A0   290100EF           SWI      +297
     57                }
     58            }
     59          }
   \   000000A4   7080BDE8           POP      {R4-R6,PC}       ;; return
     60          

   \                                 In segment CODE, align 4, keep-with-next
     61          int jed1_onkey(GUI *data, GUI_MSG *msg)
     62          {
   \                     jed1_onkey:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
     63            //-1 - do redraw
     64            //1: close
     65            // Если зелёная кнопка либо нажата кнопка, которую мы повесили в cmd=7
     66            if(msg->gbsmsg->submess==GREEN_BUTTON || msg->keys==0x18)
   \   00000004   ........           LDR      R5,??DataTable1  ;; jed1_desc
   \   00000008   0040A0E1           MOV      R4,R0
   \   0000000C   040091E5           LDR      R0,[R1, #+4]
   \   00000010   0160A0E3           MOV      R6,#+1
   \   00000014   082090E5           LDR      R2,[R0, #+8]
   \   00000018   0B0052E3           CMP      R2,#+11
   \   0000001C   F210D111           LDRSHNE  R1,[R1, #+2]
   \   00000020   18005113           CMPNE    R1,#+24
     67            {
     68              jTerminate = 1;
   \   00000024   5360C505           STRBEQ   R6,[R5, #+83]
     69              return 1;
     70            }
     71            
     72            if (msg->keys==0x0FF0) //Левый софт СГОЛД
   \   00000028   FF0E5113           CMPNE    R1,#+4080
     73            {
     74              return(1);
   \   0000002C   0100A003           MOVEQ    R0,#+1
   \   00000030   7080BD08           POPEQ    {R4-R6,PC}
     75            }
     76          if (msg->gbsmsg->msg==KEY_DOWN)
   \   00000034   041090E5           LDR      R1,[R0, #+4]
   \   00000038   9320A0E3           MOV      R2,#+147
   \   0000003C   402F82E3           ORR      R2,R2,#0x100
   \   00000040   020051E1           CMP      R1,R2
     77            {
     78              if (msg->gbsmsg->submess==ENTER_BUTTON)
   \   00000044   08009005           LDREQ    R0,[R0, #+8]
   \   00000048   1A005003           CMPEQ    R0,#+26
   \   0000004C   2F00001A           BNE      ??jed1_onkey_0
     79              {
     80                if (EDIT_GetFocus(data)==8)
   \   00000050   0400A0E1           MOV      R0,R4
   \   00000054   820100EF           SWI      +386
   \   00000058   080050E3           CMP      R0,#+8
   \   0000005C   1700001A           BNE      ??jed1_onkey_1
     81                {
     82              jid_set.jid_ask=!jid_set.jid_ask;  //8 пункт при добавлении контакта "Запрос авторизации",
   \   00000060   5010D5E5           LDRB     R1,[R5, #+80]
     83              jid_set.jid_del=!jid_set.jid_del;  // а при удалении "Удалить"
     84              CutWSTR(jews,0);
   \   00000064   4C0095E5           LDR      R0,[R5, #+76]
   \   00000068   000051E3           CMP      R1,#+0
   \   0000006C   0110A003           MOVEQ    R1,#+1
   \   00000070   0010A013           MOVNE    R1,#+0
   \   00000074   5010C5E5           STRB     R1,[R5, #+80]
   \   00000078   5110D5E5           LDRB     R1,[R5, #+81]
   \   0000007C   000051E3           CMP      R1,#+0
   \   00000080   0060A013           MOVNE    R6,#+0
   \   00000084   5160C5E5           STRB     R6,[R5, #+81]
   \   00000088   0010A0E3           MOV      R1,#+0
   \   0000008C   260100EF           SWI      +294
     85              wsAppendChar(jews, jid_set.jid_del?CBOX_CHECKED:CBOX_UNCHECKED);
   \   00000090   5100D5E5           LDRB     R0,[R5, #+81]
   \   00000094   000050E3           CMP      R0,#+0
   \   00000098   4C0095E5           LDR      R0,[R5, #+76]
   \   0000009C   1610A013           MOVNE    R1,#+22
   \   000000A0   1710A003           MOVEQ    R1,#+23
   \   000000A4   E11C81E3           ORR      R1,R1,#0xE100
   \   000000A8   1C0000EF           SWI      +28
     86              EDIT_SetTextToFocused(data,jews);
   \   000000AC   4C1095E5           LDR      R1,[R5, #+76]
   \   000000B0   0400A0E1           MOV      R0,R4
   \   000000B4   810100EF           SWI      +385
     87              return (-1);
   \   000000B8   0000E0E3           MVN      R0,#+0
   \   000000BC   7080BDE8           POP      {R4-R6,PC}
     88                }
     89          
     90                if ((EDIT_GetFocus(data)==6)&&(!EDIT_IsMarkModeActive(data)))
   \                     ??jed1_onkey_1:
   \   000000C0   0400A0E1           MOV      R0,R4
   \   000000C4   820100EF           SWI      +386
   \   000000C8   060050E3           CMP      R0,#+6
   \   000000CC   0F00001A           BNE      ??jed1_onkey_0
   \   000000D0   0400A0E1           MOV      R0,R4
   \   000000D4   D80100EF           SWI      +472
   \   000000D8   000050E3           CMP      R0,#+0
   \   000000DC   0B00001A           BNE      ??jed1_onkey_0
     91                {
     92                  GRLIST_STRUCT *gr_str=EDIT_GetUserPointer(data);
   \   000000E0   0400A0E1           MOV      R0,R4
   \   000000E4   DF0100EF           SWI      +479
   \   000000E8   0050A0E1           MOV      R5,R0
     93                  int i=gr_str->count=GetGroupCount();
   \   000000EC   ........           _BLF     GetGroupCount,??GetGroupCount??rA
     94                  EDIT_OpenOptionMenuWithUserItems(data,ed_grouplist_handler,gr_str,i);
   \   000000F0   20109FE5           LDR      R1,??jed1_onkey_2  ;; ed_grouplist_handler
   \   000000F4   040085E5           STR      R0,[R5, #+4]
   \   000000F8   0030A0E1           MOV      R3,R0
   \   000000FC   0520A0E1           MOV      R2,R5
   \   00000100   0400A0E1           MOV      R0,R4
   \   00000104   E50100EF           SWI      +485
     95                  return (-1);
   \   00000108   000066E2           RSB      R0,R6,#+0
   \   0000010C   7080BDE8           POP      {R4-R6,PC}
     96                }
     97              }
     98            }
     99            return 0;
   \                     ??jed1_onkey_0:
   \   00000110   0000A0E3           MOV      R0,#+0
   \   00000114   7080BDE8           POP      {R4-R6,PC}       ;; return
   \                     ??jed1_onkey_2:
   \   00000118   ........           DC32     ed_grouplist_handler
    100          }
    101          

   \                                 In segment CODE, align 4, keep-with-next
    102          void jed1_ghook(GUI *data, int cmd)
    103          {
   \                     jed1_ghook:
   \   00000000   F0472DE9           PUSH     {R4-R10,LR}
    104            EDITCONTROL ec;
    105            static SOFTKEY_DESC mmmmsk={0x0018, 0x0000,(int)LG_OK};
    106            if (cmd==TI_CMD_CREATE)
   \   00000004   ........           LDR      R5,??DataTable1  ;; jed1_desc
   \   00000008   6CD04DE2           SUB      SP,SP,#+108
   \   0000000C   0080A0E1           MOV      R8,R0
   \   00000010   0140A0E1           MOV      R4,R1
   \   00000014   020054E3           CMP      R4,#+2
   \   00000018   0200001A           BNE      ??jed1_ghook_0
    107            {
    108                GRLIST_STRUCT *gr_str=EDIT_GetUserPointer(data);
   \   0000001C   DF0100EF           SWI      +479
    109                gr_str->ed_grgui=data;
   \   00000020   008080E5           STR      R8,[R0, #+0]
   \   00000024   0F0000EA           B        ??jed1_ghook_1
    110            }
    111            if (cmd==TI_CMD_REDRAW)
   \                     ??jed1_ghook_0:
   \   00000028   070054E3           CMP      R4,#+7
   \   0000002C   0A00001A           BNE      ??jed1_ghook_2
    112            {
    113              //OnRun
    114              ExtractEditControl(data,2,&ec);    
   \   00000030   30208DE2           ADD      R2,SP,#+48
   \   00000034   0210A0E3           MOV      R1,#+2
   \   00000038   690100EF           SWI      +361
    115              wstrcpy(jews,ec.pWS);
   \   0000003C   58109DE5           LDR      R1,[SP, #+88]
   \   00000040   4C0095E5           LDR      R0,[R5, #+76]
   \   00000044   1F0100EF           SWI      +287
    116          #ifndef NEWSGOLD
    117            static const SOFTKEY_DESC sk_cancel={0x0FF0,0x0000,(int)LG_CLOSE};
    118          #endif
    119          #ifdef NEWSGOLD    
    120              SetSoftKey(data,&mmmmsk,0);
   \   00000048   0020A0E3           MOV      R2,#+0
   \   0000004C   541085E2           ADD      R1,R5,#+84
   \   00000050   0800A0E1           MOV      R0,R8
   \   00000054   680100EF           SWI      +360
   \   00000058   020000EA           B        ??jed1_ghook_1
    121          #else
    122              SetSoftKey(data,&mmmmsk,1);
    123              if (ec.pWS->wsbody[0]==0)
    124                SetSoftKey(data,&sk_cancel,SET_SOFT_KEY_N==0?1:0);    
    125          #endif 
    126            }
    127            
    128            if(cmd==TI_CMD_FOCUS)   // Фокусирование
   \                     ??jed1_ghook_2:
   \   0000005C   0A0054E3           CMP      R4,#+10
   \   00000060   0000001A           BNE      ??jed1_ghook_1
    129            {
    130               DisableIDLETMR();   // Отключаем таймер выхода по таймауту
   \   00000064   7F0100EF           SWI      +383
    131            }
    132          
    133            if(jTerminate)
   \                     ??jed1_ghook_1:
   \   00000068   5300D5E5           LDRB     R0,[R5, #+83]
   \   0000006C   000050E3           CMP      R0,#+0
   \   00000070   9400000A           BEQ      ??jed1_ghook_3
    134           {
    135             char* jid_jid = NULL;
    136             char* jid_name = NULL;
    137             char* jid_group = NULL;
    138             jTerminate=0;
    139             size_t st_len;
    140             st_len = wstrlen(jews)*2;
   \   00000074   4C0095E5           LDR      R0,[R5, #+76]
   \   00000078   0090A0E3           MOV      R9,#+0
   \   0000007C   5390C5E5           STRB     R9,[R5, #+83]
   \   00000080   230100EF           SWI      +291
   \   00000084   8000A0E1           LSL      R0,R0,#+1
   \   00000088   00008DE5           STR      R0,[SP, #+0]
    141             if(st_len)
   \   0000008C   000050E3           CMP      R0,#+0
   \   00000090   0600000A           BEQ      ??jed1_ghook_4
    142             {
    143                jid_jid =  utf16_to_utf8((char**)jews,&st_len);
   \   00000094   4C0095E5           LDR      R0,[R5, #+76]
   \   00000098   0D10A0E1           MOV      R1,SP
   \   0000009C   ........           _BLF     utf16_to_utf8,??utf16_to_utf8??rA
   \   000000A0   0060A0E1           MOV      R6,R0
    144                jid_jid[st_len]='\0';
   \   000000A4   00009DE5           LDR      R0,[SP, #+0]
   \   000000A8   0690C0E7           STRB     R9,[R0, +R6]
   \   000000AC   000000EA           B        ??jed1_ghook_5
    145             } else jid_jid = NULL;
   \                     ??jed1_ghook_4:
   \   000000B0   0060A0E3           MOV      R6,#+0
    146           
    147             ExtractEditControl(data,4,&ec);    
   \                     ??jed1_ghook_5:
   \   000000B4   30208DE2           ADD      R2,SP,#+48
   \   000000B8   0410A0E3           MOV      R1,#+4
   \   000000BC   0800A0E1           MOV      R0,R8
   \   000000C0   690100EF           SWI      +361
    148             wstrcpy(jews,ec.pWS);
   \   000000C4   58109DE5           LDR      R1,[SP, #+88]
   \   000000C8   4C0095E5           LDR      R0,[R5, #+76]
   \   000000CC   1F0100EF           SWI      +287
    149             st_len = wstrlen(jews)*2;
   \   000000D0   4C0095E5           LDR      R0,[R5, #+76]
   \   000000D4   230100EF           SWI      +291
   \   000000D8   8000A0E1           LSL      R0,R0,#+1
   \   000000DC   00008DE5           STR      R0,[SP, #+0]
    150             if(st_len)
   \   000000E0   000050E3           CMP      R0,#+0
   \   000000E4   0600000A           BEQ      ??jed1_ghook_6
    151             {
    152                jid_name =  utf16_to_utf8((char**)jews,&st_len);
   \   000000E8   4C0095E5           LDR      R0,[R5, #+76]
   \   000000EC   0D10A0E1           MOV      R1,SP
   \   000000F0   ........           _BLF     utf16_to_utf8,??utf16_to_utf8??rA
   \   000000F4   0070A0E1           MOV      R7,R0
    153                jid_name[st_len]='\0';
   \   000000F8   00009DE5           LDR      R0,[SP, #+0]
   \   000000FC   0790C0E7           STRB     R9,[R0, +R7]
   \   00000100   000000EA           B        ??jed1_ghook_7
    154             }else jid_name=NULL;
   \                     ??jed1_ghook_6:
   \   00000104   0070A0E3           MOV      R7,#+0
    155            
    156              ExtractEditControl(data,6,&ec);
   \                     ??jed1_ghook_7:
   \   00000108   30208DE2           ADD      R2,SP,#+48
   \   0000010C   0610A0E3           MOV      R1,#+6
   \   00000110   0800A0E1           MOV      R0,R8
   \   00000114   690100EF           SWI      +361
    157              wstrcpy(jews,ec.pWS);
   \   00000118   58109DE5           LDR      R1,[SP, #+88]
   \   0000011C   4C0095E5           LDR      R0,[R5, #+76]
   \   00000120   1F0100EF           SWI      +287
    158              st_len = wstrlen(jews)*2;
   \   00000124   4C0095E5           LDR      R0,[R5, #+76]
   \   00000128   230100EF           SWI      +291
   \   0000012C   8000A0E1           LSL      R0,R0,#+1
   \   00000130   00008DE5           STR      R0,[SP, #+0]
    159             if(st_len)
   \   00000134   000050E3           CMP      R0,#+0
   \   00000138   0600000A           BEQ      ??jed1_ghook_8
    160             {
    161                jid_group =  utf16_to_utf8((char**)jews,&st_len);
   \   0000013C   4C0095E5           LDR      R0,[R5, #+76]
   \   00000140   0D10A0E1           MOV      R1,SP
   \   00000144   ........           _BLF     utf16_to_utf8,??utf16_to_utf8??rA
   \   00000148   0080A0E1           MOV      R8,R0
    162                jid_group[st_len]='\0';
   \   0000014C   00009DE5           LDR      R0,[SP, #+0]
   \   00000150   0890C0E7           STRB     R9,[R0, +R8]
   \   00000154   000000EA           B        ??jed1_ghook_9
    163             } else jid_group =NULL;
   \                     ??jed1_ghook_8:
   \   00000158   0080A0E3           MOV      R8,#+0
    164             
    165           if(jid_jid)
   \                     ??jed1_ghook_9:
   \   0000015C   80919FE5           LDR      R9,??jed1_ghook_10+0x4  ;; `?<Constant "jid">`
   \   00000160   000056E3           CMP      R6,#+0
   \   00000164   4800000A           BEQ      ??jed1_ghook_11
    166           {
    167            char di[] = "roster3";
   \   00000168   78119FE5           LDR      R1,??jed1_ghook_10+0x8  ;; `?<Constant "roster3">`
   \   0000016C   08008DE2           ADD      R0,SP,#+8
   \   00000170   0C0091E8           LDM      R1,{R2,R3}
    168            
    169            XMLNode *xml_item, *xml_group;
    170            char subscription_t[]="subscription";
   \   00000174   70119FE5           LDR      R1,??jed1_ghook_10+0xC  ;; `?<Constant "subscription">`
   \   00000178   0C0080E8           STM      R0,{R2,R3}
   \   0000017C   0C1491E8           LDM      R1,{R2,R3,R10,R12}
    171            char item_t[]="item";
   \   00000180   68119FE5           LDR      R1,??jed1_ghook_10+0x10  ;; `?<Constant "item">`
   \   00000184   5C008DE2           ADD      R0,SP,#+92
   \   00000188   0C1480E8           STM      R0,{R2,R3,R10,R12}
   \   0000018C   0C0091E8           LDM      R1,{R2,R3}
    172            char remove_t[]="remove";
   \   00000190   5C119FE5           LDR      R1,??jed1_ghook_10+0x14  ;; `?<Constant "remove">`
   \   00000194   10008DE2           ADD      R0,SP,#+16
   \   00000198   0C0080E8           STM      R0,{R2,R3}
   \   0000019C   0C0091E8           LDM      R1,{R2,R3}
   \   000001A0   18008DE2           ADD      R0,SP,#+24
   \   000001A4   0C0080E8           STM      R0,{R2,R3}
    173            char jid_t[]="jid";
   \   000001A8   001099E5           LDR      R1,[R9, #0]
   \   000001AC   04008DE2           ADD      R0,SP,#+4
   \   000001B0   001080E5           STR      R1,[R0, #+0]
    174            char name_t[]="name";
   \   000001B4   3C119FE5           LDR      R1,??jed1_ghook_10+0x18  ;; `?<Constant "name">`
   \   000001B8   20008DE2           ADD      R0,SP,#+32
   \   000001BC   0C0091E8           LDM      R1,{R2,R3}
    175            char group_t[]="group";
   \   000001C0   34119FE5           LDR      R1,??jed1_ghook_10+0x1C  ;; `?<Constant "group">`
   \   000001C4   0C0080E8           STM      R0,{R2,R3}
   \   000001C8   0C0091E8           LDM      R1,{R2,R3}
   \   000001CC   28008DE2           ADD      R0,SP,#+40
   \   000001D0   0C0080E8           STM      R0,{R2,R3}
    176            xml_item = XML_CreateNode(item_t, NULL);
   \   000001D4   0010A0E3           MOV      R1,#+0
   \   000001D8   10008DE2           ADD      R0,SP,#+16
   \   000001DC   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   000001E0   00A0A0E1           MOV      R10,R0
    177            XML_Set_Attr_Value(xml_item, jid_t, jid_jid);
   \   000001E4   0620A0E1           MOV      R2,R6
   \   000001E8   04108DE2           ADD      R1,SP,#+4
   \   000001EC   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    178          
    179            if((jid_set.jid_del)&&(jid_set.jid_add))
   \   000001F0   5100D5E5           LDRB     R0,[R5, #+81]
   \   000001F4   000050E3           CMP      R0,#+0
   \   000001F8   5200D515           LDRBNE   R0,[R5, #+82]
   \   000001FC   00005013           CMPNE    R0,#+0
   \   00000200   0400000A           BEQ      ??jed1_ghook_12
    180            {
    181              XML_Set_Attr_Value(xml_item, subscription_t, remove_t);
   \   00000204   18208DE2           ADD      R2,SP,#+24
   \   00000208   5C108DE2           ADD      R1,SP,#+92
   \   0000020C   0A00A0E1           MOV      R0,R10
   \   00000210   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
   \   00000214   0B0000EA           B        ??jed1_ghook_13
    182            }
    183            else
    184            {
    185              if(jid_name)
   \                     ??jed1_ghook_12:
   \   00000218   000057E3           CMP      R7,#+0
   \   0000021C   0300000A           BEQ      ??jed1_ghook_14
    186                {
    187                  XML_Set_Attr_Value(xml_item, name_t, jid_name);
   \   00000220   0720A0E1           MOV      R2,R7
   \   00000224   20108DE2           ADD      R1,SP,#+32
   \   00000228   0A00A0E1           MOV      R0,R10
   \   0000022C   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    188                }
    189              if(jid_group)
   \                     ??jed1_ghook_14:
   \   00000230   000058E3           CMP      R8,#+0
   \   00000234   0300000A           BEQ      ??jed1_ghook_13
    190              {
    191                xml_group = XML_CreateNode(group_t, jid_group);
    192                xml_item->subnode = xml_group;
   \   00000238   0810A0E1           MOV      R1,R8
   \   0000023C   28008DE2           ADD      R0,SP,#+40
   \   00000240   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   00000244   04008AE5           STR      R0,[R10, #+4]
    193              }
    194            }
    195          
    196            SendIq(NULL, IQTYPE_SET, di, IQ_ROSTER, xml_item);
   \                     ??jed1_ghook_13:
   \   00000248   00042DE9           PUSH     {R10}
   \   0000024C   043089E2           ADD      R3,R9,#+4
   \   00000250   0C208DE2           ADD      R2,SP,#+12
   \   00000254   211F8FE2           ADR      R1,??jed1_ghook_10  ;; "set"
   \   00000258   0000A0E3           MOV      R0,#+0
   \   0000025C   ........           _BLF     SendIq,??SendIq??rA
    197            if((!jid_set.jid_add)&&(jid_set.jid_ask))
   \   00000260   5200D5E5           LDRB     R0,[R5, #+82]
   \   00000264   04D08DE2           ADD      SP,SP,#+4
   \   00000268   000050E3           CMP      R0,#+0
   \   0000026C   0900001A           BNE      ??jed1_ghook_15
   \   00000270   5000D5E5           LDRB     R0,[R5, #+80]
   \   00000274   000050E3           CMP      R0,#+0
   \   00000278   0600000A           BEQ      ??jed1_ghook_15
    198              {
    199                Send_ShortPresence(jid_jid,PRESENCE_SUBSCRIBE);//посылаем запрос авторизации
   \   0000027C   0810A0E3           MOV      R1,#+8
   \   00000280   0600A0E1           MOV      R0,R6
   \   00000284   ........           _BLF     Send_ShortPresence,??Send_ShortPresence??rA
   \   00000288   020000EA           B        ??jed1_ghook_15
    200              }
    201           } else ShowMSG(1,(int)LG_JENOJID);
   \                     ??jed1_ghook_11:
   \   0000028C   181089E2           ADD      R1,R9,#+24
   \   00000290   0100A0E3           MOV      R0,#+1
   \   00000294   480100EF           SWI      +328
    202           if(jid_name) mfree(jid_name);
   \                     ??jed1_ghook_15:
   \   00000298   000057E3           CMP      R7,#+0
   \   0000029C   0100000A           BEQ      ??jed1_ghook_16
   \   000002A0   0700A0E1           MOV      R0,R7
   \   000002A4   150000EF           SWI      +21
    203           if(jid_jid) mfree(jid_jid);
   \                     ??jed1_ghook_16:
   \   000002A8   000056E3           CMP      R6,#+0
   \   000002AC   0100000A           BEQ      ??jed1_ghook_17
   \   000002B0   0600A0E1           MOV      R0,R6
   \   000002B4   150000EF           SWI      +21
    204           if(jid_group) mfree(jid_group);
   \                     ??jed1_ghook_17:
   \   000002B8   000058E3           CMP      R8,#+0
   \   000002BC   0100000A           BEQ      ??jed1_ghook_3
   \   000002C0   0800A0E1           MOV      R0,R8
   \   000002C4   150000EF           SWI      +21
    205           //end if(jid_jid)
    206           }
    207          
    208            if(cmd==TI_CMD_DESTROY)     // onDestroy
   \                     ??jed1_ghook_3:
   \   000002C8   030054E3           CMP      R4,#+3
   \   000002CC   0100001A           BNE      ??jed1_ghook_18
    209            {
    210              FreeWS(jews);
   \   000002D0   4C0095E5           LDR      R0,[R5, #+76]
   \   000002D4   290100EF           SWI      +297
    211            }
    212          }
   \                     ??jed1_ghook_18:
   \   000002D8   6CD08DE2           ADD      SP,SP,#+108      ;; stack cleaning
   \   000002DC   F087BDE8           POP      {R4-R10,PC}      ;; return
   \                     ??jed1_ghook_10:
   \   000002E0   73657400           DC8      "set"
   \   000002E4   ........           DC32     `?<Constant "jid">`
   \   000002E8   ........           DC32     `?<Constant "roster3">`
   \   000002EC   ........           DC32     `?<Constant "subscription">`
   \   000002F0   ........           DC32     `?<Constant "item">`
   \   000002F4   ........           DC32     `?<Constant "remove">`
   \   000002F8   ........           DC32     `?<Constant "name">`
   \   000002FC   ........           DC32     `?<Constant "group">`
    213          
    214          HEADER_DESC jed1_hdr={0,0,131,21,NULL,(int)LG_JECONTACTHDR,LGP_NULL};
    215          

   \                                 In segment CODE, align 4, keep-with-next
    216          void jed1_locret(void){}
   \                     jed1_locret:
   \   00000000   1EFF2FE1           BX       LR               ;; return

   \                                 In segment DATA_I, align 4, align-sorted
    217          
    218          INPUTDIA_DESC jed1_desc=
   \                     jed1_desc:
   \   00000000                      DS8 56
   \   00000038                      REQUIRE `?<Initializer for jed1_desc>`
   \                     jed1_hdr:
   \   00000038                      DS8 20
   \   0000004C                      REQUIRE `?<Initializer for jed1_hdr>`
   \                     jews:
   \   0000004C                      DS8 4
   \   00000050                      REQUIRE `?<Initializer for jews>`
   \                     jid_set:
   \   00000050                      DS8 3
   \   00000053                      REQUIRE `?<Initializer for jid_set>`
   \                     jTerminate:
   \   00000053                      DS8 1
   \   00000054                      REQUIRE `?<Initializer for jTerminate>`
   \   00000054                      DS8 8
   \   0000005C                      REQUIRE `?<Initializer for mmmmsk>`
    219          {
    220            1,
    221            jed1_onkey,
    222            jed1_ghook,
    223            (void *)jed1_locret,
    224            0,
    225            &jid_menu_skt,
    226            {0,22,131,153},
    227            4,
    228            100,
    229            101,
    230            0,
    231          
    232          //  0x00000001 - Выровнять по правому краю
    233          //  0x00000002 - Выровнять по центру
    234          //  0x00000004 - Инверсия знакомест
    235          //  0x00000008 - UnderLine
    236          //  0x00000020 - Не переносить слова
    237          //  0x00000200 - bold
    238            0,
    239          
    240          //  0x00000002 - ReadOnly
    241          //  0x00000004 - Не двигается курсор
    242          //  0x40000000 - Поменять местами софт-кнопки
    243            0x40000000
    244          };
    245          

   \                                 In segment CODE, align 4, keep-with-next
    246          void Disp_JID_Enter_Dialog(CLIST* ClEx)
    247          {
   \                     Disp_JID_Enter_Dialog:
   \   00000000   F04F2DE9           PUSH     {R4-R11,LR}
    248            //mode 0=edit; 1=add;
    249            jid_set.jid_del=NULL;
   \   00000004   B0739FE5           LDR      R7,??Disp_JID_Enter_Dialog_0+0x4  ;; jed1_desc
   \   00000008   2CD04DE2           SUB      SP,SP,#+44
   \   0000000C   0060A0E3           MOV      R6,#+0
    250            jid_set.jid_ask=NULL;  
   \   00000010   B065C7E1           STRH     R6,[R7, #+80]
    251            char *jid = "";
   \   00000014   E7AF8FE2           ADR      R10,??Disp_JID_Enter_Dialog_0  ;; ""
   \   00000018   0A40A0E1           MOV      R4,R10
    252            char *name = "";
   \   0000001C   0A50A0E1           MOV      R5,R10
    253            char *group = "";
    254            if(ClEx)
   \   00000020   000050E3           CMP      R0,#+0
   \   00000024   0900000A           BEQ      ??Disp_JID_Enter_Dialog_1
    255            {
    256            jid_set.jid_add=1;
   \   00000028   0110A0E3           MOV      R1,#+1
   \   0000002C   5210C7E5           STRB     R1,[R7, #+82]
    257            jid = ClEx->JID;
   \   00000030   004090E5           LDR      R4,[R0, #+0]
    258            name = ClEx->name;
   \   00000034   105090E5           LDR      R5,[R0, #+16]
    259            if(ClEx->group!=0) group = GetGroupNameByID(ClEx->group); //0я группа виртуальная, непоказываем
   \   00000038   1600D0E5           LDRB     R0,[R0, #+22]
   \   0000003C   000050E3           CMP      R0,#+0
   \   00000040   0300000A           BEQ      ??Disp_JID_Enter_Dialog_2
   \   00000044   ........           _BLF     GetGroupNameByID,??GetGroupNameByID??rA
   \   00000048   00A0A0E1           MOV      R10,R0
   \   0000004C   000000EA           B        ??Disp_JID_Enter_Dialog_2
    260            }
    261            else
    262            {
    263            jid_set.jid_add=NULL;    
   \                     ??Disp_JID_Enter_Dialog_1:
   \   00000050   5260C7E5           STRB     R6,[R7, #+82]
    264            }
    265            
    266            void *ma=malloc_adr();
    267          
    268            void *eq;
    269            EDITCONTROL ec;
    270            jews=AllocWS(256);
    271            eq=AllocEQueue(ma,mfree_adr());
    272            
    273            PrepareEditControl(&ec);
    274            ascii2ws(jews, "JID:");
   \                     ??Disp_JID_Enter_Dialog_2:
   \   00000054   64B39FE5           LDR      R11,??Disp_JID_Enter_Dialog_0+0x8  ;; `?<Constant "JID:">`
   \   00000058   148000EF           SWI      +32788
   \   0000005C   0080A0E1           MOV      R8,R0
   \   00000060   400FA0E3           MOV      R0,#+256
   \   00000064   250100EF           SWI      +293
   \   00000068   4C0087E5           STR      R0,[R7, #+76]
   \   0000006C   158000EF           SWI      +32789
   \   00000070   0010A0E1           MOV      R1,R0
   \   00000074   0800A0E1           MOV      R0,R8
   \   00000078   630100EF           SWI      +355
   \   0000007C   0090A0E1           MOV      R9,R0
   \   00000080   0D00A0E1           MOV      R0,SP
   \   00000084   640100EF           SWI      +356
   \   00000088   4C0097E5           LDR      R0,[R7, #+76]
   \   0000008C   0B10A0E1           MOV      R1,R11
   \   00000090   ........           _BLF     ascii2ws,??ascii2ws??rA
    275            ConstructEditControl(&ec,1,ECF_APPEND_EOL,jews,256);
   \   00000094   400FA0E3           MOV      R0,#+256
   \   00000098   01002DE9           PUSH     {R0}
   \   0000009C   4C3097E5           LDR      R3,[R7, #+76]
   \   000000A0   4020A0E3           MOV      R2,#+64
   \   000000A4   0110A0E3           MOV      R1,#+1
   \   000000A8   04008DE2           ADD      R0,SP,#+4
   \   000000AC   650100EF           SWI      +357
    276            AddEditControlToEditQend(eq,&ec,ma);
   \   000000B0   0820A0E1           MOV      R2,R8
   \   000000B4   04108DE2           ADD      R1,SP,#+4
   \   000000B8   0900A0E1           MOV      R0,R9
   \   000000BC   660100EF           SWI      +358
    277          
    278            PrepareEditControl(&ec);
   \   000000C0   04008DE2           ADD      R0,SP,#+4
   \   000000C4   640100EF           SWI      +356
    279            utf8_2ws(jews, jid, 64);
   \   000000C8   4C0097E5           LDR      R0,[R7, #+76]
   \   000000CC   4020A0E3           MOV      R2,#+64
   \   000000D0   0410A0E1           MOV      R1,R4
   \   000000D4   E30100EF           SWI      +483
    280            if(jid_set.jid_add)ConstructEditControl(&ec,1,ECF_APPEND_EOL,jews,128);//2 если меняем контакт ЖИД недаем изменить
   \   000000D8   5200D7E5           LDRB     R0,[R7, #+82]
   \   000000DC   04D08DE2           ADD      SP,SP,#+4
   \   000000E0   4020A0E3           MOV      R2,#+64
   \   000000E4   000050E3           CMP      R0,#+0
   \   000000E8   8000A0E3           MOV      R0,#+128
   \   000000EC   01002DE9           PUSH     {R0}
   \   000000F0   4C3097E5           LDR      R3,[R7, #+76]
   \   000000F4   0110A013           MOVNE    R1,#+1
    281             else ConstructEditControl(&ec,3,ECF_APPEND_EOL,jews,128);//2
   \   000000F8   0310A003           MOVEQ    R1,#+3
   \   000000FC   04008DE2           ADD      R0,SP,#+4
   \   00000100   650100EF           SWI      +357
   \   00000104   04D08DE2           ADD      SP,SP,#+4
    282            AddEditControlToEditQend(eq,&ec,ma);  
   \   00000108   0820A0E1           MOV      R2,R8
   \   0000010C   0D10A0E1           MOV      R1,SP
   \   00000110   0900A0E1           MOV      R0,R9
   \   00000114   660100EF           SWI      +358
    283          
    284            PrepareEditControl(&ec);
   \   00000118   0D00A0E1           MOV      R0,SP
   \   0000011C   640100EF           SWI      +356
    285            ascii2ws(jews, LG_NICK);
   \   00000120   4C0097E5           LDR      R0,[R7, #+76]
   \   00000124   08108BE2           ADD      R1,R11,#+8
   \   00000128   ........           _BLF     ascii2ws,??ascii2ws??rA
    286            ConstructEditControl(&ec,1,ECF_APPEND_EOL,jews,256);
   \   0000012C   400FA0E3           MOV      R0,#+256
   \   00000130   01002DE9           PUSH     {R0}
   \   00000134   4C3097E5           LDR      R3,[R7, #+76]
   \   00000138   4020A0E3           MOV      R2,#+64
   \   0000013C   0110A0E3           MOV      R1,#+1
   \   00000140   04008DE2           ADD      R0,SP,#+4
   \   00000144   650100EF           SWI      +357
    287            AddEditControlToEditQend(eq,&ec,ma);  
   \   00000148   0820A0E1           MOV      R2,R8
   \   0000014C   04108DE2           ADD      R1,SP,#+4
   \   00000150   0900A0E1           MOV      R0,R9
   \   00000154   660100EF           SWI      +358
    288          
    289            PrepareEditControl(&ec);
   \   00000158   04008DE2           ADD      R0,SP,#+4
   \   0000015C   640100EF           SWI      +356
    290            utf8_2ws(jews, name, 64);
   \   00000160   4C0097E5           LDR      R0,[R7, #+76]
   \   00000164   4020A0E3           MOV      R2,#+64
   \   00000168   0510A0E1           MOV      R1,R5
   \   0000016C   E30100EF           SWI      +483
    291            ConstructEditControl(&ec,3,ECF_APPEND_EOL,jews,80);     // 4
   \   00000170   5000A0E3           MOV      R0,#+80
   \   00000174   01002DE9           PUSH     {R0}
   \   00000178   4C3097E5           LDR      R3,[R7, #+76]
   \   0000017C   4020A0E3           MOV      R2,#+64
   \   00000180   0310A0E3           MOV      R1,#+3
   \   00000184   08008DE2           ADD      R0,SP,#+8
   \   00000188   650100EF           SWI      +357
    292            AddEditControlToEditQend(eq,&ec,ma);  
   \   0000018C   0820A0E1           MOV      R2,R8
   \   00000190   08108DE2           ADD      R1,SP,#+8
   \   00000194   0900A0E1           MOV      R0,R9
   \   00000198   660100EF           SWI      +358
    293            
    294            PrepareEditControl(&ec);
   \   0000019C   08008DE2           ADD      R0,SP,#+8
   \   000001A0   640100EF           SWI      +356
    295            ascii2ws(jews, LG_JEGROUP);
   \   000001A4   4C0097E5           LDR      R0,[R7, #+76]
   \   000001A8   10108BE2           ADD      R1,R11,#+16
   \   000001AC   ........           _BLF     ascii2ws,??ascii2ws??rA
    296            ConstructEditControl(&ec,1,ECF_APPEND_EOL,jews,256);      
   \   000001B0   400FA0E3           MOV      R0,#+256
   \   000001B4   01002DE9           PUSH     {R0}
   \   000001B8   4C3097E5           LDR      R3,[R7, #+76]
   \   000001BC   4020A0E3           MOV      R2,#+64
   \   000001C0   0110A0E3           MOV      R1,#+1
   \   000001C4   0C008DE2           ADD      R0,SP,#+12
   \   000001C8   650100EF           SWI      +357
    297            AddEditControlToEditQend(eq,&ec,ma);  
   \   000001CC   0820A0E1           MOV      R2,R8
   \   000001D0   0C108DE2           ADD      R1,SP,#+12
   \   000001D4   0900A0E1           MOV      R0,R9
   \   000001D8   660100EF           SWI      +358
    298          
    299            PrepareEditControl(&ec);
   \   000001DC   0C008DE2           ADD      R0,SP,#+12
   \   000001E0   640100EF           SWI      +356
    300            utf8_2ws(jews, group, 64);
   \   000001E4   4C0097E5           LDR      R0,[R7, #+76]
   \   000001E8   4020A0E3           MOV      R2,#+64
   \   000001EC   0A10A0E1           MOV      R1,R10
   \   000001F0   E30100EF           SWI      +483
    301            ConstructEditControl(&ec,3,ECF_APPEND_EOL,jews,80);    //6
   \   000001F4   5000A0E3           MOV      R0,#+80
   \   000001F8   01002DE9           PUSH     {R0}
   \   000001FC   4C3097E5           LDR      R3,[R7, #+76]
   \   00000200   4020A0E3           MOV      R2,#+64
   \   00000204   0310A0E3           MOV      R1,#+3
   \   00000208   10008DE2           ADD      R0,SP,#+16
   \   0000020C   650100EF           SWI      +357
    302            AddEditControlToEditQend(eq,&ec,ma);
   \   00000210   0820A0E1           MOV      R2,R8
   \   00000214   10108DE2           ADD      R1,SP,#+16
   \   00000218   0900A0E1           MOV      R0,R9
   \   0000021C   660100EF           SWI      +358
    303          
    304            PrepareEditControl(&ec);
   \   00000220   10008DE2           ADD      R0,SP,#+16
   \   00000224   640100EF           SWI      +356
    305            if (!jid_set.jid_add)
   \   00000228   5200D7E5           LDRB     R0,[R7, #+82]
   \   0000022C   1740A0E3           MOV      R4,#+23
   \   00000230   E14C84E3           ORR      R4,R4,#0xE100
   \   00000234   0150C4E3           BIC      R5,R4,#0x1
   \   00000238   000050E3           CMP      R0,#+0
   \   0000023C   10D08DE2           ADD      SP,SP,#+16
   \   00000240   1400001A           BNE      ??Disp_JID_Enter_Dialog_3
    306            {
    307              ascii2ws(jews, LG_JEASK);
   \   00000244   4C0097E5           LDR      R0,[R7, #+76]
   \   00000248   18108BE2           ADD      R1,R11,#+24
   \   0000024C   ........           _BLF     ascii2ws,??ascii2ws??rA
    308              ConstructEditControl(&ec,1,ECF_APPEND_EOL,jews,256);      
   \   00000250   400FA0E3           MOV      R0,#+256
   \   00000254   01002DE9           PUSH     {R0}
   \   00000258   4C3097E5           LDR      R3,[R7, #+76]
   \   0000025C   4020A0E3           MOV      R2,#+64
   \   00000260   0110A0E3           MOV      R1,#+1
   \   00000264   04008DE2           ADD      R0,SP,#+4
   \   00000268   650100EF           SWI      +357
    309              AddEditControlToEditQend(eq,&ec,ma);
   \   0000026C   0820A0E1           MOV      R2,R8
   \   00000270   04108DE2           ADD      R1,SP,#+4
   \   00000274   0900A0E1           MOV      R0,R9
   \   00000278   660100EF           SWI      +358
    310          
    311              PrepareEditControl(&ec);
   \   0000027C   04008DE2           ADD      R0,SP,#+4
   \   00000280   640100EF           SWI      +356
    312              CutWSTR(jews, 0);
   \   00000284   4C0097E5           LDR      R0,[R7, #+76]
   \   00000288   0010A0E3           MOV      R1,#+0
   \   0000028C   260100EF           SWI      +294
    313              wsAppendChar(jews, jid_set.jid_ask?CBOX_CHECKED:CBOX_UNCHECKED);
   \   00000290   5000D7E5           LDRB     R0,[R7, #+80]
   \   00000294   130000EA           B        ??Disp_JID_Enter_Dialog_4
    314              ConstructEditControl(&ec,ECT_LINK,ECF_APPEND_EOL,jews,jews->wsbody[0]); //8
    315            }
    316            else
    317            {
    318              ascii2ws(jews, LG_JEDELCONTACT);
   \                     ??Disp_JID_Enter_Dialog_3:
   \   00000298   4C0097E5           LDR      R0,[R7, #+76]
   \   0000029C   2C108BE2           ADD      R1,R11,#+44
   \   000002A0   ........           _BLF     ascii2ws,??ascii2ws??rA
    319              ConstructEditControl(&ec,1,ECF_APPEND_EOL,jews,256);      
   \   000002A4   400FA0E3           MOV      R0,#+256
   \   000002A8   01002DE9           PUSH     {R0}
   \   000002AC   4C3097E5           LDR      R3,[R7, #+76]
   \   000002B0   4020A0E3           MOV      R2,#+64
   \   000002B4   0110A0E3           MOV      R1,#+1
   \   000002B8   04008DE2           ADD      R0,SP,#+4
   \   000002BC   650100EF           SWI      +357
    320              AddEditControlToEditQend(eq,&ec,ma);
   \   000002C0   0820A0E1           MOV      R2,R8
   \   000002C4   04108DE2           ADD      R1,SP,#+4
   \   000002C8   0900A0E1           MOV      R0,R9
   \   000002CC   660100EF           SWI      +358
    321          
    322            PrepareEditControl(&ec);
   \   000002D0   04008DE2           ADD      R0,SP,#+4
   \   000002D4   640100EF           SWI      +356
    323            CutWSTR(jews, 0);
   \   000002D8   4C0097E5           LDR      R0,[R7, #+76]
   \   000002DC   0010A0E3           MOV      R1,#+0
   \   000002E0   260100EF           SWI      +294
    324            wsAppendChar(jews, jid_set.jid_del?CBOX_CHECKED:CBOX_UNCHECKED);
   \   000002E4   5100D7E5           LDRB     R0,[R7, #+81]
   \                     ??Disp_JID_Enter_Dialog_4:
   \   000002E8   04D08DE2           ADD      SP,SP,#+4
   \   000002EC   000050E3           CMP      R0,#+0
   \   000002F0   4C0097E5           LDR      R0,[R7, #+76]
   \   000002F4   0540A011           MOVNE    R4,R5
   \   000002F8   0410A0E1           MOV      R1,R4
   \   000002FC   1C0000EF           SWI      +28
    325            ConstructEditControl(&ec,ECT_LINK,ECF_APPEND_EOL,jews,jews->wsbody[0]); //8
   \   00000300   4C3097E5           LDR      R3,[R7, #+76]
   \   00000304   4020A0E3           MOV      R2,#+64
   \   00000308   000093E5           LDR      R0,[R3, #+0]
   \   0000030C   0910A0E3           MOV      R1,#+9
   \   00000310   B000D0E1           LDRH     R0,[R0, #+0]
   \   00000314   01002DE9           PUSH     {R0}
   \   00000318   04008DE2           ADD      R0,SP,#+4
   \   0000031C   650100EF           SWI      +357
   \   00000320   04D08DE2           ADD      SP,SP,#+4
    326            }
    327            AddEditControlToEditQend(eq,&ec,ma); 
   \   00000324   0820A0E1           MOV      R2,R8
   \   00000328   0D10A0E1           MOV      R1,SP
   \   0000032C   0900A0E1           MOV      R0,R9
   \   00000330   660100EF           SWI      +358
    328            GRLIST_STRUCT *gr_str=malloc(sizeof(GRLIST_STRUCT));
   \   00000334   0800A0E3           MOV      R0,#+8
   \   00000338   140000EF           SWI      +20
   \   0000033C   0040A0E1           MOV      R4,R0
    329            patch_input(&jed1_desc);
   \   00000340   B861C7E1           STRH     R6,[R7, #+24]
   \   00000344   8A8100EF           SWI      +33162
   \   00000348   190080E2           ADD      R0,R0,#+25
   \   0000034C   BA01C7E1           STRH     R0,[R7, #+26]
   \   00000350   888100EF           SWI      +33160
   \   00000354   010040E2           SUB      R0,R0,#+1
   \   00000358   BC01C7E1           STRH     R0,[R7, #+28]
   \   0000035C   898100EF           SWI      +33161
   \   00000360   0050A0E1           MOV      R5,R0
   \   00000364   8B8100EF           SWI      +33163
   \   00000368   000045E0           SUB      R0,R5,R0
   \   0000036C   010040E2           SUB      R0,R0,#+1
   \   00000370   BE01C7E1           STRH     R0,[R7, #+30]
    330            patch_header(&jed1_hdr);
   \   00000374   B863C7E1           STRH     R6,[R7, #+56]
   \   00000378   1800A0E3           MOV      R0,#+24
   \   0000037C   BA03C7E1           STRH     R0,[R7, #+58]
   \   00000380   888100EF           SWI      +33160
   \   00000384   010040E2           SUB      R0,R0,#+1
   \   00000388   BC03C7E1           STRH     R0,[R7, #+60]
   \   0000038C   8A8100EF           SWI      +33162
   \   00000390   180080E2           ADD      R0,R0,#+24
   \   00000394   BE03C7E1           STRH     R0,[R7, #+62]
    331            CreateInputTextDialog(&jed1_desc,&jed1_hdr,eq,1,gr_str);
   \   00000398   10002DE9           PUSH     {R4}
   \   0000039C   0130A0E3           MOV      R3,#+1
   \   000003A0   0920A0E1           MOV      R2,R9
   \   000003A4   381087E2           ADD      R1,R7,#+56
   \   000003A8   0700A0E1           MOV      R0,R7
   \   000003AC   670100EF           SWI      +359
    332          }
   \   000003B0   30D08DE2           ADD      SP,SP,#+48
   \   000003B4   F08FBDE8           POP      {R4-R11,PC}      ;; return
   \                     ??Disp_JID_Enter_Dialog_0:
   \   000003B8   00000000           DC8      "",+0,+0,+0
   \   000003BC   ........           DC32     jed1_desc
   \   000003C0   ........           DC32     `?<Constant "JID:">`

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable1:
   \   00000000   ........           DC32     jed1_desc

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for jid_menu_sk>`:
   \   00000000   18000000           DC16 24, 0
   \   00000004   ........           DC32 `?<Constant "\\302\\373\\341\\356\\360">`
   \   00000008   01000000           DC16 1, 0
   \   0000000C   ........           DC32 `?<Constant "\\315\\340\\347\\340\\344">`
   \   00000010   3D000000           DC16 61, 0
   \   00000014   FBC0FF7F           DC32 2147467515

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for jid_menu_skt>`:
   \   00000000   ........0000       DC32 jid_menu_sk, 0
   \              0000        

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for jed1_desc>`:
   \   00000000   01000000....       DC32 1, jed1_onkey, jed1_ghook, jed1_locret, 0, jid_menu_skt
   \              ............
   \              ........0000
   \              0000........
   \   00000018   000016008300       DC16 0, 22, 131, 153
   \              9900        
   \   00000020   040000006400       DC32 4, 100, 101, 0, 0, 1073741824
   \              000065000000
   \              000000000000
   \              000000000040
   \                     `?<Initializer for jed1_hdr>`:
   \   00000038   000000008300       DC16 0, 0, 131, 21
   \              1500        
   \   00000040   00000000....       DC32 0H, `?<Constant "\\312\\356\\355\\362\\340\\352\\362:">`
   \              ....        
   \   00000048   FFFFFF7F           DC32 2147483647
   \                     `?<Initializer for jews>`:
   \   0000004C   00000000           DC8 0, 0, 0, 0
   \                     `?<Initializer for jid_set>`:
   \   00000050   000000             DC8 0, 0, 0
   \                     `?<Initializer for jTerminate>`:
   \   00000053   00                 DC8 0
   \                     `?<Initializer for mmmmsk>`:
   \   00000054   18000000           DC16 24, 0
   \   00000058   ........           DC32 `?<Constant "OK">`

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "\\302\\373\\341\\356\\360">`:
   \   00000000   C2FBE1EEF000       DC8 "\302\373\341\356\360"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "\\315\\340\\347\\340\\344">`:
   \   00000000   CDE0E7E0E400       DC8 "\315\340\347\340\344"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "\\312\\356\\355\\362\\340\\352\\362:">`:
   \   00000000   CAEEEDF2E0EA       DC8 "\312\356\355\362\340\352\362:"
   \              F23A00      
   \   00000009   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "roster3">`:
   \   00000000   726F73746572       DC8 "roster3"
   \              3300        

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "subscription">`:
   \   00000000   737562736372       DC8 "subscription"
   \              697074696F6E
   \              00          
   \   0000000D   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "item">`:
   \   00000000   6974656D00         DC8 "item"
   \   00000005   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "remove">`:
   \   00000000   72656D6F7665       DC8 "remove"
   \              00          
   \   00000007   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "jid">`:
   \   00000000   6A696400           DC8 "jid"
   \   00000004   6A6162626572       DC8 "jabber:iq:roster"
   \              3A69713A726F
   \              7374657200  
   \   00000015   000000             DC8 0, 0, 0
   \   00000018   CDE5F2204A49       DC8 "\315\345\362 JID\340!"
   \              44E02100    
   \   00000022   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "name">`:
   \   00000000   6E616D6500         DC8 "name"
   \   00000005   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "group">`:
   \   00000000   67726F757000       DC8 "group"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   73657400           DC8 "set"

   \                                 In segment DATA_C, align 1, align-sorted
   \                     `?<Constant "OK">`:
   \   00000000   4F4B00             DC8 "OK"

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   00                 DC8 ""

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "JID:">`:
   \   00000000   4A49443A00         DC8 "JID:"
   \   00000005   000000             DC8 0, 0, 0
   \   00000008   CDE8EA3A00         DC8 "\315\350\352:"
   \   0000000D   000000             DC8 0, 0, 0
   \   00000010   C3F0F3EFEFE0       DC8 "\303\360\363\357\357\340:"
   \              3A00        
   \   00000018   C7E0EFF0EEF1       DC8 "\307\340\357\360\356\361\350\362\374 \357\356\344\357\350\361\352\363:"
   \              E8F2FC20EFEE
   \              E4EFE8F1EAF3
   \              3A00        
   \   0000002C   D3E4E0EBE8F2       DC8 "\323\344\340\353\350\362\374 \352\356\355\362\340\352\362:"
   \              FC20EAEEEDF2
   \              E0EAF23A00  
   \   0000003D   000000             DC8 0, 0, 0
    333          
    334          //EOL,EOF

   Maximum stack usage in bytes:

     Function              CSTACK
     --------              ------
     Disp_JID_Enter_Dialog    96
     ed_grouplist_handler     16
     jed1_ghook              144
     jed1_locret               0
     jed1_onkey               16


   Segment part sizes:

     Function/Label                 Bytes
     --------------                 -----
     jid_menu_sk                      24
     jid_menu_skt                      8
     ed_grouplist_handler            168
     jed1_onkey                      284
     jed1_ghook                      768
     jed1_locret                       4
     jed1_desc                        92
     Disp_JID_Enter_Dialog           964
     ??DataTable1                      4
     ?<Initializer for jid_menu_sk>   24
     ?<Initializer for jid_menu_skt>
                                       8
     ?<Initializer for jed1_desc>     92
     ?<Constant "\302\373\341\356\360">
                                       8
     ?<Constant "\315\340\347\340\344">
                                       8
     ?<Constant "\312\356\355\362\340\352\362:">
                                      12
     ?<Constant "roster3">             8
     ?<Constant "subscription">       16
     ?<Constant "item">                8
     ?<Constant "remove">              8
     ?<Constant "jid">                36
     ?<Constant "name">                8
     ?<Constant "group">               8
     ?<Constant "set">                 4
     ?<Constant "OK">                  3
     ?<Constant "">                    1
     ?<Constant "JID:">               64
      Others                         128

 
 2 308 bytes in segment CODE
   192 bytes in segment DATA_C
   124 bytes in segment DATA_I
   124 bytes in segment DATA_ID
    12 bytes in segment INITTAB
 
 2 192 bytes of CODE  memory (+ 128 bytes shared)
   316 bytes of CONST memory
   124 bytes of DATA  memory

Errors: none
Warnings: none
