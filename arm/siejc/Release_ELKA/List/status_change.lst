##############################################################################
#                                                                            #
# IAR ARM ANSI C/C++ Compiler V4.42A/W32 EVALUATION    23/Feb/2011  16:38:21 #
# Copyright 1999-2005 IAR Systems. All rights reserved.                      #
#                                                                            #
#    Cpu mode        =  interwork                                            #
#    Endian          =  little                                               #
#    Stack alignment =  4                                                    #
#    Source file     =  C:\arm\siejc\status_change.c                         #
#    Command line    =  C:\arm\siejc\status_change.c -D NEWSGOLD -D ELKA     #
#                       --preprocess C:\arm\siejc\Release_ELKA\List\ -lC     #
#                       C:\arm\siejc\Release_ELKA\List\ -o                   #
#                       C:\arm\siejc\Release_ELKA\Obj\ -s9 --no_unroll       #
#                       --cpu_mode arm --endian little --cpu ARM926EJ-S      #
#                       --stack_align 4 --interwork -e --fpu None            #
#                       --dlib_config "C:\arm2\Embedded Workbench 4.0        #
#                       Evaluation\ARM\LIB\dl5tpainl8f.h" -I                 #
#                       "C:\arm2\Embedded Workbench 4.0                      #
#                       Evaluation\ARM\INC\" --inline_threshold=2            #
#    List file       =  C:\arm\siejc\Release_ELKA\List\status_change.lst     #
#    Object file     =  C:\arm\siejc\Release_ELKA\Obj\status_change.r79      #
#                                                                            #
#                                                                            #
##############################################################################

C:\arm\siejc\status_change.c
      1          /*
      2               SieNatJabber Project
      3              UI для смены своего статуса
      4          */
      5          #include "../inc/swilib.h"
      6          #include "main.h"
      7          #include "jabber_util.h"
      8          #include "status_change.h"
      9          #include "string_util.h"
     10          #include "conf_loader.h"
     11          #include "lang.h"
     12          #include "rect_patcher.h"
     13          #include "roster_icons.h"
     14          
     15          extern char My_Presence;
     16          extern const char* PRESENCES[PRES_COUNT];
     17          extern const char DEFTEX_ONLINE[];
     18          extern const char DEFTEX_CHAT[];
     19          extern const char DEFTEX_AWAY[];
     20          extern const char DEFTEX_XA[];
     21          extern const char DEFTEX_DND[];
     22          extern const char DEFTEX_INVISIBLE[];
     23          extern const char DEFTEX_OFFLINE[];
     24          
     25          #define STATUSES_NUM 7
     26          
     27          static const char * const status_texts[STATUSES_NUM]=
     28          {
     29            DEFTEX_ONLINE,
     30            DEFTEX_CHAT,
     31            DEFTEX_AWAY,
     32            DEFTEX_XA,
     33            DEFTEX_DND,
     34            DEFTEX_INVISIBLE,
     35            DEFTEX_OFFLINE
     36          };
     37          
     38          /*
     39            Select status menu
     40          */
     41          
     42          HEADER_DESC select_status_menu_header={0,0,131,21,NULL,(int)LG_STATUSSEL,LGP_NULL};
     43          
     44          int select_status_menu_softkeys[]={0,1,2};
     45          
     46          SOFTKEY_DESC select_status_menu_sk[]=
     47          {
     48            {0x0018,0x0000,(int)LG_EDIT},
     49            {0x0001,0x0000,(int)LG_BACK},
     50            {0x003D,0x0000,(int)LGP_DOIT_PIC}
     51          };
     52          
     53          SOFTKEYSTAB select_status_menu_skt=
     54          {
     55            select_status_menu_sk, 3
     56          };
     57          

   \                                 In segment CODE, align 4, keep-with-next
     58          int select_status_menu_onkey(void *data, GUI_MSG *msg)
     59          {
   \                     select_status_menu_onkey:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
     60            if (msg->keys==0x18)
   \   00000004   F210D1E1           LDRSH    R1,[R1, #+2]
   \   00000008   180051E3           CMP      R1,#+24
   \   0000000C   0300001A           BNE      ??select_status_menu_onkey_0
     61            {
     62              EditStatus(GetCurMenuItem(data));
   \   00000010   8F0100EF           SWI      +399
   \   00000014   ........           BL       EditStatus
     63              return(-1);
   \   00000018   0000E0E3           MVN      R0,#+0
   \   0000001C   7080BDE8           POP      {R4-R6,PC}
     64            }
     65            if (msg->keys==0x3D)
   \                     ??select_status_menu_onkey_0:
   \   00000020   3D0051E3           CMP      R1,#+61
   \   00000024   1600001A           BNE      ??select_status_menu_onkey_1
     66            {
     67              int i = GetCurMenuItem(data);
   \   00000028   8F0100EF           SWI      +399
   \   0000002C   0040A0E1           MOV      R4,R0
   \   00000030   ........           LDR      R0,??DataTable9  ;; status_texts
   \   00000034   045190E7           LDR      R5,[R0, +R4, LSL #+2]
   \   00000038   0500A0E1           MOV      R0,R5
     68              extern ONLINEINFO OnlineInfo;
     69              char * status_text = malloc(strlen(status_texts[i])+1);
   \   0000003C   1B0000EF           SWI      +27
   \   00000040   010080E2           ADD      R0,R0,#+1
   \   00000044   140000EF           SWI      +20
   \   00000048   0060A0E1           MOV      R6,R0
     70              strcpy(status_text, status_texts[i]);
   \   0000004C   0510A0E1           MOV      R1,R5
   \   00000050   1A0000EF           SWI      +26
     71              PRESENCE_INFO *pr_info = malloc(sizeof(PRESENCE_INFO));
   \   00000054   0800A0E3           MOV      R0,#+8
   \   00000058   140000EF           SWI      +20
   \   0000005C   0010A0E1           MOV      R1,R0
     72              pr_info->priority = OnlineInfo.priority;
   \   00000060   ........           LDR      R0,??DataTable10  ;; OnlineInfo + 2
   \   00000064   F000D0E1           LDRSH    R0,[R0, #+0]
   \   00000068   B000C1E1           STRH     R0,[R1, #+0]
     73              pr_info->status = i;
     74              pr_info->message = status_text;
     75              //mfree(status_text);
     76              SUBPROC((void*)Send_Presence,pr_info);    
   \   0000006C   ........           LDR      R0,??DataTable8  ;; Send_Presence
   \   00000070   0240C1E5           STRB     R4,[R1, #+2]
   \   00000074   046081E5           STR      R6,[R1, #+4]
   \   00000078   710100EF           SWI      +369
     77              return 1;
   \   0000007C   0100A0E3           MOV      R0,#+1
   \   00000080   7080BDE8           POP      {R4-R6,PC}
     78            }  
     79            return 0;
   \                     ??select_status_menu_onkey_1:
   \   00000084   0000A0E3           MOV      R0,#+0
   \   00000088   7080BDE8           POP      {R4-R6,PC}       ;; return
     80          }

   \                                 In segment DATA_I, align 4, align-sorted
   \                     select_status_menu_header:
   \   00000000                      DS8 20
   \   00000014                      REQUIRE `?<Initializer for select_status_menu_header>`
     81          
     82          int select_status_menu_icons[STATUSES_NUM];
   \                     select_status_menu_icons:
   \   00000014                      DS8 28
   \   00000030                      REQUIRE `?<Initializer for select_status_menu_icons>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     select_status_menu_softkeys:
   \   00000000                      DS8 12
   \   0000000C                      REQUIRE `?<Initializer for select_status_menu_softkeys>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     select_status_menu_sk:
   \   00000000                      DS8 24
   \   00000018                      REQUIRE `?<Initializer for select_status_menu_sk>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     select_status_menu_skt:
   \   00000000                      DS8 8
   \   00000008                      REQUIRE `?<Initializer for select_status_menu_skt>`
     83          

   \                                 In segment CODE, align 4, keep-with-next
     84          void select_status_menu_ghook(void *data, int cmd)
     85          {
   \                     select_status_menu_ghook:
   \   00000000   10402DE9           PUSH     {R4,LR}
     86            if (cmd == TI_CMD_FOCUS)
   \   00000004   0A0051E3           CMP      R1,#+10
   \   00000008   0100001A           BNE      ??select_status_menu_ghook_0
     87            {
     88              DisableIDLETMR();
   \   0000000C   7F0100EF           SWI      +383
   \   00000010   1080BDE8           POP      {R4,PC}
     89            }
     90            if (cmd == TI_CMD_DESTROY)
   \                     ??select_status_menu_ghook_0:
   \   00000014   030051E3           CMP      R1,#+3
   \   00000018   1080BD18           POPNE    {R4,PC}
     91            {
     92              for(int i = 0; i < STATUSES_NUM; i ++)
   \   0000001C   0040A0E3           MOV      R4,#+0
     93                mfree((void *)select_status_menu_icons[i]);
   \                     ??select_status_menu_ghook_1:
   \   00000020   ........           LDR      R0,??DataTable5  ;; select_status_menu_header
   \   00000024   040180E0           ADD      R0,R0,R4, LSL #+2
   \   00000028   140090E5           LDR      R0,[R0, #+20]
   \   0000002C   014084E2           ADD      R4,R4,#+1
   \   00000030   150000EF           SWI      +21
   \   00000034   070054E3           CMP      R4,#+7
   \   00000038   F8FFFFBA           BLT      ??select_status_menu_ghook_1
     94            }
     95          }
   \   0000003C   1080BDE8           POP      {R4,PC}          ;; return

   \                                 In segment DATA_C, align 4, align-sorted
   \                     status_texts:
   \   00000000   ............       DC32 DEFTEX_ONLINE, DEFTEX_CHAT, DEFTEX_AWAY, DEFTEX_XA, DEFTEX_DND
   \              ............
   \              ............
   \              ....        
   \   00000014   ............       DC32 DEFTEX_INVISIBLE, DEFTEX_OFFLINE
   \              ....        
   \   0000001C   ........           DC32 `?<Constant "\\316\\355\\353\\340\\351\\355">`
   \   00000020   ........           DC32 `?<Constant "\\303\\356\\362\\356\\342 \\341\\356\\353\\`
   \   00000024   ........           DC32 `?<Constant "\\316\\362\\361\\363\\362\\361\\362\\342\\3`
   \   00000028   ........           DC32 `?<Constant "\\315\\345\\344\\356\\361\\362\\363\\357\\3`
   \   0000002C   ........           DC32 `?<Constant "\\307\\340\\355\\377\\362">`
   \   00000030   ........           DC32 `?<Constant "\\310\\355\\342\\350\\347">`
   \   00000034   ........           DC32 `?<Constant "\\316\\364\\364\\353\\340\\351\\355">`
   \   00000038   C2E2E5E4E8F2       DC8 "\302\342\345\344\350\362\345 \362\345\352\361\362 \361\362\340\362\363\361\340:"
   \              E520F2E5EAF1
   \              F220F1F2E0F2
   \              F3F1E03A00  
   \   0000004F   00                 DC8 0
   \   00000050   CFF0E8EEF0E8       DC8 "\317\360\350\356\360\350\362\345\362:"
   \              F2E5F23A00  
   \   0000005B   00                 DC8 0
     96          
     97          static const char * const select_status_menu_texts[STATUSES_NUM]=
     98          {
     99            LG_STONLINE,
    100            LG_STCHAT,
    101            LG_STAWAY,
    102            LG_STXA,
    103            LG_STDND,
    104            LG_STINVIS,
    105            LG_STOFFLINE
    106          };
    107          

   \                                 In segment CODE, align 4, keep-with-next
    108          void select_status_menu_itemhandler(void *data, int curitem, void *unk)
    109          {
   \                     select_status_menu_itemhandler:
   \   00000000   F0432DE9           PUSH     {R4-R9,LR}
    110            void * item = AllocMLMenuItem(data);
    111            WSHDR * ws1 = AllocMenuWS(data, strlen(select_status_menu_texts[curitem]));
   \   00000004   ........           LDR      R8,??DataTable9  ;; status_texts
   \   00000008   0040A0E1           MOV      R4,R0
   \   0000000C   0150A0E1           MOV      R5,R1
   \   00000010   190200EF           SWI      +537
   \   00000014   0060A0E1           MOV      R6,R0
   \   00000018   050188E0           ADD      R0,R8,R5, LSL #+2
   \   0000001C   1C9090E5           LDR      R9,[R0, #+28]
   \   00000020   0900A0E1           MOV      R0,R9
   \   00000024   1B0000EF           SWI      +27
   \   00000028   0010A0E1           MOV      R1,R0
   \   0000002C   0400A0E1           MOV      R0,R4
   \   00000030   980100EF           SWI      +408
   \   00000034   0070A0E1           MOV      R7,R0
    112            ascii2ws(ws1, select_status_menu_texts[curitem]);
   \   00000038   0910A0E1           MOV      R1,R9
   \   0000003C   ........           _BLF     ascii2ws,??ascii2ws??rA
    113            WSHDR * ws2 = AllocMenuWS(data, strlen(status_texts[curitem]));
   \   00000040   059198E7           LDR      R9,[R8, +R5, LSL #+2]
   \   00000044   0900A0E1           MOV      R0,R9
   \   00000048   1B0000EF           SWI      +27
   \   0000004C   0010A0E1           MOV      R1,R0
   \   00000050   0400A0E1           MOV      R0,R4
   \   00000054   980100EF           SWI      +408
   \   00000058   0080A0E1           MOV      R8,R0
    114            utf8_2ws(ws2, status_texts[curitem], strlen(status_texts[curitem])*2);
   \   0000005C   0900A0E1           MOV      R0,R9
   \   00000060   1B0000EF           SWI      +27
   \   00000064   8020A0E1           LSL      R2,R0,#+1
   \   00000068   0910A0E1           MOV      R1,R9
   \   0000006C   0800A0E1           MOV      R0,R8
   \   00000070   E30100EF           SWI      +483
    115            SetMenuItemIconArray(data, item, select_status_menu_icons + curitem);
   \   00000074   ........           LDR      R0,??DataTable5  ;; select_status_menu_header
   \   00000078   0610A0E1           MOV      R1,R6
   \   0000007C   050180E0           ADD      R0,R0,R5, LSL #+2
   \   00000080   142080E2           ADD      R2,R0,#+20
   \   00000084   0400A0E1           MOV      R0,R4
   \   00000088   990100EF           SWI      +409
    116            SetMLMenuItemText(data, item, ws1, ws2, curitem);
   \   0000008C   20002DE9           PUSH     {R5}
   \   00000090   0830A0E1           MOV      R3,R8
   \   00000094   0720A0E1           MOV      R2,R7
   \   00000098   0610A0E1           MOV      R1,R6
   \   0000009C   0400A0E1           MOV      R0,R4
   \   000000A0   180200EF           SWI      +536
    117          }
   \   000000A4   F183BDE8           POP      {R0,R4-R9,PC}    ;; return
    118          

   \                                 In segment DATA_C, align 4, align-sorted
    119          static const ML_MENU_DESC select_status_menu_struct=
   \                     select_status_menu_struct:
   \   00000000   08000000....       DC32 8, select_status_menu_onkey, select_status_menu_ghook, 0H
   \              ............
   \              00000000    
   \   00000010   ............       DC32 select_status_menu_softkeys, select_status_menu_skt, 17
   \              ....11000000
   \   0000001C   ........0000       DC32 select_status_menu_itemhandler, 0H, 0H, 7, 1
   \              000000000000
   \              070000000100
   \              0000        
    120          {
    121            8,
    122            select_status_menu_onkey,
    123            select_status_menu_ghook,
    124            NULL,
    125            select_status_menu_softkeys,
    126            &select_status_menu_skt,
    127            0x11,
    128            select_status_menu_itemhandler,
    129            NULL,
    130            NULL,
    131            STATUSES_NUM,
    132            1
    133          };
    134          

   \                                 In segment CODE, align 4, keep-with-next
    135          void ShowStatusSelectMenu()
    136          {
   \                     ShowStatusSelectMenu:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
    137            select_status_menu_icons[0] = (int)Roster_getIconByStatus(NULL, PRESENCE_ONLINE);
   \   00000004   DC409FE5           LDR      R4,??ShowStatusSelectMenu_0  ;; select_status_menu_header
    138            select_status_menu_icons[1] = (int)Roster_getIconByStatus(NULL, PRESENCE_CHAT);
    139            select_status_menu_icons[2] = (int)Roster_getIconByStatus(NULL, PRESENCE_AWAY);
    140            select_status_menu_icons[3] = (int)Roster_getIconByStatus(NULL, PRESENCE_XA);
    141            select_status_menu_icons[4] = (int)Roster_getIconByStatus(NULL, PRESENCE_DND);
    142            select_status_menu_icons[5] = (int)Roster_getIconByStatus(NULL, PRESENCE_INVISIBLE);
    143            select_status_menu_icons[6] = (int)Roster_getIconByStatus(NULL, PRESENCE_OFFLINE);
    144            if (My_Presence < PRESENCE_OFFLINE)
   \   00000008   DC509FE5           LDR      R5,??ShowStatusSelectMenu_0+0x4  ;; My_Presence
   \   0000000C   0010A0E3           MOV      R1,#+0
   \   00000010   0000A0E3           MOV      R0,#+0
   \   00000014   ........           _BLF     Roster_getIconByStatus,??Roster_getIconByStatus??rA
   \   00000018   140084E5           STR      R0,[R4, #+20]
   \   0000001C   0110A0E3           MOV      R1,#+1
   \   00000020   0000A0E3           MOV      R0,#+0
   \   00000024   ........           _BLF     Roster_getIconByStatus,??Roster_getIconByStatus??rA
   \   00000028   180084E5           STR      R0,[R4, #+24]
   \   0000002C   0210A0E3           MOV      R1,#+2
   \   00000030   0000A0E3           MOV      R0,#+0
   \   00000034   ........           _BLF     Roster_getIconByStatus,??Roster_getIconByStatus??rA
   \   00000038   1C0084E5           STR      R0,[R4, #+28]
   \   0000003C   0310A0E3           MOV      R1,#+3
   \   00000040   0000A0E3           MOV      R0,#+0
   \   00000044   ........           _BLF     Roster_getIconByStatus,??Roster_getIconByStatus??rA
   \   00000048   200084E5           STR      R0,[R4, #+32]
   \   0000004C   0410A0E3           MOV      R1,#+4
   \   00000050   0000A0E3           MOV      R0,#+0
   \   00000054   ........           _BLF     Roster_getIconByStatus,??Roster_getIconByStatus??rA
   \   00000058   240084E5           STR      R0,[R4, #+36]
   \   0000005C   0510A0E3           MOV      R1,#+5
   \   00000060   0000A0E3           MOV      R0,#+0
   \   00000064   ........           _BLF     Roster_getIconByStatus,??Roster_getIconByStatus??rA
   \   00000068   280084E5           STR      R0,[R4, #+40]
   \   0000006C   0610A0E3           MOV      R1,#+6
   \   00000070   0000A0E3           MOV      R0,#+0
   \   00000074   ........           _BLF     Roster_getIconByStatus,??Roster_getIconByStatus??rA
   \   00000078   2C0084E5           STR      R0,[R4, #+44]
   \   0000007C   0000D5E5           LDRB     R0,[R5, #+0]
   \   00000080   060050E3           CMP      R0,#+6
    145              select_status_menu_header.icon = &select_status_menu_icons[My_Presence];
   \   00000084   00018430           ADDCC    R0,R4,R0, LSL #+2
   \   00000088   14008032           ADDCC    R0,R0,#+20
   \   0000008C   08008435           STRCC    R0,[R4, #+8]
    146            
    147            patch_header(&select_status_menu_header);
   \   00000090   0000A0E3           MOV      R0,#+0
   \   00000094   B000C4E1           STRH     R0,[R4, #+0]
   \   00000098   1800A0E3           MOV      R0,#+24
   \   0000009C   B200C4E1           STRH     R0,[R4, #+2]
   \   000000A0   888100EF           SWI      +33160
   \   000000A4   010040E2           SUB      R0,R0,#+1
   \   000000A8   B400C4E1           STRH     R0,[R4, #+4]
   \   000000AC   8A8100EF           SWI      +33162
    148            CreateMultiLinesMenu(NULL, NULL, &select_status_menu_struct, &select_status_menu_header, My_Presence < PRESENCE_OFFLINE ? My_Presence: 0, STATUSES_NUM);
   \   000000B0   38209FE5           LDR      R2,??ShowStatusSelectMenu_0+0x8  ;; select_status_menu_struct
   \   000000B4   180080E2           ADD      R0,R0,#+24
   \   000000B8   B600C4E1           STRH     R0,[R4, #+6]
   \   000000BC   0000D5E5           LDRB     R0,[R5, #+0]
   \   000000C0   0710A0E3           MOV      R1,#+7
   \   000000C4   02002DE9           PUSH     {R1}
   \   000000C8   060050E3           CMP      R0,#+6
   \   000000CC   0000A023           MOVCS    R0,#+0
   \   000000D0   01002DE9           PUSH     {R0}
   \   000000D4   0430A0E1           MOV      R3,R4
   \   000000D8   0010A0E3           MOV      R1,#+0
   \   000000DC   0000A0E3           MOV      R0,#+0
   \   000000E0   170200EF           SWI      +535
    149          }
   \   000000E4   3380BDE8           POP      {R0,R1,R4,R5,PC}  ;; return
   \                     ??ShowStatusSelectMenu_0:
   \   000000E8   ........           DC32     select_status_menu_header
   \   000000EC   ........           DC32     My_Presence
   \   000000F0   ........           DC32     select_status_menu_struct
    150          
    151          /*
    152            Edit status
    153          */
    154          

   \                                 In segment DATA_I, align 4, align-sorted
    155          int edit_status_menu_softkeys[]={0,1,2};
   \                     edit_status_menu_softkeys:
   \   00000000                      DS8 12
   \   0000000C                      REQUIRE `?<Initializer for edit_status_menu_softkeys>`
    156          

   \                                 In segment DATA_I, align 4, align-sorted
    157          SOFTKEY_DESC edit_status_menu_sk[]=
   \                     edit_status_menu_sk:
   \   00000000                      DS8 24
   \   00000018                      REQUIRE `?<Initializer for edit_status_menu_sk>`
    158          {
    159            {0x0018,0x0000,(int)LG_EDIT},
    160            {0x0001,0x0000,(int)LG_BACK},
    161            {0x003D,0x0000,(int)LGP_DOIT_PIC}
    162          };
    163          

   \                                 In segment DATA_I, align 4, align-sorted
    164          SOFTKEYSTAB edit_status_menu_skt=
   \                     edit_status_menu_skt:
   \   00000000                      DS8 8
   \   00000008                      REQUIRE `?<Initializer for edit_status_menu_skt>`
    165          {
    166            edit_status_menu_sk, 3
    167          };
    168          

   \                                 In segment CODE, align 4, keep-with-next
    169          int edit_status_menu_onkey(GUI *data, GUI_MSG *msg)
    170          {
   \                     edit_status_menu_onkey:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
   \   00000004   5CD04DE2           SUB      SP,SP,#+92
   \   00000008   0040A0E1           MOV      R4,R0
    171            EDITCONTROL ec;
    172            if(msg->gbsmsg->submess==GREEN_BUTTON  || msg->keys == 0x18)
   \   0000000C   040091E5           LDR      R0,[R1, #+4]
   \   00000010   080090E5           LDR      R0,[R0, #+8]
   \   00000014   0B0050E3           CMP      R0,#+11
   \   00000018   F200D111           LDRSHNE  R0,[R1, #+2]
   \   0000001C   18005013           CMPNE    R0,#+24
   \   00000020   5200001A           BNE      ??edit_status_menu_onkey_0
    173            {
    174              ExtractEditControl(data, 2, &ec);
   \   00000024   04208DE2           ADD      R2,SP,#+4
   \   00000028   0210A0E3           MOV      R1,#+2
    175              char * status_text = malloc(1024);
    176              if(ec.pWS->wsbody[0])
   \   0000002C   ........           LDR      R6,??DataTable9  ;; status_texts
   \   00000030   0400A0E1           MOV      R0,R4
   \   00000034   690100EF           SWI      +361
   \   00000038   400EA0E3           MOV      R0,#+1024
   \   0000003C   140000EF           SWI      +20
   \   00000040   0050A0E1           MOV      R5,R0
   \   00000044   2C009DE5           LDR      R0,[SP, #+44]
   \   00000048   001090E5           LDR      R1,[R0, #+0]
   \   0000004C   B020D1E1           LDRH     R2,[R1, #+0]
   \   00000050   000052E3           CMP      R2,#+0
   \   00000054   1300000A           BEQ      ??edit_status_menu_onkey_1
    177              {
    178                int res_len;
    179                //status_text = malloc(ec.pWS->wsbody[0] * 2 + 1);
    180                ws_2utf8(ec.pWS, status_text, &res_len, ec.pWS->wsbody[0] * 2 + 1);
   \   00000058   0210A0E1           MOV      R1,R2
   \   0000005C   0120A0E3           MOV      R2,#+1
   \   00000060   813082E0           ADD      R3,R2,R1, LSL #+1
   \   00000064   0D20A0E1           MOV      R2,SP
   \   00000068   0510A0E1           MOV      R1,R5
   \   0000006C   E20100EF           SWI      +482
    181                status_text = realloc(status_text, res_len + 1);
   \   00000070   00009DE5           LDR      R0,[SP, #+0]
   \   00000074   011080E2           ADD      R1,R0,#+1
   \   00000078   0500A0E1           MOV      R0,R5
   \   0000007C   BA0000EF           SWI      +186
   \   00000080   0050A0E1           MOV      R5,R0
    182                status_text[res_len]='\0';
   \   00000084   00009DE5           LDR      R0,[SP, #+0]
   \   00000088   0010A0E3           MOV      R1,#+0
   \   0000008C   0510C0E7           STRB     R1,[R0, +R5]
    183                strcpy((char *)status_texts[(int)EDIT_GetUserPointer(data)], status_text);
   \   00000090   0400A0E1           MOV      R0,R4
   \   00000094   DF0100EF           SWI      +479
   \   00000098   000196E7           LDR      R0,[R6, +R0, LSL #+2]
   \   0000009C   0510A0E1           MOV      R1,R5
   \   000000A0   1A0000EF           SWI      +26
   \   000000A4   080000EA           B        ??edit_status_menu_onkey_2
    184              }
    185              else
    186              {
    187                extern const char empty_t[];
    188                sprintf(status_text, empty_t);
   \                     ??edit_status_menu_onkey_1:
   \   000000A8   D4709FE5           LDR      R7,??edit_status_menu_onkey_3  ;; empty_t
   \   000000AC   0500A0E1           MOV      R0,R5
   \   000000B0   0710A0E1           MOV      R1,R7
   \   000000B4   160000EF           SWI      +22
    189                sprintf((char *)status_texts[(int)EDIT_GetUserPointer(data)], empty_t);
   \   000000B8   0400A0E1           MOV      R0,R4
   \   000000BC   DF0100EF           SWI      +479
   \   000000C0   000196E7           LDR      R0,[R6, +R0, LSL #+2]
   \   000000C4   0710A0E1           MOV      R1,R7
   \   000000C8   160000EF           SWI      +22
    190              }
    191              
    192              PRESENCE_INFO *pr_info = malloc(sizeof(PRESENCE_INFO));
   \                     ??edit_status_menu_onkey_2:
   \   000000CC   0800A0E3           MOV      R0,#+8
   \   000000D0   140000EF           SWI      +20
   \   000000D4   0070A0E1           MOV      R7,R0
    193              EDITCONTROL ec2;
    194              ExtractEditControl(data, 4, &ec2);
   \   000000D8   30208DE2           ADD      R2,SP,#+48
   \   000000DC   0410A0E3           MOV      R1,#+4
   \   000000E0   0400A0E1           MOV      R0,R4
   \   000000E4   690100EF           SWI      +361
    195              char *status_prior = malloc(10);
   \   000000E8   0A00A0E3           MOV      R0,#+10
   \   000000EC   140000EF           SWI      +20
   \   000000F0   0060A0E1           MOV      R6,R0
    196              ws_2str(ec2.pWS, status_prior, 10);
   \   000000F4   58009DE5           LDR      R0,[SP, #+88]
   \   000000F8   0A20A0E3           MOV      R2,#+10
   \   000000FC   0610A0E1           MOV      R1,R6
   \   00000100   A30000EF           SWI      +163
    197              extern const char percent_d[];
    198              sscanf(status_prior, percent_d, &pr_info->priority);
   \   00000104   7C109FE5           LDR      R1,??edit_status_menu_onkey_3+0x4  ;; percent_d
   \   00000108   0720A0E1           MOV      R2,R7
   \   0000010C   0600A0E1           MOV      R0,R6
   \   00000110   F50100EF           SWI      +501
    199              pr_info->status = (int)EDIT_GetUserPointer(data);
   \   00000114   0400A0E1           MOV      R0,R4
   \   00000118   DF0100EF           SWI      +479
    200              pr_info->message = status_text; //неосвобождать
    201          //    if (status_text) mfree(status_text);
    202              extern ONLINEINFO OnlineInfo;
    203              if(pr_info->priority!=OnlineInfo.priority)
   \   0000011C   ........           LDR      R1,??DataTable10  ;; OnlineInfo + 2
   \   00000120   0200C7E5           STRB     R0,[R7, #+2]
   \   00000124   045087E5           STR      R5,[R7, #+4]
   \   00000128   F000D7E1           LDRSH    R0,[R7, #+0]
   \   0000012C   F010D1E1           LDRSH    R1,[R1, #+0]
   \   00000130   010050E1           CMP      R0,R1
   \   00000134   0300000A           BEQ      ??edit_status_menu_onkey_4
    204              SUBPROC((void*)Send_Presence,pr_info);
   \   00000138   ........           LDR      R0,??DataTable8  ;; Send_Presence
   \   0000013C   0710A0E1           MOV      R1,R7
   \   00000140   710100EF           SWI      +369
   \   00000144   010000EA           B        ??edit_status_menu_onkey_5
    205              else mfree(pr_info);
   \                     ??edit_status_menu_onkey_4:
   \   00000148   0700A0E1           MOV      R0,R7
   \   0000014C   150000EF           SWI      +21
    206              SaveConfigData(successed_config_filename);
   \                     ??edit_status_menu_onkey_5:
   \   00000150   34009FE5           LDR      R0,??edit_status_menu_onkey_3+0x8  ;; successed_config_filename
   \   00000154   000090E5           LDR      R0,[R0, #+0]
   \   00000158   ........           _BLF     SaveConfigData,??SaveConfigData??rA
    207              mfree(status_prior);
   \   0000015C   0600A0E1           MOV      R0,R6
   \   00000160   150000EF           SWI      +21
    208              return 1;
   \                     ??edit_status_menu_onkey_6:
   \   00000164   0100A0E3           MOV      R0,#+1
   \   00000168   5CD08DE2           ADD      SP,SP,#+92
   \   0000016C   F080BDE8           POP      {R4-R7,PC}
    209            }
    210            if (msg->keys==0x0FF0) //Левый софт СГОЛД
   \                     ??edit_status_menu_onkey_0:
   \   00000170   FF0E50E3           CMP      R0,#+4080
   \   00000174   FAFFFF0A           BEQ      ??edit_status_menu_onkey_6
    211            {
    212              return(1);
    213            }
    214            return 0;
   \   00000178   0000A0E3           MOV      R0,#+0
   \   0000017C   5CD08DE2           ADD      SP,SP,#+92
   \   00000180   F080BDE8           POP      {R4-R7,PC}       ;; return
   \                     ??edit_status_menu_onkey_3:
   \   00000184   ........           DC32     empty_t
   \   00000188   ........           DC32     percent_d
   \   0000018C   ........           DC32     successed_config_filename
    215          }
    216          

   \                                 In segment CODE, align 4, keep-with-next
    217          void edit_status_menu_ghook(GUI *data, int cmd)
    218          {
   \                     edit_status_menu_ghook:
   \   00000000   10402DE9           PUSH     {R4,LR}
   \   00000004   2CD04DE2           SUB      SP,SP,#+44
    219            EDITCONTROL ec;
    220            static SOFTKEY_DESC stchsk={0x0018, 0x0000,(int)LG_OK};
    221          
    222            if (cmd == TI_CMD_REDRAW)
   \   00000008   070051E3           CMP      R1,#+7
   \   0000000C   0040A0E1           MOV      R4,R0
   \   00000010   0800001A           BNE      ??edit_status_menu_ghook_0
    223            {
    224              ExtractEditControl(data, 2, &ec);
   \   00000014   0D20A0E1           MOV      R2,SP
   \   00000018   0210A0E3           MOV      R1,#+2
   \   0000001C   690100EF           SWI      +361
    225          #ifndef NEWSGOLD
    226            static const SOFTKEY_DESC sk_cancel={0x0FF0,0x0000,(int)LG_CLOSE};
    227          #endif  
    228              //OnRun
    229          #ifdef NEWSGOLD
    230              SetSoftKey(data,&stchsk,0);
   \   00000020   24109FE5           LDR      R1,??edit_status_menu_ghook_1  ;; ??stchsk
   \   00000024   0020A0E3           MOV      R2,#+0
   \   00000028   0400A0E1           MOV      R0,R4
   \   0000002C   680100EF           SWI      +360
   \   00000030   2CD08DE2           ADD      SP,SP,#+44
   \   00000034   1080BDE8           POP      {R4,PC}
    231          #else
    232              SetSoftKey(data,&stchsk,1);
    233              if (ec.pWS->wsbody[0]==0)
    234                SetSoftKey(data,&sk_cancel,SET_SOFT_KEY_N==0?1:0);    
    235          #endif
    236            }
    237          
    238            if(cmd == TI_CMD_FOCUS)
   \                     ??edit_status_menu_ghook_0:
   \   00000038   0A0051E3           CMP      R1,#+10
   \   0000003C   0000001A           BNE      ??edit_status_menu_ghook_2
    239            {
    240              DisableIDLETMR();
   \   00000040   7F0100EF           SWI      +383
    241            }
    242          }
   \                     ??edit_status_menu_ghook_2:
   \   00000044   2CD08DE2           ADD      SP,SP,#+44       ;; stack cleaning
   \   00000048   1080BDE8           POP      {R4,PC}          ;; return
   \                     ??edit_status_menu_ghook_1:
   \   0000004C   ........           DC32     ??stchsk

   \                                 In segment DATA_I, align 4, align-sorted
   \                     ??stchsk:
   \   00000000                      DS8 8
   \   00000008                      REQUIRE `?<Initializer for stchsk>`
    243          
    244          HEADER_DESC edit_status_menu_header={0,0,131,21,NULL,(int)LG_STATUS,LGP_NULL};
    245          

   \                                 In segment CODE, align 4, keep-with-next
    246          void edit_status_menu_locret(void){}
   \                     edit_status_menu_locret:
   \   00000000   1EFF2FE1           BX       LR               ;; return

   \                                 In segment DATA_I, align 4, align-sorted
    247          
    248          INPUTDIA_DESC edit_status_menu_struct=
   \                     edit_status_menu_struct:
   \   00000000                      DS8 56
   \   00000038                      REQUIRE `?<Initializer for edit_status_menu_struct>`
   \                     edit_status_menu_header:
   \   00000038                      DS8 20
   \   0000004C                      REQUIRE `?<Initializer for edit_status_menu_header>`
    249          {
    250            1,
    251            edit_status_menu_onkey,
    252            edit_status_menu_ghook,
    253            (void *)edit_status_menu_locret,
    254            0,
    255            &edit_status_menu_skt,
    256            {0,22,131,153},
    257            4,
    258            100,
    259            101,
    260            0,
    261            0,
    262            0x40000000
    263          };
    264          

   \                                 In segment CODE, align 4, keep-with-next
    265          void EditStatus(int status_n)
    266          {
   \                     EditStatus:
   \   00000000   F0432DE9           PUSH     {R4-R9,LR}
    267            WSHDR * ws = AllocWS(256);
    268            EDITCONTROL ec;
    269            void * ma = malloc_adr();
    270            void * eq = AllocEQueue(ma,mfree_adr());
    271            
    272            PrepareEditControl(&ec);
    273          
    274            ascii2ws(ws, LG_ENTERTEXTSTATUS);
   \   00000004   ........           LDR      R8,??DataTable9  ;; status_texts
   \   00000008   2CD04DE2           SUB      SP,SP,#+44
   \   0000000C   0040A0E1           MOV      R4,R0
   \   00000010   400FA0E3           MOV      R0,#+256
   \   00000014   250100EF           SWI      +293
   \   00000018   0050A0E1           MOV      R5,R0
   \   0000001C   148000EF           SWI      +32788
   \   00000020   0070A0E1           MOV      R7,R0
   \   00000024   158000EF           SWI      +32789
   \   00000028   0010A0E1           MOV      R1,R0
   \   0000002C   0700A0E1           MOV      R0,R7
   \   00000030   630100EF           SWI      +355
   \   00000034   0060A0E1           MOV      R6,R0
   \   00000038   0D00A0E1           MOV      R0,SP
   \   0000003C   640100EF           SWI      +356
   \   00000040   381088E2           ADD      R1,R8,#+56
   \   00000044   0500A0E1           MOV      R0,R5
   \   00000048   ........           _BLF     ascii2ws,??ascii2ws??rA
    275            ConstructEditControl(&ec, ECT_HEADER, ECF_APPEND_EOL, ws, ws->wsbody[0]);
   \   0000004C   000095E5           LDR      R0,[R5, #+0]
   \   00000050   0530A0E1           MOV      R3,R5
   \   00000054   B000D0E1           LDRH     R0,[R0, #+0]
   \   00000058   4020A0E3           MOV      R2,#+64
   \   0000005C   0110A0E3           MOV      R1,#+1
   \   00000060   01002DE9           PUSH     {R0}
   \   00000064   04008DE2           ADD      R0,SP,#+4
   \   00000068   650100EF           SWI      +357
    276            AddEditControlToEditQend(eq,&ec,ma);
   \   0000006C   0720A0E1           MOV      R2,R7
   \   00000070   04108DE2           ADD      R1,SP,#+4
   \   00000074   0600A0E1           MOV      R0,R6
   \   00000078   660100EF           SWI      +358
   \   0000007C   049198E7           LDR      R9,[R8, +R4, LSL #+2]
   \   00000080   0900A0E1           MOV      R0,R9
    277          
    278            utf8_2ws(ws, status_texts[status_n], strlen(status_texts[status_n])*2);
   \   00000084   1B0000EF           SWI      +27
   \   00000088   8020A0E1           LSL      R2,R0,#+1
   \   0000008C   0910A0E1           MOV      R1,R9
   \   00000090   0500A0E1           MOV      R0,R5
   \   00000094   E30100EF           SWI      +483
    279            ConstructEditControl(&ec, ECT_NORMAL_TEXT, ECF_APPEND_EOL, ws, 256);
   \   00000098   400FA0E3           MOV      R0,#+256
   \   0000009C   01002DE9           PUSH     {R0}
   \   000000A0   0530A0E1           MOV      R3,R5
   \   000000A4   4020A0E3           MOV      R2,#+64
   \   000000A8   0310A0E3           MOV      R1,#+3
   \   000000AC   08008DE2           ADD      R0,SP,#+8
   \   000000B0   650100EF           SWI      +357
    280            AddEditControlToEditQend(eq, &ec, ma);
   \   000000B4   0720A0E1           MOV      R2,R7
   \   000000B8   08108DE2           ADD      R1,SP,#+8
   \   000000BC   0600A0E1           MOV      R0,R6
   \   000000C0   660100EF           SWI      +358
    281          
    282            ascii2ws(ws, LG_PRIORITY);
   \   000000C4   501088E2           ADD      R1,R8,#+80
   \   000000C8   0500A0E1           MOV      R0,R5
   \   000000CC   ........           _BLF     ascii2ws,??ascii2ws??rA
    283            ConstructEditControl(&ec, ECT_HEADER, ECF_APPEND_EOL, ws, ws->wsbody[0]);
   \   000000D0   000095E5           LDR      R0,[R5, #+0]
   \   000000D4   0530A0E1           MOV      R3,R5
   \   000000D8   B000D0E1           LDRH     R0,[R0, #+0]
   \   000000DC   4020A0E3           MOV      R2,#+64
   \   000000E0   0110A0E3           MOV      R1,#+1
   \   000000E4   01002DE9           PUSH     {R0}
    284            AddEditControlToEditQend(eq, &ec, ma);
    285            
    286            extern ONLINEINFO OnlineInfo;
    287            wsprintf(ws, "%d",OnlineInfo.priority);
    288            ConstructEditControl(&ec, ECT_FIXED_STR_NUM, ECF_APPEND_EOL, ws, 2);
    289            AddEditControlToEditQend(eq, &ec, ma);
    290          
    291            patch_input(&edit_status_menu_struct);
   \   000000E8   0080A0E3           MOV      R8,#+0
   \   000000EC   0C008DE2           ADD      R0,SP,#+12
   \   000000F0   650100EF           SWI      +357
   \   000000F4   0720A0E1           MOV      R2,R7
   \   000000F8   0C108DE2           ADD      R1,SP,#+12
   \   000000FC   0600A0E1           MOV      R0,R6
   \   00000100   660100EF           SWI      +358
   \   00000104   ........           LDR      R0,??DataTable10  ;; OnlineInfo + 2
   \   00000108   2E1F8FE2           ADR      R1,??EditStatus_0  ;; "%d"
   \   0000010C   F020D0E1           LDRSH    R2,[R0, #+0]
   \   00000110   0500A0E1           MOV      R0,R5
   \   00000114   240100EF           SWI      +292
   \   00000118   0200A0E3           MOV      R0,#+2
   \   0000011C   01002DE9           PUSH     {R0}
   \   00000120   0530A0E1           MOV      R3,R5
   \   00000124   4020A0E3           MOV      R2,#+64
   \   00000128   0510A0E3           MOV      R1,#+5
   \   0000012C   10008DE2           ADD      R0,SP,#+16
   \   00000130   650100EF           SWI      +357
   \   00000134   0720A0E1           MOV      R2,R7
   \   00000138   8C709FE5           LDR      R7,??EditStatus_0+0x4  ;; edit_status_menu_struct
   \   0000013C   10108DE2           ADD      R1,SP,#+16
   \   00000140   0600A0E1           MOV      R0,R6
   \   00000144   660100EF           SWI      +358
   \   00000148   B881C7E1           STRH     R8,[R7, #+24]
   \   0000014C   8A8100EF           SWI      +33162
   \   00000150   190080E2           ADD      R0,R0,#+25
   \   00000154   BA01C7E1           STRH     R0,[R7, #+26]
   \   00000158   888100EF           SWI      +33160
   \   0000015C   010040E2           SUB      R0,R0,#+1
   \   00000160   BC01C7E1           STRH     R0,[R7, #+28]
   \   00000164   898100EF           SWI      +33161
   \   00000168   0090A0E1           MOV      R9,R0
   \   0000016C   8B8100EF           SWI      +33163
   \   00000170   000049E0           SUB      R0,R9,R0
   \   00000174   010040E2           SUB      R0,R0,#+1
   \   00000178   BE01C7E1           STRH     R0,[R7, #+30]
    292            patch_header(&edit_status_menu_header);
   \   0000017C   B883C7E1           STRH     R8,[R7, #+56]
   \   00000180   1800A0E3           MOV      R0,#+24
   \   00000184   BA03C7E1           STRH     R0,[R7, #+58]
   \   00000188   888100EF           SWI      +33160
   \   0000018C   010040E2           SUB      R0,R0,#+1
   \   00000190   BC03C7E1           STRH     R0,[R7, #+60]
   \   00000194   8A8100EF           SWI      +33162
   \   00000198   180080E2           ADD      R0,R0,#+24
   \   0000019C   BE03C7E1           STRH     R0,[R7, #+62]
    293            CreateInputTextDialog(&edit_status_menu_struct, &edit_status_menu_header, eq, 1, (void *)status_n);
   \   000001A0   10002DE9           PUSH     {R4}
   \   000001A4   0130A0E3           MOV      R3,#+1
   \   000001A8   0620A0E1           MOV      R2,R6
   \   000001AC   381087E2           ADD      R1,R7,#+56
   \   000001B0   0700A0E1           MOV      R0,R7
   \   000001B4   670100EF           SWI      +359
    294            FreeWS(ws);
   \   000001B8   0500A0E1           MOV      R0,R5
   \   000001BC   290100EF           SWI      +297
    295          }
   \   000001C0   40D08DE2           ADD      SP,SP,#+64
   \   000001C4   F083BDE8           POP      {R4-R9,PC}       ;; return
   \                     ??EditStatus_0:
   \   000001C8   25640000           DC8      "%d",+0
   \   000001CC   ........           DC32     edit_status_menu_struct

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable5:
   \   00000000   ........           DC32     select_status_menu_header

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable8:
   \   00000000   ........           DC32     Send_Presence

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable9:
   \   00000000   ........           DC32     status_texts

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable10:
   \   00000000   ........           DC32     OnlineInfo + 2

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for select_status_menu_header>`:
   \   00000000   000000008300       DC16 0, 0, 131, 21
   \              1500        
   \   00000008   00000000....       DC32 0H, `?<Constant "\\302\\373\\341\\356\\360 \\361\\362\\340\\`
   \              ....        
   \   00000010   FFFFFF7F           DC32 2147483647
   \                     `?<Initializer for select_status_menu_icons>`:
   \   00000014   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000024   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for select_status_menu_softkeys>`:
   \   00000000   000000000100       DC32 0, 1, 2
   \              000002000000

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for select_status_menu_sk>`:
   \   00000000   18000000           DC16 24, 0
   \   00000004   ........           DC32 `?<Constant "\\310\\347\\354\\345\\355\\350\\362\\374">`
   \   00000008   01000000           DC16 1, 0
   \   0000000C   ........           DC32 `?<Constant "\\315\\340\\347\\340\\344">`
   \   00000010   3D000000           DC16 61, 0
   \   00000014   FBC0FF7F           DC32 2147467515

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for select_status_menu_skt>`:
   \   00000000   ........0300       DC32 select_status_menu_sk, 3
   \              0000        

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for edit_status_menu_softkeys>`:
   \   00000000   000000000100       DC32 0, 1, 2
   \              000002000000

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for edit_status_menu_sk>`:
   \   00000000   18000000           DC16 24, 0
   \   00000004   ........           DC32 `?<Constant "\\310\\347\\354\\345\\355\\350\\362\\374">`
   \   00000008   01000000           DC16 1, 0
   \   0000000C   ........           DC32 `?<Constant "\\315\\340\\347\\340\\344">`
   \   00000010   3D000000           DC16 61, 0
   \   00000014   FBC0FF7F           DC32 2147467515

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for edit_status_menu_skt>`:
   \   00000000   ........0300       DC32 edit_status_menu_sk, 3
   \              0000        

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for stchsk>`:
   \   00000000   18000000           DC16 24, 0
   \   00000004   ........           DC32 `?<Constant "OK">`

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for edit_status_menu_struct>`:
   \   00000000   01000000....       DC32 1, edit_status_menu_onkey, edit_status_menu_ghook
   \              ............
   \   0000000C   ........0000       DC32 edit_status_menu_locret, 0, edit_status_menu_skt
   \              0000........
   \   00000018   000016008300       DC16 0, 22, 131, 153
   \              9900        
   \   00000020   040000006400       DC32 4, 100, 101, 0, 0, 1073741824
   \              000065000000
   \              000000000000
   \              000000000040
   \                     `?<Initializer for edit_status_menu_header>`:
   \   00000038   000000008300       DC16 0, 0, 131, 21
   \              1500        
   \   00000040   00000000....       DC32 0H, `?<Constant "\\321\\362\\340\\362\\363\\361">`, 2147483647
   \              ....FFFFFF7F

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "\\302\\373\\341\\356\\360 \\361\\362\\340\\`:
   \   00000000   C2FBE1EEF020       DC8 "\302\373\341\356\360 \361\362\340\362\363\361\340"
   \              F1F2E0F2F3F1
   \              E000        
   \   0000000E   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "\\310\\347\\354\\345\\355\\350\\362\\374">`:
   \   00000000   C8E7ECE5EDE8       DC8 "\310\347\354\345\355\350\362\374"
   \              F2FC00      
   \   00000009   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "\\315\\340\\347\\340\\344">`:
   \   00000000   CDE0E7E0E400       DC8 "\315\340\347\340\344"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "\\316\\355\\353\\340\\351\\355">`:
   \   00000000   CEEDEBE0E9ED       DC8 "\316\355\353\340\351\355"
   \              00          
   \   00000007   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "\\303\\356\\362\\356\\342 \\341\\356\\353\\`:
   \   00000000   C3EEF2EEE220       DC8 "\303\356\362\356\342 \341\356\353\362\340\362\374"
   \              E1EEEBF2E0F2
   \              FC00        
   \   0000000E   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "\\316\\362\\361\\363\\362\\361\\362\\342\\3`:
   \   00000000   CEF2F1F3F2F1       DC8 "\316\362\361\363\362\361\362\342\363\376"
   \              F2E2F3FE00  
   \   0000000B   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "\\315\\345\\344\\356\\361\\362\\363\\357\\3`:
   \   00000000   CDE5E4EEF1F2       DC8 "\315\345\344\356\361\362\363\357\345\355"
   \              F3EFE5ED00  
   \   0000000B   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "\\307\\340\\355\\377\\362">`:
   \   00000000   C7E0EDFFF200       DC8 "\307\340\355\377\362"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "\\310\\355\\342\\350\\347">`:
   \   00000000   C8EDE2E8E700       DC8 "\310\355\342\350\347"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "\\316\\364\\364\\353\\340\\351\\355">`:
   \   00000000   CEF4F4EBE0E9       DC8 "\316\364\364\353\340\351\355"
   \              ED00        

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "\\321\\362\\340\\362\\363\\361">`:
   \   00000000   D1F2E0F2F3F1       DC8 "\321\362\340\362\363\361"
   \              00          
   \   00000007   00                 DC8 0

   \                                 In segment DATA_C, align 1, align-sorted
   \                     `?<Constant "OK">`:
   \   00000000   4F4B00             DC8 "OK"

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   256400             DC8 "%d"
    296          
    297          //EOL,EOF

   Maximum stack usage in bytes:

     Function                       CSTACK
     --------                       ------
     EditStatus                        92
     ShowStatusSelectMenu              20
     edit_status_menu_ghook            52
     edit_status_menu_locret            0
     edit_status_menu_onkey           112
     select_status_menu_ghook           8
     select_status_menu_itemhandler    32
     select_status_menu_onkey          16


   Segment part sizes:

     Function/Label                 Bytes
     --------------                 -----
     select_status_menu_onkey        140
     select_status_menu_header        48
     select_status_menu_softkeys      12
     select_status_menu_sk            24
     select_status_menu_skt            8
     select_status_menu_ghook         64
     status_texts                     92
     select_status_menu_itemhandler  168
     select_status_menu_struct        48
     ShowStatusSelectMenu            244
     edit_status_menu_softkeys        12
     edit_status_menu_sk              24
     edit_status_menu_skt              8
     edit_status_menu_onkey          400
     edit_status_menu_ghook           80
     stchsk                            8
     edit_status_menu_locret           4
     edit_status_menu_struct          76
     EditStatus                      464
     ??DataTable5                      4
     ??DataTable8                      4
     ??DataTable9                      4
     ??DataTable10                     4
     ?<Initializer for select_status_menu_header>
                                      48
     ?<Initializer for select_status_menu_softkeys>
                                      12
     ?<Initializer for select_status_menu_sk>
                                      24
     ?<Initializer for select_status_menu_skt>
                                       8
     ?<Initializer for edit_status_menu_softkeys>
                                      12
     ?<Initializer for edit_status_menu_sk>
                                      24
     ?<Initializer for edit_status_menu_skt>
                                       8
     ?<Initializer for stchsk>         8
     ?<Initializer for edit_status_menu_struct>
                                      76
     ?<Constant "\302\373\341\356\360 \361\362\340\
                                      16
     ?<Constant "\310\347\354\345\355\350\362\374">
                                      12
     ?<Constant "\315\340\347\340\344">
                                       8
     ?<Constant "\316\355\353\340\351\355">
                                       8
     ?<Constant "\303\356\362\356\342 \341\356\353\
                                      16
     ?<Constant "\316\362\361\363\362\361\362\342\3
                                      12
     ?<Constant "\315\345\344\356\361\362\363\357\3
                                      12
     ?<Constant "\307\340\355\377\362">
                                       8
     ?<Constant "\310\355\342\350\347">
                                       8
     ?<Constant "\316\364\364\353\340\351\355">
                                       8
     ?<Constant "\321\362\340\362\363\361">
                                       8
     ?<Constant "OK">                  3
     ?<Constant "%d">                  3
      Others                          80

 
 1 648 bytes in segment CODE
   262 bytes in segment DATA_C
   220 bytes in segment DATA_I
   220 bytes in segment DATA_ID
    12 bytes in segment INITTAB
 
 1 580 bytes of CODE  memory (+ 80 bytes shared)
   482 bytes of CONST memory
   220 bytes of DATA  memory

Errors: none
Warnings: none
