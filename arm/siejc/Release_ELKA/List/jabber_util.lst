##############################################################################
#                                                                            #
# IAR ARM ANSI C/C++ Compiler V4.42A/W32 EVALUATION    23/Feb/2011  16:38:09 #
# Copyright 1999-2005 IAR Systems. All rights reserved.                      #
#                                                                            #
#    Cpu mode        =  interwork                                            #
#    Endian          =  little                                               #
#    Stack alignment =  4                                                    #
#    Source file     =  C:\arm\siejc\jabber_util.c                           #
#    Command line    =  C:\arm\siejc\jabber_util.c -D NEWSGOLD -D ELKA       #
#                       --preprocess C:\arm\siejc\Release_ELKA\List\ -lC     #
#                       C:\arm\siejc\Release_ELKA\List\ -o                   #
#                       C:\arm\siejc\Release_ELKA\Obj\ -s9 --no_unroll       #
#                       --cpu_mode arm --endian little --cpu ARM926EJ-S      #
#                       --stack_align 4 --interwork -e --fpu None            #
#                       --dlib_config "C:\arm2\Embedded Workbench 4.0        #
#                       Evaluation\ARM\LIB\dl5tpainl8f.h" -I                 #
#                       "C:\arm2\Embedded Workbench 4.0                      #
#                       Evaluation\ARM\INC\" --inline_threshold=2            #
#    List file       =  C:\arm\siejc\Release_ELKA\List\jabber_util.lst       #
#    Object file     =  C:\arm\siejc\Release_ELKA\Obj\jabber_util.r79        #
#                                                                            #
#                                                                            #
##############################################################################

C:\arm\siejc\jabber_util.c
      1          /* -*- coding: windows-1251-dos -*- */
      2          #include "../inc/swilib.h"
      3          #include "history.h"
      4          #include "main.h"
      5          #include "clist_util.h"
      6          #include "revision.h"
      7          #include "jabber_util.h"
      8          #include "string_util.h"
      9          #include "xml_parser.h"
     10          #include "xml_gen.h"
     11          #include "item_info.h"
     12          #include "vCard.h"
     13          #include "jabber.h"
     14          #include "bookmarks.h"
     15          #include "serial_dbg.h"
     16          #include "groups_util.h"
     17          #include "adv_login.h"
     18          #include "lang.h"
     19          
     20          extern const char JABBER_SERVER[];
     21          extern const char USERNAME[];
     22          extern const char PASSWORD[];
     23          extern const char RESOURCE[];
     24          extern const char CMP_DATE[];
     25          extern const char VERSION_NAME[];
     26          extern const char VERSION_VERS[];
     27          extern const char OS[];
     28          extern const char OS_postfix[];
     29          extern const int USE_SASL;
     30          extern const int DELIVERY_EVENTS;
     31          extern const int COMPOSING_EVENTS;
     32          extern const int USE_ATTENTION;
     33          extern const int DISPLAY_POPUPS;
     34          extern char My_JID_full[];
     35          extern char My_JID[];
     36          extern char logmsg[];
     37          
     38          extern GR_ITEM *GR_ROOT;
     39          extern CLIST* cltop;
     40          extern unsigned int NContacts;
     41          
     42          extern const int EXT_VERSION_INFO;
     43          
     44          MUC_ITEM *muctop = NULL;
     45          

   \                                 In segment DATA_Z, align 4, align-sorted
     46          TTime intimes; //для idle
   \                     intimes:
   \   00000000                      DS8 8
     47          TDate indates;
   \                     indates:
   \   00000008                      DS8 8
     48          
     49          unsigned int m_num=0; // ид сообщения, любого!
   \                     m_num:
   \   00000010                      DS8 4
     50          
     51          extern JABBER_STATE Jabber_state;
     52          const char* PRESENCES[PRES_COUNT] = {"online",
     53                                               "chat",
     54                                               "away",
     55                                               "xa",
     56                                               "dnd",
     57                                               "invisible",
     58                                               "unavailable",
     59                                               "error",
     60                                               "subscribe",
     61                                               "subscribed",
     62                                               "unsubscribe",
     63                                               "unsubscribed"};
     64          
     65          
     66          
     67          #define AFFS_CNT 5
     68          #define ROLS_CNT 4
     69          
     70          const char* JABBER_AFFS[] = {"none", "outcast", "member", "admin", "owner"};
     71          const char* JABBER_ROLS[] = {"none", "visitor", "participant", "moderator"};
     72          
     73          ONLINEINFO OnlineInfo = {0,0,NULL};
     74          
     75          /**
     76            * Функция для отправки настроения
     77           **/
     78          // Context: HELPER

   \                                 In segment CODE, align 4, keep-with-next
     79          void Send_Mood(char *mood, char *text)
     80          {
   \                     Send_Mood:
   \   00000000   F0432DE9           PUSH     {R4-R9,LR}
   \   00000004   B3DF4DE2           SUB      SP,SP,#+716
   \   00000008   0040A0E1           MOV      R4,R0
   \   0000000C   0150A0E1           MOV      R5,R1
     81            char *reply = malloc(1024);
   \   00000010   400EA0E3           MOV      R0,#+1024
   \   00000014   140000EF           SWI      +20
   \   00000018   0060A0E1           MOV      R6,R0
     82            char *_from = Mask_Special_Syms(My_JID_full);
   \   0000001C   ........           LDR      R0,??DataTable8  ;; My_JID_full
   \   00000020   ........           _BLF     Mask_Special_Syms,??Mask_Special_Syms??rA
     83            
     84            char mod0_t[]="<iq type='set' from='%s' id='SieJC_p%d'>"
     85              "<pubsub xmlns='http://jabber.org/protocol/pubsub'>"
     86                "<publish node='http://jabber.org/protocol/mood'>"
     87                  "<item><mood xmlns='http://jabber.org/protocol/mood'><%s/>";
   \   00000024   04119FE5           LDR      R1,??Send_Mood_0  ;; `?<Constant "<iq type=\\'set\\' from=\\'...">`
   \   00000028   0070A0E1           MOV      R7,R0
   \   0000002C   780F8DE2           ADD      R0,SP,#+480
   \   00000030   C430A0E3           MOV      R3,#+196
   \                     ??Send_Mood_1:
   \   00000034   043053E2           SUBS     R3,R3,#+4
   \   00000038   032091E7           LDR      R2,[R1, R3]
   \   0000003C   032080E7           STR      R2,[R0, R3]
   \   00000040   FBFFFF1A           BNE      ??Send_Mood_1
     88            char mod2_t[]="</mood></item></publish></pubsub></iq>";
   \   00000044   E8809FE5           LDR      R8,??Send_Mood_0+0x4  ;; `?<Constant "</mood></item></publi...">`
   \   00000048   A90F8DE2           ADD      R0,SP,#+676
   \   0000004C   0810A0E1           MOV      R1,R8
   \   00000050   0C52B1E8           LDM      R1!,{R2,R3,R9,R12,LR}
   \   00000054   0C52A0E8           STM      R0!,{R2,R3,R9,R12,LR}
   \   00000058   0C5291E8           LDM      R1,{R2,R3,R9,R12,LR}
     89            
     90            char modn_t[]="<iq type='set' from='%s' id='SieJC_p%d'>"
     91              "<pubsub xmlns='http://jabber.org/protocol/pubsub'>"
     92                "<publish node='http://jabber.org/protocol/mood'>"
     93                  "<item><mood xmlns='http://jabber.org/protocol/mood'/>"
     94                    "</item></publish></pubsub></iq>";  
   \   0000005C   D4109FE5           LDR      R1,??Send_Mood_0+0x8  ;; `?<Constant "<iq type=\\'set\\' from=\\'...">_1`
   \   00000060   0C5280E8           STM      R0,{R2,R3,R9,R12,LR}
   \   00000064   400F8DE2           ADD      R0,SP,#+256
   \   00000068   E030A0E3           MOV      R3,#+224
   \                     ??Send_Mood_2:
   \   0000006C   043053E2           SUBS     R3,R3,#+4
   \   00000070   032091E7           LDR      R2,[R1, R3]
   \   00000074   032080E7           STR      R2,[R0, R3]
   \   00000078   FBFFFF1A           BNE      ??Send_Mood_2
     95            if (mood) 
   \   0000007C   ........           LDR      R9,??DataTable1  ;; intimes
   \   00000080   000054E3           CMP      R4,#+0
   \   00000084   1600000A           BEQ      ??Send_Mood_3
     96             {
     97               sprintf(reply, mod0_t, _from, m_num, mood);
   \   00000088   10002DE9           PUSH     {R4}
   \   0000008C   103099E5           LDR      R3,[R9, #+16]
   \   00000090   0720A0E1           MOV      R2,R7
   \   00000094   791F8DE2           ADD      R1,SP,#+484
   \   00000098   0600A0E1           MOV      R0,R6
   \   0000009C   160000EF           SWI      +22
     98               if (strlen(text)>0) 
   \   000000A0   0500A0E1           MOV      R0,R5
   \   000000A4   1B0000EF           SWI      +27
   \   000000A8   000050E3           CMP      R0,#+0
   \   000000AC   04D08DE2           ADD      SP,SP,#+4
   \   000000B0   0700000A           BEQ      ??Send_Mood_4
     99               {
    100                 char s_t[256];
    101                 snprintf(s_t,256,"<text>%s</text>", text);
   \   000000B4   0530A0E1           MOV      R3,R5
   \   000000B8   282088E2           ADD      R2,R8,#+40
   \   000000BC   401FA0E3           MOV      R1,#+256
   \   000000C0   0D00A0E1           MOV      R0,SP
   \   000000C4   1B0100EF           SWI      +283
    102                 strcat(reply, s_t);
   \   000000C8   0D10A0E1           MOV      R1,SP
   \   000000CC   0600A0E1           MOV      R0,R6
   \   000000D0   170000EF           SWI      +23
    103               }
    104               strcat(reply, mod2_t);
   \                     ??Send_Mood_4:
   \   000000D4   A91F8DE2           ADD      R1,SP,#+676
   \   000000D8   0600A0E1           MOV      R0,R6
   \   000000DC   170000EF           SWI      +23
   \   000000E0   040000EA           B        ??Send_Mood_5
    105             }
    106            else sprintf(reply, modn_t,_from ,m_num);
   \                     ??Send_Mood_3:
   \   000000E4   103099E5           LDR      R3,[R9, #+16]
   \   000000E8   0720A0E1           MOV      R2,R7
   \   000000EC   401F8DE2           ADD      R1,SP,#+256
   \   000000F0   0600A0E1           MOV      R0,R6
   \   000000F4   160000EF           SWI      +22
    107            SUBPROC((void*)_sendandfree, reply);
   \                     ??Send_Mood_5:
   \   000000F8   3C009FE5           LDR      R0,??Send_Mood_0+0xC  ;; _sendandfree
   \   000000FC   0610A0E1           MOV      R1,R6
   \   00000100   710100EF           SWI      +369
    108            m_num++;
   \   00000104   100099E5           LDR      R0,[R9, #+16]
   \   00000108   010080E2           ADD      R0,R0,#+1
   \   0000010C   100089E5           STR      R0,[R9, #+16]
    109            mfree(_from);
   \   00000110   0700A0E1           MOV      R0,R7
   \   00000114   150000EF           SWI      +21
    110            if (text) mfree(text);
   \   00000118   000055E3           CMP      R5,#+0
   \   0000011C   0100000A           BEQ      ??Send_Mood_6
   \   00000120   0500A0E1           MOV      R0,R5
   \   00000124   150000EF           SWI      +21
    111          }
   \                     ??Send_Mood_6:
   \   00000128   B3DF8DE2           ADD      SP,SP,#+716      ;; stack cleaning
   \   0000012C   F083BDE8           POP      {R4-R9,PC}       ;; return
   \                     ??Send_Mood_0:
   \   00000130   ........           DC32     `?<Constant "<iq type=\\'set\\' from=\\'...">`
   \   00000134   ........           DC32     `?<Constant "</mood></item></publi...">`
   \   00000138   ........           DC32     `?<Constant "<iq type=\\'set\\' from=\\'...">_1`
   \   0000013C   ........           DC32     _sendandfree
    112          
    113          /*
    114            Посылка стандартного Jabber Iq
    115          */

   \                                 In segment CODE, align 4, keep-with-next
    116          void SendIq(char* to, char* type, char* id, char* xmlns, XMLNode* payload)
    117          {
   \                     SendIq:
   \   00000000   F0432DE9           PUSH     {R4-R9,LR}
   \   00000004   0160A0E1           MOV      R6,R1
    118            XMLNode *iq, *query;
    119            char *xml;
    120            char xmlns_t[]="xmlns";
   \   00000008   3C119FE5           LDR      R1,??SendIq_0    ;; `?<Constant "xmlns">_3`
   \   0000000C   24D04DE2           SUB      SP,SP,#+36
   \   00000010   40809DE5           LDR      R8,[SP, #+64]
   \   00000014   0050A0E1           MOV      R5,R0
   \   00000018   0270A0E1           MOV      R7,R2
   \   0000001C   0340A0E1           MOV      R4,R3
   \   00000020   0C0091E8           LDM      R1,{R2,R3}
    121            char query_t[]="query";
   \   00000024   24119FE5           LDR      R1,??SendIq_0+0x4  ;; `?<Constant "query">_1`
   \   00000028   0C008DE2           ADD      R0,SP,#+12
   \   0000002C   0C0080E8           STM      R0,{R2,R3}
   \   00000030   0C0091E8           LDM      R1,{R2,R3}
    122            char iq_t[]="iq";
   \   00000034   18119FE5           LDR      R1,??SendIq_0+0x8  ;; `?<Constant "iq">`
   \   00000038   14008DE2           ADD      R0,SP,#+20
   \   0000003C   0C0080E8           STM      R0,{R2,R3}
   \   00000040   0020D1E5           LDRB     R2,[R1, #0]
   \   00000044   04008DE2           ADD      R0,SP,#+4
   \   00000048   0020C0E5           STRB     R2,[R0, #+0]
   \   0000004C   0120D1E5           LDRB     R2,[R1, #+1]
   \   00000050   0120C0E5           STRB     R2,[R0, #+1]
   \   00000054   0220D1E5           LDRB     R2,[R1, #+2]
    123            char id_t[]="id";
   \   00000058   F8109FE5           LDR      R1,??SendIq_0+0xC  ;; `?<Constant "id">_1`
   \   0000005C   0220C0E5           STRB     R2,[R0, #+2]
   \   00000060   0020D1E5           LDRB     R2,[R1, #0]
   \   00000064   07008DE2           ADD      R0,SP,#+7
   \   00000068   0020C0E5           STRB     R2,[R0, #+0]
   \   0000006C   0120D1E5           LDRB     R2,[R1, #+1]
   \   00000070   0120C0E5           STRB     R2,[R0, #+1]
   \   00000074   0220D1E5           LDRB     R2,[R1, #+2]
    124            char to_t[]="to";
   \   00000078   DC109FE5           LDR      R1,??SendIq_0+0x10  ;; `?<Constant "to">`
   \   0000007C   0220C0E5           STRB     R2,[R0, #+2]
   \   00000080   0020D1E5           LDRB     R2,[R1, #0]
   \   00000084   0D00A0E1           MOV      R0,SP
   \   00000088   0020C0E5           STRB     R2,[R0, #+0]
   \   0000008C   0120D1E5           LDRB     R2,[R1, #+1]
   \   00000090   0120C0E5           STRB     R2,[R0, #+1]
   \   00000094   0220D1E5           LDRB     R2,[R1, #+2]
    125            char type_t[]="type";
   \   00000098   C0109FE5           LDR      R1,??SendIq_0+0x14  ;; `?<Constant "type">_1`
   \   0000009C   0220C0E5           STRB     R2,[R0, #+2]
   \   000000A0   0C0091E8           LDM      R1,{R2,R3}
   \   000000A4   1C008DE2           ADD      R0,SP,#+28
   \   000000A8   0C0080E8           STM      R0,{R2,R3}
    126          
    127            iq = XML_CreateNode(iq_t, NULL);
   \   000000AC   0010A0E3           MOV      R1,#+0
   \   000000B0   04008DE2           ADD      R0,SP,#+4
   \   000000B4   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   000000B8   0090A0E1           MOV      R9,R0
    128            if (id)
   \   000000BC   000057E3           CMP      R7,#+0
   \   000000C0   0200000A           BEQ      ??SendIq_1
    129              XML_Set_Attr_Value(iq, id_t, id);
   \   000000C4   0720A0E1           MOV      R2,R7
   \   000000C8   07108DE2           ADD      R1,SP,#+7
   \   000000CC   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    130            if (type)
   \                     ??SendIq_1:
   \   000000D0   000056E3           CMP      R6,#+0
   \   000000D4   0300000A           BEQ      ??SendIq_2
    131              XML_Set_Attr_Value(iq, type_t, type);
   \   000000D8   0620A0E1           MOV      R2,R6
   \   000000DC   1C108DE2           ADD      R1,SP,#+28
   \   000000E0   0900A0E1           MOV      R0,R9
   \   000000E4   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    132            if (to)
   \                     ??SendIq_2:
   \   000000E8   000055E3           CMP      R5,#+0
   \   000000EC   0300000A           BEQ      ??SendIq_3
    133              XML_Set_Attr_Value(iq, to_t, to);
   \   000000F0   0520A0E1           MOV      R2,R5
   \   000000F4   0D10A0E1           MOV      R1,SP
   \   000000F8   0900A0E1           MOV      R0,R9
   \   000000FC   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    134          
    135            if(xmlns)
   \                     ??SendIq_3:
   \   00000100   000054E3           CMP      R4,#+0
   \   00000104   0800000A           BEQ      ??SendIq_4
    136            {
    137              query = XML_CreateNode(query_t, NULL);  
   \   00000108   0010A0E3           MOV      R1,#+0
   \   0000010C   14008DE2           ADD      R0,SP,#+20
   \   00000110   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   00000114   0050A0E1           MOV      R5,R0
    138              XML_Set_Attr_Value(query, xmlns_t, xmlns);
   \   00000118   0420A0E1           MOV      R2,R4
   \   0000011C   0C108DE2           ADD      R1,SP,#+12
   \   00000120   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    139              query->subnode = payload;
   \   00000124   048085E5           STR      R8,[R5, #+4]
    140              iq->subnode = query;
   \   00000128   0580A0E1           MOV      R8,R5
    141            } else iq->subnode = payload;
   \                     ??SendIq_4:
   \   0000012C   048089E5           STR      R8,[R9, #+4]
    142            xml = XML_Get_Node_As_Text(iq);
   \   00000130   0900A0E1           MOV      R0,R9
   \   00000134   ........           _BLF     XML_Get_Node_As_Text,??XML_Get_Node_As_Text??rA
    143            _sendandfree(xml);
   \   00000138   ........           BL       _sendandfree
    144            DestroyTree(iq);
   \   0000013C   0900A0E1           MOV      R0,R9
   \   00000140   ........           _BLF     DestroyTree,??DestroyTree??rA
    145          }
   \   00000144   24D08DE2           ADD      SP,SP,#+36
   \   00000148   F083BDE8           POP      {R4-R9,PC}       ;; return
   \                     ??SendIq_0:
   \   0000014C   ........           DC32     `?<Constant "xmlns">_3`
   \   00000150   ........           DC32     `?<Constant "query">_1`
   \   00000154   ........           DC32     `?<Constant "iq">`
   \   00000158   ........           DC32     `?<Constant "id">_1`
   \   0000015C   ........           DC32     `?<Constant "to">`
   \   00000160   ........           DC32     `?<Constant "type">_1`
    146          
    147          /*
    148            Посылка стандартного Jabber message
    149          */

   \                                 In segment CODE, align 4, keep-with-next
    150          void Send_Message(char* to, char* type, char* id, XMLNode* payload)
    151          {
   \                     Send_Message:
   \   00000000   F0412DE9           PUSH     {R4-R8,LR}
   \   00000004   0150A0E1           MOV      R5,R1
    152            XMLNode *message;
    153            char *xml;
    154            char message_t[]="message";
   \   00000008   DC109FE5           LDR      R1,??Send_Message_0  ;; `?<Constant "message">`
   \   0000000C   18D04DE2           SUB      SP,SP,#+24
   \   00000010   0040A0E1           MOV      R4,R0
   \   00000014   0260A0E1           MOV      R6,R2
   \   00000018   0370A0E1           MOV      R7,R3
   \   0000001C   0C0091E8           LDM      R1,{R2,R3}
    155            char id_t[]="id";
   \   00000020   C8109FE5           LDR      R1,??Send_Message_0+0x4  ;; `?<Constant "id">_2`
   \   00000024   08008DE2           ADD      R0,SP,#+8
   \   00000028   0C0080E8           STM      R0,{R2,R3}
   \   0000002C   0020D1E5           LDRB     R2,[R1, #0]
   \   00000030   0D00A0E1           MOV      R0,SP
   \   00000034   0020C0E5           STRB     R2,[R0, #+0]
   \   00000038   0120D1E5           LDRB     R2,[R1, #+1]
   \   0000003C   0120C0E5           STRB     R2,[R0, #+1]
   \   00000040   0220D1E5           LDRB     R2,[R1, #+2]
    156            char to_t[]="to";
   \   00000044   A8109FE5           LDR      R1,??Send_Message_0+0x8  ;; `?<Constant "to">_1`
   \   00000048   0220C0E5           STRB     R2,[R0, #+2]
   \   0000004C   0020D1E5           LDRB     R2,[R1, #0]
   \   00000050   03008DE2           ADD      R0,SP,#+3
   \   00000054   0020C0E5           STRB     R2,[R0, #+0]
   \   00000058   0120D1E5           LDRB     R2,[R1, #+1]
   \   0000005C   0120C0E5           STRB     R2,[R0, #+1]
   \   00000060   0220D1E5           LDRB     R2,[R1, #+2]
    157            char type_t[]="type";
   \   00000064   8C109FE5           LDR      R1,??Send_Message_0+0xC  ;; `?<Constant "type">_2`
   \   00000068   0220C0E5           STRB     R2,[R0, #+2]
   \   0000006C   0C0091E8           LDM      R1,{R2,R3}
   \   00000070   10008DE2           ADD      R0,SP,#+16
   \   00000074   0C0080E8           STM      R0,{R2,R3}
    158          
    159            message = XML_CreateNode(message_t, NULL);
   \   00000078   0010A0E3           MOV      R1,#+0
   \   0000007C   08008DE2           ADD      R0,SP,#+8
   \   00000080   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   00000084   0080A0E1           MOV      R8,R0
    160            if (id)
   \   00000088   000056E3           CMP      R6,#+0
   \   0000008C   0200000A           BEQ      ??Send_Message_1
    161              XML_Set_Attr_Value(message, id_t, id);
   \   00000090   0620A0E1           MOV      R2,R6
   \   00000094   0D10A0E1           MOV      R1,SP
   \   00000098   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    162            if (type)
   \                     ??Send_Message_1:
   \   0000009C   000055E3           CMP      R5,#+0
   \   000000A0   0300000A           BEQ      ??Send_Message_2
    163              XML_Set_Attr_Value(message, type_t, type);
   \   000000A4   0520A0E1           MOV      R2,R5
   \   000000A8   10108DE2           ADD      R1,SP,#+16
   \   000000AC   0800A0E1           MOV      R0,R8
   \   000000B0   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    164            if (to)
   \                     ??Send_Message_2:
   \   000000B4   000054E3           CMP      R4,#+0
   \   000000B8   0300000A           BEQ      ??Send_Message_3
    165              XML_Set_Attr_Value(message, to_t, to);
   \   000000BC   0420A0E1           MOV      R2,R4
   \   000000C0   03108DE2           ADD      R1,SP,#+3
   \   000000C4   0800A0E1           MOV      R0,R8
   \   000000C8   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    166          
    167            message->subnode = payload;
   \                     ??Send_Message_3:
   \   000000CC   047088E5           STR      R7,[R8, #+4]
    168            xml = XML_Get_Node_As_Text(message);
   \   000000D0   0800A0E1           MOV      R0,R8
   \   000000D4   ........           _BLF     XML_Get_Node_As_Text,??XML_Get_Node_As_Text??rA
    169          #ifdef LOG_ALL
    170            LockSched();
    171            Log("MESS_OUT", xml);
    172            UnlockSched();
    173          #endif
    174            _sendandfree(xml);
   \   000000D8   ........           BL       _sendandfree
    175            DestroyTree(message);
   \   000000DC   0800A0E1           MOV      R0,R8
   \   000000E0   ........           _BLF     DestroyTree,??DestroyTree??rA
    176          }
   \   000000E4   18D08DE2           ADD      SP,SP,#+24
   \   000000E8   F081BDE8           POP      {R4-R8,PC}       ;; return
   \                     ??Send_Message_0:
   \   000000EC   ........           DC32     `?<Constant "message">`
   \   000000F0   ........           DC32     `?<Constant "id">_2`
   \   000000F4   ........           DC32     `?<Constant "to">_1`
   \   000000F8   ........           DC32     `?<Constant "type">_2`
    177          
    178          /*
    179            Посылка стандартного Jabber presence
    180          */

   \                                 In segment CODE, align 4, keep-with-next
    181          void SendPresence(char* to, char* type, char* id, XMLNode* payload)
    182          {
   \                     SendPresence:
   \   00000000   F0412DE9           PUSH     {R4-R8,LR}
   \   00000004   0150A0E1           MOV      R5,R1
    183            XMLNode *presence;
    184            char *xml;
    185            char presence_t[]="presence";
   \   00000008   DC109FE5           LDR      R1,??SendPresence_0  ;; `?<Constant "presence">`
   \   0000000C   1CD04DE2           SUB      SP,SP,#+28
   \   00000010   0040A0E1           MOV      R4,R0
   \   00000014   0260A0E1           MOV      R6,R2
   \   00000018   0370A0E1           MOV      R7,R3
   \   0000001C   0C0191E8           LDM      R1,{R2,R3,R8}
    186            char id_t[]="id";
   \   00000020   C8109FE5           LDR      R1,??SendPresence_0+0x4  ;; `?<Constant "id">_3`
   \   00000024   10008DE2           ADD      R0,SP,#+16
   \   00000028   0C0180E8           STM      R0,{R2,R3,R8}
   \   0000002C   0020D1E5           LDRB     R2,[R1, #0]
   \   00000030   0D00A0E1           MOV      R0,SP
   \   00000034   0020C0E5           STRB     R2,[R0, #+0]
   \   00000038   0120D1E5           LDRB     R2,[R1, #+1]
   \   0000003C   0120C0E5           STRB     R2,[R0, #+1]
   \   00000040   0220D1E5           LDRB     R2,[R1, #+2]
    187            char to_t[]="to";
   \   00000044   A8109FE5           LDR      R1,??SendPresence_0+0x8  ;; `?<Constant "to">_2`
   \   00000048   0220C0E5           STRB     R2,[R0, #+2]
   \   0000004C   0020D1E5           LDRB     R2,[R1, #0]
   \   00000050   03008DE2           ADD      R0,SP,#+3
   \   00000054   0020C0E5           STRB     R2,[R0, #+0]
   \   00000058   0120D1E5           LDRB     R2,[R1, #+1]
   \   0000005C   0120C0E5           STRB     R2,[R0, #+1]
   \   00000060   0220D1E5           LDRB     R2,[R1, #+2]
    188            char type_t[]="type";
   \   00000064   8C109FE5           LDR      R1,??SendPresence_0+0xC  ;; `?<Constant "type">_3`
   \   00000068   0220C0E5           STRB     R2,[R0, #+2]
   \   0000006C   0C0091E8           LDM      R1,{R2,R3}
   \   00000070   08008DE2           ADD      R0,SP,#+8
   \   00000074   0C0080E8           STM      R0,{R2,R3}
    189          
    190            presence = XML_CreateNode(presence_t, NULL);
   \   00000078   0010A0E3           MOV      R1,#+0
   \   0000007C   10008DE2           ADD      R0,SP,#+16
   \   00000080   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   00000084   0080A0E1           MOV      R8,R0
    191            if (id)
   \   00000088   000056E3           CMP      R6,#+0
   \   0000008C   0200000A           BEQ      ??SendPresence_1
    192              XML_Set_Attr_Value(presence, id_t, id);
   \   00000090   0620A0E1           MOV      R2,R6
   \   00000094   0D10A0E1           MOV      R1,SP
   \   00000098   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    193            if (type)
   \                     ??SendPresence_1:
   \   0000009C   000055E3           CMP      R5,#+0
   \   000000A0   0300000A           BEQ      ??SendPresence_2
    194              XML_Set_Attr_Value(presence, type_t, type);
   \   000000A4   0520A0E1           MOV      R2,R5
   \   000000A8   08108DE2           ADD      R1,SP,#+8
   \   000000AC   0800A0E1           MOV      R0,R8
   \   000000B0   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    195            if (to)
   \                     ??SendPresence_2:
   \   000000B4   000054E3           CMP      R4,#+0
   \   000000B8   0300000A           BEQ      ??SendPresence_3
    196              XML_Set_Attr_Value(presence, to_t, to);
   \   000000BC   0420A0E1           MOV      R2,R4
   \   000000C0   03108DE2           ADD      R1,SP,#+3
   \   000000C4   0800A0E1           MOV      R0,R8
   \   000000C8   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    197          
    198            presence->subnode = payload;
   \                     ??SendPresence_3:
   \   000000CC   047088E5           STR      R7,[R8, #+4]
    199            xml = XML_Get_Node_As_Text(presence);
   \   000000D0   0800A0E1           MOV      R0,R8
   \   000000D4   ........           _BLF     XML_Get_Node_As_Text,??XML_Get_Node_As_Text??rA
    200            _sendandfree(xml);
   \   000000D8   ........           BL       _sendandfree
    201            DestroyTree(presence);
   \   000000DC   0800A0E1           MOV      R0,R8
   \   000000E0   ........           _BLF     DestroyTree,??DestroyTree??rA
    202          }
   \   000000E4   1CD08DE2           ADD      SP,SP,#+28
   \   000000E8   F081BDE8           POP      {R4-R8,PC}       ;; return
   \                     ??SendPresence_0:
   \   000000EC   ........           DC32     `?<Constant "presence">`
   \   000000F0   ........           DC32     `?<Constant "id">_3`
   \   000000F4   ........           DC32     `?<Constant "to">_2`
   \   000000F8   ........           DC32     `?<Constant "type">_3`
    203          /*
    204            Послать приветствие, на него сервер высылает ответный stream.
    205            После этого можно общаться с сервером
    206          */
    207          // Context:HELPER

   \                                 In segment CODE, align 4, keep-with-next
    208          void Send_Welcome_Packet()
    209          {
    210          
    211            void Send_Welcome_Packet_SASL();
    212            if(USE_SASL)
   \                     Send_Welcome_Packet:
   \   00000000   84009FE5           LDR      R0,??Send_Welcome_Packet_0+0x4  ;; USE_SASL
   \   00000004   30402DE9           PUSH     {R4,R5,LR}
   \   00000008   94D04DE2           SUB      SP,SP,#+148
   \   0000000C   000090E5           LDR      R0,[R0, #+0]
   \   00000010   000050E3           CMP      R0,#+0
   \   00000014   0200000A           BEQ      ??Send_Welcome_Packet_1
    213            {
    214              Send_Welcome_Packet_SASL();
   \   00000018   ........           _BLF     Send_Welcome_Packet_SASL,??Send_Welcome_Packet_SASL??rA
    215              return;
   \   0000001C   94D08DE2           ADD      SP,SP,#+148
   \   00000020   3080BDE8           POP      {R4,R5,PC}
    216            }
    217            char streamheader[]="<?xml version='1.0' encoding='UTF-8'?>\n"
    218              "<stream:stream to='%s' xmlns='jabber:client' xmlns:stream='http://etherx.jabber.org/streams' xml:lang='%s'>";
   \                     ??Send_Welcome_Packet_1:
   \   00000024   64409FE5           LDR      R4,??Send_Welcome_Packet_0+0x8  ;; `?<Constant "<?xml version=\\'1.0\\' e...">`
   \   00000028   0D00A0E1           MOV      R0,SP
   \   0000002C   9420A0E3           MOV      R2,#+148
   \                     ??Send_Welcome_Packet_2:
   \   00000030   042052E2           SUBS     R2,R2,#+4
   \   00000034   021094E7           LDR      R1,[R4, R2]
   \   00000038   021080E7           STR      R1,[R0, R2]
   \   0000003C   FBFFFF1A           BNE      ??Send_Welcome_Packet_2
    219            char* buf=malloc(256);
   \   00000040   400FA0E3           MOV      R0,#+256
   \   00000044   140000EF           SWI      +20
    220            sprintf(buf,streamheader,JABBER_SERVER, LG_XML_LANG);
   \   00000048   ........           LDR      R2,??DataTable5  ;; JABBER_SERVER
   \   0000004C   0050A0E1           MOV      R5,R0
   \   00000050   0C3F8FE2           ADR      R3,??Send_Welcome_Packet_0  ;; "ru"
   \   00000054   0D10A0E1           MOV      R1,SP
   \   00000058   160000EF           SWI      +22
    221            SendAnswer(buf);
   \   0000005C   0500A0E1           MOV      R0,R5
   \   00000060   ........           _BLF     SendAnswer,??SendAnswer??rA
    222            mfree(buf);
   \   00000064   0500A0E1           MOV      R0,R5
   \   00000068   150000EF           SWI      +21
    223            LockSched();
   \   0000006C   460100EF           SWI      +326
    224            strcpy(logmsg,"Send Welcome");
   \   00000070   ........           LDR      R0,??DataTable25  ;; logmsg
   \   00000074   941084E2           ADD      R1,R4,#+148
   \   00000078   1A0000EF           SWI      +26
    225            UnlockSched();
   \   0000007C   470100EF           SWI      +327
    226          #ifdef LOG_ALL
    227            Log("CONN",logmsg);
    228          #endif
    229          }
   \   00000080   94D08DE2           ADD      SP,SP,#+148
   \   00000084   3080BDE8           POP      {R4,R5,PC}       ;; return
   \                     ??Send_Welcome_Packet_0:
   \   00000088   72750000           DC8      "ru",+0
   \   0000008C   ........           DC32     USE_SASL
   \   00000090   ........           DC32     `?<Constant "<?xml version=\\'1.0\\' e...">`
    230          /*
    231            Послать дисконнект
    232          */
    233          // Context:HELPER

   \                                 In segment CODE, align 4, keep-with-next
    234          void Send_Disconnect()
    235          {
   \                     Send_Disconnect:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
    236            char streamend[]="</stream:stream>";
   \   00000004   24409FE5           LDR      R4,??Send_Disconnect_0  ;; `?<Constant "</stream:stream>">`
   \   00000008   14D04DE2           SUB      SP,SP,#+20
   \   0000000C   2C5094E8           LDM      R4,{R2,R3,R5,R12,LR}
   \   00000010   0D00A0E1           MOV      R0,SP
   \   00000014   2C5080E8           STM      R0,{R2,R3,R5,R12,LR}
    237            SendAnswer(streamend);
   \   00000018   ........           _BLF     SendAnswer,??SendAnswer??rA
    238            strcpy(logmsg,"Send Disconnect");
   \   0000001C   ........           LDR      R0,??DataTable25  ;; logmsg
   \   00000020   141084E2           ADD      R1,R4,#+20
   \   00000024   1A0000EF           SWI      +26
    239          #ifdef LOG_ALL
    240            Log("CONN",logmsg);
    241          #endif
    242          }
   \   00000028   14D08DE2           ADD      SP,SP,#+20
   \   0000002C   3080BDE8           POP      {R4,R5,PC}       ;; return
   \                     ??Send_Disconnect_0:
   \   00000030   ........           DC32     `?<Constant "</stream:stream>">`
    243          
    244          // Константы Iq-запросов
    245          char auth_id[] = "SieJC_auth_req";
    246          char rost_id[] = "SieJC_rost_req";
    247          char vreq_id[] = "SieJC_vers_req";
    248          char priv_id[] = "SieJC_priv_req";
    249          char treq_id[] = "SieJC_time_req";
    250          char vcreq_id[] = "SieJC_vcard_req";
    251          char lastact_id[] = "SieJC_lastact_req";
    252          /*
    253            Авторизация на Jabber-сервере
    254            Самая тупая, без извращений.
    255          */
    256          //Context: HELPER

   \                                 In segment CODE, align 4, keep-with-next
    257          void Send_Auth()
    258          {
    259            sprintf(My_JID, "%s@%s",USERNAME, JABBER_SERVER);
   \                     Send_Auth:
   \   00000000   ........           LDR      R3,??DataTable5  ;; JABBER_SERVER
   \   00000004   F0402DE9           PUSH     {R4-R7,LR}
   \   00000008   ........           LDR      R4,??DataTable6  ;; `?<Constant "username">`
   \   0000000C   00619FE5           LDR      R6,??Send_Auth_0+0x4  ;; USERNAME
   \   00000010   ........           LDR      R7,??DataTable7  ;; My_JID
    260            sprintf(My_JID_full,"%s/%s",My_JID, RESOURCE);
   \   00000014   FC509FE5           LDR      R5,??Send_Auth_0+0x8  ;; RESOURCE
   \   00000018   24D04DE2           SUB      SP,SP,#+36
   \   0000001C   0620A0E1           MOV      R2,R6
   \   00000020   0C1084E2           ADD      R1,R4,#+12
   \   00000024   0700A0E1           MOV      R0,R7
   \   00000028   160000EF           SWI      +22
   \   0000002C   ........           LDR      R0,??DataTable8  ;; My_JID_full
   \   00000030   0530A0E1           MOV      R3,R5
   \   00000034   0720A0E1           MOV      R2,R7
   \   00000038   141084E2           ADD      R1,R4,#+20
   \   0000003C   160000EF           SWI      +22
    261            char* tmpstr = malloc(256);
   \   00000040   400FA0E3           MOV      R0,#+256
   \   00000044   140000EF           SWI      +20
   \   00000048   0070A0E1           MOV      R7,R0
    262            XMLNode *xml, *xml_out;
    263            strcpy(tmpstr, USERNAME);
   \   0000004C   0610A0E1           MOV      R1,R6
   \   00000050   1A0000EF           SWI      +26
    264            char username_t[]="username";
   \   00000054   0C1094E8           LDM      R4,{R2,R3,R12}
    265            char password_t[]="password";
   \   00000058   BC109FE5           LDR      R1,??Send_Auth_0+0xC  ;; `?<Constant "password">`
   \   0000005C   0D00A0E1           MOV      R0,SP
   \   00000060   0C1080E8           STM      R0,{R2,R3,R12}
   \   00000064   0C1091E8           LDM      R1,{R2,R3,R12}
    266            char resource_t[]="resource";
   \   00000068   B0109FE5           LDR      R1,??Send_Auth_0+0x10  ;; `?<Constant "resource">`
   \   0000006C   0C008DE2           ADD      R0,SP,#+12
   \   00000070   0C1080E8           STM      R0,{R2,R3,R12}
   \   00000074   0C1091E8           LDM      R1,{R2,R3,R12}
   \   00000078   18008DE2           ADD      R0,SP,#+24
   \   0000007C   0C1080E8           STM      R0,{R2,R3,R12}
    267            strcpy(tmpstr, USERNAME);
   \   00000080   0610A0E1           MOV      R1,R6
   \   00000084   0700A0E1           MOV      R0,R7
   \   00000088   1A0000EF           SWI      +26
    268            xml = XML_CreateNode(username_t, tmpstr);
   \   0000008C   0710A0E1           MOV      R1,R7
   \   00000090   0D00A0E1           MOV      R0,SP
   \   00000094   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
    269          
    270            strcpy(tmpstr, PASSWORD);
   \   00000098   84109FE5           LDR      R1,??Send_Auth_0+0x14  ;; PASSWORD
   \   0000009C   0060A0E1           MOV      R6,R0
   \   000000A0   0700A0E1           MOV      R0,R7
   \   000000A4   1A0000EF           SWI      +26
    271            xml->next = XML_CreateNode(password_t, tmpstr);
   \   000000A8   0710A0E1           MOV      R1,R7
   \   000000AC   0C008DE2           ADD      R0,SP,#+12
   \   000000B0   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   000000B4   000086E5           STR      R0,[R6, #+0]
    272          
    273            strcpy(tmpstr, RESOURCE);  
   \   000000B8   0510A0E1           MOV      R1,R5
   \   000000BC   0700A0E1           MOV      R0,R7
   \   000000C0   1A0000EF           SWI      +26
    274            xml_out = XML_CreateNode(resource_t, tmpstr);
   \   000000C4   0710A0E1           MOV      R1,R7
   \   000000C8   18008DE2           ADD      R0,SP,#+24
   \   000000CC   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
    275            xml_out->next = xml;
    276            
    277            SendIq(NULL, IQTYPE_SET, auth_id, IQ_AUTH, xml_out);
   \   000000D0   ........           LDR      R2,??DataTable9  ;; auth_id
   \   000000D4   006080E5           STR      R6,[R0, #+0]
   \   000000D8   01002DE9           PUSH     {R0}
   \   000000DC   1C3084E2           ADD      R3,R4,#+28
   \   000000E0   0A1F8FE2           ADR      R1,??Send_Auth_0  ;; "set"
   \   000000E4   0000A0E3           MOV      R0,#+0
   \   000000E8   ........           BL       SendIq
    278            mfree(tmpstr);
   \   000000EC   0700A0E1           MOV      R0,R7
   \   000000F0   150000EF           SWI      +21
    279            LockSched();
   \   000000F4   460100EF           SWI      +326
    280            strcpy(logmsg,"Send auth");
   \   000000F8   ........           LDR      R0,??DataTable25  ;; logmsg
   \   000000FC   2C1084E2           ADD      R1,R4,#+44
   \   00000100   1A0000EF           SWI      +26
    281            UnlockSched();
   \   00000104   470100EF           SWI      +327
    282          }
   \   00000108   28D08DE2           ADD      SP,SP,#+40
   \   0000010C   F080BDE8           POP      {R4-R7,PC}       ;; return
   \                     ??Send_Auth_0:
   \   00000110   73657400           DC8      "set"
   \   00000114   ........           DC32     USERNAME
   \   00000118   ........           DC32     RESOURCE
   \   0000011C   ........           DC32     `?<Constant "password">`
   \   00000120   ........           DC32     `?<Constant "resource">`
   \   00000124   ........           DC32     PASSWORD
    283          
    284          //Context: HELPER

   \                                 In segment CODE, align 4, keep-with-next
    285          void _senddicoinforequest(char *dest_jid)
    286          {
    287            char discoid[]="SieJC_discoinfo";
   \                     _senddicoinforequest:
   \   00000000   68109FE5           LDR      R1,??_senddicoinforequest_0  ;; `?<Constant "SieJC_discoinfo">`
   \   00000004   30402DE9           PUSH     {R4,R5,LR}
   \   00000008   3CD04DE2           SUB      SP,SP,#+60
   \   0000000C   0C5091E8           LDM      R1,{R2,R3,R12,LR}
    288            char typ[]=IQTYPE_GET;
   \   00000010   5C109FE5           LDR      R1,??_senddicoinforequest_0+0x4  ;; `?<Constant "get">`
   \   00000014   0040A0E1           MOV      R4,R0
   \   00000018   04008DE2           ADD      R0,SP,#+4
   \   0000001C   0C5080E8           STM      R0,{R2,R3,R12,LR}
   \   00000020   002091E5           LDR      R2,[R1, #0]
    289            char iqd[]=DISCO_INFO;
   \   00000024   4C109FE5           LDR      R1,??_senddicoinforequest_0+0x8  ;; `?<Constant "http://jabber.org/pro...">_4`
   \   00000028   0D00A0E1           MOV      R0,SP
   \   0000002C   002080E5           STR      R2,[R0, #+0]
   \   00000030   2C50B1E8           LDM      R1!,{R2,R3,R5,R12,LR}
   \   00000034   14008DE2           ADD      R0,SP,#+20
   \   00000038   2C50A0E8           STM      R0!,{R2,R3,R5,R12,LR}
   \   0000003C   2C5091E8           LDM      R1,{R2,R3,R5,R12,LR}
   \   00000040   2C5080E8           STM      R0,{R2,R3,R5,R12,LR}
    290            SendIq(dest_jid, typ, discoid, iqd, NULL);
   \   00000044   0000A0E3           MOV      R0,#+0
   \   00000048   01002DE9           PUSH     {R0}
   \   0000004C   18308DE2           ADD      R3,SP,#+24
   \   00000050   08208DE2           ADD      R2,SP,#+8
   \   00000054   04108DE2           ADD      R1,SP,#+4
   \   00000058   0400A0E1           MOV      R0,R4
   \   0000005C   ........           BL       SendIq
    291            mfree(dest_jid);
   \   00000060   0400A0E1           MOV      R0,R4
   \   00000064   150000EF           SWI      +21
    292          }
   \   00000068   40D08DE2           ADD      SP,SP,#+64
   \   0000006C   3080BDE8           POP      {R4,R5,PC}       ;; return
   \                     ??_senddicoinforequest_0:
   \   00000070   ........           DC32     `?<Constant "SieJC_discoinfo">`
   \   00000074   ........           DC32     `?<Constant "get">`
   \   00000078   ........           DC32     `?<Constant "http://jabber.org/pro...">_4`
    293          
    294          

   \                                 In segment CODE, align 4, keep-with-next
    295          void Send_DiscoInfo_Request(char *dest_jid)
    296          {
   \                     Send_DiscoInfo_Request:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   \   00000004   0040A0E1           MOV      R4,R0
    297            char *to=malloc(128);
   \   00000008   8000A0E3           MOV      R0,#+128
   \   0000000C   140000EF           SWI      +20
   \   00000010   0050A0E1           MOV      R5,R0
    298            strcpy(to, dest_jid);
   \   00000014   0410A0E1           MOV      R1,R4
   \   00000018   1A0000EF           SWI      +26
    299            SUBPROC((void*)_senddicoinforequest,to);
   \   0000001C   08009FE5           LDR      R0,??Send_DiscoInfo_Request_0  ;; _senddicoinforequest
   \   00000020   0510A0E1           MOV      R1,R5
   \   00000024   710100EF           SWI      +369
    300          }
   \   00000028   3080BDE8           POP      {R4,R5,PC}       ;; return
   \                     ??Send_DiscoInfo_Request_0:
   \   0000002C   ........           DC32     _senddicoinforequest
    301          
    302          //Context: HELPER

   \                                 In segment CODE, align 4, keep-with-next
    303          void _sendversionrequest(char *dest_jid)
    304          {
    305            char typ[]=IQTYPE_GET;
   \                     _sendversionrequest:
   \   00000000   50109FE5           LDR      R1,??_sendversionrequest_0  ;; `?<Constant "get">_1`
   \   00000004   30402DE9           PUSH     {R4,R5,LR}
   \   00000008   18D04DE2           SUB      SP,SP,#+24
   \   0000000C   002091E5           LDR      R2,[R1, #0]
    306            char iq_v[]=IQ_VERSION;
   \   00000010   44109FE5           LDR      R1,??_sendversionrequest_0+0x4  ;; `?<Constant "jabber:iq:version">_1`
   \   00000014   0040A0E1           MOV      R4,R0
   \   00000018   0D00A0E1           MOV      R0,SP
   \   0000001C   002080E5           STR      R2,[R0, #+0]
   \   00000020   2C5091E8           LDM      R1,{R2,R3,R5,R12,LR}
   \   00000024   04008DE2           ADD      R0,SP,#+4
   \   00000028   2C5080E8           STM      R0,{R2,R3,R5,R12,LR}
    307          
    308            SendIq(dest_jid, typ, vreq_id, iq_v, NULL);
   \   0000002C   2C209FE5           LDR      R2,??_sendversionrequest_0+0x8  ;; auth_id + 32
   \   00000030   0000A0E3           MOV      R0,#+0
   \   00000034   01002DE9           PUSH     {R0}
   \   00000038   08308DE2           ADD      R3,SP,#+8
   \   0000003C   04108DE2           ADD      R1,SP,#+4
   \   00000040   0400A0E1           MOV      R0,R4
   \   00000044   ........           BL       SendIq
    309            mfree(dest_jid);
   \   00000048   0400A0E1           MOV      R0,R4
   \   0000004C   150000EF           SWI      +21
    310          }
   \   00000050   1CD08DE2           ADD      SP,SP,#+28
   \   00000054   3080BDE8           POP      {R4,R5,PC}       ;; return
   \                     ??_sendversionrequest_0:
   \   00000058   ........           DC32     `?<Constant "get">_1`
   \   0000005C   ........           DC32     `?<Constant "jabber:iq:version">_1`
   \   00000060   ........           DC32     auth_id + 32
    311          
    312          // Послать запрос о версии пользователю с указанным JID

   \                                 In segment CODE, align 4, keep-with-next
    313          void Send_Version_Request(char *dest_jid)
    314          {
   \                     Send_Version_Request:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   \   00000004   0040A0E1           MOV      R4,R0
    315            char *to=malloc(128);
   \   00000008   8000A0E3           MOV      R0,#+128
   \   0000000C   140000EF           SWI      +20
   \   00000010   0050A0E1           MOV      R5,R0
    316            strcpy(to, dest_jid);
   \   00000014   0410A0E1           MOV      R1,R4
   \   00000018   1A0000EF           SWI      +26
    317            SUBPROC((void*)_sendversionrequest,to);
   \   0000001C   08009FE5           LDR      R0,??Send_Version_Request_0  ;; _sendversionrequest
   \   00000020   0510A0E1           MOV      R1,R5
   \   00000024   710100EF           SWI      +369
    318          }
   \   00000028   3080BDE8           POP      {R4,R5,PC}       ;; return
   \                     ??Send_Version_Request_0:
   \   0000002C   ........           DC32     _sendversionrequest
    319          //Context: HELPER
    320          

   \                                 In segment CODE, align 4, keep-with-next
    321          void _sendtimerequest(char *dest_jid)
    322          {
    323            char typ[]=IQTYPE_GET;
   \                     _sendtimerequest:
   \   00000000   50109FE5           LDR      R1,??_sendtimerequest_0  ;; `?<Constant "get">_2`
   \   00000004   10402DE9           PUSH     {R4,LR}
   \   00000008   14D04DE2           SUB      SP,SP,#+20
   \   0000000C   002091E5           LDR      R2,[R1, #0]
    324            char iq_v[]=IQ_TIME;
   \   00000010   44109FE5           LDR      R1,??_sendtimerequest_0+0x4  ;; `?<Constant "jabber:iq:time">_1`
   \   00000014   0040A0E1           MOV      R4,R0
   \   00000018   0D00A0E1           MOV      R0,SP
   \   0000001C   002080E5           STR      R2,[R0, #+0]
   \   00000020   0C5091E8           LDM      R1,{R2,R3,R12,LR}
   \   00000024   04008DE2           ADD      R0,SP,#+4
   \   00000028   0C5080E8           STM      R0,{R2,R3,R12,LR}
    325            SendIq(dest_jid, typ, treq_id, iq_v, NULL);
   \   0000002C   2C209FE5           LDR      R2,??_sendtimerequest_0+0x8  ;; auth_id + 64
   \   00000030   0000A0E3           MOV      R0,#+0
   \   00000034   01002DE9           PUSH     {R0}
   \   00000038   08308DE2           ADD      R3,SP,#+8
   \   0000003C   04108DE2           ADD      R1,SP,#+4
   \   00000040   0400A0E1           MOV      R0,R4
   \   00000044   ........           BL       SendIq
    326            mfree(dest_jid);
   \   00000048   0400A0E1           MOV      R0,R4
   \   0000004C   150000EF           SWI      +21
    327          }
   \   00000050   18D08DE2           ADD      SP,SP,#+24
   \   00000054   1080BDE8           POP      {R4,PC}          ;; return
   \                     ??_sendtimerequest_0:
   \   00000058   ........           DC32     `?<Constant "get">_2`
   \   0000005C   ........           DC32     `?<Constant "jabber:iq:time">_1`
   \   00000060   ........           DC32     auth_id + 64
    328          
    329          // Послать запрос о локальном времени клиента пользователю с указанным JID

   \                                 In segment CODE, align 4, keep-with-next
    330          void Send_Time_Request(char *dest_jid)
    331          {
   \                     Send_Time_Request:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   \   00000004   0040A0E1           MOV      R4,R0
    332            char *to=malloc(128);
   \   00000008   8000A0E3           MOV      R0,#+128
   \   0000000C   140000EF           SWI      +20
   \   00000010   0050A0E1           MOV      R5,R0
    333            strcpy(to, dest_jid);
   \   00000014   0410A0E1           MOV      R1,R4
   \   00000018   1A0000EF           SWI      +26
    334            SUBPROC((void*)_sendtimerequest,to);
   \   0000001C   08009FE5           LDR      R0,??Send_Time_Request_0  ;; _sendtimerequest
   \   00000020   0510A0E1           MOV      R1,R5
   \   00000024   710100EF           SWI      +369
    335          }
   \   00000028   3080BDE8           POP      {R4,R5,PC}       ;; return
   \                     ??Send_Time_Request_0:
   \   0000002C   ........           DC32     _sendtimerequest
    336          

   \                                 In segment CODE, align 4, keep-with-next
    337          void _sendvcardrequest(char *to)
    338          {
    339            char vcard_t[]="vCard";
   \                     _sendvcardrequest:
   \   00000000   78109FE5           LDR      R1,??_sendvcardrequest_0  ;; `?<Constant "vCard">_1`
   \   00000004   30402DE9           PUSH     {R4,R5,LR}
   \   00000008   14D04DE2           SUB      SP,SP,#+20
   \   0000000C   0C0091E8           LDM      R1,{R2,R3}
    340            char xmlns_t[]="xmlns";
   \   00000010   6C109FE5           LDR      R1,??_sendvcardrequest_0+0x4  ;; `?<Constant "xmlns">_4`
   \   00000014   0040A0E1           MOV      R4,R0
   \   00000018   04008DE2           ADD      R0,SP,#+4
   \   0000001C   0C0080E8           STM      R0,{R2,R3}
   \   00000020   0C0091E8           LDM      R1,{R2,R3}
    341            char typ[]=IQTYPE_GET;
   \   00000024   5C109FE5           LDR      R1,??_sendvcardrequest_0+0x8  ;; `?<Constant "get">_3`
   \   00000028   0C008DE2           ADD      R0,SP,#+12
   \   0000002C   0C0080E8           STM      R0,{R2,R3}
   \   00000030   002091E5           LDR      R2,[R1, #0]
   \   00000034   0D00A0E1           MOV      R0,SP
   \   00000038   002080E5           STR      R2,[R0, #+0]
    342            XMLNode *vcard_xml;
    343            vcard_xml = XML_CreateNode(vcard_t, NULL);
   \   0000003C   0010A0E3           MOV      R1,#+0
   \   00000040   04008DE2           ADD      R0,SP,#+4
   \   00000044   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
    344            XML_Set_Attr_Value(vcard_xml, xmlns_t, JABBER_VCARD_TEMP);
   \   00000048   3C209FE5           LDR      R2,??_sendvcardrequest_0+0xC  ;; `?<Constant "x">_1` + 136
   \   0000004C   0050A0E1           MOV      R5,R0
   \   00000050   0C108DE2           ADD      R1,SP,#+12
   \   00000054   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    345            SendIq(to, typ, vcreq_id, NULL, vcard_xml);
   \   00000058   30209FE5           LDR      R2,??_sendvcardrequest_0+0x10  ;; auth_id + 80
   \   0000005C   20002DE9           PUSH     {R5}
   \   00000060   0030A0E3           MOV      R3,#+0
   \   00000064   04108DE2           ADD      R1,SP,#+4
   \   00000068   0400A0E1           MOV      R0,R4
   \   0000006C   ........           BL       SendIq
    346            mfree(to);
   \   00000070   0400A0E1           MOV      R0,R4
   \   00000074   150000EF           SWI      +21
    347          }
   \   00000078   18D08DE2           ADD      SP,SP,#+24
   \   0000007C   3080BDE8           POP      {R4,R5,PC}       ;; return
   \                     ??_sendvcardrequest_0:
   \   00000080   ........           DC32     `?<Constant "vCard">_1`
   \   00000084   ........           DC32     `?<Constant "xmlns">_4`
   \   00000088   ........           DC32     `?<Constant "get">_3`
   \   0000008C   ........           DC32     `?<Constant "x">_1` + 136
   \   00000090   ........           DC32     auth_id + 80
    348          
    349          // Послать запрос о версии vcard

   \                                 In segment CODE, align 4, keep-with-next
    350          void Send_Vcard_Request(char *dest_jid)
    351          {
   \                     Send_Vcard_Request:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   \   00000004   0040A0E1           MOV      R4,R0
    352            char *to=malloc(128);
   \   00000008   8000A0E3           MOV      R0,#+128
   \   0000000C   140000EF           SWI      +20
   \   00000010   0050A0E1           MOV      R5,R0
    353            strcpy(to, dest_jid);
   \   00000014   0410A0E1           MOV      R1,R4
   \   00000018   1A0000EF           SWI      +26
    354            SUBPROC((void*)_sendvcardrequest,to);
   \   0000001C   08009FE5           LDR      R0,??Send_Vcard_Request_0  ;; _sendvcardrequest
   \   00000020   0510A0E1           MOV      R1,R5
   \   00000024   710100EF           SWI      +369
    355          }
   \   00000028   3080BDE8           POP      {R4,R5,PC}       ;; return
   \                     ??Send_Vcard_Request_0:
   \   0000002C   ........           DC32     _sendvcardrequest
    356          

   \                                 In segment CODE, align 4, keep-with-next
    357          void _sendlastactivrequest(char *dest_jid)
    358          {
    359            char typ[]=IQTYPE_GET;
   \                     _sendlastactivrequest:
   \   00000000   50109FE5           LDR      R1,??_sendlastactivrequest_0  ;; `?<Constant "get">_4`
   \   00000004   10402DE9           PUSH     {R4,LR}
   \   00000008   14D04DE2           SUB      SP,SP,#+20
   \   0000000C   002091E5           LDR      R2,[R1, #0]
    360            char iq_v[]=IQ_IDLE;
   \   00000010   44109FE5           LDR      R1,??_sendlastactivrequest_0+0x4  ;; `?<Constant "jabber:iq:last">_1`
   \   00000014   0040A0E1           MOV      R4,R0
   \   00000018   0D00A0E1           MOV      R0,SP
   \   0000001C   002080E5           STR      R2,[R0, #+0]
   \   00000020   0C5091E8           LDM      R1,{R2,R3,R12,LR}
   \   00000024   04008DE2           ADD      R0,SP,#+4
   \   00000028   0C5080E8           STM      R0,{R2,R3,R12,LR}
    361            SendIq(dest_jid, typ, lastact_id, iq_v, NULL);
   \   0000002C   2C209FE5           LDR      R2,??_sendlastactivrequest_0+0x8  ;; auth_id + 96
   \   00000030   0000A0E3           MOV      R0,#+0
   \   00000034   01002DE9           PUSH     {R0}
   \   00000038   08308DE2           ADD      R3,SP,#+8
   \   0000003C   04108DE2           ADD      R1,SP,#+4
   \   00000040   0400A0E1           MOV      R0,R4
   \   00000044   ........           BL       SendIq
    362            mfree(dest_jid);
   \   00000048   0400A0E1           MOV      R0,R4
   \   0000004C   150000EF           SWI      +21
    363          }
   \   00000050   18D08DE2           ADD      SP,SP,#+24
   \   00000054   1080BDE8           POP      {R4,PC}          ;; return
   \                     ??_sendlastactivrequest_0:
   \   00000058   ........           DC32     `?<Constant "get">_4`
   \   0000005C   ........           DC32     `?<Constant "jabber:iq:last">_1`
   \   00000060   ........           DC32     auth_id + 96
    364          

   \                                 In segment CODE, align 4, keep-with-next
    365          void Send_LastActivity_Request(char *dest_jid)
    366          {
   \                     Send_LastActivity_Request:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   \   00000004   0040A0E1           MOV      R4,R0
    367            char *to=malloc(128);
   \   00000008   8000A0E3           MOV      R0,#+128
   \   0000000C   140000EF           SWI      +20
   \   00000010   0050A0E1           MOV      R5,R0
    368            strcpy(to, dest_jid);
   \   00000014   0410A0E1           MOV      R1,R4
   \   00000018   1A0000EF           SWI      +26
    369            SUBPROC((void*)_sendlastactivrequest,to);
   \   0000001C   08009FE5           LDR      R0,??Send_LastActivity_Request_0  ;; _sendlastactivrequest
   \   00000020   0510A0E1           MOV      R1,R5
   \   00000024   710100EF           SWI      +369
    370          }
   \   00000028   3080BDE8           POP      {R4,R5,PC}       ;; return
   \                     ??Send_LastActivity_Request_0:
   \   0000002C   ........           DC32     _sendlastactivrequest
    371          
    372          // Сгенерировать ver= исходя из текущих возможностей клиента
    373          // Возвращаемую строку необходимо освобождать!

   \                                 In segment CODE, align 4, keep-with-next
    374          char *Generate_Caps()
    375          {
    376            char answer[400];
    377            sprintf(answer, "client/mobile//SieJC %s:%i"
    378              "<%s"
    379              "<%s"
    380              "<%s"
    381              "<%s"
    382              "<%s"
    383              "<%s", VERSION_VERS, __SVN_REVISION__, DISCO_INFO, XMLNS_MUC, IQ_IDLE, IQ_TIME, IQ_VERSION, JABBER_URN_PING);
   \                     Generate_Caps:
   \   00000000   ........           LDR      R0,??DataTable44  ;; `?<Constant "x">_1`
   \   00000004   ........           LDR      R2,??DataTable42  ;; VERSION_VERS
   \   00000008   30402DE9           PUSH     {R4,R5,LR}
   \   0000000C   91DF4DE2           SUB      SP,SP,#+580
   \   00000010   501F80E2           ADD      R1,R0,#+320
   \   00000014   02002DE9           PUSH     {R1}
   \   00000018   BE30A0E3           MOV      R3,#+190
   \   0000001C   B03E83E3           ORR      R3,R3,#0xB00
   \   00000020   4B1F80E2           ADD      R1,R0,#+300
   \   00000024   02002DE9           PUSH     {R1}
   \   00000028   471F80E2           ADD      R1,R0,#+284
   \   0000002C   02002DE9           PUSH     {R1}
   \   00000030   431F80E2           ADD      R1,R0,#+268
   \   00000034   02002DE9           PUSH     {R1}
   \   00000038   EC1080E2           ADD      R1,R0,#+236
   \   0000003C   02002DE9           PUSH     {R1}
   \   00000040   C41080E2           ADD      R1,R0,#+196
   \   00000044   02002DE9           PUSH     {R1}
   \   00000048   941080E2           ADD      R1,R0,#+148
   \   0000004C   18008DE2           ADD      R0,SP,#+24
   \   00000050   160000EF           SWI      +22
    384                
    385            if(DELIVERY_EVENTS)
   \   00000054   ........           LDR      R0,??DataTable27  ;; DELIVERY_EVENTS
   \   00000058   000090E5           LDR      R0,[R0, #+0]
   \   0000005C   18D08DE2           ADD      SP,SP,#+24
   \   00000060   000050E3           CMP      R0,#+0
   \   00000064   0600000A           BEQ      ??Generate_Caps_0
    386            {
    387              char xevents_feature[]="<"JABBER_XMPP_RECEIPTS;
   \   00000068   F8109FE5           LDR      R1,??Generate_Caps_1  ;; `?<Constant "<urn:xmpp:receipts">`
   \   0000006C   8C0F8DE2           ADD      R0,SP,#+560
   \   00000070   3C1091E8           LDM      R1,{R2-R5,R12}
    388              strcat(answer, xevents_feature);
   \   00000074   8C1F8DE2           ADD      R1,SP,#+560
   \   00000078   3C1080E8           STM      R0,{R2-R5,R12}
   \   0000007C   0D00A0E1           MOV      R0,SP
   \   00000080   170000EF           SWI      +23
    389            }
    390          
    391            if(COMPOSING_EVENTS)
   \                     ??Generate_Caps_0:
   \   00000084   ........           LDR      R0,??DataTable48  ;; COMPOSING_EVENTS
   \   00000088   000090E5           LDR      R0,[R0, #+0]
   \   0000008C   000050E3           CMP      R0,#+0
   \   00000090   0800000A           BEQ      ??Generate_Caps_2
    392            {
    393              char xevents_feature[]="<"XMLNS_CHATSTATES;
   \   00000094   D0109FE5           LDR      R1,??Generate_Caps_1+0x4  ;; `?<Constant "<http://jabber.org/pr...">`
   \   00000098   7C0F8DE2           ADD      R0,SP,#+496
   \   0000009C   3C10B1E8           LDM      R1!,{R2-R5,R12}
   \   000000A0   3C10A0E8           STM      R0!,{R2-R5,R12}
   \   000000A4   3C1091E8           LDM      R1,{R2-R5,R12}
    394              strcat(answer, xevents_feature);
   \   000000A8   7C1F8DE2           ADD      R1,SP,#+496
   \   000000AC   3C1080E8           STM      R0,{R2-R5,R12}
   \   000000B0   0D00A0E1           MOV      R0,SP
   \   000000B4   170000EF           SWI      +23
    395            }
    396          
    397            if(USE_ATTENTION)
   \                     ??Generate_Caps_2:
   \   000000B8   ........           LDR      R0,??DataTable49  ;; USE_ATTENTION
   \   000000BC   000090E5           LDR      R0,[R0, #+0]
   \   000000C0   000050E3           CMP      R0,#+0
   \   000000C4   0600000A           BEQ      ??Generate_Caps_3
    398            {
    399              char xevents_feature[]="<"JABBER_URN_ATTENTION;
   \   000000C8   A0109FE5           LDR      R1,??Generate_Caps_1+0x8  ;; `?<Constant "<urn:xmpp:attention:0">`
   \   000000CC   860F8DE2           ADD      R0,SP,#+536
   \   000000D0   3C5091E8           LDM      R1,{R2-R5,R12,LR}
    400              strcat(answer, xevents_feature);
   \   000000D4   861F8DE2           ADD      R1,SP,#+536
   \   000000D8   3C5080E8           STM      R0,{R2-R5,R12,LR}
   \   000000DC   0D00A0E1           MOV      R0,SP
   \   000000E0   170000EF           SWI      +23
    401            }
    402                
    403            SHA_CTX ctx;
    404            char *hash2 = malloc(256);
   \                     ??Generate_Caps_3:
   \   000000E4   400FA0E3           MOV      R0,#+256
   \   000000E8   140000EF           SWI      +20
   \   000000EC   0040A0E1           MOV      R4,R0
    405            zeromem(hash2,256);
   \   000000F0   401FA0E3           MOV      R1,#+256
   \   000000F4   1D0100EF           SWI      +285
    406            SHA1_Init(&ctx);
   \   000000F8   640F8DE2           ADD      R0,SP,#+400
   \   000000FC   BC0100EF           SWI      +444
    407            SHA1_Update(&ctx, answer, strlen(answer));
   \   00000100   0D00A0E1           MOV      R0,SP
   \   00000104   1B0000EF           SWI      +27
   \   00000108   0020A0E1           MOV      R2,R0
   \   0000010C   0D10A0E1           MOV      R1,SP
   \   00000110   640F8DE2           ADD      R0,SP,#+400
   \   00000114   BD0100EF           SWI      +445
    408            SHA1_Final(hash2,&ctx);
   \   00000118   641F8DE2           ADD      R1,SP,#+400
   \   0000011C   0400A0E1           MOV      R0,R4
   \   00000120   BE0100EF           SWI      +446
    409            char *Result_Resp = malloc(256);
   \   00000124   400FA0E3           MOV      R0,#+256
   \   00000128   140000EF           SWI      +20
   \   0000012C   0050A0E1           MOV      R5,R0
    410            zeromem(Result_Resp, 256);
   \   00000130   401FA0E3           MOV      R1,#+256
   \   00000134   1D0100EF           SWI      +285
    411            Base64Encode(hash2, strlen(hash2),Result_Resp, 256);
   \   00000138   0400A0E1           MOV      R0,R4
   \   0000013C   1B0000EF           SWI      +27
   \   00000140   0010A0E1           MOV      R1,R0
   \   00000144   403FA0E3           MOV      R3,#+256
   \   00000148   0520A0E1           MOV      R2,R5
   \   0000014C   0400A0E1           MOV      R0,R4
   \   00000150   440200EF           SWI      +580
    412            mfree(hash2);
   \   00000154   0400A0E1           MOV      R0,R4
   \   00000158   150000EF           SWI      +21
    413            return Result_Resp;
   \   0000015C   0500A0E1           MOV      R0,R5
   \   00000160   91DF8DE2           ADD      SP,SP,#+580
   \   00000164   3080BDE8           POP      {R4,R5,PC}       ;; return
   \                     ??Generate_Caps_1:
   \   00000168   ........           DC32     `?<Constant "<urn:xmpp:receipts">`
   \   0000016C   ........           DC32     `?<Constant "<http://jabber.org/pr...">`
   \   00000170   ........           DC32     `?<Constant "<urn:xmpp:attention:0">`
    414          }
    415          
    416          /*
    417            Послать своё присутствие (в частности, после этого на нас вываливаются
    418            присутствия остальных, а мы появляемся в ресурсах своего контакта)
    419          
    420          */
    421          // Context: HELPER

   \                                 In segment CODE, align 4, keep-with-next
    422          void Send_Presence(PRESENCE_INFO *pr_info)
    423          {
   \                     Send_Presence:
   \   00000000   F04F2DE9           PUSH     {R4-R11,LR}
   \   00000004   44D04DE2           SUB      SP,SP,#+68
    424            extern char My_Presence;
    425            extern const char percent_d[];
    426            My_Presence = pr_info->status;
    427            //<c xmlns='http://jabber.org/protocol/caps' node='VERSION_NAME' ver='VERSION_VERS __SVN_REVISION__' />
    428            // Генерируем капс исходя из включённых фич
    429            char *caps_str = Generate_Caps();
    430            char *tmp_str = malloc(256);
    431            char* presence = malloc(1024);
    432            XMLNode *priority=NULL, *show=NULL, *status=NULL, *caps=NULL, *payload=NULL;
    433            char *type = NULL;
    434            char status_t[]="status";
    435            char show_t[]="show";
    436            char c_t[]="c";
   \   00000008   6C939FE5           LDR      R9,??Send_Presence_0  ;; `?<Constant "c">`
   \   0000000C   0040A0E1           MOV      R4,R0
   \   00000010   0210D4E5           LDRB     R1,[R4, #+2]
   \   00000014   64039FE5           LDR      R0,??Send_Presence_0+0x4  ;; My_Presence
   \   00000018   0070A0E3           MOV      R7,#+0
   \   0000001C   0010C0E5           STRB     R1,[R0, #+0]
   \   00000020   ........           BL       Generate_Caps
   \   00000024   0050A0E1           MOV      R5,R0
   \   00000028   400FA0E3           MOV      R0,#+256
   \   0000002C   140000EF           SWI      +20
   \   00000030   0060A0E1           MOV      R6,R0
   \   00000034   400EA0E3           MOV      R0,#+1024
   \   00000038   140000EF           SWI      +20
   \   0000003C   40139FE5           LDR      R1,??Send_Presence_0+0x8  ;; `?<Constant "status">_1`
   \   00000040   34008DE5           STR      R0,[SP, #+52]
   \   00000044   0C0091E8           LDM      R1,{R2,R3}
   \   00000048   38139FE5           LDR      R1,??Send_Presence_0+0xC  ;; `?<Constant "show">_1`
   \   0000004C   0C008DE2           ADD      R0,SP,#+12
   \   00000050   0C0080E8           STM      R0,{R2,R3}
   \   00000054   0C0091E8           LDM      R1,{R2,R3}
   \   00000058   14008DE2           ADD      R0,SP,#+20
   \   0000005C   0C0080E8           STM      R0,{R2,R3}
   \   00000060   0010D9E5           LDRB     R1,[R9, #0]
   \   00000064   0D00A0E1           MOV      R0,SP
   \   00000068   0080A0E3           MOV      R8,#+0
   \   0000006C   0010C0E5           STRB     R1,[R0, #+0]
   \   00000070   0110D9E5           LDRB     R1,[R9, #+1]
   \   00000074   0110C0E5           STRB     R1,[R0, #+1]
    437            char xmlns_t[]="xmlns";
   \   00000078   0C139FE5           LDR      R1,??Send_Presence_0+0x10  ;; `?<Constant "xmlns">_5`
   \   0000007C   1C008DE2           ADD      R0,SP,#+28
   \   00000080   0C0091E8           LDM      R1,{R2,R3}
    438            char node_t[]="node";
   \   00000084   04139FE5           LDR      R1,??Send_Presence_0+0x14  ;; `?<Constant "node">`
   \   00000088   0C0080E8           STM      R0,{R2,R3}
   \   0000008C   0C0091E8           LDM      R1,{R2,R3}
    439            char ver_t[]="ver";
   \   00000090   FC129FE5           LDR      R1,??Send_Presence_0+0x18  ;; `?<Constant "ver">`
   \   00000094   24008DE2           ADD      R0,SP,#+36
   \   00000098   0C0080E8           STM      R0,{R2,R3}
   \   0000009C   002091E5           LDR      R2,[R1, #0]
    440            char hash_t[]="hash";
   \   000000A0   F0129FE5           LDR      R1,??Send_Presence_0+0x1C  ;; `?<Constant "hash">`
   \   000000A4   08008DE2           ADD      R0,SP,#+8
   \   000000A8   002080E5           STR      R2,[R0, #+0]
   \   000000AC   0C0091E8           LDM      R1,{R2,R3}
    441            char priority_t[]="priority";
   \   000000B0   E4129FE5           LDR      R1,??Send_Presence_0+0x20  ;; `?<Constant "priority">_1`
   \   000000B4   2C008DE2           ADD      R0,SP,#+44
   \   000000B8   0C0080E8           STM      R0,{R2,R3}
   \   000000BC   0C0491E8           LDM      R1,{R2,R3,R10}
   \   000000C0   38008DE2           ADD      R0,SP,#+56
   \   000000C4   0C0480E8           STM      R0,{R2,R3,R10}
    442            
    443            if(pr_info->status!=PRESENCE_OFFLINE)
   \   000000C8   0200D4E5           LDRB     R0,[R4, #+2]
   \   000000CC   ........           LDR      R10,??DataTable52  ;; OnlineInfo
   \   000000D0   060050E3           CMP      R0,#+6
   \   000000D4   5400000A           BEQ      ??Send_Presence_1
    444            {
    445            //обновляем онлайнинфо только если не выбран офлайн статус, чтоб при выходе в конфиг записать
    446            OnlineInfo.status = pr_info->status;
   \   000000D8   0000CAE5           STRB     R0,[R10, #+0]
    447            OnlineInfo.priority = pr_info->priority;
   \   000000DC   F000D4E1           LDRSH    R0,[R4, #+0]
   \   000000E0   B200CAE1           STRH     R0,[R10, #+2]
    448            if(OnlineInfo.txt)mfree(OnlineInfo.txt);
   \   000000E4   04009AE5           LDR      R0,[R10, #+4]
   \   000000E8   000050E3           CMP      R0,#+0
   \   000000EC   0000000A           BEQ      ??Send_Presence_2
   \   000000F0   150000EF           SWI      +21
    449            if(pr_info->message)
   \                     ??Send_Presence_2:
   \   000000F4   040094E5           LDR      R0,[R4, #+4]
   \   000000F8   000050E3           CMP      R0,#+0
   \   000000FC   0600000A           BEQ      ??Send_Presence_3
    450            {
    451              OnlineInfo.txt = malloc(strlen(pr_info->message)+1);
   \   00000100   1B0000EF           SWI      +27
   \   00000104   010080E2           ADD      R0,R0,#+1
   \   00000108   140000EF           SWI      +20
   \   0000010C   04008AE5           STR      R0,[R10, #+4]
    452              strcpy(OnlineInfo.txt, pr_info->message);
   \   00000110   041094E5           LDR      R1,[R4, #+4]
   \   00000114   1A0000EF           SWI      +26
   \   00000118   000000EA           B        ??Send_Presence_4
    453            }else OnlineInfo.txt = NULL;
   \                     ??Send_Presence_3:
   \   0000011C   04008AE5           STR      R0,[R10, #+4]
    454          
    455            if(pr_info->message)
   \                     ??Send_Presence_4:
   \   00000120   040094E5           LDR      R0,[R4, #+4]
   \   00000124   000050E3           CMP      R0,#+0
   \   00000128   0600000A           BEQ      ??Send_Presence_5
    456              if(strlen(pr_info->message)>0)status =XML_CreateNode(status_t, pr_info->message);
   \   0000012C   1B0000EF           SWI      +27
   \   00000130   000050E3           CMP      R0,#+0
   \   00000134   0300000A           BEQ      ??Send_Presence_5
   \   00000138   041094E5           LDR      R1,[R4, #+4]
   \   0000013C   0C008DE2           ADD      R0,SP,#+12
   \   00000140   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   00000144   0070A0E1           MOV      R7,R0
    457            if(pr_info->status!=PRESENCE_INVISIBLE)
   \                     ??Send_Presence_5:
   \   00000148   0200D4E5           LDRB     R0,[R4, #+2]
   \   0000014C   050050E3           CMP      R0,#+5
   \   00000150   3300000A           BEQ      ??Send_Presence_6
    458            {
    459              sprintf(tmp_str, percent_d, pr_info->priority);
   \   00000154   F020D4E1           LDRSH    R2,[R4, #+0]
   \   00000158   ........           LDR      R1,??DataTable46  ;; percent_d
   \   0000015C   0600A0E1           MOV      R0,R6
   \   00000160   160000EF           SWI      +22
    460              priority = XML_CreateNode(priority_t, tmp_str);
   \   00000164   0610A0E1           MOV      R1,R6
   \   00000168   38008DE2           ADD      R0,SP,#+56
   \   0000016C   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   00000170   04008DE5           STR      R0,[SP, #+4]
    461              show = XML_CreateNode(show_t, (char*)PRESENCES[pr_info->status]);
   \   00000174   0200D4E5           LDRB     R0,[R4, #+2]
   \   00000178   00018AE0           ADD      R0,R10,R0, LSL #+2
   \   0000017C   081090E5           LDR      R1,[R0, #+8]
   \   00000180   14008DE2           ADD      R0,SP,#+20
   \   00000184   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   00000188   0080A0E1           MOV      R8,R0
    462              caps = XML_CreateNode(c_t, NULL);
   \   0000018C   0010A0E3           MOV      R1,#+0
   \   00000190   0D00A0E1           MOV      R0,SP
   \   00000194   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   00000198   00B0A0E1           MOV      R11,R0
    463              XML_Set_Attr_Value(caps, xmlns_t, XMLNS_CAPS);
   \   0000019C   042089E2           ADD      R2,R9,#+4
   \   000001A0   1C108DE2           ADD      R1,SP,#+28
   \   000001A4   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    464              sprintf(tmp_str, "%s %s-r%d", VERSION_NAME, VERSION_VERS, __SVN_REVISION__);
   \   000001A8   ........           LDR      R3,??DataTable42  ;; VERSION_VERS
   \   000001AC   ........           LDR      R2,??DataTable41  ;; VERSION_NAME
   \   000001B0   BE00A0E3           MOV      R0,#+190
   \   000001B4   B00E80E3           ORR      R0,R0,#0xB00
   \   000001B8   01002DE9           PUSH     {R0}
   \   000001BC   241089E2           ADD      R1,R9,#+36
   \   000001C0   0600A0E1           MOV      R0,R6
   \   000001C4   160000EF           SWI      +22
    465              XML_Set_Attr_Value(caps, node_t, tmp_str);
   \   000001C8   0620A0E1           MOV      R2,R6
   \   000001CC   28108DE2           ADD      R1,SP,#+40
   \   000001D0   0B00A0E1           MOV      R0,R11
   \   000001D4   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    466              XML_Set_Attr_Value(caps, ver_t, caps_str);
   \   000001D8   0520A0E1           MOV      R2,R5
   \   000001DC   0C108DE2           ADD      R1,SP,#+12
   \   000001E0   0B00A0E1           MOV      R0,R11
   \   000001E4   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    467              XML_Set_Attr_Value(caps, hash_t, "sha-1");
   \   000001E8   302089E2           ADD      R2,R9,#+48
   \   000001EC   30108DE2           ADD      R1,SP,#+48
   \   000001F0   0B00A0E1           MOV      R0,R11
   \   000001F4   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    468              show->next = caps;
   \   000001F8   00B088E5           STR      R11,[R8, #+0]
    469              priority->next = show;
   \   000001FC   08009DE5           LDR      R0,[SP, #+8]
    470              if(status) status->next = priority;
   \   00000200   000057E3           CMP      R7,#+0
   \   00000204   008080E5           STR      R8,[R0, #+0]
   \   00000208   04D08DE2           ADD      SP,SP,#+4
   \   0000020C   04009D15           LDRNE    R0,[SP, #+4]
    471                else status=priority;
   \   00000210   04709D05           LDREQ    R7,[SP, #+4]
    472              type = NULL;
   \   00000214   0010A0E3           MOV      R1,#+0
   \   00000218   00008715           STRNE    R0,[R7, #+0]
    473              payload = status;
   \   0000021C   0780A0E1           MOV      R8,R7
   \   00000220   020000EA           B        ??Send_Presence_7
    474            }
    475            else type = (char*)PRESENCES[PRESENCE_INVISIBLE];
   \                     ??Send_Presence_6:
   \   00000224   1C109AE5           LDR      R1,[R10, #+28]
   \   00000228   000000EA           B        ??Send_Presence_7
    476            }
    477            else
    478            {
    479              type=(char*)PRESENCES[PRESENCE_OFFLINE];
   \                     ??Send_Presence_1:
   \   0000022C   20109AE5           LDR      R1,[R10, #+32]
    480              if(status) payload = status;
    481            }
    482            SendPresence(NULL, type, NULL, payload);
   \                     ??Send_Presence_7:
   \   00000230   0830A0E1           MOV      R3,R8
   \   00000234   0020A0E3           MOV      R2,#+0
   \   00000238   0000A0E3           MOV      R0,#+0
   \   0000023C   ........           BL       SendPresence
    483          
    484          // MUC support
    485            MUC_ITEM* m_ex = muctop;
   \   00000240   38709AE5           LDR      R7,[R10, #+56]
   \   00000244   000057E3           CMP      R7,#+0
   \   00000248   3400000A           BEQ      ??Send_Presence_8
    486            while(m_ex)
    487            {
    488              show = XML_CreateNode(show_t, (char*)PRESENCES[pr_info->status]);    
   \                     ??Send_Presence_9:
   \   0000024C   0200D4E5           LDRB     R0,[R4, #+2]
   \   00000250   00018AE0           ADD      R0,R10,R0, LSL #+2
   \   00000254   081090E5           LDR      R1,[R0, #+8]
   \   00000258   14008DE2           ADD      R0,SP,#+20
   \   0000025C   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   00000260   0080A0E1           MOV      R8,R0
    489              if(pr_info->message) 
   \   00000264   040094E5           LDR      R0,[R4, #+4]
   \   00000268   000050E3           CMP      R0,#+0
   \   0000026C   0600000A           BEQ      ??Send_Presence_10
    490                if(strlen(pr_info->message)>0)
   \   00000270   1B0000EF           SWI      +27
   \   00000274   000050E3           CMP      R0,#+0
   \   00000278   0300000A           BEQ      ??Send_Presence_10
    491              {
    492                status =XML_CreateNode(status_t, pr_info->message);
    493                show->next = status;
   \   0000027C   041094E5           LDR      R1,[R4, #+4]
   \   00000280   0C008DE2           ADD      R0,SP,#+12
   \   00000284   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   00000288   000088E5           STR      R0,[R8, #+0]
    494              }
    495              caps = XML_CreateNode(c_t, NULL);
   \                     ??Send_Presence_10:
   \   0000028C   0010A0E3           MOV      R1,#+0
   \   00000290   0D00A0E1           MOV      R0,SP
   \   00000294   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   00000298   00B0A0E1           MOV      R11,R0
    496              XML_Set_Attr_Value(caps, xmlns_t, XMLNS_CAPS);
   \   0000029C   042089E2           ADD      R2,R9,#+4
   \   000002A0   1C108DE2           ADD      R1,SP,#+28
   \   000002A4   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    497              sprintf(tmp_str, "%s %s-r%d", VERSION_NAME, VERSION_VERS, __SVN_REVISION__);
   \   000002A8   ........           LDR      R3,??DataTable42  ;; VERSION_VERS
   \   000002AC   ........           LDR      R2,??DataTable41  ;; VERSION_NAME
   \   000002B0   BE00A0E3           MOV      R0,#+190
   \   000002B4   B00E80E3           ORR      R0,R0,#0xB00
   \   000002B8   01002DE9           PUSH     {R0}
   \   000002BC   241089E2           ADD      R1,R9,#+36
   \   000002C0   0600A0E1           MOV      R0,R6
   \   000002C4   160000EF           SWI      +22
    498              XML_Set_Attr_Value(caps, node_t, tmp_str);
   \   000002C8   0620A0E1           MOV      R2,R6
   \   000002CC   28108DE2           ADD      R1,SP,#+40
   \   000002D0   0B00A0E1           MOV      R0,R11
   \   000002D4   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    499              XML_Set_Attr_Value(caps, ver_t, caps_str);
   \   000002D8   0520A0E1           MOV      R2,R5
   \   000002DC   0C108DE2           ADD      R1,SP,#+12
   \   000002E0   0B00A0E1           MOV      R0,R11
   \   000002E4   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    500              XML_Set_Attr_Value(caps, hash_t, "sha-1");
   \   000002E8   302089E2           ADD      R2,R9,#+48
   \   000002EC   30108DE2           ADD      R1,SP,#+48
   \   000002F0   0B00A0E1           MOV      R0,R11
   \   000002F4   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    501              caps->next = show;
   \   000002F8   00808BE5           STR      R8,[R11, #+0]
    502          
    503              SendPresence(m_ex->conf_jid, NULL, NULL, caps);
   \   000002FC   000097E5           LDR      R0,[R7, #+0]
   \   00000300   0B30A0E1           MOV      R3,R11
   \   00000304   0020A0E3           MOV      R2,#+0
   \   00000308   0010A0E3           MOV      R1,#+0
   \   0000030C   ........           BL       SendPresence
    504              m_ex=m_ex->next;
   \   00000310   087097E5           LDR      R7,[R7, #+8]
    505            };
   \   00000314   04D08DE2           ADD      SP,SP,#+4
   \   00000318   000057E3           CMP      R7,#+0
   \   0000031C   CAFFFF1A           BNE      ??Send_Presence_9
    506            mfree(caps_str);
   \                     ??Send_Presence_8:
   \   00000320   0500A0E1           MOV      R0,R5
   \   00000324   150000EF           SWI      +21
    507            mfree(presence);
   \   00000328   34009DE5           LDR      R0,[SP, #+52]
   \   0000032C   150000EF           SWI      +21
    508            mfree(tmp_str);
   \   00000330   0600A0E1           MOV      R0,R6
   \   00000334   150000EF           SWI      +21
    509            if(pr_info->message)mfree(pr_info->message);
   \   00000338   040094E5           LDR      R0,[R4, #+4]
   \   0000033C   000050E3           CMP      R0,#+0
   \   00000340   0000000A           BEQ      ??Send_Presence_11
   \   00000344   150000EF           SWI      +21
    510            if(pr_info->status==PRESENCE_OFFLINE)
   \                     ??Send_Presence_11:
   \   00000348   0200D4E5           LDRB     R0,[R4, #+2]
   \   0000034C   060050E3           CMP      R0,#+6
   \   00000350   0000001A           BNE      ??Send_Presence_12
    511            {
    512              Send_Disconnect();
   \   00000354   ........           BL       Send_Disconnect
    513            }
    514            mfree(pr_info);
   \                     ??Send_Presence_12:
   \   00000358   0400A0E1           MOV      R0,R4
   \   0000035C   150000EF           SWI      +21
    515            LockSched();
   \   00000360   460100EF           SWI      +326
    516            strcpy(logmsg,"Send presence");
   \   00000364   ........           LDR      R0,??DataTable25  ;; logmsg
   \   00000368   381089E2           ADD      R1,R9,#+56
   \   0000036C   1A0000EF           SWI      +26
    517            UnlockSched();
   \   00000370   470100EF           SWI      +327
    518          }
   \   00000374   44D08DE2           ADD      SP,SP,#+68
   \   00000378   F08FBDE8           POP      {R4-R11,PC}      ;; return
   \                     ??Send_Presence_0:
   \   0000037C   ........           DC32     `?<Constant "c">`
   \   00000380   ........           DC32     My_Presence
   \   00000384   ........           DC32     `?<Constant "status">_1`
   \   00000388   ........           DC32     `?<Constant "show">_1`
   \   0000038C   ........           DC32     `?<Constant "xmlns">_5`
   \   00000390   ........           DC32     `?<Constant "node">`
   \   00000394   ........           DC32     `?<Constant "ver">`
   \   00000398   ........           DC32     `?<Constant "hash">`
   \   0000039C   ........           DC32     `?<Constant "priority">_1`
    519          

   \                                 In segment CODE, align 4, keep-with-next
    520          void Send_ShortPresence(char *to,char type)
    521          {
    522            SendPresence(to, (char*)PRESENCES[type], NULL, NULL);
   \                     Send_ShortPresence:
   \   00000000   ........           LDR      R12,??DataTable23  ;; OnlineInfo
   \   00000004   0030A0E3           MOV      R3,#+0
   \   00000008   0020A0E3           MOV      R2,#+0
   \   0000000C   01118CE0           ADD      R1,R12,R1, LSL #+2
   \   00000010   081091E5           LDR      R1,[R1, #+8]
   \   00000014   ........           B        SendPresence     ;; tailcall
    523          }
    524          
    525          /*
    526            Послать запрос ростера
    527          */
    528          // Context: HELPER

   \                                 In segment CODE, align 4, keep-with-next
    529          void Send_Roster_Query()
    530          {
   \                     Send_Roster_Query:
   \   00000000   10402DE9           PUSH     {R4,LR}
    531            SendIq(NULL, IQTYPE_GET, rost_id, IQ_ROSTER, NULL);
   \   00000004   ........           LDR      R4,??DataTable44  ;; `?<Constant "x">_1`
   \   00000008   2C209FE5           LDR      R2,??Send_Roster_Query_0+0x4  ;; auth_id + 16
   \   0000000C   0000A0E3           MOV      R0,#+0
   \   00000010   01002DE9           PUSH     {R0}
   \   00000014   543F84E2           ADD      R3,R4,#+336
   \   00000018   061F8FE2           ADR      R1,??Send_Roster_Query_0  ;; "get"
   \   0000001C   ........           BL       SendIq
    532            LockSched();
   \   00000020   460100EF           SWI      +326
    533            strcpy(logmsg,"Send roster Q");
   \   00000024   ........           LDR      R0,??DataTable25  ;; logmsg
   \   00000028   591F84E2           ADD      R1,R4,#+356
   \   0000002C   1A0000EF           SWI      +26
    534            UnlockSched();
   \   00000030   470100EF           SWI      +327
    535          }
   \   00000034   1180BDE8           POP      {R0,R4,PC}       ;; return
   \                     ??Send_Roster_Query_0:
   \   00000038   67657400           DC8      "get"
   \   0000003C   ........           DC32     auth_id + 16
    536          
    537          // Context: HELPER

   \                                 In segment CODE, align 4, keep-with-next
    538          void SendMessage(char* jid, IPC_MESSAGE_S *mess)
    539          {
   \                     SendMessage:
   \   00000000   F04F2DE9           PUSH     {R4-R11,LR}
   \   00000004   2CD04DE2           SUB      SP,SP,#+44
   \   00000008   0050A0E1           MOV      R5,R0
   \   0000000C   0160A0E1           MOV      R6,R1
    540          /*
    541            <attention xmlns='urn:xmpp:attention:0'/>
    542            <message to='romeo@montague.net' id='message22'>
    543                <body>Art thou not Romeo, and a Montague?</body>
    544                <request xmlns='urn:xmpp:receipts'/>
    545            </message>
    546          */
    547            extern const char percent_d[];
    548            char* mnum_str = malloc(256);
    549            XMLNode *body=NULL, *request=NULL, *active=NULL, *attention=NULL;
    550            char body_t[]="body";
    551            char request_t[]="request";
    552            char xmlns_t[]="xmlns";
    553            char active_t[]="active";
    554            char attention_t[]="attention";
    555            char *type ;
    556            body = XML_CreateNode(body_t, mess->body);
    557            if(mess->IsGroupChat)
   \   00000010   ........           LDR      R9,??DataTable44  ;; `?<Constant "x">_1`
   \   00000014   400FA0E3           MOV      R0,#+256
   \   00000018   140000EF           SWI      +20
   \   0000001C   9C119FE5           LDR      R1,??SendMessage_0  ;; `?<Constant "body">_1`
   \   00000020   0070A0E1           MOV      R7,R0
   \   00000024   0C0091E8           LDM      R1,{R2,R3}
   \   00000028   94119FE5           LDR      R1,??SendMessage_0+0x4  ;; `?<Constant "request">_1`
   \   0000002C   08008DE2           ADD      R0,SP,#+8
   \   00000030   0C0080E8           STM      R0,{R2,R3}
   \   00000034   0C0091E8           LDM      R1,{R2,R3}
   \   00000038   88119FE5           LDR      R1,??SendMessage_0+0x8  ;; `?<Constant "xmlns">_6`
   \   0000003C   10008DE2           ADD      R0,SP,#+16
   \   00000040   0C0080E8           STM      R0,{R2,R3}
   \   00000044   0C0091E8           LDM      R1,{R2,R3}
   \   00000048   7C119FE5           LDR      R1,??SendMessage_0+0xC  ;; `?<Constant "active">_1`
   \   0000004C   0D00A0E1           MOV      R0,SP
   \   00000050   0C0080E8           STM      R0,{R2,R3}
   \   00000054   0C0091E8           LDM      R1,{R2,R3}
   \   00000058   70119FE5           LDR      R1,??SendMessage_0+0x10  ;; `?<Constant "attention">_1`
   \   0000005C   18008DE2           ADD      R0,SP,#+24
   \   00000060   0C0080E8           STM      R0,{R2,R3}
   \   00000064   0C0191E8           LDM      R1,{R2,R3,R8}
   \   00000068   20008DE2           ADD      R0,SP,#+32
   \   0000006C   0C0180E8           STM      R0,{R2,R3,R8}
   \   00000070   041096E5           LDR      R1,[R6, #+4]
   \   00000074   08008DE2           ADD      R0,SP,#+8
   \   00000078   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
    558            {
    559              type = MSGSTR_GCHAT;
    560            }else type = MSGSTR_CHAT;
    561            if (DELIVERY_EVENTS && !mess->IsGroupChat)
   \   0000007C   ........           LDR      R1,??DataTable27  ;; DELIVERY_EVENTS
   \   00000080   0080A0E1           MOV      R8,R0
   \   00000084   0000D6E5           LDRB     R0,[R6, #+0]
   \   00000088   001091E5           LDR      R1,[R1, #+0]
   \   0000008C   00B0A0E3           MOV      R11,#+0
   \   00000090   0040A0E3           MOV      R4,#+0
   \   00000094   000050E3           CMP      R0,#+0
   \   00000098   5DAF8912           ADDNE    R10,R9,#+372
   \   0000009C   58A08902           ADDEQ    R10,R9,#+88
   \   000000A0   000051E3           CMP      R1,#+0
   \   000000A4   0800000A           BEQ      ??SendMessage_1
   \   000000A8   000050E3           CMP      R0,#+0
   \   000000AC   0600001A           BNE      ??SendMessage_1
    562            {
    563              request=XML_CreateNode(request_t, NULL);
   \   000000B0   0010A0E3           MOV      R1,#+0
   \   000000B4   10008DE2           ADD      R0,SP,#+16
   \   000000B8   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   000000BC   0040A0E1           MOV      R4,R0
    564              XML_Set_Attr_Value(request, xmlns_t, JABBER_XMPP_RECEIPTS);
   \   000000C0   602F89E2           ADD      R2,R9,#+384
   \   000000C4   0D10A0E1           MOV      R1,SP
   \   000000C8   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    565            }
    566            if (COMPOSING_EVENTS && !mess->IsGroupChat)
   \                     ??SendMessage_1:
   \   000000CC   ........           LDR      R0,??DataTable48  ;; COMPOSING_EVENTS
   \   000000D0   000090E5           LDR      R0,[R0, #+0]
   \   000000D4   000050E3           CMP      R0,#+0
   \   000000D8   0900000A           BEQ      ??SendMessage_2
   \   000000DC   0000D6E5           LDRB     R0,[R6, #+0]
   \   000000E0   000050E3           CMP      R0,#+0
   \   000000E4   0600001A           BNE      ??SendMessage_2
    567            {
    568              active=XML_CreateNode(active_t, NULL);
   \   000000E8   0010A0E3           MOV      R1,#+0
   \   000000EC   18008DE2           ADD      R0,SP,#+24
   \   000000F0   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   000000F4   00B0A0E1           MOV      R11,R0
    569              XML_Set_Attr_Value(active, xmlns_t, XMLNS_CHATSTATES);
   \   000000F8   652F89E2           ADD      R2,R9,#+404
   \   000000FC   0D10A0E1           MOV      R1,SP
   \   00000100   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    570            }
    571            if(request)
    572            {
    573              request->next = active;
    574            }
    575            else request = active;
    576          
    577            if (request)  body->next = request;
    578          
    579            if (USE_ATTENTION && mess->IsAttention && !mess->IsGroupChat)
   \                     ??SendMessage_2:
   \   00000104   ........           LDR      R0,??DataTable49  ;; USE_ATTENTION
   \   00000108   000054E3           CMP      R4,#+0
   \   0000010C   00B08415           STRNE    R11,[R4, #+0]
   \   00000110   0B40B001           MOVSEQ   R4,R11
   \   00000114   00408815           STRNE    R4,[R8, #+0]
   \   00000118   000090E5           LDR      R0,[R0, #+0]
   \   0000011C   000050E3           CMP      R0,#+0
   \   00000120   0100D615           LDRBNE   R0,[R6, #+1]
   \   00000124   00005013           CMPNE    R0,#+0
   \   00000128   0B00000A           BEQ      ??SendMessage_3
   \   0000012C   0000D6E5           LDRB     R0,[R6, #+0]
   \   00000130   000050E3           CMP      R0,#+0
   \   00000134   0800001A           BNE      ??SendMessage_3
    580            {
    581              attention=XML_CreateNode(attention_t, NULL);
   \   00000138   0010A0E3           MOV      R1,#+0
   \   0000013C   20008DE2           ADD      R0,SP,#+32
   \   00000140   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   00000144   0040A0E1           MOV      R4,R0
    582              XML_Set_Attr_Value(attention, xmlns_t, JABBER_URN_ATTENTION);
   \   00000148   6F2F89E2           ADD      R2,R9,#+444
   \   0000014C   0D10A0E1           MOV      R1,SP
   \   00000150   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    583              attention->next = body;
   \   00000154   008084E5           STR      R8,[R4, #+0]
   \   00000158   000000EA           B        ??SendMessage_4
    584            } else attention = body;
   \                     ??SendMessage_3:
   \   0000015C   0840A0E1           MOV      R4,R8
    585          
    586            sprintf(mnum_str, percent_d, m_num);
   \                     ??SendMessage_4:
   \   00000160   ........           LDR      R8,??DataTable45  ;; intimes
   \   00000164   ........           LDR      R1,??DataTable46  ;; percent_d
   \   00000168   102098E5           LDR      R2,[R8, #+16]
   \   0000016C   0700A0E1           MOV      R0,R7
   \   00000170   160000EF           SWI      +22
    587            Send_Message(jid, type, mnum_str, attention);
   \   00000174   0430A0E1           MOV      R3,R4
   \   00000178   0720A0E1           MOV      R2,R7
   \   0000017C   0A10A0E1           MOV      R1,R10
   \   00000180   0500A0E1           MOV      R0,R5
   \   00000184   ........           BL       Send_Message
    588            mfree(mnum_str);
   \   00000188   0700A0E1           MOV      R0,R7
   \   0000018C   150000EF           SWI      +21
    589            mfree(mess->body);
   \   00000190   040096E5           LDR      R0,[R6, #+4]
   \   00000194   150000EF           SWI      +21
    590            mfree(mess);
   \   00000198   0600A0E1           MOV      R0,R6
   \   0000019C   150000EF           SWI      +21
    591            m_num++;
   \   000001A0   100098E5           LDR      R0,[R8, #+16]
    592            GetDateTime(&indates, &intimes);
   \   000001A4   0810A0E1           MOV      R1,R8
   \   000001A8   010080E2           ADD      R0,R0,#+1
   \   000001AC   100088E5           STR      R0,[R8, #+16]
   \   000001B0   080088E2           ADD      R0,R8,#+8
   \   000001B4   B40000EF           SWI      +180
    593          }
   \   000001B8   2CD08DE2           ADD      SP,SP,#+44
   \   000001BC   F08FBDE8           POP      {R4-R11,PC}      ;; return
   \                     ??SendMessage_0:
   \   000001C0   ........           DC32     `?<Constant "body">_1`
   \   000001C4   ........           DC32     `?<Constant "request">_1`
   \   000001C8   ........           DC32     `?<Constant "xmlns">_6`
   \   000001CC   ........           DC32     `?<Constant "active">_1`
   \   000001D0   ........           DC32     `?<Constant "attention">_1`
    594          
    595           // Context: HELPER

   \                                 In segment CODE, align 4, keep-with-next
    596          void SendComposing(char* jid, IPC_MESSAGE_S *mess)
    597          {
   \                     SendComposing:
   \   00000000   F0432DE9           PUSH     {R4-R9,LR}
   \   00000004   0040A0E1           MOV      R4,R0
    598            /*
    599            <message 
    600              from='bernardo@shakespeare.lit/pda'
    601              to='francisco@shakespeare.lit/elsinore'
    602              type='chat'>
    603            <composing xmlns='http://jabber.org/protocol/chatstates'/>
    604          </message>
    605          */
    606            extern const int COMPOSING_EVENTS;
    607            if(!COMPOSING_EVENTS)return;
   \   00000008   ........           LDR      R0,??DataTable48  ;; COMPOSING_EVENTS
   \   0000000C   14D04DE2           SUB      SP,SP,#+20
   \   00000010   000090E5           LDR      R0,[R0, #+0]
   \   00000014   0150A0E1           MOV      R5,R1
   \   00000018   000050E3           CMP      R0,#+0
   \   0000001C   2700000A           BEQ      ??SendComposing_0
    608            char *type;
    609            if(mess->IsGroupChat)
   \   00000020   0000D5E5           LDRB     R0,[R5, #+0]
    610            {
    611               type = MSGSTR_GCHAT;
    612            }else type = MSGSTR_CHAT;
    613          
    614            XMLNode *composing;
    615            char composing_t[]="composing";
   \   00000024   9C109FE5           LDR      R1,??SendComposing_1  ;; `?<Constant "composing">_1`
   \   00000028   000050E3           CMP      R0,#+0
   \   0000002C   0C0191E8           LDM      R1,{R2,R3,R8}
   \   00000030   ........           LDR      R6,??DataTable44  ;; `?<Constant "x">_1`
    616            char xmlns_t[]="xmlns";
   \   00000034   90109FE5           LDR      R1,??SendComposing_1+0x4  ;; `?<Constant "xmlns">_7`
   \   00000038   08008DE2           ADD      R0,SP,#+8
   \   0000003C   0C0180E8           STM      R0,{R2,R3,R8}
   \   00000040   0C0091E8           LDM      R1,{R2,R3}
   \   00000044   0D00A0E1           MOV      R0,SP
   \   00000048   0C0080E8           STM      R0,{R2,R3}
   \   0000004C   5D7F8612           ADDNE    R7,R6,#+372
   \   00000050   58708602           ADDEQ    R7,R6,#+88
    617            char *str=malloc(256);
   \   00000054   400FA0E3           MOV      R0,#+256
   \   00000058   140000EF           SWI      +20
   \   0000005C   0080A0E1           MOV      R8,R0
    618            extern const char percent_d[];
    619            
    620            composing = XML_CreateNode(composing_t, NULL);
   \   00000060   0010A0E3           MOV      R1,#+0
   \   00000064   08008DE2           ADD      R0,SP,#+8
   \   00000068   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
    621            XML_Set_Attr_Value(composing, xmlns_t, XMLNS_CHATSTATES);
   \   0000006C   652F86E2           ADD      R2,R6,#+404
    622            sprintf(str, percent_d, m_num);
   \   00000070   ........           LDR      R6,??DataTable38  ;; intimes
   \   00000074   0090A0E1           MOV      R9,R0
   \   00000078   0D10A0E1           MOV      R1,SP
   \   0000007C   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
   \   00000080   102096E5           LDR      R2,[R6, #+16]
   \   00000084   ........           LDR      R1,??DataTable46  ;; percent_d
   \   00000088   0800A0E1           MOV      R0,R8
   \   0000008C   160000EF           SWI      +22
    623            Send_Message(jid, type, str, composing);
   \   00000090   0930A0E1           MOV      R3,R9
   \   00000094   0820A0E1           MOV      R2,R8
   \   00000098   0710A0E1           MOV      R1,R7
   \   0000009C   0400A0E1           MOV      R0,R4
   \   000000A0   ........           BL       Send_Message
    624          
    625            mfree(str);
   \   000000A4   0800A0E1           MOV      R0,R8
   \   000000A8   150000EF           SWI      +21
    626            mfree(mess);
   \   000000AC   0500A0E1           MOV      R0,R5
   \   000000B0   150000EF           SWI      +21
    627            m_num++;
   \   000000B4   100096E5           LDR      R0,[R6, #+16]
   \   000000B8   010080E2           ADD      R0,R0,#+1
   \   000000BC   100086E5           STR      R0,[R6, #+16]
    628          }
   \                     ??SendComposing_0:
   \   000000C0   14D08DE2           ADD      SP,SP,#+20       ;; stack cleaning
   \   000000C4   F083BDE8           POP      {R4-R9,PC}       ;; return
   \                     ??SendComposing_1:
   \   000000C8   ........           DC32     `?<Constant "composing">_1`
   \   000000CC   ........           DC32     `?<Constant "xmlns">_7`
    629          
    630           // Context: HELPER

   \                                 In segment CODE, align 4, keep-with-next
    631          void CancelComposing(char* jid, IPC_MESSAGE_S *mess)
    632          {
   \                     CancelComposing:
   \   00000000   F0432DE9           PUSH     {R4-R9,LR}
   \   00000004   0040A0E1           MOV      R4,R0
    633            /*
    634            <message 
    635              from='juliet@capulet.com/balcony'
    636              to='romeo@shakespeare.lit/orchard'
    637              type='chat'>
    638            <thread>act2scene2chat1</thread>
    639            <active xmlns='http://jabber.org/protocol/chatstates'/>
    640          </message>
    641            */
    642            extern const int COMPOSING_EVENTS;
    643            if(!COMPOSING_EVENTS)return;
   \   00000008   ........           LDR      R0,??DataTable48  ;; COMPOSING_EVENTS
   \   0000000C   10D04DE2           SUB      SP,SP,#+16
   \   00000010   000090E5           LDR      R0,[R0, #+0]
   \   00000014   0150A0E1           MOV      R5,R1
   \   00000018   000050E3           CMP      R0,#+0
   \   0000001C   FF83BD08           POPEQ    {R0-R9,PC}
    644            char *type;
    645            if(mess->IsGroupChat)
   \   00000020   0000D5E5           LDRB     R0,[R5, #+0]
    646            {
    647               type = MSGSTR_GCHAT;
    648            }else type = MSGSTR_CHAT;
    649            XMLNode *active;
    650            char active_t[]="active";
   \   00000024   98109FE5           LDR      R1,??CancelComposing_0  ;; `?<Constant "active">_2`
   \   00000028   000050E3           CMP      R0,#+0
   \   0000002C   0C0091E8           LDM      R1,{R2,R3}
   \   00000030   ........           LDR      R6,??DataTable44  ;; `?<Constant "x">_1`
    651            char xmlns_t[]="xmlns";
   \   00000034   8C109FE5           LDR      R1,??CancelComposing_0+0x4  ;; `?<Constant "xmlns">_8`
   \   00000038   0D00A0E1           MOV      R0,SP
   \   0000003C   0C0080E8           STM      R0,{R2,R3}
   \   00000040   0C0091E8           LDM      R1,{R2,R3}
   \   00000044   08008DE2           ADD      R0,SP,#+8
   \   00000048   0C0080E8           STM      R0,{R2,R3}
   \   0000004C   5D7F8612           ADDNE    R7,R6,#+372
   \   00000050   58708602           ADDEQ    R7,R6,#+88
    652            char *str=malloc(256);
   \   00000054   400FA0E3           MOV      R0,#+256
   \   00000058   140000EF           SWI      +20
   \   0000005C   0080A0E1           MOV      R8,R0
    653            extern const char percent_d[];
    654            active = XML_CreateNode(active_t, NULL);
   \   00000060   0010A0E3           MOV      R1,#+0
   \   00000064   0D00A0E1           MOV      R0,SP
   \   00000068   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
    655            XML_Set_Attr_Value(active, xmlns_t, XMLNS_CHATSTATES);
   \   0000006C   652F86E2           ADD      R2,R6,#+404
    656            sprintf(str, percent_d, m_num);
   \   00000070   ........           LDR      R6,??DataTable38  ;; intimes
   \   00000074   0090A0E1           MOV      R9,R0
   \   00000078   08108DE2           ADD      R1,SP,#+8
   \   0000007C   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
   \   00000080   102096E5           LDR      R2,[R6, #+16]
   \   00000084   ........           LDR      R1,??DataTable46  ;; percent_d
   \   00000088   0800A0E1           MOV      R0,R8
   \   0000008C   160000EF           SWI      +22
    657            Send_Message(jid, type, str, active);
   \   00000090   0930A0E1           MOV      R3,R9
   \   00000094   0820A0E1           MOV      R2,R8
   \   00000098   0710A0E1           MOV      R1,R7
   \   0000009C   0400A0E1           MOV      R0,R4
   \   000000A0   ........           BL       Send_Message
    658          
    659            mfree(str);
   \   000000A4   0800A0E1           MOV      R0,R8
   \   000000A8   150000EF           SWI      +21
    660            mfree(mess);
   \   000000AC   0500A0E1           MOV      R0,R5
   \   000000B0   150000EF           SWI      +21
    661            m_num++;
   \   000000B4   100096E5           LDR      R0,[R6, #+16]
   \   000000B8   010080E2           ADD      R0,R0,#+1
   \   000000BC   100086E5           STR      R0,[R6, #+16]
    662          }
   \   000000C0   FF83BDE8           POP      {R0-R9,PC}       ;; return
   \                     ??CancelComposing_0:
   \   000000C4   ........           DC32     `?<Constant "active">_2`
   \   000000C8   ........           DC32     `?<Constant "xmlns">_8`
    663          
    664          // Context: HELPER

   \                                 In segment CODE, align 4, keep-with-next
    665          void Report_VersionInfo(char* id, char *to)
    666          {
   \                     Report_VersionInfo:
   \   00000000   F34F2DE9           PUSH     {R0,R1,R4-R11,LR}
   \   00000004   57DF4DE2           SUB      SP,SP,#+348
    667            char answer[200];
    668            char *ph_model = Get_Phone_Info(PI_MODEL);
    669            char *ph_sw = Get_Phone_Info(PI_SW_NUMBER);
    670            XMLNode *xml_name=NULL, *xml_version, *xml_os;
    671            char name_t[]="name";
    672            char version_t[]="version";
    673            char os_t[]="os";
    674            
    675            strcpy(answer, VERSION_NAME);
    676            xml_name = XML_CreateNode(name_t, answer);
    677            
    678            sprintf(answer, "%s-r%d (%s)", VERSION_VERS, __SVN_REVISION__, CMP_DATE);
   \   00000008   ........           LDR      R7,??DataTable44  ;; `?<Constant "x">_1`
    679            xml_version = XML_CreateNode(version_t, answer);
    680            
    681            // Не будем издеваться над Костиным сервером)
    682            #pragma swi_number=0x41
    683            __swi __arm char GetProvider(WSHDR* name, int unk_1);
    684          
    685            #pragma swi_number=0x2C2
    686            __swi __arm int GetSubprovider(WSHDR* ws);
    687            
    688            // Аццкий процент не экранируется
    689            #define percent "%"
    690            
    691            if(EXT_VERSION_INFO)
   \   0000000C   CC919FE5           LDR      R9,??Report_VersionInfo_0+0x4  ;; OS
   \   00000010   0900A0E3           MOV      R0,#+9
   \   00000014   D50100EF           SWI      +469
   \   00000018   0040A0E1           MOV      R4,R0
   \   0000001C   0700A0E3           MOV      R0,#+7
   \   00000020   D50100EF           SWI      +469
   \   00000024   B8119FE5           LDR      R1,??Report_VersionInfo_0+0x8  ;; `?<Constant "name">_1`
   \   00000028   0050A0E1           MOV      R5,R0
   \   0000002C   0C0091E8           LDM      R1,{R2,R3}
   \   00000030   B0119FE5           LDR      R1,??Report_VersionInfo_0+0xC  ;; `?<Constant "version">_1`
   \   00000034   04008DE2           ADD      R0,SP,#+4
   \   00000038   0C0080E8           STM      R0,{R2,R3}
   \   0000003C   0C0091E8           LDM      R1,{R2,R3}
   \   00000040   A4119FE5           LDR      R1,??Report_VersionInfo_0+0x10  ;; `?<Constant "os">`
   \   00000044   0C008DE2           ADD      R0,SP,#+12
   \   00000048   0C0080E8           STM      R0,{R2,R3}
   \   0000004C   0020D1E5           LDRB     R2,[R1, #0]
   \   00000050   0D00A0E1           MOV      R0,SP
   \   00000054   0020C0E5           STRB     R2,[R0, #+0]
   \   00000058   0120D1E5           LDRB     R2,[R1, #+1]
   \   0000005C   0120C0E5           STRB     R2,[R0, #+1]
   \   00000060   0220D1E5           LDRB     R2,[R1, #+2]
   \   00000064   ........           LDR      R1,??DataTable41  ;; VERSION_NAME
   \   00000068   0220C0E5           STRB     R2,[R0, #+2]
   \   0000006C   14008DE2           ADD      R0,SP,#+20
   \   00000070   1A0000EF           SWI      +26
   \   00000074   14108DE2           ADD      R1,SP,#+20
   \   00000078   04008DE2           ADD      R0,SP,#+4
   \   0000007C   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   00000080   ........           LDR      R2,??DataTable42  ;; VERSION_VERS
   \   00000084   0060A0E1           MOV      R6,R0
   \   00000088   60019FE5           LDR      R0,??Report_VersionInfo_0+0x14  ;; CMP_DATE
   \   0000008C   BE30A0E3           MOV      R3,#+190
   \   00000090   01002DE9           PUSH     {R0}
   \   00000094   B03E83E3           ORR      R3,R3,#0xB00
   \   00000098   751F87E2           ADD      R1,R7,#+468
   \   0000009C   18008DE2           ADD      R0,SP,#+24
   \   000000A0   160000EF           SWI      +22
   \   000000A4   18108DE2           ADD      R1,SP,#+24
   \   000000A8   10008DE2           ADD      R0,SP,#+16
   \   000000AC   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   000000B0   0080A0E1           MOV      R8,R0
   \   000000B4   38019FE5           LDR      R0,??Report_VersionInfo_0+0x18  ;; EXT_VERSION_INFO
   \   000000B8   000090E5           LDR      R0,[R0, #+0]
   \   000000BC   04D08DE2           ADD      SP,SP,#+4
   \   000000C0   000050E3           CMP      R0,#+0
   \   000000C4   2A00000A           BEQ      ??Report_VersionInfo_1
    692            {
    693              WSHDR* prov = AllocWS(128);
   \   000000C8   8000A0E3           MOV      R0,#+128
   \   000000CC   250100EF           SWI      +293
   \   000000D0   00A0A0E1           MOV      R10,R0
    694          #ifdef NEWSGOLD
    695              GetSubprovider(prov);
   \   000000D4   C20200EF           SWI      +706
    696              if(!prov->wsbody[0]) GetProvider(prov, 1);
   \   000000D8   00009AE5           LDR      R0,[R10, #+0]
   \   000000DC   B000D0E1           LDRH     R0,[R0, #+0]
   \   000000E0   000050E3           CMP      R0,#+0
   \   000000E4   0200001A           BNE      ??Report_VersionInfo_2
   \   000000E8   0110A0E3           MOV      R1,#+1
   \   000000EC   0A00A0E1           MOV      R0,R10
   \   000000F0   410000EF           SWI      +65
    697          #else
    698              GetProvider(prov, 1);
    699          #endif
    700              char provider[128];
    701              ws_2str(prov, provider, 128);
   \                     ??Report_VersionInfo_2:
   \   000000F4   8020A0E3           MOV      R2,#+128
   \   000000F8   DC108DE2           ADD      R1,SP,#+220
   \   000000FC   0A00A0E1           MOV      R0,R10
   \   00000100   A30000EF           SWI      +163
    702              FreeWS(prov);
   \   00000104   0A00A0E1           MOV      R0,R10
   \   00000108   290100EF           SWI      +297
    703              RAMNET *net_data = RamNet();
   \   0000010C   CA8000EF           SWI      +32970
   \   00000110   00A0A0E1           MOV      R10,R0
    704              sprintf(answer, "SIE-%s/%s %s (%s:%ddB BAT:%d%s RAM:%dKb)", ph_model, ph_sw, OS, provider, net_data->power, *RamCap(), percent, GetFreeRamAvail()/1000);
   \   00000114   5F0000EF           SWI      +95
   \   00000118   00B0A0E1           MOV      R11,R0
   \   0000011C   C88000EF           SWI      +32968
   \   00000120   D0109FE5           LDR      R1,??Report_VersionInfo_0+0x1C  ;; 0x10624dd3
   \   00000124   912BC3E0           SMULL    R2,R3,R1,R11
   \   00000128   0420A0E1           MOV      R2,R4
   \   0000012C   4333A0E1           ASR      R3,R3,#+6
   \   00000130   AB1F83E0           ADD      R1,R3,R11, LSR #+31
   \   00000134   02002DE9           PUSH     {R1}
   \   00000138   0530A0E1           MOV      R3,R5
   \   0000013C   261F8FE2           ADR      R1,??Report_VersionInfo_0  ;; "%"
   \   00000140   02002DE9           PUSH     {R1}
   \   00000144   B000D0E1           LDRH     R0,[R0, #+0]
   \   00000148   781F87E2           ADD      R1,R7,#+480
   \   0000014C   01002DE9           PUSH     {R0}
   \   00000150   0600DAE5           LDRB     R0,[R10, #+6]
   \   00000154   01002DE9           PUSH     {R0}
   \   00000158   EC008DE2           ADD      R0,SP,#+236
   \   0000015C   01002DE9           PUSH     {R0}
   \   00000160   00022DE9           PUSH     {R9}
   \   00000164   2C008DE2           ADD      R0,SP,#+44
   \   00000168   160000EF           SWI      +22
   \   0000016C   18D08DE2           ADD      SP,SP,#+24
   \   00000170   080000EA           B        ??Report_VersionInfo_3
    705            }
    706            else sprintf(answer, "SIE-%s/%s %s%s", ph_model, ph_sw, OS, OS_postfix);
   \                     ??Report_VersionInfo_1:
   \   00000174   80009FE5           LDR      R0,??Report_VersionInfo_0+0x20  ;; OS_postfix
   \   00000178   0530A0E1           MOV      R3,R5
   \   0000017C   01002DE9           PUSH     {R0}
   \   00000180   00022DE9           PUSH     {R9}
   \   00000184   0420A0E1           MOV      R2,R4
   \   00000188   831F87E2           ADD      R1,R7,#+524
   \   0000018C   1C008DE2           ADD      R0,SP,#+28
   \   00000190   160000EF           SWI      +22
   \   00000194   08D08DE2           ADD      SP,SP,#+8
    707            
    708            
    709            xml_os = XML_CreateNode(os_t, answer);
    710            xml_version->next = xml_os;
   \                     ??Report_VersionInfo_3:
   \   00000198   14108DE2           ADD      R1,SP,#+20
   \   0000019C   0D00A0E1           MOV      R0,SP
   \   000001A0   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   000001A4   000088E5           STR      R0,[R8, #+0]
    711            xml_name->next = xml_version;
   \   000001A8   008086E5           STR      R8,[R6, #+0]
    712            SendIq(to, IQTYPE_RES, id, IQ_VERSION, xml_name);
   \   000001AC   40002DE9           PUSH     {R6}
   \   000001B0   60219DE5           LDR      R2,[SP, #+352]
   \   000001B4   64019DE5           LDR      R0,[SP, #+356]
   \   000001B8   4B3F87E2           ADD      R3,R7,#+300
   \   000001BC   871F87E2           ADD      R1,R7,#+540
   \   000001C0   ........           BL       SendIq
    713          
    714            mfree(id);
   \   000001C4   60019DE5           LDR      R0,[SP, #+352]
   \   000001C8   150000EF           SWI      +21
    715            mfree(to);
   \   000001CC   64019DE5           LDR      R0,[SP, #+356]
   \   000001D0   150000EF           SWI      +21
    716          }
   \   000001D4   5ADF8DE2           ADD      SP,SP,#+360
   \   000001D8   F08FBDE8           POP      {R4-R11,PC}      ;; return
   \                     ??Report_VersionInfo_0:
   \   000001DC   25000000           DC8      "%",+0,+0
   \   000001E0   ........           DC32     OS
   \   000001E4   ........           DC32     `?<Constant "name">_1`
   \   000001E8   ........           DC32     `?<Constant "version">_1`
   \   000001EC   ........           DC32     `?<Constant "os">`
   \   000001F0   ........           DC32     CMP_DATE
   \   000001F4   ........           DC32     EXT_VERSION_INFO
   \   000001F8   D34D6210           DC32     0x10624dd3
   \   000001FC   ........           DC32     OS_postfix
    717          

   \                                 In segment CODE, align 4, keep-with-next
    718          void Report_TimeInfo(char* id, char *to)
    719          {
   \                     Report_TimeInfo:
   \   00000000   F0432DE9           PUSH     {R4-R9,LR}
   \   00000004   ECD04DE2           SUB      SP,SP,#+236
   \   00000008   0040A0E1           MOV      R4,R0
   \   0000000C   0150A0E1           MOV      R5,R1
    720          /*
    721            <utc>20070910T17:58:35</utc>
    722            <tz>MDT</tz>
    723            <display>Tue Sep 10 15:58:35 2007</display>");
    724          */
    725            char answer[200];
    726            TTime reqt;
    727            TDate reqd;
    728            GetDateTime(&reqd, &reqt);
   \   00000010   0D10A0E1           MOV      R1,SP
   \   00000014   08008DE2           ADD      R0,SP,#+8
   \   00000018   B40000EF           SWI      +180
    729            int total=GetTimeZoneShift(&reqd, &reqt, RamDateTimeSettings()->timeZone);
   \   0000001C   2F8200EF           SWI      +33327
   \   00000020   0320D0E5           LDRB     R2,[R0, #+3]
   \   00000024   0D10A0E1           MOV      R1,SP
   \   00000028   08008DE2           ADD      R0,SP,#+8
   \   0000002C   300200EF           SWI      +560
    730            int hour=0;
    731            char znak[]="+";
   \   00000030   68119FE5           LDR      R1,??Report_TimeInfo_0  ;; `?<Constant "+">`
   \   00000034   0060B0E1           MOVS     R6,R0
   \   00000038   0020D1E5           LDRB     R2,[R1, #0]
   \   0000003C   10008DE2           ADD      R0,SP,#+16
   \   00000040   0070A0E3           MOV      R7,#+0
   \   00000044   0020C0E5           STRB     R2,[R0, #+0]
   \   00000048   0120D1E5           LDRB     R2,[R1, #+1]
   \   0000004C   0120C0E5           STRB     R2,[R0, #+1]
    732            if (total<0)
   \   00000050   0500005A           BPL      ??Report_TimeInfo_1
    733            {
    734              total=total*(-1);
   \   00000054   006066E2           RSB      R6,R6,#+0
    735              znak[0]='-';
   \   00000058   2D10A0E3           MOV      R1,#+45
   \   0000005C   1010CDE5           STRB     R1,[SP, #+16]
   \   00000060   010000EA           B        ??Report_TimeInfo_1
    736            };
    737            while(total>59)
    738            {
    739              total=total-60;
   \                     ??Report_TimeInfo_2:
   \   00000064   3C6046E2           SUB      R6,R6,#+60
    740              hour++;
   \   00000068   017087E2           ADD      R7,R7,#+1
    741            };
   \                     ??Report_TimeInfo_1:
   \   0000006C   3C0056E3           CMP      R6,#+60
   \   00000070   FBFFFFAA           BGE      ??Report_TimeInfo_2
    742          
    743            XMLNode *xml_utc=NULL, *xml_tz, *xml_display;
    744            char utc_t[]="utc";
   \   00000074   28119FE5           LDR      R1,??Report_TimeInfo_0+0x4  ;; `?<Constant "utc">`
    745            char tz_t[]="tz";
    746            char display_t[]="display";
    747            
    748            sprintf(answer, "%04d%02d%02dT%02d:%02d:%02d", reqd.year,reqd.month,reqd.day,reqt.hour,reqt.min,reqt.sec);
   \   00000078   ........           LDR      R8,??DataTable44  ;; `?<Constant "x">_1`
   \   0000007C   002091E5           LDR      R2,[R1, #0]
   \   00000080   20119FE5           LDR      R1,??Report_TimeInfo_0+0x8  ;; `?<Constant "tz">`
   \   00000084   18008DE2           ADD      R0,SP,#+24
   \   00000088   002080E5           STR      R2,[R0, #+0]
   \   0000008C   0020D1E5           LDRB     R2,[R1, #0]
   \   00000090   14008DE2           ADD      R0,SP,#+20
   \   00000094   0020C0E5           STRB     R2,[R0, #+0]
   \   00000098   0120D1E5           LDRB     R2,[R1, #+1]
   \   0000009C   0120C0E5           STRB     R2,[R0, #+1]
   \   000000A0   0220D1E5           LDRB     R2,[R1, #+2]
   \   000000A4   00119FE5           LDR      R1,??Report_TimeInfo_0+0xC  ;; `?<Constant "display">_1`
   \   000000A8   0220C0E5           STRB     R2,[R0, #+2]
   \   000000AC   0C0091E8           LDM      R1,{R2,R3}
   \   000000B0   1C008DE2           ADD      R0,SP,#+28
   \   000000B4   0C0080E8           STM      R0,{R2,R3}
   \   000000B8   0200DDE5           LDRB     R0,[SP, #+2]
   \   000000BC   891F88E2           ADD      R1,R8,#+548
   \   000000C0   01002DE9           PUSH     {R0}
   \   000000C4   0500DDE5           LDRB     R0,[SP, #+5]
   \   000000C8   01002DE9           PUSH     {R0}
   \   000000CC   0800DDE5           LDRB     R0,[SP, #+8]
   \   000000D0   01002DE9           PUSH     {R0}
   \   000000D4   1900DDE5           LDRB     R0,[SP, #+25]
   \   000000D8   01002DE9           PUSH     {R0}
   \   000000DC   1C30DDE5           LDRB     R3,[SP, #+28]
   \   000000E0   18209DE5           LDR      R2,[SP, #+24]
   \   000000E4   34008DE2           ADD      R0,SP,#+52
   \   000000E8   160000EF           SWI      +22
    749            xml_utc = XML_CreateNode(utc_t, answer);
   \   000000EC   34108DE2           ADD      R1,SP,#+52
   \   000000F0   28008DE2           ADD      R0,SP,#+40
   \   000000F4   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
    750            
    751            sprintf(answer, "%s%02d:%02d",znak, hour, total);
   \   000000F8   40002DE9           PUSH     {R6}
   \   000000FC   0090A0E1           MOV      R9,R0
   \   00000100   0730A0E1           MOV      R3,R7
   \   00000104   24208DE2           ADD      R2,SP,#+36
   \   00000108   901F88E2           ADD      R1,R8,#+576
   \   0000010C   38008DE2           ADD      R0,SP,#+56
   \   00000110   160000EF           SWI      +22
    752            xml_tz = XML_CreateNode(tz_t, answer);
   \   00000114   38108DE2           ADD      R1,SP,#+56
   \   00000118   28008DE2           ADD      R0,SP,#+40
   \   0000011C   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   00000120   0060A0E1           MOV      R6,R0
    753          
    754            sprintf(answer, "%02d-%02d-%04d %02d:%02d:%02d",reqd.day,reqd.month,reqd.year,reqt.hour,reqt.min,reqt.sec);
   \   00000124   1600DDE5           LDRB     R0,[SP, #+22]
   \   00000128   931F88E2           ADD      R1,R8,#+588
   \   0000012C   01002DE9           PUSH     {R0}
   \   00000130   1900DDE5           LDRB     R0,[SP, #+25]
   \   00000134   01002DE9           PUSH     {R0}
   \   00000138   1C00DDE5           LDRB     R0,[SP, #+28]
   \   0000013C   01002DE9           PUSH     {R0}
   \   00000140   28009DE5           LDR      R0,[SP, #+40]
   \   00000144   01002DE9           PUSH     {R0}
   \   00000148   3030DDE5           LDRB     R3,[SP, #+48]
   \   0000014C   3120DDE5           LDRB     R2,[SP, #+49]
   \   00000150   48008DE2           ADD      R0,SP,#+72
   \   00000154   160000EF           SWI      +22
   \   00000158   24D08DE2           ADD      SP,SP,#+36
    755            xml_display = XML_CreateNode(display_t, answer);
    756            
    757            xml_utc->next = xml_display;
   \   0000015C   24108DE2           ADD      R1,SP,#+36
   \   00000160   1C008DE2           ADD      R0,SP,#+28
   \   00000164   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   00000168   000089E5           STR      R0,[R9, #+0]
    758            xml_tz->next = xml_utc;
   \   0000016C   009086E5           STR      R9,[R6, #+0]
    759            SendIq(to, IQTYPE_RES, id, IQ_TIME, xml_tz);  
   \   00000170   40002DE9           PUSH     {R6}
   \   00000174   473F88E2           ADD      R3,R8,#+284
   \   00000178   0420A0E1           MOV      R2,R4
   \   0000017C   871F88E2           ADD      R1,R8,#+540
   \   00000180   0500A0E1           MOV      R0,R5
   \   00000184   ........           BL       SendIq
    760            mfree(id);
   \   00000188   0400A0E1           MOV      R0,R4
   \   0000018C   150000EF           SWI      +21
    761            mfree(to);
   \   00000190   0500A0E1           MOV      R0,R5
   \   00000194   150000EF           SWI      +21
    762          };
   \   00000198   F0D08DE2           ADD      SP,SP,#+240
   \   0000019C   F083BDE8           POP      {R4-R9,PC}       ;; return
   \                     ??Report_TimeInfo_0:
   \   000001A0   ........           DC32     `?<Constant "+">`
   \   000001A4   ........           DC32     `?<Constant "utc">`
   \   000001A8   ........           DC32     `?<Constant "tz">`
   \   000001AC   ........           DC32     `?<Constant "display">_1`
    763          

   \                                 In segment CODE, align 4, keep-with-next
    764          void Report_IDLEInfo(char* id, char *to)
    765          {
   \                     Report_IDLEInfo:
   \   00000000   F0412DE9           PUSH     {R4-R8,LR}
    766          /*
    767             <iq from='' to='' id='' type=''>
    768              <query xmlns='jabber:iq:last' seconds=''/>
    769             </iq>
    770          */
    771            extern const char percent_d[];
    772            XMLNode *query;
    773            char xmlns_t[]="xmlns";
    774            char query_t[]="query";
    775            char seconds_t[]="seconds";
    776          
    777            query = XML_CreateNode(query_t, NULL);  
    778            XML_Set_Attr_Value(query, xmlns_t, IQ_IDLE);
   \   00000004   ........           LDR      R6,??DataTable44  ;; `?<Constant "x">_1`
   \   00000008   0140A0E1           MOV      R4,R1
   \   0000000C   C4109FE5           LDR      R1,??Report_IDLEInfo_0  ;; `?<Constant "xmlns">_9`
   \   00000010   18D04DE2           SUB      SP,SP,#+24
   \   00000014   0C0091E8           LDM      R1,{R2,R3}
   \   00000018   BC109FE5           LDR      R1,??Report_IDLEInfo_0+0x4  ;; `?<Constant "query">_2`
   \   0000001C   0080A0E1           MOV      R8,R0
   \   00000020   0D00A0E1           MOV      R0,SP
   \   00000024   0C0080E8           STM      R0,{R2,R3}
   \   00000028   0C0091E8           LDM      R1,{R2,R3}
   \   0000002C   AC109FE5           LDR      R1,??Report_IDLEInfo_0+0x8  ;; `?<Constant "seconds">_1`
   \   00000030   08008DE2           ADD      R0,SP,#+8
   \   00000034   0C0080E8           STM      R0,{R2,R3}
   \   00000038   0C0091E8           LDM      R1,{R2,R3}
   \   0000003C   10008DE2           ADD      R0,SP,#+16
   \   00000040   0C0080E8           STM      R0,{R2,R3}
   \   00000044   0010A0E3           MOV      R1,#+0
   \   00000048   08008DE2           ADD      R0,SP,#+8
   \   0000004C   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   00000050   0050A0E1           MOV      R5,R0
   \   00000054   432F86E2           ADD      R2,R6,#+268
   \   00000058   0D10A0E1           MOV      R1,SP
   \   0000005C   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    779            char* timestr=malloc(512);
   \   00000060   800FA0E3           MOV      R0,#+512
   \   00000064   140000EF           SWI      +20
   \   00000068   0070A0E1           MOV      R7,R0
    780            sprintf(timestr, percent_d, GetIDLETime(intimes, indates));
   \   0000006C   ........           LDR      R0,??DataTable45  ;; intimes
   \   00000070   082090E5           LDR      R2,[R0, #+8]
   \   00000074   0C3090E5           LDR      R3,[R0, #+12]
   \   00000078   030090E8           LDM      R0,{R0,R1}
   \   0000007C   ........           _BLF     GetIDLETime,??GetIDLETime??rA
   \   00000080   ........           LDR      R1,??DataTable46  ;; percent_d
   \   00000084   0020A0E1           MOV      R2,R0
   \   00000088   0700A0E1           MOV      R0,R7
   \   0000008C   160000EF           SWI      +22
    781          
    782            XML_Set_Attr_Value(query, seconds_t, timestr);
   \   00000090   0720A0E1           MOV      R2,R7
   \   00000094   10108DE2           ADD      R1,SP,#+16
   \   00000098   0500A0E1           MOV      R0,R5
   \   0000009C   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    783            mfree(timestr);
   \   000000A0   0700A0E1           MOV      R0,R7
   \   000000A4   150000EF           SWI      +21
    784            SendIq(to, IQTYPE_RES, id, NULL, query);
   \   000000A8   20002DE9           PUSH     {R5}
   \   000000AC   0030A0E3           MOV      R3,#+0
   \   000000B0   0820A0E1           MOV      R2,R8
   \   000000B4   871F86E2           ADD      R1,R6,#+540
   \   000000B8   0400A0E1           MOV      R0,R4
   \   000000BC   ........           BL       SendIq
    785          
    786            mfree(to);
   \   000000C0   0400A0E1           MOV      R0,R4
   \   000000C4   150000EF           SWI      +21
    787            mfree(id);
   \   000000C8   0800A0E1           MOV      R0,R8
   \   000000CC   150000EF           SWI      +21
    788          }
   \   000000D0   1CD08DE2           ADD      SP,SP,#+28
   \   000000D4   F081BDE8           POP      {R4-R8,PC}       ;; return
   \                     ??Report_IDLEInfo_0:
   \   000000D8   ........           DC32     `?<Constant "xmlns">_9`
   \   000000DC   ........           DC32     `?<Constant "query">_2`
   \   000000E0   ........           DC32     `?<Constant "seconds">_1`
    789          
    790          // Context: HELPER

   \                                 In segment CODE, align 4, keep-with-next
    791          void Report_DiscoInfo(char* id, char *to)
    792          {
   \                     Report_DiscoInfo:
   \   00000000   F0412DE9           PUSH     {R4-R8,LR}
   \   00000004   0150A0E1           MOV      R5,R1
    793            XMLNode *tmp, *out, *cur;
    794            char feature_t[]="feature";
   \   00000008   A0119FE5           LDR      R1,??Report_DiscoInfo_0  ;; `?<Constant "feature">`
   \   0000000C   60D04DE2           SUB      SP,SP,#+96
   \   00000010   0C0091E8           LDM      R1,{R2,R3}
    795            char var_t[]="var";
   \   00000014   98119FE5           LDR      R1,??Report_DiscoInfo_0+0x4  ;; `?<Constant "var">`
   \   00000018   0040A0E1           MOV      R4,R0
   \   0000001C   04008DE2           ADD      R0,SP,#+4
   \   00000020   0C0080E8           STM      R0,{R2,R3}
   \   00000024   002091E5           LDR      R2,[R1, #0]
    796            char identity_t[]="identity";
   \   00000028   88119FE5           LDR      R1,??Report_DiscoInfo_0+0x8  ;; `?<Constant "identity">`
   \   0000002C   0D00A0E1           MOV      R0,SP
   \   00000030   002080E5           STR      R2,[R0, #+0]
   \   00000034   4C0091E8           LDM      R1,{R2,R3,R6}
    797            char category_t[]="category";
   \   00000038   7C119FE5           LDR      R1,??Report_DiscoInfo_0+0xC  ;; `?<Constant "category">`
   \   0000003C   24008DE2           ADD      R0,SP,#+36
   \   00000040   4C0080E8           STM      R0,{R2,R3,R6}
   \   00000044   4C0091E8           LDM      R1,{R2,R3,R6}
    798            char type_t[]="type";
   \   00000048   70119FE5           LDR      R1,??Report_DiscoInfo_0+0x10  ;; `?<Constant "type">_4`
   \   0000004C   30008DE2           ADD      R0,SP,#+48
   \   00000050   4C0080E8           STM      R0,{R2,R3,R6}
   \   00000054   0C0091E8           LDM      R1,{R2,R3}
    799            char phone_t[]="phone";
   \   00000058   64119FE5           LDR      R1,??Report_DiscoInfo_0+0x14  ;; `?<Constant "phone">`
   \   0000005C   0C008DE2           ADD      R0,SP,#+12
   \   00000060   0C0080E8           STM      R0,{R2,R3}
   \   00000064   0C0091E8           LDM      R1,{R2,R3}
    800            char client_t[]="client";
   \   00000068   58119FE5           LDR      R1,??Report_DiscoInfo_0+0x18  ;; `?<Constant "client">`
   \   0000006C   14008DE2           ADD      R0,SP,#+20
   \   00000070   0C0080E8           STM      R0,{R2,R3}
   \   00000074   0C0091E8           LDM      R1,{R2,R3}
   \   00000078   1C008DE2           ADD      R0,SP,#+28
   \   0000007C   0C0080E8           STM      R0,{R2,R3}
    801            cur = XML_CreateNode(identity_t, NULL);
   \   00000080   0010A0E3           MOV      R1,#+0
   \   00000084   24008DE2           ADD      R0,SP,#+36
   \   00000088   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   0000008C   0080A0E1           MOV      R8,R0
    802            XML_Set_Attr_Value(cur, category_t, client_t);
   \   00000090   1C208DE2           ADD      R2,SP,#+28
   \   00000094   30108DE2           ADD      R1,SP,#+48
   \   00000098   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    803            XML_Set_Attr_Value(cur, type_t, phone_t);
   \   0000009C   14208DE2           ADD      R2,SP,#+20
   \   000000A0   0C108DE2           ADD      R1,SP,#+12
   \   000000A4   0800A0E1           MOV      R0,R8
   \   000000A8   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    804            out = cur;
    805          
    806            char *FeaturesList[9]={
    807            DISCO_INFO,
    808            IQ_VERSION,
    809            XMLNS_MUC,
    810            IQ_TIME,
    811            IQ_IDLE,
    812            JABBER_URN_PING,
    813            JABBER_XMPP_RECEIPTS,
    814            JABBER_URN_ATTENTION,
    815            XMLNS_CHATSTATES};
   \   000000AC   18119FE5           LDR      R1,??Report_DiscoInfo_0+0x1C  ;; `?<Constant {&"http://jabber.org/pro...", &"jab`
   \   000000B0   0860A0E1           MOV      R6,R8
   \   000000B4   8C11B1E8           LDM      R1!,{R2,R3,R7,R8,R12}
   \   000000B8   3C008DE2           ADD      R0,SP,#+60
   \   000000BC   8C11A0E8           STM      R0!,{R2,R3,R7,R8,R12}
   \   000000C0   8C0191E8           LDM      R1,{R2,R3,R7,R8}
   \   000000C4   8C0180E8           STM      R0,{R2,R3,R7,R8}
    816            
    817            int featurescount;
    818            for(featurescount=0; featurescount<10; featurescount++)
   \   000000C8   0070A0E3           MOV      R7,#+0
   \   000000CC   0F0000EA           B        ??Report_DiscoInfo_1
    819            {
    820            if ((featurescount<6)||(featurescount==6 && DELIVERY_EVENTS)
    821            ||(featurescount==7 && USE_ATTENTION)||(featurescount==8 && COMPOSING_EVENTS))
   \                     ??Report_DiscoInfo_2:
   \   000000D0   060057E3           CMP      R7,#+6
   \   000000D4   0D0000BA           BLT      ??Report_DiscoInfo_1
   \   000000D8   0400001A           BNE      ??Report_DiscoInfo_3
   \   000000DC   ........           LDR      R0,??DataTable47  ;; DELIVERY_EVENTS
   \   000000E0   000090E5           LDR      R0,[R0, #+0]
   \   000000E4   000050E3           CMP      R0,#+0
   \   000000E8   0800001A           BNE      ??Report_DiscoInfo_1
   \   000000EC   1F0000EA           B        ??Report_DiscoInfo_4
   \                     ??Report_DiscoInfo_3:
   \   000000F0   070057E3           CMP      R7,#+7
   \   000000F4   1900000A           BEQ      ??Report_DiscoInfo_5
   \   000000F8   080057E3           CMP      R7,#+8
   \   000000FC   1B00001A           BNE      ??Report_DiscoInfo_4
   \   00000100   ........           LDR      R0,??DataTable48  ;; COMPOSING_EVENTS
   \   00000104   000090E5           LDR      R0,[R0, #+0]
   \   00000108   000050E3           CMP      R0,#+0
   \   0000010C   1700000A           BEQ      ??Report_DiscoInfo_4
    822             {
    823              cur = XML_CreateNode(feature_t, NULL);
   \                     ??Report_DiscoInfo_1:
   \   00000110   0010A0E3           MOV      R1,#+0
   \   00000114   04008DE2           ADD      R0,SP,#+4
   \   00000118   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   0000011C   0080A0E1           MOV      R8,R0
    824              XML_Set_Attr_Value(cur, var_t, FeaturesList[featurescount]);
   \   00000120   3C008DE2           ADD      R0,SP,#+60
   \   00000124   072190E7           LDR      R2,[R0, +R7, LSL #+2]
   \   00000128   0D10A0E1           MOV      R1,SP
   \   0000012C   0800A0E1           MOV      R0,R8
   \   00000130   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    825                tmp=out;
   \   00000134   0600B0E1           MOVS     R0,R6
    826                if(tmp)
   \   00000138   0400000A           BEQ      ??Report_DiscoInfo_6
   \   0000013C   000000EA           B        ??Report_DiscoInfo_7
    827                  while(tmp->next)tmp = tmp->next;
   \                     ??Report_DiscoInfo_8:
   \   00000140   0100A0E1           MOV      R0,R1
   \                     ??Report_DiscoInfo_7:
   \   00000144   001090E5           LDR      R1,[R0, #+0]
   \   00000148   000051E3           CMP      R1,#+0
   \   0000014C   FBFFFF1A           BNE      ??Report_DiscoInfo_8
    828                if(tmp)
   \                     ??Report_DiscoInfo_6:
   \   00000150   000050E3           CMP      R0,#+0
   \   00000154   0860A001           MOVEQ    R6,R8
    829                {
    830                  tmp->next = cur;
   \   00000158   00808015           STRNE    R8,[R0, #+0]
   \   0000015C   030000EA           B        ??Report_DiscoInfo_4
    831                }
    832                else out = cur;
    833             }
   \                     ??Report_DiscoInfo_5:
   \   00000160   ........           LDR      R0,??DataTable49  ;; USE_ATTENTION
   \   00000164   000090E5           LDR      R0,[R0, #+0]
   \   00000168   000050E3           CMP      R0,#+0
   \   0000016C   E7FFFF1A           BNE      ??Report_DiscoInfo_1
    834            }
   \                     ??Report_DiscoInfo_4:
   \   00000170   017087E2           ADD      R7,R7,#+1
   \   00000174   0A0057E3           CMP      R7,#+10
   \   00000178   D4FFFFBA           BLT      ??Report_DiscoInfo_2
    835            SendIq(to, IQTYPE_RES, id, DISCO_INFO, out);
   \   0000017C   ........           LDR      R0,??DataTable62  ;; `?<Constant "x">_1`
   \   00000180   40002DE9           PUSH     {R6}
   \   00000184   C43080E2           ADD      R3,R0,#+196
   \   00000188   0420A0E1           MOV      R2,R4
   \   0000018C   871F80E2           ADD      R1,R0,#+540
   \   00000190   0500A0E1           MOV      R0,R5
   \   00000194   ........           BL       SendIq
    836            mfree(id);
   \   00000198   0400A0E1           MOV      R0,R4
   \   0000019C   150000EF           SWI      +21
    837            mfree(to);
   \   000001A0   0500A0E1           MOV      R0,R5
   \   000001A4   150000EF           SWI      +21
    838          }
   \   000001A8   64D08DE2           ADD      SP,SP,#+100
   \   000001AC   F081BDE8           POP      {R4-R8,PC}       ;; return
   \                     ??Report_DiscoInfo_0:
   \   000001B0   ........           DC32     `?<Constant "feature">`
   \   000001B4   ........           DC32     `?<Constant "var">`
   \   000001B8   ........           DC32     `?<Constant "identity">`
   \   000001BC   ........           DC32     `?<Constant "category">`
   \   000001C0   ........           DC32     `?<Constant "type">_4`
   \   000001C4   ........           DC32     `?<Constant "phone">`
   \   000001C8   ........           DC32     `?<Constant "client">`
   \   000001CC   ........           DC32     `?<Constant {&"http://jabber.org/pro...", &"jab`
    839          

   \                                 In segment CODE, align 4, keep-with-next
    840          void Report_PING(char* id, char *to)
    841          {
   \                     Report_PING:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
    842          /*
    843            <iq from='juliet@capulet.lit/balcony' to='capulet.lit' id='s2c1' type='result'/>
    844          */
    845            SendIq(to, IQTYPE_RES, id, NULL, NULL);
   \   00000004   0030A0E3           MOV      R3,#+0
   \   00000008   0040A0E1           MOV      R4,R0
   \   0000000C   0000A0E3           MOV      R0,#+0
   \   00000010   01002DE9           PUSH     {R0}
   \   00000014   0150A0E1           MOV      R5,R1
   \   00000018   1C109FE5           LDR      R1,??Report_PING_0  ;; `?<Constant "x">_1` + 540
   \   0000001C   0420A0E1           MOV      R2,R4
   \   00000020   0500A0E1           MOV      R0,R5
   \   00000024   ........           BL       SendIq
    846            mfree(to);
   \   00000028   0500A0E1           MOV      R0,R5
   \   0000002C   150000EF           SWI      +21
    847            mfree(id);
   \   00000030   0400A0E1           MOV      R0,R4
   \   00000034   150000EF           SWI      +21
    848          }
   \   00000038   3180BDE8           POP      {R0,R4,R5,PC}    ;; return
   \                     ??Report_PING_0:
   \   0000003C   ........           DC32     `?<Constant "x">_1` + 540
    849          

   \                                 In segment CODE, align 4, keep-with-next
    850          JABBER_SUBSCRIPTION GetSubscrType(char* subs)
    851          {
   \                     GetSubscrType:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   \   00000004   0040B0E1           MOVS     R4,R0
    852            if(!subs)return SUB_NONE;
   \   00000008   1600000A           BEQ      ??GetSubscrType_0
    853            if(!strcmp(subs,"none"))return SUB_NONE;
   \   0000000C   ........           LDR      R5,??DataTable62  ;; `?<Constant "x">_1`
   \   00000010   741085E2           ADD      R1,R5,#+116
   \   00000014   190000EF           SWI      +25
   \   00000018   000050E3           CMP      R0,#+0
   \   0000001C   3080BD08           POPEQ    {R4,R5,PC}
    854            if(!strcmp(subs,"both"))return SUB_BOTH;
   \   00000020   9B1F85E2           ADD      R1,R5,#+620
   \   00000024   0400A0E1           MOV      R0,R4
   \   00000028   190000EF           SWI      +25
   \   0000002C   000050E3           CMP      R0,#+0
   \   00000030   0300A003           MOVEQ    R0,#+3
   \   00000034   3080BD08           POPEQ    {R4,R5,PC}
    855            if(!strcmp(subs,"to"))return SUB_TO;
   \   00000038   0C1F8FE2           ADR      R1,??GetSubscrType_1  ;; "to"
   \   0000003C   0400A0E1           MOV      R0,R4
   \   00000040   190000EF           SWI      +25
   \   00000044   000050E3           CMP      R0,#+0
   \   00000048   0100A003           MOVEQ    R0,#+1
   \   0000004C   3080BD08           POPEQ    {R4,R5,PC}
    856            if(!strcmp(subs,"from"))return SUB_FROM;
   \   00000050   9D1F85E2           ADD      R1,R5,#+628
   \   00000054   0400A0E1           MOV      R0,R4
   \   00000058   190000EF           SWI      +25
   \   0000005C   000050E3           CMP      R0,#+0
   \   00000060   0200A003           MOVEQ    R0,#+2
   \   00000064   3080BD08           POPEQ    {R4,R5,PC}
    857          
    858            return SUB_NONE;
   \                     ??GetSubscrType_0:
   \   00000068   0000A0E3           MOV      R0,#+0
   \   0000006C   3080BDE8           POP      {R4,R5,PC}       ;; return
   \                     ??GetSubscrType_1:
   \   00000070   746F0000           DC8      "to",+0
    859          }
    860          

   \                                 In segment CODE, align 4, keep-with-next
    861          char* Get_Resource_Name_By_FullJID(char* full_jid)
    862          {
   \                     Get_Resource_Name_By_FullJID:
   \   00000000   00402DE9           PUSH     {LR}
    863            char* pre_res = strstr(full_jid, "/");
   \   00000004   041F8FE2           ADR      R1,??Get_Resource_Name_By_FullJID_0  ;; "/"
   \   00000008   180100EF           SWI      +280
    864            char* res_name = pre_res==NULL ? NULL : pre_res +1;
   \   0000000C   000050E3           CMP      R0,#+0
   \   00000010   0080BD08           POPEQ    {PC}
   \   00000014   010080E2           ADD      R0,R0,#+1
    865            return res_name;
   \   00000018   0080BDE8           POP      {PC}             ;; return
   \                     ??Get_Resource_Name_By_FullJID_0:
   \   0000001C   2F000000           DC8      "/",+0,+0
    866          }
    867          
    868          //Context: HELPER

   \                                 In segment CODE, align 4, keep-with-next
    869          void Send_Initial_Presence_Helper()
    870          {
   \                     Send_Initial_Presence_Helper:
   \   00000000   F0412DE9           PUSH     {R4-R8,LR}
    871            PRESENCE_INFO *pr_info = malloc(sizeof(PRESENCE_INFO));
    872            pr_info->priority = OnlineInfo.priority;
   \   00000004   ........           LDR      R5,??DataTable52  ;; OnlineInfo
   \   00000008   0800A0E3           MOV      R0,#+8
    873            pr_info->status=OnlineInfo.status;
    874            int len;
    875            if(OnlineInfo.txt)
   \   0000000C   0060A0E3           MOV      R6,#+0
   \   00000010   140000EF           SWI      +20
   \   00000014   0040A0E1           MOV      R4,R0
   \   00000018   F200D5E1           LDRSH    R0,[R5, #+2]
   \   0000001C   B000C4E1           STRH     R0,[R4, #+0]
   \   00000020   0000D5E5           LDRB     R0,[R5, #+0]
   \   00000024   0200C4E5           STRB     R0,[R4, #+2]
   \   00000028   040095E5           LDR      R0,[R5, #+4]
   \   0000002C   000050E3           CMP      R0,#+0
   \   00000030   0A00000A           BEQ      ??Send_Initial_Presence_Helper_0
    876            {
    877            if(len = strlen(OnlineInfo.txt))
   \   00000034   1B0000EF           SWI      +27
   \   00000038   0070B0E1           MOVS     R7,R0
   \   0000003C   0800000A           BEQ      ??Send_Initial_Presence_Helper_1
    878            {
    879            char *msg = malloc(len+1);
   \   00000040   010087E2           ADD      R0,R7,#+1
   \   00000044   140000EF           SWI      +20
    880            strcpy(msg, OnlineInfo.txt);
   \   00000048   041095E5           LDR      R1,[R5, #+4]
   \   0000004C   0080A0E1           MOV      R8,R0
   \   00000050   1A0000EF           SWI      +26
    881            msg[len]='\0';
   \   00000054   0860C7E7           STRB     R6,[R7, +R8]
    882            pr_info->message =msg;
   \   00000058   048084E5           STR      R8,[R4, #+4]
   \   0000005C   000000EA           B        ??Send_Initial_Presence_Helper_1
    883              //mfree(msg);
    884            }
    885            }else
    886            pr_info->message = NULL;
   \                     ??Send_Initial_Presence_Helper_0:
   \   00000060   046084E5           STR      R6,[R4, #+4]
    887            Send_Presence(pr_info);
   \                     ??Send_Initial_Presence_Helper_1:
   \   00000064   0400A0E1           MOV      R0,R4
   \   00000068   ........           BL       Send_Presence
    888          
    889            Jabber_state = JS_ONLINE;
   \   0000006C   ........           LDR      R0,??DataTable53  ;; Jabber_state
   \   00000070   0C10A0E3           MOV      R1,#+12
   \   00000074   0010C0E5           STRB     R1,[R0, #+0]
    890          }
   \   00000078   F081BDE8           POP      {R4-R8,PC}       ;; return
    891          
    892          //Context: HELPER

   \                                 In segment CODE, align 4, keep-with-next
    893          void _enterconference(MUC_ENTER_PARAM *param)
    894          {
   \                     _enterconference:
   \   00000000   F0412DE9           PUSH     {R4-R8,LR}
   \   00000004   3CD04DE2           SUB      SP,SP,#+60
   \   00000008   0040A0E1           MOV      R4,R0
    895            char *tmp_str = malloc(256);
   \   0000000C   400FA0E3           MOV      R0,#+256
   \   00000010   140000EF           SWI      +20
    896            XMLNode *history, *xml_x, *password, *show, *status;
    897            char history_t[]="history";
   \   00000014   B8119FE5           LDR      R1,??_enterconference_0  ;; `?<Constant "history">`
   \   00000018   0050A0E1           MOV      R5,R0
   \   0000001C   0C0091E8           LDM      R1,{R2,R3}
    898            char show_t[]="show";
   \   00000020   B0119FE5           LDR      R1,??_enterconference_0+0x4  ;; `?<Constant "show">_2`
   \   00000024   04008DE2           ADD      R0,SP,#+4
   \   00000028   0C0080E8           STM      R0,{R2,R3}
   \   0000002C   0C0091E8           LDM      R1,{R2,R3}
    899            char status_t[]="status";
   \   00000030   A4119FE5           LDR      R1,??_enterconference_0+0x8  ;; `?<Constant "status">_2`
   \   00000034   0C008DE2           ADD      R0,SP,#+12
   \   00000038   0C0080E8           STM      R0,{R2,R3}
   \   0000003C   0C0091E8           LDM      R1,{R2,R3}
    900            char password_t[]="password";
   \   00000040   98119FE5           LDR      R1,??_enterconference_0+0xC  ;; `?<Constant "password">_1`
   \   00000044   14008DE2           ADD      R0,SP,#+20
   \   00000048   0C0080E8           STM      R0,{R2,R3}
   \   0000004C   4C0091E8           LDM      R1,{R2,R3,R6}
    901            char x_t[]="x";
   \   00000050   8C119FE5           LDR      R1,??_enterconference_0+0x10  ;; `?<Constant "x">_2`
   \   00000054   24008DE2           ADD      R0,SP,#+36
   \   00000058   4C0080E8           STM      R0,{R2,R3,R6}
   \   0000005C   0020D1E5           LDRB     R2,[R1, #0]
   \   00000060   0D00A0E1           MOV      R0,SP
   \   00000064   0020C0E5           STRB     R2,[R0, #+0]
   \   00000068   0120D1E5           LDRB     R2,[R1, #+1]
    902            char xmlns_t[]="xmlns";
   \   0000006C   74119FE5           LDR      R1,??_enterconference_0+0x14  ;; `?<Constant "xmlns">_10`
   \   00000070   0120C0E5           STRB     R2,[R0, #+1]
   \   00000074   0C0091E8           LDM      R1,{R2,R3}
    903            char maxstanzas_t[]="maxstanzas";
   \   00000078   6C119FE5           LDR      R1,??_enterconference_0+0x18  ;; `?<Constant "maxstanzas">`
   \   0000007C   1C008DE2           ADD      R0,SP,#+28
   \   00000080   0C0080E8           STM      R0,{R2,R3}
   \   00000084   4C0091E8           LDM      R1,{R2,R3,R6}
    904            extern const char percent_d[];
    905            char slash_t[]="/";
   \   00000088   60119FE5           LDR      R1,??_enterconference_0+0x1C  ;; `?<Constant "/">_1`
   \   0000008C   30008DE2           ADD      R0,SP,#+48
   \   00000090   4C0080E8           STM      R0,{R2,R3,R6}
   \   00000094   0020D1E5           LDRB     R2,[R1, #0]
   \   00000098   02008DE2           ADD      R0,SP,#+2
   \   0000009C   0020C0E5           STRB     R2,[R0, #+0]
   \   000000A0   0120D1E5           LDRB     R2,[R1, #+1]
    906            history = XML_CreateNode(history_t, NULL);
   \   000000A4   0010A0E3           MOV      R1,#+0
   \   000000A8   0120C0E5           STRB     R2,[R0, #+1]
   \   000000AC   04008DE2           ADD      R0,SP,#+4
   \   000000B0   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
    907            sprintf(tmp_str, percent_d, param->mess_num);
   \   000000B4   0C2094E5           LDR      R2,[R4, #+12]
   \   000000B8   ........           LDR      R1,??DataTable54  ;; percent_d
   \   000000BC   0070A0E1           MOV      R7,R0
   \   000000C0   0500A0E1           MOV      R0,R5
   \   000000C4   160000EF           SWI      +22
    908            XML_Set_Attr_Value(history, maxstanzas_t, tmp_str);
   \   000000C8   0520A0E1           MOV      R2,R5
   \   000000CC   30108DE2           ADD      R1,SP,#+48
   \   000000D0   0700A0E1           MOV      R0,R7
   \   000000D4   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    909            if(param->pass)
   \   000000D8   081094E5           LDR      R1,[R4, #+8]
   \   000000DC   000051E3           CMP      R1,#+0
   \   000000E0   0300000A           BEQ      ??_enterconference_1
    910            {
    911              password=XML_CreateNode(password_t, param->pass);
    912              history->next=password;
   \   000000E4   24008DE2           ADD      R0,SP,#+36
   \   000000E8   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   000000EC   000087E5           STR      R0,[R7, #+0]
    913            }
    914            xml_x = XML_CreateNode(x_t, NULL);
   \   000000F0   0010A0E3           MOV      R1,#+0
   \                     ??_enterconference_1:
   \   000000F4   0D00A0E1           MOV      R0,SP
   \   000000F8   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
    915            XML_Set_Attr_Value(xml_x, xmlns_t, XMLNS_MUC);
   \   000000FC   F0209FE5           LDR      R2,??_enterconference_0+0x20  ;; `?<Constant "x">_1` + 236
   \   00000100   0060A0E1           MOV      R6,R0
   \   00000104   1C108DE2           ADD      R1,SP,#+28
   \   00000108   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
    916            xml_x->subnode=history;
    917          
    918            char *stext;
    919            extern char empty_str[];
    920            if(OnlineInfo.txt){stext= OnlineInfo.txt;}else{stext = empty_str;}
   \   0000010C   ........           LDR      R0,??DataTable55  ;; OnlineInfo
   \   00000110   047086E5           STR      R7,[R6, #+4]
   \   00000114   047090E5           LDR      R7,[R0, #+4]
    921            show = XML_CreateNode(show_t, (char*)PRESENCES[OnlineInfo.status]);
   \   00000118   0010D0E5           LDRB     R1,[R0, #+0]
   \   0000011C   000057E3           CMP      R7,#+0
   \   00000120   D0709F05           LDREQ    R7,??_enterconference_0+0x24  ;; empty_str
   \   00000124   010180E0           ADD      R0,R0,R1, LSL #+2
   \   00000128   081090E5           LDR      R1,[R0, #+8]
   \   0000012C   0C008DE2           ADD      R0,SP,#+12
   \   00000130   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   00000134   0080A0E1           MOV      R8,R0
    922            if (stext)
   \   00000138   000057E3           CMP      R7,#+0
   \   0000013C   0700000A           BEQ      ??_enterconference_2
    923              if(strlen(stext)>0)
   \   00000140   0700A0E1           MOV      R0,R7
   \   00000144   1B0000EF           SWI      +27
   \   00000148   000050E3           CMP      R0,#+0
   \   0000014C   0300000A           BEQ      ??_enterconference_2
    924              {
    925                status = XML_CreateNode(status_t, stext);
    926                xml_x->next = status;
   \   00000150   0710A0E1           MOV      R1,R7
   \   00000154   14008DE2           ADD      R0,SP,#+20
   \   00000158   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   0000015C   000086E5           STR      R0,[R6, #+0]
    927              }
    928            show->next = xml_x;
   \                     ??_enterconference_2:
   \   00000160   006088E5           STR      R6,[R8, #+0]
    929            strcpy(tmp_str, param->room_name);
   \   00000164   041094E5           LDR      R1,[R4, #+4]
   \   00000168   0500A0E1           MOV      R0,R5
   \   0000016C   1A0000EF           SWI      +26
    930            strcat(tmp_str, slash_t);
   \   00000170   02108DE2           ADD      R1,SP,#+2
   \   00000174   0500A0E1           MOV      R0,R5
   \   00000178   170000EF           SWI      +23
    931            strcat(tmp_str, param->room_nick);
   \   0000017C   001094E5           LDR      R1,[R4, #+0]
   \   00000180   0500A0E1           MOV      R0,R5
   \   00000184   170000EF           SWI      +23
    932            SendPresence(tmp_str, NULL, NULL, show);
   \   00000188   0830A0E1           MOV      R3,R8
   \   0000018C   0020A0E3           MOV      R2,#+0
   \   00000190   0010A0E3           MOV      R1,#+0
   \   00000194   0500A0E1           MOV      R0,R5
   \   00000198   ........           BL       SendPresence
    933            mfree(tmp_str);
   \   0000019C   0500A0E1           MOV      R0,R5
   \   000001A0   150000EF           SWI      +21
    934            mfree(param->room_nick);
   \   000001A4   000094E5           LDR      R0,[R4, #+0]
   \   000001A8   150000EF           SWI      +21
    935            mfree(param->room_name);
   \   000001AC   040094E5           LDR      R0,[R4, #+4]
   \   000001B0   150000EF           SWI      +21
    936            if(param->pass)mfree(param->pass);
   \   000001B4   080094E5           LDR      R0,[R4, #+8]
   \   000001B8   000050E3           CMP      R0,#+0
   \   000001BC   0000000A           BEQ      ??_enterconference_3
   \   000001C0   150000EF           SWI      +21
    937            mfree(param);
   \                     ??_enterconference_3:
   \   000001C4   0400A0E1           MOV      R0,R4
   \   000001C8   150000EF           SWI      +21
    938          }
   \   000001CC   3CD08DE2           ADD      SP,SP,#+60
   \   000001D0   F081BDE8           POP      {R4-R8,PC}       ;; return
   \                     ??_enterconference_0:
   \   000001D4   ........           DC32     `?<Constant "history">`
   \   000001D8   ........           DC32     `?<Constant "show">_2`
   \   000001DC   ........           DC32     `?<Constant "status">_2`
   \   000001E0   ........           DC32     `?<Constant "password">_1`
   \   000001E4   ........           DC32     `?<Constant "x">_2`
   \   000001E8   ........           DC32     `?<Constant "xmlns">_10`
   \   000001EC   ........           DC32     `?<Constant "maxstanzas">`
   \   000001F0   ........           DC32     `?<Constant "/">_1`
   \   000001F4   ........           DC32     `?<Constant "x">_1` + 236
   \   000001F8   ........           DC32     empty_str
    939          
    940          
    941          // Входит в конференцию
    942          // Все имена в UTF-8 :)

   \                                 In segment CODE, align 4, keep-with-next
    943          void Enter_Conference(char *room, char *roomnick, char *roompass, char N_messages)
    944          {
   \                     Enter_Conference:
   \   00000000   F84F2DE9           PUSH     {R3-R11,LR}
    945          
    946            // Смотрим, есть ли такая конфа в списке конференций
    947            // Если есть, тогда мы должны просто поменять ник в ней
    948            char IsAlreadyInList = 0;
    949            MUC_ITEM* m_ex = muctop;
   \   00000004   ........           LDR      R8,??DataTable59  ;; OnlineInfo
   \   00000008   0040A0E1           MOV      R4,R0
   \   0000000C   389098E5           LDR      R9,[R8, #+56]
   \   00000010   0150A0E1           MOV      R5,R1
   \   00000014   0260A0E1           MOV      R6,R2
   \   00000018   0070A0E3           MOV      R7,#+0
   \   0000001C   00A0A0E3           MOV      R10,#+0
    950            if(muctop)
   \   00000020   000059E3           CMP      R9,#+0
   \   00000024   0A00000A           BEQ      ??Enter_Conference_0
   \   00000028   000000EA           B        ??Enter_Conference_1
    951            {
    952              while(m_ex)
    953              {
    954                if(stristr(m_ex->conf_jid, room)==m_ex->conf_jid)
    955                {
    956                  IsAlreadyInList=1;
    957                  break;
    958                }
    959                m_ex=m_ex->next;
   \                     ??Enter_Conference_2:
   \   0000002C   089099E5           LDR      R9,[R9, #+8]
   \                     ??Enter_Conference_1:
   \   00000030   000059E3           CMP      R9,#+0
   \   00000034   0600000A           BEQ      ??Enter_Conference_0
   \   00000038   000099E5           LDR      R0,[R9, #+0]
   \   0000003C   0410A0E1           MOV      R1,R4
   \   00000040   ........           _BLF     stristr,??stristr??rA
   \   00000044   001099E5           LDR      R1,[R9, #+0]
   \   00000048   010050E1           CMP      R0,R1
   \   0000004C   F6FFFF1A           BNE      ??Enter_Conference_2
   \   00000050   01A0A0E3           MOV      R10,#+1
    960              };
    961            }
    962          
    963            CLIST* Conference = CList_FindContactByJID(room);
   \                     ??Enter_Conference_0:
   \   00000054   0400A0E1           MOV      R0,R4
   \   00000058   ........           _BLF     CList_FindContactByJID,??CList_FindContactByJID??rA
    964            if(!IsAlreadyInList)
   \   0000005C   0A10B0E1           MOVS     R1,R10
    965            {
    966              // Добавляем контакт конференции в ростер
    967              if(!Conference)
   \   00000060   00005003           CMPEQ    R0,#+0
   \   00000064   0800001A           BNE      ??Enter_Conference_3
    968              {
    969                CList_AddContact(room,room, SUB_BOTH, 0, 129);
   \   00000068   8100A0E3           MOV      R0,#+129
   \   0000006C   01002DE9           PUSH     {R0}
   \   00000070   0030A0E3           MOV      R3,#+0
   \   00000074   0320A0E3           MOV      R2,#+3
   \   00000078   0410A0E1           MOV      R1,R4
   \   0000007C   0400A0E1           MOV      R0,R4
   \   00000080   ........           _BLF     CList_AddContact,??CList_AddContact??rA
   \   00000084   04D08DE2           ADD      SP,SP,#+4
   \   00000088   0D0000EA           B        ??Enter_Conference_4
    970              }
    971          //    else  // Конфа могла остаться от предыдущего входа/выхода
    972          //    {
    973          //      Conference->res_list->status=PRESENCE_ONLINE;
    974          //    }
    975            }
    976            if((Conference)&&(m_ex))
   \                     ??Enter_Conference_3:
   \   0000008C   000050E3           CMP      R0,#+0
   \   00000090   00005913           CMPNE    R9,#+0
    977              if(Conference->res_list)
   \   00000094   0C009015           LDRNE    R0,[R0, #+12]
   \   00000098   00005013           CMPNE    R0,#+0
   \   0000009C   0800000A           BEQ      ??Enter_Conference_4
    978                if((Conference->res_list->status==PRESENCE_ONLINE)&&(!strcmp(Get_Resource_Name_By_FullJID(m_ex->conf_jid),roomnick))) return; //Уже там, и нечего перезаходить
   \   000000A0   0900D0E5           LDRB     R0,[R0, #+9]
   \   000000A4   000050E3           CMP      R0,#+0
   \   000000A8   0500001A           BNE      ??Enter_Conference_4
   \   000000AC   000099E5           LDR      R0,[R9, #+0]
   \   000000B0   ........           BL       Get_Resource_Name_By_FullJID
   \   000000B4   0510A0E1           MOV      R1,R5
   \   000000B8   190000EF           SWI      +25
   \   000000BC   000050E3           CMP      R0,#+0
   \   000000C0   F18FBD08           POPEQ    {R0,R4-R11,PC}
    979          
    980            // Готовим структуру для передачи в HELPER
    981            MUC_ENTER_PARAM* par = malloc(sizeof(MUC_ENTER_PARAM));
   \                     ??Enter_Conference_4:
   \   000000C4   1000A0E3           MOV      R0,#+16
   \   000000C8   140000EF           SWI      +20
   \   000000CC   00B0A0E1           MOV      R11,R0
    982          //  par->room_nick =ANSI2UTF8(roomnick, strlen(roomnick)*2);
    983          //  par->room_name = ANSI2UTF8(room, strlen(room)*2);
    984          
    985            par->room_nick =malloc(strlen(roomnick)*2);
   \   000000D0   0500A0E1           MOV      R0,R5
   \   000000D4   1B0000EF           SWI      +27
   \   000000D8   8000A0E1           LSL      R0,R0,#+1
   \   000000DC   140000EF           SWI      +20
   \   000000E0   00008BE5           STR      R0,[R11, #+0]
    986            par->room_name = malloc(strlen(room)*2);
   \   000000E4   0400A0E1           MOV      R0,R4
   \   000000E8   1B0000EF           SWI      +27
   \   000000EC   8000A0E1           LSL      R0,R0,#+1
   \   000000F0   140000EF           SWI      +20
   \   000000F4   04008BE5           STR      R0,[R11, #+4]
    987            strcpy(par->room_nick, roomnick);
   \   000000F8   00009BE5           LDR      R0,[R11, #+0]
   \   000000FC   0510A0E1           MOV      R1,R5
   \   00000100   1A0000EF           SWI      +26
    988            strcpy(par->room_name, room);
   \   00000104   04009BE5           LDR      R0,[R11, #+4]
   \   00000108   0410A0E1           MOV      R1,R4
   \   0000010C   1A0000EF           SWI      +26
    989            if(roompass)
   \   00000110   000056E3           CMP      R6,#+0
   \   00000114   0700000A           BEQ      ??Enter_Conference_5
    990            {
    991              par->pass = malloc(strlen(roompass)*2);
   \   00000118   0600A0E1           MOV      R0,R6
   \   0000011C   1B0000EF           SWI      +27
   \   00000120   8000A0E1           LSL      R0,R0,#+1
   \   00000124   140000EF           SWI      +20
   \   00000128   08008BE5           STR      R0,[R11, #+8]
    992              strcpy(par->pass, roompass);
   \   0000012C   0610A0E1           MOV      R1,R6
   \   00000130   1A0000EF           SWI      +26
   \   00000134   000000EA           B        ??Enter_Conference_6
    993            }
    994            else par->pass = NULL;
   \                     ??Enter_Conference_5:
   \   00000138   08708BE5           STR      R7,[R11, #+8]
    995            
    996            if(!IsAlreadyInList)
    997            {
    998              par->mess_num=N_messages;
    999            }
   1000            else par->mess_num=0;   // Нах еще раз запрашивать историю
   1001            SUBPROC((void*)_enterconference, par);
   1002          
   1003            if(!IsAlreadyInList)
   \                     ??Enter_Conference_6:
   \   0000013C   ........           LDR      R4,??DataTable57  ;; `?<Constant "username">`
   \   00000140   0A00B0E1           MOVS     R0,R10
   \   00000144   0000DD05           LDRBEQ   R0,[SP, #+0]
   \   00000148   0B10A0E1           MOV      R1,R11
   \   0000014C   0000A013           MOVNE    R0,#+0
   \   00000150   0C008BE5           STR      R0,[R11, #+12]
   \   00000154   D0009FE5           LDR      R0,??Enter_Conference_7  ;; _enterconference
   \   00000158   710100EF           SWI      +369
   \   0000015C   00005AE3           CMP      R10,#+0
   \   00000160   1D00001A           BNE      ??Enter_Conference_8
   1004            {
   1005              // Регистрируем конференцию в списке конференций
   1006              MUC_ITEM* mi = malloc(sizeof(MUC_ITEM));
   \   00000164   0C00A0E3           MOV      R0,#+12
   \   00000168   140000EF           SWI      +20
   \   0000016C   0050A0E1           MOV      R5,R0
   1007              mi->conf_jid = malloc(strlen(par->room_name)*2+strlen(par->room_nick)*2+2);
   \   00000170   04009BE5           LDR      R0,[R11, #+4]
   \   00000174   1B0000EF           SWI      +27
   \   00000178   0060A0E1           MOV      R6,R0
   \   0000017C   00009BE5           LDR      R0,[R11, #+0]
   \   00000180   1B0000EF           SWI      +27
   \   00000184   060080E0           ADD      R0,R0,R6
   \   00000188   0210A0E3           MOV      R1,#+2
   \   0000018C   800081E0           ADD      R0,R1,R0, LSL #+1
   \   00000190   140000EF           SWI      +20
   \   00000194   000085E5           STR      R0,[R5, #+0]
   1008              sprintf(mi->conf_jid, "%s/%s", par->room_name, par->room_nick);
   \   00000198   00309BE5           LDR      R3,[R11, #+0]
   \   0000019C   04209BE5           LDR      R2,[R11, #+4]
   \   000001A0   141084E2           ADD      R1,R4,#+20
   \   000001A4   160000EF           SWI      +22
   1009              mi->muctema=NULL;
   \   000001A8   047085E5           STR      R7,[R5, #+4]
   1010              mi->next=NULL;
   \   000001AC   087085E5           STR      R7,[R5, #+8]
   1011              m_ex = muctop;
   \   000001B0   389098E5           LDR      R9,[R8, #+56]
   1012              if(muctop)
   \   000001B4   000059E3           CMP      R9,#+0
   \   000001B8   0200001A           BNE      ??Enter_Conference_9
   1013              {
   1014                while(m_ex->next){m_ex=m_ex->next;};
   1015                m_ex->next = mi;
   1016              }
   1017              else
   1018              {
   1019                muctop = mi;
   \   000001BC   385088E5           STR      R5,[R8, #+56]
   \   000001C0   F18FBDE8           POP      {R0,R4-R11,PC}
   1020              }
   \                     ??Enter_Conference_10:
   \   000001C4   0090A0E1           MOV      R9,R0
   \                     ??Enter_Conference_9:
   \   000001C8   080099E5           LDR      R0,[R9, #+8]
   \   000001CC   000050E3           CMP      R0,#+0
   \   000001D0   FBFFFF1A           BNE      ??Enter_Conference_10
   \   000001D4   085089E5           STR      R5,[R9, #+8]
   \   000001D8   F18FBDE8           POP      {R0,R4-R11,PC}
   1021            }
   1022            else
   1023            {
   1024              // m_ex - текущий элемент
   1025              int len = strlen(par->room_name)+strlen(par->room_nick)+2;
   \                     ??Enter_Conference_8:
   \   000001DC   04009BE5           LDR      R0,[R11, #+4]
   \   000001E0   1B0000EF           SWI      +27
   \   000001E4   0050A0E1           MOV      R5,R0
   \   000001E8   00009BE5           LDR      R0,[R11, #+0]
   \   000001EC   1B0000EF           SWI      +27
   \   000001F0   050080E0           ADD      R0,R0,R5
   \   000001F4   025080E2           ADD      R5,R0,#+2
   1026              m_ex->conf_jid = realloc(m_ex->conf_jid, len);
   \   000001F8   000099E5           LDR      R0,[R9, #+0]
   \   000001FC   0510A0E1           MOV      R1,R5
   \   00000200   BA0000EF           SWI      +186
   \   00000204   000089E5           STR      R0,[R9, #+0]
   1027              snprintf(m_ex->conf_jid, len, "%s/%s", par->room_name, par->room_nick);
   \   00000208   00009BE5           LDR      R0,[R11, #+0]
   \   0000020C   142084E2           ADD      R2,R4,#+20
   \   00000210   01002DE9           PUSH     {R0}
   \   00000214   04309BE5           LDR      R3,[R11, #+4]
   \   00000218   000099E5           LDR      R0,[R9, #+0]
   \   0000021C   0510A0E1           MOV      R1,R5
   \   00000220   1B0100EF           SWI      +283
   \   00000224   04D08DE2           ADD      SP,SP,#+4
   \   00000228   F18FBDE8           POP      {R0,R4-R11,PC}   ;; return
   \                     ??Enter_Conference_7:
   \   0000022C   ........           DC32     _enterconference
   1028            }
   1029          }
   1030          
   1031          struct muc_hlp_data {
   1032            char *conf_jid;
   1033            char *aux0;
   1034          };
   1035          
   1036          //Context: HELPER

   \                                 In segment CODE, align 4, keep-with-next
   1037          void _leaveconference(struct muc_hlp_data *ld)
   1038          {
   \                     _leaveconference:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
   \   00000004   08D04DE2           SUB      SP,SP,#+8
   \   00000008   0040A0E1           MOV      R4,R0
   1039            extern const char DEFTEX_MUCOFFLINE[];
   1040          //  char pr_templ[] = "<presence from='%s' to='%s' type='unavailable'><status>%s</status></presence>";
   1041            char *msg=NULL;
   1042            unsigned int l;
   1043            if (!ld->aux0) {
   \   0000000C   040094E5           LDR      R0,[R4, #+4]
   \   00000010   000050E3           CMP      R0,#+0
   \   00000014   1000001A           BNE      ??_leaveconference_0
   1044              int len;
   1045              if(len = strlen(DEFTEX_MUCOFFLINE))
   \   00000018   B4609FE5           LDR      R6,??_leaveconference_1  ;; DEFTEX_MUCOFFLINE
   \   0000001C   0600A0E1           MOV      R0,R6
   \   00000020   1B0000EF           SWI      +27
   \   00000024   0070B0E1           MOVS     R7,R0
   \   00000028   0700000A           BEQ      ??_leaveconference_2
   1046                {
   1047          	msg = malloc(len+1);
   \   0000002C   010087E2           ADD      R0,R7,#+1
   \   00000030   140000EF           SWI      +20
   \   00000034   0050A0E1           MOV      R5,R0
   1048          	strcpy(msg, DEFTEX_MUCOFFLINE);
   \   00000038   0610A0E1           MOV      R1,R6
   \   0000003C   1A0000EF           SWI      +26
   1049          	msg[len]='\0';
   \   00000040   0000A0E3           MOV      R0,#+0
   \   00000044   0500C7E7           STRB     R0,[R7, +R5]
   \   00000048   0C0000EA           B        ??_leaveconference_3
   1050                } else Send_ShortPresence(ld->conf_jid, PRESENCE_OFFLINE);
   \                     ??_leaveconference_2:
   \   0000004C   000094E5           LDR      R0,[R4, #+0]
   \   00000050   0610A0E3           MOV      R1,#+6
   \   00000054   ........           BL       Send_ShortPresence
   \   00000058   180000EA           B        ??_leaveconference_4
   1051            } else {
   1052              l = strlen(ld->aux0);
   \                     ??_leaveconference_0:
   \   0000005C   1B0000EF           SWI      +27
   1053              msg = malloc(l*2 + 1);
   \   00000060   0110A0E3           MOV      R1,#+1
   \   00000064   800081E0           ADD      R0,R1,R0, LSL #+1
   \   00000068   140000EF           SWI      +20
   1054              strcpy(msg, ld->aux0);
   \   0000006C   041094E5           LDR      R1,[R4, #+4]
   \   00000070   0050A0E1           MOV      R5,R0
   \   00000074   1A0000EF           SWI      +26
   1055              mfree(ld->aux0);
   \   00000078   040094E5           LDR      R0,[R4, #+4]
   \   0000007C   150000EF           SWI      +21
   1056            }
   1057          
   1058            if (msg) {
   \                     ??_leaveconference_3:
   \   00000080   000055E3           CMP      R5,#+0
   \   00000084   0D00000A           BEQ      ??_leaveconference_4
   1059              char status_t[]="status";
   \   00000088   48109FE5           LDR      R1,??_leaveconference_1+0x4  ;; `?<Constant "status">_3`
   \   0000008C   0D00A0E1           MOV      R0,SP
   \   00000090   0C0091E8           LDM      R1,{R2,R3}
   1060              XMLNode *status = XML_CreateNode(status_t, msg);
   \   00000094   0510A0E1           MOV      R1,R5
   \   00000098   0C0080E8           STM      R0,{R2,R3}
   \   0000009C   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   000000A0   0030A0E1           MOV      R3,R0
   1061              SendPresence(ld->conf_jid, (char*)PRESENCES[PRESENCE_OFFLINE], NULL, status);
   \   000000A4   30009FE5           LDR      R0,??_leaveconference_1+0x8  ;; OnlineInfo + 32
   \   000000A8   0020A0E3           MOV      R2,#+0
   \   000000AC   001090E5           LDR      R1,[R0, #+0]
   \   000000B0   000094E5           LDR      R0,[R4, #+0]
   \   000000B4   ........           BL       SendPresence
   1062              mfree(msg);
   \   000000B8   0500A0E1           MOV      R0,R5
   \   000000BC   150000EF           SWI      +21
   1063            }
   1064          
   1065            mfree(ld->conf_jid);
   \                     ??_leaveconference_4:
   \   000000C0   000094E5           LDR      R0,[R4, #+0]
   \   000000C4   150000EF           SWI      +21
   1066            mfree(ld);
   \   000000C8   0400A0E1           MOV      R0,R4
   \   000000CC   150000EF           SWI      +21
   1067          }
   \   000000D0   F380BDE8           POP      {R0,R1,R4-R7,PC}  ;; return
   \                     ??_leaveconference_1:
   \   000000D4   ........           DC32     DEFTEX_MUCOFFLINE
   \   000000D8   ........           DC32     `?<Constant "status">_3`
   \   000000DC   ........           DC32     OnlineInfo + 32
   1068          
   1069          /*
   1070           * Функция для подготовки служебных структур перед отправкой в HELPER
   1071           */

   \                                 In segment CODE, align 4, keep-with-next
   1072          void Muc_Ctl(char *room, char *str, void(proc)(struct muc_hlp_data*))
   1073          {
   \                     Muc_Ctl:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   \   00000008   0150A0E1           MOV      R5,R1
   \   0000000C   0260A0E1           MOV      R6,R2
   1074            struct muc_hlp_data *ld;
   1075            unsigned int l;
   1076          
   1077            if (!room || !proc) return; /* Sanity checking */
   \   00000010   000054E3           CMP      R4,#+0
   \   00000014   00005613           CMPNE    R6,#+0
   \   00000018   F080BD08           POPEQ    {R4-R7,PC}
   1078          
   1079            ld = malloc(sizeof(struct muc_hlp_data));
   \   0000001C   0800A0E3           MOV      R0,#+8
   \   00000020   140000EF           SWI      +20
   \   00000024   0070A0E1           MOV      R7,R0
   1080            ld->conf_jid = malloc(strlen(room)*2+1);
   \   00000028   0400A0E1           MOV      R0,R4
   \   0000002C   1B0000EF           SWI      +27
   \   00000030   0110A0E3           MOV      R1,#+1
   \   00000034   800081E0           ADD      R0,R1,R0, LSL #+1
   \   00000038   140000EF           SWI      +20
   \   0000003C   000087E5           STR      R0,[R7, #+0]
   1081            strcpy(ld->conf_jid, room);
   \   00000040   0410A0E1           MOV      R1,R4
   \   00000044   1A0000EF           SWI      +26
   1082          
   1083            if (str && (l = strlen(str))) {
   \   00000048   000055E3           CMP      R5,#+0
   \   0000004C   0A00000A           BEQ      ??Muc_Ctl_0
   \   00000050   0500A0E1           MOV      R0,R5
   \   00000054   1B0000EF           SWI      +27
   \   00000058   000050E3           CMP      R0,#+0
   \   0000005C   0700000A           BEQ      ??Muc_Ctl_1
   1084              ld->aux0 = malloc(l*2+1);
   \   00000060   0110A0E3           MOV      R1,#+1
   \   00000064   800081E0           ADD      R0,R1,R0, LSL #+1
   \   00000068   140000EF           SWI      +20
   \   0000006C   040087E5           STR      R0,[R7, #+4]
   1085              strcpy(ld->aux0, str);
   \   00000070   0510A0E1           MOV      R1,R5
   \   00000074   1A0000EF           SWI      +26
   \   00000078   010000EA           B        ??Muc_Ctl_2
   1086            } else ld->aux0 = NULL;
   \                     ??Muc_Ctl_0:
   \   0000007C   0000A0E3           MOV      R0,#+0
   \                     ??Muc_Ctl_1:
   \   00000080   040087E5           STR      R0,[R7, #+4]
   1087            
   1088            SUBPROC((void*)proc, ld);
   \                     ??Muc_Ctl_2:
   \   00000084   0710A0E1           MOV      R1,R7
   \   00000088   0600A0E1           MOV      R0,R6
   \   0000008C   710100EF           SWI      +369
   1089          
   1090            return;
   \   00000090   F080BDE8           POP      {R4-R7,PC}       ;; return
   1091          }
   1092          
   1093          //Context: HELPER

   \                                 In segment CODE, align 4, keep-with-next
   1094          void _setconferencetopic(struct muc_hlp_data *ld)
   1095          {
   1096            XMLNode *subject;
   1097            char subject_t[]="subject";
   \                     _setconferencetopic:
   \   00000000   60109FE5           LDR      R1,??_setconferencetopic_0  ;; `?<Constant "subject">_1`
   \   00000004   10402DE9           PUSH     {R4,LR}
   \   00000008   08D04DE2           SUB      SP,SP,#+8
   \   0000000C   0C0091E8           LDM      R1,{R2,R3}
   \   00000010   0040A0E1           MOV      R4,R0
   \   00000014   0D00A0E1           MOV      R0,SP
   \   00000018   0C0080E8           STM      R0,{R2,R3}
   1098            extern const char percent_d[];
   1099            char *type = MSGSTR_GCHAT;
   1100          
   1101            if (!ld->aux0 || !(strlen(ld->aux0)))
   \   0000001C   040094E5           LDR      R0,[R4, #+4]
   \   00000020   000050E3           CMP      R0,#+0
   \   00000024   0A00000A           BEQ      ??_setconferencetopic_1
   \   00000028   1B0000EF           SWI      +27
   \   0000002C   000050E3           CMP      R0,#+0
   \   00000030   0700000A           BEQ      ??_setconferencetopic_1
   1102              goto _free;
   1103            
   1104            subject = XML_CreateNode(subject_t, ld->aux0);
   \   00000034   041094E5           LDR      R1,[R4, #+4]
   \   00000038   0D00A0E1           MOV      R0,SP
   \   0000003C   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   1105            Send_Message(ld->conf_jid, type, NULL, subject);
   \   00000040   24109FE5           LDR      R1,??_setconferencetopic_0+0x4  ;; `?<Constant "x">_1` + 372
   \   00000044   0030A0E1           MOV      R3,R0
   \   00000048   000094E5           LDR      R0,[R4, #+0]
   \   0000004C   0020A0E3           MOV      R2,#+0
   \   00000050   ........           BL       Send_Message
   1106          
   1107           _free:
   1108            mfree(ld->conf_jid);
   \                     ??_setconferencetopic_1:
   \   00000054   000094E5           LDR      R0,[R4, #+0]
   \   00000058   150000EF           SWI      +21
   1109            mfree(ld);
   \   0000005C   0400A0E1           MOV      R0,R4
   \   00000060   150000EF           SWI      +21
   1110          }
   \   00000064   1380BDE8           POP      {R0,R1,R4,PC}    ;; return
   \                     ??_setconferencetopic_0:
   \   00000068   ........           DC32     `?<Constant "subject">_1`
   \   0000006C   ........           DC32     `?<Constant "x">_1` + 372
   1111          
   1112          // Выходит из конференции

   \                                 In segment CODE, align 4, keep-with-next
   1113          void Send_Leave_Conference(char* room, char *reason)
   1114          {
   1115          
   1116            Muc_Ctl(room, reason, _leaveconference);
   \                     Send_Leave_Conference:
   \   00000000   00209FE5           LDR      R2,??Send_Leave_Conference_0  ;; _leaveconference
   \   00000004   ........           B        Muc_Ctl          ;; tailcall
   \                     ??Send_Leave_Conference_0:
   \   00000008   ........           DC32     _leaveconference
   1117          }
   1118          
   1119          // Задаёт тему базара

   \                                 In segment CODE, align 4, keep-with-next
   1120          void Set_Conference_Topic(char *room, char* topic)
   1121          {
   1122          
   1123            Muc_Ctl(room, topic, _setconferencetopic);
   \                     Set_Conference_Topic:
   \   00000000   00209FE5           LDR      R2,??Set_Conference_Topic_0  ;; _setconferencetopic
   \   00000004   ........           B        Muc_Ctl          ;; tailcall
   \                     ??Set_Conference_Topic_0:
   \   00000008   ........           DC32     _setconferencetopic
   1124          }
   1125          

   \                                 In segment CODE, align 4, keep-with-next
   1126          void Leave_Conference(char* room)
   1127          {
   \                     Leave_Conference:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
   1128            // Ищем экземпляр контакта в списке для конференций
   1129            MUC_ITEM* m_ex = CList_FindMUCByJID(room);
   1130          
   1131            MUC_ITEM* m_ex2 = muctop;
   \   00000004   ........           LDR      R5,??DataTable59  ;; OnlineInfo
   \   00000008   ........           _BLF     CList_FindMUCByJID,??CList_FindMUCByJID??rA
   \   0000000C   0040A0E1           MOV      R4,R0
   \   00000010   380095E5           LDR      R0,[R5, #+56]
   \   00000014   0060A0E1           MOV      R6,R0
   1132            if(muctop==m_ex && muctop!=NULL)
   \   00000018   040050E1           CMP      R0,R4
   \   0000001C   0D00001A           BNE      ??Leave_Conference_0
   \   00000020   000050E3           CMP      R0,#+0
   \   00000024   0B00000A           BEQ      ??Leave_Conference_0
   1133            {
   1134              mfree(m_ex->conf_jid);
   \   00000028   000094E5           LDR      R0,[R4, #+0]
   \   0000002C   150000EF           SWI      +21
   1135              if(m_ex->muctema)mfree(m_ex->muctema);
   \   00000030   040094E5           LDR      R0,[R4, #+4]
   \   00000034   000050E3           CMP      R0,#+0
   \   00000038   0000000A           BEQ      ??Leave_Conference_1
   \   0000003C   150000EF           SWI      +21
   1136              muctop=m_ex->next;
   \                     ??Leave_Conference_1:
   \   00000040   080094E5           LDR      R0,[R4, #+8]
   \   00000044   380085E5           STR      R0,[R5, #+56]
   1137              mfree(m_ex);
   \   00000048   0400A0E1           MOV      R0,R4
   \   0000004C   150000EF           SWI      +21
   \   00000050   020000EA           B        ??Leave_Conference_2
   1138            }
   1139            while(m_ex2)
   1140            {
   1141              if(m_ex2->next==m_ex)
   1142              {
   1143                m_ex2->next = m_ex->next;   // Выбиваем из цепочки
   1144                mfree(m_ex->conf_jid);
   1145                mfree(m_ex);
   1146                break;
   1147              }
   1148              m_ex2 = m_ex2->next;
   \                     ??Leave_Conference_3:
   \   00000054   0060A0E1           MOV      R6,R0
   \                     ??Leave_Conference_0:
   \   00000058   000056E3           CMP      R6,#+0
   \   0000005C   0800000A           BEQ      ??Leave_Conference_4
   \                     ??Leave_Conference_2:
   \   00000060   080096E5           LDR      R0,[R6, #+8]
   \   00000064   040050E1           CMP      R0,R4
   \   00000068   F9FFFF1A           BNE      ??Leave_Conference_3
   \   0000006C   080094E5           LDR      R0,[R4, #+8]
   \   00000070   080086E5           STR      R0,[R6, #+8]
   \   00000074   000094E5           LDR      R0,[R4, #+0]
   \   00000078   150000EF           SWI      +21
   \   0000007C   0400A0E1           MOV      R0,R4
   \   00000080   150000EF           SWI      +21
   1149            }
   1150            ShowMSG(1,(int)LG_MUCEXITDONE);
   \                     ??Leave_Conference_4:
   \   00000084   08109FE5           LDR      R1,??Leave_Conference_5  ;; `?<Constant "\\302\\373\\365\\356\\344 \\350\\347 MUC `
   \   00000088   0100A0E3           MOV      R0,#+1
   \   0000008C   480100EF           SWI      +328
   1151          }
   \   00000090   7080BDE8           POP      {R4-R6,PC}       ;; return
   \                     ??Leave_Conference_5:
   \   00000094   ........           DC32     `?<Constant "\\302\\373\\365\\356\\344 \\350\\347 MUC `
   1152          
   1153          
   1154          // Уничтожить список комнат

   \                                 In segment CODE, align 4, keep-with-next
   1155          void MUCList_Destroy()
   1156          {
   \                     MUCList_Destroy:
   \   00000000   10402DE9           PUSH     {R4,LR}
   1157            LockSched();
   \   00000004   460100EF           SWI      +326
   1158            MUC_ITEM* cl=muctop;
   \   00000008   ........           LDR      R0,??DataTable59  ;; OnlineInfo
   1159            muctop=NULL;
   \   0000000C   0010A0E3           MOV      R1,#+0
   \   00000010   384090E5           LDR      R4,[R0, #+56]
   \   00000014   381080E5           STR      R1,[R0, #+56]
   \   00000018   000054E3           CMP      R4,#+0
   \   0000001C   0A00000A           BEQ      ??MUCList_Destroy_0
   1160            while(cl)
   1161            {
   1162              MUC_ITEM *p;
   1163              mfree(cl->conf_jid);
   \                     ??MUCList_Destroy_1:
   \   00000020   000094E5           LDR      R0,[R4, #+0]
   \   00000024   150000EF           SWI      +21
   1164              if(cl->muctema)mfree(cl->muctema);
   \   00000028   040094E5           LDR      R0,[R4, #+4]
   \   0000002C   000050E3           CMP      R0,#+0
   \   00000030   0000000A           BEQ      ??MUCList_Destroy_2
   \   00000034   150000EF           SWI      +21
   1165              p=cl;
   \                     ??MUCList_Destroy_2:
   \   00000038   0400A0E1           MOV      R0,R4
   1166              cl=(MUC_ITEM*)(cl->next);
   \   0000003C   084094E5           LDR      R4,[R4, #+8]
   1167              mfree(p);
   \   00000040   150000EF           SWI      +21
   1168              p=NULL;
   1169            }
   \   00000044   000054E3           CMP      R4,#+0
   \   00000048   F4FFFF1A           BNE      ??MUCList_Destroy_1
   1170            UnlockSched();
   \                     ??MUCList_Destroy_0:
   \   0000004C   470100EF           SWI      +327
   1171          }
   \   00000050   1080BDE8           POP      {R4,PC}          ;; return
   1172          
   1173          
   1174          
   1175          // Для вызова таймером

   \                                 In segment CODE, align 4, keep-with-next
   1176          void Send_Presence_MMIStub()
   1177          {
   1178            SUBPROC((void*)Send_Initial_Presence_Helper);
   \                     Send_Presence_MMIStub:
   \   00000000   ........           LDR      R0,??DataTable60  ;; Send_Initial_Presence_Helper
   \   00000004   00402DE9           PUSH     {LR}
   \   00000008   710100EF           SWI      +369
   1179          }
   \   0000000C   0080BDE8           POP      {PC}             ;; return
   1180          
   1181          
   1182          // Изменяет имя контакта в ростере

   \                                 In segment CODE, align 4, keep-with-next
   1183          void ChangeRoster(XMLNode* items)
   1184          {
   1185            XMLNode* rostEx = items;
   1186            CLIST* Cont_Ex;
   1187            char *name;
   1188            char* w_subscr;
   1189            char aname[]="jid";  // Затрахали Tool Internal Error
   \                     ChangeRoster:
   \   00000000   20119FE5           LDR      R1,??ChangeRoster_0  ;; `?<Constant "jid">`
   \   00000004   F0472DE9           PUSH     {R4-R10,LR}
   \   00000008   14D04DE2           SUB      SP,SP,#+20
   \   0000000C   002091E5           LDR      R2,[R1, #0]
   1190            char asub[]="subscribe";
   \   00000010   14119FE5           LDR      R1,??ChangeRoster_0+0x4  ;; `?<Constant "subscribe">_1`
   \   00000014   0050A0E1           MOV      R5,R0
   \   00000018   0D00A0E1           MOV      R0,SP
   \   0000001C   002080E5           STR      R2,[R0, #+0]
   \   00000020   1C0091E8           LDM      R1,{R2-R4}
   1191            char aask[]="ask";
   \   00000024   04119FE5           LDR      R1,??ChangeRoster_0+0x8  ;; `?<Constant "ask">`
   \   00000028   08008DE2           ADD      R0,SP,#+8
   \   0000002C   1C0080E8           STM      R0,{R2-R4}
   \   00000030   002091E5           LDR      R2,[R1, #0]
   \   00000034   04008DE2           ADD      R0,SP,#+4
   \   00000038   002080E5           STR      R2,[R0, #+0]
   \   0000003C   000055E3           CMP      R5,#+0
   \   00000040   3600000A           BEQ      ??ChangeRoster_1
   1192            char* jid;
   1193            int gr_id;
   1194            char w_subscr_flag;
   1195            while(rostEx)
   1196            {
   1197              jid = XML_Get_Attr_Value(aname,rostEx->attr);
   1198              JABBER_SUBSCRIPTION r_subscr=GetSubscrType(XML_Get_Attr_Value("subscription",rostEx->attr));
   \                     ??ChangeRoster_2:
   \   00000044   ........           LDR      R9,??DataTable62  ;; `?<Constant "x">_1`
   \   00000048   0C1095E5           LDR      R1,[R5, #+12]
   \   0000004C   0D00A0E1           MOV      R0,SP
   \   00000050   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   \   00000054   0C1095E5           LDR      R1,[R5, #+12]
   \   00000058   0040A0E1           MOV      R4,R0
   \   0000005C   9F0F89E2           ADD      R0,R9,#+636
   \   00000060   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   \   00000064   ........           BL       GetSubscrType
   1199              name = XML_Get_Attr_Value("name",rostEx->attr);
   \   00000068   0C1095E5           LDR      R1,[R5, #+12]
   \   0000006C   0060A0E1           MOV      R6,R0
   \   00000070   A30F89E2           ADD      R0,R9,#+652
   \   00000074   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   1200              w_subscr = XML_Get_Attr_Value(aask,rostEx->attr);
   \   00000078   0C1095E5           LDR      R1,[R5, #+12]
   \   0000007C   0070A0E1           MOV      R7,R0
   \   00000080   04008DE2           ADD      R0,SP,#+4
   \   00000084   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   1201              if(w_subscr)
   \   00000088   0080A0E3           MOV      R8,#+0
   \   0000008C   000050E3           CMP      R0,#+0
   \   00000090   0300000A           BEQ      ??ChangeRoster_3
   1202              {
   1203                w_subscr_flag = !strcmp(w_subscr, asub) ? 1: 0;
   \   00000094   08108DE2           ADD      R1,SP,#+8
   \   00000098   190000EF           SWI      +25
   \   0000009C   000050E3           CMP      R0,#+0
   \   000000A0   0180A003           MOVEQ    R8,#+1
   1204              }
   1205              else
   1206              {
   1207                w_subscr_flag = 0;
   1208              }
   1209              XMLNode *group = XML_Get_Child_Node_By_Name(rostEx, "group");
   \                     ??ChangeRoster_3:
   \   000000A4   A51F89E2           ADD      R1,R9,#+660
   \   000000A8   0500A0E1           MOV      R0,R5
   \   000000AC   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   \   000000B0   0090B0E1           MOVS     R9,R0
   1210              if(group)
   \   000000B4   0700000A           BEQ      ??ChangeRoster_4
   1211              {
   1212                if(!(gr_id = GetGroupID(group->value)))
   \   000000B8   100099E5           LDR      R0,[R9, #+16]
   \   000000BC   ........           _BLF     GetGroupID,??GetGroupID??rA
   \   000000C0   00A0B0E1           MOVS     R10,R0
   \   000000C4   0400001A           BNE      ??ChangeRoster_5
   1213                {
   1214                  gr_id = AddGroup(group->value);
   \   000000C8   100099E5           LDR      R0,[R9, #+16]
   \   000000CC   ........           _BLF     AddGroup,??AddGroup??rA
   \   000000D0   00A0A0E1           MOV      R10,R0
   \   000000D4   000000EA           B        ??ChangeRoster_5
   1215                }
   1216              }
   1217              else gr_id = 0;
   \                     ??ChangeRoster_4:
   \   000000D8   00A0A0E3           MOV      R10,#+0
   1218              Cont_Ex = CList_FindContactByJID(jid);
   \                     ??ChangeRoster_5:
   \   000000DC   0400A0E1           MOV      R0,R4
   \   000000E0   ........           _BLF     CList_FindContactByJID,??CList_FindContactByJID??rA
   1219              if(Cont_Ex)
   \   000000E4   FFA00AE2           AND      R10,R10,#0xFF
   \   000000E8   00042DE9           PUSH     {R10}
   \   000000EC   000050E3           CMP      R0,#+0
   \   000000F0   0830A0E1           MOV      R3,R8
   \   000000F4   0620A0E1           MOV      R2,R6
   \   000000F8   0710A0E1           MOV      R1,R7
   \   000000FC   0100000A           BEQ      ??ChangeRoster_6
   1220              {
   1221                CList_ChangeContactParams(Cont_Ex,name,r_subscr, w_subscr_flag,gr_id);
   \   00000100   ........           _BLF     CList_ChangeContactParams,??CList_ChangeContactParams??rA
   \   00000104   010000EA           B        ??ChangeRoster_7
   1222              }
   1223              else
   1224              { //если контакта нету надо добавить его в контактлист.
   1225               CList_AddContact(jid, name,r_subscr, w_subscr_flag, gr_id);
   \                     ??ChangeRoster_6:
   \   00000108   0400A0E1           MOV      R0,R4
   \   0000010C   ........           _BLF     CList_AddContact,??CList_AddContact??rA
   \                     ??ChangeRoster_7:
   \   00000110   04D08DE2           ADD      SP,SP,#+4
   1226              }
   1227              rostEx=rostEx->next;
   \   00000114   005095E5           LDR      R5,[R5, #+0]
   1228            }
   \   00000118   000055E3           CMP      R5,#+0
   \   0000011C   C8FFFF1A           BNE      ??ChangeRoster_2
   1229          }
   \                     ??ChangeRoster_1:
   \   00000120   14D08DE2           ADD      SP,SP,#+20       ;; stack cleaning
   \   00000124   F087BDE8           POP      {R4-R10,PC}      ;; return
   \                     ??ChangeRoster_0:
   \   00000128   ........           DC32     `?<Constant "jid">`
   \   0000012C   ........           DC32     `?<Constant "subscribe">_1`
   \   00000130   ........           DC32     `?<Constant "ask">`
   1230          

   \                                 In segment CODE, align 4, keep-with-next
   1231          void FillRoster(XMLNode* items)
   1232          {
   \                     FillRoster:
   \   00000000   F04F2DE9           PUSH     {R4-R11,LR}
   \   00000004   04D04DE2           SUB      SP,SP,#+4
   1233            XMLNode* rostEx = items;
   \   00000008   0040B0E1           MOVS     R4,R0
   \   0000000C   0050A0E3           MOV      R5,#+0
   \   00000010   3000000A           BEQ      ??FillRoster_0
   \   00000014   946F8FE2           ADR      R6,??FillRoster_1  ;; "ask"
   1234            int i=0;
   1235            char* name;
   1236            char* w_subscr;
   1237            char w_subscr_flag;
   1238            while(rostEx)
   1239            {
   1240              JABBER_SUBSCRIPTION r_subscr=GetSubscrType(XML_Get_Attr_Value("subscription",rostEx->attr));
   \                     ??FillRoster_2:
   \   00000018   ........           LDR      R10,??DataTable62  ;; `?<Constant "x">_1`
   \   0000001C   0C1094E5           LDR      R1,[R4, #+12]
   \   00000020   9F0F8AE2           ADD      R0,R10,#+636
   \   00000024   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   \   00000028   ........           BL       GetSubscrType
   1241              name = XML_Get_Attr_Value("name",rostEx->attr);
   \   0000002C   0C1094E5           LDR      R1,[R4, #+12]
   \   00000030   0070A0E1           MOV      R7,R0
   \   00000034   A30F8AE2           ADD      R0,R10,#+652
   \   00000038   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   1242              w_subscr = XML_Get_Attr_Value("ask",rostEx->attr);
   \   0000003C   0C1094E5           LDR      R1,[R4, #+12]
   \   00000040   0080A0E1           MOV      R8,R0
   \   00000044   0600A0E1           MOV      R0,R6
   \   00000048   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   1243              if(w_subscr)
   \   0000004C   000050E3           CMP      R0,#+0
   \   00000050   0400000A           BEQ      ??FillRoster_3
   1244              {
   1245                w_subscr_flag = !strcmp(w_subscr, "subscribe") ? 1: 0;
   \   00000054   68108AE2           ADD      R1,R10,#+104
   \   00000058   190000EF           SWI      +25
   \   0000005C   000050E3           CMP      R0,#+0
   \   00000060   0190A003           MOVEQ    R9,#+1
   \   00000064   0000000A           BEQ      ??FillRoster_4
   1246              }
   1247              else
   1248              {
   1249                w_subscr_flag = 0;
   \                     ??FillRoster_3:
   \   00000068   0090A0E3           MOV      R9,#+0
   1250              }
   1251              // Получаем группу контакта, заносим в список групп
   1252              XMLNode *group = XML_Get_Child_Node_By_Name(rostEx, "group");
   \                     ??FillRoster_4:
   \   0000006C   A51F8AE2           ADD      R1,R10,#+660
   \   00000070   0400A0E1           MOV      R0,R4
   \   00000074   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   \   00000078   00B0B0E1           MOVS     R11,R0
   1253              int gr_id;
   1254              if(group)
   \   0000007C   0700000A           BEQ      ??FillRoster_5
   1255              {
   1256                if(!(gr_id = GetGroupID(group->value)))
   \   00000080   10009BE5           LDR      R0,[R11, #+16]
   \   00000084   ........           _BLF     GetGroupID,??GetGroupID??rA
   \   00000088   00A0B0E1           MOVS     R10,R0
   \   0000008C   0400001A           BNE      ??FillRoster_6
   1257                {
   1258                  gr_id = AddGroup(group->value);
   \   00000090   10009BE5           LDR      R0,[R11, #+16]
   \   00000094   ........           _BLF     AddGroup,??AddGroup??rA
   \   00000098   00A0A0E1           MOV      R10,R0
   \   0000009C   000000EA           B        ??FillRoster_6
   1259                }
   1260              }
   1261              else gr_id = 0;
   \                     ??FillRoster_5:
   \   000000A0   00A0A0E3           MOV      R10,#+0
   1262          
   1263              CList_AddContact(XML_Get_Attr_Value("jid",rostEx->attr),
   1264                                    name,
   1265                                    r_subscr,
   1266                                    w_subscr_flag,
   1267                                    gr_id
   1268                                    );
   \                     ??FillRoster_6:
   \   000000A4   0C1094E5           LDR      R1,[R4, #+12]
   \   000000A8   700F8FE2           ADR      R0,??FillRoster_1+0x4  ;; "jid"
   \   000000AC   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   \   000000B0   FFA00AE2           AND      R10,R10,#0xFF
   \   000000B4   00042DE9           PUSH     {R10}
   \   000000B8   0930A0E1           MOV      R3,R9
   \   000000BC   0720A0E1           MOV      R2,R7
   \   000000C0   0810A0E1           MOV      R1,R8
   \   000000C4   ........           _BLF     CList_AddContact,??CList_AddContact??rA
   1269             //if(name)mfree(name);
   1270          
   1271             rostEx=rostEx->next;
   \   000000C8   004094E5           LDR      R4,[R4, #+0]
   1272             i++;
   1273            }
   \   000000CC   04D08DE2           ADD      SP,SP,#+4
   \   000000D0   000054E3           CMP      R4,#+0
   \   000000D4   CFFFFF1A           BNE      ??FillRoster_2
   1274          
   1275            // Получение ростера закончено. Размечаем группы
   1276            GR_ITEM *tmp_gpointer=GR_ROOT;
   1277            CLIST *tmp_cpointer=cltop;
   \                     ??FillRoster_0:
   \   000000D8   ........           LDR      R0,??DataTable63  ;; cltop
   1278            int cur_gid=-1, this_grid;   // Текущий обрабатываемый GID
   \   000000DC   ........           LDR      R8,??DataTable64  ;; My_JID_full
   \   000000E0   004090E5           LDR      R4,[R0, #+0]
   \   000000E4   0510E0E1           MVN      R1,R5
   \   000000E8   00108DE5           STR      R1,[SP, #+0]
   \   000000EC   1C0094E5           LDR      R0,[R4, #+28]
   \   000000F0   000050E3           CMP      R0,#+0
   \   000000F4   F18FBD08           POPEQ    {R0,R4-R11,PC}
   1279          
   1280          
   1281            // Цикл по всем контактам
   1282            while(tmp_cpointer->next)
   1283            {
   1284              this_grid = ((CLIST*)tmp_cpointer->next)->group;
   \                     ??FillRoster_7:
   \   000000F8   1C0094E5           LDR      R0,[R4, #+28]
   \   000000FC   1670D0E5           LDRB     R7,[R0, #+22]
   1285              // Получаем текущую группу
   1286              if(cur_gid!=this_grid)
   \   00000100   00009DE5           LDR      R0,[SP, #+0]
   \   00000104   070050E1           CMP      R0,R7
   \   00000108   5200000A           BEQ      ??FillRoster_8
   1287              {
   1288                tmp_gpointer = GetGroupByID(this_grid);
   \   0000010C   0700A0E1           MOV      R0,R7
   \   00000110   ........           _BLF     GetGroupByID,??GetGroupByID??rA
   \   00000114   0060A0E1           MOV      R6,R0
   1289                cur_gid = this_grid;
   \   00000118   00708DE5           STR      R7,[SP, #+0]
   1290                // Создаём псевдоконтакт, вставляем его
   1291                CLIST *gr_pscontact = malloc(sizeof(CLIST));
   \   0000011C   2000A0E3           MOV      R0,#+32
   \   00000120   140000EF           SWI      +20
   \   00000124   0070A0E1           MOV      R7,R0
   1292                gr_pscontact->name = malloc(strlen(tmp_gpointer->name)+1);
   \   00000128   000096E5           LDR      R0,[R6, #+0]
   \   0000012C   1B0000EF           SWI      +27
   \   00000130   010080E2           ADD      R0,R0,#+1
   \   00000134   140000EF           SWI      +20
   \   00000138   100087E5           STR      R0,[R7, #+16]
   1293                gr_pscontact->JID = malloc(strlen(tmp_gpointer->name)+2+(strlen(My_JID_full)));
   \   0000013C   000096E5           LDR      R0,[R6, #+0]
   \   00000140   1B0000EF           SWI      +27
   \   00000144   0090A0E1           MOV      R9,R0
   \   00000148   0800A0E1           MOV      R0,R8
   \   0000014C   1B0000EF           SWI      +27
   \   00000150   000089E0           ADD      R0,R9,R0
   \   00000154   020080E2           ADD      R0,R0,#+2
   \   00000158   140000EF           SWI      +20
   \   0000015C   000087E5           STR      R0,[R7, #+0]
   1294                strcpy(gr_pscontact->name, tmp_gpointer->name);
   \   00000160   001096E5           LDR      R1,[R6, #+0]
   \   00000164   100097E5           LDR      R0,[R7, #+16]
   1295                strcpy(gr_pscontact->JID, tmp_gpointer->name);
   1296                strcat(gr_pscontact->JID, "@"); //присвоим группе несущемтвуюший JID, чтоб не сбивала с толку.
   \   00000168   419F8FE2           ADR      R9,??FillRoster_1+0x8  ;; "@"
   \   0000016C   1A0000EF           SWI      +26
   \   00000170   001096E5           LDR      R1,[R6, #+0]
   \   00000174   000097E5           LDR      R0,[R7, #+0]
   \   00000178   1A0000EF           SWI      +26
   \   0000017C   000097E5           LDR      R0,[R7, #+0]
   \   00000180   0910A0E1           MOV      R1,R9
   \   00000184   170000EF           SWI      +23
   1297                strcat(gr_pscontact->JID, My_JID_full);//но ресурс и контакт должны совпадать
   \   00000188   000097E5           LDR      R0,[R7, #+0]
   \   0000018C   0810A0E1           MOV      R1,R8
   \   00000190   170000EF           SWI      +23
   1298                gr_pscontact->subscription = SUB_BOTH;
   \   00000194   0300A0E3           MOV      R0,#+3
   \   00000198   1400C7E5           STRB     R0,[R7, #+20]
   1299                gr_pscontact->wants_subscription = 0;
   \   0000019C   1550C7E5           STRB     R5,[R7, #+21]
   1300                gr_pscontact->group = cur_gid;
   \   000001A0   00009DE5           LDR      R0,[SP, #+0]
   \   000001A4   1600C7E5           STRB     R0,[R7, #+22]
   1301                gr_pscontact->IsVisible = 1;
   \   000001A8   0100A0E3           MOV      R0,#+1
   \   000001AC   0400C7E5           STRB     R0,[R7, #+4]
   1302                gr_pscontact->ResourceCount=1;
   \   000001B0   080087E5           STR      R0,[R7, #+8]
   1303                gr_pscontact->next=tmp_cpointer->next;  // Вставляем между текущим и следующим
   \   000001B4   1C0094E5           LDR      R0,[R4, #+28]
   \   000001B8   1C0087E5           STR      R0,[R7, #+28]
   1304                gr_pscontact->vcard=NULL; //У группы нет vCard. И никогда не будет.
   \   000001BC   185087E5           STR      R5,[R7, #+24]
   1305                tmp_cpointer->next = gr_pscontact;
   \   000001C0   1C7084E5           STR      R7,[R4, #+28]
   1306          
   1307                // Cоздаём ещё и псевдоресурс
   1308                TRESOURCE* ResEx = malloc(sizeof(TRESOURCE));
   \   000001C4   3000A0E3           MOV      R0,#+48
   \   000001C8   140000EF           SWI      +20
   \   000001CC   00A0A0E1           MOV      R10,R0
   1309                ResEx->vcard = NULL;
   \   000001D0   28508AE5           STR      R5,[R10, #+40]
   1310                ResEx->log=NULL;
   \   000001D4   1C508AE5           STR      R5,[R10, #+28]
   1311                ResEx->next=NULL;
   \   000001D8   2C508AE5           STR      R5,[R10, #+44]
   1312                ResEx->status_msg=NULL;
   \   000001DC   0C508AE5           STR      R5,[R10, #+12]
   1313                ResEx->muc_privs.real_jid=NULL;
   \   000001E0   24508AE5           STR      R5,[R10, #+36]
   1314                ResEx->status = PRESENCE_ONLINE;
   \   000001E4   0950CAE5           STRB     R5,[R10, #+9]
   1315                ResEx->has_unread_msg=0;
   \   000001E8   14508AE5           STR      R5,[R10, #+20]
   1316                ResEx->total_msg_count=0;
   \   000001EC   18508AE5           STR      R5,[R10, #+24]
   1317                ResEx->entry_type=T_GROUP;
   \   000001F0   0500A0E3           MOV      R0,#+5
   \   000001F4   0800CAE5           STRB     R0,[R10, #+8]
   1318                ResEx->name = NULL;
   \   000001F8   00508AE5           STR      R5,[R10, #+0]
   1319                ResEx->full_name = malloc(strlen(tmp_gpointer->name)+2+(strlen(My_JID_full)));
   \   000001FC   000096E5           LDR      R0,[R6, #+0]
   \   00000200   1B0000EF           SWI      +27
   \   00000204   00B0A0E1           MOV      R11,R0
   \   00000208   0800A0E1           MOV      R0,R8
   \   0000020C   1B0000EF           SWI      +27
   \   00000210   00008BE0           ADD      R0,R11,R0
   \   00000214   020080E2           ADD      R0,R0,#+2
   \   00000218   140000EF           SWI      +20
   \   0000021C   04008AE5           STR      R0,[R10, #+4]
   1320                strcpy(ResEx->full_name, tmp_gpointer->name);
   \   00000220   001096E5           LDR      R1,[R6, #+0]
   \   00000224   1A0000EF           SWI      +26
   1321                strcat(ResEx->full_name, "@");
   \   00000228   04009AE5           LDR      R0,[R10, #+4]
   \   0000022C   0910A0E1           MOV      R1,R9
   \   00000230   170000EF           SWI      +23
   1322                strcat(ResEx->full_name, My_JID_full);
   \   00000234   04009AE5           LDR      R0,[R10, #+4]
   \   00000238   0810A0E1           MOV      R1,R8
   \   0000023C   170000EF           SWI      +23
   1323                // Коннектим ресурс к группе
   1324                gr_pscontact->res_list = ResEx;
   1325                NContacts++;
   \   00000240   30009FE5           LDR      R0,??FillRoster_1+0xC  ;; NContacts
   \   00000244   0CA087E5           STR      R10,[R7, #+12]
   \   00000248   001090E5           LDR      R1,[R0, #+0]
   \   0000024C   011081E2           ADD      R1,R1,#+1
   \   00000250   001080E5           STR      R1,[R0, #+0]
   1326                tmp_cpointer = tmp_cpointer->next;
   \   00000254   1C4094E5           LDR      R4,[R4, #+28]
   1327              }
   1328              tmp_cpointer = tmp_cpointer->next;
   \                     ??FillRoster_8:
   \   00000258   1C4094E5           LDR      R4,[R4, #+28]
   1329            }
   \   0000025C   1C0094E5           LDR      R0,[R4, #+28]
   \   00000260   000050E3           CMP      R0,#+0
   \   00000264   A3FFFF1A           BNE      ??FillRoster_7
   1330          
   1331          }
   \   00000268   F18FBDE8           POP      {R0,R4-R11,PC}   ;; return
   \                     ??FillRoster_1:
   \   0000026C   61736B00           DC8      "ask"
   \   00000270   6A696400           DC8      "jid"
   \   00000274   40000000           DC8      "@",+0,+0
   \   00000278   ........           DC32     NContacts
   1332          
   1333          /*
   1334          <iq from='siepatchdb@conference.jabber.ru/Adder' to='kibab612@jabber.ru/SieJC' id='stoat_173' type='get'>
   1335            <query xmlns='jabber:iq:time'/>
   1336          </iq>
   1337          */
   1338          
   1339          /*
   1340            <iq to='sender' type='error'>
   1341            <error type='cancel'>
   1342              <feature-not-implemented xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/>
   1343            </error>
   1344            </iq>
   1345          */
   1346          
   1347          

   \                                 In segment CODE, align 4, keep-with-next
   1348          void Send_Feature_Not_Implemented(char *to, char *id)
   1349          {
   \                     Send_Feature_Not_Implemented:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
   \   00000004   5CD04DE2           SUB      SP,SP,#+92
   \   00000008   0040A0E1           MOV      R4,R0
   \   0000000C   0150A0E1           MOV      R5,R1
   1350            if(!to || !id)return;
   \   00000010   000054E3           CMP      R4,#+0
   \   00000014   00005513           CMPNE    R5,#+0
   \   00000018   2F00000A           BEQ      ??Send_Feature_Not_Implemented_0
   1351            XMLNode *error, *feature;
   1352            char error_t[]="error";
   \   0000001C   C0109FE5           LDR      R1,??Send_Feature_Not_Implemented_1  ;; `?<Constant "error">_1`
   \   00000020   0D00A0E1           MOV      R0,SP
   \   00000024   0C0091E8           LDM      R1,{R2,R3}
   1353            char type_t[]="type";
   \   00000028   B8109FE5           LDR      R1,??Send_Feature_Not_Implemented_1+0x4  ;; `?<Constant "type">_5`
   \   0000002C   0C0080E8           STM      R0,{R2,R3}
   \   00000030   0C0091E8           LDM      R1,{R2,R3}
   1354            char cancel_t[]="cancel";
   \   00000034   B0109FE5           LDR      R1,??Send_Feature_Not_Implemented_1+0x8  ;; `?<Constant "cancel">`
   \   00000038   08008DE2           ADD      R0,SP,#+8
   \   0000003C   0C0080E8           STM      R0,{R2,R3}
   \   00000040   0C0091E8           LDM      R1,{R2,R3}
   1355            char featureni_t[]="feature-not-implemented";
   \   00000044   A4109FE5           LDR      R1,??Send_Feature_Not_Implemented_1+0xC  ;; `?<Constant "feature-not-implemented">`
   \   00000048   10008DE2           ADD      R0,SP,#+16
   \   0000004C   0C0080E8           STM      R0,{R2,R3}
   \   00000050   CC5091E8           LDM      R1,{R2,R3,R6,R7,R12,LR}
   1356            char xmlns_t[]="xmlns";
   \   00000054   98109FE5           LDR      R1,??Send_Feature_Not_Implemented_1+0x10  ;; `?<Constant "xmlns">_11`
   \   00000058   44008DE2           ADD      R0,SP,#+68
   \   0000005C   CC5080E8           STM      R0,{R2,R3,R6,R7,R12,LR}
   \   00000060   0C0091E8           LDM      R1,{R2,R3}
   1357            char urnietf_t[]="urn:ietf:params:xml:ns:xmpp-stanzas";
   \   00000064   8C109FE5           LDR      R1,??Send_Feature_Not_Implemented_1+0x14  ;; `?<Constant "urn:ietf:params:xml:n...">`
   \   00000068   18008DE2           ADD      R0,SP,#+24
   \   0000006C   0C0080E8           STM      R0,{R2,R3}
   \   00000070   CC10B1E8           LDM      R1!,{R2,R3,R6,R7,R12}
   \   00000074   20008DE2           ADD      R0,SP,#+32
   \   00000078   CC10A0E8           STM      R0!,{R2,R3,R6,R7,R12}
   \   0000007C   CC0091E8           LDM      R1,{R2,R3,R6,R7}
   1358            
   1359            feature = XML_CreateNode(featureni_t, NULL);
   \   00000080   0010A0E3           MOV      R1,#+0
   \   00000084   CC0080E8           STM      R0,{R2,R3,R6,R7}
   \   00000088   44008DE2           ADD      R0,SP,#+68
   \   0000008C   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   00000090   0060A0E1           MOV      R6,R0
   1360            XML_Set_Attr_Value(feature, xmlns_t, urnietf_t);
   \   00000094   20208DE2           ADD      R2,SP,#+32
   \   00000098   18108DE2           ADD      R1,SP,#+24
   \   0000009C   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
   1361            error = XML_CreateNode(error_t, NULL);
   \   000000A0   0010A0E3           MOV      R1,#+0
   \   000000A4   0D00A0E1           MOV      R0,SP
   \   000000A8   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   000000AC   0070A0E1           MOV      R7,R0
   1362            XML_Set_Attr_Value(error, type_t, cancel_t);
   \   000000B0   10208DE2           ADD      R2,SP,#+16
   \   000000B4   08108DE2           ADD      R1,SP,#+8
   \   000000B8   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
   1363            error->subnode = feature;
   1364            SendIq(to, IQTYPE_ERR, id, NULL, error);
   \   000000BC   ........           LDR      R1,??DataTable66  ;; `?<Constant "x">_1` + 96
   \   000000C0   046087E5           STR      R6,[R7, #+4]
   \   000000C4   80002DE9           PUSH     {R7}
   \   000000C8   0030A0E3           MOV      R3,#+0
   \   000000CC   0520A0E1           MOV      R2,R5
   \   000000D0   0400A0E1           MOV      R0,R4
   \   000000D4   ........           BL       SendIq
   1365          }
   \   000000D8   04D08DE2           ADD      SP,SP,#+4
   \                     ??Send_Feature_Not_Implemented_0:
   \   000000DC   5CD08DE2           ADD      SP,SP,#+92       ;; stack cleaning
   \   000000E0   F080BDE8           POP      {R4-R7,PC}       ;; return
   \                     ??Send_Feature_Not_Implemented_1:
   \   000000E4   ........           DC32     `?<Constant "error">_1`
   \   000000E8   ........           DC32     `?<Constant "type">_5`
   \   000000EC   ........           DC32     `?<Constant "cancel">`
   \   000000F0   ........           DC32     `?<Constant "feature-not-implemented">`
   \   000000F4   ........           DC32     `?<Constant "xmlns">_11`
   \   000000F8   ........           DC32     `?<Constant "urn:ietf:params:xml:n...">`
   1366          

   \                                 In segment CODE, align 4, keep-with-next
   1367          void Send_Service_Unavailable(char *to, char *id)
   1368          {
   \                     Send_Service_Unavailable:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
   \   00000004   58D04DE2           SUB      SP,SP,#+88
   \   00000008   0040A0E1           MOV      R4,R0
   \   0000000C   0150A0E1           MOV      R5,R1
   1369            if(!to || !id)return;
   \   00000010   000054E3           CMP      R4,#+0
   \   00000014   00005513           CMPNE    R5,#+0
   \   00000018   2F00000A           BEQ      ??Send_Service_Unavailable_0
   1370            XMLNode *error, *feature;
   1371            char error_t[]="error";
   \   0000001C   C0109FE5           LDR      R1,??Send_Service_Unavailable_1  ;; `?<Constant "error">_2`
   \   00000020   0D00A0E1           MOV      R0,SP
   \   00000024   0C0091E8           LDM      R1,{R2,R3}
   1372            char type_t[]="type";
   \   00000028   B8109FE5           LDR      R1,??Send_Service_Unavailable_1+0x4  ;; `?<Constant "type">_6`
   \   0000002C   0C0080E8           STM      R0,{R2,R3}
   \   00000030   0C0091E8           LDM      R1,{R2,R3}
   1373            char cancel_t[]="cancel";
   \   00000034   B0109FE5           LDR      R1,??Send_Service_Unavailable_1+0x8  ;; `?<Constant "cancel">_1`
   \   00000038   08008DE2           ADD      R0,SP,#+8
   \   0000003C   0C0080E8           STM      R0,{R2,R3}
   \   00000040   0C0091E8           LDM      R1,{R2,R3}
   1374            char serviceun_t[]="service-unavailable";
   \   00000044   A4109FE5           LDR      R1,??Send_Service_Unavailable_1+0xC  ;; `?<Constant "service-unavailable">`
   \   00000048   10008DE2           ADD      R0,SP,#+16
   \   0000004C   0C0080E8           STM      R0,{R2,R3}
   \   00000050   CC1091E8           LDM      R1,{R2,R3,R6,R7,R12}
   1375            char xmlns_t[]="xmlns";
   \   00000054   98109FE5           LDR      R1,??Send_Service_Unavailable_1+0x10  ;; `?<Constant "xmlns">_12`
   \   00000058   44008DE2           ADD      R0,SP,#+68
   \   0000005C   CC1080E8           STM      R0,{R2,R3,R6,R7,R12}
   \   00000060   0C0091E8           LDM      R1,{R2,R3}
   1376            char urnietf_t[]="urn:ietf:params:xml:ns:xmpp-stanzas";
   \   00000064   8C109FE5           LDR      R1,??Send_Service_Unavailable_1+0x14  ;; `?<Constant "urn:ietf:params:xml:n...">_1`
   \   00000068   18008DE2           ADD      R0,SP,#+24
   \   0000006C   0C0080E8           STM      R0,{R2,R3}
   \   00000070   CC10B1E8           LDM      R1!,{R2,R3,R6,R7,R12}
   \   00000074   20008DE2           ADD      R0,SP,#+32
   \   00000078   CC10A0E8           STM      R0!,{R2,R3,R6,R7,R12}
   \   0000007C   CC0091E8           LDM      R1,{R2,R3,R6,R7}
   1377            
   1378            feature = XML_CreateNode(serviceun_t, NULL);
   \   00000080   0010A0E3           MOV      R1,#+0
   \   00000084   CC0080E8           STM      R0,{R2,R3,R6,R7}
   \   00000088   44008DE2           ADD      R0,SP,#+68
   \   0000008C   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   00000090   0060A0E1           MOV      R6,R0
   1379            XML_Set_Attr_Value(feature, xmlns_t, urnietf_t);
   \   00000094   20208DE2           ADD      R2,SP,#+32
   \   00000098   18108DE2           ADD      R1,SP,#+24
   \   0000009C   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
   1380            error = XML_CreateNode(error_t, NULL);
   \   000000A0   0010A0E3           MOV      R1,#+0
   \   000000A4   0D00A0E1           MOV      R0,SP
   \   000000A8   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   000000AC   0070A0E1           MOV      R7,R0
   1381            XML_Set_Attr_Value(error, type_t, cancel_t);
   \   000000B0   10208DE2           ADD      R2,SP,#+16
   \   000000B4   08108DE2           ADD      R1,SP,#+8
   \   000000B8   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
   1382            error->subnode = feature;
   1383            SendIq(to, IQTYPE_ERR, id, NULL, error);
   \   000000BC   ........           LDR      R1,??DataTable66  ;; `?<Constant "x">_1` + 96
   \   000000C0   046087E5           STR      R6,[R7, #+4]
   \   000000C4   80002DE9           PUSH     {R7}
   \   000000C8   0030A0E3           MOV      R3,#+0
   \   000000CC   0520A0E1           MOV      R2,R5
   \   000000D0   0400A0E1           MOV      R0,R4
   \   000000D4   ........           BL       SendIq
   1384          }
   \   000000D8   04D08DE2           ADD      SP,SP,#+4
   \                     ??Send_Service_Unavailable_0:
   \   000000DC   58D08DE2           ADD      SP,SP,#+88       ;; stack cleaning
   \   000000E0   F080BDE8           POP      {R4-R7,PC}       ;; return
   \                     ??Send_Service_Unavailable_1:
   \   000000E4   ........           DC32     `?<Constant "error">_2`
   \   000000E8   ........           DC32     `?<Constant "type">_6`
   \   000000EC   ........           DC32     `?<Constant "cancel">_1`
   \   000000F0   ........           DC32     `?<Constant "service-unavailable">`
   \   000000F4   ........           DC32     `?<Constant "xmlns">_12`
   \   000000F8   ........           DC32     `?<Constant "urn:ietf:params:xml:n...">_1`
   1385          
   1386          /*
   1387           Обработка входящих Iq-запросов
   1388          */

   \                                 In segment CODE, align 4, keep-with-next
   1389          void Process_Iq_Request(XMLNode* nodeEx)
   1390          {
   1391            char* iqtype = NULL;
   1392            char* id = NULL;
   1393            char *from = NULL;
   1394            char gget[]=IQTYPE_GET;
   \                     Process_Iq_Request:
   \   00000000   5C1B9FE5           LDR      R1,??Process_Iq_Request_1  ;; `?<Constant "get">_6`
   \   00000004   F04F2DE9           PUSH     {R4-R11,LR}
   \   00000008   9CD04DE2           SUB      SP,SP,#+156
   \   0000000C   002091E5           LDR      R2,[R1, #0]
   1395            char gres[]=IQTYPE_RES;
   \   00000010   501B9FE5           LDR      R1,??Process_Iq_Request_1+0x4  ;; `?<Constant "result">_1`
   \   00000014   0040A0E1           MOV      R4,R0
   \   00000018   0C008DE2           ADD      R0,SP,#+12
   \   0000001C   002080E5           STR      R2,[R0, #+0]
   \   00000020   0C0091E8           LDM      R1,{R2,R3}
   1396            char gerr[]=IQTYPE_ERR;
   \   00000024   401B9FE5           LDR      R1,??Process_Iq_Request_1+0x8  ;; `?<Constant "error">_3`
   \   00000028   20008DE2           ADD      R0,SP,#+32
   \   0000002C   0C0080E8           STM      R0,{R2,R3}
   \   00000030   0C0091E8           LDM      R1,{R2,R3}
   1397            char gset[]=IQTYPE_SET;
   \   00000034   341B9FE5           LDR      R1,??Process_Iq_Request_1+0xC  ;; `?<Constant "set">_1`
   \   00000038   28008DE2           ADD      R0,SP,#+40
   \   0000003C   0C0080E8           STM      R0,{R2,R3}
   \   00000040   002091E5           LDR      R2,[R1, #0]
   1398            const char iq_version[]=IQ_VERSION;
   \   00000044   281B9FE5           LDR      R1,??Process_Iq_Request_1+0x10  ;; `?<Constant "jabber:iq:version">_2`
   \   00000048   10008DE2           ADD      R0,SP,#+16
   \   0000004C   002080E5           STR      R2,[R0, #+0]
   \   00000050   EC0091E8           LDM      R1,{R2,R3,R5-R7}
   1399            const char disco_info[]=DISCO_INFO;
   \   00000054   1C1B9FE5           LDR      R1,??Process_Iq_Request_1+0x14  ;; `?<Constant "http://jabber.org/pro...">_6`
   \   00000058   88008DE2           ADD      R0,SP,#+136
   \   0000005C   EC0080E8           STM      R0,{R2,R3,R5-R7}
   \   00000060   EC00B1E8           LDM      R1!,{R2,R3,R5-R7}
   \   00000064   60008DE2           ADD      R0,SP,#+96
   \   00000068   EC00A0E8           STM      R0!,{R2,R3,R5-R7}
   \   0000006C   EC0091E8           LDM      R1,{R2,R3,R5-R7}
   \   00000070   EC0080E8           STM      R0,{R2,R3,R5-R7}
   1400          
   1401            iqtype = XML_Get_Attr_Value("type",nodeEx->attr);
   \   00000074   0C1094E5           LDR      R1,[R4, #+12]
   \   00000078   ........           LDR      R5,??DataTable67  ;; `?<Constant "x">_1`
   \   0000007C   A70F85E2           ADD      R0,R5,#+668
   \   00000080   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   1402            from = XML_Get_Attr_Value("from",nodeEx->attr);
   \   00000084   0C1094E5           LDR      R1,[R4, #+12]
   \   00000088   0060A0E1           MOV      R6,R0
   \   0000008C   9D0F85E2           ADD      R0,R5,#+628
   \   00000090   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   1403            id = XML_Get_Attr_Value("id",nodeEx->attr);
   \   00000094   0C1094E5           LDR      R1,[R4, #+12]
   \   00000098   0070A0E1           MOV      R7,R0
   \   0000009C   DE0F8FE2           ADR      R0,??Process_Iq_Request_2  ;; "id"
   \   000000A0   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   \   000000A4   0080A0E1           MOV      R8,R0
   1404          
   1405          // Проверяем наличие обязательных атрибутов
   1406          if(!iqtype) return;
   \   000000A8   000056E3           CMP      R6,#+0
   \   000000AC   AA02000A           BEQ      ??Process_Iq_Request_3
   \   000000B0   A99FA0E3           MOV      R9,#+676
   \   000000B4   ABAFA0E3           MOV      R10,#+684
   \   000000B8   0610A0E1           MOV      R1,R6
   \   000000BC   0C008DE2           ADD      R0,SP,#+12
   1407          
   1408          if(!strcmp(gget,iqtype)) // Iq type = get
   \   000000C0   190000EF           SWI      +25
   \   000000C4   000050E3           CMP      R0,#+0
   \   000000C8   9A00001A           BNE      ??Process_Iq_Request_4
   1409          {
   1410            XMLNode* query;
   1411            char* q_type;
   1412            if(query = XML_Get_Child_Node_By_Name(nodeEx, "query"))
   \   000000CC   05108AE0           ADD      R1,R10,R5
   \   000000D0   0400A0E1           MOV      R0,R4
   \   000000D4   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   \   000000D8   000050E3           CMP      R0,#+0
   \   000000DC   6F00000A           BEQ      ??Process_Iq_Request_5
   1413            if(q_type = XML_Get_Attr_Value("xmlns", query->attr))
   \   000000E0   0C1090E5           LDR      R1,[R0, #+12]
   \   000000E4   050089E0           ADD      R0,R9,R5
   \   000000E8   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   \   000000EC   00B0B0E1           MOVS     R11,R0
   \   000000F0   6A00000A           BEQ      ??Process_Iq_Request_5
   1414            {
   1415            // Тут мы знаем XMLNS поступившего запроса
   1416            if(!strcmp(q_type,iq_version))
   \   000000F4   88108DE2           ADD      R1,SP,#+136
   \   000000F8   190000EF           SWI      +25
   \   000000FC   000050E3           CMP      R0,#+0
   \   00000100   1400001A           BNE      ??Process_Iq_Request_6
   1417            {
   1418              // jabber:iq:version
   1419              if(from)
   \   00000104   000057E3           CMP      R7,#+0
   \   00000108   1200000A           BEQ      ??Process_Iq_Request_6
   1420              {
   1421                  // Создаем переменные, чтобы в них записать данные
   1422                  // и безопасно уничтожить в HELPER
   1423          
   1424                char* loc_id = NULL;
   \   0000010C   0040A0E3           MOV      R4,#+0
   1425                if(id)
   \   00000110   000058E3           CMP      R8,#+0
   \   00000114   0600000A           BEQ      ??Process_Iq_Request_7
   1426                  {
   1427                    loc_id=malloc(strlen(id)+1);
   \   00000118   0800A0E1           MOV      R0,R8
   \   0000011C   1B0000EF           SWI      +27
   \   00000120   010080E2           ADD      R0,R0,#+1
   \   00000124   140000EF           SWI      +20
   \   00000128   0040A0E1           MOV      R4,R0
   1428                    strcpy(loc_id,id);
   \   0000012C   0810A0E1           MOV      R1,R8
   \   00000130   1A0000EF           SWI      +26
   1429                  }
   1430                  char* loc_from=malloc(strlen(from)+1);
   \                     ??Process_Iq_Request_7:
   \   00000134   0700A0E1           MOV      R0,R7
   \   00000138   1B0000EF           SWI      +27
   \   0000013C   010080E2           ADD      R0,R0,#+1
   \   00000140   140000EF           SWI      +20
   \   00000144   0050A0E1           MOV      R5,R0
   1431                  strcpy(loc_from,from);
   \   00000148   0710A0E1           MOV      R1,R7
   \   0000014C   1A0000EF           SWI      +26
   1432                  SUBPROC((void*)Report_VersionInfo,loc_id, loc_from);
   \   00000150   240A9FE5           LDR      R0,??Process_Iq_Request_1+0x18  ;; Report_VersionInfo
   \   00000154   180000EA           B        ??Process_Iq_Request_8
   1433                  return;
   1434              }
   1435            } //end version
   1436          
   1437            if(!strcmp(q_type,IQ_TIME))
   \                     ??Process_Iq_Request_6:
   \   00000158   471F85E2           ADD      R1,R5,#+284
   \   0000015C   0B00A0E1           MOV      R0,R11
   \   00000160   190000EF           SWI      +25
   \   00000164   000050E3           CMP      R0,#+0
   \   00000168   1800001A           BNE      ??Process_Iq_Request_9
   1438            {
   1439              // jabber:iq:time
   1440              if(from)
   \   0000016C   000057E3           CMP      R7,#+0
   \   00000170   1600000A           BEQ      ??Process_Iq_Request_9
   1441              {
   1442                  // Создаем переменные, чтобы в них записать данные
   1443                  // и безопасно уничтожить в HELPER
   1444          
   1445                char* loc_id = NULL;
   \   00000174   0040A0E3           MOV      R4,#+0
   1446                if(id)
   \   00000178   000058E3           CMP      R8,#+0
   \   0000017C   0600000A           BEQ      ??Process_Iq_Request_10
   1447                  {
   1448                    loc_id=malloc(strlen(id)+1);
   \   00000180   0800A0E1           MOV      R0,R8
   \   00000184   1B0000EF           SWI      +27
   \   00000188   010080E2           ADD      R0,R0,#+1
   \   0000018C   140000EF           SWI      +20
   \   00000190   0040A0E1           MOV      R4,R0
   1449                    strcpy(loc_id,id);
   \   00000194   0810A0E1           MOV      R1,R8
   \   00000198   1A0000EF           SWI      +26
   1450                  }
   1451                  char* loc_from=malloc(strlen(from)+1);
   \                     ??Process_Iq_Request_10:
   \   0000019C   0700A0E1           MOV      R0,R7
   \   000001A0   1B0000EF           SWI      +27
   \   000001A4   010080E2           ADD      R0,R0,#+1
   \   000001A8   140000EF           SWI      +20
   \   000001AC   0050A0E1           MOV      R5,R0
   1452                  strcpy(loc_from,from);
   \   000001B0   0710A0E1           MOV      R1,R7
   \   000001B4   1A0000EF           SWI      +26
   1453                  SUBPROC((void*)Report_TimeInfo,loc_id, loc_from);
   \   000001B8   C0099FE5           LDR      R0,??Process_Iq_Request_1+0x1C  ;; Report_TimeInfo
   \                     ??Process_Iq_Request_8:
   \   000001BC   0520A0E1           MOV      R2,R5
   \   000001C0   0410A0E1           MOV      R1,R4
   \   000001C4   710100EF           SWI      +369
   \                     ??Process_Iq_Request_11:
   \   000001C8   9CD08DE2           ADD      SP,SP,#+156
   \   000001CC   F08FBDE8           POP      {R4-R11,PC}
   1454                  return;
   1455              }
   1456            }
   1457          
   1458            if(!strcmp(q_type,IQ_IDLE))    // jabber:iq:last
   \                     ??Process_Iq_Request_9:
   \   000001D0   431F85E2           ADD      R1,R5,#+268
   \   000001D4   0B00A0E1           MOV      R0,R11
   \   000001D8   190000EF           SWI      +25
   \   000001DC   000050E3           CMP      R0,#+0
   \   000001E0   1400001A           BNE      ??Process_Iq_Request_12
   1459            {
   1460              if(from)
   \   000001E4   000057E3           CMP      R7,#+0
   \   000001E8   1200000A           BEQ      ??Process_Iq_Request_12
   1461              {
   1462                char* loc_id = NULL;
   \   000001EC   0040A0E3           MOV      R4,#+0
   1463                if(id)
   \   000001F0   000058E3           CMP      R8,#+0
   \   000001F4   0600000A           BEQ      ??Process_Iq_Request_13
   1464                  {
   1465                    loc_id=malloc(strlen(id)+1);
   \   000001F8   0800A0E1           MOV      R0,R8
   \   000001FC   1B0000EF           SWI      +27
   \   00000200   010080E2           ADD      R0,R0,#+1
   \   00000204   140000EF           SWI      +20
   \   00000208   0040A0E1           MOV      R4,R0
   1466                    strcpy(loc_id,id);
   \   0000020C   0810A0E1           MOV      R1,R8
   \   00000210   1A0000EF           SWI      +26
   1467                  }
   1468                  char* loc_from=malloc(strlen(from)+1);
   \                     ??Process_Iq_Request_13:
   \   00000214   0700A0E1           MOV      R0,R7
   \   00000218   1B0000EF           SWI      +27
   \   0000021C   010080E2           ADD      R0,R0,#+1
   \   00000220   140000EF           SWI      +20
   \   00000224   0050A0E1           MOV      R5,R0
   1469                  strcpy(loc_from,from);
   \   00000228   0710A0E1           MOV      R1,R7
   \   0000022C   1A0000EF           SWI      +26
   1470                  SUBPROC((void*)Report_IDLEInfo, loc_id, loc_from);
   \   00000230   4C099FE5           LDR      R0,??Process_Iq_Request_1+0x20  ;; Report_IDLEInfo
   \   00000234   E0FFFFEA           B        ??Process_Iq_Request_8
   1471                  return;
   1472              }
   1473            } //end jabber:iq:last
   1474          
   1475            //entity caps
   1476            if(!strcmp(q_type,disco_info))
   \                     ??Process_Iq_Request_12:
   \   00000238   60108DE2           ADD      R1,SP,#+96
   \   0000023C   0B00A0E1           MOV      R0,R11
   \   00000240   190000EF           SWI      +25
   \   00000244   000050E3           CMP      R0,#+0
   \   00000248   1400001A           BNE      ??Process_Iq_Request_5
   1477            {
   1478              // http://jabber.org/protocol/disco#info
   1479              if(from)
   \   0000024C   000057E3           CMP      R7,#+0
   \   00000250   1200000A           BEQ      ??Process_Iq_Request_5
   1480              {
   1481                  // Создаем переменные, чтобы в них записать данные
   1482                  // и безопасно уничтожить в HELPER
   1483          
   1484                char* loc_id = NULL;
   \   00000254   0040A0E3           MOV      R4,#+0
   1485                if(id)
   \   00000258   000058E3           CMP      R8,#+0
   \   0000025C   0600000A           BEQ      ??Process_Iq_Request_14
   1486                  {
   1487                    loc_id=malloc(strlen(id)+1);
   \   00000260   0800A0E1           MOV      R0,R8
   \   00000264   1B0000EF           SWI      +27
   \   00000268   010080E2           ADD      R0,R0,#+1
   \   0000026C   140000EF           SWI      +20
   \   00000270   0040A0E1           MOV      R4,R0
   1488                    strcpy(loc_id,id);
   \   00000274   0810A0E1           MOV      R1,R8
   \   00000278   1A0000EF           SWI      +26
   1489                  }
   1490                  char* loc_from=malloc(strlen(from)+1);
   \                     ??Process_Iq_Request_14:
   \   0000027C   0700A0E1           MOV      R0,R7
   \   00000280   1B0000EF           SWI      +27
   \   00000284   010080E2           ADD      R0,R0,#+1
   \   00000288   140000EF           SWI      +20
   \   0000028C   0050A0E1           MOV      R5,R0
   1491                  strcpy(loc_from,from);
   \   00000290   0710A0E1           MOV      R1,R7
   \   00000294   1A0000EF           SWI      +26
   1492                  SUBPROC((void*)Report_DiscoInfo,loc_id, loc_from);
   \   00000298   E8089FE5           LDR      R0,??Process_Iq_Request_1+0x24  ;; Report_DiscoInfo
   \   0000029C   C6FFFFEA           B        ??Process_Iq_Request_8
   1493                  return;
   1494              }
   1495            }
   1496           } //end "query" 
   1497           
   1498             if(query = XML_Get_Child_Node_By_Name(nodeEx, "ping"))
   \                     ??Process_Iq_Request_5:
   \   000002A0   AD1F85E2           ADD      R1,R5,#+692
   \   000002A4   0400A0E1           MOV      R0,R4
   \   000002A8   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   \   000002AC   000050E3           CMP      R0,#+0
   \   000002B0   1D00000A           BEQ      ??Process_Iq_Request_15
   1499              if (q_type = XML_Get_Attr_Value("xmlns", query->attr))
   \   000002B4   0C1090E5           LDR      R1,[R0, #+12]
   \   000002B8   050089E0           ADD      R0,R9,R5
   \   000002BC   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   \   000002C0   00B0B0E1           MOVS     R11,R0
   \   000002C4   1800000A           BEQ      ??Process_Iq_Request_15
   1500            if(!strcmp(q_type,JABBER_URN_PING))    // urn:xmpp:ping
   \   000002C8   501F85E2           ADD      R1,R5,#+320
   \   000002CC   190000EF           SWI      +25
   \   000002D0   000050E3           CMP      R0,#+0
   \   000002D4   1400001A           BNE      ??Process_Iq_Request_15
   1501            {
   1502              if(from)
   \   000002D8   000057E3           CMP      R7,#+0
   \   000002DC   1200000A           BEQ      ??Process_Iq_Request_15
   1503              {
   1504                char* loc_id = NULL;
   \   000002E0   0040A0E3           MOV      R4,#+0
   1505                if(id)
   \   000002E4   000058E3           CMP      R8,#+0
   \   000002E8   0600000A           BEQ      ??Process_Iq_Request_16
   1506                  {
   1507                    loc_id=malloc(strlen(id)+1);
   \   000002EC   0800A0E1           MOV      R0,R8
   \   000002F0   1B0000EF           SWI      +27
   \   000002F4   010080E2           ADD      R0,R0,#+1
   \   000002F8   140000EF           SWI      +20
   \   000002FC   0040A0E1           MOV      R4,R0
   1508                    strcpy(loc_id,id);
   \   00000300   0810A0E1           MOV      R1,R8
   \   00000304   1A0000EF           SWI      +26
   1509                  }
   1510                  char* loc_from=malloc(strlen(from)+1);
   \                     ??Process_Iq_Request_16:
   \   00000308   0700A0E1           MOV      R0,R7
   \   0000030C   1B0000EF           SWI      +27
   \   00000310   010080E2           ADD      R0,R0,#+1
   \   00000314   140000EF           SWI      +20
   \   00000318   0050A0E1           MOV      R5,R0
   1511                  strcpy(loc_from,from);
   \   0000031C   0710A0E1           MOV      R1,R7
   \   00000320   1A0000EF           SWI      +26
   1512                  SUBPROC((void*)Report_PING, loc_id, loc_from);
   \   00000324   60089FE5           LDR      R0,??Process_Iq_Request_1+0x28  ;; Report_PING
   \   00000328   A3FFFFEA           B        ??Process_Iq_Request_8
   1513                  return;
   1514              }
   1515            } //end ping
   1516          
   1517            // Ни один обработчик не подошёл, отправляем ошибку.
   1518            Send_Feature_Not_Implemented(from, id);
   \                     ??Process_Iq_Request_15:
   \   0000032C   0810A0E1           MOV      R1,R8
   \   00000330   0700A0E1           MOV      R0,R7
   \   00000334   ........           BL       Send_Feature_Not_Implemented
   \                     ??Process_Iq_Request_4:
   \   00000338   ........           LDR      R11,??DataTable68  ;; auth_id
   \   0000033C   0610A0E1           MOV      R1,R6
   \   00000340   20008DE2           ADD      R0,SP,#+32
   1519          }
   1520          
   1521          
   1522          // Обработка  Iq type = result
   1523          if(!strcmp(gres,iqtype))
   \   00000344   190000EF           SWI      +25
   \   00000348   000050E3           CMP      R0,#+0
   \   0000034C   5801001A           BNE      ??Process_Iq_Request_17
   1524          {
   1525            char bind_id[]="SieJC_bind_req";
   \   00000350   38189FE5           LDR      R1,??Process_Iq_Request_1+0x2C  ;; `?<Constant "SieJC_bind_req">`
   \   00000354   30008DE2           ADD      R0,SP,#+48
   \   00000358   0C5091E8           LDM      R1,{R2,R3,R12,LR}
   1526            char sess_id[]="SieJC_sess_req";
   \   0000035C   30189FE5           LDR      R1,??Process_Iq_Request_1+0x30  ;; `?<Constant "SieJC_sess_req">`
   \   00000360   0C5080E8           STM      R0,{R2,R3,R12,LR}
   \   00000364   0C5091E8           LDM      R1,{R2,R3,R12,LR}
   1527            char disco_id[]="SieJC_discoinfo";
   \   00000368   28189FE5           LDR      R1,??Process_Iq_Request_1+0x34  ;; `?<Constant "SieJC_discoinfo">_1`
   \   0000036C   40008DE2           ADD      R0,SP,#+64
   \   00000370   0C5080E8           STM      R0,{R2,R3,R12,LR}
   \   00000374   0C5091E8           LDM      R1,{R2,R3,R12,LR}
   \   00000378   50008DE2           ADD      R0,SP,#+80
   \   0000037C   0C5080E8           STM      R0,{R2,R3,R12,LR}
   1528          
   1529            if(!strcmp(id, bind_id))
   \   00000380   30108DE2           ADD      R1,SP,#+48
   \   00000384   0800A0E1           MOV      R0,R8
   \   00000388   190000EF           SWI      +25
   \   0000038C   000050E3           CMP      R0,#+0
   \   00000390   0400001A           BNE      ??Process_Iq_Request_18
   1530            {
   1531              Jabber_state = JS_SASL_SESS_INIT_ACK;
   \   00000394   ........           LDR      R0,??DataTable77  ;; Jabber_state
   \   00000398   0910A0E3           MOV      R1,#+9
   \   0000039C   0010C0E5           STRB     R1,[R0, #+0]
   1532              SASL_Init_Session();
   \   000003A0   ........           _BLF     SASL_Init_Session,??SASL_Init_Session??rA
   1533              return;
   \   000003A4   87FFFFEA           B        ??Process_Iq_Request_11
   1534            }
   1535          
   1536            if(!strcmp(id,auth_id) || !strcmp(id, sess_id))   // Авторизация либо конец инициализации сессии
   \                     ??Process_Iq_Request_18:
   \   000003A8   0B10A0E1           MOV      R1,R11
   \   000003AC   0800A0E1           MOV      R0,R8
   \   000003B0   190000EF           SWI      +25
   \   000003B4   000050E3           CMP      R0,#+0
   \   000003B8   0400000A           BEQ      ??Process_Iq_Request_19
   \   000003BC   40108DE2           ADD      R1,SP,#+64
   \   000003C0   0800A0E1           MOV      R0,R8
   \   000003C4   190000EF           SWI      +25
   \   000003C8   000050E3           CMP      R0,#+0
   \   000003CC   1300001A           BNE      ??Process_Iq_Request_20
   1537            {
   1538              Jabber_state = JS_AUTH_OK;
   \                     ??Process_Iq_Request_19:
   \   000003D0   ........           LDR      R0,??DataTable77  ;; Jabber_state
   \   000003D4   0A10A0E3           MOV      R1,#+10
   \   000003D8   0010C0E5           STRB     R1,[R0, #+0]
   1539              if(!cltop)
   \   000003DC   ........           LDR      R0,??DataTable71  ;; cltop
   \   000003E0   000090E5           LDR      R0,[R0, #+0]
   \   000003E4   000050E3           CMP      R0,#+0
   \   000003E8   0900001A           BNE      ??Process_Iq_Request_21
   1540              {
   1541                CList_AddContact(My_JID, "(Me)", SUB_BOTH,0,0);
   \   000003EC   01002DE9           PUSH     {R0}
   \   000003F0   0030A0E3           MOV      R3,#+0
   \   000003F4   0320A0E3           MOV      R2,#+3
   \   000003F8   ........           LDR      R0,??DataTable72  ;; My_JID
   \   000003FC   AF1F85E2           ADD      R1,R5,#+700
   \   00000400   ........           _BLF     CList_AddContact,??CList_AddContact??rA
   1542                SUBPROC((void*)Send_Roster_Query);
   \   00000404   90079FE5           LDR      R0,??Process_Iq_Request_1+0x38  ;; Send_Roster_Query
   \   00000408   710100EF           SWI      +369
   \   0000040C   04D08DE2           ADD      SP,SP,#+4
   \   00000410   6CFFFFEA           B        ??Process_Iq_Request_11
   1543              }
   1544              else Send_Presence_MMIStub();
   \                     ??Process_Iq_Request_21:
   \   00000414   ........           LDR      R0,??DataTable73  ;; Send_Initial_Presence_Helper
   \   00000418   CE0100EA           B        ??Process_Iq_Request_22
   \                     ??Process_Iq_Request_2:
   \   0000041C   69640000           DC8      "id",+0
   1545              return;
   1546            }
   1547          
   1548            if(!strcmp(id,rost_id))   // Запрос ростера
   \                     ??Process_Iq_Request_20:
   \   00000420   10108BE2           ADD      R1,R11,#+16
   \   00000424   0800A0E1           MOV      R0,R8
   \   00000428   190000EF           SWI      +25
   \   0000042C   000050E3           CMP      R0,#+0
   \   00000430   1700001A           BNE      ??Process_Iq_Request_23
   1549            {
   1550              XMLNode* query;
   1551              if(!(query = XML_Get_Child_Node_By_Name(nodeEx, "query")))return;
   \   00000434   05108AE0           ADD      R1,R10,R5
   \   00000438   0400A0E1           MOV      R0,R4
   \   0000043C   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   \   00000440   00008DE5           STR      R0,[SP, #+0]
   \   00000444   000050E3           CMP      R0,#+0
   \   00000448   C301000A           BEQ      ??Process_Iq_Request_3
   \   0000044C   040080E2           ADD      R0,R0,#+4
   \   00000450   081090E5           LDR      R1,[R0, #+8]
   \   00000454   050089E0           ADD      R0,R9,R5
   1552              char* q_type = XML_Get_Attr_Value("xmlns", query->attr);
   \   00000458   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   1553              if(!q_type)return;
   \   0000045C   000050E3           CMP      R0,#+0
   \   00000460   BD01000A           BEQ      ??Process_Iq_Request_3
   1554              if(!strcmp(q_type,IQ_ROSTER))
   \   00000464   541F85E2           ADD      R1,R5,#+336
   \   00000468   190000EF           SWI      +25
   \   0000046C   000050E3           CMP      R0,#+0
   \   00000470   0700001A           BNE      ??Process_Iq_Request_23
   1555              {
   1556                // jabber:iq:roster
   1557                FillRoster(query->subnode);
   \   00000474   00009DE5           LDR      R0,[SP, #+0]
   \   00000478   040090E5           LDR      R0,[R0, #+4]
   \   0000047C   ........           BL       FillRoster
   1558                  // Через секунду запросим презенсы
   1559                extern GBSTMR TMR_Send_Presence;
   1560                GBS_StartTimerProc(&TMR_Send_Presence, TMR_SECOND*1, Send_Presence_MMIStub);
   \   00000480   18279FE5           LDR      R2,??Process_Iq_Request_1+0x3C  ;; Send_Presence_MMIStub
   \   00000484   18079FE5           LDR      R0,??Process_Iq_Request_1+0x40  ;; TMR_Send_Presence
   \   00000488   D810A0E3           MOV      R1,#+216
   \   0000048C   4D0000EF           SWI      +77
   1561                return;
   \   00000490   4CFFFFEA           B        ??Process_Iq_Request_11
   1562              }
   1563            }
   1564          
   1565            if(!strcmp(id,vreq_id))   // Запрос версии (ответ)
   \                     ??Process_Iq_Request_23:
   \   00000494   20108BE2           ADD      R1,R11,#+32
   \   00000498   0800A0E1           MOV      R0,R8
   \   0000049C   190000EF           SWI      +25
   \   000004A0   000050E3           CMP      R0,#+0
   \   000004A4   3300001A           BNE      ??Process_Iq_Request_24
   1566            {
   1567              XMLNode* query;
   1568              if(!(query = XML_Get_Child_Node_By_Name(nodeEx, "query")))return;
   \   000004A8   05108AE0           ADD      R1,R10,R5
   \   000004AC   0400A0E1           MOV      R0,R4
   \   000004B0   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   \   000004B4   00008DE5           STR      R0,[SP, #+0]
   \   000004B8   000050E3           CMP      R0,#+0
   \   000004BC   A601000A           BEQ      ??Process_Iq_Request_3
   1569              char* q_type = XML_Get_Attr_Value("xmlns", query->attr);
   \   000004C0   0C1090E5           LDR      R1,[R0, #+12]
   \   000004C4   050089E0           ADD      R0,R9,R5
   \   000004C8   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   1570              if(!q_type)return;
   \   000004CC   000050E3           CMP      R0,#+0
   \   000004D0   A101000A           BEQ      ??Process_Iq_Request_3
   1571              if(!strcmp(q_type,IQ_VERSION))
   \   000004D4   4B1F85E2           ADD      R1,R5,#+300
   \   000004D8   190000EF           SWI      +25
   \   000004DC   000050E3           CMP      R0,#+0
   \   000004E0   2400001A           BNE      ??Process_Iq_Request_24
   1572              {
   1573                char no_os[]="(no data)";
   \   000004E4   BC169FE5           LDR      R1,??Process_Iq_Request_1+0x44  ;; `?<Constant "(no data)">`
   \   000004E8   14008DE2           ADD      R0,SP,#+20
   \   000004EC   1C0091E8           LDM      R1,{R2-R4}
   1574                char* vers_os_str;
   1575                XMLNode *cl_name=XML_Get_Child_Node_By_Name(query, "name");
   \   000004F0   A31F85E2           ADD      R1,R5,#+652
   \   000004F4   1C0080E8           STM      R0,{R2-R4}
   \   000004F8   00009DE5           LDR      R0,[SP, #+0]
   \   000004FC   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   \   00000500   0040A0E1           MOV      R4,R0
   1576                XMLNode *cl_version=XML_Get_Child_Node_By_Name(query, "version");
   \   00000504   00009DE5           LDR      R0,[SP, #+0]
   \   00000508   B11F85E2           ADD      R1,R5,#+708
   \   0000050C   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   \   00000510   0060A0E1           MOV      R6,R0
   1577                XMLNode *cl_os=XML_Get_Child_Node_By_Name(query, "os");
   \   00000514   00009DE5           LDR      R0,[SP, #+0]
   \   00000518   E21F8FE2           ADR      R1,??Process_Iq_Request_25  ;; "os"
   \   0000051C   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   1578                if(cl_os)
   \   00000520   000050E3           CMP      R0,#+0
   1579                {
   1580                  vers_os_str = cl_os->value;
   \   00000524   10809015           LDRNE    R8,[R0, #+16]
   1581                }
   1582                else
   1583                {
   1584                  vers_os_str=no_os;
   1585                }
   1586                //Формируем сообщение
   1587                char *reply=malloc(512);
   \   00000528   800FA0E3           MOV      R0,#+512
   \   0000052C   14808D02           ADDEQ    R8,SP,#+20
   \   00000530   140000EF           SWI      +20
   \   00000534   0090A0E1           MOV      R9,R0
   1588                snprintf(reply, 512,LG_VERINFO,cl_name->value, cl_version->value, vers_os_str);
   \   00000538   00012DE9           PUSH     {R8}
   \   0000053C   100096E5           LDR      R0,[R6, #+16]
   \   00000540   B32F85E2           ADD      R2,R5,#+716
   \   00000544   01002DE9           PUSH     {R0}
   \   00000548   103094E5           LDR      R3,[R4, #+16]
   \   0000054C   801FA0E3           MOV      R1,#+512
   \   00000550   0900A0E1           MOV      R0,R9
   \                     ??Process_Iq_Request_26:
   \   00000554   1B0100EF           SWI      +283
   1589                CList_AddMessage(from, MSG_SYSTEM, reply);
   \   00000558   0920A0E1           MOV      R2,R9
   \   0000055C   0510A0E3           MOV      R1,#+5
   \   00000560   0700A0E1           MOV      R0,R7
   \   00000564   ........           _BLF     CList_AddMessage,??CList_AddMessage??rA
   1590                mfree(reply);
   \   00000568   0900A0E1           MOV      R0,R9
   \   0000056C   150000EF           SWI      +21
   1591                return;
   \   00000570   08D08DE2           ADD      SP,SP,#+8
   \   00000574   13FFFFEA           B        ??Process_Iq_Request_11
   1592              }
   1593            }
   1594          
   1595              if(!strcmp(id,lastact_id))   // Запрос IDLE (ответ)
   \                     ??Process_Iq_Request_24:
   \   00000578   60108BE2           ADD      R1,R11,#+96
   \   0000057C   0800A0E1           MOV      R0,R8
   \   00000580   190000EF           SWI      +25
   \   00000584   000050E3           CMP      R0,#+0
   \   00000588   4100001A           BNE      ??Process_Iq_Request_27
   1596            {
   1597              XMLNode* query;
   1598              if(!(query = XML_Get_Child_Node_By_Name(nodeEx, "query")))return;
   \   0000058C   05108AE0           ADD      R1,R10,R5
   \   00000590   0400A0E1           MOV      R0,R4
   \   00000594   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   \   00000598   00008DE5           STR      R0,[SP, #+0]
   \   0000059C   000050E3           CMP      R0,#+0
   \   000005A0   6D01000A           BEQ      ??Process_Iq_Request_3
   1599              char* q_type = XML_Get_Attr_Value("xmlns", query->attr);
   \   000005A4   0C1090E5           LDR      R1,[R0, #+12]
   \   000005A8   050089E0           ADD      R0,R9,R5
   \   000005AC   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   1600              if(!q_type)return;
   \   000005B0   000050E3           CMP      R0,#+0
   \   000005B4   6801000A           BEQ      ??Process_Iq_Request_3
   1601              if(!strcmp(q_type,IQ_IDLE))
   \   000005B8   431F85E2           ADD      R1,R5,#+268
   \   000005BC   190000EF           SWI      +25
   \   000005C0   000050E3           CMP      R0,#+0
   \   000005C4   3200001A           BNE      ??Process_Iq_Request_27
   1602              {
   1603                char *cl_sec=XML_Get_Attr_Value("seconds", query->attr);
   \   000005C8   00009DE5           LDR      R0,[SP, #+0]
   \   000005CC   0C1090E5           LDR      R1,[R0, #+12]
   \   000005D0   BD0F85E2           ADD      R0,R5,#+756
   \   000005D4   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   \   000005D8   0060A0E1           MOV      R6,R0
   1604                //Формируем сообщение
   1605                char *reply=malloc(512);
   \   000005DC   800FA0E3           MOV      R0,#+512
   \   000005E0   140000EF           SWI      +20
   1606                unsigned int nsec, nmin, nhr, nd;
   1607                extern const char percent_d[];
   1608                sscanf(cl_sec, percent_d, &nsec);
   \   000005E4   ........           LDR      R1,??DataTable84  ;; percent_d
   \   000005E8   0040A0E1           MOV      R4,R0
   \   000005EC   04208DE2           ADD      R2,SP,#+4
   \   000005F0   0600A0E1           MOV      R0,R6
   \   000005F4   F50100EF           SWI      +501
   1609                nmin = udiv(60, nsec);
   \   000005F8   04109DE5           LDR      R1,[SP, #+4]
   \   000005FC   3C00A0E3           MOV      R0,#+60
   \   00000600   BC0000EF           SWI      +188
   1610                nsec -= nmin*60;
   \   00000604   04109DE5           LDR      R1,[SP, #+4]
   \   00000608   0060A0E1           MOV      R6,R0
   \   0000060C   3C20A0E3           MOV      R2,#+60
   \   00000610   920603E0           MUL      R3,R2,R6
   1611                nhr = udiv(60, nmin);
   \   00000614   3C00A0E3           MOV      R0,#+60
   \   00000618   031041E0           SUB      R1,R1,R3
   \   0000061C   04108DE5           STR      R1,[SP, #+4]
   \   00000620   0610A0E1           MOV      R1,R6
   \   00000624   BC0000EF           SWI      +188
   \   00000628   0080A0E1           MOV      R8,R0
   1612                nmin -= nhr*60;
   1613                nd = udiv(24, nhr);
   \   0000062C   0810A0E1           MOV      R1,R8
   \   00000630   1800A0E3           MOV      R0,#+24
   \   00000634   BC0000EF           SWI      +188
   \   00000638   0030A0E1           MOV      R3,R0
   1614                nhr -= nd*24;
   1615                snprintf(reply, 512,LG_LASTACTIVMSG, nd, nhr, nmin, nsec);
   \   0000063C   04009DE5           LDR      R0,[SP, #+4]
   \   00000640   BF2F85E2           ADD      R2,R5,#+764
   \   00000644   01002DE9           PUSH     {R0}
   \   00000648   3C00A0E3           MOV      R0,#+60
   \   0000064C   900801E0           MUL      R1,R0,R8
   \   00000650   010046E0           SUB      R0,R6,R1
   \   00000654   01002DE9           PUSH     {R0}
   \   00000658   1800A0E3           MOV      R0,#+24
   \   0000065C   900301E0           MUL      R1,R0,R3
   \   00000660   010048E0           SUB      R0,R8,R1
   \   00000664   01002DE9           PUSH     {R0}
   \   00000668   801FA0E3           MOV      R1,#+512
   \   0000066C   0400A0E1           MOV      R0,R4
   \   00000670   1B0100EF           SWI      +283
   1616                CList_AddMessage(from, MSG_SYSTEM, reply);
   \   00000674   0420A0E1           MOV      R2,R4
   \   00000678   0510A0E3           MOV      R1,#+5
   \   0000067C   0700A0E1           MOV      R0,R7
   \   00000680   ........           _BLF     CList_AddMessage,??CList_AddMessage??rA
   1617                mfree(reply);
   \   00000684   0400A0E1           MOV      R0,R4
   \   00000688   150000EF           SWI      +21
   1618                return;
   \   0000068C   0CD08DE2           ADD      SP,SP,#+12
   \   00000690   CCFEFFEA           B        ??Process_Iq_Request_11
   1619              }
   1620            }//end lastactiv
   1621          
   1622              if(!strcmp(id,treq_id))   // Запрос TIME (ответ)
   \                     ??Process_Iq_Request_27:
   \   00000694   40108BE2           ADD      R1,R11,#+64
   \   00000698   0800A0E1           MOV      R0,R8
   \   0000069C   190000EF           SWI      +25
   \   000006A0   000050E3           CMP      R0,#+0
   \   000006A4   2C00001A           BNE      ??Process_Iq_Request_28
   1623            {
   1624              XMLNode* query;
   1625              if(!(query = XML_Get_Child_Node_By_Name(nodeEx, "query")))return;
   \   000006A8   05108AE0           ADD      R1,R10,R5
   \   000006AC   0400A0E1           MOV      R0,R4
   \   000006B0   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   \   000006B4   00008DE5           STR      R0,[SP, #+0]
   \   000006B8   000050E3           CMP      R0,#+0
   \   000006BC   2601000A           BEQ      ??Process_Iq_Request_3
   1626              char* q_type = XML_Get_Attr_Value("xmlns", query->attr);
   \   000006C0   0C1090E5           LDR      R1,[R0, #+12]
   \   000006C4   050089E0           ADD      R0,R9,R5
   \   000006C8   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   1627              if(!q_type)return;
   \   000006CC   000050E3           CMP      R0,#+0
   \   000006D0   2101000A           BEQ      ??Process_Iq_Request_3
   1628              if(!strcmp(q_type,IQ_TIME))
   \   000006D4   471F85E2           ADD      R1,R5,#+284
   \   000006D8   190000EF           SWI      +25
   \   000006DC   000050E3           CMP      R0,#+0
   \   000006E0   1D00001A           BNE      ??Process_Iq_Request_28
   1629              {
   1630                char no_display[]="(no data)";
   \   000006E4   C0149FE5           LDR      R1,??Process_Iq_Request_1+0x48  ;; `?<Constant "(no data)">_1`
   \   000006E8   14008DE2           ADD      R0,SP,#+20
   \   000006EC   1C0091E8           LDM      R1,{R2-R4}
   1631                char* display_str;
   1632                char* tz_str;
   1633                XMLNode *cl_utc=XML_Get_Child_Node_By_Name(query, "utc");
   \   000006F0   6D1F8FE2           ADR      R1,??Process_Iq_Request_25+0x4  ;; "utc"
   \   000006F4   1C0080E8           STM      R0,{R2-R4}
   \   000006F8   00009DE5           LDR      R0,[SP, #+0]
   \   000006FC   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   \   00000700   0040A0E1           MOV      R4,R0
   1634                XMLNode *cl_tz=XML_Get_Child_Node_By_Name(query, "tz");
   \   00000704   00009DE5           LDR      R0,[SP, #+0]
   \   00000708   681F8FE2           ADR      R1,??Process_Iq_Request_25+0x8  ;; "tz"
   \   0000070C   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   \   00000710   0060A0E1           MOV      R6,R0
   1635                XMLNode *cl_display=XML_Get_Child_Node_By_Name(query, "display");
   \   00000714   00009DE5           LDR      R0,[SP, #+0]
   \   00000718   C81F85E2           ADD      R1,R5,#+800
   \   0000071C   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   1636                if(cl_display)
   \   00000720   000050E3           CMP      R0,#+0
   1637                {
   1638                  display_str = cl_display->value;
   \   00000724   10809015           LDRNE    R8,[R0, #+16]
   1639                }
   1640                else
   1641                {
   1642                  display_str=no_display;
   1643                }
   1644                if(cl_tz)
   1645                {
   1646                  tz_str = cl_tz->value;
   1647                }
   1648                else
   1649                {
   1650                  tz_str=no_display;
   1651                }
   1652                //Формируем сообщение
   1653                char *reply=malloc(512);
   \   00000728   800FA0E3           MOV      R0,#+512
   \   0000072C   14808D02           ADDEQ    R8,SP,#+20
   \   00000730   000056E3           CMP      R6,#+0
   \   00000734   10609615           LDRNE    R6,[R6, #+16]
   \   00000738   14608D02           ADDEQ    R6,SP,#+20
   \   0000073C   140000EF           SWI      +20
   \   00000740   0090A0E1           MOV      R9,R0
   1654                snprintf(reply, 512,LG_TIMEINFO,cl_utc->value, tz_str, display_str);
   \   00000744   00012DE9           PUSH     {R8}
   \   00000748   40002DE9           PUSH     {R6}
   \   0000074C   103094E5           LDR      R3,[R4, #+16]
   \   00000750   CA2F85E2           ADD      R2,R5,#+808
   \   00000754   801FA0E3           MOV      R1,#+512
   \   00000758   7DFFFFEA           B        ??Process_Iq_Request_26
   1655                CList_AddMessage(from, MSG_SYSTEM, reply);
   1656                mfree(reply);
   1657                return;
   1658              }
   1659            }
   1660            if(!strcmp(id,vcreq_id))   // Запрос vcard (ответ)
   \                     ??Process_Iq_Request_28:
   \   0000075C   50108BE2           ADD      R1,R11,#+80
   \   00000760   0800A0E1           MOV      R0,R8
   \   00000764   190000EF           SWI      +25
   \   00000768   000050E3           CMP      R0,#+0
   \   0000076C   1100001A           BNE      ??Process_Iq_Request_29
   1661            {
   1662              XMLNode* vcard;
   1663              if(!(vcard = XML_Get_Child_Node_By_Name(nodeEx, "vCard")))return;
   \   00000770   D31F85E2           ADD      R1,R5,#+844
   \   00000774   0400A0E1           MOV      R0,R4
   \   00000778   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   \   0000077C   00008DE5           STR      R0,[SP, #+0]
   \   00000780   000050E3           CMP      R0,#+0
   \   00000784   F400000A           BEQ      ??Process_Iq_Request_3
   1664              char* v_type = XML_Get_Attr_Value("xmlns", vcard->attr);
   \   00000788   0C1090E5           LDR      R1,[R0, #+12]
   \   0000078C   050089E0           ADD      R0,R9,R5
   \   00000790   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   1665              if(!v_type)return;
   \   00000794   000050E3           CMP      R0,#+0
   \   00000798   EF00000A           BEQ      ??Process_Iq_Request_3
   1666              if(!strcmp(v_type,JABBER_VCARD_TEMP))Process_vCard(from, vcard);
   \   0000079C   881085E2           ADD      R1,R5,#+136
   \   000007A0   190000EF           SWI      +25
   \   000007A4   000050E3           CMP      R0,#+0
   \   000007A8   0200001A           BNE      ??Process_Iq_Request_29
   \   000007AC   00109DE5           LDR      R1,[SP, #+0]
   \   000007B0   0700A0E1           MOV      R0,R7
   \   000007B4   ........           _BLF     Process_vCard,??Process_vCard??rA
   1667            }
   1668          /////////////////
   1669            if(!strcmp(id,disco_id))   // Запрос диско (ответ)
   \                     ??Process_Iq_Request_29:
   \   000007B8   50108DE2           ADD      R1,SP,#+80
   \   000007BC   0800A0E1           MOV      R0,R8
   \   000007C0   190000EF           SWI      +25
   \   000007C4   000050E3           CMP      R0,#+0
   \   000007C8   1100001A           BNE      ??Process_Iq_Request_30
   1670            {
   1671              XMLNode* query;
   1672              if(!(query = XML_Get_Child_Node_By_Name(nodeEx, "query")))return;
   \   000007CC   05108AE0           ADD      R1,R10,R5
   \   000007D0   0400A0E1           MOV      R0,R4
   \   000007D4   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   \   000007D8   00008DE5           STR      R0,[SP, #+0]
   \   000007DC   000050E3           CMP      R0,#+0
   \   000007E0   DD00000A           BEQ      ??Process_Iq_Request_3
   1673              char* q_type = XML_Get_Attr_Value("xmlns", query->attr);
   \   000007E4   0C1090E5           LDR      R1,[R0, #+12]
   \   000007E8   050089E0           ADD      R0,R9,R5
   \   000007EC   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   1674              if(!q_type)return;
   \   000007F0   000050E3           CMP      R0,#+0
   \   000007F4   D800000A           BEQ      ??Process_Iq_Request_3
   1675              if(!strcmp(q_type,DISCO_INFO))
   \   000007F8   C41085E2           ADD      R1,R5,#+196
   \   000007FC   190000EF           SWI      +25
   \   00000800   000050E3           CMP      R0,#+0
   \   00000804   0200001A           BNE      ??Process_Iq_Request_30
   1676              {
   1677                Disp_From_Disco(from, query);
   \   00000808   00109DE5           LDR      R1,[SP, #+0]
   \   0000080C   0700A0E1           MOV      R0,R7
   \   00000810   ........           _BLF     Disp_From_Disco,??Disp_From_Disco??rA
   1678              }
   1679            }
   1680          /////////////////
   1681            if(!strcmp(id,priv_id))
   \                     ??Process_Iq_Request_30:
   \   00000814   30108BE2           ADD      R1,R11,#+48
   \   00000818   0800A0E1           MOV      R0,R8
   \   0000081C   190000EF           SWI      +25
   \   00000820   000050E3           CMP      R0,#+0
   \   00000824   2200001A           BNE      ??Process_Iq_Request_17
   1682            {
   1683              XMLNode* query;
   1684              if(!(query = XML_Get_Child_Node_By_Name(nodeEx, "query")))return;
   \   00000828   05108AE0           ADD      R1,R10,R5
   \   0000082C   0400A0E1           MOV      R0,R4
   \   00000830   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   \   00000834   00008DE5           STR      R0,[SP, #+0]
   \   00000838   000050E3           CMP      R0,#+0
   \   0000083C   C600000A           BEQ      ??Process_Iq_Request_3
   1685              char* q_type = XML_Get_Attr_Value("xmlns", query->attr);
   \   00000840   0C1090E5           LDR      R1,[R0, #+12]
   \   00000844   050089E0           ADD      R0,R9,R5
   \   00000848   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   1686              if(!q_type)return;
   \   0000084C   000050E3           CMP      R0,#+0
   \   00000850   C100000A           BEQ      ??Process_Iq_Request_3
   1687              if(!strcmp(q_type,IQ_PRIVATE))
   \   00000854   DC1F85E2           ADD      R1,R5,#+880
   \   00000858   190000EF           SWI      +25
   \   0000085C   000050E3           CMP      R0,#+0
   \   00000860   1300001A           BNE      ??Process_Iq_Request_17
   1688              {
   1689                XMLNode *bm = XML_Get_Child_Node_By_Name(query, "storage");
   \   00000864   00009DE5           LDR      R0,[SP, #+0]
   \   00000868   D51F85E2           ADD      R1,R5,#+852
   \   0000086C   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   \   00000870   0040B0E1           MOVS     R4,R0
   1690                if(!bm)return;
   \   00000874   B800000A           BEQ      ??Process_Iq_Request_3
   1691                char *xmlns = XML_Get_Attr_Value("xmlns", bm->attr);
   \   00000878   0C1094E5           LDR      R1,[R4, #+12]
   \   0000087C   050089E0           ADD      R0,R9,R5
   \   00000880   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   1692                if(!xmlns)return;
   \   00000884   000050E3           CMP      R0,#+0
   \   00000888   B300000A           BEQ      ??Process_Iq_Request_3
   1693                if(!strcmp(xmlns, XMLNS_BOOKMARKS))Process_Bookmarks_Storage(bm);
   \   0000088C   D71F85E2           ADD      R1,R5,#+860
   \   00000890   190000EF           SWI      +25
   \   00000894   000050E3           CMP      R0,#+0
   \   00000898   AF00001A           BNE      ??Process_Iq_Request_3
   \   0000089C   0400A0E1           MOV      R0,R4
   \   000008A0   ........           _BLF     Process_Bookmarks_Storage,??Process_Bookmarks_Storage??rA
   \   000008A4   47FEFFEA           B        ??Process_Iq_Request_11
   \                     ??Process_Iq_Request_25:
   \   000008A8   6F730000           DC8      "os",+0
   \   000008AC   75746300           DC8      "utc"
   \   000008B0   747A0000           DC8      "tz",+0
   1694                return;
   1695              }
   1696            }
   1697          }
   1698          // Обработка  Iq type = set
   1699          if(!strcmp(gset,iqtype))
   \                     ??Process_Iq_Request_17:
   \   000008B4   0610A0E1           MOV      R1,R6
   \   000008B8   10008DE2           ADD      R0,SP,#+16
   \   000008BC   190000EF           SWI      +25
   \   000008C0   000050E3           CMP      R0,#+0
   \   000008C4   1400001A           BNE      ??Process_Iq_Request_31
   1700          {
   1701              XMLNode* query;
   1702              if(query = XML_Get_Child_Node_By_Name(nodeEx, "query"))
   \   000008C8   05108AE0           ADD      R1,R10,R5
   \   000008CC   0400A0E1           MOV      R0,R4
   \   000008D0   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   \   000008D4   000050E3           CMP      R0,#+0
   \   000008D8   0C00000A           BEQ      ??Process_Iq_Request_32
   1703              {
   1704              char* q_type = XML_Get_Attr_Value("xmlns", query->attr);
   \   000008DC   04A080E2           ADD      R10,R0,#+4
   \   000008E0   08109AE5           LDR      R1,[R10, #+8]
   \   000008E4   050089E0           ADD      R0,R9,R5
   \   000008E8   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   1705              if(!q_type)return;
   \   000008EC   000050E3           CMP      R0,#+0
   \   000008F0   9900000A           BEQ      ??Process_Iq_Request_3
   1706          
   1707              if(!strcmp(q_type,IQ_ROSTER))
   \   000008F4   541F85E2           ADD      R1,R5,#+336
   \   000008F8   190000EF           SWI      +25
   \   000008FC   000050E3           CMP      R0,#+0
   \   00000900   0200001A           BNE      ??Process_Iq_Request_32
   1708              {
   1709                // jabber:iq:roster
   1710                ChangeRoster(query->subnode);
   \   00000904   00009AE5           LDR      R0,[R10, #+0]
   \   00000908   ........           BL       ChangeRoster
   1711                return;
   \   0000090C   2DFEFFEA           B        ??Process_Iq_Request_11
   1712              }
   1713              }
   1714              Send_Service_Unavailable(from, id);
   \                     ??Process_Iq_Request_32:
   \   00000910   0810A0E1           MOV      R1,R8
   \   00000914   0700A0E1           MOV      R0,R7
   \   00000918   ........           BL       Send_Service_Unavailable
   1715          }
   1716          
   1717          if(!strcmp(gerr,iqtype)) // Iq type = error
   \                     ??Process_Iq_Request_31:
   \   0000091C   0610A0E1           MOV      R1,R6
   \   00000920   28008DE2           ADD      R0,SP,#+40
   \   00000924   190000EF           SWI      +25
   \   00000928   000050E3           CMP      R0,#+0
   \   0000092C   8A00001A           BNE      ??Process_Iq_Request_3
   1718          {
   1719          
   1720            // Анализируем ошибку
   1721            XMLNode* error = XML_Get_Child_Node_By_Name(nodeEx, "error");
   \   00000930   601085E2           ADD      R1,R5,#+96
   \   00000934   0400A0E1           MOV      R0,R4
   \   00000938   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   1722            if(!error)return;
   \   0000093C   000050E3           CMP      R0,#+0
   \   00000940   8500000A           BEQ      ??Process_Iq_Request_3
   1723            char* errcode = XML_Get_Attr_Value("code", error->attr);
   \   00000944   0C1090E5           LDR      R1,[R0, #+12]
   1724          //  Jabber_state = JS_ERROR;
   1725            if(errcode)
   \   00000948   ........           LDR      R6,??DataTable75  ;; logmsg
   \   0000094C   E10F85E2           ADD      R0,R5,#+900
   \   00000950   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   \   00000954   0040B0E1           MOVS     R4,R0
   \   00000958   6F00000A           BEQ      ??Process_Iq_Request_33
   1726            {
   1727              int errcode_n=0;
   \   0000095C   0010A0E3           MOV      R1,#+0
   \   00000960   00108DE5           STR      R1,[SP, #+0]
   1728              extern const char percent_d[];
   1729              sscanf(errcode,percent_d,&errcode_n);
   \   00000964   ........           LDR      R1,??DataTable84  ;; percent_d
   \   00000968   0D20A0E1           MOV      R2,SP
   \   0000096C   F50100EF           SWI      +501
   1730              {
   1731              switch (errcode_n)
   \   00000970   00009DE5           LDR      R0,[SP, #+0]
   \   00000974   2E0040E2           SUB      R0,R0,#+46
   \   00000978   400F40E2           SUB      R0,R0,#+256
   \   0000097C   CA0050E3           CMP      R0,#+202
   \   00000980   5D00008A           BHI      ??Process_Iq_Request_34
   \   00000984   011F8FE2           ADR      R1,??Process_Iq_Request_0
   \   00000988   0010D1E7           LDRB     R1,[R1, R0]
   \   0000098C   01F18FE0           ADD      PC,PC,R1, LSL #+2
   \                     ??Process_Iq_Request_0:
   \   00000990   325A5A5A           DC8      +50,+90,+90,+90
   \   00000994   5A5A5A5A           DC8      +90,+90,+90,+90
   \   00000998   5A5A5A5A           DC8      +90,+90,+90,+90
   \   0000099C   5A5A5A5A           DC8      +90,+90,+90,+90
   \   000009A0   5A5A5A5A           DC8      +90,+90,+90,+90
   \   000009A4   5A5A5A5A           DC8      +90,+90,+90,+90
   \   000009A8   5A5A5A5A           DC8      +90,+90,+90,+90
   \   000009AC   5A5A5A5A           DC8      +90,+90,+90,+90
   \   000009B0   5A5A5A5A           DC8      +90,+90,+90,+90
   \   000009B4   5A5A5A5A           DC8      +90,+90,+90,+90
   \   000009B8   5A5A5A5A           DC8      +90,+90,+90,+90
   \   000009BC   5A5A5A5A           DC8      +90,+90,+90,+90
   \   000009C0   5A5A5A5A           DC8      +90,+90,+90,+90
   \   000009C4   5A5A5A5A           DC8      +90,+90,+90,+90
   \   000009C8   5A5A5A5A           DC8      +90,+90,+90,+90
   \   000009CC   5A5A5A5A           DC8      +90,+90,+90,+90
   \   000009D0   5A5A5A5A           DC8      +90,+90,+90,+90
   \   000009D4   5A5A5A5A           DC8      +90,+90,+90,+90
   \   000009D8   5A5A5A5A           DC8      +90,+90,+90,+90
   \   000009DC   5A5A5A5A           DC8      +90,+90,+90,+90
   \   000009E0   5A5A5A5A           DC8      +90,+90,+90,+90
   \   000009E4   5A5A5A5A           DC8      +90,+90,+90,+90
   \   000009E8   5A5A5A5A           DC8      +90,+90,+90,+90
   \   000009EC   5A5A5A5A           DC8      +90,+90,+90,+90
   \   000009F0   5A5A3638           DC8      +90,+90,+54,+56
   \   000009F4   3A3C3E40           DC8      +58,+60,+62,+64
   \   000009F8   4446484B           DC8      +68,+70,+72,+75
   \   000009FC   5A5A5A5A           DC8      +90,+90,+90,+90
   \   00000A00   5A5A5A5A           DC8      +90,+90,+90,+90
   \   00000A04   5A5A5A5A           DC8      +90,+90,+90,+90
   \   00000A08   5A5A5A5A           DC8      +90,+90,+90,+90
   \   00000A0C   5A5A5A5A           DC8      +90,+90,+90,+90
   \   00000A10   5A5A5A5A           DC8      +90,+90,+90,+90
   \   00000A14   5A5A5A5A           DC8      +90,+90,+90,+90
   \   00000A18   5A5A5A5A           DC8      +90,+90,+90,+90
   \   00000A1C   5A5A5A5A           DC8      +90,+90,+90,+90
   \   00000A20   5A5A5A5A           DC8      +90,+90,+90,+90
   \   00000A24   5A5A5A5A           DC8      +90,+90,+90,+90
   \   00000A28   5A5A5A5A           DC8      +90,+90,+90,+90
   \   00000A2C   5A5A5A5A           DC8      +90,+90,+90,+90
   \   00000A30   5A5A5A5A           DC8      +90,+90,+90,+90
   \   00000A34   5A5A5A5A           DC8      +90,+90,+90,+90
   \   00000A38   5A5A5A5A           DC8      +90,+90,+90,+90
   \   00000A3C   5A5A5A5A           DC8      +90,+90,+90,+90
   \   00000A40   5A5A5A5A           DC8      +90,+90,+90,+90
   \   00000A44   5A5A5A5A           DC8      +90,+90,+90,+90
   \   00000A48   5A5A5A5A           DC8      +90,+90,+90,+90
   \   00000A4C   5A5A5A5A           DC8      +90,+90,+90,+90
   \   00000A50   5A5A5A5A           DC8      +90,+90,+90,+90
   \   00000A54   5A5A4E50           DC8      +90,+90,+78,+80
   \   00000A58   53555800           DC8      +83,+85,+88,+0
   1732                {
   1733                case JABBER_ERROR_REDIRECT: sprintf(logmsg,LG_JABBER_ERROR_REDIRECT); break;
   \                     ??Process_Iq_Request_35:
   \   00000A5C   E31F85E2           ADD      R1,R5,#+908
   \                     ??Process_Iq_Request_36:
   \   00000A60   0600A0E1           MOV      R0,R6
   \   00000A64   160000EF           SWI      +22
   \   00000A68   280000EA           B        ??Process_Iq_Request_37
   1734                case JABBER_ERROR_BAD_REQUEST: sprintf(logmsg,LG_JABBER_ERROR_BAD_REQUEST); break;
   \                     ??Process_Iq_Request_38:
   \   00000A6C   E61F85E2           ADD      R1,R5,#+920
   \   00000A70   FAFFFFEA           B        ??Process_Iq_Request_36
   1735                case JABBER_ERROR_UNAUTHORIZED: sprintf(logmsg,LG_JABBER_ERROR_UNAUTHORIZED); break;
   \                     ??Process_Iq_Request_39:
   \   00000A74   E91F85E2           ADD      R1,R5,#+932
   \                     ??Process_Iq_Request_40:
   \   00000A78   F8FFFFEA           B        ??Process_Iq_Request_36
   1736                case JABBER_ERROR_PAYMENT_REQUIRED: sprintf(logmsg,LG_JABBER_ERROR_PAYMENT_REQUIRED); break;
   \                     ??Process_Iq_Request_41:
   \   00000A7C   ED1F85E2           ADD      R1,R5,#+948
   \   00000A80   F6FFFFEA           B        ??Process_Iq_Request_36
   1737                case JABBER_ERROR_FORBIDDEN: sprintf(logmsg,LG_JABBER_ERROR_FORBIDDEN); break;
   \                     ??Process_Iq_Request_42:
   \   00000A84   F21F85E2           ADD      R1,R5,#+968
   \   00000A88   F4FFFFEA           B        ??Process_Iq_Request_36
   1738                case JABBER_ERROR_NOT_FOUND: sprintf(logmsg,LG_JABBER_ERROR_NOT_FOUND); break;
   \                     ??Process_Iq_Request_43:
   \   00000A8C   F51F85E2           ADD      R1,R5,#+980
   \   00000A90   F2FFFFEA           B        ??Process_Iq_Request_36
   1739                case JABBER_ERROR_NOT_ALLOWED: sprintf(logmsg,LG_JABBER_ERROR_NOT_ALLOWED); break;
   \                     ??Process_Iq_Request_44:
   \   00000A94   F81F85E2           ADD      R1,R5,#+992
   \                     ??Process_Iq_Request_45:
   \   00000A98   0600A0E1           MOV      R0,R6
   \   00000A9C   160000EF           SWI      +22
   \   00000AA0   1A0000EA           B        ??Process_Iq_Request_37
   1740                case JABBER_ERROR_NOT_ACCEPTABLE: sprintf(logmsg,LG_JABBER_ERROR_NOT_ACCEPTABLE); break;
   \                     ??Process_Iq_Request_46:
   \   00000AA4   FB1F85E2           ADD      R1,R5,#+1004
   \   00000AA8   ECFFFFEA           B        ??Process_Iq_Request_36
   1741                case JABBER_ERROR_REGISTRATION_REQUIRED: sprintf(logmsg,LG_JABBER_ERROR_REGISTRATION_REQUIRED); break;
   \                     ??Process_Iq_Request_47:
   \   00000AAC   FF1F85E2           ADD      R1,R5,#+1020
   \   00000AB0   EAFFFFEA           B        ??Process_Iq_Request_36
   1742                case JABBER_ERROR_REQUEST_TIMEOUT: sprintf(logmsg,LG_JABBER_ERROR_REQUEST_TIMEOUT); break;
   \                     ??Process_Iq_Request_48:
   \   00000AB4   5C0F89E2           ADD      R0,R9,#+368
   \                     ??Process_Iq_Request_49:
   \   00000AB8   051080E0           ADD      R1,R0,R5
   \   00000ABC   E7FFFFEA           B        ??Process_Iq_Request_36
   1743                case JABBER_ERROR_CONFLICT: sprintf(logmsg,LG_JABBER_ERROR_CONFLICT); break;
   \                     ??Process_Iq_Request_50:
   \   00000AC0   600F89E2           ADD      R0,R9,#+384
   \   00000AC4   051080E0           ADD      R1,R0,R5
   \   00000AC8   F2FFFFEA           B        ??Process_Iq_Request_45
   1744                case JABBER_ERROR_INTERNAL_SERVER_ERROR: sprintf(logmsg,LG_JABBER_ERROR_INTERNAL_SERVER_ERROR); break;
   \                     ??Process_Iq_Request_51:
   \   00000ACC   431E85E2           ADD      R1,R5,#+1072
   \   00000AD0   E2FFFFEA           B        ??Process_Iq_Request_36
   1745                case JABBER_ERROR_NOT_IMPLEMENTED: sprintf(logmsg,LG_JABBER_ERROR_NOT_IMPLEMENTED); break;
   \                     ??Process_Iq_Request_52:
   \   00000AD4   690F89E2           ADD      R0,R9,#+420
   \   00000AD8   051080E0           ADD      R1,R0,R5
   \   00000ADC   DFFFFFEA           B        ??Process_Iq_Request_36
   1746                case JABBER_ERROR_REMOTE_SERVER_ERROR: sprintf(logmsg,LG_JABBER_ERROR_REMOTE_SERVER_ERROR); break;
   \                     ??Process_Iq_Request_53:
   \   00000AE0   6D0F89E2           ADD      R0,R9,#+436
   \   00000AE4   F3FFFFEA           B        ??Process_Iq_Request_49
   1747                case JABBER_ERROR_SERVICE_UNAVAILABLE: sprintf(logmsg,LG_JABBER_ERROR_SERVICE_UNAVAILABLE); break;
   \                     ??Process_Iq_Request_54:
   \   00000AE8   720F89E2           ADD      R0,R9,#+456
   \   00000AEC   051080E0           ADD      R1,R0,R5
   \   00000AF0   DAFFFFEA           B        ??Process_Iq_Request_36
   1748                case JABBER_ERROR_REMOTE_SERVER_TIMEOUT: sprintf(logmsg,LG_JABBER_ERROR_REMOTE_SERVER_TIMEOUT); break;
   \                     ??Process_Iq_Request_55:
   \   00000AF4   481E85E2           ADD      R1,R5,#+1152
   \   00000AF8   D8FFFFEA           B        ??Process_Iq_Request_36
   1749                default:sprintf(logmsg,"ERR:%s",errcode);
   \                     ??Process_Iq_Request_34:
   \   00000AFC   0420A0E1           MOV      R2,R4
   \   00000B00   7D0F89E2           ADD      R0,R9,#+500
   \   00000B04   051080E0           ADD      R1,R0,R5
   \   00000B08   0600A0E1           MOV      R0,R6
   \   00000B0C   160000EF           SWI      +22
   1750                }
   1751                MsgBoxError(1,(int)logmsg);
   \                     ??Process_Iq_Request_37:
   \   00000B10   0610A0E1           MOV      R1,R6
   \   00000B14   0100A0E3           MOV      R0,#+1
   \   00000B18   4E0000EF           SWI      +78
   1752              }
   1753            }
   1754            
   1755            if(!strcmp(id,auth_id))
   \                     ??Process_Iq_Request_33:
   \   00000B1C   0B10A0E1           MOV      R1,R11
   \   00000B20   0800A0E1           MOV      R0,R8
   \   00000B24   190000EF           SWI      +25
   \   00000B28   000050E3           CMP      R0,#+0
   \   00000B2C   0A00001A           BNE      ??Process_Iq_Request_3
   1756            {
   1757              Jabber_state = JS_AUTH_ERROR;
   \   00000B30   ........           LDR      R0,??DataTable77  ;; Jabber_state
   \   00000B34   0B10A0E3           MOV      R1,#+11
   \   00000B38   0010C0E5           STRB     R1,[R0, #+0]
   1758              strcat(logmsg,"\nAuth error!");
   \   00000B3C   4A1E85E2           ADD      R1,R5,#+1184
   \   00000B40   0600A0E1           MOV      R0,R6
   \   00000B44   170000EF           SWI      +23
   1759              MsgBoxError(1,(int)logmsg);
   \   00000B48   0610A0E1           MOV      R1,R6
   \   00000B4C   0100A0E3           MOV      R0,#+1
   \   00000B50   4E0000EF           SWI      +78
   1760              extern void end_socket(void);
   1761              SUBPROC((void*)end_socket);
   \   00000B54   54009FE5           LDR      R0,??Process_Iq_Request_1+0x4C  ;; end_socket
   \                     ??Process_Iq_Request_22:
   \   00000B58   710100EF           SWI      +369
   \                     ??Process_Iq_Request_3:
   \   00000B5C   9CD08DE2           ADD      SP,SP,#+156      ;; stack cleaning
   \   00000B60   F08FBDE8           POP      {R4-R11,PC}      ;; return
   \                     ??Process_Iq_Request_1:
   \   00000B64   ........           DC32     `?<Constant "get">_6`
   \   00000B68   ........           DC32     `?<Constant "result">_1`
   \   00000B6C   ........           DC32     `?<Constant "error">_3`
   \   00000B70   ........           DC32     `?<Constant "set">_1`
   \   00000B74   ........           DC32     `?<Constant "jabber:iq:version">_2`
   \   00000B78   ........           DC32     `?<Constant "http://jabber.org/pro...">_6`
   \   00000B7C   ........           DC32     Report_VersionInfo
   \   00000B80   ........           DC32     Report_TimeInfo
   \   00000B84   ........           DC32     Report_IDLEInfo
   \   00000B88   ........           DC32     Report_DiscoInfo
   \   00000B8C   ........           DC32     Report_PING
   \   00000B90   ........           DC32     `?<Constant "SieJC_bind_req">`
   \   00000B94   ........           DC32     `?<Constant "SieJC_sess_req">`
   \   00000B98   ........           DC32     `?<Constant "SieJC_discoinfo">_1`
   \   00000B9C   ........           DC32     Send_Roster_Query
   \   00000BA0   ........           DC32     Send_Presence_MMIStub
   \   00000BA4   ........           DC32     TMR_Send_Presence
   \   00000BA8   ........           DC32     `?<Constant "(no data)">`
   \   00000BAC   ........           DC32     `?<Constant "(no data)">_1`
   \   00000BB0   ........           DC32     end_socket
   1762            }
   1763          }
   1764          }
   1765          /*
   1766          Презенсы :)
   1767          */

   \                                 In segment CODE, align 4, keep-with-next
   1768          void Process_Presence_Change(XMLNode* node)
   1769           {
   1770            // Иар заебал
   1771             extern const char percent_d[];
   1772             extern const int SHOWSTAT_MUCINOUT;
   1773             extern const int SHOWSTAT_MUCCHANGESTAT;
   1774             
   1775          char loc_actor[]="actor";
   \                     Process_Presence_Change:
   \   00000000   98179FE5           LDR      R1,??Process_Presence_Change_0  ;; `?<Constant "actor">`
   \   00000004   F14F2DE9           PUSH     {R0,R4-R11,LR}
   1776          char loc_jid[]="jid";
   1777          char loc_reason[]="reason";
   1778          char loc_xmlns[]="xmlns";
   1779          char loc_x[]="x";
   \   00000008   ........           LDR      R4,??DataTable78  ;; `?<Constant "x">_1`
   \   0000000C   74D04DE2           SUB      SP,SP,#+116
   \   00000010   0C0091E8           LDM      R1,{R2,R3}
   \   00000014   88179FE5           LDR      R1,??Process_Presence_Change_0+0x4  ;; `?<Constant "jid">_2`
   \   00000018   3C008DE2           ADD      R0,SP,#+60
   \   0000001C   0C0080E8           STM      R0,{R2,R3}
   \   00000020   002091E5           LDR      R2,[R1, #0]
   \   00000024   7C179FE5           LDR      R1,??Process_Presence_Change_0+0x8  ;; `?<Constant "reason">`
   \   00000028   28008DE2           ADD      R0,SP,#+40
   \   0000002C   002080E5           STR      R2,[R0, #+0]
   \   00000030   0C0091E8           LDM      R1,{R2,R3}
   \   00000034   70179FE5           LDR      R1,??Process_Presence_Change_0+0xC  ;; `?<Constant "xmlns">_13`
   \   00000038   44008DE2           ADD      R0,SP,#+68
   \   0000003C   0C0080E8           STM      R0,{R2,R3}
   \   00000040   0C0091E8           LDM      R1,{R2,R3}
   \   00000044   34008DE2           ADD      R0,SP,#+52
   \   00000048   0C0080E8           STM      R0,{R2,R3}
   \   0000004C   0010D4E5           LDRB     R1,[R4, #0]
   \   00000050   24008DE2           ADD      R0,SP,#+36
   1780          int priority = 0;
   \   00000054   0090A0E3           MOV      R9,#+0
   \   00000058   0010C0E5           STRB     R1,[R0, #+0]
   \   0000005C   0110D4E5           LDRB     R1,[R4, #+1]
   \   00000060   0110C0E5           STRB     R1,[R0, #+1]
   1781          
   1782            CONF_DATA priv;
   1783            char Req_Set_Role=0;
   1784            char *real_jid = NULL;
   1785            char* from = XML_Get_Attr_Value("from",node->attr);
   \   00000064   74009DE5           LDR      R0,[SP, #+116]
   \   00000068   0010A0E3           MOV      R1,#+0
   \   0000006C   2C108DE5           STR      R1,[SP, #+44]
   \   00000070   0C108DE5           STR      R1,[SP, #+12]
   \   00000074   0C1090E5           LDR      R1,[R0, #+12]
   \   00000078   9D0F84E2           ADD      R0,R4,#+628
   \   0000007C   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   \   00000080   04008DE5           STR      R0,[SP, #+4]
   1786            if(!from)return;
   \   00000084   000050E3           CMP      R0,#+0
   \   00000088   C201000A           BEQ      ??Process_Presence_Change_1
   1787          
   1788            char status;
   1789            char* msg=NULL;
   \   0000008C   0010A0E3           MOV      R1,#+0
   \   00000090   08108DE5           STR      R1,[SP, #+8]
   1790            char* pr_type = XML_Get_Attr_Value("type",node->attr);
   \   00000094   74009DE5           LDR      R0,[SP, #+116]
   \   00000098   0C1090E5           LDR      R1,[R0, #+12]
   \   0000009C   A70F84E2           ADD      R0,R4,#+668
   \   000000A0   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   \   000000A4   000050E3           CMP      R0,#+0
   \   000000A8   0200000A           BEQ      ??Process_Presence_Change_2
   1791            if(pr_type)
   1792            {
   1793              status = GetPresenceIndex(pr_type);
   \   000000AC   ........           BL       GetPresenceIndex
   \   000000B0   FF5000E2           AND      R5,R0,#0xFF
   \   000000B4   1D0000EA           B        ??Process_Presence_Change_3
   1794            }
   1795            else
   1796            {
   1797              XMLNode* status_node = XML_Get_Child_Node_By_Name(node,"show");
   \                     ??Process_Presence_Change_2:
   \   000000B8   74009DE5           LDR      R0,[SP, #+116]
   \   000000BC   4B1E84E2           ADD      R1,R4,#+1200
   \   000000C0   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   1798              if(!status_node)
   \   000000C4   000050E3           CMP      R0,#+0
   \   000000C8   0400001A           BNE      ??Process_Presence_Change_4
   1799              {
   1800                status = PRESENCE_ONLINE;
   1801                extern const char sndOnline[64];
   1802                //Play(sndOnline);
   1803                SUBPROC((void *)Play, sndOnline);
   \   000000CC   DC169FE5           LDR      R1,??Process_Presence_Change_0+0x10  ;; sndOnline
   \   000000D0   ........           LDR      R0,??DataTable91  ;; Play
   \   000000D4   0050A0E3           MOV      R5,#+0
   \   000000D8   710100EF           SWI      +369
   \   000000DC   020000EA           B        ??Process_Presence_Change_5
   1804              }
   1805              else
   1806              {
   1807                status = GetPresenceIndex(status_node->value);
   \                     ??Process_Presence_Change_4:
   \   000000E0   100090E5           LDR      R0,[R0, #+16]
   \   000000E4   ........           BL       GetPresenceIndex
   \   000000E8   FF5000E2           AND      R5,R0,#0xFF
   1808              }
   1809          
   1810              XMLNode* statusmsg_node = XML_Get_Child_Node_By_Name(node,"status");
   \                     ??Process_Presence_Change_5:
   \   000000EC   B800A0E3           MOV      R0,#+184
   \   000000F0   400E80E3           ORR      R0,R0,#0x400
   \   000000F4   041080E0           ADD      R1,R0,R4
   \   000000F8   74009DE5           LDR      R0,[SP, #+116]
   \   000000FC   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   1811              if(statusmsg_node)msg = statusmsg_node->value;
   \   00000100   000050E3           CMP      R0,#+0
   \   00000104   10009015           LDRNE    R0,[R0, #+16]
   1812          
   1813              XMLNode* prio_node = XML_Get_Child_Node_By_Name(node,"priority");
   \   00000108   4C1E84E2           ADD      R1,R4,#+1216
   \   0000010C   08008D15           STRNE    R0,[SP, #+8]
   \   00000110   74009DE5           LDR      R0,[SP, #+116]
   \   00000114   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   1814              if(prio_node)
   \   00000118   000050E3           CMP      R0,#+0
   \   0000011C   0300000A           BEQ      ??Process_Presence_Change_3
   1815               sscanf(prio_node->value,percent_d,&priority);
   \   00000120   ........           LDR      R1,??DataTable84  ;; percent_d
   \   00000124   100090E5           LDR      R0,[R0, #+16]
   \   00000128   2C208DE2           ADD      R2,SP,#+44
   \   0000012C   F50100EF           SWI      +501
   \                     ??Process_Presence_Change_3:
   \   00000130   74009DE5           LDR      R0,[SP, #+116]
   \   00000134   EC3084E2           ADD      R3,R4,#+236
   \   00000138   34208DE2           ADD      R2,SP,#+52
   \   0000013C   24108DE2           ADD      R1,SP,#+36
   1816            }
   1817          
   1818             // Предусматриваем случай, что послано нам что-то от конференции. Это важно.
   1819             XMLNode *x_node;
   1820          
   1821              if(x_node = XML_Get_Child_Node_By_Name_And_Attr(node,loc_x, loc_xmlns, XMLNS_MUC)) // Послано от конференции
   \   00000140   ........           _BLF     XML_Get_Child_Node_By_Name_And_Attr,??XML_Get_Child_Node_By_Name_And_Attr??rA
   \   00000144   000050E3           CMP      R0,#+0
   \   00000148   2D00000A           BEQ      ??Process_Presence_Change_6
   1822              {
   1823                CLIST* Conference = CList_FindContactByJID(from);
   \   0000014C   04009DE5           LDR      R0,[SP, #+4]
   \   00000150   ........           _BLF     CList_FindContactByJID,??CList_FindContactByJID??rA
   \   00000154   0060A0E1           MOV      R6,R0
   1824                // Получаем дочерний узел error (ибо нацелены на обработку именно ошибок)
   1825                XMLNode* err_node = XML_Get_Child_Node_By_Name(node,"error");
   \   00000158   74009DE5           LDR      R0,[SP, #+116]
   \   0000015C   601084E2           ADD      R1,R4,#+96
   \   00000160   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   \   00000164   0080B0E1           MOVS     R8,R0
   1826                if(err_node)  // Есть ошибка!
   \   00000168   2500000A           BEQ      ??Process_Presence_Change_6
   1827                {
   1828                  // Хочу текст ошибки
   1829                  XMLNode* err_desc = XML_Get_Child_Node_By_Name(err_node,"text");
   \   0000016C   CC00A0E3           MOV      R0,#+204
   \   00000170   400E80E3           ORR      R0,R0,#0x400
   \   00000174   041080E0           ADD      R1,R0,R4
   \   00000178   0800A0E1           MOV      R0,R8
   \   0000017C   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   \   00000180   0070B0E1           MOVS     R7,R0
   1830                  if(err_desc)
   \   00000184   1200000A           BEQ      ??Process_Presence_Change_7
   1831                  {
   1832                    if(err_desc->value)msg = err_desc->value;
   \   00000188   100097E5           LDR      R0,[R7, #+16]
   1833                    if (DISPLAY_POPUPS)
   \   0000018C   ........           LDR      R1,??DataTable92  ;; DISPLAY_POPUPS
   \   00000190   000050E3           CMP      R0,#+0
   \   00000194   08008D15           STRNE    R0,[SP, #+8]
   \   00000198   001091E5           LDR      R1,[R1, #+0]
   \   0000019C   000051E3           CMP      R1,#+0
   \   000001A0   0600000A           BEQ      ??Process_Presence_Change_8
   1834                    {
   1835                      char *ansi_r = convUTF8_to_ANSI_STR(err_desc->value);
   \   000001A4   ........           _BLF     convUTF8_to_ANSI_STR,??convUTF8_to_ANSI_STR??rA
   \   000001A8   0080A0E1           MOV      R8,R0
   1836                      MsgBoxError(1,(int)ansi_r);
   \   000001AC   0810A0E1           MOV      R1,R8
   \   000001B0   0100A0E3           MOV      R0,#+1
   \   000001B4   4E0000EF           SWI      +78
   1837                      mfree(ansi_r);
   \   000001B8   0800A0E1           MOV      R0,R8
   \   000001BC   150000EF           SWI      +21
   1838                    }
   1839                    CList_AddSystemMessage(Conference->JID,PRESENCE_OFFLINE, err_desc->value);
   \                     ??Process_Presence_Change_8:
   \   000001C0   102097E5           LDR      R2,[R7, #+16]
   \   000001C4   000096E5           LDR      R0,[R6, #+0]
   \   000001C8   0610A0E3           MOV      R1,#+6
   \   000001CC   ........           _BLF     CList_AddSystemMessage,??CList_AddSystemMessage??rA
   \   000001D0   0B0000EA           B        ??Process_Presence_Change_6
   1840                  }
   1841                  else
   1842                  {
   1843                    char q[40];
   1844                    char *code = XML_Get_Attr_Value("code",err_node->attr);
   \                     ??Process_Presence_Change_7:
   \   000001D4   0C1098E5           LDR      R1,[R8, #+12]
   \   000001D8   E10F84E2           ADD      R0,R4,#+900
   \   000001DC   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   \   000001E0   0020A0E1           MOV      R2,R0
   1845                    sprintf(q,"ERR %s",code);
   \   000001E4   D400A0E3           MOV      R0,#+212
   \   000001E8   400E80E3           ORR      R0,R0,#0x400
   \   000001EC   041080E0           ADD      R1,R0,R4
   \   000001F0   4C008DE2           ADD      R0,SP,#+76
   \   000001F4   160000EF           SWI      +22
   1846                    MsgBoxError(1,(int)q);
   \   000001F8   4C108DE2           ADD      R1,SP,#+76
   \   000001FC   0100A0E3           MOV      R0,#+1
   \   00000200   4E0000EF           SWI      +78
   1847                  }
   1848                }
   1849              }
   1850          
   1851          
   1852          #define MAX_STATUS_LEN 512
   1853          static char r[MAX_STATUS_LEN];       // Статик, чтобы не убило её при завершении процедуры
   1854          
   1855              if(x_node = XML_Get_Child_Node_By_Name_And_Attr(node,loc_x, loc_xmlns, XMLNS_MUC_USER)) // Послано от конференции в пользователя
   \                     ??Process_Presence_Change_6:
   \   00000204   7800A0E3           MOV      R0,#+120
   \   00000208   600E80E3           ORR      R0,R0,#0x600
   \   0000020C   043080E0           ADD      R3,R0,R4
   \   00000210   74009DE5           LDR      R0,[SP, #+116]
   \   00000214   34208DE2           ADD      R2,SP,#+52
   \   00000218   24108DE2           ADD      R1,SP,#+36
   \   0000021C   ........           _BLF     XML_Get_Child_Node_By_Name_And_Attr,??XML_Get_Child_Node_By_Name_And_Attr??rA
   \   00000220   20008DE5           STR      R0,[SP, #+32]
   \   00000224   000050E3           CMP      R0,#+0
   \   00000228   4101000A           BEQ      ??Process_Presence_Change_9
   1856              {
   1857          
   1858                // Получим экземпляр конфы, в которой всё происходит
   1859                CLIST* Conference = CList_FindContactByJID(from);
   \   0000022C   04009DE5           LDR      R0,[SP, #+4]
   \   00000230   ........           _BLF     CList_FindContactByJID,??CList_FindContactByJID??rA
   \   00000234   0060B0E1           MOVS     R6,R0
   1860                if(!Conference)
   \   00000238   5601000A           BEQ      ??Process_Presence_Change_1
   1861                {
   1862                  return;
   1863                }
   1864                MUC_ITEM *MucClist = CList_FindMUCByJID(Conference->JID);
   \   0000023C   000096E5           LDR      R0,[R6, #+0]
   \   00000240   ........           _BLF     CList_FindMUCByJID,??CList_FindMUCByJID??rA
   \   00000244   1C008DE5           STR      R0,[SP, #+28]
   1865                if (!MucClist) return; //нету такой конференции, значит мы ёё несоздавали
   \   00000248   000050E3           CMP      R0,#+0
   \   0000024C   5101000A           BEQ      ??Process_Presence_Change_1
   1866                char* nick = Get_Resource_Name_By_FullJID(from);
   \   00000250   04009DE5           LDR      R0,[SP, #+4]
   1867          
   1868                // Тут можно обрабатывать события входа/выхода в конфу
   1869                // Ибо сообщается, кто вошёл (модер ли, админ...)
   1870                XMLNode* item = XML_Get_Child_Node_By_Name(x_node,"item");
   1871                if(status!=PRESENCE_OFFLINE) // Вход с любым статусом
   \   00000254   ........           LDR      R7,??DataTable93  ;; OnlineInfo
   \   00000258   ........           BL       Get_Resource_Name_By_FullJID
   \   0000025C   0080A0E1           MOV      R8,R0
   \   00000260   DC00A0E3           MOV      R0,#+220
   \   00000264   400E80E3           ORR      R0,R0,#0x400
   \   00000268   041080E0           ADD      R1,R0,R4
   \   0000026C   20009DE5           LDR      R0,[SP, #+32]
   \   00000270   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   \   00000274   10008DE5           STR      R0,[SP, #+16]
   \   00000278   060055E3           CMP      R5,#+6
   \   0000027C   8300000A           BEQ      ??Process_Presence_Change_10
   1872                {
   1873                  TRESOURCE* ResEx = CList_IsResourceInList(from);
   \   00000280   04009DE5           LDR      R0,[SP, #+4]
   \   00000284   ........           _BLF     CList_IsResourceInList,??CList_IsResourceInList??rA
   \   00000288   00008DE5           STR      R0,[SP, #+0]
   1874                  char* affiliation = XML_Get_Attr_Value("affiliation", item->attr);
   \   0000028C   10009DE5           LDR      R0,[SP, #+16]
   \   00000290   0C1090E5           LDR      R1,[R0, #+12]
   \   00000294   E400A0E3           MOV      R0,#+228
   \   00000298   400E80E3           ORR      R0,R0,#0x400
   \   0000029C   040080E0           ADD      R0,R0,R4
   \   000002A0   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   \   000002A4   00A0A0E1           MOV      R10,R0
   1875                  char* role =  XML_Get_Attr_Value("role", item->attr);
   \   000002A8   10009DE5           LDR      R0,[SP, #+16]
   \   000002AC   0C1090E5           LDR      R1,[R0, #+12]
   \   000002B0   4F0E84E2           ADD      R0,R4,#+1264
   \   000002B4   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   \   000002B8   00B0A0E1           MOV      R11,R0
   1876                  real_jid = XML_Get_Attr_Value(loc_jid, item->attr);
   \   000002BC   10009DE5           LDR      R0,[SP, #+16]
   \   000002C0   0C1090E5           LDR      R1,[R0, #+12]
   \   000002C4   28008DE2           ADD      R0,SP,#+40
   \   000002C8   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   \   000002CC   0C008DE5           STR      R0,[SP, #+12]
   1877                  priv.aff = (JABBER_GC_AFFILIATION)GetAffRoleIndex(affiliation);
   \   000002D0   0A00A0E1           MOV      R0,R10
   \   000002D4   ........           BL       GetAffRoleIndex
   \   000002D8   1400CDE5           STRB     R0,[SP, #+20]
   1878                  priv.role = (JABBER_GC_ROLE)GetAffRoleIndex(role);
   \   000002DC   0B00A0E1           MOV      R0,R11
   \   000002E0   ........           BL       GetAffRoleIndex
   \   000002E4   1500CDE5           STRB     R0,[SP, #+21]
   1879          
   1880                  if(ResEx)
   \   000002E8   00009DE5           LDR      R0,[SP, #+0]
   \   000002EC   000050E3           CMP      R0,#+0
   1881                  {
   1882          
   1883                  if(ResEx->status!=PRESENCE_OFFLINE)
   \   000002F0   0900D015           LDRBNE   R0,[R0, #+9]
   \   000002F4   06005013           CMPNE    R0,#+6
   \   000002F8   2B00000A           BEQ      ??Process_Presence_Change_11
   1884                  {
   1885                    if(!(ResEx->muc_privs.aff==priv.aff && ResEx->muc_privs.role==priv.role))
   \   000002FC   00009DE5           LDR      R0,[SP, #+0]
   \   00000300   00109DE5           LDR      R1,[SP, #+0]
   \   00000304   2100D0E5           LDRB     R0,[R0, #+33]
   \   00000308   2010D1E5           LDRB     R1,[R1, #+32]
   \   0000030C   1520DDE5           LDRB     R2,[SP, #+21]
   \   00000310   1430DDE5           LDRB     R3,[SP, #+20]
   \   00000314   030051E1           CMP      R1,R3
   \   00000318   02005001           CMPEQ    R0,R2
   \   0000031C   0F00000A           BEQ      ??Process_Presence_Change_12
   1886                    {
   1887                      sprintf(r, "%s is now %s and %s [%d->%d, %d->%d]", nick, affiliation, role, ResEx->muc_privs.aff, priv.aff, ResEx->muc_privs.role, priv.role);
   \   00000320   04002DE9           PUSH     {R2}
   \   00000324   01002DE9           PUSH     {R0}
   1888                      Req_Set_Role = 1;
   \   00000328   0190A0E3           MOV      R9,#+1
   \   0000032C   0820A0E1           MOV      R2,R8
   \   00000330   0300A0E1           MOV      R0,R3
   \   00000334   01002DE9           PUSH     {R0}
   \   00000338   02002DE9           PUSH     {R1}
   \   0000033C   00082DE9           PUSH     {R11}
   \   00000340   0A30A0E1           MOV      R3,R10
   \   00000344   F800A0E3           MOV      R0,#+248
   \   00000348   400E80E3           ORR      R0,R0,#0x400
   \   0000034C   041080E0           ADD      R1,R0,R4
   \   00000350   3C0087E2           ADD      R0,R7,#+60
   \   00000354   160000EF           SWI      +22
   \   00000358   14D08DE2           ADD      SP,SP,#+20
   \   0000035C   290000EA           B        ??Process_Presence_Change_13
   1889                    }
   \                     ??Process_Presence_Change_12:
   \   00000360   050187E0           ADD      R0,R7,R5, LSL #+2
   \   00000364   083090E5           LDR      R3,[R0, #+8]
   \   00000368   08009DE5           LDR      R0,[SP, #+8]
   \   0000036C   000050E3           CMP      R0,#+0
   \   00000370   0800000A           BEQ      ??Process_Presence_Change_14
   1890                    else
   1891                    {
   1892                      if(msg)
   1893                      {
   1894                        snprintf(r, MAX_STATUS_LEN, "%s changed status to %s (%s)", nick, PRESENCES[status], msg);
   \   00000374   01002DE9           PUSH     {R0}
   \   00000378   08002DE9           PUSH     {R3}
   \   0000037C   522E84E2           ADD      R2,R4,#+1312
   \   00000380   801FA0E3           MOV      R1,#+512
   \   00000384   3C0087E2           ADD      R0,R7,#+60
   \   00000388   0830A0E1           MOV      R3,R8
   \   0000038C   1B0100EF           SWI      +283
   \                     ??Process_Presence_Change_15:
   \   00000390   08D08DE2           ADD      SP,SP,#+8        ;; stack cleaning
   \   00000394   1B0000EA           B        ??Process_Presence_Change_13
   1895                      }
   1896                      else
   1897                      {
   1898                        sprintf(r, "%s changed status to %s", nick, PRESENCES[status]);
   \                     ??Process_Presence_Change_14:
   \   00000398   0820A0E1           MOV      R2,R8
   \   0000039C   541E84E2           ADD      R1,R4,#+1344
   \   000003A0   3C0087E2           ADD      R0,R7,#+60
   \   000003A4   160000EF           SWI      +22
   \   000003A8   160000EA           B        ??Process_Presence_Change_13
   1899                      }
   1900                    }
   1901                  }
   1902                  else if(real_jid)  //если знаем реальный jid, выводим его
   \                     ??Process_Presence_Change_11:
   \   000003AC   0C009DE5           LDR      R0,[SP, #+12]
   \   000003B0   00082DE9           PUSH     {R11}
   \   000003B4   000050E3           CMP      R0,#+0
   \   000003B8   0900000A           BEQ      ??Process_Presence_Change_16
   1903                  {
   1904                    sprintf(r, "%s (%s) joined as %s and %s", nick, real_jid, affiliation, role);
   \   000003BC   00042DE9           PUSH     {R10}
   \   000003C0   0030A0E1           MOV      R3,R0
   \   000003C4   0820A0E1           MOV      R2,R8
   \   000003C8   5800A0E3           MOV      R0,#+88
   \   000003CC   500E80E3           ORR      R0,R0,#0x500
   \   000003D0   041080E0           ADD      R1,R0,R4
   \   000003D4   3C0087E2           ADD      R0,R7,#+60
   \   000003D8   160000EF           SWI      +22
   1905                    Req_Set_Role = 1;
   \   000003DC   0190A0E3           MOV      R9,#+1
   \   000003E0   EAFFFFEA           B        ??Process_Presence_Change_15
   1906                  }
   1907                  else
   1908                  {
   1909                    sprintf(r, "%s joined as %s and %s", nick, affiliation, role);
   \                     ??Process_Presence_Change_16:
   \   000003E4   0A30A0E1           MOV      R3,R10
   \   000003E8   0820A0E1           MOV      R2,R8
   \   000003EC   7400A0E3           MOV      R0,#+116
   \   000003F0   500E80E3           ORR      R0,R0,#0x500
   \   000003F4   041080E0           ADD      R1,R0,R4
   \   000003F8   3C0087E2           ADD      R0,R7,#+60
   \   000003FC   160000EF           SWI      +22
   1910                    Req_Set_Role = 1;
   \   00000400   0190A0E3           MOV      R9,#+1
   \   00000404   04D08DE2           ADD      SP,SP,#+4
   1911                  }
   1912          
   1913                  }
   1914                  else 
   1915                  {
   1916                    if(real_jid)
   1917                  {
   1918                    sprintf(r, "%s (%s) joined as %s and %s", nick, real_jid, affiliation, role);
   1919                    Req_Set_Role = 1;
   1920                  }
   1921                  else
   1922                  {
   1923                    sprintf(r, "%s joined as %s and %s", nick, affiliation, role);
   1924                    Req_Set_Role = 1;
   1925                  }
   1926                  };
   1927          
   1928                  char* my_nick = Get_Resource_Name_By_FullJID(MucClist->conf_jid);
   \                     ??Process_Presence_Change_13:
   \   00000408   1C009DE5           LDR      R0,[SP, #+28]
   \   0000040C   000090E5           LDR      R0,[R0, #+0]
   \   00000410   ........           BL       Get_Resource_Name_By_FullJID
   \   00000414   0010A0E1           MOV      R1,R0
   1929                  if ((!strcmp(nick,my_nick))&&(Conference->res_list->status==PRESENCE_OFFLINE)) //если ето мы, входим в нее.
   \   00000418   0800A0E1           MOV      R0,R8
   \   0000041C   190000EF           SWI      +25
   \   00000420   000050E3           CMP      R0,#+0
   \   00000424   0A00001A           BNE      ??Process_Presence_Change_17
   \   00000428   0C0096E5           LDR      R0,[R6, #+12]
   \   0000042C   0910D0E5           LDRB     R1,[R0, #+9]
   \   00000430   060051E3           CMP      R1,#+6
   \   00000434   0600001A           BNE      ??Process_Presence_Change_17
   1930                  {
   1931                    Conference->res_list->status=PRESENCE_ONLINE;
   \   00000438   0010A0E3           MOV      R1,#+0
   \   0000043C   0910C0E5           STRB     R1,[R0, #+9]
   1932                    ShowMSG(1,(int)LG_MUCCROK);
   \   00000440   8C00A0E3           MOV      R0,#+140
   \   00000444   500E80E3           ORR      R0,R0,#0x500
   \   00000448   041080E0           ADD      R1,R0,R4
   \   0000044C   0100A0E3           MOV      R0,#+1
   \   00000450   480100EF           SWI      +328
   1933                  };
   1934                  if((SHOWSTAT_MUCINOUT&&Req_Set_Role)||(SHOWSTAT_MUCCHANGESTAT&&!Req_Set_Role))
   \                     ??Process_Presence_Change_17:
   \   00000454   58039FE5           LDR      R0,??Process_Presence_Change_0+0x14  ;; SHOWSTAT_MUCINOUT
   \   00000458   000090E5           LDR      R0,[R0, #+0]
   \   0000045C   000050E3           CMP      R0,#+0
   \   00000460   00005913           CMPNE    R9,#+0
   \   00000464   0500001A           BNE      ??Process_Presence_Change_18
   \   00000468   48039FE5           LDR      R0,??Process_Presence_Change_0+0x18  ;; SHOWSTAT_MUCCHANGESTAT
   \   0000046C   000090E5           LDR      R0,[R0, #+0]
   \   00000470   000050E3           CMP      R0,#+0
   \   00000474   0500000A           BEQ      ??Process_Presence_Change_10
   \   00000478   000059E3           CMP      R9,#+0
   \   0000047C   0300001A           BNE      ??Process_Presence_Change_10
   1935                   CList_AddSystemMessage(Conference->JID,PRESENCE_ONLINE, r);
   \                     ??Process_Presence_Change_18:
   \   00000480   000096E5           LDR      R0,[R6, #+0]
   \   00000484   3C2087E2           ADD      R2,R7,#+60
   \   00000488   0010A0E3           MOV      R1,#+0
   \   0000048C   ........           _BLF     CList_AddSystemMessage,??CList_AddSystemMessage??rA
   1936                }
   1937          
   1938          
   1939                if(status==PRESENCE_OFFLINE) // Выход
   \                     ??Process_Presence_Change_10:
   \   00000490   060055E3           CMP      R5,#+6
   \   00000494   3000001A           BNE      ??Process_Presence_Change_19
   1940                {
   1941                  XMLNode* statusmsg_node = XML_Get_Child_Node_By_Name(node,"status");
   \   00000498   B800A0E3           MOV      R0,#+184
   \   0000049C   400E80E3           ORR      R0,R0,#0x400
   \   000004A0   041080E0           ADD      R1,R0,R4
   \   000004A4   74009DE5           LDR      R0,[SP, #+116]
   \   000004A8   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   1942                  if (!statusmsg_node)
   \   000004AC   A810A0E3           MOV      R1,#+168
   \   000004B0   501E81E3           ORR      R1,R1,#0x500
   \   000004B4   000050E3           CMP      R0,#+0
   1943                    sprintf(r, "%s left us", nick);
   \   000004B8   0820A001           MOVEQ    R2,R8
   \   000004BC   0800000A           BEQ      ??Process_Presence_Change_20
   1944                  else 
   1945                  {
   1946                   if(statusmsg_node->value) sprintf(r, "%s left us (%s)", nick, statusmsg_node->value);
   \   000004C0   103090E5           LDR      R3,[R0, #+16]
   \   000004C4   0820A0E1           MOV      R2,R8
   \   000004C8   000053E3           CMP      R3,#+0
   \   000004CC   0400000A           BEQ      ??Process_Presence_Change_20
   \   000004D0   0C0081E2           ADD      R0,R1,#+12
   \   000004D4   041080E0           ADD      R1,R0,R4
   \   000004D8   3C0087E2           ADD      R0,R7,#+60
   \   000004DC   160000EF           SWI      +22
   \   000004E0   020000EA           B        ??Process_Presence_Change_21
   1947                     else sprintf(r, "%s left us", nick);
   \                     ??Process_Presence_Change_20:
   \   000004E4   041081E0           ADD      R1,R1,R4
   \   000004E8   3C0087E2           ADD      R0,R7,#+60
   \   000004EC   160000EF           SWI      +22
   1948                  }
   1949          
   1950                  char* my_nick = Get_Resource_Name_By_FullJID(MucClist->conf_jid);
   \                     ??Process_Presence_Change_21:
   \   000004F0   1C009DE5           LDR      R0,[SP, #+28]
   \   000004F4   000090E5           LDR      R0,[R0, #+0]
   \   000004F8   ........           BL       Get_Resource_Name_By_FullJID
   1951                  if (!strcmp(nick,my_nick)) //если ето мы, удаляем конфу.
   \   000004FC   0010A0E1           MOV      R1,R0
   \   00000500   0800A0E1           MOV      R0,R8
   \   00000504   190000EF           SWI      +25
   \   00000508   000050E3           CMP      R0,#+0
   \   0000050C   0300001A           BNE      ??Process_Presence_Change_22
   1952                  {
   1953                    Leave_Conference(Conference->JID);
   \   00000510   000096E5           LDR      R0,[R6, #+0]
   \   00000514   ........           BL       Leave_Conference
   1954                    CList_MakeAllResourcesOFFLINE(Conference);
   \   00000518   0600A0E1           MOV      R0,R6
   \   0000051C   ........           _BLF     CList_MakeAllResourcesOFFLINE,??CList_MakeAllResourcesOFFLINE??rA
   1955                  };
   1956                  extern const char sndOffline[64];
   1957                  //Play(sndOffline);
   1958                  SUBPROC((void *)Play, sndOffline);
   \                     ??Process_Presence_Change_22:
   \   00000520   94129FE5           LDR      R1,??Process_Presence_Change_0+0x1C  ;; sndOffline
   \   00000524   ........           LDR      R0,??DataTable91  ;; Play
   \   00000528   710100EF           SWI      +369
   1959                  if(SHOWSTAT_MUCINOUT)
   \   0000052C   80029FE5           LDR      R0,??Process_Presence_Change_0+0x14  ;; SHOWSTAT_MUCINOUT
   \   00000530   000090E5           LDR      R0,[R0, #+0]
   \   00000534   000050E3           CMP      R0,#+0
   \   00000538   0300000A           BEQ      ??Process_Presence_Change_23
   1960                    CList_AddSystemMessage(Conference->JID,PRESENCE_OFFLINE, r);
   \   0000053C   000096E5           LDR      R0,[R6, #+0]
   \   00000540   3C2087E2           ADD      R2,R7,#+60
   \   00000544   0610A0E3           MOV      R1,#+6
   \   00000548   ........           _BLF     CList_AddSystemMessage,??CList_AddSystemMessage??rA
   1961                  priv.role = ROLE_NONE;
   \                     ??Process_Presence_Change_23:
   \   0000054C   0010A0E3           MOV      R1,#+0
   \   00000550   1510CDE5           STRB     R1,[SP, #+21]
   1962                  priv.aff  = AFFILIATION_NONE;
   \   00000554   1410CDE5           STRB     R1,[SP, #+20]
   1963                  Req_Set_Role = 1;
   \   00000558   0190A0E3           MOV      R9,#+1
   1964                }
   1965          
   1966                // Получаем дочерний узел статуса
   1967                XMLNode* sstatus = XML_Get_Child_Node_By_Name(x_node,"status");
   \                     ??Process_Presence_Change_19:
   \   0000055C   B800A0E3           MOV      R0,#+184
   \   00000560   400E80E3           ORR      R0,R0,#0x400
   \   00000564   041080E0           ADD      R1,R0,R4
   \   00000568   20009DE5           LDR      R0,[SP, #+32]
   \   0000056C   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   1968                if(sstatus)  // Есть статус!
   \   00000570   000050E3           CMP      R0,#+0
   \   00000574   6E00000A           BEQ      ??Process_Presence_Change_9
   1969                {
   1970                  // Получаем код статуса
   1971                  char* st_code=XML_Get_Attr_Value("code", sstatus->attr);
   \   00000578   0C1090E5           LDR      R1,[R0, #+12]
   \   0000057C   E10F84E2           ADD      R0,R4,#+900
   \   00000580   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   \   00000584   00A0A0E1           MOV      R10,R0
   1972                  int errcode_n=0;
   \   00000588   0010A0E3           MOV      R1,#+0
   \   0000058C   00108DE5           STR      R1,[SP, #+0]
   1973                  extern const char percent_d[];
   1974                  sscanf(st_code,percent_d,&errcode_n);
   \   00000590   ........           LDR      R1,??DataTable84  ;; percent_d
   \   00000594   0D20A0E1           MOV      R2,SP
   \   00000598   F50100EF           SWI      +501
   1975                  // Разные коды статусов - разное варенье:)
   1976                  switch (errcode_n)
   \   0000059C   00009DE5           LDR      R0,[SP, #+0]
   \   000005A0   C90050E2           SUBS     R0,R0,#+201
   \   000005A4   2200000A           BEQ      ??Process_Presence_Change_24
   \   000005A8   640050E2           SUBS     R0,R0,#+100
   \   000005AC   0D00000A           BEQ      ??Process_Presence_Change_25
   \   000005B0   020050E2           SUBS     R0,R0,#+2
   \   000005B4   1200000A           BEQ      ??Process_Presence_Change_26
   \   000005B8   040050E2           SUBS     R0,R0,#+4
   \   000005BC   0200000A           BEQ      ??Process_Presence_Change_27
   \   000005C0   0F0050E2           SUBS     R0,R0,#+15
   \   000005C4   0A00000A           BEQ      ??Process_Presence_Change_28
   \   000005C8   1D0000EA           B        ??Process_Presence_Change_29
   1977                  {
   1978                   case MUCST_KICKED:  sprintf(r, LG_MUCST_R_KICK,nick); break; // Сообщение о кике
   \                     ??Process_Presence_Change_27:
   \   000005CC   0820A0E1           MOV      R2,R8
   \   000005D0   C400A0E3           MOV      R0,#+196
   \                     ??Process_Presence_Change_30:
   \   000005D4   500E80E3           ORR      R0,R0,#0x500
   \                     ??Process_Presence_Change_31:
   \   000005D8   041080E0           ADD      R1,R0,R4
   \   000005DC   3C0087E2           ADD      R0,R7,#+60
   \   000005E0   160000EF           SWI      +22
   \   000005E4   1B0000EA           B        ??Process_Presence_Change_32
   1979                   case MUCST_BANNED: sprintf(r, LG_MUCST_R_BAN, nick); break;// Сообщение о бане
   \                     ??Process_Presence_Change_25:
   \   000005E8   0820A0E1           MOV      R2,R8
   \   000005EC   D400A0E3           MOV      R0,#+212
   \   000005F0   F7FFFFEA           B        ??Process_Presence_Change_30
   1980                   case MUCST_KICKED_MEMB_ONLY: sprintf(r, LG_MUCST_R_KICK_MEMB_ONLY, nick); break; // Сообщение о кике из мембер-онли румы
   \                     ??Process_Presence_Change_28:
   \   000005F4   0820A0E1           MOV      R2,R8
   \   000005F8   E400A0E3           MOV      R0,#+228
   \   000005FC   500E80E3           ORR      R0,R0,#0x500
   \   00000600   F4FFFFEA           B        ??Process_Presence_Change_31
   1981                   case MUCST_CHNICK: sprintf(r, LG_MUCST_R_CHNICK, nick,  XML_Get_Attr_Value("nick", item->attr)); break; // Сообщение о смене ника
   \                     ??Process_Presence_Change_26:
   \   00000604   10009DE5           LDR      R0,[SP, #+16]
   \   00000608   0C1090E5           LDR      R1,[R0, #+12]
   \   0000060C   2C00A0E3           MOV      R0,#+44
   \   00000610   600E80E3           ORR      R0,R0,#0x600
   \   00000614   040080E0           ADD      R0,R0,R4
   \   00000618   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   \   0000061C   0030A0E1           MOV      R3,R0
   \   00000620   0820A0E1           MOV      R2,R8
   \   00000624   1400A0E3           MOV      R0,#+20
   \   00000628   600E80E3           ORR      R0,R0,#0x600
   \   0000062C   041080E0           ADD      R1,R0,R4
   \   00000630   060000EA           B        ??Process_Presence_Change_33
   1982                   case MUCST_MUCCREATED: sprintf(r, LG_MUCST_MUCCREATED, nick); break; // Сообщение о бане
   \                     ??Process_Presence_Change_24:
   \   00000634   0820A0E1           MOV      R2,R8
   \   00000638   3400A0E3           MOV      R0,#+52
   \   0000063C   600E80E3           ORR      R0,R0,#0x600
   \   00000640   E4FFFFEA           B        ??Process_Presence_Change_31
   1983                   default: sprintf(r,"%s - [unknow action(%s)]",nick, st_code);
   \                     ??Process_Presence_Change_29:
   \   00000644   0A30A0E1           MOV      R3,R10
   \   00000648   0820A0E1           MOV      R2,R8
   \   0000064C   651E84E2           ADD      R1,R4,#+1616
   \                     ??Process_Presence_Change_33:
   \   00000650   3C0087E2           ADD      R0,R7,#+60
   \   00000654   160000EF           SWI      +22
   1984                  }
   1985                  XMLNode* item = XML_Get_Child_Node_By_Name(x_node,"item");
   \                     ??Process_Presence_Change_32:
   \   00000658   DC00A0E3           MOV      R0,#+220
   \   0000065C   400E80E3           ORR      R0,R0,#0x400
   \   00000660   041080E0           ADD      R1,R0,R4
   \   00000664   20009DE5           LDR      R0,[SP, #+32]
   \   00000668   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   \   0000066C   0080B0E1           MOVS     R8,R0
   1986                  if(item)
   \   00000670   1D00000A           BEQ      ??Process_Presence_Change_34
   1987                  {
   1988                    XMLNode* actor = XML_Get_Child_Node_By_Name(item,loc_actor); // Вдруг сервис был настолько любезен, что соообщил исполнителя
   \   00000674   3C108DE2           ADD      R1,SP,#+60
   \   00000678   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   1989                    if(actor)strcat(r, XML_Get_Attr_Value(loc_jid, actor->attr));
   \   0000067C   000050E3           CMP      R0,#+0
   \   00000680   0500000A           BEQ      ??Process_Presence_Change_35
   \   00000684   0C1090E5           LDR      R1,[R0, #+12]
   \   00000688   28008DE2           ADD      R0,SP,#+40
   \   0000068C   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   \   00000690   0010A0E1           MOV      R1,R0
   \   00000694   3C0087E2           ADD      R0,R7,#+60
   \   00000698   170000EF           SWI      +23
   1990          
   1991                    XMLNode* reason = XML_Get_Child_Node_By_Name(item,loc_reason); // А вдруг нам даже сказали, за что?
   \                     ??Process_Presence_Change_35:
   \   0000069C   44108DE2           ADD      R1,SP,#+68
   \   000006A0   0800A0E1           MOV      R0,R8
   \   000006A4   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   \   000006A8   0080B0E1           MOVS     R8,R0
   1992                    if(reason)
   \   000006AC   0E00000A           BEQ      ??Process_Presence_Change_34
   1993                    {
   1994                      strcat(r, "; Reason: ");
   \   000006B0   6C00A0E3           MOV      R0,#+108
   \   000006B4   600E80E3           ORR      R0,R0,#0x600
   \   000006B8   041080E0           ADD      R1,R0,R4
   \   000006BC   3C0087E2           ADD      R0,R7,#+60
   \   000006C0   170000EF           SWI      +23
   1995                      int l = strlen(r);
   \   000006C4   3C0087E2           ADD      R0,R7,#+60
   \   000006C8   1B0000EF           SWI      +27
   \   000006CC   FF10A0E3           MOV      R1,#+255
   \   000006D0   401F81E3           ORR      R1,R1,#0x100
   \   000006D4   002041E0           SUB      R2,R1,R0
   \   000006D8   010052E3           CMP      R2,#+1
   \   000006DC   020000BA           BLT      ??Process_Presence_Change_34
   1996                      if(MAX_STATUS_LEN-l-1>0)strncat(r, reason->value, MAX_STATUS_LEN-l-1);
   \   000006E0   101098E5           LDR      R1,[R8, #+16]
   \   000006E4   3C0087E2           ADD      R0,R7,#+60
   \   000006E8   140100EF           SWI      +276
   1997                    }
   1998                  }
   1999                  if(DISPLAY_POPUPS)
   \                     ??Process_Presence_Change_34:
   \   000006EC   ........           LDR      R0,??DataTable92  ;; DISPLAY_POPUPS
   \   000006F0   000090E5           LDR      R0,[R0, #+0]
   \   000006F4   000050E3           CMP      R0,#+0
   \   000006F8   0700000A           BEQ      ??Process_Presence_Change_36
   2000                  {
   2001                    char *ansi_r = convUTF8_to_ANSI_STR(r);
   \   000006FC   3C0087E2           ADD      R0,R7,#+60
   \   00000700   ........           _BLF     convUTF8_to_ANSI_STR,??convUTF8_to_ANSI_STR??rA
   \   00000704   0040A0E1           MOV      R4,R0
   2002                    MsgBoxError(1,(int)ansi_r);
   \   00000708   0410A0E1           MOV      R1,R4
   \   0000070C   0100A0E3           MOV      R0,#+1
   \   00000710   4E0000EF           SWI      +78
   2003                    mfree(ansi_r);
   \   00000714   0400A0E1           MOV      R0,R4
   \   00000718   150000EF           SWI      +21
   2004                  }
   2005                  CList_AddSystemMessage(Conference->JID,status, r);
   \                     ??Process_Presence_Change_36:
   \   0000071C   000096E5           LDR      R0,[R6, #+0]
   \   00000720   3C2087E2           ADD      R2,R7,#+60
   \   00000724   0510A0E1           MOV      R1,R5
   \   00000728   ........           _BLF     CList_AddSystemMessage,??CList_AddSystemMessage??rA
   2006                  msg = r;
   \   0000072C   3C1087E2           ADD      R1,R7,#+60
   \   00000730   08108DE5           STR      R1,[SP, #+8]
   2007                }
   2008          
   2009              }
   2010          
   2011            TRESOURCE *ResEx = CList_AddResourceWithPresence(from, status, msg, priority);
   \                     ??Process_Presence_Change_9:
   \   00000734   2C309DE5           LDR      R3,[SP, #+44]
   \   00000738   04009DE5           LDR      R0,[SP, #+4]
   \   0000073C   08209DE5           LDR      R2,[SP, #+8]
   \   00000740   0338A0E1           MOV      R3,R3, LSL #+16
   \   00000744   4338A0E1           MOV      R3,R3, ASR #+16
   \   00000748   0510A0E1           MOV      R1,R5
   \   0000074C   ........           _BLF     CList_AddResourceWithPresence,??CList_AddResourceWithPresence??rA
   \   00000750   0040A0E1           MOV      R4,R0
   2012            if(Req_Set_Role) CList_MUC_SetRole(from, priv);
   \   00000754   000059E3           CMP      R9,#+0
   \   00000758   0500000A           BEQ      ??Process_Presence_Change_37
   \   0000075C   14008DE2           ADD      R0,SP,#+20
   \   00000760   030090E8           LDM      R0,{R0,R1}
   \   00000764   0120A0E1           MOV      R2,R1
   \   00000768   0010A0E1           MOV      R1,R0
   \   0000076C   04009DE5           LDR      R0,[SP, #+4]
   \   00000770   ........           _BLF     CList_MUC_SetRole,??CList_MUC_SetRole??rA
   2013            if(real_jid)
   \                     ??Process_Presence_Change_37:
   \   00000774   0C009DE5           LDR      R0,[SP, #+12]
   \   00000778   000050E3           CMP      R0,#+0
   \   0000077C   0500000A           BEQ      ??Process_Presence_Change_1
   2014            {
   2015              ResEx->muc_privs.real_jid = malloc(strlen(real_jid)+1);
   \   00000780   1B0000EF           SWI      +27
   \   00000784   010080E2           ADD      R0,R0,#+1
   \   00000788   140000EF           SWI      +20
   \   0000078C   240084E5           STR      R0,[R4, #+36]
   2016              strcpy(ResEx->muc_privs.real_jid, real_jid);
   \   00000790   0C109DE5           LDR      R1,[SP, #+12]
   \   00000794   1A0000EF           SWI      +26
   \                     ??Process_Presence_Change_1:
   \   00000798   78D08DE2           ADD      SP,SP,#+120      ;; stack cleaning
   \   0000079C   F08FBDE8           POP      {R4-R11,PC}      ;; return
   \                     ??Process_Presence_Change_0:
   \   000007A0   ........           DC32     `?<Constant "actor">`
   \   000007A4   ........           DC32     `?<Constant "jid">_2`
   \   000007A8   ........           DC32     `?<Constant "reason">`
   \   000007AC   ........           DC32     `?<Constant "xmlns">_13`
   \   000007B0   ........           DC32     sndOnline
   \   000007B4   ........           DC32     SHOWSTAT_MUCINOUT
   \   000007B8   ........           DC32     SHOWSTAT_MUCCHANGESTAT
   \   000007BC   ........           DC32     sndOffline
   2017            }
   2018          }

   \                                 In segment DATA_I, align 4, align-sorted
   \                     OnlineInfo:
   \   00000000                      DS8 8
   \   00000008                      REQUIRE `?<Initializer for OnlineInfo>`
   \                     PRESENCES:
   \   00000008                      DS8 48
   \   00000038                      REQUIRE `?<Initializer for PRESENCES>`
   \                     muctop:
   \   00000038                      DS8 4
   \   0000003C                      REQUIRE `?<Initializer for muctop>`
   \   0000003C                      DS8 512
   \   0000023C                      REQUIRE `?<Initializer for r>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     JABBER_AFFS:
   \   00000000                      DS8 20
   \   00000014                      REQUIRE `?<Initializer for JABBER_AFFS>`
   \                     JABBER_ROLS:
   \   00000014                      DS8 16
   \   00000024                      REQUIRE `?<Initializer for JABBER_ROLS>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     auth_id:
   \   00000000                      DS8 16
   \   00000010                      REQUIRE `?<Initializer for auth_id>`
   \                     rost_id:
   \   00000010                      DS8 16
   \   00000020                      REQUIRE `?<Initializer for rost_id>`
   \                     vreq_id:
   \   00000020                      DS8 16
   \   00000030                      REQUIRE `?<Initializer for vreq_id>`
   \                     priv_id:
   \   00000030                      DS8 16
   \   00000040                      REQUIRE `?<Initializer for priv_id>`
   \                     treq_id:
   \   00000040                      DS8 16
   \   00000050                      REQUIRE `?<Initializer for treq_id>`
   \                     vcreq_id:
   \   00000050                      DS8 16
   \   00000060                      REQUIRE `?<Initializer for vcreq_id>`
   \                     lastact_id:
   \   00000060                      DS8 20
   \   00000074                      REQUIRE `?<Initializer for lastact_id>`
   2019          

   \                                 In segment CODE, align 4, keep-with-next
   2020          MESS_TYPE Get_Message_Type(char* mess_type_str)
   2021          {
   2022            char m_chat[]=MSGSTR_CHAT;
   \                     Get_Message_Type:
   \   00000000   90109FE5           LDR      R1,??Get_Message_Type_0  ;; `?<Constant "chat">_1`
   \   00000004   10402DE9           PUSH     {R4,LR}
   \   00000008   1CD04DE2           SUB      SP,SP,#+28
   \   0000000C   0C0091E8           LDM      R1,{R2,R3}
   2023            char m_gchat[]=MSGSTR_GCHAT;
   \   00000010   84109FE5           LDR      R1,??Get_Message_Type_0+0x4  ;; `?<Constant "groupchat">_1`
   \   00000014   0040A0E1           MOV      R4,R0
   \   00000018   0D00A0E1           MOV      R0,SP
   \   0000001C   0C0080E8           STM      R0,{R2,R3}
   \   00000020   0C1091E8           LDM      R1,{R2,R3,R12}
   2024            char m_error[]=MSGSTR_ERROR;
   \   00000024   74109FE5           LDR      R1,??Get_Message_Type_0+0x8  ;; `?<Constant "error">_4`
   \   00000028   10008DE2           ADD      R0,SP,#+16
   \   0000002C   0C1080E8           STM      R0,{R2,R3,R12}
   \   00000030   0C0091E8           LDM      R1,{R2,R3}
   \   00000034   08008DE2           ADD      R0,SP,#+8
   \   00000038   0C0080E8           STM      R0,{R2,R3}
   2025            if(!mess_type_str)return MSG_NORMAL;
   \   0000003C   000054E3           CMP      R4,#+0
   \   00000040   1100000A           BEQ      ??Get_Message_Type_1
   2026            if(!strcmp(mess_type_str,m_chat ))return MSG_CHAT;
   \   00000044   0D10A0E1           MOV      R1,SP
   \   00000048   0400A0E1           MOV      R0,R4
   \   0000004C   190000EF           SWI      +25
   \   00000050   000050E3           CMP      R0,#+0
   \   00000054   0200A003           MOVEQ    R0,#+2
   \   00000058   0C00000A           BEQ      ??Get_Message_Type_2
   2027            if(!strcmp(mess_type_str,m_gchat ))return MSG_GCHAT;
   \   0000005C   10108DE2           ADD      R1,SP,#+16
   \   00000060   0400A0E1           MOV      R0,R4
   \   00000064   190000EF           SWI      +25
   \   00000068   000050E3           CMP      R0,#+0
   \   0000006C   0300A003           MOVEQ    R0,#+3
   \   00000070   0600000A           BEQ      ??Get_Message_Type_2
   2028            if(!strcmp(mess_type_str,m_error ))return MSG_STATUS;
   \   00000074   08108DE2           ADD      R1,SP,#+8
   \   00000078   0400A0E1           MOV      R0,R4
   \   0000007C   190000EF           SWI      +25
   \   00000080   000050E3           CMP      R0,#+0
   \   00000084   0600A003           MOVEQ    R0,#+6
   \   00000088   0000000A           BEQ      ??Get_Message_Type_2
   2029            return MSG_NORMAL;
   \                     ??Get_Message_Type_1:
   \   0000008C   0000A0E3           MOV      R0,#+0
   \                     ??Get_Message_Type_2:
   \   00000090   1CD08DE2           ADD      SP,SP,#+28       ;; stack cleaning
   \   00000094   1080BDE8           POP      {R4,PC}          ;; return
   \                     ??Get_Message_Type_0:
   \   00000098   ........           DC32     `?<Constant "chat">_1`
   \   0000009C   ........           DC32     `?<Constant "groupchat">_1`
   \   000000A0   ........           DC32     `?<Constant "error">_4`
   2030          }
   2031          
   2032          //Context: HELPER

   \                                 In segment CODE, align 4, keep-with-next
   2033          void _mucadmincmd(char* room, XMLNode* iq_payload)
   2034          {
   2035            char admin_iqid[]="SieJC_adm";
   \                     _mucadmincmd:
   \   00000000   4C209FE5           LDR      R2,??_mucadmincmd_0  ;; `?<Constant "SieJC_adm">`
   \   00000004   10402DE9           PUSH     {R4,LR}
   \   00000008   10D04DE2           SUB      SP,SP,#+16
   \   0000000C   085092E8           LDM      R2,{R3,R12,LR}
   \   00000010   0040A0E1           MOV      R4,R0
   \   00000014   04008DE2           ADD      R0,SP,#+4
   \   00000018   085080E8           STM      R0,{R3,R12,LR}
   2036            char iqtypeset[]=IQTYPE_SET;
   \   0000001C   34009FE5           LDR      R0,??_mucadmincmd_0+0x4  ;; `?<Constant "set">_2`
   \   00000020   0D20A0E1           MOV      R2,SP
   \   00000024   003090E5           LDR      R3,[R0, #0]
   \   00000028   003082E5           STR      R3,[R2, #+0]
   2037            SendIq(room, iqtypeset, admin_iqid, XMLNS_MUC_ADMIN, iq_payload);
   \   0000002C   02002DE9           PUSH     {R1}
   \   00000030   043080E2           ADD      R3,R0,#+4
   \   00000034   08208DE2           ADD      R2,SP,#+8
   \   00000038   0400A0E1           MOV      R0,R4
   \   0000003C   04108DE2           ADD      R1,SP,#+4
   \   00000040   ........           BL       SendIq
   2038            mfree(room);
   \   00000044   0400A0E1           MOV      R0,R4
   \   00000048   150000EF           SWI      +21
   2039          }
   \   0000004C   14D08DE2           ADD      SP,SP,#+20
   \   00000050   1080BDE8           POP      {R4,PC}          ;; return
   \                     ??_mucadmincmd_0:
   \   00000054   ........           DC32     `?<Constant "SieJC_adm">`
   \   00000058   ........           DC32     `?<Constant "set">_2`
   2040          
   2041          // Исполнение административных команд

   \                                 In segment CODE, align 4, keep-with-next
   2042          void MUC_Admin_Command(char* room_name, char* room_jid, MUC_ADMIN cmd, char* reason)
   2043          {
   \                     MUC_Admin_Command:
   \   00000000   F0412DE9           PUSH     {R4-R8,LR}
   \   00000004   54D04DE2           SUB      SP,SP,#+84
   \   00000008   0140A0E1           MOV      R4,R1
   \   0000000C   0080A0E1           MOV      R8,R0
   \   00000010   0270A0E1           MOV      R7,R2
   \   00000014   0360A0E1           MOV      R6,R3
   2044            char *_room_name=malloc(strlen(room_name)+1);
   \   00000018   1B0000EF           SWI      +27
   \   0000001C   010080E2           ADD      R0,R0,#+1
   \   00000020   140000EF           SWI      +20
   \   00000024   0050A0E1           MOV      R5,R0
   2045            strcpy(_room_name,room_name);
   \   00000028   0810A0E1           MOV      R1,R8
   \   0000002C   1A0000EF           SWI      +26
   2046            char it[20];
   2047            char val[20];
   2048            char aff[]="affiliation";
   \   00000030   80119FE5           LDR      R1,??MUC_Admin_Command_1  ;; `?<Constant "affiliation">_1`
   \   00000034   30008DE2           ADD      R0,SP,#+48
   \   00000038   0C0191E8           LDM      R1,{R2,R3,R8}
   2049            char role[]="role";
   \   0000003C   78119FE5           LDR      R1,??MUC_Admin_Command_1+0x4  ;; `?<Constant "role">_1`
   \   00000040   0C0180E8           STM      R0,{R2,R3,R8}
   \   00000044   0C0091E8           LDM      R1,{R2,R3}
   2050            switch(cmd)
   \   00000048   ........           LDR      R8,??DataTable94  ;; JABBER_AFFS
   \   0000004C   0D00A0E1           MOV      R0,SP
   \   00000050   0C0080E8           STM      R0,{R2,R3}
   \   00000054   090057E3           CMP      R7,#+9
   \   00000058   3300008A           BHI      ??MUC_Admin_Command_2
   \   0000005C   010F8FE2           ADR      R0,??MUC_Admin_Command_0
   \   00000060   0700D0E7           LDRB     R0,[R0, R7]
   \   00000064   00F18FE0           ADD      PC,PC,R0, LSL #+2
   \                     ??MUC_Admin_Command_0:
   \   00000068   022A070C           DC8      +2,+42,+7,+12
   \   0000006C   11161B0C           DC8      +17,+22,+27,+12
   \   00000070   20250000           DC8      +32,+37,+0,+0
   2051            {
   2052            case ADM_KICK:
   2053              {
   2054                strcpy(it,role);
   \                     ??MUC_Admin_Command_3:
   \   00000074   0D10A0E1           MOV      R1,SP
   \   00000078   08008DE2           ADD      R0,SP,#+8
   \   0000007C   1A0000EF           SWI      +26
   2055                strcpy(val,JABBER_ROLS[ROLE_NONE]);
   \   00000080   141098E5           LDR      R1,[R8, #+20]
   \   00000084   260000EA           B        ??MUC_Admin_Command_4
   2056                break;
   2057              }
   2058            case ADM_VOICE_REMOVE:
   2059              {
   2060                strcpy(it,role);
   \                     ??MUC_Admin_Command_5:
   \   00000088   0D10A0E1           MOV      R1,SP
   \   0000008C   08008DE2           ADD      R0,SP,#+8
   \   00000090   1A0000EF           SWI      +26
   2061                strcpy(val,JABBER_ROLS[ROLE_VISITOR]);
   \   00000094   181098E5           LDR      R1,[R8, #+24]
   \   00000098   210000EA           B        ??MUC_Admin_Command_4
   2062                break;
   2063              }
   2064            case ADM_VOICE_GRANT:
   2065              {
   2066                strcpy(it,role);
   \                     ??MUC_Admin_Command_6:
   \   0000009C   0D10A0E1           MOV      R1,SP
   \   000000A0   08008DE2           ADD      R0,SP,#+8
   \   000000A4   1A0000EF           SWI      +26
   2067                strcpy(val,JABBER_ROLS[ROLE_PARTICIPANT]);
   \   000000A8   1C1098E5           LDR      R1,[R8, #+28]
   \   000000AC   1C0000EA           B        ??MUC_Admin_Command_4
   2068                break;
   2069              }
   2070            case ADM_PARTICIPANT:
   2071              {
   2072                strcpy(it,aff);
   \                     ??MUC_Admin_Command_7:
   \   000000B0   30108DE2           ADD      R1,SP,#+48
   \   000000B4   08008DE2           ADD      R0,SP,#+8
   \   000000B8   1A0000EF           SWI      +26
   2073                strcpy(val,JABBER_AFFS[AFFILIATION_NONE]);
   \   000000BC   001098E5           LDR      R1,[R8, #+0]
   \   000000C0   170000EA           B        ??MUC_Admin_Command_4
   2074                break;
   2075              }
   2076            case ADM_MEMBER:
   2077              {
   2078                strcpy(it,aff);
   \                     ??MUC_Admin_Command_8:
   \   000000C4   30108DE2           ADD      R1,SP,#+48
   \   000000C8   08008DE2           ADD      R0,SP,#+8
   \   000000CC   1A0000EF           SWI      +26
   2079                strcpy(val,JABBER_AFFS[AFFILIATION_MEMBER]);
   \   000000D0   081098E5           LDR      R1,[R8, #+8]
   \   000000D4   120000EA           B        ??MUC_Admin_Command_4
   2080                break;
   2081              }
   2082            case ADM_MODERATOR:
   2083              {
   2084                strcpy(it,role);
   \                     ??MUC_Admin_Command_9:
   \   000000D8   0D10A0E1           MOV      R1,SP
   \   000000DC   08008DE2           ADD      R0,SP,#+8
   \   000000E0   1A0000EF           SWI      +26
   2085                strcpy(val,JABBER_ROLS[ROLE_MODERATOR]);
   \   000000E4   201098E5           LDR      R1,[R8, #+32]
   \   000000E8   0D0000EA           B        ??MUC_Admin_Command_4
   2086                break;
   2087              }
   2088           case ADM_MODERATOR_REMOVE:
   2089              {
   2090                strcpy(it,role);
   2091                strcpy(val,JABBER_ROLS[ROLE_PARTICIPANT]);
   2092                break;
   2093              }
   2094            case ADM_ADMIN:
   2095              {
   2096                strcpy(it,aff);
   \                     ??MUC_Admin_Command_10:
   \   000000EC   30108DE2           ADD      R1,SP,#+48
   \   000000F0   08008DE2           ADD      R0,SP,#+8
   \   000000F4   1A0000EF           SWI      +26
   2097                strcpy(val,JABBER_AFFS[AFFILIATION_ADMIN]);
   \   000000F8   0C1098E5           LDR      R1,[R8, #+12]
   \   000000FC   080000EA           B        ??MUC_Admin_Command_4
   2098                break;
   2099              }
   2100            case ADM_OWNER:
   2101              {
   2102                strcpy(it,aff);
   \                     ??MUC_Admin_Command_11:
   \   00000100   30108DE2           ADD      R1,SP,#+48
   \   00000104   08008DE2           ADD      R0,SP,#+8
   \   00000108   1A0000EF           SWI      +26
   2103                strcpy(val,JABBER_AFFS[AFFILIATION_OWNER]);
   \   0000010C   101098E5           LDR      R1,[R8, #+16]
   \   00000110   030000EA           B        ??MUC_Admin_Command_4
   2104                break;
   2105              }
   2106            case ADM_BAN:
   2107              {
   2108                strcpy(it,aff);
   \                     ??MUC_Admin_Command_12:
   \   00000114   30108DE2           ADD      R1,SP,#+48
   \   00000118   08008DE2           ADD      R0,SP,#+8
   \   0000011C   1A0000EF           SWI      +26
   2109                strcpy(val,JABBER_AFFS[AFFILIATION_OUTCAST]);
   \   00000120   041098E5           LDR      R1,[R8, #+4]
   \                     ??MUC_Admin_Command_4:
   \   00000124   1C008DE2           ADD      R0,SP,#+28
   \   00000128   1A0000EF           SWI      +26
   2110                break;
   2111              }
   2112            }
   2113            
   2114            XMLNode *xml_item, *xml_reason;
   2115            char item_t[]="item";
   \                     ??MUC_Admin_Command_2:
   \   0000012C   8C109FE5           LDR      R1,??MUC_Admin_Command_1+0x8  ;; `?<Constant "item">_1`
   \   00000130   3C008DE2           ADD      R0,SP,#+60
   \   00000134   0C0091E8           LDM      R1,{R2,R3}
   2116            char nick_t[]="nick";
   \   00000138   84109FE5           LDR      R1,??MUC_Admin_Command_1+0xC  ;; `?<Constant "nick">_1`
   \   0000013C   0C0080E8           STM      R0,{R2,R3}
   \   00000140   0C0091E8           LDM      R1,{R2,R3}
   2117            char reason_t[]="reason";
   \   00000144   7C109FE5           LDR      R1,??MUC_Admin_Command_1+0x10  ;; `?<Constant "reason">_1`
   \   00000148   44008DE2           ADD      R0,SP,#+68
   \   0000014C   0C0080E8           STM      R0,{R2,R3}
   \   00000150   0C0091E8           LDM      R1,{R2,R3}
   \   00000154   4C008DE2           ADD      R0,SP,#+76
   \   00000158   0C0080E8           STM      R0,{R2,R3}
   2118          
   2119            xml_item = XML_CreateNode(item_t, NULL);
   \   0000015C   0010A0E3           MOV      R1,#+0
   \   00000160   3C008DE2           ADD      R0,SP,#+60
   \   00000164   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   00000168   0070A0E1           MOV      R7,R0
   2120            xml_reason = XML_CreateNode(reason_t, reason);
   \   0000016C   0610A0E1           MOV      R1,R6
   \   00000170   4C008DE2           ADD      R0,SP,#+76
   \   00000174   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   00000178   0060A0E1           MOV      R6,R0
   2121            XML_Set_Attr_Value(xml_item, it, val);
   \   0000017C   1C208DE2           ADD      R2,SP,#+28
   \   00000180   08108DE2           ADD      R1,SP,#+8
   \   00000184   0700A0E1           MOV      R0,R7
   \   00000188   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
   2122            XML_Set_Attr_Value(xml_item, nick_t, room_jid);
   \   0000018C   0420A0E1           MOV      R2,R4
   \   00000190   44108DE2           ADD      R1,SP,#+68
   \   00000194   0700A0E1           MOV      R0,R7
   \   00000198   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
   2123            xml_item->subnode = xml_reason;
   2124            SUBPROC((void*)_mucadmincmd, _room_name, xml_item);
   \   0000019C   28009FE5           LDR      R0,??MUC_Admin_Command_1+0x14  ;; _mucadmincmd
   \   000001A0   046087E5           STR      R6,[R7, #+4]
   \   000001A4   0720A0E1           MOV      R2,R7
   \   000001A8   0510A0E1           MOV      R1,R5
   \   000001AC   710100EF           SWI      +369
   2125          }
   \   000001B0   54D08DE2           ADD      SP,SP,#+84
   \   000001B4   F081BDE8           POP      {R4-R8,PC}       ;; return
   \                     ??MUC_Admin_Command_1:
   \   000001B8   ........           DC32     `?<Constant "affiliation">_1`
   \   000001BC   ........           DC32     `?<Constant "role">_1`
   \   000001C0   ........           DC32     `?<Constant "item">_1`
   \   000001C4   ........           DC32     `?<Constant "nick">_1`
   \   000001C8   ........           DC32     `?<Constant "reason">_1`
   \   000001CC   ........           DC32     _mucadmincmd
   2126          
   2127          static void Report_Delivery(char *mess_id, char *to)
   2128          {
   2129          /*
   2130          RECV:
   2131            <message
   2132              from='kingrichard@royalty.england.lit/throne'
   2133              id='richard2-4.1.247'
   2134              to='northumberland@shakespeare.lit/westminster'>
   2135            <received xmlns='urn:xmpp:receipts'/>
   2136          </message>
   2137          */
   2138            XMLNode *received;
   2139            char received_t[]="received";
   2140            char xmlns_t[]="xmlns";  
   2141            received = XML_CreateNode(received_t, NULL);
   2142            XML_Set_Attr_Value(received, xmlns_t, JABBER_XMPP_RECEIPTS);
   2143            Send_Message(to, NULL, mess_id, received);
   2144          }
   2145          
   2146          /*
   2147          Входящие сообщения
   2148          */

   \                                 In segment CODE, align 4, keep-with-next
   2149          void Process_Incoming_Message(XMLNode* nodeEx)
   2150          {
   2151            char Is_subj=0;
   2152            char from[]="from";
   \                     Process_Incoming_Message:
   \   00000000   30159FE5           LDR      R1,??Process_Incoming_Message_0  ;; `?<Constant "from">`
   \   00000004   F04F2DE9           PUSH     {R4-R11,LR}
   \   00000008   8BDF4DE2           SUB      SP,SP,#+556
   \   0000000C   0C0091E8           LDM      R1,{R2,R3}
   2153            char c_xmlns[]="xmlns";
   \   00000010   24159FE5           LDR      R1,??Process_Incoming_Message_0+0x4  ;; `?<Constant "xmlns">_1`
   2154            char c_id[]="id";
   2155            extern const int BOLD_NICK_INMUC;
   2156            // Если включено обслуживание запросов о получении...
   2157            char *chr_from = XML_Get_Attr_Value(from,nodeEx->attr);
   2158              XMLNode* xnode = XML_Get_Child_Node_By_Name(nodeEx,"x");
   2159              if(xnode)
   \   00000014   ........           LDR      R5,??DataTable87  ;; `?<Constant "x">_1`
   \   00000018   0090A0E1           MOV      R9,R0
   \   0000001C   18008DE2           ADD      R0,SP,#+24
   \   00000020   0C0080E8           STM      R0,{R2,R3}
   \   00000024   0C0091E8           LDM      R1,{R2,R3}
   \   00000028   10159FE5           LDR      R1,??Process_Incoming_Message_0+0x8  ;; `?<Constant "id">`
   \   0000002C   0D00A0E1           MOV      R0,SP
   \   00000030   0C0080E8           STM      R0,{R2,R3}
   \   00000034   0020D1E5           LDRB     R2,[R1, #0]
   \   00000038   08008DE2           ADD      R0,SP,#+8
   \   0000003C   0070A0E3           MOV      R7,#+0
   \   00000040   0020C0E5           STRB     R2,[R0, #+0]
   \   00000044   0120D1E5           LDRB     R2,[R1, #+1]
   \   00000048   0120C0E5           STRB     R2,[R0, #+1]
   \   0000004C   0220D1E5           LDRB     R2,[R1, #+2]
   \   00000050   0220C0E5           STRB     R2,[R0, #+2]
   \   00000054   0C1099E5           LDR      R1,[R9, #+12]
   \   00000058   18008DE2           ADD      R0,SP,#+24
   \   0000005C   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   \   00000060   0040A0E1           MOV      R4,R0
   \   00000064   EF1F8FE2           ADR      R1,??Process_Incoming_Message_1  ;; "x"
   \   00000068   0900A0E1           MOV      R0,R9
   \   0000006C   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   \   00000070   0080B0E1           MOVS     R8,R0
   \   00000074   1B00000A           BEQ      ??Process_Incoming_Message_2
   2160              {
   2161                char *xmlns = XML_Get_Attr_Value(c_xmlns,xnode->attr);
   \   00000078   0C1098E5           LDR      R1,[R8, #+12]
   \   0000007C   0D00A0E1           MOV      R0,SP
   \   00000080   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   2162                if(xmlns)
   \   00000084   000050E3           CMP      R0,#+0
   \   00000088   1600000A           BEQ      ??Process_Incoming_Message_2
   2163                {
   2164                if(!strcmp(xmlns,XMLNS_MUC_USER)) //обработка invite
   \   0000008C   7810A0E3           MOV      R1,#+120
   \   00000090   601E81E3           ORR      R1,R1,#0x600
   \   00000094   051081E0           ADD      R1,R1,R5
   \   00000098   190000EF           SWI      +25
   \   0000009C   000050E3           CMP      R0,#+0
   \   000000A0   1000001A           BNE      ??Process_Incoming_Message_2
   2165                {
   2166                 XMLNode *invite =  XML_Get_Child_Node_By_Name(xnode,"invite");
   2167                 if(invite)
   \   000000A4   041085E2           ADD      R1,R5,#+4
   \   000000A8   0800A0E1           MOV      R0,R8
   \   000000AC   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   \   000000B0   000050E3           CMP      R0,#+0
   \   000000B4   0B00000A           BEQ      ??Process_Incoming_Message_2
   2168                 {
   2169                  MUC_ITEM* muct = CList_FindMUCByJID(chr_from); 
   2170                  if(!muct) //если еще нетты такой конфы то добавим в список muctop, а вдруг зайдем
   \   000000B8   0400A0E1           MOV      R0,R4
   \   000000BC   ........           _BLF     CList_FindMUCByJID,??CList_FindMUCByJID??rA
   \   000000C0   000050E3           CMP      R0,#+0
   \   000000C4   0700001A           BNE      ??Process_Incoming_Message_2
   2171                  {
   2172                    CList_AddContact(chr_from,chr_from, SUB_BOTH, 0, 129);
   \   000000C8   8100A0E3           MOV      R0,#+129
   \   000000CC   01002DE9           PUSH     {R0}
   \   000000D0   0030A0E3           MOV      R3,#+0
   \   000000D4   0320A0E3           MOV      R2,#+3
   \   000000D8   0410A0E1           MOV      R1,R4
   \   000000DC   0400A0E1           MOV      R0,R4
   \   000000E0   ........           _BLF     CList_AddContact,??CList_AddContact??rA
   \   000000E4   04D08DE2           ADD      SP,SP,#+4
   2173                  }
   2174                 }
   2175                } //end invite
   2176          
   2177               }
   2178              }
   2179          
   2180            //обработка attention xep-0224
   2181             XMLNode *attention =  XML_Get_Child_Node_By_Name(nodeEx,"attention");
   \                     ??Process_Incoming_Message_2:
   \   000000E8   0C1085E2           ADD      R1,R5,#+12
   \   000000EC   0900A0E1           MOV      R0,R9
   \   000000F0   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   2182             if(attention && USE_ATTENTION)
   \   000000F4   000050E3           CMP      R0,#+0
   \   000000F8   0E00000A           BEQ      ??Process_Incoming_Message_3
   \   000000FC   ........           LDR      R1,??DataTable88  ;; USE_ATTENTION
   \   00000100   001091E5           LDR      R1,[R1, #+0]
   \   00000104   000051E3           CMP      R1,#+0
   \   00000108   0A00000A           BEQ      ??Process_Incoming_Message_3
   2183             {
   2184               char *xmlnsa = XML_Get_Attr_Value(c_xmlns,attention->attr);
   \   0000010C   0C1090E5           LDR      R1,[R0, #+12]
   \   00000110   0D00A0E1           MOV      R0,SP
   \   00000114   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   2185               if (xmlnsa)
   \   00000118   000050E3           CMP      R0,#+0
   \   0000011C   0500000A           BEQ      ??Process_Incoming_Message_3
   2186                 if(!strcmp(xmlnsa,JABBER_URN_ATTENTION)) 
   \   00000120   6F1F85E2           ADD      R1,R5,#+444
   \   00000124   190000EF           SWI      +25
   \   00000128   000050E3           CMP      R0,#+0
   \   0000012C   0100001A           BNE      ??Process_Incoming_Message_3
   2187                 {
   2188                   //ShowMSG(1,(int)"Agtung!");
   2189                   Vibrate(2);
   \   00000130   0200A0E3           MOV      R0,#+2
   \   00000134   ........           _BLF     Vibrate,??Vibrate??rA
   2190                 }
   2191             } //end attention
   2192          
   2193              // delivery
   2194              if(DELIVERY_EVENTS)
   \                     ??Process_Incoming_Message_3:
   \   00000138   ........           LDR      R0,??DataTable89  ;; DELIVERY_EVENTS
   \   0000013C   000090E5           LDR      R0,[R0, #+0]
   \   00000140   000050E3           CMP      R0,#+0
   \   00000144   3700000A           BEQ      ??Process_Incoming_Message_4
   2195              {
   2196              xnode = XML_Get_Child_Node_By_Name(nodeEx,"request");
   \   00000148   181085E2           ADD      R1,R5,#+24
   \   0000014C   0900A0E1           MOV      R0,R9
   \   00000150   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   2197              if(xnode)
   \   00000154   606FA0E3           MOV      R6,#+384
   \   00000158   000050E3           CMP      R0,#+0
   \   0000015C   2100000A           BEQ      ??Process_Incoming_Message_5
   2198                {
   2199                char *xmlns = XML_Get_Attr_Value(c_xmlns,xnode->attr);
   \   00000160   0C1090E5           LDR      R1,[R0, #+12]
   \   00000164   0D00A0E1           MOV      R0,SP
   \   00000168   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   2200                if(xmlns)
   \   0000016C   000050E3           CMP      R0,#+0
   \   00000170   1C00000A           BEQ      ??Process_Incoming_Message_5
   2201                 {
   2202                 if(!strcmp(xmlns,JABBER_XMPP_RECEIPTS))
   \   00000174   051086E0           ADD      R1,R6,R5
   \   00000178   190000EF           SWI      +25
   \   0000017C   000050E3           CMP      R0,#+0
   \   00000180   1800001A           BNE      ??Process_Incoming_Message_5
   2203                  {
   2204                    char *id = XML_Get_Attr_Value(c_id, nodeEx->attr);
   \   00000184   0C1099E5           LDR      R1,[R9, #+12]
   \   00000188   08008DE2           ADD      R0,SP,#+8
   \   0000018C   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   \   00000190   0080B0E1           MOVS     R8,R0
   2205                    if(id)Report_Delivery(id, chr_from);
   \   00000194   1300000A           BEQ      ??Process_Incoming_Message_5
   \   00000198   A4139FE5           LDR      R1,??Process_Incoming_Message_0+0xC  ;; `?<Constant "received">_1`
   \   0000019C   20008DE2           ADD      R0,SP,#+32
   \   000001A0   0C0491E8           LDM      R1,{R2,R3,R10}
   \   000001A4   9C139FE5           LDR      R1,??Process_Incoming_Message_0+0x10  ;; `?<Constant "xmlns">`
   \   000001A8   0C0480E8           STM      R0,{R2,R3,R10}
   \   000001AC   0C0091E8           LDM      R1,{R2,R3}
   \   000001B0   10008DE2           ADD      R0,SP,#+16
   \   000001B4   0C0080E8           STM      R0,{R2,R3}
   \   000001B8   0010A0E3           MOV      R1,#+0
   \   000001BC   20008DE2           ADD      R0,SP,#+32
   \   000001C0   ........           _BLF     XML_CreateNode,??XML_CreateNode??rA
   \   000001C4   00A0A0E1           MOV      R10,R0
   \   000001C8   052086E0           ADD      R2,R6,R5
   \   000001CC   10108DE2           ADD      R1,SP,#+16
   \   000001D0   ........           _BLF     XML_Set_Attr_Value,??XML_Set_Attr_Value??rA
   \   000001D4   0A30A0E1           MOV      R3,R10
   \   000001D8   0820A0E1           MOV      R2,R8
   \   000001DC   0710A0E1           MOV      R1,R7
   \   000001E0   0400A0E1           MOV      R0,R4
   \   000001E4   ........           BL       Send_Message
   2206                  }
   2207                 }
   2208                }
   2209              xnode = XML_Get_Child_Node_By_Name(nodeEx,"received");
   \                     ??Process_Incoming_Message_5:
   \   000001E8   201085E2           ADD      R1,R5,#+32
   \   000001EC   0900A0E1           MOV      R0,R9
   \   000001F0   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   \   000001F4   0080B0E1           MOVS     R8,R0
   2210              if(xnode)
   \   000001F8   0A00000A           BEQ      ??Process_Incoming_Message_4
   2211              {
   2212                char *xmlns = XML_Get_Attr_Value(c_xmlns,xnode->attr);
   \   000001FC   0C1090E5           LDR      R1,[R0, #+12]
   \   00000200   0D00A0E1           MOV      R0,SP
   \   00000204   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   2213                if(xmlns)
   \   00000208   000050E3           CMP      R0,#+0
   \   0000020C   0500000A           BEQ      ??Process_Incoming_Message_4
   2214                if(!strcmp(xmlns,JABBER_XMPP_RECEIPTS))
   \   00000210   051086E0           ADD      R1,R6,R5
   \   00000214   190000EF           SWI      +25
   \   00000218   000050E3           CMP      R0,#+0
   \   0000021C   0100001A           BNE      ??Process_Incoming_Message_4
   2215                {
   2216                  TRESOURCE* Res_ex = CList_IsResourceInList(chr_from);
   \   00000220   0400A0E1           MOV      R0,R4
   \   00000224   ........           _BLF     CList_IsResourceInList,??CList_IsResourceInList??rA
   2217                  if(Res_ex)
   2218                  if((Res_ex->entry_type == T_NORMAL)||(Res_ex->entry_type == T_CONF_NODE))
   2219                  {
   2220                    //Пришло уведомление что наше сообщение получено, и как ето отобразить?
   2221                    // ShowMSG(1,(int)Res_ex->name);
   2222                  }
   2223                }
   2224              }
   2225              }
   2226              // composing
   2227              if(COMPOSING_EVENTS)
   \                     ??Process_Incoming_Message_4:
   \   00000228   ........           LDR      R0,??DataTable90  ;; COMPOSING_EVENTS
   \   0000022C   000090E5           LDR      R0,[R0, #+0]
   \   00000230   000050E3           CMP      R0,#+0
   \   00000234   3100000A           BEQ      ??Process_Incoming_Message_6
   2228              {
   2229              xnode = XML_Get_Child_Node_By_Name(nodeEx,"composing");
   \   00000238   2C1085E2           ADD      R1,R5,#+44
   \   0000023C   0900A0E1           MOV      R0,R9
   \   00000240   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   2230              if(xnode)
   \   00000244   656FA0E3           MOV      R6,#+404
   \   00000248   000050E3           CMP      R0,#+0
   \   0000024C   1200000A           BEQ      ??Process_Incoming_Message_7
   2231              {
   2232                char *xmlns = XML_Get_Attr_Value(c_xmlns,xnode->attr);
   \   00000250   0C1090E5           LDR      R1,[R0, #+12]
   \   00000254   0D00A0E1           MOV      R0,SP
   \   00000258   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   2233                if(xmlns)
   \   0000025C   000050E3           CMP      R0,#+0
   \   00000260   0D00000A           BEQ      ??Process_Incoming_Message_7
   2234                if(!strcmp(xmlns,XMLNS_CHATSTATES))
   \   00000264   051086E0           ADD      R1,R6,R5
   \   00000268   190000EF           SWI      +25
   \   0000026C   000050E3           CMP      R0,#+0
   \   00000270   0900001A           BNE      ??Process_Incoming_Message_7
   2235                {
   2236                  TRESOURCE* Res_ex = CList_IsResourceInList(chr_from);
   \   00000274   0400A0E1           MOV      R0,R4
   \   00000278   ........           _BLF     CList_IsResourceInList,??CList_IsResourceInList??rA
   2237                  if(Res_ex)
   \   0000027C   000050E3           CMP      R0,#+0
   \   00000280   0500000A           BEQ      ??Process_Incoming_Message_7
   2238                  if((Res_ex->entry_type == T_NORMAL)||(Res_ex->entry_type == T_CONF_NODE))
   \   00000284   0810D0E5           LDRB     R1,[R0, #+8]
   \   00000288   000051E3           CMP      R1,#+0
   \   0000028C   03005113           CMPNE    R1,#+3
   \   00000290   0100001A           BNE      ??Process_Incoming_Message_7
   2239                  CList_ChangeComposingStatus(Res_ex, 1);
   \   00000294   0110A0E3           MOV      R1,#+1
   \   00000298   ........           _BLF     CList_ChangeComposingStatus,??CList_ChangeComposingStatus??rA
   2240                }
   2241              }
   2242              xnode = XML_Get_Child_Node_By_Name(nodeEx,"active");
   \                     ??Process_Incoming_Message_7:
   \   0000029C   381085E2           ADD      R1,R5,#+56
   \   000002A0   0900A0E1           MOV      R0,R9
   \   000002A4   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   \   000002A8   0080B0E1           MOVS     R8,R0
   2243              if(xnode)
   \   000002AC   1300000A           BEQ      ??Process_Incoming_Message_6
   2244              {
   2245                char *xmlns = XML_Get_Attr_Value(c_xmlns,xnode->attr);
   \   000002B0   0C1090E5           LDR      R1,[R0, #+12]
   \   000002B4   0D00A0E1           MOV      R0,SP
   \   000002B8   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   2246                if(xmlns)
   \   000002BC   000050E3           CMP      R0,#+0
   \   000002C0   0E00000A           BEQ      ??Process_Incoming_Message_6
   2247                if(!strcmp(xmlns,XMLNS_CHATSTATES))
   \   000002C4   051086E0           ADD      R1,R6,R5
   \   000002C8   190000EF           SWI      +25
   \   000002CC   000050E3           CMP      R0,#+0
   \   000002D0   0A00001A           BNE      ??Process_Incoming_Message_6
   2248                {
   2249                  TRESOURCE* Res_ex = CList_IsResourceInList(chr_from);
   \   000002D4   0400A0E1           MOV      R0,R4
   \   000002D8   ........           _BLF     CList_IsResourceInList,??CList_IsResourceInList??rA
   2250                  if(Res_ex)
   \   000002DC   000050E3           CMP      R0,#+0
   \   000002E0   0600000A           BEQ      ??Process_Incoming_Message_6
   2251                  if((Res_ex->entry_type == T_NORMAL)||(Res_ex->entry_type == T_CONF_NODE))
   \   000002E4   0810D0E5           LDRB     R1,[R0, #+8]
   \   000002E8   000051E3           CMP      R1,#+0
   \   000002EC   0200000A           BEQ      ??Process_Incoming_Message_8
   \   000002F0   030051E3           CMP      R1,#+3
   \   000002F4   0100001A           BNE      ??Process_Incoming_Message_6
   2252                  CList_ChangeComposingStatus(Res_ex, 0);
   \   000002F8   0010A0E3           MOV      R1,#+0
   \                     ??Process_Incoming_Message_8:
   \   000002FC   ........           _BLF     CList_ChangeComposingStatus,??CList_ChangeComposingStatus??rA
   2253                }
   2254              }
   2255              }
   2256          
   2257            XMLNode* msgnode = XML_Get_Child_Node_By_Name(nodeEx,"body");
   \                     ??Process_Incoming_Message_6:
   \   00000300   401085E2           ADD      R1,R5,#+64
   \   00000304   0900A0E1           MOV      R0,R9
   \   00000308   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   \   0000030C   0080A0E1           MOV      R8,R0
   2258            XMLNode* msgsubject = XML_Get_Child_Node_By_Name(nodeEx,"subject");
   \   00000310   481085E2           ADD      R1,R5,#+72
   \   00000314   0900A0E1           MOV      R0,R9
   \   00000318   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   \   0000031C   00A0A0E1           MOV      R10,R0
   2259            XMLNode* msgerror = XML_Get_Child_Node_By_Name(nodeEx,"error");
   \   00000320   601085E2           ADD      R1,R5,#+96
   \   00000324   0900A0E1           MOV      R0,R9
   \   00000328   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   \   0000032C   0060A0E1           MOV      R6,R0
   2260            if(!msgnode)
   \   00000330   000058E3           CMP      R8,#+0
   2261            {
   2262              msgnode = msgsubject;
   \   00000334   0A80A001           MOVEQ    R8,R10
   2263              Is_subj = 1;
   \   00000338   0170A003           MOVEQ    R7,#+1
   2264            }
   2265            if(msgsubject && !msgerror) //если есть тема, обработаем...
   \   0000033C   00005AE3           CMP      R10,#+0
   \   00000340   3900000A           BEQ      ??Process_Incoming_Message_9
   \   00000344   000056E3           CMP      R6,#+0
   \   00000348   3700001A           BNE      ??Process_Incoming_Message_9
   2266            {
   2267              MUC_ITEM* TmpMUC = CList_FindMUCByJID(CList_FindContactByJID(chr_from)->JID);
   \   0000034C   0400A0E1           MOV      R0,R4
   \   00000350   ........           _BLF     CList_FindContactByJID,??CList_FindContactByJID??rA
   \   00000354   000090E5           LDR      R0,[R0, #+0]
   \   00000358   ........           _BLF     CList_FindMUCByJID,??CList_FindMUCByJID??rA
   \   0000035C   00B0B0E1           MOVS     R11,R0
   2268                if(TmpMUC)
   \   00000360   0B00000A           BEQ      ??Process_Incoming_Message_10
   2269                {
   2270                 if(TmpMUC->muctema) mfree(TmpMUC->muctema);
   \   00000364   04009BE5           LDR      R0,[R11, #+4]
   \   00000368   000050E3           CMP      R0,#+0
   \   0000036C   0000000A           BEQ      ??Process_Incoming_Message_11
   \   00000370   150000EF           SWI      +21
   2271                 TmpMUC->muctema = malloc(strlen(msgsubject->value)*2+1);
   \                     ??Process_Incoming_Message_11:
   \   00000374   10009AE5           LDR      R0,[R10, #+16]
   \   00000378   1B0000EF           SWI      +27
   \   0000037C   0110A0E3           MOV      R1,#+1
   \   00000380   800081E0           ADD      R0,R1,R0, LSL #+1
   \   00000384   140000EF           SWI      +20
   \   00000388   04008BE5           STR      R0,[R11, #+4]
   2272                 strcpy(TmpMUC->muctema ,msgsubject->value);
   \   0000038C   10109AE5           LDR      R1,[R10, #+16]
   \   00000390   1A0000EF           SWI      +26
   2273                }
   2274            }
   2275            if(msgerror)
   2276            {
   2277             XMLNode* texterror = XML_Get_Child_Node_By_Name(msgerror,"text");
   2278              if(texterror)
   2279                if(texterror->value)
   2280                  if(strlen(texterror->value))
   2281                    msgnode = texterror;
   2282            }
   2283            
   2284            if(msgnode)
   \                     ??Process_Incoming_Message_10:
   \   00000394   000058E3           CMP      R8,#+0
   \   00000398   6400000A           BEQ      ??Process_Incoming_Message_12
   2285            if(msgnode->value)
   \                     ??Process_Incoming_Message_13:
   \   0000039C   100098E5           LDR      R0,[R8, #+16]
   \   000003A0   000050E3           CMP      R0,#+0
   \   000003A4   6100000A           BEQ      ??Process_Incoming_Message_12
   2286            {
   2287              MESS_TYPE msgtype = Get_Message_Type(XML_Get_Attr_Value("type",nodeEx->attr));
   \   000003A8   0C1099E5           LDR      R1,[R9, #+12]
   2288          
   2289              // Не показываем попапы для групчата, ибо достаёт трындец как
   2290              if((msgtype!=MSG_GCHAT)&&(msgtype!=MSG_NICKGCHAT))
   \   000003AC   ........           LDR      R10,??DataTable91  ;; Play
   \   000003B0   A70F85E2           ADD      R0,R5,#+668
   \   000003B4   ........           _BLF     XML_Get_Attr_Value,??XML_Get_Attr_Value??rA
   \   000003B8   ........           BL       Get_Message_Type
   \   000003BC   0090A0E1           MOV      R9,R0
   \   000003C0   030050E3           CMP      R0,#+3
   \   000003C4   04005013           CMPNE    R0,#+4
   \   000003C8   2700000A           BEQ      ??Process_Incoming_Message_14
   2291              {
   2292                if(DISPLAY_POPUPS)
   \   000003CC   ........           LDR      R0,??DataTable92  ;; DISPLAY_POPUPS
   \   000003D0   000090E5           LDR      R0,[R0, #+0]
   \   000003D4   000050E3           CMP      R0,#+0
   \   000003D8   1000000A           BEQ      ??Process_Incoming_Message_15
   2293                {
   2294                  char* m = malloc(128+5+strlen(msgnode->value));
   \   000003DC   100098E5           LDR      R0,[R8, #+16]
   \   000003E0   1B0000EF           SWI      +27
   \   000003E4   850080E2           ADD      R0,R0,#+133
   \   000003E8   140000EF           SWI      +20
   2295                  sprintf(m,"%s: %s", chr_from, msgnode->value);
   \   000003EC   103098E5           LDR      R3,[R8, #+16]
   \   000003F0   00B0A0E1           MOV      R11,R0
   \   000003F4   0420A0E1           MOV      R2,R4
   \   000003F8   501085E2           ADD      R1,R5,#+80
   \   000003FC   160000EF           SWI      +22
   2296                  //char *ansi_m=convUTF8_to_ANSI_STR(m);
   2297                  char *ansi_m = m;
   2298                  utf82win(ansi_m, ansi_m);
   \   00000400   0B10A0E1           MOV      R1,R11
   \   00000404   0B00A0E1           MOV      R0,R11
   \   00000408   ........           _BLF     utf82win,??utf82win??rA
   2299                  ShowMSG(1,(int)ansi_m);
   \   0000040C   0B10A0E1           MOV      R1,R11
   \   00000410   0100A0E3           MOV      R0,#+1
   \   00000414   480100EF           SWI      +328
   2300                  mfree(m);
   \   00000418   0B00A0E1           MOV      R0,R11
   \   0000041C   150000EF           SWI      +21
   2301                  //mfree(ansi_m);
   2302                }
   2303                extern const char sndPM[];
   2304                SUBPROC((void *)Play,sndPM);
   \                     ??Process_Incoming_Message_15:
   \   00000420   24119FE5           LDR      R1,??Process_Incoming_Message_0+0x14  ;; sndPM
   \   00000424   2D0000EA           B        ??Process_Incoming_Message_16
   \                     ??Process_Incoming_Message_1:
   \   00000428   78000000           DC8      "x",+0,+0
   2305              }
   \                     ??Process_Incoming_Message_9:
   \   0000042C   000056E3           CMP      R6,#+0
   \   00000430   D7FFFF0A           BEQ      ??Process_Incoming_Message_10
   \   00000434   CC00A0E3           MOV      R0,#+204
   \   00000438   400E80E3           ORR      R0,R0,#0x400
   \   0000043C   051080E0           ADD      R1,R0,R5
   \   00000440   0600A0E1           MOV      R0,R6
   \   00000444   ........           _BLF     XML_Get_Child_Node_By_Name,??XML_Get_Child_Node_By_Name??rA
   \   00000448   00A0B0E1           MOVS     R10,R0
   \   0000044C   10009A15           LDRNE    R0,[R10, #+16]
   \   00000450   00005013           CMPNE    R0,#+0
   \   00000454   CEFFFF0A           BEQ      ??Process_Incoming_Message_10
   \   00000458   1B0000EF           SWI      +27
   \   0000045C   000050E3           CMP      R0,#+0
   \   00000460   CBFFFF0A           BEQ      ??Process_Incoming_Message_10
   \   00000464   0A80A0E1           MOV      R8,R10
   \   00000468   CBFFFFEA           B        ??Process_Incoming_Message_13
   2306                else
   2307                  {
   2308                    if(BOLD_NICK_INMUC)
   \                     ??Process_Incoming_Message_14:
   \   0000046C   DC009FE5           LDR      R0,??Process_Incoming_Message_0+0x18  ;; BOLD_NICK_INMUC
   \   00000470   000090E5           LDR      R0,[R0, #+0]
   \   00000474   000050E3           CMP      R0,#+0
   \   00000478   1700000A           BEQ      ??Process_Incoming_Message_17
   2309                    if(msgtype==MSG_GCHAT)
   \   0000047C   030059E3           CMP      R9,#+3
   \   00000480   1500001A           BNE      ??Process_Incoming_Message_17
   2310                    {
   2311                    CLIST* clMuc = CList_FindContactByJID(chr_from);
   \   00000484   0400A0E1           MOV      R0,R4
   \   00000488   ........           _BLF     CList_FindContactByJID,??CList_FindContactByJID??rA
   2312                    if(clMuc)
   \   0000048C   000050E3           CMP      R0,#+0
   \   00000490   1100000A           BEQ      ??Process_Incoming_Message_17
   2313                    {
   2314                      MUC_ITEM* TmpMUC = CList_FindMUCByJID(clMuc->JID);
   \   00000494   000090E5           LDR      R0,[R0, #+0]
   \   00000498   ........           _BLF     CList_FindMUCByJID,??CList_FindMUCByJID??rA
   2315                      if (TmpMUC)
   \   0000049C   000050E3           CMP      R0,#+0
   \   000004A0   0D00000A           BEQ      ??Process_Incoming_Message_17
   2316                      {
   2317                        char* my_nick = Get_Resource_Name_By_FullJID(TmpMUC->conf_jid);
   \   000004A4   000090E5           LDR      R0,[R0, #+0]
   \   000004A8   ........           BL       Get_Resource_Name_By_FullJID
   \   000004AC   00B0A0E1           MOV      R11,R0
   2318                        if (strstr(msgnode->value, my_nick))
   \   000004B0   100098E5           LDR      R0,[R8, #+16]
   \   000004B4   0B10A0E1           MOV      R1,R11
   \   000004B8   180100EF           SWI      +280
   \   000004BC   000050E3           CMP      R0,#+0
   \   000004C0   0500000A           BEQ      ??Process_Incoming_Message_17
   2319                        {
   2320                          if(strcmp(Get_Resource_Name_By_FullJID(chr_from), my_nick)) 
   \   000004C4   0400A0E1           MOV      R0,R4
   \   000004C8   ........           BL       Get_Resource_Name_By_FullJID
   \   000004CC   0B10A0E1           MOV      R1,R11
   \   000004D0   190000EF           SWI      +25
   \   000004D4   000050E3           CMP      R0,#+0
   2321                            msgtype=MSG_NICKGCHAT;
   \   000004D8   0490A013           MOVNE    R9,#+4
   2322                        }
   2323                      }
   2324                    }
   2325                    }
   2326                    extern const char sndConf[];
   2327                    SUBPROC((void *)Play,sndConf);
   \                     ??Process_Incoming_Message_17:
   \   000004DC   70109FE5           LDR      R1,??Process_Incoming_Message_0+0x1C  ;; sndConf
   \                     ??Process_Incoming_Message_16:
   \   000004E0   0A00A0E1           MOV      R0,R10
   \   000004E4   710100EF           SWI      +369
   2328                  }
   2329              if(Is_subj)
   2330              {
   2331                msgtype = MSG_SUBJECT;
   2332              }
   2333              
   2334              if (!msgerror)
   \   000004E8   102098E5           LDR      R2,[R8, #+16]
   \   000004EC   000057E3           CMP      R7,#+0
   \   000004F0   0790A013           MOVNE    R9,#+7
   \   000004F4   000056E3           CMP      R6,#+0
   \   000004F8   0300001A           BNE      ??Process_Incoming_Message_18
   2335              CList_AddMessage(chr_from, msgtype, msgnode->value);
   \   000004FC   0910A0E1           MOV      R1,R9
   \   00000500   0400A0E1           MOV      R0,R4
   \   00000504   ........           _BLF     CList_AddMessage,??CList_AddMessage??rA
   \   00000508   060000EA           B        ??Process_Incoming_Message_19
   2336              else
   2337              {
   2338                char r[MAX_STATUS_LEN];
   2339                sprintf(r, "Error: %s", msgnode->value);
   \                     ??Process_Incoming_Message_18:
   \   0000050C   7C1085E2           ADD      R1,R5,#+124
   \   00000510   2C008DE2           ADD      R0,SP,#+44
   \   00000514   160000EF           SWI      +22
   2340                CList_AddSystemMessage(chr_from, PRESENCE_ERROR, r);
   \   00000518   2C208DE2           ADD      R2,SP,#+44
   \   0000051C   0710A0E3           MOV      R1,#+7
   \   00000520   0400A0E1           MOV      R0,R4
   \   00000524   ........           _BLF     CList_AddSystemMessage,??CList_AddSystemMessage??rA
   2341              }
   2342              extern volatile int vibra_count;
   2343              Vibrate(1);
   \                     ??Process_Incoming_Message_19:
   \   00000528   0100A0E3           MOV      R0,#+1
   \   0000052C   ........           _BLF     Vibrate,??Vibrate??rA
   2344            }
   2345          }
   \                     ??Process_Incoming_Message_12:
   \   00000530   8BDF8DE2           ADD      SP,SP,#+556      ;; stack cleaning
   \   00000534   F08FBDE8           POP      {R4-R11,PC}      ;; return
   \                     ??Process_Incoming_Message_0:
   \   00000538   ........           DC32     `?<Constant "from">`
   \   0000053C   ........           DC32     `?<Constant "xmlns">_1`
   \   00000540   ........           DC32     `?<Constant "id">`
   \   00000544   ........           DC32     `?<Constant "received">_1`
   \   00000548   ........           DC32     `?<Constant "xmlns">`
   \   0000054C   ........           DC32     sndPM
   \   00000550   ........           DC32     BOLD_NICK_INMUC
   \   00000554   ........           DC32     sndConf
   2346          
   2347          /*
   2348          Получить внутренний номер данного типа присутствия по строке с присутсвием
   2349          */

   \                                 In segment CODE, align 4, keep-with-next
   2350          unsigned short GetPresenceIndex(char* presence_str)
   2351          {
   \                     GetPresenceIndex:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   \   00000004   0040B0E1           MOVS     R4,R0
   2352            if(!presence_str)return 0;
   \   00000008   0100001A           BNE      ??GetPresenceIndex_0
   \                     ??GetPresenceIndex_1:
   \   0000000C   0000A0E3           MOV      R0,#+0
   \   00000010   3080BDE8           POP      {R4,R5,PC}
   2353            for(int i=0;i<PRES_COUNT;i++)
   \                     ??GetPresenceIndex_0:
   \   00000014   0050A0E3           MOV      R5,#+0
   \   00000018   020000EA           B        ??GetPresenceIndex_2
   \                     ??GetPresenceIndex_3:
   \   0000001C   015085E2           ADD      R5,R5,#+1
   \   00000020   0C0055E3           CMP      R5,#+12
   \   00000024   F8FFFFAA           BGE      ??GetPresenceIndex_1
   2354            {
   2355              if(!strcmp(presence_str, PRESENCES[i]))return i;
   \                     ??GetPresenceIndex_2:
   \   00000028   ........           LDR      R0,??DataTable93  ;; OnlineInfo
   \   0000002C   050180E0           ADD      R0,R0,R5, LSL #+2
   \   00000030   081090E5           LDR      R1,[R0, #+8]
   \   00000034   0400A0E1           MOV      R0,R4
   \   00000038   190000EF           SWI      +25
   \   0000003C   000050E3           CMP      R0,#+0
   \   00000040   F5FFFF1A           BNE      ??GetPresenceIndex_3
   \   00000044   0508A0E1           MOV      R0,R5, LSL #+16
   \   00000048   2008A0E1           MOV      R0,R0, LSR #+16
   \   0000004C   3080BDE8           POP      {R4,R5,PC}       ;; return
   2356            }
   2357            return 0;
   2358          }
   2359          
   2360          /*
   2361          Получить внутренний номер данного типа роли/полномочий по строке с присутсвием
   2362          */

   \                                 In segment CODE, align 4, keep-with-next
   2363          unsigned short GetAffRoleIndex(char* str)
   2364          {
   \                     GetAffRoleIndex:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
   \   00000004   0040B0E1           MOVS     R4,R0
   2365            if(!str)return 0;
   \   00000008   0100001A           BNE      ??GetAffRoleIndex_0
   \                     ??GetAffRoleIndex_1:
   \   0000000C   0000A0E3           MOV      R0,#+0
   \   00000010   7080BDE8           POP      {R4-R6,PC}       ;; return
   2366            int i;
   2367            for(i=0;i<AFFS_CNT;i++)
   \                     ??GetAffRoleIndex_0:
   \   00000014   ........           LDR      R6,??DataTable94  ;; JABBER_AFFS
   \   00000018   0050A0E3           MOV      R5,#+0
   2368            {
   2369              if(!strcmp(str, JABBER_AFFS[i]))return i;
   \                     ??GetAffRoleIndex_2:
   \   0000001C   0400A0E1           MOV      R0,R4
   \   00000020   051196E7           LDR      R1,[R6, +R5, LSL #+2]
   \   00000024   190000EF           SWI      +25
   \   00000028   000050E3           CMP      R0,#+0
   \   0000002C   0200001A           BNE      ??GetAffRoleIndex_3
   \                     ??GetAffRoleIndex_4:
   \   00000030   0508A0E1           MOV      R0,R5, LSL #+16
   \   00000034   2008A0E1           MOV      R0,R0, LSR #+16
   \   00000038   7080BDE8           POP      {R4-R6,PC}
   2370            }
   \                     ??GetAffRoleIndex_3:
   \   0000003C   015085E2           ADD      R5,R5,#+1
   \   00000040   050055E3           CMP      R5,#+5
   \   00000044   F4FFFFBA           BLT      ??GetAffRoleIndex_2
   2371            for(i=0;i<ROLS_CNT;i++)
   \   00000048   0050A0E3           MOV      R5,#+0
   2372            {
   2373              if(!strcmp(str, JABBER_ROLS[i]))return i;
   \                     ??GetAffRoleIndex_5:
   \   0000004C   050186E0           ADD      R0,R6,R5, LSL #+2
   \   00000050   141090E5           LDR      R1,[R0, #+20]
   \   00000054   0400A0E1           MOV      R0,R4
   \   00000058   190000EF           SWI      +25
   \   0000005C   000050E3           CMP      R0,#+0
   \   00000060   F2FFFF0A           BEQ      ??GetAffRoleIndex_4
   2374            }
   \   00000064   015085E2           ADD      R5,R5,#+1
   \   00000068   040055E3           CMP      R5,#+4
   \   0000006C   E6FFFFAA           BGE      ??GetAffRoleIndex_1
   \   00000070   F5FFFFEA           B        ??GetAffRoleIndex_5
   2375          
   2376            return 0;
   2377          }
   2378          
   2379          
   2380          //Context:HELPER

   \                                 In segment CODE, align 4, keep-with-next
   2381          void _sendandfree(char *str)
   2382          {
   \                     _sendandfree:
   \   00000000   10402DE9           PUSH     {R4,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   2383            SendAnswer(str);
   \   00000008   ........           _BLF     SendAnswer,??SendAnswer??rA
   2384            mfree(str);
   \   0000000C   0400A0E1           MOV      R0,R4
   \   00000010   150000EF           SWI      +21
   2385          }
   \   00000014   1080BDE8           POP      {R4,PC}          ;; return

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable1:
   \   00000000   ........           DC32     intimes

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable5:
   \   00000000   ........           DC32     JABBER_SERVER

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable6:
   \   00000000   ........           DC32     `?<Constant "username">`

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable7:
   \   00000000   ........           DC32     My_JID

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable8:
   \   00000000   ........           DC32     My_JID_full

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable9:
   \   00000000   ........           DC32     auth_id

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable23:
   \   00000000   ........           DC32     OnlineInfo

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable25:
   \   00000000   ........           DC32     logmsg

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable27:
   \   00000000   ........           DC32     DELIVERY_EVENTS

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable38:
   \   00000000   ........           DC32     intimes

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable41:
   \   00000000   ........           DC32     VERSION_NAME

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable42:
   \   00000000   ........           DC32     VERSION_VERS

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable44:
   \   00000000   ........           DC32     `?<Constant "x">_1`

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable45:
   \   00000000   ........           DC32     intimes

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable46:
   \   00000000   ........           DC32     percent_d

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable47:
   \   00000000   ........           DC32     DELIVERY_EVENTS

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable48:
   \   00000000   ........           DC32     COMPOSING_EVENTS

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable49:
   \   00000000   ........           DC32     USE_ATTENTION

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable52:
   \   00000000   ........           DC32     OnlineInfo

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable53:
   \   00000000   ........           DC32     Jabber_state

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable54:
   \   00000000   ........           DC32     percent_d

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable55:
   \   00000000   ........           DC32     OnlineInfo

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable57:
   \   00000000   ........           DC32     `?<Constant "username">`

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable59:
   \   00000000   ........           DC32     OnlineInfo

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable60:
   \   00000000   ........           DC32     Send_Initial_Presence_Helper

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable62:
   \   00000000   ........           DC32     `?<Constant "x">_1`

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable63:
   \   00000000   ........           DC32     cltop

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable64:
   \   00000000   ........           DC32     My_JID_full

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable66:
   \   00000000   ........           DC32     `?<Constant "x">_1` + 96

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable67:
   \   00000000   ........           DC32     `?<Constant "x">_1`

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable68:
   \   00000000   ........           DC32     auth_id

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable71:
   \   00000000   ........           DC32     cltop

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable72:
   \   00000000   ........           DC32     My_JID

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable73:
   \   00000000   ........           DC32     Send_Initial_Presence_Helper

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable75:
   \   00000000   ........           DC32     logmsg

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable77:
   \   00000000   ........           DC32     Jabber_state

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable78:
   \   00000000   ........           DC32     `?<Constant "x">_1`

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable84:
   \   00000000   ........           DC32     percent_d

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable87:
   \   00000000   ........           DC32     `?<Constant "x">_1`

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable88:
   \   00000000   ........           DC32     USE_ATTENTION

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable89:
   \   00000000   ........           DC32     DELIVERY_EVENTS

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable90:
   \   00000000   ........           DC32     COMPOSING_EVENTS

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable91:
   \   00000000   ........           DC32     Play

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable92:
   \   00000000   ........           DC32     DISPLAY_POPUPS

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable93:
   \   00000000   ........           DC32     OnlineInfo

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable94:
   \   00000000   ........           DC32     JABBER_AFFS

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for OnlineInfo>`:
   \   00000000   0000               DC8 0, 0
   \   00000002   0000               DC16 0
   \   00000004   00000000           DC32 0H
   \                     `?<Initializer for PRESENCES>`:
   \   00000008   ............       DC32 `?<Constant "online">`, `?<Constant "chat">`, `?<Constant "away">`
   \              ............
   \   00000014   ............       DC32 `?<Constant "xa">`, `?<Constant "dnd">`, `?<Constant "invisible">`
   \              ............
   \   00000020   ............       DC32 `?<Constant "unavailable">`, `?<Constant "error">`
   \              ....        
   \   00000028   ............       DC32 `?<Constant "subscribe">`, `?<Constant "subscribed">`
   \              ....        
   \   00000030   ............       DC32 `?<Constant "unsubscribe">`, `?<Constant "unsubscribed">`
   \              ....        
   \                     `?<Initializer for muctop>`:
   \   00000038   00000000           DC32 0H
   \                     `?<Initializer for r>`:
   \   0000003C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   0000004C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   0000005C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   0000006C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   0000007C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   0000008C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   0000009C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000000AC   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000000BC   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000000CC   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000000DC   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000000EC   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000000FC   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   0000010C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   0000011C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   0000012C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   0000013C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   0000014C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   0000015C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   0000016C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   0000017C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   0000018C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   0000019C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000001AC   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000001BC   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000001CC   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000001DC   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000001EC   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000001FC   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   0000020C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   0000021C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   0000022C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for JABBER_AFFS>`:
   \   00000000   ............       DC32 `?<Constant "none">`, `?<Constant "outcast">`
   \              ....        
   \   00000008   ............       DC32 `?<Constant "member">`, `?<Constant "admin">`
   \              ....        
   \   00000010   ........           DC32 `?<Constant "owner">`
   \                     `?<Initializer for JABBER_ROLS>`:
   \   00000014   ............       DC32 `?<Constant "none">`, `?<Constant "visitor">`
   \              ....        
   \   0000001C   ............       DC32 `?<Constant "participant">`, `?<Constant "moderator">`
   \              ....        

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for auth_id>`:
   \   00000000   5369654A435F       DC8 "SieJC_auth_req"
   \              617574685F72
   \              657100      
   \   0000000F   00                 DC8 0
   \                     `?<Initializer for rost_id>`:
   \   00000010   5369654A435F       DC8 "SieJC_rost_req"
   \              726F73745F72
   \              657100      
   \   0000001F   00                 DC8 0
   \                     `?<Initializer for vreq_id>`:
   \   00000020   5369654A435F       DC8 "SieJC_vers_req"
   \              766572735F72
   \              657100      
   \   0000002F   00                 DC8 0
   \                     `?<Initializer for priv_id>`:
   \   00000030   5369654A435F       DC8 "SieJC_priv_req"
   \              707269765F72
   \              657100      
   \   0000003F   00                 DC8 0
   \                     `?<Initializer for treq_id>`:
   \   00000040   5369654A435F       DC8 "SieJC_time_req"
   \              74696D655F72
   \              657100      
   \   0000004F   00                 DC8 0
   \                     `?<Initializer for vcreq_id>`:
   \   00000050   5369654A435F       DC8 "SieJC_vcard_req"
   \              76636172645F
   \              72657100    
   \                     `?<Initializer for lastact_id>`:
   \   00000060   5369654A435F       DC8 "SieJC_lastact_req"
   \              6C6173746163
   \              745F72657100
   \   00000072   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "<iq type=\\'set\\' from=\\'...">`:
   \   00000000   3C6971207479       DC8 3CH, 69H, 71H, 20H, 74H, 79H, 70H, 65H
   \              7065        
   \   00000008   3D2773657427       DC8 3DH, 27H, 73H, 65H, 74H, 27H, 20H, 66H
   \              2066        
   \   00000010   726F6D3D2725       DC8 72H, 6FH, 6DH, 3DH, 27H, 25H, 73H, 27H
   \              7327        
   \   00000018   2069643D2753       DC8 20H, 69H, 64H, 3DH, 27H, 53H, 69H, 65H
   \              6965        
   \   00000020   4A435F702564       DC8 4AH, 43H, 5FH, 70H, 25H, 64H, 27H, 3EH
   \              273E        
   \   00000028   3C7075627375       DC8 3CH, 70H, 75H, 62H, 73H, 75H, 62H, 20H
   \              6220        
   \   00000030   786D6C6E733D       DC8 78H, 6DH, 6CH, 6EH, 73H, 3DH, 27H, 68H
   \              2768        
   \   00000038   7474703A2F2F       DC8 74H, 74H, 70H, 3AH, 2FH, 2FH, 6AH, 61H
   \              6A61        
   \   00000040   626265722E6F       DC8 62H, 62H, 65H, 72H, 2EH, 6FH, 72H, 67H
   \              7267        
   \   00000048   2F70726F746F       DC8 2FH, 70H, 72H, 6FH, 74H, 6FH, 63H, 6FH
   \              636F        
   \   00000050   6C2F70756273       DC8 6CH, 2FH, 70H, 75H, 62H, 73H, 75H, 62H
   \              7562        
   \   00000058   273E3C707562       DC8 27H, 3EH, 3CH, 70H, 75H, 62H, 6CH, 69H
   \              6C69        
   \   00000060   7368206E6F64       DC8 73H, 68H, 20H, 6EH, 6FH, 64H, 65H, 3DH
   \              653D        
   \   00000068   27687474703A       DC8 27H, 68H, 74H, 74H, 70H, 3AH, 2FH, 2FH
   \              2F2F        
   \   00000070   6A6162626572       DC8 6AH, 61H, 62H, 62H, 65H, 72H, 2EH, 6FH
   \              2E6F        
   \   00000078   72672F70726F       DC8 72H, 67H, 2FH, 70H, 72H, 6FH, 74H, 6FH
   \              746F        
   \   00000080   636F6C2F6D6F       DC8 63H, 6FH, 6CH, 2FH, 6DH, 6FH, 6FH, 64H
   \              6F64        
   \   00000088   273E3C697465       DC8 27H, 3EH, 3CH, 69H, 74H, 65H, 6DH, 3EH
   \              6D3E        
   \   00000090   3C6D6F6F6420       DC8 3CH, 6DH, 6FH, 6FH, 64H, 20H, 78H, 6DH
   \              786D        
   \   00000098   6C6E733D2768       DC8 6CH, 6EH, 73H, 3DH, 27H, 68H, 74H, 74H
   \              7474        
   \   000000A0   703A2F2F6A61       DC8 70H, 3AH, 2FH, 2FH, 6AH, 61H, 62H, 62H
   \              6262        
   \   000000A8   65722E6F7267       DC8 65H, 72H, 2EH, 6FH, 72H, 67H, 2FH, 70H
   \              2F70        
   \   000000B0   726F746F636F       DC8 72H, 6FH, 74H, 6FH, 63H, 6FH, 6CH, 2FH
   \              6C2F        
   \   000000B8   6D6F6F64273E       DC8 6DH, 6FH, 6FH, 64H, 27H, 3EH, 3CH, 25H
   \              3C25        
   \   000000C0   732F3E00           DC8 73H, 2FH, 3EH, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "xmlns">`:
   \   00000000   786D6C6E7300       DC8 "xmlns"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "from">`:
   \   00000000   66726F6D00         DC8 "from"
   \   00000005   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "xmlns">_1`:
   \   00000000   786D6C6E7300       DC8 "xmlns"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 1, align-sorted
   \                     `?<Constant "id">`:
   \   00000000   696400             DC8 "id"

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   7800               DC8 "x"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "x">_1`:
   \   00000000   7800               DC8 "x"
   \   00000002   0000               DC8 0, 0
   \   00000004   696E76697465       DC8 "invite"
   \              00          
   \   0000000B   00                 DC8 0
   \   0000000C   617474656E74       DC8 "attention"
   \              696F6E00    
   \   00000016   0000               DC8 0, 0
   \   00000018   726571756573       DC8 "request"
   \              7400        
   \   00000020   726563656976       DC8 "received"
   \              656400      
   \   00000029   000000             DC8 0, 0, 0
   \   0000002C   636F6D706F73       DC8 "composing"
   \              696E6700    
   \   00000036   0000               DC8 0, 0
   \   00000038   616374697665       DC8 "active"
   \              00          
   \   0000003F   00                 DC8 0
   \   00000040   626F647900         DC8 "body"
   \   00000045   000000             DC8 0, 0, 0
   \   00000048   7375626A6563       DC8 "subject"
   \              7400        
   \   00000050   25733A202573       DC8 "%s: %s"
   \              00          
   \   00000057   00                 DC8 0
   \                     `?<Constant "chat">`:
   \   00000058   6368617400         DC8 "chat"
   \   0000005D   000000             DC8 0, 0, 0
   \                     `?<Constant "error">`:
   \   00000060   6572726F7200       DC8 "error"
   \   00000066   0000               DC8 0, 0
   \                     `?<Constant "subscribe">`:
   \   00000068   737562736372       DC8 "subscribe"
   \              69626500    
   \   00000072   0000               DC8 0, 0
   \                     `?<Constant "none">`:
   \   00000074   6E6F6E6500         DC8 "none"
   \   00000079   000000             DC8 0, 0, 0
   \   0000007C   4572726F723A       DC8 "Error: %s"
   \              20257300    
   \   00000086   0000               DC8 0, 0
   \   00000088   76636172642D       DC8 "vcard-temp"
   \              74656D7000  
   \   00000093   00                 DC8 0
   \   00000094   636C69656E74       DC8 "client/mobile//SieJC %s:%i<%s<%s<%s<%s<%s<%s"
   \              2F6D6F62696C
   \              652F2F536965
   \              4A432025733A
   \              25693C25733C
   \              25733C25733C
   \              25733C25733C
   \              257300      
   \   000000C1   000000             DC8 0, 0, 0
   \                     `?<Constant "http://jabber.org/pro...">`:
   \   000000C4   687474703A2F       DC8 "http://jabber.org/protocol/disco#info"
   \              2F6A61626265
   \              722E6F72672F
   \              70726F746F63
   \              6F6C2F646973
   \              636F23696E66
   \              6F00        
   \   000000EA   0000               DC8 0, 0
   \                     `?<Constant "http://jabber.org/pro...">_1`:
   \   000000EC   687474703A2F       DC8 "http://jabber.org/protocol/muc"
   \              2F6A61626265
   \              722E6F72672F
   \              70726F746F63
   \              6F6C2F6D7563
   \              00          
   \   0000010B   00                 DC8 0
   \                     `?<Constant "jabber:iq:last">`:
   \   0000010C   6A6162626572       DC8 "jabber:iq:last"
   \              3A69713A6C61
   \              737400      
   \   0000011B   00                 DC8 0
   \                     `?<Constant "jabber:iq:time">`:
   \   0000011C   6A6162626572       DC8 "jabber:iq:time"
   \              3A69713A7469
   \              6D6500      
   \   0000012B   00                 DC8 0
   \                     `?<Constant "jabber:iq:version">`:
   \   0000012C   6A6162626572       DC8 "jabber:iq:version"
   \              3A69713A7665
   \              7273696F6E00
   \   0000013E   0000               DC8 0, 0
   \                     `?<Constant "urn:xmpp:ping">`:
   \   00000140   75726E3A786D       DC8 "urn:xmpp:ping"
   \              70703A70696E
   \              6700        
   \   0000014E   0000               DC8 0, 0
   \   00000150   6A6162626572       DC8 "jabber:iq:roster"
   \              3A69713A726F
   \              7374657200  
   \   00000161   000000             DC8 0, 0, 0
   \   00000164   53656E642072       DC8 "Send roster Q"
   \              6F7374657220
   \              5100        
   \   00000172   0000               DC8 0, 0
   \   00000174   67726F757063       DC8 "groupchat"
   \              68617400    
   \   0000017E   0000               DC8 0, 0
   \                     `?<Constant "urn:xmpp:receipts">`:
   \   00000180   75726E3A786D       DC8 "urn:xmpp:receipts"
   \              70703A726563
   \              656970747300
   \   00000192   0000               DC8 0, 0
   \                     `?<Constant "http://jabber.org/pro...">_2`:
   \   00000194   687474703A2F       DC8 "http://jabber.org/protocol/chatstates"
   \              2F6A61626265
   \              722E6F72672F
   \              70726F746F63
   \              6F6C2F636861
   \              747374617465
   \              7300        
   \   000001BA   0000               DC8 0, 0
   \                     `?<Constant "urn:xmpp:attention:0">`:
   \   000001BC   75726E3A786D       DC8 "urn:xmpp:attention:0"
   \              70703A617474
   \              656E74696F6E
   \              3A3000      
   \   000001D1   000000             DC8 0, 0, 0
   \   000001D4   25732D722564       DC8 "%s-r%d (%s)"
   \              202825732900
   \   000001E0   5349452D2573       DC8 "SIE-%s/%s %s (%s:%ddB BAT:%d%s RAM:%dKb)"
   \              2F2573202573
   \              202825733A25
   \              646442204241
   \              543A25642573
   \              2052414D3A25
   \              644B622900  
   \   00000209   000000             DC8 0, 0, 0
   \   0000020C   5349452D2573       DC8 "SIE-%s/%s %s%s"
   \              2F2573202573
   \              257300      
   \   0000021B   00                 DC8 0
   \   0000021C   726573756C74       DC8 "result"
   \              00          
   \   00000223   00                 DC8 0
   \   00000224   253034642530       DC8 "%04d%02d%02dT%02d:%02d:%02d"
   \              326425303264
   \              54253032643A
   \              253032643A25
   \              30326400    
   \   00000240   257325303264       DC8 "%s%02d:%02d"
   \              3A2530326400
   \   0000024C   253032642D25       DC8 "%02d-%02d-%04d %02d:%02d:%02d"
   \              3032642D2530
   \              346420253032
   \              643A25303264
   \              3A2530326400
   \   0000026A   0000               DC8 0, 0
   \   0000026C   626F746800         DC8 "both"
   \   00000271   000000             DC8 0, 0, 0
   \   00000274   66726F6D00         DC8 "from"
   \   00000279   000000             DC8 0, 0, 0
   \   0000027C   737562736372       DC8 "subscription"
   \              697074696F6E
   \              00          
   \   00000289   000000             DC8 0, 0, 0
   \   0000028C   6E616D6500         DC8 "name"
   \   00000291   000000             DC8 0, 0, 0
   \   00000294   67726F757000       DC8 "group"
   \   0000029A   0000               DC8 0, 0
   \   0000029C   7479706500         DC8 "type"
   \   000002A1   000000             DC8 0, 0, 0
   \   000002A4   786D6C6E7300       DC8 "xmlns"
   \   000002AA   0000               DC8 0, 0
   \   000002AC   717565727900       DC8 "query"
   \   000002B2   0000               DC8 0, 0
   \   000002B4   70696E6700         DC8 "ping"
   \   000002B9   000000             DC8 0, 0, 0
   \   000002BC   284D652900         DC8 "(Me)"
   \   000002C1   000000             DC8 0, 0, 0
   \   000002C4   76657273696F       DC8 "version"
   \              6E00        
   \   000002CC   56657273696F       DC8 "Version Info:\012Name:%s\012Version:%s\012OS:%s"
   \              6E20496E666F
   \              3A0A4E616D65
   \              3A25730A5665
   \              7273696F6E3A
   \              25730A4F533A
   \              257300      
   \   000002F3   00                 DC8 0
   \   000002F4   7365636F6E64       DC8 "seconds"
   \              7300        
   \   000002FC   49444C453A20       DC8 "IDLE: %d d. %d hr. %d min. %d sec."
   \              256420642E20
   \              25642068722E
   \              202564206D69
   \              6E2E20256420
   \              7365632E00  
   \   0000031F   00                 DC8 0
   \   00000320   646973706C61       DC8 "display"
   \              7900        
   \   00000328   54696D652049       DC8 "Time Info:\012UTC:%s\012Time Zone:%s\012:>%s"
   \              6E666F3A0A55
   \              54433A25730A
   \              54696D65205A
   \              6F6E653A2573
   \              0A3A3E257300
   \   0000034C   764361726400       DC8 "vCard"
   \   00000352   0000               DC8 0, 0
   \   00000354   73746F726167       DC8 "storage"
   \              6500        
   \   0000035C   73746F726167       DC8 "storage:bookmarks"
   \              653A626F6F6B
   \              6D61726B7300
   \   0000036E   0000               DC8 0, 0
   \   00000370   6A6162626572       DC8 "jabber:iq:private"
   \              3A69713A7072
   \              697661746500
   \   00000382   0000               DC8 0, 0
   \   00000384   636F646500         DC8 "code"
   \   00000389   000000             DC8 0, 0, 0
   \   0000038C   526564697265       DC8 "Redirect"
   \              637400      
   \   00000395   000000             DC8 0, 0, 0
   \   00000398   426164207265       DC8 "Bad request"
   \              717565737400
   \   000003A4   556E61757468       DC8 "Unauthorized"
   \              6F72697A6564
   \              00          
   \   000003B1   000000             DC8 0, 0, 0
   \   000003B4   5061796D656E       DC8 "Payment required"
   \              742072657175
   \              6972656400  
   \   000003C5   000000             DC8 0, 0, 0
   \   000003C8   466F72626964       DC8 "Forbidden"
   \              64656E00    
   \   000003D2   0000               DC8 0, 0
   \   000003D4   4E6F7420666F       DC8 "Not found"
   \              756E6400    
   \   000003DE   0000               DC8 0, 0
   \   000003E0   4E6F7420616C       DC8 "Not allowed"
   \              6C6F77656400
   \   000003EC   4E6F74206163       DC8 "Not acceptable"
   \              636570746162
   \              6C6500      
   \   000003FB   00                 DC8 0
   \   000003FC   526567697374       DC8 "Registration required"
   \              726174696F6E
   \              207265717569
   \              72656400    
   \   00000412   0000               DC8 0, 0
   \   00000414   526571756573       DC8 "Request timeout"
   \              742074696D65
   \              6F757400    
   \   00000424   436F6E666C69       DC8 "Conflict"
   \              637400      
   \   0000042D   000000             DC8 0, 0, 0
   \   00000430   496E7465726E       DC8 "Internal server error"
   \              616C20736572
   \              766572206572
   \              726F7200    
   \   00000446   0000               DC8 0, 0
   \   00000448   4E6F74206D70       DC8 "Not mplemented"
   \              6C656D656E74
   \              656400      
   \   00000457   00                 DC8 0
   \   00000458   52656D6F7465       DC8 "Remote server error"
   \              207365727665
   \              72206572726F
   \              7200        
   \   0000046C   536572766963       DC8 "Service unavailable"
   \              6520756E6176
   \              61696C61626C
   \              6500        
   \   00000480   52656D6F7465       DC8 "Remote server timeout"
   \              207365727665
   \              722074696D65
   \              6F757400    
   \   00000496   0000               DC8 0, 0
   \   00000498   4552523A2573       DC8 "ERR:%s"
   \              00          
   \   0000049F   00                 DC8 0
   \   000004A0   0A4175746820       DC8 "\012Auth error!"
   \              6572726F7221
   \              00          
   \   000004AD   000000             DC8 0, 0, 0
   \   000004B0   73686F7700         DC8 "show"
   \   000004B5   000000             DC8 0, 0, 0
   \   000004B8   737461747573       DC8 "status"
   \              00          
   \   000004BF   00                 DC8 0
   \   000004C0   7072696F7269       DC8 "priority"
   \              747900      
   \   000004C9   000000             DC8 0, 0, 0
   \   000004CC   7465787400         DC8 "text"
   \   000004D1   000000             DC8 0, 0, 0
   \   000004D4   455252202573       DC8 "ERR %s"
   \              00          
   \   000004DB   00                 DC8 0
   \   000004DC   6974656D00         DC8 "item"
   \   000004E1   000000             DC8 0, 0, 0
   \   000004E4   616666696C69       DC8 "affiliation"
   \              6174696F6E00
   \   000004F0   726F6C6500         DC8 "role"
   \   000004F5   000000             DC8 0, 0, 0
   \   000004F8   257320697320       DC8 "%s is now %s and %s [%d->%d, %d->%d]"
   \              6E6F77202573
   \              20616E642025
   \              73205B25642D
   \              3E25642C2025
   \              642D3E25645D
   \              00          
   \   0000051D   000000             DC8 0, 0, 0
   \   00000520   257320636861       DC8 "%s changed status to %s (%s)"
   \              6E6765642073
   \              746174757320
   \              746F20257320
   \              2825732900  
   \   0000053D   000000             DC8 0, 0, 0
   \   00000540   257320636861       DC8 "%s changed status to %s"
   \              6E6765642073
   \              746174757320
   \              746F20257300
   \   00000558   257320282573       DC8 "%s (%s) joined as %s and %s"
   \              29206A6F696E
   \              656420617320
   \              257320616E64
   \              20257300    
   \   00000574   2573206A6F69       DC8 "%s joined as %s and %s"
   \              6E6564206173
   \              20257320616E
   \              6420257300  
   \   0000058B   00                 DC8 0
   \   0000058C   CAEEEDF4E5F0       DC8 "\312\356\355\364\345\360\345\355\366\350\377 \361\356\347\344\340\355\340 \363\361\357\345\370\355\356"
   \              E5EDF6E8FF20
   \              F1EEE7E4E0ED
   \              E020F3F1EFE5
   \              F8EDEE00    
   \   000005A8   2573206C6566       DC8 "%s left us"
   \              7420757300  
   \   000005B3   00                 DC8 0
   \   000005B4   2573206C6566       DC8 "%s left us (%s)"
   \              742075732028
   \              25732900    
   \   000005C4   257320776173       DC8 "%s was kicked!"
   \              206B69636B65
   \              642100      
   \   000005D3   00                 DC8 0
   \   000005D4   257320776173       DC8 "%s was BANNED! "
   \              2042414E4E45
   \              44212000    
   \   000005E4   257320776173       DC8 "%s was kicked, because room became member-only!"
   \              206B69636B65
   \              642C20626563
   \              617573652072
   \              6F6F6D206265
   \              63616D65206D
   \              656D6265722D
   \              6F6E6C792100
   \   00000614   257320697320       DC8 "%s is now known as %s"
   \              6E6F77206B6E
   \              6F776E206173
   \              20257300    
   \   0000062A   0000               DC8 0, 0
   \   0000062C   6E69636B00         DC8 "nick"
   \   00000631   000000             DC8 0, 0, 0
   \   00000634   4E6577204D55       DC8 "New MUC created. Owner-%s"
   \              432063726561
   \              7465642E204F
   \              776E65722D25
   \              7300        
   \   0000064E   0000               DC8 0, 0
   \   00000650   2573202D205B       DC8 "%s - [unknow action(%s)]"
   \              756E6B6E6F77
   \              20616374696F
   \              6E282573295D
   \              00          
   \   00000669   000000             DC8 0, 0, 0
   \   0000066C   3B2052656173       DC8 "; Reason: "
   \              6F6E3A2000  
   \   00000677   00                 DC8 0
   \   00000678   687474703A2F       DC8 "http://jabber.org/protocol/muc#user"
   \              2F6A61626265
   \              722E6F72672F
   \              70726F746F63
   \              6F6C2F6D7563
   \              237573657200

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "online">`:
   \   00000000   6F6E6C696E65       DC8 "online"
   \              00          
   \   00000007   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "away">`:
   \   00000000   6177617900         DC8 "away"
   \   00000005   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 1, align-sorted
   \                     `?<Constant "xa">`:
   \   00000000   786100             DC8 "xa"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "dnd">`:
   \   00000000   646E6400           DC8 "dnd"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "invisible">`:
   \   00000000   696E76697369       DC8 "invisible"
   \              626C6500    
   \   0000000A   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "unavailable">`:
   \   00000000   756E61766169       DC8 "unavailable"
   \              6C61626C6500

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "subscribed">`:
   \   00000000   737562736372       DC8 "subscribed"
   \              6962656400  
   \   0000000B   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "unsubscribe">`:
   \   00000000   756E73756273       DC8 "unsubscribe"
   \              637269626500

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "unsubscribed">`:
   \   00000000   756E73756273       DC8 "unsubscribed"
   \              637269626564
   \              00          
   \   0000000D   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "outcast">`:
   \   00000000   6F7574636173       DC8 "outcast"
   \              7400        

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "member">`:
   \   00000000   6D656D626572       DC8 "member"
   \              00          
   \   00000007   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "admin">`:
   \   00000000   61646D696E00       DC8 "admin"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "owner">`:
   \   00000000   6F776E657200       DC8 "owner"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "visitor">`:
   \   00000000   76697369746F       DC8 "visitor"
   \              7200        

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "participant">`:
   \   00000000   706172746963       DC8 "participant"
   \              6970616E7400

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "moderator">`:
   \   00000000   6D6F64657261       DC8 "moderator"
   \              746F7200    
   \   0000000A   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "jabber:iq:version">_1`:
   \   00000000   6A6162626572       DC8 "jabber:iq:version"
   \              3A69713A7665
   \              7273696F6E00
   \   00000012   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "</mood></item></publi...">`:
   \   00000000   3C2F6D6F6F64       DC8 "</mood></item></publish></pubsub></iq>"
   \              3E3C2F697465
   \              6D3E3C2F7075
   \              626C6973683E
   \              3C2F70756273
   \              75623E3C2F69
   \              713E00      
   \   00000027   00                 DC8 0
   \   00000028   3C746578743E       DC8 "<text>%s</text>"
   \              25733C2F7465
   \              78743E00    

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "<iq type=\\'set\\' from=\\'...">_1`:
   \   00000000   3C6971207479       DC8 3CH, 69H, 71H, 20H, 74H, 79H, 70H, 65H
   \              7065        
   \   00000008   3D2773657427       DC8 3DH, 27H, 73H, 65H, 74H, 27H, 20H, 66H
   \              2066        
   \   00000010   726F6D3D2725       DC8 72H, 6FH, 6DH, 3DH, 27H, 25H, 73H, 27H
   \              7327        
   \   00000018   2069643D2753       DC8 20H, 69H, 64H, 3DH, 27H, 53H, 69H, 65H
   \              6965        
   \   00000020   4A435F702564       DC8 4AH, 43H, 5FH, 70H, 25H, 64H, 27H, 3EH
   \              273E        
   \   00000028   3C7075627375       DC8 3CH, 70H, 75H, 62H, 73H, 75H, 62H, 20H
   \              6220        
   \   00000030   786D6C6E733D       DC8 78H, 6DH, 6CH, 6EH, 73H, 3DH, 27H, 68H
   \              2768        
   \   00000038   7474703A2F2F       DC8 74H, 74H, 70H, 3AH, 2FH, 2FH, 6AH, 61H
   \              6A61        
   \   00000040   626265722E6F       DC8 62H, 62H, 65H, 72H, 2EH, 6FH, 72H, 67H
   \              7267        
   \   00000048   2F70726F746F       DC8 2FH, 70H, 72H, 6FH, 74H, 6FH, 63H, 6FH
   \              636F        
   \   00000050   6C2F70756273       DC8 6CH, 2FH, 70H, 75H, 62H, 73H, 75H, 62H
   \              7562        
   \   00000058   273E3C707562       DC8 27H, 3EH, 3CH, 70H, 75H, 62H, 6CH, 69H
   \              6C69        
   \   00000060   7368206E6F64       DC8 73H, 68H, 20H, 6EH, 6FH, 64H, 65H, 3DH
   \              653D        
   \   00000068   27687474703A       DC8 27H, 68H, 74H, 74H, 70H, 3AH, 2FH, 2FH
   \              2F2F        
   \   00000070   6A6162626572       DC8 6AH, 61H, 62H, 62H, 65H, 72H, 2EH, 6FH
   \              2E6F        
   \   00000078   72672F70726F       DC8 72H, 67H, 2FH, 70H, 72H, 6FH, 74H, 6FH
   \              746F        
   \   00000080   636F6C2F6D6F       DC8 63H, 6FH, 6CH, 2FH, 6DH, 6FH, 6FH, 64H
   \              6F64        
   \   00000088   273E3C697465       DC8 27H, 3EH, 3CH, 69H, 74H, 65H, 6DH, 3EH
   \              6D3E        
   \   00000090   3C6D6F6F6420       DC8 3CH, 6DH, 6FH, 6FH, 64H, 20H, 78H, 6DH
   \              786D        
   \   00000098   6C6E733D2768       DC8 6CH, 6EH, 73H, 3DH, 27H, 68H, 74H, 74H
   \              7474        
   \   000000A0   703A2F2F6A61       DC8 70H, 3AH, 2FH, 2FH, 6AH, 61H, 62H, 62H
   \              6262        
   \   000000A8   65722E6F7267       DC8 65H, 72H, 2EH, 6FH, 72H, 67H, 2FH, 70H
   \              2F70        
   \   000000B0   726F746F636F       DC8 72H, 6FH, 74H, 6FH, 63H, 6FH, 6CH, 2FH
   \              6C2F        
   \   000000B8   6D6F6F64272F       DC8 6DH, 6FH, 6FH, 64H, 27H, 2FH, 3EH, 3CH
   \              3E3C        
   \   000000C0   2F6974656D3E       DC8 2FH, 69H, 74H, 65H, 6DH, 3EH, 3CH, 2FH
   \              3C2F        
   \   000000C8   7075626C6973       DC8 70H, 75H, 62H, 6CH, 69H, 73H, 68H, 3EH
   \              683E        
   \   000000D0   3C2F70756273       DC8 3CH, 2FH, 70H, 75H, 62H, 73H, 75H, 62H
   \              7562        
   \   000000D8   3E3C2F69713E       DC8 3EH, 3CH, 2FH, 69H, 71H, 3EH, 0
   \              00          
   \   000000DF   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "xmlns">_3`:
   \   00000000   786D6C6E7300       DC8 "xmlns"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "query">_1`:
   \   00000000   717565727900       DC8 "query"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 1, align-sorted
   \                     `?<Constant "iq">`:
   \   00000000   697100             DC8 "iq"

   \                                 In segment DATA_C, align 1, align-sorted
   \                     `?<Constant "id">_1`:
   \   00000000   696400             DC8 "id"

   \                                 In segment DATA_C, align 1, align-sorted
   \                     `?<Constant "to">`:
   \   00000000   746F00             DC8 "to"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "type">_1`:
   \   00000000   7479706500         DC8 "type"
   \   00000005   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "message">`:
   \   00000000   6D6573736167       DC8 "message"
   \              6500        

   \                                 In segment DATA_C, align 1, align-sorted
   \                     `?<Constant "id">_2`:
   \   00000000   696400             DC8 "id"

   \                                 In segment DATA_C, align 1, align-sorted
   \                     `?<Constant "to">_1`:
   \   00000000   746F00             DC8 "to"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "type">_2`:
   \   00000000   7479706500         DC8 "type"
   \   00000005   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "presence">`:
   \   00000000   70726573656E       DC8 "presence"
   \              636500      
   \   00000009   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 1, align-sorted
   \                     `?<Constant "id">_3`:
   \   00000000   696400             DC8 "id"

   \                                 In segment DATA_C, align 1, align-sorted
   \                     `?<Constant "to">_2`:
   \   00000000   746F00             DC8 "to"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "type">_3`:
   \   00000000   7479706500         DC8 "type"
   \   00000005   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "<?xml version=\\'1.0\\' e...">`:
   \   00000000   3C3F786D6C20       DC8 3CH, 3FH, 78H, 6DH, 6CH, 20H, 76H, 65H
   \              7665        
   \   00000008   7273696F6E3D       DC8 72H, 73H, 69H, 6FH, 6EH, 3DH, 27H, 31H
   \              2731        
   \   00000010   2E302720656E       DC8 2EH, 30H, 27H, 20H, 65H, 6EH, 63H, 6FH
   \              636F        
   \   00000018   64696E673D27       DC8 64H, 69H, 6EH, 67H, 3DH, 27H, 55H, 54H
   \              5554        
   \   00000020   462D38273F3E       DC8 46H, 2DH, 38H, 27H, 3FH, 3EH, 0AH, 3CH
   \              0A3C        
   \   00000028   73747265616D       DC8 73H, 74H, 72H, 65H, 61H, 6DH, 3AH, 73H
   \              3A73        
   \   00000030   747265616D20       DC8 74H, 72H, 65H, 61H, 6DH, 20H, 74H, 6FH
   \              746F        
   \   00000038   3D2725732720       DC8 3DH, 27H, 25H, 73H, 27H, 20H, 78H, 6DH
   \              786D        
   \   00000040   6C6E733D276A       DC8 6CH, 6EH, 73H, 3DH, 27H, 6AH, 61H, 62H
   \              6162        
   \   00000048   6265723A636C       DC8 62H, 65H, 72H, 3AH, 63H, 6CH, 69H, 65H
   \              6965        
   \   00000050   6E742720786D       DC8 6EH, 74H, 27H, 20H, 78H, 6DH, 6CH, 6EH
   \              6C6E        
   \   00000058   733A73747265       DC8 73H, 3AH, 73H, 74H, 72H, 65H, 61H, 6DH
   \              616D        
   \   00000060   3D2768747470       DC8 3DH, 27H, 68H, 74H, 74H, 70H, 3AH, 2FH
   \              3A2F        
   \   00000068   2F6574686572       DC8 2FH, 65H, 74H, 68H, 65H, 72H, 78H, 2EH
   \              782E        
   \   00000070   6A6162626572       DC8 6AH, 61H, 62H, 62H, 65H, 72H, 2EH, 6FH
   \              2E6F        
   \   00000078   72672F737472       DC8 72H, 67H, 2FH, 73H, 74H, 72H, 65H, 61H
   \              6561        
   \   00000080   6D732720786D       DC8 6DH, 73H, 27H, 20H, 78H, 6DH, 6CH, 3AH
   \              6C3A        
   \   00000088   6C616E673D27       DC8 6CH, 61H, 6EH, 67H, 3DH, 27H, 25H, 73H
   \              2573        
   \   00000090   273E00             DC8 27H, 3EH, 0
   \   00000093   00                 DC8 0
   \   00000094   53656E642057       DC8 "Send Welcome"
   \              656C636F6D65
   \              00          
   \   000000A1   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   727500             DC8 "ru"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "</stream:stream>">`:
   \   00000000   3C2F73747265       DC8 "</stream:stream>"
   \              616D3A737472
   \              65616D3E00  
   \   00000011   000000             DC8 0, 0, 0
   \   00000014   53656E642044       DC8 "Send Disconnect"
   \              6973636F6E6E
   \              65637400    

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "username">`:
   \   00000000   757365726E61       DC8 "username"
   \              6D6500      
   \   00000009   000000             DC8 0, 0, 0
   \   0000000C   257340257300       DC8 "%s@%s"
   \   00000012   0000               DC8 0, 0
   \   00000014   25732F257300       DC8 "%s/%s"
   \   0000001A   0000               DC8 0, 0
   \   0000001C   6A6162626572       DC8 "jabber:iq:auth"
   \              3A69713A6175
   \              746800      
   \   0000002B   00                 DC8 0
   \   0000002C   53656E642061       DC8 "Send auth"
   \              75746800    
   \   00000036   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "password">`:
   \   00000000   70617373776F       DC8 "password"
   \              726400      
   \   00000009   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "resource">`:
   \   00000000   7265736F7572       DC8 "resource"
   \              636500      
   \   00000009   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   73657400           DC8 "set"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "SieJC_discoinfo">`:
   \   00000000   5369654A435F       DC8 "SieJC_discoinfo"
   \              646973636F69
   \              6E666F00    

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "get">`:
   \   00000000   67657400           DC8 "get"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "http://jabber.org/pro...">_4`:
   \   00000000   687474703A2F       DC8 "http://jabber.org/protocol/disco#info"
   \              2F6A61626265
   \              722E6F72672F
   \              70726F746F63
   \              6F6C2F646973
   \              636F23696E66
   \              6F00        
   \   00000026   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "get">_1`:
   \   00000000   67657400           DC8 "get"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "get">_2`:
   \   00000000   67657400           DC8 "get"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "jabber:iq:time">_1`:
   \   00000000   6A6162626572       DC8 "jabber:iq:time"
   \              3A69713A7469
   \              6D6500      
   \   0000000F   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "vCard">_1`:
   \   00000000   764361726400       DC8 "vCard"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "xmlns">_4`:
   \   00000000   786D6C6E7300       DC8 "xmlns"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "get">_3`:
   \   00000000   67657400           DC8 "get"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "get">_4`:
   \   00000000   67657400           DC8 "get"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "jabber:iq:last">_1`:
   \   00000000   6A6162626572       DC8 "jabber:iq:last"
   \              3A69713A6C61
   \              737400      
   \   0000000F   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "<urn:xmpp:receipts">`:
   \   00000000   3C75726E3A78       DC8 "<urn:xmpp:receipts"
   \              6D70703A7265
   \              636569707473
   \              00          
   \   00000013   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "<http://jabber.org/pr...">`:
   \   00000000   3C687474703A       DC8 "<http://jabber.org/protocol/chatstates"
   \              2F2F6A616262
   \              65722E6F7267
   \              2F70726F746F
   \              636F6C2F6368
   \              617473746174
   \              657300      
   \   00000027   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "<urn:xmpp:attention:0">`:
   \   00000000   3C75726E3A78       DC8 "<urn:xmpp:attention:0"
   \              6D70703A6174
   \              74656E74696F
   \              6E3A3000    
   \   00000016   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "status">_1`:
   \   00000000   737461747573       DC8 "status"
   \              00          
   \   00000007   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "show">_1`:
   \   00000000   73686F7700         DC8 "show"
   \   00000005   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "c">`:
   \   00000000   6300               DC8 "c"
   \   00000002   0000               DC8 0, 0
   \   00000004   687474703A2F       DC8 "http://jabber.org/protocol/caps"
   \              2F6A61626265
   \              722E6F72672F
   \              70726F746F63
   \              6F6C2F636170
   \              7300        
   \   00000024   25732025732D       DC8 "%s %s-r%d"
   \              72256400    
   \   0000002E   0000               DC8 0, 0
   \   00000030   7368612D3100       DC8 "sha-1"
   \   00000036   0000               DC8 0, 0
   \   00000038   53656E642070       DC8 "Send presence"
   \              726573656E63
   \              6500        
   \   00000046   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "xmlns">_5`:
   \   00000000   786D6C6E7300       DC8 "xmlns"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "node">`:
   \   00000000   6E6F646500         DC8 "node"
   \   00000005   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "ver">`:
   \   00000000   76657200           DC8 "ver"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "hash">`:
   \   00000000   6861736800         DC8 "hash"
   \   00000005   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "priority">_1`:
   \   00000000   7072696F7269       DC8 "priority"
   \              747900      
   \   00000009   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   67657400           DC8 "get"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "body">_1`:
   \   00000000   626F647900         DC8 "body"
   \   00000005   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "request">_1`:
   \   00000000   726571756573       DC8 "request"
   \              7400        

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "xmlns">_6`:
   \   00000000   786D6C6E7300       DC8 "xmlns"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "active">_1`:
   \   00000000   616374697665       DC8 "active"
   \              00          
   \   00000007   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "attention">_1`:
   \   00000000   617474656E74       DC8 "attention"
   \              696F6E00    
   \   0000000A   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "composing">_1`:
   \   00000000   636F6D706F73       DC8 "composing"
   \              696E6700    
   \   0000000A   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "xmlns">_7`:
   \   00000000   786D6C6E7300       DC8 "xmlns"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "active">_2`:
   \   00000000   616374697665       DC8 "active"
   \              00          
   \   00000007   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "xmlns">_8`:
   \   00000000   786D6C6E7300       DC8 "xmlns"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "name">_1`:
   \   00000000   6E616D6500         DC8 "name"
   \   00000005   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "version">_1`:
   \   00000000   76657273696F       DC8 "version"
   \              6E00        

   \                                 In segment DATA_C, align 1, align-sorted
   \                     `?<Constant "os">`:
   \   00000000   6F7300             DC8 "os"

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   2500               DC8 "%"

   \                                 In segment DATA_C, align 1, align-sorted
   \                     `?<Constant "+">`:
   \   00000000   2B00               DC8 "+"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "utc">`:
   \   00000000   75746300           DC8 "utc"

   \                                 In segment DATA_C, align 1, align-sorted
   \                     `?<Constant "tz">`:
   \   00000000   747A00             DC8 "tz"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "display">_1`:
   \   00000000   646973706C61       DC8 "display"
   \              7900        

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "xmlns">_9`:
   \   00000000   786D6C6E7300       DC8 "xmlns"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "query">_2`:
   \   00000000   717565727900       DC8 "query"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "seconds">_1`:
   \   00000000   7365636F6E64       DC8 "seconds"
   \              7300        

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "feature">`:
   \   00000000   666561747572       DC8 "feature"
   \              6500        

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "var">`:
   \   00000000   76617200           DC8 "var"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "identity">`:
   \   00000000   6964656E7469       DC8 "identity"
   \              747900      
   \   00000009   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "category">`:
   \   00000000   63617465676F       DC8 "category"
   \              727900      
   \   00000009   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "type">_4`:
   \   00000000   7479706500         DC8 "type"
   \   00000005   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "phone">`:
   \   00000000   70686F6E6500       DC8 "phone"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "client">`:
   \   00000000   636C69656E74       DC8 "client"
   \              00          
   \   00000007   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant {&"http://jabber.org/pro...", &"jab`:
   \   00000000   ........           DC32 `?<Constant "http://jabber.org/pro...">`
   \   00000004   ........           DC32 `?<Constant "jabber:iq:version">`
   \   00000008   ........           DC32 `?<Constant "http://jabber.org/pro...">_1`
   \   0000000C   ............       DC32 `?<Constant "jabber:iq:time">`, `?<Constant "jabber:iq:last">`
   \              ....        
   \   00000014   ............       DC32 `?<Constant "urn:xmpp:ping">`, `?<Constant "urn:xmpp:receipts">`
   \              ....        
   \   0000001C   ........           DC32 `?<Constant "urn:xmpp:attention:0">`
   \   00000020   ........           DC32 `?<Constant "http://jabber.org/pro...">_2`

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   746F00             DC8 "to"

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   2F00               DC8 "/"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "history">`:
   \   00000000   686973746F72       DC8 "history"
   \              7900        

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "show">_2`:
   \   00000000   73686F7700         DC8 "show"
   \   00000005   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "status">_2`:
   \   00000000   737461747573       DC8 "status"
   \              00          
   \   00000007   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "password">_1`:
   \   00000000   70617373776F       DC8 "password"
   \              726400      
   \   00000009   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 1, align-sorted
   \                     `?<Constant "x">_2`:
   \   00000000   7800               DC8 "x"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "xmlns">_10`:
   \   00000000   786D6C6E7300       DC8 "xmlns"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "maxstanzas">`:
   \   00000000   6D6178737461       DC8 "maxstanzas"
   \              6E7A617300  
   \   0000000B   00                 DC8 0

   \                                 In segment DATA_C, align 1, align-sorted
   \                     `?<Constant "/">_1`:
   \   00000000   2F00               DC8 "/"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "status">_3`:
   \   00000000   737461747573       DC8 "status"
   \              00          
   \   00000007   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "subject">_1`:
   \   00000000   7375626A6563       DC8 "subject"
   \              7400        

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "\\302\\373\\365\\356\\344 \\350\\347 MUC `:
   \   00000000   C2FBF5EEE420       DC8 "\302\373\365\356\344 \350\347 MUC \342\373\357\356\353\355\345\355!"
   \              E8E7204D5543
   \              20E2FBEFEEEB
   \              EDE5ED2100  
   \   00000017   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "jid">`:
   \   00000000   6A696400           DC8 "jid"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "subscribe">_1`:
   \   00000000   737562736372       DC8 "subscribe"
   \              69626500    
   \   0000000A   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "ask">`:
   \   00000000   61736B00           DC8 "ask"

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   61736B00           DC8 "ask"

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   6A696400           DC8 "jid"

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   4000               DC8 "@"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "error">_1`:
   \   00000000   6572726F7200       DC8 "error"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "type">_5`:
   \   00000000   7479706500         DC8 "type"
   \   00000005   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "cancel">`:
   \   00000000   63616E63656C       DC8 "cancel"
   \              00          
   \   00000007   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "feature-not-implemented">`:
   \   00000000   666561747572       DC8 "feature-not-implemented"
   \              652D6E6F742D
   \              696D706C656D
   \              656E74656400

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "xmlns">_11`:
   \   00000000   786D6C6E7300       DC8 "xmlns"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "urn:ietf:params:xml:n...">`:
   \   00000000   75726E3A6965       DC8 "urn:ietf:params:xml:ns:xmpp-stanzas"
   \              74663A706172
   \              616D733A786D
   \              6C3A6E733A78
   \              6D70702D7374
   \              616E7A617300

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "error">_2`:
   \   00000000   6572726F7200       DC8 "error"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "type">_6`:
   \   00000000   7479706500         DC8 "type"
   \   00000005   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "cancel">_1`:
   \   00000000   63616E63656C       DC8 "cancel"
   \              00          
   \   00000007   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "service-unavailable">`:
   \   00000000   736572766963       DC8 "service-unavailable"
   \              652D756E6176
   \              61696C61626C
   \              6500        

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "xmlns">_12`:
   \   00000000   786D6C6E7300       DC8 "xmlns"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "urn:ietf:params:xml:n...">_1`:
   \   00000000   75726E3A6965       DC8 "urn:ietf:params:xml:ns:xmpp-stanzas"
   \              74663A706172
   \              616D733A786D
   \              6C3A6E733A78
   \              6D70702D7374
   \              616E7A617300

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "get">_6`:
   \   00000000   67657400           DC8 "get"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "result">_1`:
   \   00000000   726573756C74       DC8 "result"
   \              00          
   \   00000007   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "error">_3`:
   \   00000000   6572726F7200       DC8 "error"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "set">_1`:
   \   00000000   73657400           DC8 "set"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "jabber:iq:version">_2`:
   \   00000000   6A6162626572       DC8 "jabber:iq:version"
   \              3A69713A7665
   \              7273696F6E00
   \   00000012   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "http://jabber.org/pro...">_6`:
   \   00000000   687474703A2F       DC8 "http://jabber.org/protocol/disco#info"
   \              2F6A61626265
   \              722E6F72672F
   \              70726F746F63
   \              6F6C2F646973
   \              636F23696E66
   \              6F00        
   \   00000026   0000               DC8 0, 0

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   696400             DC8 "id"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "SieJC_bind_req">`:
   \   00000000   5369654A435F       DC8 "SieJC_bind_req"
   \              62696E645F72
   \              657100      
   \   0000000F   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "SieJC_sess_req">`:
   \   00000000   5369654A435F       DC8 "SieJC_sess_req"
   \              736573735F72
   \              657100      
   \   0000000F   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "SieJC_discoinfo">_1`:
   \   00000000   5369654A435F       DC8 "SieJC_discoinfo"
   \              646973636F69
   \              6E666F00    

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "(no data)">`:
   \   00000000   286E6F206461       DC8 "(no data)"
   \              74612900    
   \   0000000A   0000               DC8 0, 0

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   6F7300             DC8 "os"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "(no data)">_1`:
   \   00000000   286E6F206461       DC8 "(no data)"
   \              74612900    
   \   0000000A   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   75746300           DC8 "utc"

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   747A00             DC8 "tz"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "actor">`:
   \   00000000   6163746F7200       DC8 "actor"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "jid">_2`:
   \   00000000   6A696400           DC8 "jid"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "reason">`:
   \   00000000   726561736F6E       DC8 "reason"
   \              00          
   \   00000007   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "xmlns">_13`:
   \   00000000   786D6C6E7300       DC8 "xmlns"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "chat">_1`:
   \   00000000   6368617400         DC8 "chat"
   \   00000005   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "groupchat">_1`:
   \   00000000   67726F757063       DC8 "groupchat"
   \              68617400    
   \   0000000A   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "error">_4`:
   \   00000000   6572726F7200       DC8 "error"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "SieJC_adm">`:
   \   00000000   5369654A435F       DC8 "SieJC_adm"
   \              61646D00    
   \   0000000A   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "set">_2`:
   \   00000000   73657400           DC8 "set"
   \   00000004   687474703A2F       DC8 "http://jabber.org/protocol/muc#admin"
   \              2F6A61626265
   \              722E6F72672F
   \              70726F746F63
   \              6F6C2F6D7563
   \              2361646D696E
   \              00          
   \   00000029   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "affiliation">_1`:
   \   00000000   616666696C69       DC8 "affiliation"
   \              6174696F6E00

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "role">_1`:
   \   00000000   726F6C6500         DC8 "role"
   \   00000005   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "item">_1`:
   \   00000000   6974656D00         DC8 "item"
   \   00000005   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "nick">_1`:
   \   00000000   6E69636B00         DC8 "nick"
   \   00000005   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "reason">_1`:
   \   00000000   726561736F6E       DC8 "reason"
   \              00          
   \   00000007   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "received">_1`:
   \   00000000   726563656976       DC8 "received"
   \              656400      
   \   00000009   000000             DC8 0, 0, 0
   2386          // EOL,EOF

   Maximum stack usage in bytes:

     Function                     CSTACK
     --------                     ------
     CancelComposing                 44
     ChangeRoster                    56
     Enter_Conference                44
     FillRoster                      44
     Generate_Caps                  616
     GetAffRoleIndex                 16
     GetPresenceIndex                12
     GetSubscrType                   12
     Get_Message_Type                36
     Get_Resource_Name_By_FullJID     4
     Leave_Conference                16
     MUCList_Destroy                  8
     MUC_Admin_Command              108
     Muc_Ctl                         20
     Process_Incoming_Message       596
     Process_Iq_Request             204
     Process_Presence_Change        176
     Report_DiscoInfo               124
     Report_IDLEInfo                 52
     Report_PING                     16
     Report_TimeInfo                300
     Report_VersionInfo             416
     SendComposing                   48
     SendIq                          64
     SendMessage                     80
     SendPresence                    52
     Send_Auth                       60
     Send_DiscoInfo_Request          12
     Send_Disconnect                 32
     Send_Feature_Not_Implemented   116
     Send_Initial_Presence_Helper    24
     Send_LastActivity_Request       12
     Send_Leave_Conference            4
     Send_Message                    48
     Send_Mood                      748
     Send_Presence                  108
     Send_Presence_MMIStub            4
     Send_Roster_Query               12
     Send_Service_Unavailable       112
     Send_ShortPresence               4
     Send_Time_Request               12
     Send_Vcard_Request              12
     Send_Version_Request            12
     Send_Welcome_Packet            160
     Set_Conference_Topic             4
     _enterconference                84
     _leaveconference                28
     _mucadmincmd                    28
     _sendandfree                     8
     _senddicoinforequest            76
     _sendlastactivrequest           32
     _sendtimerequest                32
     _sendvcardrequest               36
     _sendversionrequest             40
     _setconferencetopic             16


   Segment part sizes:

     Function/Label                 Bytes
     --------------                 -----
     intimes                          20
     Send_Mood                       320
     SendIq                          356
     Send_Message                    252
     SendPresence                    252
     Send_Welcome_Packet             148
     Send_Disconnect                  52
     Send_Auth                       296
     _senddicoinforequest            124
     Send_DiscoInfo_Request           48
     _sendversionrequest             100
     Send_Version_Request             48
     _sendtimerequest                100
     Send_Time_Request                48
     _sendvcardrequest               148
     Send_Vcard_Request               48
     _sendlastactivrequest           100
     Send_LastActivity_Request        48
     Generate_Caps                   372
     Send_Presence                   928
     Send_ShortPresence               24
     Send_Roster_Query                64
     SendMessage                     468
     SendComposing                   208
     CancelComposing                 204
     Report_VersionInfo              512
     Report_TimeInfo                 432
     Report_IDLEInfo                 228
     Report_DiscoInfo                464
     Report_PING                      64
     GetSubscrType                   116
     Get_Resource_Name_By_FullJID     32
     Send_Initial_Presence_Helper    124
     _enterconference                508
     Enter_Conference                560
     _leaveconference                224
     Muc_Ctl                         148
     _setconferencetopic             112
     Send_Leave_Conference            12
     Set_Conference_Topic             12
     Leave_Conference                152
     MUCList_Destroy                  84
     Send_Presence_MMIStub            16
     ChangeRoster                    308
     FillRoster                      636
     Send_Feature_Not_Implemented    252
     Send_Service_Unavailable        252
     Process_Iq_Request             2996
     Process_Presence_Change        1984
     OnlineInfo                      572
     JABBER_AFFS                      36
     auth_id                         116
     Get_Message_Type                164
     _mucadmincmd                     92
     MUC_Admin_Command               464
     Process_Incoming_Message       1368
     GetPresenceIndex                 80
     GetAffRoleIndex                 116
     _sendandfree                     24
     ??DataTable1                      4
     ??DataTable5                      4
     ??DataTable6                      4
     ??DataTable7                      4
     ??DataTable8                      4
     ??DataTable9                      4
     ??DataTable23                     4
     ??DataTable25                     4
     ??DataTable27                     4
     ??DataTable38                     4
     ??DataTable41                     4
     ??DataTable42                     4
     ??DataTable44                     4
     ??DataTable45                     4
     ??DataTable46                     4
     ??DataTable47                     4
     ??DataTable48                     4
     ??DataTable49                     4
     ??DataTable52                     4
     ??DataTable53                     4
     ??DataTable54                     4
     ??DataTable55                     4
     ??DataTable57                     4
     ??DataTable59                     4
     ??DataTable60                     4
     ??DataTable62                     4
     ??DataTable63                     4
     ??DataTable64                     4
     ??DataTable66                     4
     ??DataTable67                     4
     ??DataTable68                     4
     ??DataTable71                     4
     ??DataTable72                     4
     ??DataTable73                     4
     ??DataTable75                     4
     ??DataTable77                     4
     ??DataTable78                     4
     ??DataTable84                     4
     ??DataTable87                     4
     ??DataTable88                     4
     ??DataTable89                     4
     ??DataTable90                     4
     ??DataTable91                     4
     ??DataTable92                     4
     ??DataTable93                     4
     ??DataTable94                     4
     ?<Initializer for OnlineInfo>   572
     ?<Initializer for JABBER_AFFS>   36
     ?<Initializer for auth_id>      116
     ?<Constant "<iq type=\'set\' from=\'...">
                                     196
     ?<Constant "xmlns">               8
     ?<Constant "from">                8
     ?<Constant "xmlns">_1             8
     ?<Constant "id">                  3
     ?<Constant "x">                   2
     ?<Constant "x">_1              1692
     ?<Constant "online">              8
     ?<Constant "away">                8
     ?<Constant "xa">                  3
     ?<Constant "dnd">                 4
     ?<Constant "invisible">          12
     ?<Constant "unavailable">        12
     ?<Constant "subscribed">         12
     ?<Constant "unsubscribe">        12
     ?<Constant "unsubscribed">       16
     ?<Constant "outcast">             8
     ?<Constant "member">              8
     ?<Constant "admin">               8
     ?<Constant "owner">               8
     ?<Constant "visitor">             8
     ?<Constant "participant">        12
     ?<Constant "moderator">          12
     ?<Constant "jabber:iq:version">_1
                                      20
     ?<Constant "</mood></item></publi...">
                                      56
     ?<Constant "<iq type=\'set\' from=\'...">_1
                                     224
     ?<Constant "xmlns">_3             8
     ?<Constant "query">_1             8
     ?<Constant "iq">                  3
     ?<Constant "id">_1                3
     ?<Constant "to">                  3
     ?<Constant "type">_1              8
     ?<Constant "message">             8
     ?<Constant "id">_2                3
     ?<Constant "to">_1                3
     ?<Constant "type">_2              8
     ?<Constant "presence">           12
     ?<Constant "id">_3                3
     ?<Constant "to">_2                3
     ?<Constant "type">_3              8
     ?<Constant "<?xml version=\'1.0\' e...">
                                     164
     ?<Constant "ru">                  3
     ?<Constant "</stream:stream>">   36
     ?<Constant "username">           56
     ?<Constant "password">           12
     ?<Constant "resource">           12
     ?<Constant "set">                 4
     ?<Constant "SieJC_discoinfo">    16
     ?<Constant "get">                 4
     ?<Constant "http://jabber.org/pro...">_4
                                      40
     ?<Constant "get">_1               4
     ?<Constant "get">_2               4
     ?<Constant "jabber:iq:time">_1   16
     ?<Constant "vCard">_1             8
     ?<Constant "xmlns">_4             8
     ?<Constant "get">_3               4
     ?<Constant "get">_4               4
     ?<Constant "jabber:iq:last">_1   16
     ?<Constant "<urn:xmpp:receipts">
                                      20
     ?<Constant "<http://jabber.org/pr...">
                                      40
     ?<Constant "<urn:xmpp:attention:0">
                                      24
     ?<Constant "status">_1            8
     ?<Constant "show">_1              8
     ?<Constant "c">                  72
     ?<Constant "xmlns">_5             8
     ?<Constant "node">                8
     ?<Constant "ver">                 4
     ?<Constant "hash">                8
     ?<Constant "priority">_1         12
     ?<Constant "get">_5               4
     ?<Constant "body">_1              8
     ?<Constant "request">_1           8
     ?<Constant "xmlns">_6             8
     ?<Constant "active">_1            8
     ?<Constant "attention">_1        12
     ?<Constant "composing">_1        12
     ?<Constant "xmlns">_7             8
     ?<Constant "active">_2            8
     ?<Constant "xmlns">_8             8
     ?<Constant "name">_1              8
     ?<Constant "version">_1           8
     ?<Constant "os">                  3
     ?<Constant "%">                   2
     ?<Constant "+">                   2
     ?<Constant "utc">                 4
     ?<Constant "tz">                  3
     ?<Constant "display">_1           8
     ?<Constant "xmlns">_9             8
     ?<Constant "query">_2             8
     ?<Constant "seconds">_1           8
     ?<Constant "feature">             8
     ?<Constant "var">                 4
     ?<Constant "identity">           12
     ?<Constant "category">           12
     ?<Constant "type">_4              8
     ?<Constant "phone">               8
     ?<Constant "client">              8
     ?<Constant {&"http://jabber.org/pro...", &"jab
                                      36
     ?<Constant "to">_3                3
     ?<Constant "/">                   2
     ?<Constant "history">             8
     ?<Constant "show">_2              8
     ?<Constant "status">_2            8
     ?<Constant "password">_1         12
     ?<Constant "x">_2                 2
     ?<Constant "xmlns">_10            8
     ?<Constant "maxstanzas">         12
     ?<Constant "/">_1                 2
     ?<Constant "status">_3            8
     ?<Constant "subject">_1           8
     ?<Constant "\302\373\365\356\344 \350\347 MUC
                                      24
     ?<Constant "jid">                 4
     ?<Constant "subscribe">_1        12
     ?<Constant "ask">                 4
     ?<Constant "ask">_1               4
     ?<Constant "jid">_1               4
     ?<Constant "@">                   2
     ?<Constant "error">_1             8
     ?<Constant "type">_5              8
     ?<Constant "cancel">              8
     ?<Constant "feature-not-implemented">
                                      24
     ?<Constant "xmlns">_11            8
     ?<Constant "urn:ietf:params:xml:n...">
                                      36
     ?<Constant "error">_2             8
     ?<Constant "type">_6              8
     ?<Constant "cancel">_1            8
     ?<Constant "service-unavailable">
                                      20
     ?<Constant "xmlns">_12            8
     ?<Constant "urn:ietf:params:xml:n...">_1
                                      36
     ?<Constant "get">_6               4
     ?<Constant "result">_1            8
     ?<Constant "error">_3             8
     ?<Constant "set">_1               4
     ?<Constant "jabber:iq:version">_2
                                      20
     ?<Constant "http://jabber.org/pro...">_6
                                      40
     ?<Constant "id">_4                3
     ?<Constant "SieJC_bind_req">     16
     ?<Constant "SieJC_sess_req">     16
     ?<Constant "SieJC_discoinfo">_1
                                      16
     ?<Constant "(no data)">          12
     ?<Constant "os">_1                3
     ?<Constant "(no data)">_1        12
     ?<Constant "utc">_1               4
     ?<Constant "tz">_1                3
     ?<Constant "actor">               8
     ?<Constant "jid">_2               4
     ?<Constant "reason">              8
     ?<Constant "xmlns">_13            8
     ?<Constant "chat">_1              8
     ?<Constant "groupchat">_1        12
     ?<Constant "error">_4             8
     ?<Constant "SieJC_adm">          12
     ?<Constant "set">_2              44
     ?<Constant "affiliation">_1      12
     ?<Constant "role">_1              8
     ?<Constant "item">_1              8
     ?<Constant "nick">_1              8
     ?<Constant "reason">_1            8
     ?<Constant "received">_1         12
      Others                         640

 
 18 092 bytes in segment CODE
  3 966 bytes in segment DATA_C
    724 bytes in segment DATA_I
    724 bytes in segment DATA_ID
     20 bytes in segment DATA_Z
     24 bytes in segment INITTAB
 
 17 476 bytes of CODE  memory (+ 640 bytes shared)
  4 690 bytes of CONST memory
    744 bytes of DATA  memory

Errors: none
Warnings: none
