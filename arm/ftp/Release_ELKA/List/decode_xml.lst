##############################################################################
#                                                                            #
# IAR ARM ANSI C/C++ Compiler V4.42A/W32 EVALUATION    04/Apr/2011  00:45:16 #
# Copyright 1999-2005 IAR Systems. All rights reserved.                      #
#                                                                            #
#    Cpu mode        =  interwork                                            #
#    Endian          =  little                                               #
#    Stack alignment =  4                                                    #
#    Source file     =  C:\arm\nrss\decode_xml.c                             #
#    Command line    =  C:\arm\nrss\decode_xml.c -D NEWSGOLD -D ELKA -lCN    #
#                       C:\arm\nrss\Release_ELKA\List\ -la                   #
#                       C:\arm\nrss\Release_ELKA\List\ -o                    #
#                       C:\arm\nrss\Release_ELKA\Obj\ -s9 --no_unroll        #
#                       --cpu_mode arm --endian little --cpu ARM926EJ-S      #
#                       --stack_align 4 --interwork -e --fpu None            #
#                       --dlib_config "C:\arm2\Embedded Workbench 4.0        #
#                       Evaluation\ARM\LIB\dl5tpainl8n.h" -I                 #
#                       "C:\arm2\Embedded Workbench 4.0                      #
#                       Evaluation\ARM\INC\" --inline_threshold=2            #
#    List file       =  C:\arm\nrss\Release_ELKA\List\decode_xml.lst         #
#    Object file     =  C:\arm\nrss\Release_ELKA\Obj\decode_xml.r79          #
#                                                                            #
#                                                                            #
##############################################################################

C:\arm\nrss\decode_xml.c
      1          #include "..\inc\swilib.h"
      2          #include "decode_xml.h"
      3          
      4          #pragma inline
      5          int IsSpace (int c){
      6          	return	c == ' ' || c == '\n' || c == '\r' || c == '\t';
      7          }
      8          
      9          #pragma inline
     10          int IsLit (int c){
     11            return (c >= 'a' && c <= 'z') || (c >= 'A' && c <= 'Z');
     12          }
     13          
     14          #pragma inline
     15          int IsNum (int c){
     16          	return (c >= '0' && c <= '9');
     17          }
     18          

   \                                 In segment CODE, align 4, keep-with-next
     19          int IsName (int c){
     20            return (IsLit(c) || IsNum(c) || c == '_' || c == '-' || c == ':');
   \                     IsName:
   \   00000000   610050E3           CMP      R0,#+97
   \   00000004   020000BA           BLT      ??IsName_0
   \   00000008   7B0050E3           CMP      R0,#+123
   \   0000000C   0C0000BA           BLT      ??IsName_1
   \   00000010   030000EA           B        ??IsName_2
   \                     ??IsName_0:
   \   00000014   410050E3           CMP      R0,#+65
   \   00000018   010000BA           BLT      ??IsName_2
   \   0000001C   5B0050E3           CMP      R0,#+91
   \   00000020   070000BA           BLT      ??IsName_1
   \                     ??IsName_2:
   \   00000024   300050E3           CMP      R0,#+48
   \   00000028   010000BA           BLT      ??IsName_3
   \   0000002C   3A0050E3           CMP      R0,#+58
   \   00000030   030000BA           BLT      ??IsName_1
   \                     ??IsName_3:
   \   00000034   5F0050E3           CMP      R0,#+95
   \   00000038   2D005013           CMPNE    R0,#+45
   \   0000003C   3A005013           CMPNE    R0,#+58
   \   00000040   0100001A           BNE      ??IsName_4
   \                     ??IsName_1:
   \   00000044   0100A0E3           MOV      R0,#+1
   \   00000048   1EFF2FE1           BX       LR
   \                     ??IsName_4:
   \   0000004C   0000A0E3           MOV      R0,#+0
   \   00000050   1EFF2FE1           BX       LR               ;; return
     21          }
     22          

   \                                 In segment CODE, align 4, keep-with-next
     23          void FreeAttrQueue(XMLAttr *ta)
     24          {
   \                     FreeAttrQueue:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   \   00000004   0040B0E1           MOVS     R4,R0
   \   00000008   3080BD08           POPEQ    {R4,R5,PC}
     25            while (ta)
     26            {
     27              XMLAttr *p=ta->next;
   \                     ??FreeAttrQueue_0:
   \   0000000C   005094E5           LDR      R5,[R4, #+0]
     28              mfree(ta->name);
   \   00000010   040094E5           LDR      R0,[R4, #+4]
   \   00000014   150000EF           SWI      +21
     29              mfree(ta->param);
   \   00000018   080094E5           LDR      R0,[R4, #+8]
   \   0000001C   150000EF           SWI      +21
     30              mfree(ta);
   \   00000020   0400A0E1           MOV      R0,R4
   \   00000024   150000EF           SWI      +21
     31              ta=p;
   \   00000028   0540B0E1           MOVS     R4,R5
     32            }
   \   0000002C   F6FFFF1A           BNE      ??FreeAttrQueue_0
     33          }
   \   00000030   3080BDE8           POP      {R4,R5,PC}       ;; return
     34          

   \                                 In segment CODE, align 4, keep-with-next
     35          void DestroyTree(XMLNode *tmpp)
     36          {
   \                     DestroyTree:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   \   00000004   0040B0E1           MOVS     R4,R0
   \   00000008   3080BD08           POPEQ    {R4,R5,PC}
     37            XMLNode * tmpp2;
     38            while(tmpp)
     39            {
     40              FreeAttrQueue(tmpp->attr);
   \                     ??DestroyTree_0:
   \   0000000C   0C0094E5           LDR      R0,[R4, #+12]
   \   00000010   ........           BL       FreeAttrQueue
     41              if (tmpp->subnode)
   \   00000014   040094E5           LDR      R0,[R4, #+4]
   \   00000018   000050E3           CMP      R0,#+0
   \   0000001C   0000000A           BEQ      ??DestroyTree_1
     42              {
     43                DestroyTree(tmpp->subnode);
   \   00000020   F6FFFFEB           BL       DestroyTree
     44              }
     45              tmpp2=tmpp->next;
   \                     ??DestroyTree_1:
   \   00000024   005094E5           LDR      R5,[R4, #+0]
     46              mfree(tmpp->name);
   \   00000028   080094E5           LDR      R0,[R4, #+8]
   \   0000002C   150000EF           SWI      +21
     47              mfree(tmpp->value);
   \   00000030   100094E5           LDR      R0,[R4, #+16]
   \   00000034   150000EF           SWI      +21
     48              mfree(tmpp);
   \   00000038   0400A0E1           MOV      R0,R4
   \   0000003C   150000EF           SWI      +21
     49              tmpp=tmpp2;
   \   00000040   0540B0E1           MOVS     R4,R5
     50            }
   \   00000044   F0FFFF1A           BNE      ??DestroyTree_0
     51          }
   \   00000048   3080BDE8           POP      {R4,R5,PC}       ;; return
     52          

   \                                 In segment CODE, align 4, keep-with-next
     53          void AddTextToNode(XMLNode *node, const char *s, int len)
     54          {
   \                     AddTextToNode:
   \   00000000   F0432DE9           PUSH     {R4-R9,LR}
   \   00000004   0060A0E1           MOV      R6,R0
     55            char *d;
     56            int l;
     57            if (node->value)
   \   00000008   100096E5           LDR      R0,[R6, #+16]
   \   0000000C   0170A0E1           MOV      R7,R1
   \   00000010   0280A0E1           MOV      R8,R2
   \   00000014   0040A0E3           MOV      R4,#+0
   \   00000018   000050E3           CMP      R0,#+0
   \   0000001C   1100000A           BEQ      ??AddTextToNode_0
     58            {
     59              d=node->value=realloc(node->value, (l=strlen(node->value))+len+2);
   \   00000020   1B0000EF           SWI      +27
   \   00000024   0090A0E1           MOV      R9,R0
   \   00000028   100096E5           LDR      R0,[R6, #+16]
   \   0000002C   095088E0           ADD      R5,R8,R9
   \   00000030   021085E2           ADD      R1,R5,#+2
   \   00000034   BA0000EF           SWI      +186
   \   00000038   100086E5           STR      R0,[R6, #+16]
   \   0000003C   0060A0E1           MOV      R6,R0
     60              d[l]=' ';
   \   00000040   2000A0E3           MOV      R0,#+32
   \   00000044   0600C9E7           STRB     R0,[R9, +R6]
     61              strncpy(d+l+1, s, len);
   \   00000048   0820A0E1           MOV      R2,R8
   \   0000004C   0710A0E1           MOV      R1,R7
   \   00000050   060089E0           ADD      R0,R9,R6
   \   00000054   010080E2           ADD      R0,R0,#+1
   \   00000058   160100EF           SWI      +278
     62              d[l+len+1]=0;    
   \   0000005C   060085E0           ADD      R0,R5,R6
   \   00000060   0140C0E5           STRB     R4,[R0, #+1]
   \   00000064   F083BDE8           POP      {R4-R9,PC}
     63            }
     64            else
     65            {
     66              d=node->value=malloc(len+1);
   \                     ??AddTextToNode_0:
   \   00000068   010088E2           ADD      R0,R8,#+1
   \   0000006C   140000EF           SWI      +20
   \   00000070   100086E5           STR      R0,[R6, #+16]
   \   00000074   0060A0E1           MOV      R6,R0
     67              strncpy(d, s, len);
   \   00000078   0820A0E1           MOV      R2,R8
   \   0000007C   0710A0E1           MOV      R1,R7
   \   00000080   160100EF           SWI      +278
     68              d[len]=0;    
   \   00000084   0640C8E7           STRB     R4,[R8, +R6]
     69            }
     70          }
   \   00000088   F083BDE8           POP      {R4-R9,PC}       ;; return
     71          
     72          

   \                                 In segment CODE, align 4, keep-with-next
     73          XMLNode *EndTag(char *name, int name_len, XMLAttr *xattr)
     74          {
   \                     EndTag:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   \   00000008   0150A0E1           MOV      R5,R1
   \   0000000C   0260A0E1           MOV      R6,R2
     75            XMLNode *tmp=malloc(sizeof(XMLNode));
   \   00000010   1400A0E3           MOV      R0,#+20
   \   00000014   140000EF           SWI      +20
   \   00000018   0070A0E1           MOV      R7,R0
     76            zeromem(tmp,sizeof(XMLNode));
   \   0000001C   1410A0E3           MOV      R1,#+20
   \   00000020   1D0100EF           SWI      +285
     77            tmp->name=malloc(name_len+1);
   \   00000024   010085E2           ADD      R0,R5,#+1
   \   00000028   140000EF           SWI      +20
   \   0000002C   080087E5           STR      R0,[R7, #+8]
     78            strncpy(tmp->name, name, name_len);
   \   00000030   0520A0E1           MOV      R2,R5
   \   00000034   0410A0E1           MOV      R1,R4
   \   00000038   160100EF           SWI      +278
     79            tmp->name[name_len]=0;
   \   0000003C   080097E5           LDR      R0,[R7, #+8]
   \   00000040   0010A0E3           MOV      R1,#+0
   \   00000044   0010C5E7           STRB     R1,[R5, +R0]
     80            tmp->attr=xattr;
   \   00000048   0C6087E5           STR      R6,[R7, #+12]
     81            return tmp;
   \   0000004C   0700A0E1           MOV      R0,R7
   \   00000050   F080BDE8           POP      {R4-R7,PC}       ;; return
     82          }
     83          
     84          

   \                                 In segment CODE, align 4, keep-with-next
     85          XMLAttr *EndAttr(char *name, int name_len, char *value, int value_len)
     86          {
   \                     EndAttr:
   \   00000000   F0412DE9           PUSH     {R4-R8,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   \   00000008   0150A0E1           MOV      R5,R1
   \   0000000C   0260A0E1           MOV      R6,R2
   \   00000010   0370A0E1           MOV      R7,R3
     87            XMLAttr *xattr=malloc(sizeof(XMLAttr));
   \   00000014   0C00A0E3           MOV      R0,#+12
   \   00000018   140000EF           SWI      +20
   \   0000001C   0080A0E1           MOV      R8,R0
     88            zeromem(xattr,sizeof(XMLAttr));
   \   00000020   0C10A0E3           MOV      R1,#+12
   \   00000024   1D0100EF           SWI      +285
     89            xattr->name=malloc(name_len+1);
   \   00000028   010085E2           ADD      R0,R5,#+1
   \   0000002C   140000EF           SWI      +20
   \   00000030   040088E5           STR      R0,[R8, #+4]
     90            strncpy(xattr->name,name,name_len);
   \   00000034   0520A0E1           MOV      R2,R5
   \   00000038   0410A0E1           MOV      R1,R4
   \   0000003C   160100EF           SWI      +278
     91            xattr->name[name_len]=0;
   \   00000040   040098E5           LDR      R0,[R8, #+4]
   \   00000044   0040A0E3           MOV      R4,#+0
   \   00000048   0040C5E7           STRB     R4,[R5, +R0]
     92            if(value_len>0)
   \   0000004C   010057E3           CMP      R7,#+1
   \   00000050   070000BA           BLT      ??EndAttr_0
     93            {
     94              xattr->param=malloc(value_len+1); 
   \   00000054   010087E2           ADD      R0,R7,#+1
   \   00000058   140000EF           SWI      +20
   \   0000005C   080088E5           STR      R0,[R8, #+8]
     95              strncpy(xattr->param,value, value_len);
   \   00000060   0720A0E1           MOV      R2,R7
   \   00000064   0610A0E1           MOV      R1,R6
   \   00000068   160100EF           SWI      +278
     96              xattr->param[value_len]=0;
   \   0000006C   080098E5           LDR      R0,[R8, #+8]
   \   00000070   0040C7E7           STRB     R4,[R7, +R0]
     97            }
     98            return xattr;
   \                     ??EndAttr_0:
   \   00000074   0800A0E1           MOV      R0,R8
   \   00000078   F081BDE8           POP      {R4-R8,PC}       ;; return
     99          }
    100          

   \                                 In segment CODE, align 4, keep-with-next
    101          XMLNode *XMLDecode(char *buf, int size)
    102          {
   \                     XMLDecode:
   \   00000000   F24F2DE9           PUSH     {R1,R4-R11,LR}
   \   00000004   8BDF4DE2           SUB      SP,SP,#+556
   \   00000008   0040A0E1           MOV      R4,R0
   \   0000000C   00A0A0E3           MOV      R10,#+0
    103            char *TagName;
    104            int TagLen;
    105            char *AttrName;
    106            int AttrNameLen;
    107            char *AttrValue;
    108            int AttrValueLen;
    109            char *Text;
    110            int TextLen;
    111          
    112            XMLNode *TreeBranchs[128];
    113          
    114            XMLAttr *root_attr=0;
    115            XMLAttr *bot_attr=0;
   \   00000010   0010A0E3           MOV      R1,#+0
   \   00000014   18108DE5           STR      R1,[SP, #+24]
    116            XMLNode *root_node=0;
   \   00000018   1C108DE5           STR      R1,[SP, #+28]
    117            XMLNode *bot_node=0;
   \   0000001C   00108DE5           STR      R1,[SP, #+0]
    118            
    119            int is_closed=0;
   \   00000020   20108DE5           STR      R1,[SP, #+32]
    120            int stack_pos=0;
   \   00000024   0150A0E1           MOV      R5,R1
    121            
    122            int MSState = MS_BEGIN;
   \   00000028   0160A0E3           MOV      R6,#+1
    123            int TagState = TS_INDEFINITE;
   \   0000002C   0670A0E1           MOV      R7,R6
    124          
    125            int i = 0;
   \   00000030   0190A0E1           MOV      R9,R1
   \   00000034   0B0000EA           B        ??XMLDecode_1
    126            while (i<size)
    127            {
    128              int c = buf[i];   
    129              switch (MSState)
    130              {
    131              case MS_BEGIN:
    132                if (c == '<') {
    133                  MSState = MS_BEGINTAG;
    134                } else if (!IsSpace (c)) {
    135                  goto L_ERR;
    136                }
    137                break;
    138                
    139              case MS_BEGINTAG:
    140                if (IsLit (c)) {
    141                  MSState = MS_TAGNAME;
    142                  TagState = TS_NORMAL;
    143                  TagName = buf+i;
    144                  TagLen=1;
    145                } else if (IsSpace(c)) {
    146                  MSState = MS_MIDDLETAG;
    147                  TagState = TS_NORMAL;
    148                } else if (c == '?') {
    149                  MSState = MS_MIDDLETAG;
    150                  TagState = TS_DECLARATION;
    151                } else if (c == '/') {
    152                  MSState = MS_MIDDLETAG;
    153                  TagState = TS_CLOSE;
    154                } else if (c == '!') {
    155                  MSState = MS_CHECK_DECL;
    156                } else {
    157                  goto L_ERR;
    158                }
    159                break;
    160                
    161              case MS_MIDDLETAG:
    162                if (IsLit (c)) {
    163                  MSState = MS_TAGNAME;
    164                  TagName = buf+i;
    165                  TagLen=1;
    166                } else if (!IsSpace (c)) {
    167                  goto L_ERR;
    168                }
    169                break;
    170                
    171              case MS_TAGNAME:
    172                if (IsName (c)) {
    173                  TagLen++;
    174                } else if (IsSpace(c)) {
    175                  MSState = MS_ENDTAGNAME;
    176                } else if (c == '/') {
    177                  TextLen=0;
    178                  MSState = MS_ENDTAG;
    179                  TagState = TS_EMPTY;
    180                } else if (c == '>') {
    181                  MSState = MS_TEXT;
    182                  Text=buf+i+1;
    183                  TextLen=0;
    184                  goto L_ADD_TAG;
    185                } else {
    186                  goto L_ERR;
    187                }
    188                break;
    189                
    190              case MS_ENDTAGNAME:
    191                if (IsLit (c)){
    192                  MSState = MS_ATTRIBNAME;
    193                  AttrName=buf+i;
    194                  AttrNameLen=1;
    195                } else if (c == '/'){
    196                  MSState = MS_ENDTAG;
    197                  TagState = TS_EMPTY;
    198                } else if (c == '>'){
    199                  MSState = MS_TEXT;
    200                  Text=buf+i+1;
    201                  TextLen=0;
    202                  goto L_ADD_TAG;
    203                } else if (!IsSpace(c) && (c != '?' && TagState != TS_DECLARATION)) {
    204                  goto L_ERR;
    205                }
    206                break;
    207                
    208              case MS_ATTRIBNAME:
    209                if (IsName(c)) {
    210                  AttrNameLen++;
    211                } else if (c == '=') {
    212                  MSState = MS_ENDEQUALLY;
    213                } else if (IsSpace(c)) {
    214                  MSState = MS_ENDATTRIBNAME;
    215                } else {
    216                  goto L_ERR;
    217                }
    218                break;
    219                
    220              case MS_ENDATTRIBNAME:
    221                if (c == '=') {
    222                  MSState = MS_ENDEQUALLY;
    223                } else if (!IsSpace(c)) {
    224                  goto L_ERR;
    225                }
    226                break;
    227                
    228              case MS_ENDEQUALLY:
    229                if ((c == '\"')||(c == '\'')) {
    230                  MSState = MS_ATTRIBVALUE;
    231                  AttrValue=buf+i+1;
    232                  AttrValueLen=0;
    233                } else if (!IsSpace(c)) {
    234                  goto L_ERR;
    235                }
    236                break;
    237                
    238              case MS_ATTRIBVALUE:
    239                if ((c == '\"')||(c == '\'')) {
    240                  XMLAttr *xatr=EndAttr(AttrName, AttrNameLen, AttrValue, AttrValueLen);
    241                  MSState = MS_ENDTAGNAME;
    242                  if (!root_attr)
    243                  {
    244                    bot_attr=root_attr=xatr;
    245                  }
    246                  else
    247                  {
    248                    bot_attr->next=xatr;
    249                    bot_attr=xatr;
    250                  }
    251                } else {
    252                  AttrValueLen++;
    253                }
    254                break;
    255                
    256              case MS_ENDTAG:
    257                if (c == '>') {
    258                  MSState = MS_TEXT;
    259                  Text=buf+i+1;
    260                  TextLen=0;
    261                L_ADD_TAG:
    262                  {
    263                    if((TagState == TS_NORMAL)||(TagState == TS_EMPTY))
    264                    {
    265                       XMLNode *tmp=EndTag(TagName,TagLen,root_attr);
    266                       if (!root_node){
    267                         root_node=tmp;
    268                       }else{
    269                         if(!is_closed)
    270                           bot_node->next=tmp;
    271                         else bot_node->subnode=tmp;
    272                       }
    273                       TreeBranchs[stack_pos++]=tmp;
    274                       bot_node=tmp;
    275                       root_attr=0;
    276                       is_closed=1;
    277                    }
    278                    if((TagState == TS_EMPTY)||(TagState == TS_CLOSE))
    279                    {
    280                      if(stack_pos>0){
    281                        bot_node=TreeBranchs[--stack_pos];
    282                      }
    283                      is_closed=0;
    284                    }
    285                    if (root_attr)  // удаляем мусор
    286                    {
    287                      FreeAttrQueue(root_attr);
    288                      root_attr=NULL;            
    289                    }
    290                  }   
    291                } else {
    292                  goto L_ERR;
    293                }
    294                break;
    295                
    296              case MS_TEXT:
    297                if (c == '<')
    298                {
    299                  if(TextLen>0)
    300                  {
    301                    if (bot_node)
    302                    {
    303                      AddTextToNode(bot_node, Text, TextLen);
    304                    }
    305                  }
    306                  TextLen=0;
    307                  MSState = MS_BEGINTAG;
    308                  TagState = TS_INDEFINITE;
    309                }
    310                else
    311                {
    312                  if (TagState == TS_NORMAL) TextLen++;
    313                }
    314                break;
    315                
    316              case MS_CHECK_DECL:
    317                if (!strncmp(buf+i, "[CDATA[", 7)) {
    318                  i+=6;
    319                  Text=buf+i+1;
    320                  TextLen=0;
    321                  MSState = MS_CDATA_SECTION;
    322                  TagState = TS_NORMAL;
    323                } else if (buf[i]=='-' && buf[i+1]=='-') {
    324                  i++;
    325                  Text=buf+i+1;
    326                  MSState = MS_COMMENT;
    327                } else {
    328                  goto L_ERR;
    329                }
    330                break;
    331                
    332              case MS_CDATA_SECTION:
    333                if (buf[i]==']' && buf[i+1] ==']' && buf[i+2] =='>') {
    334                  if(TextLen>0)
    335                  {
    336                    if (bot_node)
    337                    {
    338                      AddTextToNode(bot_node, Text, TextLen);
    339                    }
    340                  }
    341                  TextLen=0;
    342                  MSState = MS_BEGIN;
    343                  TagState = TS_INDEFINITE;
    344                  i+=2;
    345                } else {
    346                  TextLen++;
    347                }
    348                break;
    349                
    350              case MS_COMMENT:
    351                if (buf[i]=='-' && buf[i+1] =='-' && buf[i+2] =='>') {
   \                     ??XMLDecode_2:
   \   00000038   2D005BE3           CMP      R11,#+45
   \   0000003C   0700001A           BNE      ??XMLDecode_3
   \   00000040   041089E0           ADD      R1,R9,R4
   \   00000044   0110D1E5           LDRB     R1,[R1, #+1]
   \   00000048   2D0051E3           CMP      R1,#+45
   \   0000004C   0300001A           BNE      ??XMLDecode_3
   \   00000050   041089E0           ADD      R1,R9,R4
   \   00000054   0210D1E5           LDRB     R1,[R1, #+2]
   \   00000058   3E0051E3           CMP      R1,#+62
   \   0000005C   2201000A           BEQ      ??XMLDecode_4
    352                  TextLen=0;
    353                  MSState = MS_BEGIN;
    354                  TagState = TS_INDEFINITE;
    355                  i+=2;
    356                } else {
    357                  TextLen++;
   \                     ??XMLDecode_3:
   \   00000060   0080A0E1           MOV      R8,R0
    358                }
    359                break;
    360              }
    361              i++;
   \                     ??XMLDecode_5:
   \   00000064   019089E2           ADD      R9,R9,#+1
   \                     ??XMLDecode_1:
   \   00000068   2C029DE5           LDR      R0,[SP, #+556]
   \   0000006C   000059E1           CMP      R9,R0
   \   00000070   170000AA           BGE      ??XMLDecode_6
   \   00000074   04B0D9E7           LDRB     R11,[R9, +R4]
   \   00000078   010088E2           ADD      R0,R8,#+1
   \   0000007C   011046E2           SUB      R1,R6,#+1
   \   00000080   0D0051E3           CMP      R1,#+13
   \   00000084   F6FFFF8A           BHI      ??XMLDecode_5
   \   00000088   022F8FE2           ADR      R2,??XMLDecode_0
   \   0000008C   8110A0E1           MOV      R1,R1, LSL #+1
   \   00000090   F12092E1           LDRSH    R2,[R2, R1]
   \   00000094   02F18FE0           ADD      PC,PC,R2, LSL #+2
   \                     ??XMLDecode_0:
   \   00000098   060013003600       DC16     +6,+19,+54,+71
   \              4700        
   \   000000A0   6D0088009900       DC16     +109,+136,+153,+156
   \              9C00        
   \   000000A8   A6005A00D700       DC16     +166,+90,+215,+232
   \              E800        
   \   000000B0   0201E7FF           DC16     +258,+65511
   \                     ??XMLDecode_7:
   \   000000B4   3C005BE3           CMP      R11,#+60
   \   000000B8   0260A003           MOVEQ    R6,#+2
   \   000000BC   E8FFFF0A           BEQ      ??XMLDecode_5
   \   000000C0   20005BE3           CMP      R11,#+32
   \   000000C4   0A005B13           CMPNE    R11,#+10
   \   000000C8   0D005B13           CMPNE    R11,#+13
   \   000000CC   09005B13           CMPNE    R11,#+9
   \   000000D0   E3FFFF0A           BEQ      ??XMLDecode_5
    362            }
    363          L_ERR:
    364            FreeAttrQueue(root_attr);
   \                     ??XMLDecode_6:
   \   000000D4   0A00A0E1           MOV      R0,R10
   \   000000D8   ........           BL       FreeAttrQueue
    365            return root_node;//
   \   000000DC   1C009DE5           LDR      R0,[SP, #+28]
   \   000000E0   8CDF8DE2           ADD      SP,SP,#+560
   \   000000E4   F08FBDE8           POP      {R4-R11,PC}      ;; return
   \                     ??XMLDecode_8:
   \   000000E8   61005BE3           CMP      R11,#+97
   \   000000EC   090000BA           BLT      ??XMLDecode_9
   \   000000F0   7B005BE3           CMP      R11,#+123
   \   000000F4   0B0000BA           BLT      ??XMLDecode_10
   \                     ??XMLDecode_11:
   \   000000F8   20005BE3           CMP      R11,#+32
   \   000000FC   0A005B13           CMPNE    R11,#+10
   \   00000100   0D005B13           CMPNE    R11,#+13
   \   00000104   09005B13           CMPNE    R11,#+9
   \   00000108   0D00001A           BNE      ??XMLDecode_12
   \   0000010C   0360A0E3           MOV      R6,#+3
   \                     ??XMLDecode_13:
   \   00000110   0270A0E3           MOV      R7,#+2
   \   00000114   D2FFFFEA           B        ??XMLDecode_5
   \                     ??XMLDecode_9:
   \   00000118   41005BE3           CMP      R11,#+65
   \   0000011C   F5FFFFBA           BLT      ??XMLDecode_11
   \   00000120   5B005BE3           CMP      R11,#+91
   \   00000124   F3FFFFAA           BGE      ??XMLDecode_11
   \                     ??XMLDecode_10:
   \   00000128   0460A0E3           MOV      R6,#+4
   \   0000012C   0270A0E3           MOV      R7,#+2
   \                     ??XMLDecode_14:
   \   00000130   041089E0           ADD      R1,R9,R4
   \   00000134   14108DE5           STR      R1,[SP, #+20]
   \   00000138   0110A0E3           MOV      R1,#+1
   \                     ??XMLDecode_15:
   \   0000013C   04108DE5           STR      R1,[SP, #+4]
   \   00000140   C7FFFFEA           B        ??XMLDecode_5
   \                     ??XMLDecode_12:
   \   00000144   3F005BE3           CMP      R11,#+63
   \   00000148   0360A003           MOVEQ    R6,#+3
   \   0000014C   0570A003           MOVEQ    R7,#+5
   \   00000150   C3FFFF0A           BEQ      ??XMLDecode_5
   \   00000154   2F005BE3           CMP      R11,#+47
   \   00000158   0360A003           MOVEQ    R6,#+3
   \   0000015C   0370A003           MOVEQ    R7,#+3
   \   00000160   BFFFFF0A           BEQ      ??XMLDecode_5
   \   00000164   21005BE3           CMP      R11,#+33
   \   00000168   D9FFFF1A           BNE      ??XMLDecode_6
   \   0000016C   0C60A0E3           MOV      R6,#+12
   \   00000170   BBFFFFEA           B        ??XMLDecode_5
   \                     ??XMLDecode_16:
   \   00000174   61005BE3           CMP      R11,#+97
   \   00000178   080000BA           BLT      ??XMLDecode_17
   \   0000017C   7B005BE3           CMP      R11,#+123
   \   00000180   0A0000BA           BLT      ??XMLDecode_18
   \                     ??XMLDecode_19:
   \   00000184   20005BE3           CMP      R11,#+32
   \   00000188   0A005B13           CMPNE    R11,#+10
   \   0000018C   0D005B13           CMPNE    R11,#+13
   \   00000190   B3FFFF0A           BEQ      ??XMLDecode_5
   \   00000194   09005BE3           CMP      R11,#+9
   \                     ??XMLDecode_20:
   \   00000198   CDFFFF1A           BNE      ??XMLDecode_6
   \   0000019C   B0FFFFEA           B        ??XMLDecode_5
   \                     ??XMLDecode_17:
   \   000001A0   41005BE3           CMP      R11,#+65
   \   000001A4   F6FFFFBA           BLT      ??XMLDecode_19
   \   000001A8   5B005BE3           CMP      R11,#+91
   \   000001AC   F4FFFFAA           BGE      ??XMLDecode_19
   \                     ??XMLDecode_18:
   \   000001B0   0460A0E3           MOV      R6,#+4
   \   000001B4   DDFFFFEA           B        ??XMLDecode_14
   \                     ??XMLDecode_21:
   \   000001B8   0B00A0E1           MOV      R0,R11
   \   000001BC   ........           BL       IsName
   \   000001C0   000050E3           CMP      R0,#+0
   \   000001C4   0200000A           BEQ      ??XMLDecode_22
   \   000001C8   04109DE5           LDR      R1,[SP, #+4]
   \   000001CC   011081E2           ADD      R1,R1,#+1
   \   000001D0   D9FFFFEA           B        ??XMLDecode_15
   \                     ??XMLDecode_22:
   \   000001D4   20005BE3           CMP      R11,#+32
   \   000001D8   0A005B13           CMPNE    R11,#+10
   \   000001DC   0D005B13           CMPNE    R11,#+13
   \   000001E0   09005B13           CMPNE    R11,#+9
   \   000001E4   0560A003           MOVEQ    R6,#+5
   \   000001E8   9DFFFF0A           BEQ      ??XMLDecode_5
   \   000001EC   2F005BE3           CMP      R11,#+47
   \   000001F0   0300001A           BNE      ??XMLDecode_23
   \   000001F4   0080A0E3           MOV      R8,#+0
   \                     ??XMLDecode_24:
   \   000001F8   0A60A0E3           MOV      R6,#+10
   \   000001FC   0470A0E3           MOV      R7,#+4
   \   00000200   97FFFFEA           B        ??XMLDecode_5
   \                     ??XMLDecode_23:
   \   00000204   3E005BE3           CMP      R11,#+62
   \   00000208   B1FFFF1A           BNE      ??XMLDecode_6
   \                     ??XMLDecode_25:
   \   0000020C   0B60A0E3           MOV      R6,#+11
   \   00000210   041089E0           ADD      R1,R9,R4
   \   00000214   011081E2           ADD      R1,R1,#+1
   \   00000218   08108DE5           STR      R1,[SP, #+8]
   \   0000021C   0080A0E3           MOV      R8,#+0
   \   00000220   020057E3           CMP      R7,#+2
   \   00000224   04005713           CMPNE    R7,#+4
   \   00000228   6100001A           BNE      ??XMLDecode_26
   \   0000022C   04109DE5           LDR      R1,[SP, #+4]
   \   00000230   14009DE5           LDR      R0,[SP, #+20]
   \   00000234   0A20A0E1           MOV      R2,R10
   \   00000238   ........           BL       EndTag
   \   0000023C   1C109DE5           LDR      R1,[SP, #+28]
   \   00000240   000051E3           CMP      R1,#+0
   \   00000244   4E00001A           BNE      ??XMLDecode_27
   \   00000248   1C008DE5           STR      R0,[SP, #+28]
   \   0000024C   510000EA           B        ??XMLDecode_28
   \                     ??XMLDecode_29:
   \   00000250   61005BE3           CMP      R11,#+97
   \   00000254   040000BA           BLT      ??XMLDecode_30
   \   00000258   7B005BE3           CMP      R11,#+123
   \   0000025C   060000BA           BLT      ??XMLDecode_31
   \                     ??XMLDecode_32:
   \   00000260   2F005BE3           CMP      R11,#+47
   \   00000264   0A00001A           BNE      ??XMLDecode_33
   \   00000268   E2FFFFEA           B        ??XMLDecode_24
   \                     ??XMLDecode_30:
   \   0000026C   41005BE3           CMP      R11,#+65
   \   00000270   FAFFFFBA           BLT      ??XMLDecode_32
   \   00000274   5B005BE3           CMP      R11,#+91
   \   00000278   F8FFFFAA           BGE      ??XMLDecode_32
   \                     ??XMLDecode_31:
   \   0000027C   0660A0E3           MOV      R6,#+6
   \   00000280   041089E0           ADD      R1,R9,R4
   \   00000284   24108DE5           STR      R1,[SP, #+36]
   \   00000288   0110A0E3           MOV      R1,#+1
   \                     ??XMLDecode_34:
   \   0000028C   0C108DE5           STR      R1,[SP, #+12]
   \   00000290   73FFFFEA           B        ??XMLDecode_5
   \                     ??XMLDecode_33:
   \   00000294   3E005BE3           CMP      R11,#+62
   \   00000298   DBFFFF0A           BEQ      ??XMLDecode_25
   \   0000029C   20005BE3           CMP      R11,#+32
   \   000002A0   0A005B13           CMPNE    R11,#+10
   \   000002A4   0D005B13           CMPNE    R11,#+13
   \   000002A8   09005B13           CMPNE    R11,#+9
   \   000002AC   3F005B13           CMPNE    R11,#+63
   \   000002B0   6BFFFF0A           BEQ      ??XMLDecode_5
   \   000002B4   050057E3           CMP      R7,#+5
   \   000002B8   B6FFFFEA           B        ??XMLDecode_20
   \                     ??XMLDecode_35:
   \   000002BC   0B00A0E1           MOV      R0,R11
   \   000002C0   ........           BL       IsName
   \   000002C4   000050E3           CMP      R0,#+0
   \   000002C8   0C109D15           LDRNE    R1,[SP, #+12]
   \   000002CC   01108112           ADDNE    R1,R1,#+1
   \   000002D0   EDFFFF1A           BNE      ??XMLDecode_34
   \   000002D4   3D005BE3           CMP      R11,#+61
   \   000002D8   0100001A           BNE      ??XMLDecode_36
   \                     ??XMLDecode_37:
   \   000002DC   0860A0E3           MOV      R6,#+8
   \   000002E0   5FFFFFEA           B        ??XMLDecode_5
   \                     ??XMLDecode_36:
   \   000002E4   20005BE3           CMP      R11,#+32
   \   000002E8   0A005B13           CMPNE    R11,#+10
   \   000002EC   0D005B13           CMPNE    R11,#+13
   \   000002F0   09005B13           CMPNE    R11,#+9
   \   000002F4   76FFFF1A           BNE      ??XMLDecode_6
   \   000002F8   0760A0E3           MOV      R6,#+7
   \   000002FC   58FFFFEA           B        ??XMLDecode_5
   \                     ??XMLDecode_38:
   \   00000300   3D005BE3           CMP      R11,#+61
   \   00000304   F4FFFF0A           BEQ      ??XMLDecode_37
   \   00000308   9DFFFFEA           B        ??XMLDecode_19
   \                     ??XMLDecode_39:
   \   0000030C   22005BE3           CMP      R11,#+34
   \   00000310   27005B13           CMPNE    R11,#+39
   \   00000314   9AFFFF1A           BNE      ??XMLDecode_19
   \   00000318   0960A0E3           MOV      R6,#+9
   \   0000031C   041089E0           ADD      R1,R9,R4
   \   00000320   011081E2           ADD      R1,R1,#+1
   \   00000324   28108DE5           STR      R1,[SP, #+40]
   \   00000328   0010A0E3           MOV      R1,#+0
   \                     ??XMLDecode_40:
   \   0000032C   10108DE5           STR      R1,[SP, #+16]
   \   00000330   4BFFFFEA           B        ??XMLDecode_5
   \                     ??XMLDecode_41:
   \   00000334   22005BE3           CMP      R11,#+34
   \   00000338   27005B13           CMPNE    R11,#+39
   \   0000033C   0D00001A           BNE      ??XMLDecode_42
   \   00000340   24009DE5           LDR      R0,[SP, #+36]
   \   00000344   10309DE5           LDR      R3,[SP, #+16]
   \   00000348   28209DE5           LDR      R2,[SP, #+40]
   \   0000034C   0C109DE5           LDR      R1,[SP, #+12]
   \   00000350   0560A0E3           MOV      R6,#+5
   \   00000354   ........           BL       EndAttr
   \   00000358   00005AE3           CMP      R10,#+0
   \   0000035C   00A0A001           MOVEQ    R10,R0
   \   00000360   18A08D05           STREQ    R10,[SP, #+24]
   \   00000364   3EFFFF0A           BEQ      ??XMLDecode_5
   \   00000368   18109DE5           LDR      R1,[SP, #+24]
   \   0000036C   000081E5           STR      R0,[R1, #+0]
   \   00000370   18008DE5           STR      R0,[SP, #+24]
   \   00000374   3AFFFFEA           B        ??XMLDecode_5
   \                     ??XMLDecode_42:
   \   00000378   10109DE5           LDR      R1,[SP, #+16]
   \   0000037C   011081E2           ADD      R1,R1,#+1
   \   00000380   E9FFFFEA           B        ??XMLDecode_40
   \                     ??XMLDecode_27:
   \   00000384   20109DE5           LDR      R1,[SP, #+32]
   \   00000388   000051E3           CMP      R1,#+0
   \   0000038C   00109DE5           LDR      R1,[SP, #+0]
   \   00000390   00008105           STREQ    R0,[R1, #+0]
   \   00000394   04008115           STRNE    R0,[R1, #+4]
   \                     ??XMLDecode_28:
   \   00000398   2C108DE2           ADD      R1,SP,#+44
   \   0000039C   050181E7           STR      R0,[R1, +R5, LSL #+2]
   \   000003A0   015085E2           ADD      R5,R5,#+1
   \   000003A4   00008DE5           STR      R0,[SP, #+0]
   \   000003A8   00A0A0E3           MOV      R10,#+0
   \   000003AC   0110A0E3           MOV      R1,#+1
   \   000003B0   20108DE5           STR      R1,[SP, #+32]
   \                     ??XMLDecode_26:
   \   000003B4   040057E3           CMP      R7,#+4
   \   000003B8   03005713           CMPNE    R7,#+3
   \   000003BC   0700001A           BNE      ??XMLDecode_43
   \   000003C0   010055E3           CMP      R5,#+1
   \   000003C4   030000BA           BLT      ??XMLDecode_44
   \   000003C8   015045E2           SUB      R5,R5,#+1
   \   000003CC   2C108DE2           ADD      R1,SP,#+44
   \   000003D0   051191E7           LDR      R1,[R1, +R5, LSL #+2]
   \   000003D4   00108DE5           STR      R1,[SP, #+0]
   \                     ??XMLDecode_44:
   \   000003D8   0010A0E3           MOV      R1,#+0
   \   000003DC   20108DE5           STR      R1,[SP, #+32]
   \                     ??XMLDecode_43:
   \   000003E0   00005AE3           CMP      R10,#+0
   \   000003E4   1EFFFF0A           BEQ      ??XMLDecode_5
   \   000003E8   0A00A0E1           MOV      R0,R10
   \   000003EC   ........           BL       FreeAttrQueue
   \   000003F0   00A0A0E3           MOV      R10,#+0
   \   000003F4   1AFFFFEA           B        ??XMLDecode_5
   \                     ??XMLDecode_45:
   \   000003F8   3C005BE3           CMP      R11,#+60
   \   000003FC   0B00001A           BNE      ??XMLDecode_46
   \   00000400   010058E3           CMP      R8,#+1
   \   00000404   050000BA           BLT      ??XMLDecode_47
   \   00000408   00009DE5           LDR      R0,[SP, #+0]
   \   0000040C   000050E3           CMP      R0,#+0
   \   00000410   0200000A           BEQ      ??XMLDecode_47
   \   00000414   08109DE5           LDR      R1,[SP, #+8]
   \   00000418   0820A0E1           MOV      R2,R8
   \   0000041C   ........           BL       AddTextToNode
   \                     ??XMLDecode_47:
   \   00000420   0080A0E3           MOV      R8,#+0
   \   00000424   0260A0E3           MOV      R6,#+2
   \   00000428   0170A0E3           MOV      R7,#+1
   \   0000042C   0CFFFFEA           B        ??XMLDecode_5
   \                     ??XMLDecode_46:
   \   00000430   020057E3           CMP      R7,#+2
   \   00000434   0AFFFF1A           BNE      ??XMLDecode_5
   \   00000438   08FFFFEA           B        ??XMLDecode_3
   \                     ??XMLDecode_48:
   \   0000043C   BC109FE5           LDR      R1,??XMLDecode_49  ;; `?<Constant "[CDATA[">`
   \   00000440   0720A0E3           MOV      R2,#+7
   \   00000444   040089E0           ADD      R0,R9,R4
   \   00000448   150100EF           SWI      +277
   \   0000044C   000050E3           CMP      R0,#+0
   \   00000450   0600001A           BNE      ??XMLDecode_50
   \   00000454   069089E2           ADD      R9,R9,#+6
   \   00000458   041089E0           ADD      R1,R9,R4
   \   0000045C   011081E2           ADD      R1,R1,#+1
   \   00000460   08108DE5           STR      R1,[SP, #+8]
   \   00000464   0080A0E3           MOV      R8,#+0
   \   00000468   0D60A0E3           MOV      R6,#+13
   \   0000046C   27FFFFEA           B        ??XMLDecode_13
   \                     ??XMLDecode_50:
   \   00000470   0400D9E7           LDRB     R0,[R9, +R4]
   \   00000474   2D0050E3           CMP      R0,#+45
   \   00000478   15FFFF1A           BNE      ??XMLDecode_6
   \   0000047C   040089E0           ADD      R0,R9,R4
   \   00000480   0100D0E5           LDRB     R0,[R0, #+1]
   \   00000484   2D0050E3           CMP      R0,#+45
   \   00000488   11FFFF1A           BNE      ??XMLDecode_6
   \   0000048C   019089E2           ADD      R9,R9,#+1
   \   00000490   041089E0           ADD      R1,R9,R4
   \   00000494   011081E2           ADD      R1,R1,#+1
   \   00000498   08108DE5           STR      R1,[SP, #+8]
   \   0000049C   0E60A0E3           MOV      R6,#+14
   \   000004A0   EFFEFFEA           B        ??XMLDecode_5
   \                     ??XMLDecode_51:
   \   000004A4   5D005BE3           CMP      R11,#+93
   \   000004A8   ECFEFF1A           BNE      ??XMLDecode_3
   \   000004AC   041089E0           ADD      R1,R9,R4
   \   000004B0   0110D1E5           LDRB     R1,[R1, #+1]
   \   000004B4   5D0051E3           CMP      R1,#+93
   \   000004B8   E8FEFF1A           BNE      ??XMLDecode_3
   \   000004BC   041089E0           ADD      R1,R9,R4
   \   000004C0   0210D1E5           LDRB     R1,[R1, #+2]
   \   000004C4   3E0051E3           CMP      R1,#+62
   \   000004C8   E4FEFF1A           BNE      ??XMLDecode_3
   \   000004CC   010058E3           CMP      R8,#+1
   \   000004D0   050000BA           BLT      ??XMLDecode_4
   \   000004D4   00009DE5           LDR      R0,[SP, #+0]
   \   000004D8   000050E3           CMP      R0,#+0
   \   000004DC   0200000A           BEQ      ??XMLDecode_4
   \   000004E0   08109DE5           LDR      R1,[SP, #+8]
   \   000004E4   0820A0E1           MOV      R2,R8
   \   000004E8   ........           BL       AddTextToNode
   \                     ??XMLDecode_4:
   \   000004EC   0080A0E3           MOV      R8,#+0
   \   000004F0   0160A0E3           MOV      R6,#+1
   \   000004F4   0170A0E3           MOV      R7,#+1
   \   000004F8   029089E2           ADD      R9,R9,#+2
   \   000004FC   D8FEFFEA           B        ??XMLDecode_5
   \                     ??XMLDecode_49:
   \   00000500   ........           DC32     `?<Constant "[CDATA[">`
    366          }

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "[CDATA[">`:
   \   00000000   5B4344415441       DC8 "[CDATA["
   \              5B00        

   Maximum stack usage in bytes:

     Function      CSTACK
     --------      ------
     AddTextToNode    28
     DestroyTree      12
     EndAttr          24
     EndTag           20
     FreeAttrQueue    12
     IsName            0
     XMLDecode       596


   Segment part sizes:

     Function/Label        Bytes
     --------------        -----
     IsName                  84
     FreeAttrQueue           52
     DestroyTree             76
     AddTextToNode          140
     EndTag                  84
     EndAttr                124
     XMLDecode             1284
     ?<Constant "[CDATA[">    8
      Others                 28

 
 1 872 bytes in segment CODE
     8 bytes in segment DATA_C
 
 1 844 bytes of CODE  memory (+ 28 bytes shared)
     8 bytes of CONST memory

Errors: none
Warnings: none
