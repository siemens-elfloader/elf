##############################################################################
#                                                                            #
# IAR ARM ANSI C/C++ Compiler V4.40A/W32 EVALUATION    28/Mar/2008  19:09:10 #
# Copyright 1999-2005 IAR Systems. All rights reserved.                      #
#                                                                            #
#    Cpu mode        =  interwork                                            #
#    Endian          =  little                                               #
#    Stack alignment =  4                                                    #
#    Source file     =  E:\Ivo\arm\IVOPLAY\mediafiles_base.c                 #
#    Command line    =  E:\Ivo\arm\IVOPLAY\mediafiles_base.c -D NEWSGOLD     #
#                       -lC E:\Ivo\arm\IVOPLAY\NewSGold\List\ -lA            #
#                       E:\Ivo\arm\IVOPLAY\NewSGold\List\ -o                 #
#                       E:\Ivo\arm\IVOPLAY\NewSGold\Obj\ -s9 --no_cse        #
#                       --no_unroll --no_inline --no_code_motion --no_tbaa   #
#                       --no_clustering --no_scheduling --cpu_mode arm       #
#                       --endian little --cpu ARM926EJ-S --stack_align 4     #
#                       --interwork -e --fpu None --dlib_config              #
#                       D:\arm\ARM\LIB\dl5tpainl8n.h -I D:\arm\ARM\INC\      #
#    List file       =  E:\Ivo\arm\IVOPLAY\NewSGold\List\mediafiles_base.lst #
#    Object file     =  E:\Ivo\arm\IVOPLAY\NewSGold\Obj\mediafiles_base.r79  #
#                                                                            #
#                                                                            #
##############################################################################

E:\Ivo\arm\IVOPLAY\mediafiles_base.c
      1          #include "../inc/swilib.h"
      2          #include "language.h"
      3          #include "main.h"

   \                                 In segment DATA_C, align 1, align-sorted
   \   static char const __data pt[3]
   \                     pt:
   \   00000000   257400             DC8 "%t"

   \                                 In segment DATA_C, align 1, align-sorted
   \   static char const __data pp[1]
   \                     pp:
   \   00000000   00                 DC8 ""
      4          #include "mediafiles.h"
      5          #include "conf_loader.h"
      6          
      7          extern const char playerfolder[128];

   \                                 In segment DATA_I, align 4, align-sorted
      8          extern const char *chotyry="4:";
   \                     chotyry:
   \   00000000                      DS8 4
   \   00000004                      REQUIRE `?<Initializer for chotyry>`
      9          
     10          typedef struct
     11          {
     12            char shliah[210];
     13            char artist[30];
     14            char album[30];
     15            char track[30];
     16          }mediafile;

   \                                 In segment DATA_Z, align 1, align-sorted
     17          mediafile media[];
   \                     media:
   \   00000000                      DS8 300

   \                                 In segment DATA_Z, align 4, align-sorted
     18          char curent_state[30];
   \                     curent_state:
   \   00000000                      DS8 32

   \                                 In segment DATA_C, align 4, align-sorted
     19          const RECT Canvas2={0,0,131,175};
   \                     Canvas2:
   \   00000000   000000008300       DC16 0, 0, 131, 175
   \              AF00        

   \                                 In segment DATA_Z, align 4, align-sorted
     20          int GUI_GUI;
   \                     GUI_GUI:
   \   00000000                      DS8 4

   \                                 In segment DATA_Z, align 4, align-sorted
     21          int curentposition=0;
   \                     curentposition:
   \   00000000                      DS8 4

   \                                 In segment DATA_Z, align 4, align-sorted
     22          char tosearch[256];
   \                     tosearch:
   \   00000000                      DS8 256

   \                                 In segment DATA_Z, align 4, align-sorted
     23          char search_state[256];
   \                     search_state:
   \   00000000                      DS8 256

   \                                 In segment CODE, align 4, keep-with-next
     24          void OnRedraw3(MAIN_GUI *data) // OnRedraw
     25          {
   \                     OnRedraw3:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
     26            WSHDR* a=AllocWS(128);
   \   00000004   8000A0E3           MOV      R0,#+128
   \   00000008   250100EF           SWI      +293
   \   0000000C   0040A0E1           MOV      R4,R0
     27            DrawImg(0,0,(int)GetFon());
   \   00000010   ........           _BLF     GetFon,??GetFon??rA
   \   00000014   0020A0E1           MOV      R2,R0
   \   00000018   0010A0E3           MOV      R1,#+0
   \   0000001C   0000A0E3           MOV      R0,#+0
   \   00000020   230000EF           SWI      +35
     28            wsprintf(a,pt,curent_state);
   \   00000024   ........           LDR      R2,??DataTable70  ;; curent_state
   \   00000028   10119FE5           LDR      R1,??OnRedraw3_0  ;; pt
   \   0000002C   0400A0E1           MOV      R0,R4
   \   00000030   240100EF           SWI      +292
     29            DrawString(a,1,3,130,15,FONT_SMALL_BOLD,TEXT_ALIGNLEFT,GetPaletteAdrByColorIndex(GetKatalogfontcolour()),GetPaletteAdrByColorIndex(23));
   \   00000034   1700A0E3           MOV      R0,#+23
   \   00000038   2E0100EF           SWI      +302
   \   0000003C   0050A0E1           MOV      R5,R0
   \   00000040   ........           _BLF     GetKatalogfontcolour,??GetKatalogfontcolour??rA
   \   00000044   2E0100EF           SWI      +302
   \   00000048   20002DE9           PUSH     {R5}
   \   0000004C   01002DE9           PUSH     {R0}
   \   00000050   0100A0E3           MOV      R0,#+1
   \   00000054   01002DE9           PUSH     {R0}
   \   00000058   0C00A0E3           MOV      R0,#+12
   \   0000005C   01002DE9           PUSH     {R0}
   \   00000060   0F00A0E3           MOV      R0,#+15
   \   00000064   01002DE9           PUSH     {R0}
   \   00000068   8230A0E3           MOV      R3,#+130
   \   0000006C   0320A0E3           MOV      R2,#+3
   \   00000070   0110A0E3           MOV      R1,#+1
   \   00000074   0400A0E1           MOV      R0,R4
   \   00000078   4C0100EF           SWI      +332
     30            
     31            utf8_2ws(a,tosearch,320);
   \   0000007C   502FA0E3           MOV      R2,#+320
   \   00000080   ........           LDR      R1,??DataTable69  ;; tosearch
   \   00000084   0400A0E1           MOV      R0,R4
   \   00000088   E30100EF           SWI      +483
     32            DrawString(a,2,20,130,100,FONT_SMALL,TEXT_ALIGNMIDDLE,GetPaletteAdrByColorIndex(GetKatalogfontcolour()),GetPaletteAdrByColorIndex(23));
   \   0000008C   1700A0E3           MOV      R0,#+23
   \   00000090   2E0100EF           SWI      +302
   \   00000094   0050A0E1           MOV      R5,R0
   \   00000098   ........           _BLF     GetKatalogfontcolour,??GetKatalogfontcolour??rA
   \   0000009C   2E0100EF           SWI      +302
   \   000000A0   20002DE9           PUSH     {R5}
   \   000000A4   01002DE9           PUSH     {R0}
   \   000000A8   0200A0E3           MOV      R0,#+2
   \   000000AC   01002DE9           PUSH     {R0}
   \   000000B0   0B00A0E3           MOV      R0,#+11
   \   000000B4   01002DE9           PUSH     {R0}
   \   000000B8   6400A0E3           MOV      R0,#+100
   \   000000BC   01002DE9           PUSH     {R0}
   \   000000C0   8230A0E3           MOV      R3,#+130
   \   000000C4   1420A0E3           MOV      R2,#+20
   \   000000C8   0210A0E3           MOV      R1,#+2
   \   000000CC   0400A0E1           MOV      R0,R4
   \   000000D0   4C0100EF           SWI      +332
   \   000000D4   28D08DE2           ADD      SP,SP,#+40       ;; stack cleaning
     33            
     34            wsprintf(a,pt,search_state);
   \   000000D8   ........           LDR      R2,??DataTable62  ;; search_state
   \   000000DC   5C109FE5           LDR      R1,??OnRedraw3_0  ;; pt
   \   000000E0   0400A0E1           MOV      R0,R4
   \   000000E4   240100EF           SWI      +292
     35            DrawString(a,1,100,130,130,FONT_SMALL,TEXT_ALIGNLEFT,GetPaletteAdrByColorIndex(GetKatalogfontcolour()),GetPaletteAdrByColorIndex(23));
   \   000000E8   1700A0E3           MOV      R0,#+23
   \   000000EC   2E0100EF           SWI      +302
   \   000000F0   0050A0E1           MOV      R5,R0
   \   000000F4   ........           _BLF     GetKatalogfontcolour,??GetKatalogfontcolour??rA
   \   000000F8   2E0100EF           SWI      +302
   \   000000FC   20002DE9           PUSH     {R5}
   \   00000100   01002DE9           PUSH     {R0}
   \   00000104   0100A0E3           MOV      R0,#+1
   \   00000108   01002DE9           PUSH     {R0}
   \   0000010C   0B00A0E3           MOV      R0,#+11
   \   00000110   01002DE9           PUSH     {R0}
   \   00000114   8200A0E3           MOV      R0,#+130
   \   00000118   01002DE9           PUSH     {R0}
   \   0000011C   0030A0E1           MOV      R3,R0
   \   00000120   6420A0E3           MOV      R2,#+100
   \   00000124   0110A0E3           MOV      R1,#+1
   \   00000128   0400A0E1           MOV      R0,R4
   \   0000012C   4C0100EF           SWI      +332
     36            
     37            FreeWS(a);
   \   00000130   0400A0E1           MOV      R0,R4
   \   00000134   290100EF           SWI      +297
     38          }
   \   00000138   14D08DE2           ADD      SP,SP,#+20       ;; stack cleaning
   \   0000013C   3080BDE8           POP      {R4,R5,PC}       ;; return
   \                     ??OnRedraw3_0:
   \   00000140   ........           DC32     pt

   \                                 In segment CODE, align 4, keep-with-next
     39          int MenuKeys2(MAIN_GUI *data, GUI_MSG *msg) //OnKey
     40          {
     41            if ((msg->gbsmsg->msg==KEY_DOWN))
   \                     MenuKeys2:
   \   00000000   040091E5           LDR      R0,[R1, #+4]
   \   00000004   040090E5           LDR      R0,[R0, #+4]
   \   00000008   9320A0E3           MOV      R2,#+147
   \   0000000C   402F82E3           ORR      R2,R2,#0x100
   \   00000010   020050E1           CMP      R0,R2
   \   00000014   0400001A           BNE      ??MenuKeys2_0
     42            {
     43              switch(msg->gbsmsg->submess)
   \   00000018   040091E5           LDR      R0,[R1, #+4]
   \   0000001C   080090E5           LDR      R0,[R0, #+8]
   \   00000020   0C0050E3           CMP      R0,#+12
     44              {
     45              case RED_BUTTON:return(1);
   \   00000024   0100A003           MOVEQ    R0,#+1
   \   00000028   1EFF2F01           BXEQ     LR
     46              }
     47            }
     48            return(0);
   \                     ??MenuKeys2_0:
   \   0000002C   0000A0E3           MOV      R0,#+0
   \   00000030   1EFF2FE1           BX       LR               ;; return
     49          }

   \                                 In segment DATA_C, align 4, align-sorted
     50          const void * const gui_methods3[11]={
   \                     gui_methods3:
   \   00000000   ............       DC32 OnRedraw3, onCreate2, onClose2, onFocus2, onUnfocus2, MenuKeys2
   \              ............
   \              ............
   \              ............
   \   00000018   00000000....       DC32 0H, onDestroy, method, method, 0H
   \              ............
   \              ........0000
   \              0000        
     51            (void *)OnRedraw3,	//Redraw
     52            (void *)onCreate2,	//Create
     53            (void *)onClose2,	//Close
     54            (void *)onFocus2,	//Focus
     55            (void *)onUnfocus2,	//Unfocus
     56            (void *)MenuKeys2,	//OnKey
     57            0,
     58            #ifdef NEWSGOLD
     59            (void *)onDestroy,	//Destroy
     60            #else
     61            (void *)kill_data,	//Destroy
     62            #endif
     63            (void *)method,
     64            (void *)method,
     65            0
     66          };
     67          

   \                                 In segment CODE, align 4, keep-with-next
     68          void find_tegs()
     69          {
   \                     find_tegs:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
   \   00000004   ACD04DE2           SUB      SP,SP,#+172
     70            int f;
     71            char file[128];
     72            unsigned int err;
     73            FSTATS stat; 
     74            f=fopen(media[curentposition].shliah, A_ReadOnly+A_BIN, P_READ, &err); 
   \   00000008   0D30A0E1           MOV      R3,SP
   \   0000000C   8020A0E3           MOV      R2,#+128
   \   00000010   801CA0E3           MOV      R1,#+32768
   \   00000014   ........           LDR      R0,??DataTable63  ;; curentposition
   \   00000018   000090E5           LDR      R0,[R0, #+0]
   \   0000001C   4B4FA0E3           MOV      R4,#+300
   \   00000020   ........           LDR      R5,??DataTable60  ;; media
   \   00000024   945020E0           MLA      R0,R4,R0,R5
   \   00000028   0A0000EF           SWI      +10
   \   0000002C   0040A0E1           MOV      R4,R0
     75            GetFileStats(media[curentposition].shliah, &stat, &err); 
   \   00000030   0D20A0E1           MOV      R2,SP
   \   00000034   84108DE2           ADD      R1,SP,#+132
   \   00000038   ........           LDR      R0,??DataTable63  ;; curentposition
   \   0000003C   000090E5           LDR      R0,[R0, #+0]
   \   00000040   4B3FA0E3           MOV      R3,#+300
   \   00000044   935020E0           MLA      R0,R3,R0,R5
   \   00000048   840000EF           SWI      +132
     76            lseek(f,(stat.size-128), 0, &err, &err); 
   \   0000004C   0D00A0E1           MOV      R0,SP
   \   00000050   01002DE9           PUSH     {R0}
   \   00000054   04308DE2           ADD      R3,SP,#+4
   \   00000058   0020A0E3           MOV      R2,#+0
   \   0000005C   8C009DE5           LDR      R0,[SP, #+140]
   \   00000060   7F10E0E3           MVN      R1,#+127
   \   00000064   001081E0           ADD      R1,R1,R0
   \   00000068   0400A0E1           MOV      R0,R4
   \   0000006C   0F0000EF           SWI      +15
     77            fread(f, file, 128, &err);
   \   00000070   04308DE2           ADD      R3,SP,#+4
   \   00000074   8020A0E3           MOV      R2,#+128
   \   00000078   08108DE2           ADD      R1,SP,#+8
   \   0000007C   0400A0E1           MOV      R0,R4
   \   00000080   0B0000EF           SWI      +11
     78            fclose(f, &err);
   \   00000084   04108DE2           ADD      R1,SP,#+4
   \   00000088   0400A0E1           MOV      R0,R4
   \   0000008C   0D0000EF           SWI      +13
     79            sprintf(media[curentposition].album,"");
   \   00000090   A01F8FE2           ADR      R1,??find_tegs_0  ;; ""
   \   00000094   ........           LDR      R0,??DataTable63  ;; curentposition
   \   00000098   000090E5           LDR      R0,[R0, #+0]
   \   0000009C   4B2FA0E3           MOV      R2,#+300
   \   000000A0   ........           LDR      R3,??DataTable60  ;; media
   \   000000A4   923020E0           MLA      R0,R2,R0,R3
   \   000000A8   F00080E2           ADD      R0,R0,#+240
   \   000000AC   160000EF           SWI      +22
     80            sprintf(media[curentposition].track,"");
   \   000000B0   981F8FE2           ADR      R1,??find_tegs_0  ;; ""
   \   000000B4   0E00A0E3           MOV      R0,#+14
   \   000000B8   400F80E3           ORR      R0,R0,#0x100
   \   000000BC   ........           LDR      R2,??DataTable63  ;; curentposition
   \   000000C0   002092E5           LDR      R2,[R2, #+0]
   \   000000C4   4B3FA0E3           MOV      R3,#+300
   \   000000C8   ........           LDR      R4,??DataTable60  ;; media
   \   000000CC   934222E0           MLA      R2,R3,R2,R4
   \   000000D0   020080E0           ADD      R0,R0,R2
   \   000000D4   160000EF           SWI      +22
     81            sprintf(media[curentposition].artist,"");
   \   000000D8   8E1F8FE2           ADR      R1,??find_tegs_0  ;; ""
   \   000000DC   ........           LDR      R0,??DataTable63  ;; curentposition
   \   000000E0   000090E5           LDR      R0,[R0, #+0]
   \   000000E4   4B2FA0E3           MOV      R2,#+300
   \   000000E8   ........           LDR      R3,??DataTable60  ;; media
   \   000000EC   923020E0           MLA      R0,R2,R0,R3
   \   000000F0   D20080E2           ADD      R0,R0,#+210
   \   000000F4   160000EF           SWI      +22
     82            if ((file[0]=='T')&&(file[1]=='A')&&(file[2]=='G'))
   \   000000F8   0800DDE5           LDRB     R0,[SP, #+8]
   \   000000FC   540050E3           CMP      R0,#+84
   \   00000100   04D08DE2           ADD      SP,SP,#+4        ;; stack cleaning
   \   00000104   0500DD05           LDRBEQ   R0,[SP, #+5]
   \   00000108   41005003           CMPEQ    R0,#+65
   \   0000010C   0600DD05           LDRBEQ   R0,[SP, #+6]
   \   00000110   47005003           CMPEQ    R0,#+71
   \   00000114   4600001A           BNE      ??find_tegs_1
     83            {
     84            int i;
     85            for (i=3;(file[i]!=0)&&(i<33);i++)
   \   00000118   0340A0E3           MOV      R4,#+3
   \   0000011C   07508DE2           ADD      R5,SP,#+7
   \   00000120   110000EA           B        ??find_tegs_2
     86              {
     87                sprintf(media[curentposition].track,"%s%c",media[curentposition].track,file[i]);
   \                     ??find_tegs_3:
   \   00000124   ........           LDRB     R3,[R5], #+1
   \   00000128   0E00A0E3           MOV      R0,#+14
   \   0000012C   400F80E3           ORR      R0,R0,#0x100
   \   00000130   ........           LDR      R1,??DataTable63  ;; curentposition
   \   00000134   001091E5           LDR      R1,[R1, #+0]
   \   00000138   4B2FA0E3           MOV      R2,#+300
   \   0000013C   ........           LDR      R12,??DataTable60  ;; media
   \   00000140   92C121E0           MLA      R1,R2,R1,R12
   \   00000144   012080E0           ADD      R2,R0,R1
   \   00000148   CC119FE5           LDR      R1,??find_tegs_0+0x4  ;; `?<Constant "%s%c">`
   \   0000014C   ........           LDR      R12,??DataTable63  ;; curentposition
   \   00000150   00C09CE5           LDR      R12,[R12, #+0]
   \   00000154   4BEFA0E3           MOV      LR,#+300
   \   00000158   ........           LDR      R6,??DataTable60  ;; media
   \   0000015C   9E6C26E0           MLA      R6,LR,R12,R6
   \   00000160   060080E0           ADD      R0,R0,R6
   \   00000164   160000EF           SWI      +22
     88              }
   \   00000168   014084E2           ADD      R4,R4,#+1
   \                     ??find_tegs_2:
   \   0000016C   0000D5E5           LDRB     R0,[R5, #+0]
   \   00000170   000050E3           CMP      R0,#+0
   \   00000174   0100000A           BEQ      ??find_tegs_4
   \   00000178   210054E3           CMP      R4,#+33
   \   0000017C   E8FFFFBA           BLT      ??find_tegs_3
     89            for (i=33;(file[i]!=0)&&(i<63);i++)
   \                     ??find_tegs_4:
   \   00000180   2140A0E3           MOV      R4,#+33
   \   00000184   25508DE2           ADD      R5,SP,#+37
   \   00000188   4B6FA0E3           MOV      R6,#+300
   \   0000018C   0D0000EA           B        ??find_tegs_5
     90              {
     91                sprintf(media[curentposition].artist,"%s%c",media[curentposition].artist,file[i]);
   \                     ??find_tegs_6:
   \   00000190   ........           LDRB     R3,[R5], #+1
   \   00000194   ........           LDR      R0,??DataTable63  ;; curentposition
   \   00000198   000090E5           LDR      R0,[R0, #+0]
   \   0000019C   ........           LDR      R2,??DataTable60  ;; media
   \   000001A0   962020E0           MLA      R0,R6,R0,R2
   \   000001A4   D22080E2           ADD      R2,R0,#+210
   \   000001A8   6C119FE5           LDR      R1,??find_tegs_0+0x4  ;; `?<Constant "%s%c">`
   \   000001AC   ........           LDR      R0,??DataTable63  ;; curentposition
   \   000001B0   000090E5           LDR      R0,[R0, #+0]
   \   000001B4   ........           LDR      R12,??DataTable60  ;; media
   \   000001B8   96C020E0           MLA      R0,R6,R0,R12
   \   000001BC   D20080E2           ADD      R0,R0,#+210
   \   000001C0   160000EF           SWI      +22
     92              }
   \   000001C4   014084E2           ADD      R4,R4,#+1
   \                     ??find_tegs_5:
   \   000001C8   0000D5E5           LDRB     R0,[R5, #+0]
   \   000001CC   000050E3           CMP      R0,#+0
   \   000001D0   0100000A           BEQ      ??find_tegs_7
   \   000001D4   3F0054E3           CMP      R4,#+63
   \   000001D8   ECFFFFBA           BLT      ??find_tegs_6
     93            for (i=63;(file[i]!=0)&&(i<93);i++)
   \                     ??find_tegs_7:
   \   000001DC   3F40A0E3           MOV      R4,#+63
   \   000001E0   43508DE2           ADD      R5,SP,#+67
   \   000001E4   0D0000EA           B        ??find_tegs_8
     94              {
     95                sprintf(media[curentposition].album,"%s%c",media[curentposition].album,file[i]);
   \                     ??find_tegs_9:
   \   000001E8   ........           LDRB     R3,[R5], #+1
   \   000001EC   ........           LDR      R0,??DataTable63  ;; curentposition
   \   000001F0   000090E5           LDR      R0,[R0, #+0]
   \   000001F4   ........           LDR      R2,??DataTable60  ;; media
   \   000001F8   962020E0           MLA      R0,R6,R0,R2
   \   000001FC   F02080E2           ADD      R2,R0,#+240
   \   00000200   14119FE5           LDR      R1,??find_tegs_0+0x4  ;; `?<Constant "%s%c">`
   \   00000204   ........           LDR      R0,??DataTable63  ;; curentposition
   \   00000208   000090E5           LDR      R0,[R0, #+0]
   \   0000020C   ........           LDR      R12,??DataTable60  ;; media
   \   00000210   96C020E0           MLA      R0,R6,R0,R12
   \   00000214   F00080E2           ADD      R0,R0,#+240
   \   00000218   160000EF           SWI      +22
     96              }
   \   0000021C   014084E2           ADD      R4,R4,#+1
   \                     ??find_tegs_8:
   \   00000220   0000D5E5           LDRB     R0,[R5, #+0]
   \   00000224   000050E3           CMP      R0,#+0
   \   00000228   0100000A           BEQ      ??find_tegs_1
   \   0000022C   5D0054E3           CMP      R4,#+93
   \   00000230   ECFFFFBA           BLT      ??find_tegs_9
     97            }
     98            if (strlen(media[curentposition].album)==0){sprintf(media[curentposition].album,"Unknown album");}
   \                     ??find_tegs_1:
   \   00000234   ........           LDR      R0,??DataTable63  ;; curentposition
   \   00000238   000090E5           LDR      R0,[R0, #+0]
   \   0000023C   4B1FA0E3           MOV      R1,#+300
   \   00000240   ........           LDR      R2,??DataTable60  ;; media
   \   00000244   912020E0           MLA      R0,R1,R0,R2
   \   00000248   F00080E2           ADD      R0,R0,#+240
   \   0000024C   1B0000EF           SWI      +27
   \   00000250   000050E3           CMP      R0,#+0
   \   00000254   0700001A           BNE      ??find_tegs_10
   \   00000258   C0109FE5           LDR      R1,??find_tegs_0+0x8  ;; `?<Constant "Unknown album">`
   \   0000025C   ........           LDR      R0,??DataTable63  ;; curentposition
   \   00000260   000090E5           LDR      R0,[R0, #+0]
   \   00000264   4B2FA0E3           MOV      R2,#+300
   \   00000268   ........           LDR      R3,??DataTable60  ;; media
   \   0000026C   923020E0           MLA      R0,R2,R0,R3
   \   00000270   F00080E2           ADD      R0,R0,#+240
   \   00000274   160000EF           SWI      +22
     99            if (strlen(media[curentposition].track)==0){sprintf(media[curentposition].track,"Unknown track");}
   \                     ??find_tegs_10:
   \   00000278   0E00A0E3           MOV      R0,#+14
   \   0000027C   400F80E3           ORR      R0,R0,#0x100
   \   00000280   ........           LDR      R1,??DataTable63  ;; curentposition
   \   00000284   001091E5           LDR      R1,[R1, #+0]
   \   00000288   4B2FA0E3           MOV      R2,#+300
   \   0000028C   ........           LDR      R3,??DataTable60  ;; media
   \   00000290   923121E0           MLA      R1,R2,R1,R3
   \   00000294   010080E0           ADD      R0,R0,R1
   \   00000298   1B0000EF           SWI      +27
   \   0000029C   000050E3           CMP      R0,#+0
   \   000002A0   0900001A           BNE      ??find_tegs_11
   \   000002A4   78109FE5           LDR      R1,??find_tegs_0+0xC  ;; `?<Constant "Unknown track">`
   \   000002A8   0E00A0E3           MOV      R0,#+14
   \   000002AC   400F80E3           ORR      R0,R0,#0x100
   \   000002B0   ........           LDR      R2,??DataTable63  ;; curentposition
   \   000002B4   002092E5           LDR      R2,[R2, #+0]
   \   000002B8   4B3FA0E3           MOV      R3,#+300
   \   000002BC   ........           LDR      R4,??DataTable60  ;; media
   \   000002C0   934222E0           MLA      R2,R3,R2,R4
   \   000002C4   020080E0           ADD      R0,R0,R2
   \   000002C8   160000EF           SWI      +22
    100            if (strlen(media[curentposition].artist)==0){sprintf(media[curentposition].artist,"Unknown artist");}
   \                     ??find_tegs_11:
   \   000002CC   ........           LDR      R0,??DataTable63  ;; curentposition
   \   000002D0   000090E5           LDR      R0,[R0, #+0]
   \   000002D4   4B1FA0E3           MOV      R1,#+300
   \   000002D8   ........           LDR      R2,??DataTable60  ;; media
   \   000002DC   912020E0           MLA      R0,R1,R0,R2
   \   000002E0   D20080E2           ADD      R0,R0,#+210
   \   000002E4   1B0000EF           SWI      +27
   \   000002E8   000050E3           CMP      R0,#+0
   \   000002EC   0700001A           BNE      ??find_tegs_12
   \   000002F0   30109FE5           LDR      R1,??find_tegs_0+0x10  ;; `?<Constant "Unknown artist">`
   \   000002F4   ........           LDR      R0,??DataTable63  ;; curentposition
   \   000002F8   000090E5           LDR      R0,[R0, #+0]
   \   000002FC   4B2FA0E3           MOV      R2,#+300
   \   00000300   ........           LDR      R3,??DataTable60  ;; media
   \   00000304   923020E0           MLA      R0,R2,R0,R3
   \   00000308   D20080E2           ADD      R0,R0,#+210
   \   0000030C   160000EF           SWI      +22
    101          }
   \                     ??find_tegs_12:
   \   00000310   ACD08DE2           ADD      SP,SP,#+172      ;; stack cleaning
   \   00000314   7080BDE8           POP      {R4-R6,PC}       ;; return
   \                     ??find_tegs_0:
   \   00000318   00000000           DC8      "",+0,+0,+0
   \   0000031C   ........           DC32     `?<Constant "%s%c">`
   \   00000320   ........           DC32     `?<Constant "Unknown album">`
   \   00000324   ........           DC32     `?<Constant "Unknown track">`
   \   00000328   ........           DC32     `?<Constant "Unknown artist">`
    102          

   \                                 In segment DATA_Z, align 1, align-sorted
    103          char extension[3];
   \                     extension:
   \   00000000                      DS8 3
    104          

   \                                 In segment CODE, align 4, keep-with-next
    105          void Create()
    106          {
   \                     Create:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
   \   00000004   A3DF4DE2           SUB      SP,SP,#+652
   \   00000008   40DE4DE2           SUB      SP,SP,#+1024
    107            char folder[256];
    108            sprintf(folder,tosearch);
   \   0000000C   ........           LDR      R1,??DataTable69  ;; tosearch
   \   00000010   8C008DE2           ADD      R0,SP,#+140
   \   00000014   400E80E2           ADD      R0,R0,#+1024
   \   00000018   160000EF           SWI      +22
    109            sprintf(curent_state,LG_SEARCHING_FILES);
   \   0000001C   D0149FE5           LDR      R1,??Create_0    ;; `?<Constant "\\310\\371\\363 \\364\\340\\351\\353\\373.`
   \   00000020   ........           LDR      R0,??DataTable70  ;; curent_state
   \   00000024   160000EF           SWI      +22
    110            REDRAW();
   \   00000028   720100EF           SWI      +370
    111            DIR_ENTRY de;
    112            unsigned int err;
    113            char path[128];
    114            sprintf(path,"%s\\*",folder);
   \   0000002C   8C208DE2           ADD      R2,SP,#+140
   \   00000030   402E82E2           ADD      R2,R2,#+1024
   \   00000034   BC149FE5           LDR      R1,??Create_0+0x4  ;; `?<Constant "%s\\\\*">`
   \   00000038   830F8DE2           ADD      R0,SP,#+524
   \   0000003C   400E80E2           ADD      R0,R0,#+1024
   \   00000040   160000EF           SWI      +22
    115            if (FindFirstFile(&de,path,&err))
   \   00000044   0D20A0E1           MOV      R2,SP
   \   00000048   831F8DE2           ADD      R1,SP,#+524
   \   0000004C   401E81E2           ADD      R1,R1,#+1024
   \   00000050   08008DE2           ADD      R0,SP,#+8
   \   00000054   6B0000EF           SWI      +107
   \   00000058   000050E3           CMP      R0,#+0
   \   0000005C   4500000A           BEQ      ??Create_1
    116            {
    117              do
    118              {
    119                sprintf(extension,"%c%c%c",de.file_name[strlen(de.file_name)-3],de.file_name[strlen(de.file_name)-2],de.file_name[strlen(de.file_name)-1]);
   \                     ??Create_2:
   \   00000060   BD008DE2           ADD      R0,SP,#+189
   \   00000064   1B0000EF           SWI      +27
   \   00000068   0040A0E1           MOV      R4,R0
   \   0000006C   BD008DE2           ADD      R0,SP,#+189
   \   00000070   1B0000EF           SWI      +27
   \   00000074   0050A0E1           MOV      R5,R0
   \   00000078   BD008DE2           ADD      R0,SP,#+189
   \   0000007C   1B0000EF           SWI      +27
   \   00000080   08108DE2           ADD      R1,SP,#+8
   \   00000084   011084E0           ADD      R1,R4,R1
   \   00000088   B410D1E5           LDRB     R1,[R1, #+180]
   \   0000008C   02002DE9           PUSH     {R1}
   \   00000090   0C108DE2           ADD      R1,SP,#+12
   \   00000094   011085E0           ADD      R1,R5,R1
   \   00000098   B330D1E5           LDRB     R3,[R1, #+179]
   \   0000009C   0C108DE2           ADD      R1,SP,#+12
   \   000000A0   010080E0           ADD      R0,R0,R1
   \   000000A4   B220D0E5           LDRB     R2,[R0, #+178]
   \   000000A8   4C149FE5           LDR      R1,??Create_0+0x8  ;; `?<Constant "%c%c%c">`
   \   000000AC   4C049FE5           LDR      R0,??Create_0+0xC  ;; extension
   \   000000B0   160000EF           SWI      +22
    120                char temp[128];
    121                sprintf(temp,"%s\\%s",folder,de.file_name);
   \   000000B4   C1308DE2           ADD      R3,SP,#+193
   \   000000B8   492E8DE2           ADD      R2,SP,#+1168
   \   000000BC   40149FE5           LDR      R1,??Create_0+0x10  ;; `?<Constant "%s\\\\%s">`
   \   000000C0   590E8DE2           ADD      R0,SP,#+1424
   \   000000C4   160000EF           SWI      +22
    122                if (!IsFile(de.file_name))
   \   000000C8   C1008DE2           ADD      R0,SP,#+193
   \   000000CC   ........           _BLF     IsFile,??IsFile??rA
   \   000000D0   000050E3           CMP      R0,#+0
   \   000000D4   04D08DE2           ADD      SP,SP,#+4        ;; stack cleaning
   \   000000D8   0500001A           BNE      ??Create_3
    123                {
    124                  sprintf(tosearch,temp);
   \   000000DC   631F8DE2           ADD      R1,SP,#+396
   \   000000E0   401E81E2           ADD      R1,R1,#+1024
   \   000000E4   ........           LDR      R0,??DataTable69  ;; tosearch
   \   000000E8   160000EF           SWI      +22
    125                  Create();
   \   000000EC   C3FFFFEB           BL       Create
   \   000000F0   1B0000EA           B        ??Create_4
    126                }
    127                else
    128                if (!strcmp_nocase(extension,"mp3"))
   \                     ??Create_3:
   \   000000F4   D01F8FE2           ADR      R1,??Create_5    ;; "mp3"
   \   000000F8   00049FE5           LDR      R0,??Create_0+0xC  ;; extension
   \   000000FC   ........           _BLF     strcmp_nocase,??strcmp_nocase??rA
   \   00000100   000050E3           CMP      R0,#+0
   \   00000104   1600001A           BNE      ??Create_4
    129                {
    130                  sprintf(media[curentposition].shliah,temp);
   \   00000108   631F8DE2           ADD      R1,SP,#+396
   \   0000010C   401E81E2           ADD      R1,R1,#+1024
   \   00000110   ........           LDR      R0,??DataTable63  ;; curentposition
   \   00000114   000090E5           LDR      R0,[R0, #+0]
   \   00000118   4B2FA0E3           MOV      R2,#+300
   \   0000011C   ........           LDR      R3,??DataTable60  ;; media
   \   00000120   923020E0           MLA      R0,R2,R0,R3
   \   00000124   160000EF           SWI      +22
    131                  find_tegs();
   \   00000128   ........           BL       find_tegs
    132                  sprintf(curent_state,LG_READING_TAGS);
   \   0000012C   D4139FE5           LDR      R1,??Create_0+0x14  ;; `?<Constant "\\327\\350\\362\\340\\376 \\362\\375\\343\\`
   \   00000130   ........           LDR      R0,??DataTable70  ;; curent_state
   \   00000134   160000EF           SWI      +22
    133                  sprintf(search_state,LG_TEXT_1,curentposition);
   \   00000138   ........           LDR      R0,??DataTable63  ;; curentposition
   \   0000013C   002090E5           LDR      R2,[R0, #+0]
   \   00000140   C4139FE5           LDR      R1,??Create_0+0x18  ;; `?<Constant "\\315\\340\\351\\344\\345\\355\\356 \\364\\`
   \   00000144   ........           LDR      R0,??DataTable62  ;; search_state
   \   00000148   160000EF           SWI      +22
    134                  REDRAW();
   \   0000014C   720100EF           SWI      +370
    135                  curentposition++;
   \   00000150   ........           LDR      R0,??DataTable63  ;; curentposition
   \   00000154   ........           LDR      R1,??DataTable63  ;; curentposition
   \   00000158   001091E5           LDR      R1,[R1, #+0]
   \   0000015C   011081E2           ADD      R1,R1,#+1
   \   00000160   001080E5           STR      R1,[R0, #+0]
    136                }
    137              }
    138              while(FindNextFile(&de,&err));
   \                     ??Create_4:
   \   00000164   0D10A0E1           MOV      R1,SP
   \   00000168   08008DE2           ADD      R0,SP,#+8
   \   0000016C   6C0000EF           SWI      +108
   \   00000170   000050E3           CMP      R0,#+0
   \   00000174   B9FFFF1A           BNE      ??Create_2
    139            }
    140            FindClose(&de,&err);
   \                     ??Create_1:
   \   00000178   0D10A0E1           MOV      R1,SP
   \   0000017C   08008DE2           ADD      R0,SP,#+8
   \   00000180   6D0000EF           SWI      +109
    141            if (!strcmp_nocase(folder,chotyry))
   \   00000184   ........           LDR      R0,??DataTable68  ;; chotyry
   \   00000188   001090E5           LDR      R1,[R0, #+0]
   \   0000018C   8C008DE2           ADD      R0,SP,#+140
   \   00000190   400E80E2           ADD      R0,R0,#+1024
   \   00000194   ........           _BLF     strcmp_nocase,??strcmp_nocase??rA
   \   00000198   000050E3           CMP      R0,#+0
   \   0000019C   D100001A           BNE      ??Create_6
    142            {
    143              sprintf(curent_state,LG_VPORIADKOVUJU);
   \   000001A0   68139FE5           LDR      R1,??Create_0+0x1C  ;; `?<Constant "\\323\\357\\356\\360\\377\\344\\356\\367\\3`
   \   000001A4   ........           LDR      R0,??DataTable70  ;; curent_state
   \   000001A8   160000EF           SWI      +22
    144              sprintf(tosearch,pp);
   \   000001AC   60139FE5           LDR      R1,??Create_0+0x20  ;; pp
   \   000001B0   ........           LDR      R0,??DataTable69  ;; tosearch
   \   000001B4   160000EF           SWI      +22
    145              REDRAW();
   \   000001B8   720100EF           SWI      +370
    146              //Впорядковуємо...
    147              {
    148                char name[320];
    149                for (int i=0;i<curentposition+1;i++)
   \   000001BC   0040A0E3           MOV      R4,#+0
   \   000001C0   ........           LDR      R5,??DataTable60  ;; media
   \   000001C4   360000EA           B        ??Create_7
    150                {
    151                  for (int j=i+1;j<curentposition;j++)
    152                  {
    153                    if (strcmp(media[i].artist,media[j].artist)>0)
   \                     ??Create_8:
   \   000001C8   D21087E2           ADD      R1,R7,#+210
   \   000001CC   D20085E2           ADD      R0,R5,#+210
   \   000001D0   190000EF           SWI      +25
   \   000001D4   010050E3           CMP      R0,#+1
   \   000001D8   290000BA           BLT      ??Create_9
    154                    {
    155                      sprintf(name,media[i].artist);
   \   000001DC   D21085E2           ADD      R1,R5,#+210
   \   000001E0   D30F8DE2           ADD      R0,SP,#+844
   \   000001E4   160000EF           SWI      +22
    156                      sprintf(media[i].artist,media[j].artist);
   \   000001E8   D21087E2           ADD      R1,R7,#+210
   \   000001EC   D20085E2           ADD      R0,R5,#+210
   \   000001F0   160000EF           SWI      +22
    157                      sprintf(media[j].artist,name);
   \   000001F4   D31F8DE2           ADD      R1,SP,#+844
   \   000001F8   D20087E2           ADD      R0,R7,#+210
   \   000001FC   160000EF           SWI      +22
    158                      
    159                      sprintf(name,media[i].track);
   \   00000200   0E00A0E3           MOV      R0,#+14
   \   00000204   400F80E3           ORR      R0,R0,#0x100
   \   00000208   051080E0           ADD      R1,R0,R5
   \   0000020C   D30F8DE2           ADD      R0,SP,#+844
   \   00000210   160000EF           SWI      +22
    160                      sprintf(media[i].track,media[j].track);
   \   00000214   0E00A0E3           MOV      R0,#+14
   \   00000218   400F80E3           ORR      R0,R0,#0x100
   \   0000021C   071080E0           ADD      R1,R0,R7
   \   00000220   050080E0           ADD      R0,R0,R5
   \   00000224   160000EF           SWI      +22
    161                      sprintf(media[j].track,name);
   \   00000228   D31F8DE2           ADD      R1,SP,#+844
   \   0000022C   0E00A0E3           MOV      R0,#+14
   \   00000230   400F80E3           ORR      R0,R0,#0x100
   \   00000234   070080E0           ADD      R0,R0,R7
   \   00000238   160000EF           SWI      +22
    162                      
    163                      sprintf(name,media[i].album);
   \   0000023C   F01085E2           ADD      R1,R5,#+240
   \   00000240   D30F8DE2           ADD      R0,SP,#+844
   \   00000244   160000EF           SWI      +22
    164                      sprintf(media[i].album,media[j].album);
   \   00000248   F01087E2           ADD      R1,R7,#+240
   \   0000024C   F00085E2           ADD      R0,R5,#+240
   \   00000250   160000EF           SWI      +22
    165                      sprintf(media[j].album,name);
   \   00000254   D31F8DE2           ADD      R1,SP,#+844
   \   00000258   F00087E2           ADD      R0,R7,#+240
   \   0000025C   160000EF           SWI      +22
    166                      
    167                      sprintf(name,media[i].shliah);
   \   00000260   0510A0E1           MOV      R1,R5
   \   00000264   D30F8DE2           ADD      R0,SP,#+844
   \   00000268   160000EF           SWI      +22
    168                      sprintf(media[i].shliah,media[j].shliah);
   \   0000026C   0710A0E1           MOV      R1,R7
   \   00000270   0500A0E1           MOV      R0,R5
   \   00000274   160000EF           SWI      +22
    169                      sprintf(media[j].shliah,name);
   \   00000278   D31F8DE2           ADD      R1,SP,#+844
   \   0000027C   0700A0E1           MOV      R0,R7
   \   00000280   160000EF           SWI      +22
    170                    }
    171                  }
   \                     ??Create_9:
   \   00000284   016086E2           ADD      R6,R6,#+1
   \   00000288   4B7F87E2           ADD      R7,R7,#+300
   \                     ??Create_10:
   \   0000028C   ........           LDR      R0,??DataTable63  ;; curentposition
   \   00000290   000090E5           LDR      R0,[R0, #+0]
   \   00000294   000056E1           CMP      R6,R0
   \   00000298   CAFFFFBA           BLT      ??Create_8
   \   0000029C   014084E2           ADD      R4,R4,#+1
   \   000002A0   4B5F85E2           ADD      R5,R5,#+300
   \                     ??Create_7:
   \   000002A4   ........           LDR      R0,??DataTable63  ;; curentposition
   \   000002A8   000090E5           LDR      R0,[R0, #+0]
   \   000002AC   010080E2           ADD      R0,R0,#+1
   \   000002B0   000054E1           CMP      R4,R0
   \   000002B4   040000AA           BGE      ??Create_11
   \   000002B8   016084E2           ADD      R6,R4,#+1
   \   000002BC   4B0FA0E3           MOV      R0,#+300
   \   000002C0   ........           LDR      R1,??DataTable60  ;; media
   \   000002C4   901627E0           MLA      R7,R0,R6,R1
   \   000002C8   EFFFFFEA           B        ??Create_10
    172                }
    173                
    174                for (int i=0;i<curentposition+1;i++)
   \                     ??Create_11:
   \   000002CC   0040A0E3           MOV      R4,#+0
   \   000002D0   ........           LDR      R5,??DataTable60  ;; media
   \   000002D4   3B0000EA           B        ??Create_12
    175                {
    176                  for (int j=i+1;j<curentposition;j++)
    177                  {
    178                    if ((strcmp(media[i].artist,media[j].artist)==0)&&(strcmp(media[i].album,media[j].album)>0))
   \                     ??Create_13:
   \   000002D8   D21087E2           ADD      R1,R7,#+210
   \   000002DC   D20085E2           ADD      R0,R5,#+210
   \   000002E0   190000EF           SWI      +25
   \   000002E4   000050E3           CMP      R0,#+0
   \   000002E8   2E00001A           BNE      ??Create_14
   \   000002EC   F01087E2           ADD      R1,R7,#+240
   \   000002F0   F00085E2           ADD      R0,R5,#+240
   \   000002F4   190000EF           SWI      +25
   \   000002F8   010050E3           CMP      R0,#+1
   \   000002FC   290000BA           BLT      ??Create_14
    179                    {
    180                      sprintf(name,media[i].artist);
   \   00000300   D21085E2           ADD      R1,R5,#+210
   \   00000304   D30F8DE2           ADD      R0,SP,#+844
   \   00000308   160000EF           SWI      +22
    181                      sprintf(media[i].artist,media[j].artist);
   \   0000030C   D21087E2           ADD      R1,R7,#+210
   \   00000310   D20085E2           ADD      R0,R5,#+210
   \   00000314   160000EF           SWI      +22
    182                      sprintf(media[j].artist,name);
   \   00000318   D31F8DE2           ADD      R1,SP,#+844
   \   0000031C   D20087E2           ADD      R0,R7,#+210
   \   00000320   160000EF           SWI      +22
    183                      
    184                      sprintf(name,media[i].track);
   \   00000324   0E00A0E3           MOV      R0,#+14
   \   00000328   400F80E3           ORR      R0,R0,#0x100
   \   0000032C   051080E0           ADD      R1,R0,R5
   \   00000330   D30F8DE2           ADD      R0,SP,#+844
   \   00000334   160000EF           SWI      +22
    185                      sprintf(media[i].track,media[j].track);
   \   00000338   0E00A0E3           MOV      R0,#+14
   \   0000033C   400F80E3           ORR      R0,R0,#0x100
   \   00000340   071080E0           ADD      R1,R0,R7
   \   00000344   050080E0           ADD      R0,R0,R5
   \   00000348   160000EF           SWI      +22
    186                      sprintf(media[j].track,name);
   \   0000034C   D31F8DE2           ADD      R1,SP,#+844
   \   00000350   0E00A0E3           MOV      R0,#+14
   \   00000354   400F80E3           ORR      R0,R0,#0x100
   \   00000358   070080E0           ADD      R0,R0,R7
   \   0000035C   160000EF           SWI      +22
    187                      
    188                      sprintf(name,media[i].album);
   \   00000360   F01085E2           ADD      R1,R5,#+240
   \   00000364   D30F8DE2           ADD      R0,SP,#+844
   \   00000368   160000EF           SWI      +22
    189                      sprintf(media[i].album,media[j].album);
   \   0000036C   F01087E2           ADD      R1,R7,#+240
   \   00000370   F00085E2           ADD      R0,R5,#+240
   \   00000374   160000EF           SWI      +22
    190                      sprintf(media[j].album,name);
   \   00000378   D31F8DE2           ADD      R1,SP,#+844
   \   0000037C   F00087E2           ADD      R0,R7,#+240
   \   00000380   160000EF           SWI      +22
    191                      
    192                      sprintf(name,media[i].shliah);
   \   00000384   0510A0E1           MOV      R1,R5
   \   00000388   D30F8DE2           ADD      R0,SP,#+844
   \   0000038C   160000EF           SWI      +22
    193                      sprintf(media[i].shliah,media[j].shliah);
   \   00000390   0710A0E1           MOV      R1,R7
   \   00000394   0500A0E1           MOV      R0,R5
   \   00000398   160000EF           SWI      +22
    194                      sprintf(media[j].shliah,name);
   \   0000039C   D31F8DE2           ADD      R1,SP,#+844
   \   000003A0   0700A0E1           MOV      R0,R7
   \   000003A4   160000EF           SWI      +22
    195                    }
    196                  }
   \                     ??Create_14:
   \   000003A8   016086E2           ADD      R6,R6,#+1
   \   000003AC   4B7F87E2           ADD      R7,R7,#+300
   \                     ??Create_15:
   \   000003B0   ........           LDR      R0,??DataTable63  ;; curentposition
   \   000003B4   000090E5           LDR      R0,[R0, #+0]
   \   000003B8   000056E1           CMP      R6,R0
   \   000003BC   C5FFFFBA           BLT      ??Create_13
   \   000003C0   014084E2           ADD      R4,R4,#+1
   \   000003C4   4B5F85E2           ADD      R5,R5,#+300
   \                     ??Create_12:
   \   000003C8   ........           LDR      R0,??DataTable63  ;; curentposition
   \   000003CC   000090E5           LDR      R0,[R0, #+0]
   \   000003D0   010080E2           ADD      R0,R0,#+1
   \   000003D4   000054E1           CMP      R4,R0
   \   000003D8   040000AA           BGE      ??Create_16
   \   000003DC   016084E2           ADD      R6,R4,#+1
   \   000003E0   4B0FA0E3           MOV      R0,#+300
   \   000003E4   ........           LDR      R1,??DataTable60  ;; media
   \   000003E8   901627E0           MLA      R7,R0,R6,R1
   \   000003EC   EFFFFFEA           B        ??Create_15
    197                }
    198                int f;
    199                unsigned int err;
    200                sprintf(curent_state,LG_SAVING);
   \                     ??Create_16:
   \   000003F0   20119FE5           LDR      R1,??Create_0+0x24  ;; `?<Constant "\\321\\356\\365\\360\\340\\355\\377\\376 \\`
   \   000003F4   ........           LDR      R0,??DataTable70  ;; curent_state
   \   000003F8   160000EF           SWI      +22
    201                sprintf(name,"%smediafiiles.txt",playerfolder);
   \   000003FC   ........           LDR      R2,??DataTable65  ;; playerfolder
   \   00000400   ........           LDR      R1,??DataTable66  ;; `?<Constant "%smediafiiles.txt">`
   \   00000404   D30F8DE2           ADD      R0,SP,#+844
   \   00000408   160000EF           SWI      +22
    202                f=fopen(name, A_WriteOnly+A_Create, P_WRITE, & err );
   \   0000040C   04308DE2           ADD      R3,SP,#+4
   \   00000410   402FA0E3           MOV      R2,#+256
   \   00000414   011082E3           ORR      R1,R2,#0x1
   \   00000418   D30F8DE2           ADD      R0,SP,#+844
   \   0000041C   0A0000EF           SWI      +10
   \   00000420   0040A0E1           MOV      R4,R0
    203                WSHDR* a=AllocWS(256);
   \   00000424   400FA0E3           MOV      R0,#+256
   \   00000428   250100EF           SWI      +293
   \   0000042C   0050A0E1           MOV      R5,R0
    204                for (int i=0;i<curentposition;i++)
   \   00000430   0060A0E3           MOV      R6,#+0
   \   00000434   ........           LDR      R7,??DataTable60  ;; media
   \   00000438   1C0000EA           B        ??Create_17
   \                     ??Create_5:
   \   0000043C   6D703300           DC8      "mp3"
    205                {
    206                  sprintf(search_state,LG_TEXT_2,curentposition,i);
   \                     ??Create_18:
   \   00000440   0630A0E1           MOV      R3,R6
   \   00000444   ........           LDR      R0,??DataTable63  ;; curentposition
   \   00000448   002090E5           LDR      R2,[R0, #+0]
   \   0000044C   C8109FE5           LDR      R1,??Create_0+0x28  ;; `?<Constant "\\315\\340\\351\\344\\345\\355\\356 \\364\\_1`
   \   00000450   ........           LDR      R0,??DataTable62  ;; search_state
   \   00000454   160000EF           SWI      +22
    207                  REDRAW();
   \   00000458   720100EF           SWI      +370
    208                  sprintf(name,"%s\r\n%s\r\n%s\r\n%s\r\n",media[i].artist,media[i].album,media[i].track,media[i].shliah);
   \   0000045C   0700A0E1           MOV      R0,R7
   \   00000460   01002DE9           PUSH     {R0}
   \   00000464   0E00A0E3           MOV      R0,#+14
   \   00000468   400F80E3           ORR      R0,R0,#0x100
   \   0000046C   070080E0           ADD      R0,R0,R7
   \   00000470   01002DE9           PUSH     {R0}
   \   00000474   F03087E2           ADD      R3,R7,#+240
   \   00000478   D22087E2           ADD      R2,R7,#+210
   \   0000047C   9C109FE5           LDR      R1,??Create_0+0x2C  ;; `?<Constant "%s\\r\\n%s\\r\\n%s\\r\\n%s\\r\\n">`
   \   00000480   D50F8DE2           ADD      R0,SP,#+852
   \   00000484   160000EF           SWI      +22
    209                  //utf8_2ws(a,name,256);
    210                  //ws_2str(a,name,256);
    211                  fwrite(f,name,strlen(name),&err);
   \   00000488   D50F8DE2           ADD      R0,SP,#+852
   \   0000048C   1B0000EF           SWI      +27
   \   00000490   0C308DE2           ADD      R3,SP,#+12
   \   00000494   0020A0E1           MOV      R2,R0
   \   00000498   D51F8DE2           ADD      R1,SP,#+852
   \   0000049C   0400A0E1           MOV      R0,R4
   \   000004A0   0C0000EF           SWI      +12
    212                }
   \   000004A4   016086E2           ADD      R6,R6,#+1
   \   000004A8   4B7F87E2           ADD      R7,R7,#+300
   \   000004AC   08D08DE2           ADD      SP,SP,#+8        ;; stack cleaning
   \                     ??Create_17:
   \   000004B0   ........           LDR      R0,??DataTable63  ;; curentposition
   \   000004B4   000090E5           LDR      R0,[R0, #+0]
   \   000004B8   000056E1           CMP      R6,R0
   \   000004BC   DFFFFFBA           BLT      ??Create_18
    213                FreeWS(a);
   \   000004C0   0500A0E1           MOV      R0,R5
   \   000004C4   290100EF           SWI      +297
    214                fclose(f,&err);
   \   000004C8   04108DE2           ADD      R1,SP,#+4
   \   000004CC   0400A0E1           MOV      R0,R4
   \   000004D0   0D0000EF           SWI      +13
    215              }
    216              GeneralFunc_flag1(GUI_GUI,1);
   \   000004D4   0110A0E3           MOV      R1,#+1
   \   000004D8   ........           LDR      R0,??DataTable67  ;; GUI_GUI
   \   000004DC   000090E5           LDR      R0,[R0, #+0]
   \   000004E0   3D0100EF           SWI      +317
    217              ViewFiles();
   \   000004E4   ........           _BLF     ViewFiles,??ViewFiles??rA
    218            }
    219          }
   \                     ??Create_6:
   \   000004E8   A3DF8DE2           ADD      SP,SP,#+652      ;; stack cleaning
   \   000004EC   40DE8DE2           ADD      SP,SP,#+1024
   \   000004F0   F080BDE8           POP      {R4-R7,PC}       ;; return
   \                     ??Create_0:
   \   000004F4   ........           DC32     `?<Constant "\\310\\371\\363 \\364\\340\\351\\353\\373.`
   \   000004F8   ........           DC32     `?<Constant "%s\\\\*">`
   \   000004FC   ........           DC32     `?<Constant "%c%c%c">`
   \   00000500   ........           DC32     extension
   \   00000504   ........           DC32     `?<Constant "%s\\\\%s">`
   \   00000508   ........           DC32     `?<Constant "\\327\\350\\362\\340\\376 \\362\\375\\343\\`
   \   0000050C   ........           DC32     `?<Constant "\\315\\340\\351\\344\\345\\355\\356 \\364\\`
   \   00000510   ........           DC32     `?<Constant "\\323\\357\\356\\360\\377\\344\\356\\367\\3`
   \   00000514   ........           DC32     pp
   \   00000518   ........           DC32     `?<Constant "\\321\\356\\365\\360\\340\\355\\377\\376 \\`
   \   0000051C   ........           DC32     `?<Constant "\\315\\340\\351\\344\\345\\355\\356 \\364\\_1`
   \   00000520   ........           DC32     `?<Constant "%s\\r\\n%s\\r\\n%s\\r\\n%s\\r\\n">`
    220          

   \                                 In segment CODE, align 4, keep-with-next
    221          int CreateBaseOfMediafiles()
    222          {
   \                     CreateBaseOfMediafiles:
   \   00000000   10402DE9           PUSH     {R4,LR}
   \   00000004   88D04DE2           SUB      SP,SP,#+136
   \   00000008   40DE4DE2           SUB      SP,SP,#+1024
    223            DIR_ENTRY de;
    224            unsigned int err;
    225            char name[320];
    226            sprintf(name,"%smediafiiles.txt",playerfolder);
   \   0000000C   ........           LDR      R2,??DataTable65  ;; playerfolder
   \   00000010   ........           LDR      R1,??DataTable66  ;; `?<Constant "%smediafiiles.txt">`
   \   00000014   D20F8DE2           ADD      R0,SP,#+840
   \   00000018   160000EF           SWI      +22
    227            if(!FindFirstFile(&de,name,&err))
   \   0000001C   0D20A0E1           MOV      R2,SP
   \   00000020   D21F8DE2           ADD      R1,SP,#+840
   \   00000024   04008DE2           ADD      R0,SP,#+4
   \   00000028   6B0000EF           SWI      +107
   \   0000002C   000050E3           CMP      R0,#+0
   \   00000030   1A00001A           BNE      ??CreateBaseOfMediafiles_0
    228              {
    229                MAIN_GUI *main_gui=malloc(sizeof(MAIN_GUI));
   \   00000034   4000A0E3           MOV      R0,#+64
   \   00000038   140000EF           SWI      +20
   \   0000003C   0040A0E1           MOV      R4,R0
    230                zeromem(main_gui,sizeof(MAIN_GUI));
   \   00000040   4010A0E3           MOV      R1,#+64
   \   00000044   1D0100EF           SWI      +285
    231                main_gui->gui.canvas=(void *)(&Canvas2);
   \   00000048   70009FE5           LDR      R0,??CreateBaseOfMediafiles_1  ;; Canvas2
   \   0000004C   000084E5           STR      R0,[R4, #+0]
    232                main_gui->gui.flag30=2;
   \   00000050   0200A0E3           MOV      R0,#+2
   \   00000054   300084E5           STR      R0,[R4, #+48]
    233                main_gui->gui.methods=(void *)gui_methods3;
   \   00000058   64009FE5           LDR      R0,??CreateBaseOfMediafiles_1+0x4  ;; gui_methods3
   \   0000005C   040084E5           STR      R0,[R4, #+4]
    234                main_gui->gui.item_ll.data_mfree=(void (*)(void *))mfree_adr();
   \   00000060   158000EF           SWI      +32789
   \   00000064   200084E5           STR      R0,[R4, #+32]
    235                GUI_GUI=CreateGUI(main_gui);
   \   00000068   0400A0E1           MOV      R0,R4
   \   0000006C   370100EF           SWI      +311
   \   00000070   ........           LDR      R1,??DataTable67  ;; GUI_GUI
   \   00000074   000081E5           STR      R0,[R1, #+0]
    236                sprintf(tosearch,chotyry);
   \   00000078   ........           LDR      R0,??DataTable68  ;; chotyry
   \   0000007C   001090E5           LDR      R1,[R0, #+0]
   \   00000080   ........           LDR      R0,??DataTable69  ;; tosearch
   \   00000084   160000EF           SWI      +22
    237                sprintf(curent_state,LG_SEARCHING);
   \   00000088   38109FE5           LDR      R1,??CreateBaseOfMediafiles_1+0x8  ;; `?<Constant "\\310\\371\\363 \\354\\345\\344\\350\\340\\`
   \   0000008C   ........           LDR      R0,??DataTable70  ;; curent_state
   \   00000090   160000EF           SWI      +22
    238                SUBPROC((void *)Create);
   \   00000094   30009FE5           LDR      R0,??CreateBaseOfMediafiles_1+0xC  ;; Create
   \   00000098   710100EF           SWI      +369
   \   0000009C   000000EA           B        ??CreateBaseOfMediafiles_2
    239              }
    240            else
    241            {
    242              ViewFiles();
   \                     ??CreateBaseOfMediafiles_0:
   \   000000A0   ........           _BLF     ViewFiles,??ViewFiles??rA
    243            }
    244            FindClose(&de,&err);
   \                     ??CreateBaseOfMediafiles_2:
   \   000000A4   0D10A0E1           MOV      R1,SP
   \   000000A8   04008DE2           ADD      R0,SP,#+4
   \   000000AC   6D0000EF           SWI      +109
    245            return(0);
   \   000000B0   0000A0E3           MOV      R0,#+0
   \   000000B4   88D08DE2           ADD      SP,SP,#+136      ;; stack cleaning
   \   000000B8   40DE8DE2           ADD      SP,SP,#+1024
   \   000000BC   1080BDE8           POP      {R4,PC}          ;; return
   \                     ??CreateBaseOfMediafiles_1:
   \   000000C0   ........           DC32     Canvas2
   \   000000C4   ........           DC32     gui_methods3
   \   000000C8   ........           DC32     `?<Constant "\\310\\371\\363 \\354\\345\\344\\350\\340\\`
   \   000000CC   ........           DC32     Create
    246          }

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable60:
   \   00000000   ........           DC32     media

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable62:
   \   00000000   ........           DC32     search_state

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable63:
   \   00000000   ........           DC32     curentposition

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable65:
   \   00000000   ........           DC32     playerfolder

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable66:
   \   00000000   ........           DC32     `?<Constant "%smediafiiles.txt">`

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable67:
   \   00000000   ........           DC32     GUI_GUI

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable68:
   \   00000000   ........           DC32     chotyry

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable69:
   \   00000000   ........           DC32     tosearch

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable70:
   \   00000000   ........           DC32     curent_state

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for chotyry>`:
   \   00000000   ........           DC32 `?<Constant "4:">`

   \                                 In segment DATA_C, align 1, align-sorted
   \                     `?<Constant "4:">`:
   \   00000000   343A00             DC8 "4:"

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   00                 DC8 ""

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "%s%c">`:
   \   00000000   2573256300         DC8 "%s%c"
   \   00000005   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Unknown album">`:
   \   00000000   556E6B6E6F77       DC8 "Unknown album"
   \              6E20616C6275
   \              6D00        
   \   0000000E   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Unknown track">`:
   \   00000000   556E6B6E6F77       DC8 "Unknown track"
   \              6E2074726163
   \              6B00        
   \   0000000E   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Unknown artist">`:
   \   00000000   556E6B6E6F77       DC8 "Unknown artist"
   \              6E2061727469
   \              737400      
   \   0000000F   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "\\310\\371\\363 \\364\\340\\351\\353\\373.`:
   \   00000000   C8F9F320F4E0       DC8 "\310\371\363 \364\340\351\353\373..."
   \              E9EBFB2E2E2E
   \              00          
   \   0000000D   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "%s\\\\*">`:
   \   00000000   25735C2A00         DC8 "%s\\*"
   \   00000005   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "%c%c%c">`:
   \   00000000   256325632563       DC8 "%c%c%c"
   \              00          
   \   00000007   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "%s\\\\%s">`:
   \   00000000   25735C257300       DC8 "%s\\%s"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "\\327\\350\\362\\340\\376 \\362\\375\\343\\`:
   \   00000000   D7E8F2E0FE20       DC8 "\327\350\362\340\376 \362\375\343\350..."
   \              F2FDE3E82E2E
   \              2E00        
   \   0000000E   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "\\315\\340\\351\\344\\345\\355\\356 \\364\\`:
   \   00000000   CDE0E9E4E5ED       DC8 "\315\340\351\344\345\355\356 \364\340\351\353\356\342:%i\015\321\356\365\360\340\355\345\355\356 \364\340\351\353\356\342:0"
   \              EE20F4E0E9EB
   \              EEE23A25690D
   \              D1EEF5F0E0ED
   \              E5EDEE20F4E0
   \              E9EBEEE23A30
   \              00          
   \   00000025   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   6D703300           DC8 "mp3"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "\\323\\357\\356\\360\\377\\344\\356\\367\\3`:
   \   00000000   D3EFEEF0FFE4       DC8 "\323\357\356\360\377\344\356\367\350\342\340\376..."
   \              EEF7E8E2E0FE
   \              2E2E2E00    

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "\\321\\356\\365\\360\\340\\355\\377\\376 \\`:
   \   00000000   D1EEF5F0E0ED       DC8 "\321\356\365\360\340\355\377\376 \344\340\355\355\373\345..."
   \              FFFE20E4E0ED
   \              EDFBE52E2E2E
   \              00          
   \   00000013   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "%smediafiiles.txt">`:
   \   00000000   25736D656469       DC8 "%smediafiiles.txt"
   \              616669696C65
   \              732E74787400
   \   00000012   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "\\315\\340\\351\\344\\345\\355\\356 \\364\\_1`:
   \   00000000   CDE0E9E4E5ED       DC8 "\315\340\351\344\345\355\356 \364\340\351\353\356\342:%i\015\321\356\365\360\340\355\345\355\356 \364\340\351\353\356\342:%i"
   \              EE20F4E0E9EB
   \              EEE23A25690D
   \              D1EEF5F0E0ED
   \              E5EDEE20F4E0
   \              E9EBEEE23A25
   \              6900        
   \   00000026   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "%s\\r\\n%s\\r\\n%s\\r\\n%s\\r\\n">`:
   \   00000000   25730D0A2573       DC8 "%s\015\012%s\015\012%s\015\012%s\015\012"
   \              0D0A25730D0A
   \              25730D0A00  
   \   00000011   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "\\310\\371\\363 \\354\\345\\344\\350\\340\\`:
   \   00000000   C8F9F320ECE5       DC8 "\310\371\363 \354\345\344\350\340\364\340\351\353\373..."
   \              E4E8E0F4E0E9
   \              EBFB2E2E2E00
   \   00000012   0000               DC8 0, 0

   Maximum stack usage in bytes:

     Function               CSTACK
     --------               ------
     Create                  1704
     CreateBaseOfMediafiles  1168
     MenuKeys2                  0
     OnRedraw3                 52
     find_tegs                192


   Segment part sizes:

     Function/Label                 Bytes
     --------------                 -----
     pt                                3
     pp                                1
     chotyry                           4
     media                           300
     curent_state                     32
     Canvas2                           8
     GUI_GUI                           4
     curentposition                    4
     tosearch                        256
     search_state                    256
     OnRedraw3                       324
     MenuKeys2                        52
     gui_methods3                     44
     find_tegs                       812
     extension                         3
     Create                         1316
     CreateBaseOfMediafiles          208
     ??DataTable60                     4
     ??DataTable62                     4
     ??DataTable63                     4
     ??DataTable65                     4
     ??DataTable66                     4
     ??DataTable67                     4
     ??DataTable68                     4
     ??DataTable69                     4
     ??DataTable70                     4
     ?<Initializer for chotyry>        4
     ?<Constant "4:">                  3
     ?<Constant "">                    1
     ?<Constant "%s%c">                8
     ?<Constant "Unknown album">      16
     ?<Constant "Unknown track">      16
     ?<Constant "Unknown artist">     16
     ?<Constant "\310\371\363 \364\340\351\353\373.
                                      16
     ?<Constant "%s\\*">               8
     ?<Constant "%c%c%c">              8
     ?<Constant "%s\\%s">              8
     ?<Constant "\327\350\362\340\376 \362\375\343\
                                      16
     ?<Constant "\315\340\351\344\345\355\356 \364\
                                      40
     ?<Constant "mp3">                 4
     ?<Constant "\323\357\356\360\377\344\356\367\3
                                      16
     ?<Constant "\321\356\365\360\340\355\377\376 \
                                      20
     ?<Constant "%smediafiiles.txt">
                                      20
     ?<Constant "\315\340\351\344\345\355\356 \364\_1
                                      40
     ?<Constant "%s\r\n%s\r\n%s\r\n%s\r\n">
                                      20
     ?<Constant "\310\371\363 \354\345\344\350\340\
                                      20
      Others                         104

 
 2 828 bytes in segment CODE
   352 bytes in segment DATA_C
     4 bytes in segment DATA_I
     4 bytes in segment DATA_ID
   855 bytes in segment DATA_Z
    24 bytes in segment INITTAB
 
 2 748 bytes of CODE  memory (+ 104 bytes shared)
   356 bytes of CONST memory
   859 bytes of DATA  memory

Errors: none
Warnings: none
