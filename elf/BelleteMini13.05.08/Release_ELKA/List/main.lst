##############################################################################
#                                                                            #
# IAR ARM ANSI C/C++ Compiler V4.42A/W32 EVALUATION    06/Oct/2008  21:46:42 #
# Copyright 1999-2005 IAR Systems. All rights reserved.                      #
#                                                                            #
#    Cpu mode        =  interwork                                            #
#    Endian          =  little                                               #
#    Stack alignment =  4                                                    #
#    Source file     =  D:\Pasha\elf\BelleteMini13.05.08\main.c              #
#    Command line    =  D:\Pasha\elf\BelleteMini13.05.08\main.c -D NEWSGOLD  #
#                       -D ELKA -lC D:\Pasha\elf\BelleteMini13.05.08\Release #
#                       _ELKA\List\ -o D:\Pasha\elf\BelleteMini13.05.08\Rele #
#                       ase_ELKA\Obj\ -s9 --no_unroll --no_inline            #
#                       --cpu_mode arm --endian little --cpu ARM926EJ-S      #
#                       --stack_align 4 --interwork -e --fpu None            #
#                       --dlib_config "D:\Pasha\Embedded Workbench 4.0       #
#                       Evaluation2\ARM\LIB\dl5tpainl8n.h" -I                #
#                       "D:\Pasha\Embedded Workbench 4.0                     #
#                       Evaluation2\ARM\INC\"                                #
#    List file       =  D:\Pasha\elf\BelleteMini13.05.08\Release_ELKA\List\m #
#                       ain.lst                                              #
#    Object file     =  D:\Pasha\elf\BelleteMini13.05.08\Release_ELKA\Obj\ma #
#                       in.r79                                               #
#                                                                            #
#                                                                            #
##############################################################################

D:\Pasha\elf\BelleteMini13.05.08\main.c
      1          #include "../inc/swilib.h"
      2          #include "view.h"
      3          #include "parse_oms.h"
      4          #include "main.h"
      5          #include "rect_patcher.h"

   \                                 In segment CODE, align 4, keep-with-next
   \   __??Code32?? __code __interwork __atpcs void patch_rect(RECT *, int, int, int, int)
   \                     patch_rect:
   \   00000000   00C09DE5           LDR      R12,[SP, #+0]
   \   00000004   B010C0E1           STRH     R1,[R0, #+0]
   \   00000008   B220C0E1           STRH     R2,[R0, #+2]
   \   0000000C   B430C0E1           STRH     R3,[R0, #+4]
   \   00000010   B6C0C0E1           STRH     R12,[R0, #+6]
   \   00000014   1EFF2FE1           BX       LR               ;; return
      6          #include "local_ipc.h"
      7          #include "display_utils.h"
      8          #include "string_works.h"
      9          #include "destructors.h"
     10          #include "siemens_unicode.h"
     11          #include "inet.h"
     12          #include "urlstack.h"
     13          #include "conf_loader.h"
     14          #include "mainmenu.h"
     15          #include "history.h"
     16          #include "file_works.h"
     17          #include "lang.h"
     18          #include "../inc/sieget_ipc.h"
     19          
     20          char *lgpData[LGP_DATA_NUM];
     21          int lgpLoaded;
     22          
     23          void initDisplayUtilsLangPack();
     24          void initMainMenuLangPack();
     25          

   \                                 In segment CODE, align 4, keep-with-next
     26          void lgpInitLangPack(void)
     27          {
   \                     lgpInitLangPack:
   \   00000000   F0432DE9           PUSH     {R4-R9,LR}
     28            unsigned int err;
     29            char fname[128];
     30            getSymbolicPath(fname,"$ballet\\lang.txt");
     31            int f;
     32            lgpLoaded=0;
   \   00000004   ........           LDR      R4,??DataTable3  ;; lgpData
   \   00000008   ........           LDR      R8,??DataTable1  ;; `?<Constant "INET process bussy!">`
   \   0000000C   4BDF4DE2           SUB      SP,SP,#+300
   \   00000010   D81088E2           ADD      R1,R8,#+216
   \   00000014   AC008DE2           ADD      R0,SP,#+172
   \   00000018   ........           _BLF     getSymbolicPath,??getSymbolicPath??rA
   \   0000001C   0050A0E3           MOV      R5,#+0
   \   00000020   085184E5           STR      R5,[R4, #+264]
     33            char * buf;
     34            FSTATS fstat;
     35            if (GetFileStats(fname, &fstat, &err)!=-1)
   \   00000024   0560E0E1           MVN      R6,R5
   \   00000028   0D20A0E1           MOV      R2,SP
   \   0000002C   04108DE2           ADD      R1,SP,#+4
   \   00000030   AC008DE2           ADD      R0,SP,#+172
   \   00000034   840000EF           SWI      +132
   \   00000038   060050E1           CMP      R0,R6
   \   0000003C   5800000A           BEQ      ??lgpInitLangPack_0
     36            {
     37              if((f=fopen(fname, A_ReadOnly + A_BIN, P_READ, &err))!=-1)
   \   00000040   0D30A0E1           MOV      R3,SP
   \   00000044   8020A0E3           MOV      R2,#+128
   \   00000048   801CA0E3           MOV      R1,#+32768
   \   0000004C   AC008DE2           ADD      R0,SP,#+172
   \   00000050   0A0000EF           SWI      +10
   \   00000054   0070A0E1           MOV      R7,R0
   \   00000058   060057E1           CMP      R7,R6
   \   0000005C   5000000A           BEQ      ??lgpInitLangPack_0
     38              {
     39                if (buf =(char *)malloc(fstat.size+1))
   \   00000060   08009DE5           LDR      R0,[SP, #+8]
   \   00000064   010080E2           ADD      R0,R0,#+1
   \   00000068   140000EF           SWI      +20
   \   0000006C   0060B0E1           MOVS     R6,R0
   \   00000070   4800000A           BEQ      ??lgpInitLangPack_1
     40                {
     41                  buf[fread(f, buf, fstat.size, &err)]=0;
   \   00000074   08209DE5           LDR      R2,[SP, #+8]
   \   00000078   0D30A0E1           MOV      R3,SP
   \   0000007C   0610A0E1           MOV      R1,R6
   \   00000080   0700A0E1           MOV      R0,R7
   \   00000084   0B0000EF           SWI      +11
   \   00000088   0650C0E7           STRB     R5,[R0, +R6]
     42                  fclose(f, &err);
   \   0000008C   0D10A0E1           MOV      R1,SP
   \   00000090   0700A0E1           MOV      R0,R7
   \   00000094   0D0000EF           SWI      +13
     43                  char line[128];
     44                  int lineSize=0;
   \   00000098   0080A0E3           MOV      R8,#+0
     45                  int lp_id=0;
   \   0000009C   0570A0E1           MOV      R7,R5
     46                  int buf_pos = 0;
   \   000000A0   0590A0E1           MOV      R9,R5
   \   000000A4   040000EA           B        ??lgpInitLangPack_2
     47                  while(buf[buf_pos]!=0 && buf_pos < fstat.size && lp_id < LGP_DATA_NUM)
     48                  {
     49                    if (buf[buf_pos]=='\n' || buf[buf_pos]=='\r')
     50                    {
     51                      if (lineSize > 0)
     52                      {
     53                        lgpData[lp_id] = (char *)malloc(lineSize+1);
     54                        memcpy(lgpData[lp_id], line, lineSize);
     55                        lgpData[lp_id][lineSize]=0;
     56                        lp_id++;
     57                        lineSize=0;
     58                      }
     59                    }
     60                    else
     61                      line[lineSize++]=buf[buf_pos];
   \                     ??lgpInitLangPack_3:
   \   000000A8   0620D9E7           LDRB     R2,[R9, +R6]
   \   000000AC   2C108DE2           ADD      R1,SP,#+44
   \   000000B0   0120C8E7           STRB     R2,[R8, +R1]
   \   000000B4   0080A0E1           MOV      R8,R0
     62                    buf_pos++;
   \                     ??lgpInitLangPack_4:
   \   000000B8   019089E2           ADD      R9,R9,#+1
   \                     ??lgpInitLangPack_2:
   \   000000BC   0610D9E7           LDRB     R1,[R9, +R6]
   \   000000C0   010088E2           ADD      R0,R8,#+1
   \   000000C4   000051E3           CMP      R1,#+0
   \   000000C8   1400000A           BEQ      ??lgpInitLangPack_5
   \   000000CC   08109DE5           LDR      R1,[SP, #+8]
   \   000000D0   010059E1           CMP      R9,R1
   \   000000D4   1100002A           BCS      ??lgpInitLangPack_5
   \   000000D8   3F0057E3           CMP      R7,#+63
   \   000000DC   0F0000AA           BGE      ??lgpInitLangPack_5
   \   000000E0   0610D9E7           LDRB     R1,[R9, +R6]
   \   000000E4   0A0051E3           CMP      R1,#+10
   \   000000E8   0D005113           CMPNE    R1,#+13
   \   000000EC   EDFFFF1A           BNE      ??lgpInitLangPack_3
   \   000000F0   010058E3           CMP      R8,#+1
   \   000000F4   EFFFFFBA           BLT      ??lgpInitLangPack_4
   \   000000F8   140000EF           SWI      +20
   \   000000FC   070184E7           STR      R0,[R4, +R7, LSL #+2]
   \   00000100   0820A0E1           MOV      R2,R8
   \   00000104   2C108DE2           ADD      R1,SP,#+44
   \   00000108   1E0100EF           SWI      +286
   \   0000010C   070194E7           LDR      R0,[R4, +R7, LSL #+2]
   \   00000110   017087E2           ADD      R7,R7,#+1
   \   00000114   0050C8E7           STRB     R5,[R8, +R0]
   \   00000118   0080A0E3           MOV      R8,#+0
   \   0000011C   E5FFFFEA           B        ??lgpInitLangPack_4
     63                  }
     64                  if (lineSize > 0 && lp_id < LGP_DATA_NUM) // eof
   \                     ??lgpInitLangPack_5:
   \   00000120   010058E3           CMP      R8,#+1
   \   00000124   080000BA           BLT      ??lgpInitLangPack_6
   \   00000128   3F0057E3           CMP      R7,#+63
   \   0000012C   060000AA           BGE      ??lgpInitLangPack_6
     65                  {
     66                    lgpData[lp_id] = (char *)malloc(lineSize+1);
   \   00000130   140000EF           SWI      +20
   \   00000134   070184E7           STR      R0,[R4, +R7, LSL #+2]
     67                    memcpy(lgpData[lp_id], line, lineSize);
   \   00000138   0820A0E1           MOV      R2,R8
   \   0000013C   2C108DE2           ADD      R1,SP,#+44
   \   00000140   1E0100EF           SWI      +286
     68                    lgpData[lp_id][lineSize]=0;
   \   00000144   070194E7           LDR      R0,[R4, +R7, LSL #+2]
   \   00000148   0050C8E7           STRB     R5,[R8, +R0]
     69                    lp_id++;
     70                    lineSize=0;
     71                  }
     72                  mfree(buf);
   \                     ??lgpInitLangPack_6:
   \   0000014C   0600A0E1           MOV      R0,R6
   \   00000150   150000EF           SWI      +21
     73                  initDisplayUtilsLangPack();
   \   00000154   ........           _BLF     initDisplayUtilsLangPack,??initDisplayUtilsLangPack??rA
     74                  initMainMenuLangPack();
   \   00000158   ........           _BLF     initMainMenuLangPack,??initMainMenuLangPack??rA
     75                  lgpLoaded=1;
   \   0000015C   0100A0E3           MOV      R0,#+1
   \   00000160   080184E5           STR      R0,[R4, #+264]
     76                  
     77                  // old langpack
     78                  if (strlen(lgpData[LGP_LangCode])>2)
   \   00000164   E00094E5           LDR      R0,[R4, #+224]
   \   00000168   1B0000EF           SWI      +27
   \   0000016C   030050E3           CMP      R0,#+3
   \   00000170   5000003A           BCC      ??lgpInitLangPack_7
     79                  {
     80                    mfree(lgpData[LGP_LangCode]);
   \   00000174   E00094E5           LDR      R0,[R4, #+224]
   \   00000178   150000EF           SWI      +21
     81                    lgpData[LGP_LangCode]=malloc(3);
   \   0000017C   0300A0E3           MOV      R0,#+3
   \   00000180   140000EF           SWI      +20
   \   00000184   E00084E5           STR      R0,[R4, #+224]
     82                    strcpy(lgpData[LGP_LangCode],"ru");
   \   00000188   4C1F8FE2           ADR      R1,??lgpInitLangPack_8  ;; "ru"
   \   0000018C   1A0000EF           SWI      +26
   \   00000190   4BDF8DE2           ADD      SP,SP,#+300
   \   00000194   F083BDE8           POP      {R4-R9,PC}
     83                  }
     84                  return;
     85                }
     86                fclose(f, &err);
   \                     ??lgpInitLangPack_1:
   \   00000198   0D10A0E1           MOV      R1,SP
   \   0000019C   0700A0E1           MOV      R0,R7
   \   000001A0   0D0000EF           SWI      +13
     87              }
     88            }
     89            lgpData[LGP_CantOpenFile]=         "Can't open file!";
   \                     ??lgpInitLangPack_0:
   \   000001A4   EC0088E2           ADD      R0,R8,#+236
   \   000001A8   000084E5           STR      R0,[R4, #+0]
     90            lgpData[LGP_CantLoadAuthCode]=     "Can't load AuthCode!";
   \   000001AC   400F88E2           ADD      R0,R8,#+256
   \   000001B0   040084E5           STR      R0,[R4, #+4]
     91            lgpData[LGP_HistoryFileFailed]=    "Can't open history.txt!";
   \   000001B4   460F88E2           ADD      R0,R8,#+280
   \   000001B8   080084E5           STR      R0,[R4, #+8]
     92            lgpData[LGP_CfgUpdated]=           "Congif updated";
   \   000001BC   4C0F88E2           ADD      R0,R8,#+304
   \   000001C0   0C0084E5           STR      R0,[R4, #+12]
     93            lgpData[LGP_RefUnderConstruction]= "Ref \'%c\' under construction!";
   \   000001C4   500F88E2           ADD      R0,R8,#+320
   \   000001C8   100084E5           STR      R0,[R4, #+16]
     94            lgpData[LGP_RefEmpty]=             "RF empty!";
   \   000001CC   580F88E2           ADD      R0,R8,#+352
   \   000001D0   140084E5           STR      R0,[R4, #+20]
     95            lgpData[LGP_Error]=                "Error!";
   \   000001D4   5B0F88E2           ADD      R0,R8,#+364
   \   000001D8   180084E5           STR      R0,[R4, #+24]
     96            lgpData[LGP_Stop]=                 "Stop";
   \   000001DC   5D0F88E2           ADD      R0,R8,#+372
   \   000001E0   1C0084E5           STR      R0,[R4, #+28]
     97            lgpData[LGP_WaitDNR]=              "Wait DNR ...";
   \   000001E4   5F0F88E2           ADD      R0,R8,#+380
   \   000001E8   200084E5           STR      R0,[R4, #+32]
     98            lgpData[LGP_IpConnect]=            "Ip connect ...";
   \   000001EC   700088E2           ADD      R0,R8,#+112
   \   000001F0   240084E5           STR      R0,[R4, #+36]
     99            lgpData[LGP_GetHostByName]=        "Get host by name";
   \   000001F4   630F88E2           ADD      R0,R8,#+396
   \   000001F8   280084E5           STR      R0,[R4, #+40]
    100            lgpData[LGP_FaultDNR]=             "DNR falut!";
   \   000001FC   680F88E2           ADD      R0,R8,#+416
   \   00000200   2C0084E5           STR      R0,[R4, #+44]
    101            lgpData[LGP_OkDNR]=                "DNR ok!";
   \   00000204   6B0F88E2           ADD      R0,R8,#+428
   \   00000208   300084E5           STR      R0,[R4, #+48]
    102            lgpData[LGP_OpenSocket]=           "Open socket...";
   \   0000020C   6D0F88E2           ADD      R0,R8,#+436
   \   00000210   340084E5           STR      R0,[R4, #+52]
    103            lgpData[LGP_ConnectFault]=         "Connect fault...";
   \   00000214   710F88E2           ADD      R0,R8,#+452
   \   00000218   380084E5           STR      R0,[R4, #+56]
    104            lgpData[LGP_AnswerDNR]=            "DNR answer...";
   \   0000021C   760F88E2           ADD      R0,R8,#+472
   \   00000220   3C0084E5           STR      R0,[R4, #+60]
    105            lgpData[LGP_Connected]=            "Connected...";
   \   00000224   7A0F88E2           ADD      R0,R8,#+488
   \   00000228   400084E5           STR      R0,[R4, #+64]
    106            lgpData[LGP_DataReceived]=         "Data received...";
   \   0000022C   7E0F88E2           ADD      R0,R8,#+504
   \   00000230   440084E5           STR      R0,[R4, #+68]
    107            lgpData[LGP_RemoteClosed]=         "Remote closed!";
   \   00000234   830F88E2           ADD      R0,R8,#+524
   \   00000238   480084E5           STR      R0,[R4, #+72]
    108            lgpData[LGP_LocalClosed]=          "Local closed!";
   \   0000023C   870F88E2           ADD      R0,R8,#+540
   \   00000240   4C0084E5           STR      R0,[R4, #+76]
    109            lgpData[LGP_InetBussy]=            "INET process bussy!";
   \   00000244   508084E5           STR      R8,[R4, #+80]
    110            lgpData[LGP_EnableGPRS]=           "Enable GPRS first!";
   \   00000248   140088E2           ADD      R0,R8,#+20
   \   0000024C   540084E5           STR      R0,[R4, #+84]
    111            lgpData[LGP_UnderConstruction]=    "Under Construction!";
   \   00000250   280088E2           ADD      R0,R8,#+40
   \   00000254   580084E5           STR      R0,[R4, #+88]
    112            lgpData[LGP_Ok]=                   "Ok";
   \   00000258   190F8FE2           ADR      R0,??lgpInitLangPack_8+0x4  ;; "Ok"
   \   0000025C   640084E5           STR      R0,[R4, #+100]
    113            lgpData[LGP_Templates]=            "Templates";
   \   00000260   3C0088E2           ADD      R0,R8,#+60
   \   00000264   6C0084E5           STR      R0,[R4, #+108]
    114            lgpData[LGP_Save]=                 "Save";
   \   00000268   480088E2           ADD      R0,R8,#+72
   \   0000026C   900084E5           STR      R0,[R4, #+144]
    115            lgpData[LGP_NameHeader]=           "Name:";
   \   00000270   500088E2           ADD      R0,R8,#+80
   \   00000274   700084E5           STR      R0,[R4, #+112]
    116            lgpData[LGP_NewBookmark]=          "New Bookmark";
   \   00000278   580088E2           ADD      R0,R8,#+88
   \   0000027C   940084E5           STR      R0,[R4, #+148]
    117            lgpData[LGP_LinkHeader]=           "Link:";
   \   00000280   680088E2           ADD      R0,R8,#+104
   \   00000284   740084E5           STR      R0,[R4, #+116]
    118            lgpData[LGP_Absent]=               "Absent...";
   \   00000288   800088E2           ADD      R0,R8,#+128
   \   0000028C   980084E5           STR      R0,[R4, #+152]
    119            lgpData[LGP_Search]=               "Search";
   \   00000290   8C0088E2           ADD      R0,R8,#+140
   \   00000294   DC0084E5           STR      R0,[R4, #+220]
    120            lgpData[LGP_TextHeader]=           "Text:";
   \   00000298   940088E2           ADD      R0,R8,#+148
   \   0000029C   780084E5           STR      R0,[R4, #+120]
    121            lgpData[LGP_SearchEngine]=         "Search engine:";
   \   000002A0   9C0088E2           ADD      R0,R8,#+156
   \   000002A4   7C0084E5           STR      R0,[R4, #+124]
    122            lgpData[LGP_Go]=                   "Go";
   \   000002A8   060F8FE2           ADR      R0,??lgpInitLangPack_8+0x8  ;; "Go"
   \   000002AC   B80084E5           STR      R0,[R4, #+184]
    123            lgpData[LGP_LangCode]=             "en";
   \   000002B0   050F8FE2           ADR      R0,??lgpInitLangPack_8+0xC  ;; "en"
   \   000002B4   E00084E5           STR      R0,[R4, #+224]
    124          }
   \                     ??lgpInitLangPack_7:
   \   000002B8   4BDF8DE2           ADD      SP,SP,#+300      ;; stack cleaning
   \   000002BC   F083BDE8           POP      {R4-R9,PC}       ;; return
   \                     ??lgpInitLangPack_8:
   \   000002C0   72750000           DC8      "ru",+0
   \   000002C4   4F6B0000           DC8      "Ok",+0
   \   000002C8   476F0000           DC8      "Go",+0
   \   000002CC   656E0000           DC8      "en",+0
    125          

   \                                 In segment CODE, align 4, keep-with-next
    126          void lgpFreeLangPack(void)
    127          {
   \                     lgpFreeLangPack:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
    128            if (!lgpLoaded) return;
   \   00000004   ........           LDR      R4,??DataTable3  ;; lgpData
   \   00000008   080194E5           LDR      R0,[R4, #+264]
   \   0000000C   000050E3           CMP      R0,#+0
   \   00000010   3080BD08           POPEQ    {R4,R5,PC}
    129            for (int i=0;i<LGP_DATA_NUM;i++)
   \   00000014   0050A0E3           MOV      R5,#+0
    130            {
    131              if (lgpData[i]!=NULL)
   \                     ??lgpFreeLangPack_0:
   \   00000018   050194E7           LDR      R0,[R4, +R5, LSL #+2]
   \   0000001C   000050E3           CMP      R0,#+0
   \   00000020   0000000A           BEQ      ??lgpFreeLangPack_1
    132                mfree(lgpData[i]);
   \   00000024   150000EF           SWI      +21
    133            }
   \                     ??lgpFreeLangPack_1:
   \   00000028   015085E2           ADD      R5,R5,#+1
   \   0000002C   3F0055E3           CMP      R5,#+63
   \   00000030   F8FFFFBA           BLT      ??lgpFreeLangPack_0
   \   00000034   3080BDE8           POP      {R4,R5,PC}       ;; return
    134          }
    135          
    136          extern const char DEFAULT_PARAM[128];
    137          
    138          static void UpdateCSMname(void);
    139          static int ParseInputFilename(const char *fn);
    140          
    141          volatile int TERMINATED=0;
    142          volatile int STOPPED=0;
    143          
    144          int ENABLE_REDRAW=0;
    145          
    146          extern void kill_data(void *p, void (*func_p)(void *));
    147          

   \                                 In segment DATA_C, align 4, align-sorted
    148          const int minus11=-11;
   \                     minus11:
   \   00000000   F5FFFFFF           DC32 -11
    149          

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "$bookmarks\\\\">`:
   \   00000000   24626F6F6B6D       DC8 "$bookmarks\\"
   \              61726B735C00
   \   0000000C   302F6A617661       DC8 "0/javascript"
   \              736372697074
   \              00          
   \   00000019   000000             DC8 0, 0, 0
    150          const char ipc_my_name[32]=IPC_BALLETMINI_NAME;
   \                     ipc_my_name:
   \   0000001C   42616C6C6574       DC8 "BalletMini"
   \              4D696E6900  
   \   00000027   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              000000000000
   \              000000      
    151          const char sieget_ipc_name[32] = SIEGET_IPC_NAME;
   \                     sieget_ipc_name:
   \   0000003C   536965476574       DC8 "SieGetD"
   \              4400        
   \   00000044   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000054   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0
   \              0000        
    152          
    153          IPC_REQ sieget_ipc;
    154          
    155          int view_url_mode;
    156          char *view_url;
    157          char *goto_url;
    158          char *from_url;
    159          char *goto_params;
    160          

   \                                 In segment DATA_C, align 4, align-sorted
    161          static const char percent_t[]="%t";
   \                     percent_t:
   \   00000000   257400             DC8 "%t"
   \   00000003   00                 DC8 0
   \   00000004   2575422F2575       DC8 "%uB/%uB"
   \              4200        
    162          
    163          WSHDR *ws_console;
    164          
    165          int maincsm_id;
    166          
    167          char OMSCACHE_PATH[256];
    168          char AUTHDATA_FILE[256];
    169          char BOOKMARKS_PATH[256];
    170          char SEARCH_PATH[256];
    171          
    172          char BALLET_PATH[256];
    173          char BALLET_EXE[256];
    174          

   \                                 In segment CODE, align 4, keep-with-next
    175          static void StartGetFile(int dummy, char *fncache)
    176          {
   \                     StartGetFile:
   \   00000000   F04F2DE9           PUSH     {R4-R11,LR}
    177            IPC_REQ *sipc;
    178            if (view_url_mode==MODE_FILE)
   \   00000004   ........           LDR      R5,??DataTable3  ;; lgpData
   \   00000008   ........           LDR      R4,??DataTable4  ;; `?<Constant "$bookmarks\\\\">`
   \   0000000C   41DF4DE2           SUB      SP,SP,#+260
   \   00000010   40DE4DE2           SUB      SP,SP,#+1024
   \   00000014   140195E5           LDR      R0,[R5, #+276]
   \   00000018   0160A0E1           MOV      R6,R1
   \   0000001C   000050E3           CMP      R0,#+0
   \   00000020   5800001A           BNE      ??StartGetFile_0
    179            {
    180              unsigned int err;
    181              char buf[1024];
    182              int i;
    183              int f=fopen(view_url,A_ReadOnly+A_BIN,P_READ,&err);
   \   00000024   180195E5           LDR      R0,[R5, #+280]
   \   00000028   0D30A0E1           MOV      R3,SP
   \   0000002C   8020A0E3           MOV      R2,#+128
   \   00000030   801CA0E3           MOV      R1,#+32768
   \   00000034   0A0000EF           SWI      +10
   \   00000038   0070A0E1           MOV      R7,R0
    184              if (f!=-1)
   \   0000003C   0080E0E3           MVN      R8,#+0
   \   00000040   080057E1           CMP      R7,R8
   \   00000044   4500000A           BEQ      ??StartGetFile_1
    185              {
    186                int fc=-1;
   \   00000048   0890A0E1           MOV      R9,R8
    187                if (fncache)
   \   0000004C   000056E3           CMP      R6,#+0
   \   00000050   0700000A           BEQ      ??StartGetFile_2
    188                {
    189                  fc=fopen(fncache,A_ReadWrite+A_Create+A_Truncate+A_BIN,P_READ+P_WRITE,&err);
   \   00000054   0D30A0E1           MOV      R3,SP
   \   00000058   602FA0E3           MOV      R2,#+384
   \   0000005C   0210A0E3           MOV      R1,#+2
   \   00000060   831C81E3           ORR      R1,R1,#0x8300
   \   00000064   0600A0E1           MOV      R0,R6
   \   00000068   0A0000EF           SWI      +10
   \   0000006C   0090A0E1           MOV      R9,R0
   \   00000070   000000EA           B        ??StartGetFile_3
    190                }
    191                else
    192                {
    193                  UpPageStack(); 
   \                     ??StartGetFile_2:
   \   00000074   ........           _BLF     UpPageStack,??UpPageStack??rA
    194                }
    195                while((i=fread(f,buf,sizeof(buf),&err))>0)
   \                     ??StartGetFile_3:
   \   00000078   0D30A0E1           MOV      R3,SP
   \   0000007C   402EA0E3           MOV      R2,#+1024
   \   00000080   04108DE2           ADD      R1,SP,#+4
   \   00000084   0700A0E1           MOV      R0,R7
   \   00000088   0B0000EF           SWI      +11
   \   0000008C   00A0A0E1           MOV      R10,R0
   \   00000090   01005AE3           CMP      R10,#+1
   \   00000094   280000BA           BLT      ??StartGetFile_4
    196                {
    197                  if (fc!=-1)
   \   00000098   080059E1           CMP      R9,R8
   \   0000009C   0400000A           BEQ      ??StartGetFile_5
    198                  {
    199                    fwrite(fc,buf,i,&err);
   \   000000A0   0D30A0E1           MOV      R3,SP
   \   000000A4   0A20A0E1           MOV      R2,R10
   \   000000A8   04108DE2           ADD      R1,SP,#+4
   \   000000AC   0900A0E1           MOV      R0,R9
   \   000000B0   0C0000EF           SWI      +12
    200                  }
    201                  LockSched();
   \                     ??StartGetFile_5:
   \   000000B4   460100EF           SWI      +326
    202                  if ((!TERMINATED)&&(!STOPPED))
   \   000000B8   0C0195E5           LDR      R0,[R5, #+268]
   \   000000BC   000050E3           CMP      R0,#+0
   \   000000C0   10019505           LDREQ    R0,[R5, #+272]
   \   000000C4   00005003           CMPEQ    R0,#+0
   \   000000C8   1500001A           BNE      ??StartGetFile_6
    203                  {
    204                    sipc=malloc(sizeof(IPC_REQ));
   \   000000CC   0C00A0E3           MOV      R0,#+12
   \   000000D0   140000EF           SWI      +20
   \   000000D4   00B0A0E1           MOV      R11,R0
    205                    sipc->name_to=ipc_my_name;
   \   000000D8   1C0084E2           ADD      R0,R4,#+28
   \   000000DC   00008BE5           STR      R0,[R11, #+0]
    206                    sipc->name_from=ipc_my_name;
   \   000000E0   04008BE5           STR      R0,[R11, #+4]
    207                    sipc->data=malloc(i+4);
   \   000000E4   04008AE2           ADD      R0,R10,#+4
   \   000000E8   140000EF           SWI      +20
   \   000000EC   08008BE5           STR      R0,[R11, #+8]
    208                    *((int *)(sipc->data))=i;
   \   000000F0   00A080E5           STR      R10,[R0, #+0]
    209                    memcpy(((char *)(sipc->data))+4,buf,i);
   \   000000F4   08009BE5           LDR      R0,[R11, #+8]
   \   000000F8   0A20A0E1           MOV      R2,R10
   \   000000FC   04108DE2           ADD      R1,SP,#+4
   \   00000100   040080E2           ADD      R0,R0,#+4
   \   00000104   1E0100EF           SWI      +286
    210                    GBS_SendMessage(MMI_CEPID,MSG_IPC,IPC_DATA_ARRIVED,sipc);
   \   00000108   0B30A0E1           MOV      R3,R11
   \   0000010C   0120A0E3           MOV      R2,#+1
   \   00000110   B010A0E3           MOV      R1,#+176
   \   00000114   DE1C81E3           ORR      R1,R1,#0xDE00
   \   00000118   0900A0E3           MOV      R0,#+9
   \   0000011C   420C80E3           ORR      R0,R0,#0x4200
   \   00000120   000100EF           SWI      +256
    211                  }
    212                  UnlockSched();
   \                     ??StartGetFile_6:
   \   00000124   470100EF           SWI      +327
    213                  if (TERMINATED||STOPPED) break;
   \   00000128   0C0195E5           LDR      R0,[R5, #+268]
   \   0000012C   000050E3           CMP      R0,#+0
   \   00000130   10019505           LDREQ    R0,[R5, #+272]
   \   00000134   00005003           CMPEQ    R0,#+0
   \   00000138   CEFFFF0A           BEQ      ??StartGetFile_3
    214                }
    215                if (fc!=-1) fclose(fc,&err);
   \                     ??StartGetFile_4:
   \   0000013C   080059E1           CMP      R9,R8
   \   00000140   0200000A           BEQ      ??StartGetFile_7
   \   00000144   0D10A0E1           MOV      R1,SP
   \   00000148   0900A0E1           MOV      R0,R9
   \   0000014C   0D0000EF           SWI      +13
    216                fclose(f,&err);
   \                     ??StartGetFile_7:
   \   00000150   0D10A0E1           MOV      R1,SP
   \   00000154   0700A0E1           MOV      R0,R7
   \   00000158   0D0000EF           SWI      +13
   \   0000015C   040000EA           B        ??StartGetFile_8
    217              }
    218              else
    219              {
    220                LockSched();
   \                     ??StartGetFile_1:
   \   00000160   460100EF           SWI      +326
    221                ShowMSG(1,(int)lgpData[LGP_CantOpenFile]);
   \   00000164   001095E5           LDR      R1,[R5, #+0]
   \   00000168   0100A0E3           MOV      R0,#+1
   \   0000016C   480100EF           SWI      +328
    222                UnlockSched();
   \   00000170   470100EF           SWI      +327
    223              }
    224              mfree(fncache);
   \                     ??StartGetFile_8:
   \   00000174   0600A0E1           MOV      R0,R6
   \   00000178   150000EF           SWI      +21
    225              STOPPED=1;
   \   0000017C   0100A0E3           MOV      R0,#+1
   \   00000180   100185E5           STR      R0,[R5, #+272]
    226              SmartREDRAW();
   \   00000184   ........           _BLF     SmartREDRAW,??SmartREDRAW??rA
    227            }
    228            if (view_url_mode==MODE_URL)
   \                     ??StartGetFile_0:
   \   00000188   140195E5           LDR      R0,[R5, #+276]
   \   0000018C   010050E3           CMP      R0,#+1
   \   00000190   0200001A           BNE      ??StartGetFile_9
    229            {
    230              StartINET(view_url,fncache);
   \   00000194   180195E5           LDR      R0,[R5, #+280]
   \   00000198   0610A0E1           MOV      R1,R6
   \   0000019C   ........           _BLF     StartINET,??StartINET??rA
    231            }
    232            if (view_url_mode==MODE_BOOKMARKS)
   \                     ??StartGetFile_9:
   \   000001A0   140195E5           LDR      R0,[R5, #+276]
   \   000001A4   020050E3           CMP      R0,#+2
   \   000001A8   0D00001A           BNE      ??StartGetFile_10
    233            {
    234              MAIN_CSM *main_csm=(MAIN_CSM *)FindCSMbyID(maincsm_id);
   \   000001AC   2C0195E5           LDR      R0,[R5, #+300]
   \   000001B0   080100EF           SWI      +264
   \   000001B4   0060B0E1           MOVS     R6,R0
    235              if (main_csm)
   \   000001B8   0900000A           BEQ      ??StartGetFile_10
    236              {
    237                STOPPED=1;
   \   000001BC   0100A0E3           MOV      R0,#+1
   \   000001C0   100185E5           STR      R0,[R5, #+272]
    238                char fname[256];
    239                getSymbolicPath(fname,"$bookmarks\\");
   \   000001C4   0410A0E1           MOV      R1,R4
   \   000001C8   04008DE2           ADD      R0,SP,#+4
   \   000001CC   400E80E2           ADD      R0,R0,#+1024
   \   000001D0   ........           _BLF     getSymbolicPath,??getSymbolicPath??rA
    240                main_csm->sel_bmk=CreateBookmarksMenu(fname);
   \   000001D4   04008DE2           ADD      R0,SP,#+4
   \   000001D8   400E80E2           ADD      R0,R0,#+1024
   \   000001DC   ........           _BLF     CreateBookmarksMenu,??CreateBookmarksMenu??rA
   \   000001E0   300086E5           STR      R0,[R6, #+48]
    241              }
    242            }
    243            if (view_url_mode==MODE_NONE)
    244            {
    245          //    MAIN_CSM *main_csm=(MAIN_CSM *)FindCSMbyID(maincsm_id);
    246          //    if (main_csm)
    247          //    {
    248          //      VIEW_GUI *p=FindGUIbyId(main_csm->view_id,NULL);
    249          //      VIEWDATA *vd=p->vd;
    250          //      *((unsigned short *)(&(vd->current_tag_d)))=(unsigned short)0x813A;
    251          //      *((unsigned int *)(&(vd->current_tag_s)))=(unsigned int)0x0D15F000;
    252          //      AddNewStyle(vd);
    253          //      AddTextItem(vd, "Begin OMS Hacking . . .\nNOW\n!!!\n\n",33);
    254          //      AddBeginRef(vd);
    255          //      RawInsertChar(vd,AddPictureItemFile(vd, "0:\\ZBin\\NatICQ\\smiles\\1405.png"));
    256          //      AddEndRef(vd);
    257          //      RawInsertChar(vd,AddPictureItemFile(vd, "0:\\ZBin\\NatICQ\\smiles\\1406.png"));
    258          //      AddBeginRef(vd);
    259          //      AddEndRef(vd);
    260          //      RawInsertChar(vd,AddPictureItemFile(vd, "0:\\ZBin\\NatICQ\\smiles\\1407.png"));
    261          //      AddBeginRef(vd);
    262          //      AddEndRef(vd);
    263          //      RawInsertChar(vd,AddPictureItemFile(vd, "0:\\ZBin\\NatICQ\\smiles\\1408.png"));
    264          //      AddBeginRef(vd);
    265          //      AddEndRef(vd);
    266          //      RawInsertChar(vd,AddPictureItemFile(vd, "0:\\ZBin\\NatICQ\\smiles\\1409.png"));
    267          //      RawInsertChar(vd,AddPictureItemFile(vd, "0:\\ZBin\\NatICQ\\smiles\\1410.png"));
    268          //      RawInsertChar(vd,AddPictureItemFile(vd, "0:\\ZBin\\NatICQ\\smiles\\1411.png"));
    269          //      AddBrItem(vd);
    270          //      AddPageEndItem(vd);
    271          //      SmartREDRAW();
    272          //    }
    273            }
    274          }
   \                     ??StartGetFile_10:
   \   000001E4   41DF8DE2           ADD      SP,SP,#+260
   \   000001E8   40DE8DE2           ADD      SP,SP,#+1024
   \   000001EC   F08FBDE8           POP      {R4-R11,PC}      ;; return
    275          

   \                                 In segment CODE, align 4, keep-with-next
    276          char *collectItemsParams(VIEWDATA *vd, REFCACHE *rf)
    277          {
   \                     collectItemsParams:
   \   00000000   F24F2DE9           PUSH     {R1,R4-R11,LR}
   \   00000004   04D04DE2           SUB      SP,SP,#+4
   \   00000008   0040A0E1           MOV      R4,R0
    278            unsigned int pos=0;
    279            for (int i=0;i<vd->ref_cache_size;i++)
   \   0000000C   C80094E5           LDR      R0,[R4, #+200]
   \   00000010   0050A0E3           MOV      R5,#+0
   \   00000014   0060A0E3           MOV      R6,#+0
   \   00000018   010050E3           CMP      R0,#+1
   \   0000001C   220000AA           BGE      ??collectItemsParams_2
    280            {
    281              REFCACHE *prf=vd->ref_cache+i;
    282              switch (prf->tag)
    283              {
    284              case 's':
    285                {
    286                  if (prf->multiselect)
    287                  {
    288                    int p=_rshort2(vd->oms+prf->id);
    289                    int start=prf->id+2+p+3+1;
    290                    for (int i=0;i<prf->size;i++)
    291                    {
    292                      if (((char*)prf->data)[i])
    293                      {
    294                        // write
    295                        p=_rshort2(vd->oms+start);
    296                        start=start+2+p;
    297                        pos+=_rshort2(vd->oms+prf->id)+_rshort2(vd->oms+start)+2;
    298                        p=_rshort2(vd->oms+start);
    299                        start=start+2+p+2;
    300                      }
    301                      else
    302                      {
    303                        // skip
    304                        p=_rshort2(vd->oms+start);
    305                        start=start+2+p;
    306                        p=_rshort2(vd->oms+start);
    307                        start=start+2+p+2;
    308                      }
    309                    }
    310                  }
    311                  else
    312                  {
    313                    pos+=_rshort2(vd->oms+prf->id)+1+_rshort2(vd->oms+prf->id2)+1;
    314                  }
    315                }
    316                break;
    317              case 'c':
    318              case 'r':
    319                if (vd->rawtext[prf->begin+1]==vd->WCHAR_RADIO_ON||vd->rawtext[prf->begin+1]==vd->WCHAR_BUTTON_ON)
    320                  pos+=_rshort2(vd->oms+prf->id)+1+_rshort2(vd->oms+prf->value)+1;
    321                break;
    322              case 'i':
    323              case 'u':
    324                {
    325                  if (prf!=rf) break;
    326                  pos+=_rshort2(vd->oms+prf->id)+2;
    327                  char *c=extract_omstr(vd,prf->value);
    328                  WSHDR *ws=AllocWS(256);
    329                  oms2ws(ws,c,strlen(c));
    330                  mfree(c);
    331                  char *b=c=(char *)malloc(ws->wsbody[0]+3);
    332                  for (int i=0; i<ws->wsbody[0]; i++) *c++=char16to8(ws->wsbody[i+1]);
    333                  *c=0;
    334                  b=ToWeb(b,1);
    335                  pos+=strlen(b);
    336                  mfree(b);
    337                  FreeWS(ws);
    338                }
    339                break;
    340              case 'p':
    341              case 'x':
    342                {
    343                  pos+=_rshort2(vd->oms+prf->id)+2;
    344                  char *c;
    345                  char *b=c=(char *)malloc(((WSHDR *)prf->data)->wsbody[0]+3);
    346                  for (int i=0; i<((WSHDR *)prf->data)->wsbody[0]; i++) *c++=char16to8(((WSHDR *)prf->data)->wsbody[i+1]);
    347                  *c=0;
    348                  b=ToWeb(b,1);
    349                  pos+=strlen(b);
    350                  mfree(b);
    351                }
    352                break;
    353              }
    354            }
    355          //  DEBUGS("pos:%i\r\n",pos);
    356            char *s=malloc(pos+1);
   \                     ??collectItemsParams_3:
   \   00000020   010085E2           ADD      R0,R5,#+1
   \   00000024   140000EF           SWI      +20
   \   00000028   0050A0E1           MOV      R5,R0
    357            pos=0;
    358            for (int i=0;i<vd->ref_cache_size;i++)
   \   0000002C   0010A0E3           MOV      R1,#+0
   \   00000030   00108DE5           STR      R1,[SP, #+0]
   \   00000034   C80094E5           LDR      R0,[R4, #+200]
   \   00000038   00A0A0E3           MOV      R10,#+0
   \   0000003C   010050E3           CMP      R0,#+1
   \   00000040   EA0000AA           BGE      ??collectItemsParams_4
    359            {
    360              REFCACHE *prf=vd->ref_cache+i;
    361              switch (prf->tag)
    362              {
    363              case 's':
    364                {
    365                  if (prf->multiselect)
    366                  {
    367                    int p=_rshort2(vd->oms+prf->id);
    368                    int start=prf->id+2+p+3+1;
    369                    for (int i=0;i<prf->size;i++)
    370                    {
    371                      if (((char*)prf->data)[i])
    372                      {
    373                        // write
    374                        p=_rshort2(vd->oms+start);
    375                        start=start+2+p;
    376                        s[pos]='&';
    377                        pos++;
    378                        char *c=extract_omstr(vd,prf->id);
    379                        memcpy(s+pos,c,strlen(c));
    380                        pos+=strlen(c);
    381                        mfree(c);
    382                        s[pos]='=';
    383                        pos++;
    384                        c=extract_omstr(vd,start);
    385                        memcpy(s+pos,c,strlen(c));
    386                        pos+=strlen(c);
    387                        mfree(c);
    388                        p=_rshort2(vd->oms+start);
    389                        start=start+2+p+2;
    390                      }
    391                      else
    392                      {
    393                        // skip
    394                        p=_rshort2(vd->oms+start);
    395                        start=start+2+p;
    396                        p=_rshort2(vd->oms+start);
    397                        start=start+2+p+2;
    398                      }
    399                    }
    400                  }
    401                  else
    402                  {
    403                    s[pos]='&';
    404                    pos++;
    405                    char *c=extract_omstr(vd,prf->id);
    406                    memcpy(s+pos,c,strlen(c));
    407                    pos+=strlen(c);
    408                    mfree(c);
    409                    s[pos]='=';
    410                    pos++;
    411                    c=extract_omstr(vd,prf->id2);
    412                    memcpy(s+pos,c,strlen(c));
    413                    pos+=strlen(c);
    414                    mfree(c);
    415                  }
    416                }
    417                break;
    418              case 'c':
    419              case 'r':
    420                {
    421                  if (vd->rawtext[prf->begin+1]==vd->WCHAR_RADIO_ON||vd->rawtext[prf->begin+1]==vd->WCHAR_BUTTON_ON)
    422                  {
    423                    s[pos]='&';
    424                    pos++;
    425                    char *c=extract_omstr(vd,prf->id);
    426                    memcpy(s+pos,c,strlen(c));
    427                    pos+=strlen(c);
    428                    mfree(c);
    429                    s[pos]='=';
    430                    pos++;
    431                    c=extract_omstr(vd,prf->value);
    432                    memcpy(s+pos,c,strlen(c));
    433                    pos+=strlen(c);
    434                    mfree(c);
    435                  }
    436                }
    437                break;
    438              case 'i':
    439              case 'u':
    440                {
    441                  if (prf!=rf) break;
    442                  s[pos]='&';
    443                  pos++;
    444                  char *c=extract_omstr(vd,prf->id);
    445                  memcpy(s+pos,c,strlen(c));
    446                  pos+=strlen(c);
    447                  mfree(c);
    448                  s[pos]='=';
    449                  pos++;
    450                  c=extract_omstr(vd,prf->value);
    451                  WSHDR *ws=AllocWS(256);
    452                  oms2ws(ws,c,strlen(c));
    453                  mfree(c);
    454                  char *b=c=(char *)malloc(ws->wsbody[0]+3);
    455                  for (int i=0; i<ws->wsbody[0]; i++) *c++=char16to8(ws->wsbody[i+1]);
    456                  *c=0;
    457                  b=ToWeb(b,1);
    458                  memcpy(s+pos,b,strlen(b));
    459                  pos+=strlen(b);
    460                  mfree(b);
    461                  FreeWS(ws);
    462                }
    463                break;
    464              case 'p':
    465              case 'x':
    466                {
    467                  s[pos]='&';
    468                  pos++;
    469                  char *c=extract_omstr(vd,prf->id);
    470                  memcpy(s+pos,c,strlen(c));
    471                  pos+=strlen(c);
    472                  mfree(c);
    473                  s[pos]='=';
    474                  pos++;
    475                  char *b=c=(char *)malloc(((WSHDR *)prf->data)->wsbody[0]+3);
    476                  for (int i=0; i<((WSHDR *)prf->data)->wsbody[0]; i++) *c++=char16to8(((WSHDR *)prf->data)->wsbody[i+1]);
    477                  *c=0;
    478                  b=ToWeb(b,1);
    479                  memcpy(s+pos,b,strlen(b));
    480                  pos+=strlen(b);
    481                  mfree(b);
    482                }
    483                break;
    484              }
    485            }
    486          //  DEBUGS("pos:%i\r\n",pos);
    487            s[pos]=0;
   \                     ??collectItemsParams_5:
   \   00000044   0000A0E3           MOV      R0,#+0
   \   00000048   0500CAE7           STRB     R0,[R10, +R5]
    488          //  unsigned int ul;
    489          //  int f;
    490          //  if ((f=fopen("0:\\zbin\\balletmini\\dump.txt",A_ReadWrite+A_Create+A_Truncate,P_READ+P_WRITE,&ul))!=-1)
    491          //  {
    492          //    fwrite(f,s,pos,&ul);
    493          //    fclose(f,&ul);
    494          //  }
    495            return s;
   \   0000004C   0500A0E1           MOV      R0,R5
   \   00000050   F68FBDE8           POP      {R1,R2,R4-R11,PC}  ;; return
   \                     ??collectItemsParams_6:
   \   00000054   000090E5           LDR      R0,[R0, #+0]
   \   00000058   890080E0           ADD      R0,R0,R9, LSL #+1
   \   0000005C   B200D0E1           LDRH     R0,[R0, #+2]
   \   00000060   019089E2           ADD      R9,R9,#+1
   \   00000064   ........           _BLF     char16to8,??char16to8??rA
   \   00000068   ........           STRB     R0,[R8], #+1
   \                     ??collectItemsParams_7:
   \   0000006C   180097E5           LDR      R0,[R7, #+24]
   \   00000070   001090E5           LDR      R1,[R0, #+0]
   \   00000074   B010D1E1           LDRH     R1,[R1, #+0]
   \   00000078   010059E1           CMP      R9,R1
   \   0000007C   F4FFFFBA           BLT      ??collectItemsParams_6
   \                     ??collectItemsParams_8:
   \   00000080   0000A0E3           MOV      R0,#+0
   \   00000084   0000C8E5           STRB     R0,[R8, #+0]
   \   00000088   0110A0E3           MOV      R1,#+1
   \   0000008C   0A00A0E1           MOV      R0,R10
   \   00000090   ........           _BLF     ToWeb,??ToWeb??rA
   \   00000094   0070A0E1           MOV      R7,R0
   \   00000098   1B0000EF           SWI      +27
   \   0000009C   055080E0           ADD      R5,R0,R5
   \   000000A0   0700A0E1           MOV      R0,R7
   \   000000A4   150000EF           SWI      +21
   \                     ??collectItemsParams_9:
   \   000000A8   016086E2           ADD      R6,R6,#+1
   \                     ??collectItemsParams_2:
   \   000000AC   C80094E5           LDR      R0,[R4, #+200]
   \   000000B0   000056E1           CMP      R6,R0
   \   000000B4   D9FFFFAA           BGE      ??collectItemsParams_3
   \   000000B8   C41094E5           LDR      R1,[R4, #+196]
   \   000000BC   2400A0E3           MOV      R0,#+36
   \   000000C0   901627E0           MLA      R7,R0,R6,R1
   \   000000C4   080097E5           LDR      R0,[R7, #+8]
   \   000000C8   630040E2           SUB      R0,R0,#+99
   \   000000CC   150050E3           CMP      R0,#+21
   \   000000D0   F4FFFF8A           BHI      ??collectItemsParams_9
   \   000000D4   021F8FE2           ADR      R1,??collectItemsParams_0
   \   000000D8   8000A0E1           MOV      R0,R0, LSL #+1
   \   000000DC   F01091E1           LDRSH    R1,[R1, R0]
   \   000000E0   01F18FE0           ADD      PC,PC,R1, LSL #+2
   \                     ??collectItemsParams_0:
   \   000000E4   4400F0FFF0FF       DC16     +68,+65520,+65520,+65520
   \              F0FF        
   \   000000EC   F0FFF0FF5600       DC16     +65520,+65520,+86,+65520
   \              F0FF        
   \   000000F4   F0FFF0FFF0FF       DC16     +65520,+65520,+65520,+65520
   \              F0FF        
   \   000000FC   F0FF9000F0FF       DC16     +65520,+144,+65520,+68
   \              4400        
   \   00000104   0A00F0FF5600       DC16     +10,+65520,+86,+65520
   \              F0FF        
   \   0000010C   F0FF9000           DC16     +65520,+144
   \                     ??collectItemsParams_10:
   \   00000110   0C0097E5           LDR      R0,[R7, #+12]
   \   00000114   3C1094E5           LDR      R1,[R4, #+60]
   \   00000118   010080E0           ADD      R0,R0,R1
   \   0000011C   2010D7E5           LDRB     R1,[R7, #+32]
   \   00000120   020011E3           TST      R1,#0x2
   \   00000124   2900000A           BEQ      ??collectItemsParams_11
   \   00000128   ........           _BLF     _rshort2,??_rshort2??rA
   \   0000012C   0C1097E5           LDR      R1,[R7, #+12]
   \   00000130   0080A0E3           MOV      R8,#+0
   \   00000134   000081E0           ADD      R0,R1,R0
   \   00000138   069080E2           ADD      R9,R0,#+6
   \   0000013C   1C0097E5           LDR      R0,[R7, #+28]
   \   00000140   010050E3           CMP      R0,#+1
   \   00000144   090000AA           BGE      ??collectItemsParams_12
   \   00000148   D6FFFFEA           B        ??collectItemsParams_9
   \                     ??collectItemsParams_13:
   \   0000014C   ........           _BLF     _rshort2,??_rshort2??rA
   \   00000150   020080E2           ADD      R0,R0,#+2
   \   00000154   099080E0           ADD      R9,R0,R9
   \                     ??collectItemsParams_14:
   \   00000158   3C0094E5           LDR      R0,[R4, #+60]
   \   0000015C   018088E2           ADD      R8,R8,#+1
   \   00000160   000089E0           ADD      R0,R9,R0
   \   00000164   ........           _BLF     _rshort2,??_rshort2??rA
   \   00000168   040080E2           ADD      R0,R0,#+4
   \   0000016C   099080E0           ADD      R9,R0,R9
   \                     ??collectItemsParams_12:
   \   00000170   1C0097E5           LDR      R0,[R7, #+28]
   \   00000174   000058E1           CMP      R8,R0
   \   00000178   CAFFFFAA           BGE      ??collectItemsParams_9
   \   0000017C   181097E5           LDR      R1,[R7, #+24]
   \   00000180   3C0094E5           LDR      R0,[R4, #+60]
   \   00000184   0110D8E7           LDRB     R1,[R8, +R1]
   \   00000188   000089E0           ADD      R0,R9,R0
   \   0000018C   000051E3           CMP      R1,#+0
   \   00000190   EDFFFF0A           BEQ      ??collectItemsParams_13
   \   00000194   ........           _BLF     _rshort2,??_rshort2??rA
   \   00000198   3C1094E5           LDR      R1,[R4, #+60]
   \   0000019C   020080E2           ADD      R0,R0,#+2
   \   000001A0   099080E0           ADD      R9,R0,R9
   \   000001A4   0C0097E5           LDR      R0,[R7, #+12]
   \   000001A8   010080E0           ADD      R0,R0,R1
   \   000001AC   ........           _BLF     _rshort2,??_rshort2??rA
   \   000001B0   00A0A0E1           MOV      R10,R0
   \   000001B4   3C0094E5           LDR      R0,[R4, #+60]
   \   000001B8   000089E0           ADD      R0,R9,R0
   \   000001BC   ........           _BLF     _rshort2,??_rshort2??rA
   \   000001C0   00008AE0           ADD      R0,R10,R0
   \   000001C4   020080E2           ADD      R0,R0,#+2
   \   000001C8   055080E0           ADD      R5,R0,R5
   \   000001CC   E1FFFFEA           B        ??collectItemsParams_14
   \                     ??collectItemsParams_11:
   \   000001D0   ........           _BLF     _rshort2,??_rshort2??rA
   \   000001D4   0080A0E1           MOV      R8,R0
   \   000001D8   140097E5           LDR      R0,[R7, #+20]
   \                     ??collectItemsParams_15:
   \   000001DC   3C1094E5           LDR      R1,[R4, #+60]
   \   000001E0   010080E0           ADD      R0,R0,R1
   \   000001E4   ........           _BLF     _rshort2,??_rshort2??rA
   \   000001E8   000088E0           ADD      R0,R8,R0
   \   000001EC   020080E2           ADD      R0,R0,#+2
   \   000001F0   055080E0           ADD      R5,R0,R5
   \   000001F4   ABFFFFEA           B        ??collectItemsParams_9
   \                     ??collectItemsParams_16:
   \   000001F8   000097E5           LDR      R0,[R7, #+0]
   \   000001FC   081094E5           LDR      R1,[R4, #+8]
   \   00000200   EC2094E5           LDR      R2,[R4, #+236]
   \   00000204   800081E0           ADD      R0,R1,R0, LSL #+1
   \   00000208   B210D0E1           LDRH     R1,[R0, #+2]
   \   0000020C   020051E1           CMP      R1,R2
   \   00000210   0300000A           BEQ      ??collectItemsParams_17
   \   00000214   0100A0E1           MOV      R0,R1
   \   00000218   E41094E5           LDR      R1,[R4, #+228]
   \   0000021C   010050E1           CMP      R0,R1
   \   00000220   A0FFFF1A           BNE      ??collectItemsParams_9
   \                     ??collectItemsParams_17:
   \   00000224   0C0097E5           LDR      R0,[R7, #+12]
   \   00000228   3C1094E5           LDR      R1,[R4, #+60]
   \   0000022C   010080E0           ADD      R0,R0,R1
   \   00000230   ........           _BLF     _rshort2,??_rshort2??rA
   \   00000234   0080A0E1           MOV      R8,R0
   \   00000238   100097E5           LDR      R0,[R7, #+16]
   \   0000023C   E6FFFFEA           B        ??collectItemsParams_15
   \                     ??collectItemsParams_18:
   \   00000240   04009DE5           LDR      R0,[SP, #+4]
   \   00000244   000057E1           CMP      R7,R0
   \   00000248   96FFFF1A           BNE      ??collectItemsParams_9
   \   0000024C   0C0097E5           LDR      R0,[R7, #+12]
   \   00000250   3C1094E5           LDR      R1,[R4, #+60]
   \   00000254   00A0A0E3           MOV      R10,#+0
   \   00000258   010080E0           ADD      R0,R0,R1
   \   0000025C   ........           _BLF     _rshort2,??_rshort2??rA
   \   00000260   101097E5           LDR      R1,[R7, #+16]
   \   00000264   020080E2           ADD      R0,R0,#+2
   \   00000268   055080E0           ADD      R5,R0,R5
   \   0000026C   0400A0E1           MOV      R0,R4
   \   00000270   ........           _BLF     extract_omstr,??extract_omstr??rA
   \   00000274   0080A0E1           MOV      R8,R0
   \   00000278   400FA0E3           MOV      R0,#+256
   \   0000027C   250100EF           SWI      +293
   \   00000280   0070A0E1           MOV      R7,R0
   \   00000284   0800A0E1           MOV      R0,R8
   \   00000288   1B0000EF           SWI      +27
   \   0000028C   0020A0E1           MOV      R2,R0
   \   00000290   0810A0E1           MOV      R1,R8
   \   00000294   0700A0E1           MOV      R0,R7
   \   00000298   ........           _BLF     oms2ws,??oms2ws??rA
   \   0000029C   0800A0E1           MOV      R0,R8
   \   000002A0   150000EF           SWI      +21
   \   000002A4   000097E5           LDR      R0,[R7, #+0]
   \   000002A8   B000D0E1           LDRH     R0,[R0, #+0]
   \   000002AC   030080E2           ADD      R0,R0,#+3
   \   000002B0   140000EF           SWI      +20
   \   000002B4   0080A0E1           MOV      R8,R0
   \   000002B8   000097E5           LDR      R0,[R7, #+0]
   \   000002BC   0890A0E1           MOV      R9,R8
   \   000002C0   B000D0E1           LDRH     R0,[R0, #+0]
   \   000002C4   000050E3           CMP      R0,#+0
   \   000002C8   0500001A           BNE      ??collectItemsParams_19
   \   000002CC   080000EA           B        ??collectItemsParams_20
   \                     ??collectItemsParams_21:
   \   000002D0   8A0080E0           ADD      R0,R0,R10, LSL #+1
   \   000002D4   B200D0E1           LDRH     R0,[R0, #+2]
   \   000002D8   01A08AE2           ADD      R10,R10,#+1
   \   000002DC   ........           _BLF     char16to8,??char16to8??rA
   \   000002E0   ........           STRB     R0,[R8], #+1
   \                     ??collectItemsParams_19:
   \   000002E4   000097E5           LDR      R0,[R7, #+0]
   \   000002E8   B010D0E1           LDRH     R1,[R0, #+0]
   \   000002EC   01005AE1           CMP      R10,R1
   \   000002F0   F6FFFFBA           BLT      ??collectItemsParams_21
   \                     ??collectItemsParams_20:
   \   000002F4   0000A0E3           MOV      R0,#+0
   \   000002F8   0000C8E5           STRB     R0,[R8, #+0]
   \   000002FC   0110A0E3           MOV      R1,#+1
   \   00000300   0900A0E1           MOV      R0,R9
   \   00000304   ........           _BLF     ToWeb,??ToWeb??rA
   \   00000308   0080A0E1           MOV      R8,R0
   \   0000030C   1B0000EF           SWI      +27
   \   00000310   055080E0           ADD      R5,R0,R5
   \   00000314   0800A0E1           MOV      R0,R8
   \   00000318   150000EF           SWI      +21
   \   0000031C   0700A0E1           MOV      R0,R7
   \   00000320   290100EF           SWI      +297
   \   00000324   5FFFFFEA           B        ??collectItemsParams_9
   \                     ??collectItemsParams_22:
   \   00000328   0C0097E5           LDR      R0,[R7, #+12]
   \   0000032C   3C1094E5           LDR      R1,[R4, #+60]
   \   00000330   0090A0E3           MOV      R9,#+0
   \   00000334   010080E0           ADD      R0,R0,R1
   \   00000338   ........           _BLF     _rshort2,??_rshort2??rA
   \   0000033C   020080E2           ADD      R0,R0,#+2
   \   00000340   055080E0           ADD      R5,R0,R5
   \   00000344   180097E5           LDR      R0,[R7, #+24]
   \   00000348   000090E5           LDR      R0,[R0, #+0]
   \   0000034C   B000D0E1           LDRH     R0,[R0, #+0]
   \   00000350   030080E2           ADD      R0,R0,#+3
   \   00000354   140000EF           SWI      +20
   \   00000358   0080A0E1           MOV      R8,R0
   \   0000035C   180097E5           LDR      R0,[R7, #+24]
   \   00000360   08A0A0E1           MOV      R10,R8
   \   00000364   000090E5           LDR      R0,[R0, #+0]
   \   00000368   B000D0E1           LDRH     R0,[R0, #+0]
   \   0000036C   000050E3           CMP      R0,#+0
   \   00000370   3DFFFF1A           BNE      ??collectItemsParams_7
   \   00000374   41FFFFEA           B        ??collectItemsParams_8
   \                     ??collectItemsParams_23:
   \   00000378   000090E5           LDR      R0,[R0, #+0]
   \   0000037C   890080E0           ADD      R0,R0,R9, LSL #+1
   \   00000380   B200D0E1           LDRH     R0,[R0, #+2]
   \   00000384   019089E2           ADD      R9,R9,#+1
   \   00000388   ........           _BLF     char16to8,??char16to8??rA
   \   0000038C   ........           STRB     R0,[R8], #+1
   \                     ??collectItemsParams_24:
   \   00000390   180096E5           LDR      R0,[R6, #+24]
   \   00000394   001090E5           LDR      R1,[R0, #+0]
   \   00000398   B010D1E1           LDRH     R1,[R1, #+0]
   \   0000039C   010059E1           CMP      R9,R1
   \   000003A0   F4FFFFBA           BLT      ??collectItemsParams_23
   \                     ??collectItemsParams_25:
   \   000003A4   0000A0E3           MOV      R0,#+0
   \   000003A8   0000C8E5           STRB     R0,[R8, #+0]
   \   000003AC   0110A0E3           MOV      R1,#+1
   \   000003B0   0A00A0E1           MOV      R0,R10
   \   000003B4   ........           _BLF     ToWeb,??ToWeb??rA
   \                     ??collectItemsParams_26:
   \   000003B8   0060A0E1           MOV      R6,R0
   \   000003BC   1B0000EF           SWI      +27
   \   000003C0   0020A0E1           MOV      R2,R0
   \   000003C4   0610A0E1           MOV      R1,R6
   \   000003C8   050087E0           ADD      R0,R7,R5
   \   000003CC   1E0100EF           SWI      +286
   \   000003D0   0600A0E1           MOV      R0,R6
   \   000003D4   1B0000EF           SWI      +27
   \   000003D8   07A080E0           ADD      R10,R0,R7
   \   000003DC   0600A0E1           MOV      R0,R6
   \   000003E0   150000EF           SWI      +21
   \                     ??collectItemsParams_27:
   \   000003E4   00109DE5           LDR      R1,[SP, #+0]
   \   000003E8   011081E2           ADD      R1,R1,#+1
   \   000003EC   00108DE5           STR      R1,[SP, #+0]
   \                     ??collectItemsParams_4:
   \   000003F0   00009DE5           LDR      R0,[SP, #+0]
   \   000003F4   C81094E5           LDR      R1,[R4, #+200]
   \   000003F8   010050E1           CMP      R0,R1
   \   000003FC   10FFFFAA           BGE      ??collectItemsParams_5
   \   00000400   C42094E5           LDR      R2,[R4, #+196]
   \   00000404   2410A0E3           MOV      R1,#+36
   \   00000408   912026E0           MLA      R6,R1,R0,R2
   \   0000040C   05008AE0           ADD      R0,R10,R5
   \   00000410   081096E5           LDR      R1,[R6, #+8]
   \   00000414   01808AE2           ADD      R8,R10,#+1
   \   00000418   2670A0E3           MOV      R7,#+38
   \   0000041C   631041E2           SUB      R1,R1,#+99
   \   00000420   150051E3           CMP      R1,#+21
   \   00000424   EEFFFF8A           BHI      ??collectItemsParams_27
   \   00000428   022F8FE2           ADR      R2,??collectItemsParams_1
   \   0000042C   8110A0E1           MOV      R1,R1, LSL #+1
   \   00000430   F12092E1           LDRSH    R2,[R2, R1]
   \   00000434   02F18FE0           ADD      PC,PC,R2, LSL #+2
   \                     ??collectItemsParams_1:
   \   00000438   6600EAFFEAFF       DC16     +102,+65514,+65514,+65514
   \              EAFF        
   \   00000440   EAFFEAFF8400       DC16     +65514,+65514,+132,+65514
   \              EAFF        
   \   00000448   EAFFEAFFEAFF       DC16     +65514,+65514,+65514,+65514
   \              EAFF        
   \   00000450   EAFFD000EAFF       DC16     +65514,+208,+65514,+102
   \              6600        
   \   00000458   0A00EAFF8400       DC16     +10,+65514,+132,+65514
   \              EAFF        
   \   00000460   EAFFD000           DC16     +65514,+208
   \                     ??collectItemsParams_28:
   \   00000464   2010D6E5           LDRB     R1,[R6, #+32]
   \   00000468   020011E3           TST      R1,#0x2
   \   0000046C   4200000A           BEQ      ??collectItemsParams_29
   \   00000470   0C0096E5           LDR      R0,[R6, #+12]
   \   00000474   3C1094E5           LDR      R1,[R4, #+60]
   \   00000478   0080A0E3           MOV      R8,#+0
   \   0000047C   010080E0           ADD      R0,R0,R1
   \   00000480   ........           _BLF     _rshort2,??_rshort2??rA
   \   00000484   0C1096E5           LDR      R1,[R6, #+12]
   \   00000488   000081E0           ADD      R0,R1,R0
   \   0000048C   069080E2           ADD      R9,R0,#+6
   \   00000490   1C0096E5           LDR      R0,[R6, #+28]
   \   00000494   010050E3           CMP      R0,#+1
   \   00000498   090000AA           BGE      ??collectItemsParams_30
   \   0000049C   D0FFFFEA           B        ??collectItemsParams_27
   \                     ??collectItemsParams_31:
   \   000004A0   ........           _BLF     _rshort2,??_rshort2??rA
   \   000004A4   020080E2           ADD      R0,R0,#+2
   \   000004A8   099080E0           ADD      R9,R0,R9
   \                     ??collectItemsParams_32:
   \   000004AC   3C0094E5           LDR      R0,[R4, #+60]
   \   000004B0   018088E2           ADD      R8,R8,#+1
   \   000004B4   000089E0           ADD      R0,R9,R0
   \   000004B8   ........           _BLF     _rshort2,??_rshort2??rA
   \   000004BC   040080E2           ADD      R0,R0,#+4
   \   000004C0   099080E0           ADD      R9,R0,R9
   \                     ??collectItemsParams_30:
   \   000004C4   1C0096E5           LDR      R0,[R6, #+28]
   \   000004C8   000058E1           CMP      R8,R0
   \   000004CC   C4FFFFAA           BGE      ??collectItemsParams_27
   \   000004D0   181096E5           LDR      R1,[R6, #+24]
   \   000004D4   3C0094E5           LDR      R0,[R4, #+60]
   \   000004D8   0110D8E7           LDRB     R1,[R8, +R1]
   \   000004DC   000089E0           ADD      R0,R9,R0
   \   000004E0   000051E3           CMP      R1,#+0
   \   000004E4   EDFFFF0A           BEQ      ??collectItemsParams_31
   \   000004E8   ........           _BLF     _rshort2,??_rshort2??rA
   \   000004EC   020080E2           ADD      R0,R0,#+2
   \   000004F0   099080E0           ADD      R9,R0,R9
   \   000004F4   0570CAE7           STRB     R7,[R10, +R5]
   \   000004F8   0C1096E5           LDR      R1,[R6, #+12]
   \   000004FC   01A08AE2           ADD      R10,R10,#+1
   \   00000500   0400A0E1           MOV      R0,R4
   \   00000504   ........           _BLF     extract_omstr,??extract_omstr??rA
   \   00000508   00B0A0E1           MOV      R11,R0
   \   0000050C   1B0000EF           SWI      +27
   \   00000510   0020A0E1           MOV      R2,R0
   \   00000514   0B10A0E1           MOV      R1,R11
   \   00000518   05008AE0           ADD      R0,R10,R5
   \   0000051C   1E0100EF           SWI      +286
   \   00000520   0B00A0E1           MOV      R0,R11
   \   00000524   1B0000EF           SWI      +27
   \   00000528   0AA080E0           ADD      R10,R0,R10
   \   0000052C   0B00A0E1           MOV      R0,R11
   \   00000530   150000EF           SWI      +21
   \   00000534   3D00A0E3           MOV      R0,#+61
   \   00000538   0500CAE7           STRB     R0,[R10, +R5]
   \   0000053C   01A08AE2           ADD      R10,R10,#+1
   \   00000540   0910A0E1           MOV      R1,R9
   \   00000544   0400A0E1           MOV      R0,R4
   \   00000548   ........           _BLF     extract_omstr,??extract_omstr??rA
   \   0000054C   00B0A0E1           MOV      R11,R0
   \   00000550   1B0000EF           SWI      +27
   \   00000554   0020A0E1           MOV      R2,R0
   \   00000558   0B10A0E1           MOV      R1,R11
   \   0000055C   05008AE0           ADD      R0,R10,R5
   \   00000560   1E0100EF           SWI      +286
   \   00000564   0B00A0E1           MOV      R0,R11
   \   00000568   1B0000EF           SWI      +27
   \   0000056C   0AA080E0           ADD      R10,R0,R10
   \   00000570   0B00A0E1           MOV      R0,R11
   \   00000574   150000EF           SWI      +21
   \   00000578   CBFFFFEA           B        ??collectItemsParams_32
   \                     ??collectItemsParams_29:
   \   0000057C   0070C0E5           STRB     R7,[R0, #+0]
   \   00000580   0C1096E5           LDR      R1,[R6, #+12]
   \   00000584   0400A0E1           MOV      R0,R4
   \   00000588   ........           _BLF     extract_omstr,??extract_omstr??rA
   \   0000058C   0070A0E1           MOV      R7,R0
   \   00000590   1B0000EF           SWI      +27
   \   00000594   0020A0E1           MOV      R2,R0
   \   00000598   0710A0E1           MOV      R1,R7
   \   0000059C   050088E0           ADD      R0,R8,R5
   \   000005A0   1E0100EF           SWI      +286
   \   000005A4   0700A0E1           MOV      R0,R7
   \   000005A8   1B0000EF           SWI      +27
   \   000005AC   088080E0           ADD      R8,R0,R8
   \   000005B0   0700A0E1           MOV      R0,R7
   \   000005B4   150000EF           SWI      +21
   \   000005B8   3D00A0E3           MOV      R0,#+61
   \   000005BC   0500C8E7           STRB     R0,[R8, +R5]
   \   000005C0   141096E5           LDR      R1,[R6, #+20]
   \                     ??collectItemsParams_33:
   \   000005C4   0400A0E1           MOV      R0,R4
   \   000005C8   ........           _BLF     extract_omstr,??extract_omstr??rA
   \   000005CC   017088E2           ADD      R7,R8,#+1
   \   000005D0   78FFFFEA           B        ??collectItemsParams_26
   \                     ??collectItemsParams_34:
   \   000005D4   001096E5           LDR      R1,[R6, #+0]
   \   000005D8   082094E5           LDR      R2,[R4, #+8]
   \   000005DC   EC3094E5           LDR      R3,[R4, #+236]
   \   000005E0   811082E0           ADD      R1,R2,R1, LSL #+1
   \   000005E4   B220D1E1           LDRH     R2,[R1, #+2]
   \   000005E8   030052E1           CMP      R2,R3
   \   000005EC   0300000A           BEQ      ??collectItemsParams_35
   \   000005F0   0210A0E1           MOV      R1,R2
   \   000005F4   E42094E5           LDR      R2,[R4, #+228]
   \   000005F8   020051E1           CMP      R1,R2
   \   000005FC   78FFFF1A           BNE      ??collectItemsParams_27
   \                     ??collectItemsParams_35:
   \   00000600   0070C0E5           STRB     R7,[R0, #+0]
   \   00000604   0C1096E5           LDR      R1,[R6, #+12]
   \   00000608   0400A0E1           MOV      R0,R4
   \   0000060C   ........           _BLF     extract_omstr,??extract_omstr??rA
   \   00000610   0070A0E1           MOV      R7,R0
   \   00000614   1B0000EF           SWI      +27
   \   00000618   0020A0E1           MOV      R2,R0
   \   0000061C   0710A0E1           MOV      R1,R7
   \   00000620   050088E0           ADD      R0,R8,R5
   \   00000624   1E0100EF           SWI      +286
   \   00000628   0700A0E1           MOV      R0,R7
   \   0000062C   1B0000EF           SWI      +27
   \   00000630   088080E0           ADD      R8,R0,R8
   \   00000634   0700A0E1           MOV      R0,R7
   \   00000638   150000EF           SWI      +21
   \   0000063C   3D00A0E3           MOV      R0,#+61
   \   00000640   0500C8E7           STRB     R0,[R8, +R5]
   \   00000644   101096E5           LDR      R1,[R6, #+16]
   \   00000648   DDFFFFEA           B        ??collectItemsParams_33
   \                     ??collectItemsParams_36:
   \   0000064C   04109DE5           LDR      R1,[SP, #+4]
   \   00000650   010056E1           CMP      R6,R1
   \   00000654   62FFFF1A           BNE      ??collectItemsParams_27
   \   00000658   0070C0E5           STRB     R7,[R0, #+0]
   \   0000065C   0C1096E5           LDR      R1,[R6, #+12]
   \   00000660   0400A0E1           MOV      R0,R4
   \   00000664   ........           _BLF     extract_omstr,??extract_omstr??rA
   \   00000668   0070A0E1           MOV      R7,R0
   \   0000066C   1B0000EF           SWI      +27
   \   00000670   0020A0E1           MOV      R2,R0
   \   00000674   0710A0E1           MOV      R1,R7
   \   00000678   050088E0           ADD      R0,R8,R5
   \   0000067C   1E0100EF           SWI      +286
   \   00000680   0700A0E1           MOV      R0,R7
   \   00000684   1B0000EF           SWI      +27
   \   00000688   088080E0           ADD      R8,R0,R8
   \   0000068C   0700A0E1           MOV      R0,R7
   \   00000690   150000EF           SWI      +21
   \   00000694   3D00A0E3           MOV      R0,#+61
   \   00000698   0500C8E7           STRB     R0,[R8, +R5]
   \   0000069C   101096E5           LDR      R1,[R6, #+16]
   \   000006A0   017088E2           ADD      R7,R8,#+1
   \   000006A4   0400A0E1           MOV      R0,R4
   \   000006A8   ........           _BLF     extract_omstr,??extract_omstr??rA
   \   000006AC   0080A0E1           MOV      R8,R0
   \   000006B0   400FA0E3           MOV      R0,#+256
   \   000006B4   250100EF           SWI      +293
   \   000006B8   0060A0E1           MOV      R6,R0
   \   000006BC   0800A0E1           MOV      R0,R8
   \   000006C0   1B0000EF           SWI      +27
   \   000006C4   0020A0E1           MOV      R2,R0
   \   000006C8   0810A0E1           MOV      R1,R8
   \   000006CC   0600A0E1           MOV      R0,R6
   \   000006D0   ........           _BLF     oms2ws,??oms2ws??rA
   \   000006D4   0800A0E1           MOV      R0,R8
   \   000006D8   150000EF           SWI      +21
   \   000006DC   000096E5           LDR      R0,[R6, #+0]
   \   000006E0   00A0A0E3           MOV      R10,#+0
   \   000006E4   B000D0E1           LDRH     R0,[R0, #+0]
   \   000006E8   030080E2           ADD      R0,R0,#+3
   \   000006EC   140000EF           SWI      +20
   \   000006F0   0080A0E1           MOV      R8,R0
   \   000006F4   000096E5           LDR      R0,[R6, #+0]
   \   000006F8   0890A0E1           MOV      R9,R8
   \   000006FC   B000D0E1           LDRH     R0,[R0, #+0]
   \   00000700   000050E3           CMP      R0,#+0
   \   00000704   0500001A           BNE      ??collectItemsParams_37
   \   00000708   080000EA           B        ??collectItemsParams_38
   \                     ??collectItemsParams_39:
   \   0000070C   8A0080E0           ADD      R0,R0,R10, LSL #+1
   \   00000710   B200D0E1           LDRH     R0,[R0, #+2]
   \   00000714   01A08AE2           ADD      R10,R10,#+1
   \   00000718   ........           _BLF     char16to8,??char16to8??rA
   \   0000071C   ........           STRB     R0,[R8], #+1
   \                     ??collectItemsParams_37:
   \   00000720   000096E5           LDR      R0,[R6, #+0]
   \   00000724   B010D0E1           LDRH     R1,[R0, #+0]
   \   00000728   01005AE1           CMP      R10,R1
   \   0000072C   F6FFFFBA           BLT      ??collectItemsParams_39
   \                     ??collectItemsParams_38:
   \   00000730   0000A0E3           MOV      R0,#+0
   \   00000734   0000C8E5           STRB     R0,[R8, #+0]
   \   00000738   0110A0E3           MOV      R1,#+1
   \   0000073C   0900A0E1           MOV      R0,R9
   \   00000740   ........           _BLF     ToWeb,??ToWeb??rA
   \   00000744   0080A0E1           MOV      R8,R0
   \   00000748   1B0000EF           SWI      +27
   \   0000074C   0020A0E1           MOV      R2,R0
   \   00000750   0810A0E1           MOV      R1,R8
   \   00000754   050087E0           ADD      R0,R7,R5
   \   00000758   1E0100EF           SWI      +286
   \   0000075C   0800A0E1           MOV      R0,R8
   \   00000760   1B0000EF           SWI      +27
   \   00000764   07A080E0           ADD      R10,R0,R7
   \   00000768   0800A0E1           MOV      R0,R8
   \   0000076C   150000EF           SWI      +21
   \   00000770   0600A0E1           MOV      R0,R6
   \   00000774   290100EF           SWI      +297
   \   00000778   19FFFFEA           B        ??collectItemsParams_27
   \                     ??collectItemsParams_40:
   \   0000077C   0070C0E5           STRB     R7,[R0, #+0]
   \   00000780   0C1096E5           LDR      R1,[R6, #+12]
   \   00000784   0400A0E1           MOV      R0,R4
   \   00000788   ........           _BLF     extract_omstr,??extract_omstr??rA
   \   0000078C   0070A0E1           MOV      R7,R0
   \   00000790   1B0000EF           SWI      +27
   \   00000794   0020A0E1           MOV      R2,R0
   \   00000798   0710A0E1           MOV      R1,R7
   \   0000079C   050088E0           ADD      R0,R8,R5
   \   000007A0   1E0100EF           SWI      +286
   \   000007A4   0700A0E1           MOV      R0,R7
   \   000007A8   1B0000EF           SWI      +27
   \   000007AC   088080E0           ADD      R8,R0,R8
   \   000007B0   0700A0E1           MOV      R0,R7
   \   000007B4   150000EF           SWI      +21
   \   000007B8   3D00A0E3           MOV      R0,#+61
   \   000007BC   0500C8E7           STRB     R0,[R8, +R5]
   \   000007C0   180096E5           LDR      R0,[R6, #+24]
   \   000007C4   017088E2           ADD      R7,R8,#+1
   \   000007C8   000090E5           LDR      R0,[R0, #+0]
   \   000007CC   0090A0E3           MOV      R9,#+0
   \   000007D0   B000D0E1           LDRH     R0,[R0, #+0]
   \   000007D4   030080E2           ADD      R0,R0,#+3
   \   000007D8   140000EF           SWI      +20
   \   000007DC   0080A0E1           MOV      R8,R0
   \   000007E0   180096E5           LDR      R0,[R6, #+24]
   \   000007E4   08A0A0E1           MOV      R10,R8
   \   000007E8   000090E5           LDR      R0,[R0, #+0]
   \   000007EC   B000D0E1           LDRH     R0,[R0, #+0]
   \   000007F0   000050E3           CMP      R0,#+0
   \   000007F4   E5FEFF1A           BNE      ??collectItemsParams_24
   \   000007F8   E9FEFFEA           B        ??collectItemsParams_25
    496          }
    497          
    498          //===============================================================================================
    499          

   \                                 In segment CODE, align 4, keep-with-next
    500          static void method0(VIEW_GUI *data)
    501          {
   \                     method0:
   \   00000000   F04F2DE9           PUSH     {R4-R11,LR}
   \   00000004   0040A0E1           MOV      R4,R0
    502            int scr_w=ScreenW()-1;
   \   00000008   888100EF           SWI      +33160
   \   0000000C   015040E2           SUB      R5,R0,#+1
    503            int scr_h=ScreenH()-1;
   \   00000010   898100EF           SWI      +33161
    504            
    505            VIEWDATA *vd=data->vd;
   \   00000014   347094E5           LDR      R7,[R4, #+52]
   \   00000018   016040E2           SUB      R6,R0,#+1
    506            
    507            if (data->gui.state==2)
   \   0000001C   0C00D4E5           LDRB     R0,[R4, #+12]
   \   00000020   020050E3           CMP      R0,#+2
   \   00000024   F08FBD18           POPNE    {R4-R11,PC}
    508            {
    509              DrawRectangle(0,0,scr_w,scr_h,0,
    510                GetPaletteAdrByColorIndex(0),
    511                GetPaletteAdrByColorIndex(0));
   \   00000028   0000A0E3           MOV      R0,#+0
   \   0000002C   2E0100EF           SWI      +302
   \   00000030   0080A0E1           MOV      R8,R0
   \   00000034   0000A0E3           MOV      R0,#+0
   \   00000038   2E0100EF           SWI      +302
   \   0000003C   00012DE9           PUSH     {R8}
    512              RenderPage(vd,1);
    513          //    DrawString(ws_console,0,0,scr_w,20,
    514          //		  FONT_SMALL,TEXT_NOFORMAT,
    515          //		  GetPaletteAdrByColorIndex(1),
    516          //      GetPaletteAdrByColorIndex(0));
    517              extern int connect_state;
    518              if (!STOPPED)
   \   00000040   ........           LDR      R8,??DataTable12  ;; lgpData
   \   00000044   01002DE9           PUSH     {R0}
   \   00000048   0630A0E1           MOV      R3,R6
   \   0000004C   0520A0E1           MOV      R2,R5
   \   00000050   0010A0E3           MOV      R1,#+0
   \   00000054   0000A0E3           MOV      R0,#+0
   \   00000058   01002DE9           PUSH     {R0}
   \   0000005C   B40100EF           SWI      +436
   \   00000060   0110A0E3           MOV      R1,#+1
   \   00000064   0700A0E1           MOV      R0,R7
   \   00000068   ........           _BLF     RenderPage,??RenderPage??rA
   \   0000006C   100198E5           LDR      R0,[R8, #+272]
   \   00000070   0CD08DE2           ADD      SP,SP,#+12
   \   00000074   000050E3           CMP      R0,#+0
   \   00000078   F08FBD18           POPNE    {R4-R11,PC}
   \   0000007C   08029FE5           LDR      R0,??method0_0   ;; connect_state
   \   00000080   000090E5           LDR      R0,[R0, #+0]
   \   00000084   000050E3           CMP      R0,#+0
   \   00000088   0500000A           BEQ      ??method0_1
    519              {
    520                int w1, h1;
    521                if (connect_state)
    522                {
    523                  switch(connect_state)
   \   0000008C   010040E2           SUB      R0,R0,#+1
   \   00000090   020050E3           CMP      R0,#+2
   \   00000094   0200008A           BHI      ??method0_1
    524                  {
    525                  case 1: case 2: case 3:
    526          //          wsprintf(data->ws1,percent_t,"...");
    527          //          break;
    528          //        case 2:
    529          //          wsprintf(data->ws1,percent_t,"...");
    530                    wstrcpy(data->ws1, ws_console);
   \   00000098   281198E5           LDR      R1,[R8, #+296]
   \   0000009C   3C0094E5           LDR      R0,[R4, #+60]
   \   000000A0   1F0100EF           SWI      +287
   \                     ??method0_1:
   \   000000A4   400094E5           LDR      R0,[R4, #+64]
   \   000000A8   1C2098E5           LDR      R2,[R8, #+28]
   \   000000AC   DC119FE5           LDR      R1,??method0_0+0x4  ;; percent_t
    531                    //wsprintf(data->ws1,percent_t,);
    532                    break;
    533          //        case 3:
    534          //          wsprintf(data->ws1,percent_t,"...");
    535          //          break;
    536                  }
    537                }
    538                wsprintf(data->ws2,percent_t,lgpData[LGP_Stop]);
   \   000000B0   240100EF           SWI      +292
    539                
    540                h1=scr_h-GetFontYSIZE(FONT_SMALL)-2;
   \   000000B4   0800A0E3           MOV      R0,#+8
   \   000000B8   C50100EF           SWI      +453
   \   000000BC   000046E0           SUB      R0,R6,R0
   \   000000C0   029040E2           SUB      R9,R0,#+2
    541                w1=scr_w-Get_WS_width(data->ws2,FONT_SMALL)-2;
   \   000000C4   400094E5           LDR      R0,[R4, #+64]
   \   000000C8   0810A0E3           MOV      R1,#+8
   \   000000CC   080200EF           SWI      +520
   \   000000D0   000045E0           SUB      R0,R5,R0
   \   000000D4   02A040E2           SUB      R10,R0,#+2
    542                DrawRectangle(0,h1,w1,scr_h,0,
    543                  GetPaletteAdrByColorIndex(1),
    544                  GetPaletteAdrByColorIndex(0));
   \   000000D8   0000A0E3           MOV      R0,#+0
   \   000000DC   2E0100EF           SWI      +302
   \   000000E0   00B0A0E1           MOV      R11,R0
   \   000000E4   0100A0E3           MOV      R0,#+1
   \   000000E8   2E0100EF           SWI      +302
   \   000000EC   00082DE9           PUSH     {R11}
   \   000000F0   01002DE9           PUSH     {R0}
   \   000000F4   0630A0E1           MOV      R3,R6
   \   000000F8   0A20A0E1           MOV      R2,R10
   \   000000FC   0910A0E1           MOV      R1,R9
   \   00000100   0000A0E3           MOV      R0,#+0
   \   00000104   01002DE9           PUSH     {R0}
   \   00000108   B40100EF           SWI      +436
    545                DrawRectangle(w1+1,h1,scr_w,scr_h,0,
    546                  GetPaletteAdrByColorIndex(1),
    547                  GetPaletteAdrByColorIndex(0));
   \   0000010C   0000A0E3           MOV      R0,#+0
   \   00000110   2E0100EF           SWI      +302
   \   00000114   00B0A0E1           MOV      R11,R0
   \   00000118   0100A0E3           MOV      R0,#+1
   \   0000011C   2E0100EF           SWI      +302
   \   00000120   00082DE9           PUSH     {R11}
   \   00000124   01002DE9           PUSH     {R0}
   \   00000128   0630A0E1           MOV      R3,R6
   \   0000012C   0520A0E1           MOV      R2,R5
   \   00000130   0910A0E1           MOV      R1,R9
   \   00000134   0000A0E3           MOV      R0,#+0
   \   00000138   01002DE9           PUSH     {R0}
   \   0000013C   01008AE2           ADD      R0,R10,#+1
   \   00000140   B40100EF           SWI      +436
    548                if ((view_url_mode==MODE_FILE && vd->loaded_sz<vd->page_sz) ||
    549                (view_url_mode==MODE_URL && connect_state==3 && vd->loaded_sz<vd->page_sz))
   \   00000144   140198E5           LDR      R0,[R8, #+276]
   \   00000148   18D08DE2           ADD      SP,SP,#+24
   \   0000014C   000050E3           CMP      R0,#+0
   \   00000150   0400001A           BNE      ??method0_2
   \   00000154   D00097E5           LDR      R0,[R7, #+208]
   \   00000158   CC1097E5           LDR      R1,[R7, #+204]
   \   0000015C   010050E1           CMP      R0,R1
   \   00000160   0A0000BA           BLT      ??method0_3
   \   00000164   220000EA           B        ??method0_4
   \                     ??method0_2:
   \   00000168   010050E3           CMP      R0,#+1
   \   0000016C   2000001A           BNE      ??method0_4
   \   00000170   14019FE5           LDR      R0,??method0_0   ;; connect_state
   \   00000174   000090E5           LDR      R0,[R0, #+0]
   \   00000178   030050E3           CMP      R0,#+3
   \   0000017C   1C00001A           BNE      ??method0_4
   \   00000180   D00097E5           LDR      R0,[R7, #+208]
   \   00000184   CC1097E5           LDR      R1,[R7, #+204]
   \   00000188   010050E1           CMP      R0,R1
   \   0000018C   180000AA           BGE      ??method0_4
    550                {
    551                  DrawRectangle(1,h1+1,vd->loaded_sz*(w1-1)/vd->page_sz,scr_h-1,0,
    552                    GetPaletteAdrByColorIndex(2),
    553                    GetPaletteAdrByColorIndex(2));
   \                     ??method0_3:
   \   00000190   0200A0E3           MOV      R0,#+2
   \   00000194   2E0100EF           SWI      +302
   \   00000198   0080A0E1           MOV      R8,R0
   \   0000019C   0200A0E3           MOV      R0,#+2
   \   000001A0   2E0100EF           SWI      +302
   \   000001A4   00012DE9           PUSH     {R8}
   \   000001A8   01002DE9           PUSH     {R0}
   \   000001AC   01104AE2           SUB      R1,R10,#+1
   \   000001B0   013046E2           SUB      R3,R6,#+1
   \   000001B4   0000A0E3           MOV      R0,#+0
   \   000001B8   01002DE9           PUSH     {R0}
   \   000001BC   D00097E5           LDR      R0,[R7, #+208]
   \   000001C0   910000E0           MUL      R0,R1,R0
   \   000001C4   CC1097E5           LDR      R1,[R7, #+204]
   \   000001C8   ........           _BLF     ??div32_a,??rA??div32_a
   \   000001CC   0120A0E1           MOV      R2,R1
   \   000001D0   011089E2           ADD      R1,R9,#+1
   \   000001D4   0100A0E3           MOV      R0,#+1
   \   000001D8   B40100EF           SWI      +436
    554                  wsprintf(data->ws1,"%uB/%uB",vd->loaded_sz,vd->page_sz);
   \   000001DC   CC3097E5           LDR      R3,[R7, #+204]
   \   000001E0   D02097E5           LDR      R2,[R7, #+208]
   \   000001E4   A8109FE5           LDR      R1,??method0_0+0x8  ;; percent_t + 4
   \   000001E8   3C0094E5           LDR      R0,[R4, #+60]
   \   000001EC   240100EF           SWI      +292
   \   000001F0   0CD08DE2           ADD      SP,SP,#+12
    555                }
    556                DrawString(data->ws1,0,h1+2,w1,scr_h,FONT_SMALL,TEXT_ALIGNMIDDLE,
    557                  GetPaletteAdrByColorIndex(1),GetPaletteAdrByColorIndex(23));   
   \                     ??method0_4:
   \   000001F4   1700A0E3           MOV      R0,#+23
   \   000001F8   2E0100EF           SWI      +302
   \   000001FC   0080A0E1           MOV      R8,R0
   \   00000200   0100A0E3           MOV      R0,#+1
   \   00000204   2E0100EF           SWI      +302
   \   00000208   00012DE9           PUSH     {R8}
   \   0000020C   01002DE9           PUSH     {R0}
   \   00000210   027089E2           ADD      R7,R9,#+2
   \   00000214   0A30A0E1           MOV      R3,R10
   \   00000218   0720A0E1           MOV      R2,R7
   \   0000021C   0200A0E3           MOV      R0,#+2
   \   00000220   01002DE9           PUSH     {R0}
   \   00000224   0010A0E3           MOV      R1,#+0
   \   00000228   0800A0E3           MOV      R0,#+8
   \   0000022C   01002DE9           PUSH     {R0}
   \   00000230   0600A0E1           MOV      R0,R6
   \   00000234   01002DE9           PUSH     {R0}
   \   00000238   3C0094E5           LDR      R0,[R4, #+60]
   \   0000023C   4C0100EF           SWI      +332
    558                DrawString(data->ws2,w1+1,h1+2,scr_w,scr_h,FONT_SMALL,TEXT_ALIGNMIDDLE,
    559                  GetPaletteAdrByColorIndex(1),GetPaletteAdrByColorIndex(23));      
   \   00000240   1700A0E3           MOV      R0,#+23
   \   00000244   2E0100EF           SWI      +302
   \   00000248   0080A0E1           MOV      R8,R0
   \   0000024C   0100A0E3           MOV      R0,#+1
   \   00000250   2E0100EF           SWI      +302
   \   00000254   00012DE9           PUSH     {R8}
   \   00000258   01002DE9           PUSH     {R0}
   \   0000025C   0530A0E1           MOV      R3,R5
   \   00000260   0720A0E1           MOV      R2,R7
   \   00000264   01108AE2           ADD      R1,R10,#+1
   \   00000268   0200A0E3           MOV      R0,#+2
   \   0000026C   01002DE9           PUSH     {R0}
   \   00000270   0800A0E3           MOV      R0,#+8
   \   00000274   01002DE9           PUSH     {R0}
   \   00000278   40002DE9           PUSH     {R6}
   \   0000027C   400094E5           LDR      R0,[R4, #+64]
   \   00000280   4C0100EF           SWI      +332
   \   00000284   28D08DE2           ADD      SP,SP,#+40
    560                
    561          //      DrawString(ws_console,0,0,scr_w,20,
    562          //		    FONT_SMALL,TEXT_NOFORMAT,
    563          //		    GetPaletteAdrByColorIndex(1),GetPaletteAdrByColorIndex(0));
    564              }
    565            }
    566          }
   \   00000288   F08FBDE8           POP      {R4-R11,PC}      ;; return
   \                     ??method0_0:
   \   0000028C   ........           DC32     connect_state
   \   00000290   ........           DC32     percent_t
   \   00000294   ........           DC32     percent_t + 4
    567          

   \                                 In segment CODE, align 4, keep-with-next
    568          static void method1(VIEW_GUI *data,void *(*malloc_adr)(int))
    569          {
   \                     method1:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   \   00000004   04D04DE2           SUB      SP,SP,#+4
   \   00000008   0040A0E1           MOV      R4,R0
    570            VIEWDATA *vd=malloc(sizeof(VIEWDATA));
   \   0000000C   F800A0E3           MOV      R0,#+248
   \   00000010   140000EF           SWI      +20
   \   00000014   0050A0E1           MOV      R5,R0
    571            zeromem(vd,sizeof(VIEWDATA));
   \   00000018   F810A0E3           MOV      R1,#+248
   \   0000001C   1D0100EF           SWI      +285
    572            vd->ws=AllocWS(256);
   \   00000020   400FA0E3           MOV      R0,#+256
   \   00000024   250100EF           SWI      +293
   \   00000028   240085E5           STR      R0,[R5, #+36]
    573            vd->pos_cur_ref=0xFFFFFFFF; //    
   \   0000002C   0000E0E3           MVN      R0,#+0
   \   00000030   280085E5           STR      R0,[R5, #+40]
    574            *((unsigned short *)(&vd->current_tag_d))=0xFFFF;
   \   00000034   2008A0E1           MOV      R0,R0, LSR #+16
   \   00000038   B006C5E1           STRH     R0,[R5, #+96]
    575            data->vd=vd;
   \   0000003C   345084E5           STR      R5,[R4, #+52]
    576            data->ws1=AllocWS(128);
   \   00000040   8000A0E3           MOV      R0,#+128
   \   00000044   250100EF           SWI      +293
   \   00000048   3C0084E5           STR      R0,[R4, #+60]
    577            data->ws2=AllocWS(128);
   \   0000004C   8000A0E3           MOV      R0,#+128
   \   00000050   250100EF           SWI      +293
   \   00000054   400084E5           STR      R0,[R4, #+64]
    578            data->gui.state=1;
   \   00000058   0100A0E3           MOV      R0,#+1
   \   0000005C   0C00C4E5           STRB     R0,[R4, #+12]
    579            STOPPED=0;
   \   00000060   ........           LDR      R0,??DataTable7  ;; lgpData + 272
   \   00000064   0010A0E3           MOV      R1,#+0
   \   00000068   001080E5           STR      R1,[R0, #+0]
    580            if ((vd->cached=data->cached))
   \   0000006C   380094E5           LDR      R0,[R4, #+56]
   \   00000070   24409FE5           LDR      R4,??method1_0   ;; StartGetFile
   \   00000074   040085E5           STR      R0,[R5, #+4]
   \   00000078   000050E3           CMP      R0,#+0
    581            {
    582              SUBPROC((void *)StartGetFile,0,NULL);
   \   0000007C   0020A013           MOVNE    R2,#+0
   \   00000080   0200001A           BNE      ??method1_1
    583            }
    584            else
    585            {
    586              SUBPROC((void *)StartGetFile,1,PushPageToStack());
   \   00000084   ........           _BLF     PushPageToStack,??PushPageToStack??rA
   \   00000088   0020A0E1           MOV      R2,R0
   \   0000008C   0110A0E3           MOV      R1,#+1
   \                     ??method1_1:
   \   00000090   0400A0E1           MOV      R0,R4
   \   00000094   710100EF           SWI      +369
    587            }
    588          }
   \   00000098   3180BDE8           POP      {R0,R4,R5,PC}    ;; return
   \                     ??method1_0:
   \   0000009C   ........           DC32     StartGetFile
    589          

   \                                 In segment CODE, align 4, keep-with-next
    590          void FreeViewUrl(void)
    591          {
    592            freegstr(&view_url);
   \                     FreeViewUrl:
   \   00000000   00009FE5           LDR      R0,??FreeViewUrl_0  ;; lgpData + 280
   \   00000004   ........           _BF      freegstr,??freegstr??rA  ;; tailcall
   \                     ??FreeViewUrl_0:
   \   00000008   ........           DC32     lgpData + 280
    593          }
    594          

   \                                 In segment CODE, align 4, keep-with-next
    595          static void method2(VIEW_GUI *data,void (*mfree_adr)(void *))
    596          {
   \                     method2:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
    597            STOPPED=1;
   \   00000004   0110A0E3           MOV      R1,#+1
   \   00000008   0040A0E1           MOV      R4,R0
   \   0000000C   ........           LDR      R0,??DataTable7  ;; lgpData + 272
    598            SUBPROC((void*)StopINET);
    599            FreeViewData(data->vd);
    600            data->vd=NULL;
   \   00000010   0050A0E3           MOV      R5,#+0
   \   00000014   001080E5           STR      R1,[R0, #+0]
   \   00000018   ........           LDR      R0,??DataTable13  ;; StopINET
   \   0000001C   710100EF           SWI      +369
   \   00000020   340094E5           LDR      R0,[R4, #+52]
   \   00000024   ........           _BLF     FreeViewData,??FreeViewData??rA
   \   00000028   345084E5           STR      R5,[R4, #+52]
    601            FreeWS(data->ws1);
   \   0000002C   3C0094E5           LDR      R0,[R4, #+60]
   \   00000030   290100EF           SWI      +297
    602            FreeWS(data->ws2);
   \   00000034   400094E5           LDR      R0,[R4, #+64]
   \   00000038   290100EF           SWI      +297
    603            data->gui.state=0;
   \   0000003C   0C50C4E5           STRB     R5,[R4, #+12]
    604            FreeViewUrl();
   \   00000040   3040BDE8           POP      {R4,R5,LR}       ;; Pop
   \   00000044   ........           B        FreeViewUrl      ;; tailcall
    605          }
    606          

   \                                 In segment CODE, align 4, keep-with-next
    607          static void method3(VIEW_GUI *data,void *(*malloc_adr)(int),void (*mfree_adr)(void *))
    608          {
   \                     method3:
   \   00000000   10402DE9           PUSH     {R4,LR}
   \   00000004   0040A0E1           MOV      R4,R0
    609          #ifdef ELKA
    610            DisableIconBar(1);
   \   00000008   0100A0E3           MOV      R0,#+1
   \   0000000C   3B0200EF           SWI      +571
    611          #endif
    612            PNGTOP_DESC *pltop=PNG_TOP();
   \   00000010   B98100EF           SWI      +33209
    613            pltop->dyn_pltop=&data->vd->dynpng_list->dp;
   \   00000014   341094E5           LDR      R1,[R4, #+52]
   \   00000018   781091E5           LDR      R1,[R1, #+120]
   \   0000001C   081080E5           STR      R1,[R0, #+8]
    614            ENABLE_REDRAW=1;
   \   00000020   ........           LDR      R0,??DataTable10  ;; ENABLE_REDRAW
   \   00000024   0110A0E3           MOV      R1,#+1
   \   00000028   001080E5           STR      R1,[R0, #+0]
    615            DisableIDLETMR();
   \   0000002C   7F0100EF           SWI      +383
    616            data->gui.state=2;
   \   00000030   0200A0E3           MOV      R0,#+2
   \   00000034   0C00C4E5           STRB     R0,[R4, #+12]
    617          }
   \   00000038   1080BDE8           POP      {R4,PC}          ;; return
    618          

   \                                 In segment CODE, align 4, keep-with-next
    619          static void method4(VIEW_GUI *data,void (*mfree_adr)(void *))
    620          {
   \                     method4:
   \   00000000   10402DE9           PUSH     {R4,LR}
   \   00000004   0040A0E1           MOV      R4,R0
    621          #ifdef ELKA
    622            DisableIconBar(0);
   \   00000008   0000A0E3           MOV      R0,#+0
   \   0000000C   3B0200EF           SWI      +571
    623          #endif
    624            PNGTOP_DESC *pltop=PNG_TOP();
   \   00000010   B98100EF           SWI      +33209
    625            pltop->dyn_pltop=NULL;
   \   00000014   0010A0E3           MOV      R1,#+0
   \   00000018   081080E5           STR      R1,[R0, #+8]
    626            ENABLE_REDRAW=0;
   \   0000001C   ........           LDR      R0,??DataTable10  ;; ENABLE_REDRAW
   \   00000020   001080E5           STR      R1,[R0, #+0]
    627            if (data->gui.state!=2)
   \   00000024   0C00D4E5           LDRB     R0,[R4, #+12]
   \   00000028   020050E3           CMP      R0,#+2
    628              return;
    629            data->gui.state=1;
   \   0000002C   0100A003           MOVEQ    R0,#+1
   \   00000030   0C00C405           STRBEQ   R0,[R4, #+12]
    630          }
   \   00000034   1080BDE8           POP      {R4,PC}          ;; return
    631          

   \                                 In segment CODE, align 4, keep-with-next
    632          static void RunOtherCopyByURL(const char *url, int isNativeBrowser)
    633          {
   \                     RunOtherCopyByURL:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
   \   00000004   41DF4DE2           SUB      SP,SP,#+260
   \   00000008   0150A0E1           MOV      R5,R1
    634            char fname[256];
    635            int f;
    636            unsigned int err;
    637            WSHDR *ws;
    638            getSymbolicPath(fname,"$urlcache\\$date$time.url");
   \   0000000C   B0109FE5           LDR      R1,??RunOtherCopyByURL_0  ;; `?<Constant "$urlcache\\\\$date$time.url">`
   \   00000010   0040A0E1           MOV      R4,R0
   \   00000014   04008DE2           ADD      R0,SP,#+4
   \   00000018   ........           _BLF     getSymbolicPath,??getSymbolicPath??rA
    639            f=fopen(fname,A_Create+A_Truncate+A_BIN+A_ReadWrite,P_READ+P_WRITE,&err);
   \   0000001C   0D30A0E1           MOV      R3,SP
   \   00000020   602FA0E3           MOV      R2,#+384
   \   00000024   0210A0E3           MOV      R1,#+2
   \   00000028   831C81E3           ORR      R1,R1,#0x8300
   \   0000002C   04008DE2           ADD      R0,SP,#+4
   \   00000030   0A0000EF           SWI      +10
   \   00000034   0060A0E1           MOV      R6,R0
    640            if (f!=-1)
   \   00000038   010076E3           CMN      R6,#+1
   \   0000003C   1E00000A           BEQ      ??RunOtherCopyByURL_1
    641            {
    642              fwrite(f,url,strlen(url),&err);
   \   00000040   0400A0E1           MOV      R0,R4
   \   00000044   1B0000EF           SWI      +27
   \   00000048   0D30A0E1           MOV      R3,SP
   \   0000004C   0020A0E1           MOV      R2,R0
   \   00000050   0410A0E1           MOV      R1,R4
   \   00000054   0600A0E1           MOV      R0,R6
   \   00000058   0C0000EF           SWI      +12
    643              fclose(f,&err);
   \   0000005C   0D10A0E1           MOV      R1,SP
   \   00000060   0600A0E1           MOV      R0,R6
   \   00000064   0D0000EF           SWI      +13
    644              ws=AllocWS(256);
   \   00000068   400FA0E3           MOV      R0,#+256
   \   0000006C   250100EF           SWI      +293
   \   00000070   0040A0E1           MOV      R4,R0
    645              if (isNativeBrowser)
   \   00000074   000055E3           CMP      R5,#+0
   \   00000078   FF20A0E3           MOV      R2,#+255
   \   0000007C   0300000A           BEQ      ??RunOtherCopyByURL_2
    646              {
    647                str_2ws(ws,fname,255);
   \   00000080   04108DE2           ADD      R1,SP,#+4
   \   00000084   6C0100EF           SWI      +364
    648                ExecuteFile(ws,NULL,NULL);
   \   00000088   0020A0E3           MOV      R2,#+0
   \   0000008C   020000EA           B        ??RunOtherCopyByURL_3
    649              }
    650              else
    651              {
    652                str_2ws(ws,BALLET_EXE,255);
   \                     ??RunOtherCopyByURL_2:
   \   00000090   30109FE5           LDR      R1,??RunOtherCopyByURL_0+0x4  ;; lgpData + 1776
   \   00000094   6C0100EF           SWI      +364
    653                ExecuteFile(ws,NULL,fname);
   \   00000098   04208DE2           ADD      R2,SP,#+4
   \                     ??RunOtherCopyByURL_3:
   \   0000009C   0010A0E3           MOV      R1,#+0
   \   000000A0   0400A0E1           MOV      R0,R4
   \   000000A4   940000EF           SWI      +148
    654              } 
    655              FreeWS(ws);
   \   000000A8   0400A0E1           MOV      R0,R4
   \   000000AC   290100EF           SWI      +297
    656              unlink(fname,&err);
   \   000000B0   0D10A0E1           MOV      R1,SP
   \   000000B4   04008DE2           ADD      R0,SP,#+4
   \   000000B8   6B0100EF           SWI      +363
    657            }
    658          }
   \                     ??RunOtherCopyByURL_1:
   \   000000BC   41DF8DE2           ADD      SP,SP,#+260      ;; stack cleaning
   \   000000C0   7080BDE8           POP      {R4-R6,PC}       ;; return
   \                     ??RunOtherCopyByURL_0:
   \   000000C4   ........           DC32     `?<Constant "$urlcache\\\\$date$time.url">`
   \   000000C8   ........           DC32     lgpData + 1776
    659          

   \                                 In segment CODE, align 4, keep-with-next
    660          static int method5(VIEW_GUI *data,GUI_MSG *msg)
    661          {
   \                     method5:
   \   00000000   F04F2DE9           PUSH     {R4-R11,LR}
   \   00000004   84D04DE2           SUB      SP,SP,#+132
    662            VIEWDATA *vd=data->vd;
   \   00000008   344090E5           LDR      R4,[R0, #+52]
   \   0000000C   0190A0E1           MOV      R9,R1
    663            REFCACHE *rf;
    664            int m=msg->gbsmsg->msg;
   \   00000010   040099E5           LDR      R0,[R9, #+4]
    665            if ((m==KEY_DOWN)||(m==LONG_PRESS))
   \   00000014   9320A0E3           MOV      R2,#+147
   \   00000018   041090E5           LDR      R1,[R0, #+4]
   \   0000001C   402F82E3           ORR      R2,R2,#0x100
   \   00000020   020051E1           CMP      R1,R2
   \   00000024   02208212           ADDNE    R2,R2,#+2
   \   00000028   02005111           CMPNE    R1,R2
   \   0000002C   AF01001A           BNE      ??method5_3
    666            {
    667              switch(msg->gbsmsg->submess)
   \   00000030   080090E5           LDR      R0,[R0, #+8]
   \   00000034   281094E5           LDR      R1,[R4, #+40]
   \   00000038   ........           LDR      R5,??DataTable22  ;; `?<Constant "$bookmarks\\\\">`
   \   0000003C   ........           LDR      R6,??DataTable12  ;; lgpData
   \   00000040   0120A0E3           MOV      R2,#+1
   \   00000044   0080A0E3           MOV      R8,#+0
   \   00000048   007062E2           RSB      R7,R2,#+0
   \   0000004C   010040E2           SUB      R0,R0,#+1
   \   00000050   3D0050E3           CMP      R0,#+61
   \   00000054   A501008A           BHI      ??method5_3
   \   00000058   023F8FE2           ADR      R3,??method5_0
   \   0000005C   8000A0E1           MOV      R0,R0, LSL #+1
   \   00000060   B03093E1           LDRH     R3,[R3, R0]
   \   00000064   03F18FE0           ADD      PC,PC,R3, LSL #+2
   \                     ??method5_0:
   \   00000068   F200A101A101       DC16     +242,+417,+417,+246
   \              F600        
   \   00000070   A101A101A101       DC16     +417,+417,+417,+417
   \              A101        
   \   00000078   A101A1013601       DC16     +417,+417,+310,+417
   \              A101        
   \   00000080   ED00E700A101       DC16     +237,+231,+417,+417
   \              A101        
   \   00000088   A101A101A101       DC16     +417,+417,+417,+417
   \              A101        
   \   00000090   A101A101A101       DC16     +417,+417,+417,+417
   \              A101        
   \   00000098   A1011E00A101       DC16     +417,+30,+417,+417
   \              A101        
   \   000000A0   A101A101A101       DC16     +417,+417,+417,+417
   \              A101        
   \   000000A8   A101A101A101       DC16     +417,+417,+417,+417
   \              A101        
   \   000000B0   A101A101A101       DC16     +417,+417,+417,+417
   \              A101        
   \   000000B8   A101A101A101       DC16     +417,+417,+417,+417
   \              A101        
   \   000000C0   A101A101A101       DC16     +417,+417,+417,+354
   \              6201        
   \   000000C8   050136015501       DC16     +261,+310,+341,+417
   \              A101        
   \   000000D0   A101A101A101       DC16     +417,+417,+417,+417
   \              A101        
   \   000000D8   5801A101C200       DC16     +344,+417,+194,+214
   \              D600        
   \   000000E0   ED00E700           DC16     +237,+231
    668              {
    669              case ENTER_BUTTON:
    670                if (vd->pos_cur_ref==0xFFFFFFFF) break;
   \                     ??method5_4:
   \   000000E4   070051E1           CMP      R1,R7
   \   000000E8   8001000A           BEQ      ??method5_3
    671                rf=FindReference(vd,vd->pos_cur_ref);
   \   000000EC   0400A0E1           MOV      R0,R4
   \   000000F0   ........           _BLF     FindReference,??FindReference??rA
   \   000000F4   0080B0E1           MOVS     R8,R0
    672                if (rf)
   \   000000F8   9B00000A           BEQ      ??method5_5
   \   000000FC   000098E5           LDR      R0,[R8, #+0]
   \   00000100   081094E5           LDR      R1,[R4, #+8]
   \   00000104   082098E5           LDR      R2,[R8, #+8]
   \   00000108   803081E0           ADD      R3,R1,R0, LSL #+1
   \   0000010C   0C1098E5           LDR      R1,[R8, #+12]
   \   00000110   2C0196E5           LDR      R0,[R6, #+300]
   \   00000114   409042E2           SUB      R9,R2,#+64
   \   00000118   380059E3           CMP      R9,#+56
   \   0000011C   8B00008A           BHI      ??method5_6
   \   00000120   01AF8FE2           ADR      R10,??method5_1
   \   00000124   09A0DAE7           LDRB     R10,[R10, R9]
   \   00000128   0AF18FE0           ADD      PC,PC,R10, LSL #+2
   \                     ??method5_1:
   \   0000012C   33888888           DC8      +51,+136,+136,+136
   \   00000130   88888888           DC8      +136,+136,+136,+136
   \   00000134   88888888           DC8      +136,+136,+136,+136
   \   00000138   27888888           DC8      +39,+136,+136,+136
   \   0000013C   88888888           DC8      +136,+136,+136,+136
   \   00000140   88888888           DC8      +136,+136,+136,+136
   \   00000144   88880E88           DC8      +136,+136,+14,+136
   \   00000148   88888888           DC8      +136,+136,+136,+136
   \   0000014C   8888885C           DC8      +136,+136,+136,+92
   \   00000150   88888888           DC8      +136,+136,+136,+136
   \   00000154   88648888           DC8      +136,+100,+136,+136
   \   00000158   88888888           DC8      +136,+136,+136,+136
   \   0000015C   79883D81           DC8      +121,+136,+61,+129
   \   00000160   88648888           DC8      +136,+100,+136,+136
   \   00000164   79000000           DC8      +121,+0,+0,+0
    673                {
    674                  switch(rf->tag)
    675                  {
    676                  case 'Z':
    677                    if (rf->id!=_NOREF)
   \                     ??method5_7:
   \   00000168   070051E1           CMP      R1,R7
   \   0000016C   5F01000A           BEQ      ??method5_3
    678                    {
    679                      char *c=extract_omstr(vd,rf->id);
   \   00000170   0400A0E1           MOV      R0,R4
   \   00000174   ........           _BLF     extract_omstr,??extract_omstr??rA
    680                      unsigned int l=_rshort2(vd->oms+rf->id);
   \   00000178   3C1094E5           LDR      R1,[R4, #+60]
   \   0000017C   0050A0E1           MOV      R5,R0
   \   00000180   0C0098E5           LDR      R0,[R8, #+12]
   \   00000184   010080E0           ADD      R0,R0,R1
   \   00000188   ........           _BLF     _rshort2,??_rshort2??rA
   \   0000018C   0040A0E1           MOV      R4,R0
    681                      goto_url=malloc(l-strlen(c)+1);
   \   00000190   0500A0E1           MOV      R0,R5
   \   00000194   1B0000EF           SWI      +27
   \   00000198   000044E0           SUB      R0,R4,R0
   \   0000019C   010080E2           ADD      R0,R0,#+1
   \   000001A0   140000EF           SWI      +20
   \   000001A4   1C0186E5           STR      R0,[R6, #+284]
    682                      strcpy(goto_url,c+strlen(c)+1);
   \   000001A8   0500A0E1           MOV      R0,R5
   \   000001AC   1B0000EF           SWI      +27
   \   000001B0   050080E0           ADD      R0,R0,R5
   \   000001B4   011080E2           ADD      R1,R0,#+1
   \   000001B8   1C0196E5           LDR      R0,[R6, #+284]
   \   000001BC   1A0000EF           SWI      +26
    683                      mfree(c);
   \   000001C0   0500A0E1           MOV      R0,R5
   \   000001C4   150000EF           SWI      +21
    684                      return 0xFF;
   \                     ??method5_8:
   \   000001C8   4E0000EA           B        ??method5_9
    685                    }
    686                    break;
    687                  case 'L':
    688                    if (rf->id!=_NOREF)
   \                     ??method5_10:
   \   000001CC   070051E1           CMP      R1,R7
   \   000001D0   4601000A           BEQ      ??method5_3
    689                    {
    690                      // 1/http:           
    691                      // 0/http:         
    692                      goto_url=extract_omstr(vd,rf->id);
   \   000001D4   0400A0E1           MOV      R0,R4
   \   000001D8   ........           _BLF     extract_omstr,??extract_omstr??rA
   \   000001DC   1C0186E5           STR      R0,[R6, #+284]
    693                      // 0/javascript:  upload data
    694                      if (!strncmp("0/javascript",goto_url,12))
   \   000001E0   0C20A0E3           MOV      R2,#+12
   \   000001E4   0010A0E1           MOV      R1,R0
   \   000001E8   0C0085E2           ADD      R0,R5,#+12
   \   000001EC   150100EF           SWI      +277
   \   000001F0   000050E3           CMP      R0,#+0
   \   000001F4   4300001A           BNE      ??method5_9
    695                      {
    696                        from_url=malloc(strlen(vd->pageurl)+1);
   \   000001F8   370000EA           B        ??method5_11
    697                        strcpy(from_url,vd->pageurl);
    698                        goto_params=collectItemsParams(vd,rf);
    699                      }
    700                      return 0xFF;
    701                    }
    702                    break;
    703                  case '@':
    704                    if (rf->id!=_NOREF)
   \                     ??method5_12:
   \   000001FC   070051E1           CMP      R1,R7
   \   00000200   3A01000A           BEQ      ??method5_3
    705                    {
    706                      char *s=extract_omstr(vd,rf->id);
   \   00000204   0400A0E1           MOV      R0,R4
   \   00000208   ........           _BLF     extract_omstr,??extract_omstr??rA
   \   0000020C   0040A0E1           MOV      R4,R0
    707                      RunOtherCopyByURL(s,1);
   \   00000210   0110A0E3           MOV      R1,#+1
   \   00000214   ........           BL       RunOtherCopyByURL
    708                      mfree(s);
   \   00000218   0400A0E1           MOV      R0,R4
   \                     ??method5_13:
   \   0000021C   150000EF           SWI      +21
   \   00000220   320100EA           B        ??method5_3
    709                    }
    710                    break;
    711                  case 'r':
    712                    {
    713                      REFCACHE *rfp;
    714                      int i;
    715                      if (vd->rawtext[rf->begin+1]!=vd->WCHAR_RADIO_OFF) break;
   \                     ??method5_14:
   \   00000224   B200D3E1           LDRH     R0,[R3, #+2]
   \   00000228   E81094E5           LDR      R1,[R4, #+232]
   \   0000022C   010050E1           CMP      R0,R1
   \   00000230   2E01001A           BNE      ??method5_3
    716                      vd->rawtext[rf->begin+1]=vd->WCHAR_RADIO_ON;
   \   00000234   EC0094E5           LDR      R0,[R4, #+236]
    717                      i=0;
   \   00000238   0020A0E3           MOV      R2,#+0
   \   0000023C   B200C3E1           STRH     R0,[R3, #+2]
   \   00000240   0D0000EA           B        ??method5_15
    718                      while((i=FindReferenceById(vd,rf->id,i))>=0)
    719                      {
    720                        rfp=vd->ref_cache+i;
   \                     ??method5_16:
   \   00000244   C41094E5           LDR      R1,[R4, #+196]
   \   00000248   2420A0E3           MOV      R2,#+36
   \   0000024C   921021E0           MLA      R1,R2,R0,R1
    721                        if (rfp!=rf)
   \   00000250   080051E1           CMP      R1,R8
   \   00000254   0700000A           BEQ      ??method5_17
   \   00000258   001091E5           LDR      R1,[R1, #+0]
   \   0000025C   082094E5           LDR      R2,[R4, #+8]
   \   00000260   EC3094E5           LDR      R3,[R4, #+236]
   \   00000264   811082E0           ADD      R1,R2,R1, LSL #+1
   \   00000268   B220D1E1           LDRH     R2,[R1, #+2]
   \   0000026C   030052E1           CMP      R2,R3
    722                          if (vd->rawtext[rfp->begin+1]==vd->WCHAR_RADIO_ON)
    723                            vd->rawtext[rfp->begin+1]=vd->WCHAR_RADIO_OFF;
   \   00000270   E8209405           LDREQ    R2,[R4, #+232]
   \   00000274   B220C101           STRHEQ   R2,[R1, #+2]
    724                        i++;
   \                     ??method5_17:
   \   00000278   012080E2           ADD      R2,R0,#+1
    725                      }
   \                     ??method5_15:
   \   0000027C   0C1098E5           LDR      R1,[R8, #+12]
   \   00000280   0400A0E1           MOV      R0,R4
   \   00000284   ........           _BLF     FindReferenceById,??FindReferenceById??rA
   \   00000288   000050E3           CMP      R0,#+0
   \   0000028C   ECFFFF5A           BPL      ??method5_16
    726                    }
    727                    if (!rf->no_upload)
   \   00000290   2000D8E5           LDRB     R0,[R8, #+32]
   \   00000294   010010E3           TST      R0,#0x1
   \   00000298   1401001A           BNE      ??method5_3
    728                    {
    729                      goto_url=malloc(strlen(vd->pageurl)+1);
   \                     ??method5_18:
   \   0000029C   070000EA           B        ??method5_19
    730                      strcpy(goto_url,vd->pageurl);
    731                      from_url=malloc(strlen(vd->pageurl)+1);
    732                      strcpy(from_url,vd->pageurl);
    733                      goto_params=collectItemsParams(vd,rf);
    734                      return 0xFF;
    735                    }
    736                    break;
    737                  case 'c':
    738                    if (vd->rawtext[rf->begin+1]==vd->WCHAR_BUTTON_ON)
   \                     ??method5_20:
   \   000002A0   B210D3E1           LDRH     R1,[R3, #+2]
   \   000002A4   E40094E5           LDR      R0,[R4, #+228]
   \   000002A8   000051E1           CMP      R1,R0
    739                      vd->rawtext[rf->begin+1]=vd->WCHAR_BUTTON_OFF;
   \   000002AC   E0009405           LDREQ    R0,[R4, #+224]
    740                    else
    741                      vd->rawtext[rf->begin+1]=vd->WCHAR_BUTTON_ON;
   \   000002B0   B200C3E1           STRH     R0,[R3, #+2]
    742                    if (!rf->no_upload)
   \   000002B4   2000D8E5           LDRB     R0,[R8, #+32]
   \   000002B8   010010E3           TST      R0,#0x1
   \   000002BC   0B01001A           BNE      ??method5_3
    743                    {
    744                      goto_url=malloc(strlen(vd->pageurl)+1);
   \                     ??method5_19:
   \   000002C0   D80094E5           LDR      R0,[R4, #+216]
   \   000002C4   1B0000EF           SWI      +27
   \   000002C8   010080E2           ADD      R0,R0,#+1
   \   000002CC   140000EF           SWI      +20
   \   000002D0   1C0186E5           STR      R0,[R6, #+284]
    745                      strcpy(goto_url,vd->pageurl);
   \   000002D4   D81094E5           LDR      R1,[R4, #+216]
   \   000002D8   1A0000EF           SWI      +26
    746                      from_url=malloc(strlen(vd->pageurl)+1);
   \                     ??method5_11:
   \   000002DC   D80094E5           LDR      R0,[R4, #+216]
   \   000002E0   1B0000EF           SWI      +27
   \   000002E4   010080E2           ADD      R0,R0,#+1
   \   000002E8   140000EF           SWI      +20
   \   000002EC   200186E5           STR      R0,[R6, #+288]
    747                      strcpy(from_url,vd->pageurl);
   \   000002F0   D81094E5           LDR      R1,[R4, #+216]
   \   000002F4   1A0000EF           SWI      +26
    748                      goto_params=collectItemsParams(vd,rf);
   \   000002F8   0810A0E1           MOV      R1,R8
   \   000002FC   0400A0E1           MOV      R0,R4
   \   00000300   ........           BL       collectItemsParams
   \   00000304   240186E5           STR      R0,[R6, #+292]
    749                      return 0xFF;
   \                     ??method5_9:
   \   00000308   FF00A0E3           MOV      R0,#+255
   \                     ??method5_21:
   \   0000030C   84D08DE2           ADD      SP,SP,#+132
   \   00000310   F08FBDE8           POP      {R4-R11,PC}
    750                    }
    751                    break;
    752                  case 'x':
    753                  case 'p':
    754                    {
    755                      MAIN_CSM *main_csm;
    756                      int bookmark_menu_id;
    757                      if ((main_csm=(MAIN_CSM *)FindCSMbyID(maincsm_id)))
   \                     ??method5_22:
   \   00000314   080100EF           SWI      +264
   \   00000318   0050B0E1           MOVS     R5,R0
   \   0000031C   F300000A           BEQ      ??method5_3
    758                      {
    759                        bookmark_menu_id=CreateInputBox(vd,rf);
    760                        main_csm->sel_bmk=bookmark_menu_id;
   \   00000320   0810A0E1           MOV      R1,R8
   \   00000324   0400A0E1           MOV      R0,R4
   \   00000328   ........           _BLF     CreateInputBox,??CreateInputBox??rA
   \                     ??method5_23:
   \   0000032C   300085E5           STR      R0,[R5, #+48]
   \   00000330   EE0000EA           B        ??method5_3
    761                      }
    762                    }
    763                    break;
    764                  case 'i':
    765                  case 'u':
    766                    goto_url=malloc(strlen(vd->pageurl)+1);
    767                    strcpy(goto_url,vd->pageurl);
    768                    from_url=malloc(strlen(vd->pageurl)+1);
    769                    strcpy(from_url,vd->pageurl);
    770                    goto_params=collectItemsParams(vd,rf);
    771                    return 0xFF;
    772                  case 's':
    773                    
    774                    {
    775                      MAIN_CSM *main_csm;
    776                      int bookmark_menu_id;
    777                      if ((main_csm=(MAIN_CSM *)FindCSMbyID(maincsm_id)))
   \                     ??method5_24:
   \   00000334   080100EF           SWI      +264
   \   00000338   0050B0E1           MOVS     R5,R0
   \   0000033C   EB00000A           BEQ      ??method5_3
    778                      {
    779                        bookmark_menu_id=ChangeMenuSelection(vd, rf);
    780                        main_csm->sel_bmk=bookmark_menu_id;
   \   00000340   0810A0E1           MOV      R1,R8
   \   00000344   0400A0E1           MOV      R0,R4
   \   00000348   ........           _BLF     ChangeMenuSelection,??ChangeMenuSelection??rA
   \   0000034C   F6FFFFEA           B        ??method5_23
    781                      }
    782                    }
    783                    break;
    784                  default:
    785                    {
    786                      char c[128];
    787                      sprintf(c,lgpData[LGP_RefUnderConstruction],rf->tag);
   \                     ??method5_6:
   \   00000350   101096E5           LDR      R1,[R6, #+16]
   \   00000354   04008DE2           ADD      R0,SP,#+4
   \   00000358   160000EF           SWI      +22
    788                      ShowMSG(1,(int)c);
   \   0000035C   04108DE2           ADD      R1,SP,#+4
   \                     ??method5_25:
   \   00000360   0100A0E3           MOV      R0,#+1
   \   00000364   480100EF           SWI      +328
   \   00000368   E00000EA           B        ??method5_3
    789                    }
    790                  break;
    791                  }
    792                }
    793                else
    794                {
    795          	      ShowMSG(1,(int)lgpData[LGP_RefEmpty]);
   \                     ??method5_5:
   \   0000036C   141096E5           LDR      R1,[R6, #+20]
   \   00000370   FAFFFFEA           B        ??method5_25
    796                }
    797                break;
    798              case UP_BUTTON:
    799                if (vd->pos_cur_ref==0xFFFFFFFF&&vd->pos_last_ref!=0xFFFFFFFF)
   \                     ??method5_26:
   \   00000374   070051E1           CMP      R1,R7
   \   00000378   0400001A           BNE      ??method5_27
   \   0000037C   300094E5           LDR      R0,[R4, #+48]
   \   00000380   070050E1           CMP      R0,R7
   \   00000384   0100000A           BEQ      ??method5_27
    800                  vd->pos_cur_ref=vd->pos_last_ref;
   \                     ??method5_28:
   \   00000388   280084E5           STR      R0,[R4, #+40]
   \   0000038C   D70000EA           B        ??method5_3
    801                else
    802                  if (vd->pos_prev_ref!=0xFFFFFFFF)
   \                     ??method5_27:
   \   00000390   340094E5           LDR      R0,[R4, #+52]
   \   00000394   070050E1           CMP      R0,R7
   \   00000398   FAFFFF1A           BNE      ??method5_28
    803                    vd->pos_cur_ref=vd->pos_prev_ref;
    804                  else
    805                  {
    806                    scrollUp(vd,20);
   \   0000039C   1410A0E3           MOV      R1,#+20
   \   000003A0   0400A0E1           MOV      R0,R4
   \   000003A4   ........           _BLF     scrollUp,??scrollUp??rA
    807                    RenderPage(vd,0);
   \   000003A8   0010A0E3           MOV      R1,#+0
   \   000003AC   0400A0E1           MOV      R0,R4
   \   000003B0   ........           _BLF     RenderPage,??RenderPage??rA
    808                    if (vd->pos_prev_ref!=0xFFFFFFFF)
   \   000003B4   340094E5           LDR      R0,[R4, #+52]
   \                     ??method5_29:
   \   000003B8   070050E1           CMP      R0,R7
   \   000003BC   CB00000A           BEQ      ??method5_3
    809                      vd->pos_cur_ref=vd->pos_prev_ref;
   \   000003C0   F0FFFFEA           B        ??method5_28
    810                  }
    811                break;
    812              case DOWN_BUTTON:
    813                if (vd->pos_cur_ref==0xFFFFFFFF&&vd->pos_first_ref!=0xFFFFFFFF)
   \                     ??method5_30:
   \   000003C4   070051E1           CMP      R1,R7
   \   000003C8   0300001A           BNE      ??method5_31
   \   000003CC   2C0094E5           LDR      R0,[R4, #+44]
   \   000003D0   070050E1           CMP      R0,R7
    814                  vd->pos_cur_ref=vd->pos_first_ref;
   \   000003D4   28008415           STRNE    R0,[R4, #+40]
   \   000003D8   C400001A           BNE      ??method5_3
    815                else
    816                  if (vd->pos_next_ref!=0xFFFFFFFF)
   \                     ??method5_31:
   \   000003DC   380094E5           LDR      R0,[R4, #+56]
   \   000003E0   070050E1           CMP      R0,R7
   \   000003E4   E7FFFF1A           BNE      ??method5_28
    817                    vd->pos_cur_ref=vd->pos_next_ref;
    818                  else
    819                  {
    820                    scrollDown(vd,20);
   \   000003E8   1410A0E3           MOV      R1,#+20
   \   000003EC   0400A0E1           MOV      R0,R4
   \   000003F0   ........           _BLF     scrollDown,??scrollDown??rA
    821                    RenderPage(vd,0);
   \   000003F4   0010A0E3           MOV      R1,#+0
   \   000003F8   0400A0E1           MOV      R0,R4
   \   000003FC   ........           _BLF     RenderPage,??RenderPage??rA
    822                    if (vd->pos_next_ref!=0xFFFFFFFF)
   \   00000400   380094E5           LDR      R0,[R4, #+56]
   \   00000404   EBFFFFEA           B        ??method5_29
    823                      vd->pos_cur_ref=vd->pos_next_ref;
    824                  }
    825                break;
    826              case RIGHT_BUTTON:
    827              case VOL_DOWN_BUTTON:
    828                scrollDown(vd,ScreenH()-20);
   \                     ??method5_32:
   \   00000408   898100EF           SWI      +33161
   \   0000040C   141040E2           SUB      R1,R0,#+20
   \   00000410   0400A0E1           MOV      R0,R4
   \   00000414   ........           _BLF     scrollDown,??scrollDown??rA
    829                vd->pos_cur_ref=0xFFFFFFFF;
   \                     ??method5_33:
   \   00000418   287084E5           STR      R7,[R4, #+40]
   \   0000041C   B30000EA           B        ??method5_3
    830                break;
    831              case LEFT_BUTTON:
    832              case VOL_UP_BUTTON:
    833                scrollUp(vd,ScreenH()-20);
   \                     ??method5_34:
   \   00000420   898100EF           SWI      +33161
   \   00000424   141040E2           SUB      R1,R0,#+20
   \   00000428   0400A0E1           MOV      R0,R4
   \   0000042C   ........           _BLF     scrollUp,??scrollUp??rA
    834                vd->pos_cur_ref=0xFFFFFFFF;
   \   00000430   F8FFFFEA           B        ??method5_33
    835                break;
    836              case LEFT_SOFT:
    837                STOPPED=1;
   \                     ??method5_35:
   \   00000434   102186E5           STR      R2,[R6, #+272]
    838                CreateMainMenu(vd);
   \   00000438   0400A0E1           MOV      R0,R4
   \   0000043C   ........           _BLF     CreateMainMenu,??CreateMainMenu??rA
   \   00000440   AA0000EA           B        ??method5_3
    839                break;
    840              case RIGHT_SOFT:
    841                if (STOPPED)
   \                     ??method5_36:
   \   00000444   100196E5           LDR      R0,[R6, #+272]
   \   00000448   000050E3           CMP      R0,#+0
   \   0000044C   0300000A           BEQ      ??method5_37
    842                {
    843                  mfree(PopPageFromStack());
   \   00000450   ........           _BLF     PopPageFromStack,??PopPageFromStack??rA
   \   00000454   150000EF           SWI      +21
    844                  return 0xFE;
   \   00000458   FE00A0E3           MOV      R0,#+254
   \   0000045C   AAFFFFEA           B        ??method5_21
    845                }
    846                else
    847                {
    848                  if (view_url_mode==MODE_URL)
   \                     ??method5_37:
   \   00000460   140196E5           LDR      R0,[R6, #+276]
   \   00000464   010050E3           CMP      R0,#+1
   \   00000468   0200001A           BNE      ??method5_38
    849                  {
    850                    SUBPROC((void*)StopINET);
   \   0000046C   ........           LDR      R0,??DataTable13  ;; StopINET
   \   00000470   710100EF           SWI      +369
   \   00000474   9D0000EA           B        ??method5_3
    851                  }
    852                  else
    853                  {
    854                    STOPPED=1;
   \                     ??method5_38:
   \   00000478   102186E5           STR      R2,[R6, #+272]
   \   0000047C   9B0000EA           B        ??method5_3
    855                  }
    856                  break;
    857                }
    858                case 0x31: // '1'
    859                  if (rf = FindReference(vd,vd->pos_cur_ref))
   \                     ??method5_39:
   \   00000480   0400A0E1           MOV      R0,R4
   \   00000484   ........           _BLF     FindReference,??FindReference??rA
   \   00000488   0080B0E1           MOVS     R8,R0
    860                  {
    861                    if (rf->id != _NOREF)
   \   0000048C   0C109815           LDRNE    R1,[R8, #+12]
   \   00000490   07005111           CMPNE    R1,R7
   \   00000494   9500000A           BEQ      ??method5_3
    862                    {
    863                      if (rf->tag == 'L' || rf->tag == 'Z' || rf->tag == '@')
   \   00000498   080098E5           LDR      R0,[R8, #+8]
   \   0000049C   4C0050E3           CMP      R0,#+76
   \   000004A0   5A005013           CMPNE    R0,#+90
   \   000004A4   40005013           CMPNE    R0,#+64
   \   000004A8   9000001A           BNE      ??method5_3
    864                      {
    865                        char * s = extract_omstr(vd, rf->id);
   \   000004AC   0400A0E1           MOV      R0,R4
   \   000004B0   ........           _BLF     extract_omstr,??extract_omstr??rA
   \   000004B4   0040A0E1           MOV      R4,R0
    866                        if (rf->tag == 'L') s += 2;
   \   000004B8   080098E5           LDR      R0,[R8, #+8]
   \   000004BC   4C0050E3           CMP      R0,#+76
   \   000004C0   02408402           ADDEQ    R4,R4,#+2
   \   000004C4   0500000A           BEQ      ??method5_40
    867                        if (rf->tag == 'Z') s += strlen(s) + 1;
   \   000004C8   5A0050E3           CMP      R0,#+90
   \   000004CC   0300001A           BNE      ??method5_40
   \   000004D0   0400A0E1           MOV      R0,R4
   \   000004D4   1B0000EF           SWI      +27
   \   000004D8   040080E0           ADD      R0,R0,R4
   \   000004DC   014080E2           ADD      R4,R0,#+1
    868                        
    869                        if (sieget_ipc.data) mfree(sieget_ipc.data);
   \                     ??method5_40:
   \   000004E0   417FA0E3           MOV      R7,#+260
   \   000004E4   060097E7           LDR      R0,[R7, +R6]
   \   000004E8   000050E3           CMP      R0,#+0
   \   000004EC   0000000A           BEQ      ??method5_41
   \   000004F0   150000EF           SWI      +21
    870                        sieget_ipc.name_to = sieget_ipc_name; //  url  SieGet
   \                     ??method5_41:
   \   000004F4   3C0085E2           ADD      R0,R5,#+60
   \   000004F8   FC0086E5           STR      R0,[R6, #+252]
    871                        sieget_ipc.name_from = ipc_my_name;
   \   000004FC   1C0085E2           ADD      R0,R5,#+28
   \   00000500   000186E5           STR      R0,[R6, #+256]
    872                        sieget_ipc.data = malloc(strlen(s) + 1);
   \   00000504   0400A0E1           MOV      R0,R4
   \   00000508   1B0000EF           SWI      +27
   \   0000050C   010080E2           ADD      R0,R0,#+1
   \   00000510   140000EF           SWI      +20
   \   00000514   060087E7           STR      R0,[R7, +R6]
    873                        strcpy((char *)sieget_ipc.data, s);
   \   00000518   0410A0E1           MOV      R1,R4
   \   0000051C   1A0000EF           SWI      +26
    874                        GBS_SendMessage(MMI_CEPID, MSG_IPC, SIEGET_GOTO_URL, &sieget_ipc);
   \   00000520   FC3086E2           ADD      R3,R6,#+252
   \   00000524   0020A0E3           MOV      R2,#+0
   \   00000528   B010A0E3           MOV      R1,#+176
   \   0000052C   DE1C81E3           ORR      R1,R1,#0xDE00
   \   00000530   0900A0E3           MOV      R0,#+9
   \   00000534   420C80E3           ORR      R0,R0,#0x4200
   \   00000538   000100EF           SWI      +256
    875          
    876                        s=0; // is it necessary
    877                        mfree(s);
   \                     ??method5_42:
   \   0000053C   0000A0E3           MOV      R0,#+0
   \   00000540   35FFFFEA           B        ??method5_13
    878                      }
    879                    }
    880                  }
    881                break;
    882              case 0x32:
    883              case GREEN_BUTTON:
    884                rf=FindReference(vd,vd->pos_cur_ref);
   \                     ??method5_43:
   \   00000544   0400A0E1           MOV      R0,R4
   \   00000548   ........           _BLF     FindReference,??FindReference??rA
   \   0000054C   0080B0E1           MOVS     R8,R0
    885                if (rf)
    886                {
    887                  if (rf->id!=_NOREF)
   \   00000550   0C109815           LDRNE    R1,[R8, #+12]
   \   00000554   07005111           CMPNE    R1,R7
   \   00000558   6400000A           BEQ      ??method5_3
    888                  {
    889                    if (rf->tag=='L'||rf->tag=='Z')
   \   0000055C   080098E5           LDR      R0,[R8, #+8]
   \   00000560   4C0050E3           CMP      R0,#+76
   \   00000564   5A005013           CMPNE    R0,#+90
   \   00000568   6000001A           BNE      ??method5_3
    890                    {
    891                      char *s=extract_omstr(vd,rf->id);
   \   0000056C   0400A0E1           MOV      R0,R4
   \   00000570   ........           _BLF     extract_omstr,??extract_omstr??rA
   \   00000574   0040A0E1           MOV      R4,R0
    892                      if (rf->tag=='L')
   \   00000578   080098E5           LDR      R0,[R8, #+8]
   \   0000057C   4C0050E3           CMP      R0,#+76
    893                        s+=2;
   \   00000580   02408402           ADDEQ    R4,R4,#+2
   \   00000584   0500000A           BEQ      ??method5_44
    894                      if (rf->tag=='Z')
   \   00000588   5A0050E3           CMP      R0,#+90
   \   0000058C   0300001A           BNE      ??method5_44
    895                        s+=strlen(s)+1;
   \   00000590   0400A0E1           MOV      R0,R4
   \   00000594   1B0000EF           SWI      +27
   \   00000598   040080E0           ADD      R0,R0,R4
   \   0000059C   014080E2           ADD      R4,R0,#+1
    896                      if (msg->gbsmsg->submess==0x32)
   \                     ??method5_44:
   \   000005A0   040099E5           LDR      R0,[R9, #+4]
   \   000005A4   080090E5           LDR      R0,[R0, #+8]
   \   000005A8   320050E3           CMP      R0,#+50
    897                      {
    898                        RunOtherCopyByURL(s,1);
   \   000005AC   0110A003           MOVEQ    R1,#+1
    899                      }
    900                      else
    901                      {
    902                        RunOtherCopyByURL(s,0);
   \   000005B0   0010A013           MOVNE    R1,#+0
   \   000005B4   0400A0E1           MOV      R0,R4
   \   000005B8   ........           BL       RunOtherCopyByURL
    903                      }
    904                      s=0; // is it necessary
    905                      mfree(s);
   \   000005BC   DEFFFFEA           B        ??method5_42
    906                    }
    907                  }
    908                }
    909                break;
    910              case 0x33: // '3'
    911                vd->pixdisp=0;
   \                     ??method5_45:
   \   000005C0   208084E5           STR      R8,[R4, #+32]
    912                vd->view_line=0;
   \   000005C4   1C8084E5           STR      R8,[R4, #+28]
    913                vd->pos_cur_ref=0xFFFFFFFF;
   \   000005C8   92FFFFEA           B        ??method5_33
    914                break;
    915              /*case 0x34: // '4'
    916                {
    917                  //Dump RAWTEXT
    918                  unsigned int ul;
    919                  int f;
    920                  if ((f=fopen("0:\\zbin\\balletmini\\dumpraw.txt",A_ReadWrite+A_Create+A_Truncate,P_READ+P_WRITE,&ul))!=-1)
    921                  {
    922                    fwrite(f,vd->rawtext,vd->rawtext_size*2,&ul);
    923                    fclose(f,&ul);
    924                  }
    925                }
    926                break;
    927              case 0x37: // '7'
    928                {
    929                  //Dump REFCACHE
    930                  unsigned int ul;
    931                  int f;
    932                  if ((f=fopen("0:\\zbin\\balletmini\\dumpref.txt",A_ReadWrite+A_Create+A_Truncate,P_READ+P_WRITE,&ul))!=-1)
    933                  {
    934                    char c[256];
    935                    sprintf(c,"\nref_cache_size : %i\n",vd->ref_cache_size);
    936                    fwrite(f,c,strlen(c),&ul);
    937                    sprintf(c,  "oms_size       : %i\n",vd->oms_size);
    938                    fwrite(f,c,strlen(c),&ul);
    939                    sprintf(c,  "page_sz        : %i\n",vd->page_sz);
    940                    fwrite(f,c,strlen(c),&ul);
    941                    sprintf(c,  "loaded_sz      : %i\n\n",vd->loaded_sz);
    942                    fwrite(f,c,strlen(c),&ul);
    943                    for (int i=0;i<vd->ref_cache_size;i++)
    944                    {
    945                      REFCACHE *rf=vd->ref_cache+i;
    946                      sprintf(c,"\nREF : %i\n",i);
    947                      fwrite(f,c,strlen(c),&ul);
    948                      sprintf(c,"  tag:       %c\n",rf->tag);
    949                      fwrite(f,c,strlen(c),&ul);
    950                      sprintf(c,"  id:        %u",rf->id);
    951                      fwrite(f,c,strlen(c),&ul);
    952                      if (rf->id!=_NOREF)
    953                      {
    954                        char *s=extract_omstr(vd,rf->id);
    955                        for (int to=strlen(s);to;to--) if (s[to-1]==NULL) s[to-1]=' ';
    956                        sprintf(c,"   %s",s);
    957                        fwrite(f,c,strlen(c),&ul);
    958                        mfree(s);
    959                      }
    960                      fwrite(f,"\n",1,&ul);
    961                      sprintf(c,"  id2:       %u",rf->id2);
    962                      fwrite(f,c,strlen(c),&ul);
    963                      if (rf->id2!=_NOREF&&rf->tag!='@')
    964                      {
    965                        char *s=extract_omstr(vd,rf->id2);
    966                        for (int to=_rshort2(vd->oms+rf->id)-1;to;to--) if (s[to]==NULL) s[to]=' ';
    967                        sprintf(c,"   %s",s);
    968                        fwrite(f,c,strlen(c),&ul);
    969                        mfree(s);
    970                      }
    971                      fwrite(f,"\n",1,&ul);
    972                      sprintf(c,"  value:     %u",rf->value);
    973                      fwrite(f,c,strlen(c),&ul);
    974                      if (rf->value!=_NOREF)
    975                      {
    976                        char *s=extract_omstr(vd,rf->value);
    977                        for (int to=_rshort2(vd->oms+rf->id)-1;to;to--) if (s[to]==NULL) s[to]=' ';
    978                        sprintf(c,"   %s",s);
    979                        fwrite(f,c,strlen(c),&ul);
    980                        mfree(s);
    981                      }
    982                      fwrite(f,"\n",1,&ul);
    983                      sprintf(c,"  begin:     %u\n",rf->begin);
    984                      fwrite(f,c,strlen(c),&ul);
    985                      sprintf(c,"  end:       %u\n",rf->end);
    986                      fwrite(f,c,strlen(c),&ul);
    987                      sprintf(c,"  upload:    %s\n",rf->no_upload?"false":"true");
    988                      fwrite(f,c,strlen(c),&ul);
    989                      if (rf->tag=='s')
    990                      {
    991                        sprintf(c,"  multiple:  %s\n",rf->multiselect?"true":"false");
    992                        fwrite(f,c,strlen(c),&ul);
    993                        sprintf(c,"  size:    %i ",rf->size);
    994                        fwrite(f,c,strlen(c),&ul);
    995                        fwrite(f,rf->data,rf->size,&ul);
    996                        fwrite(f,"\n",1,&ul);
    997                      }
    998                    }
    999                    fclose(f,&ul);
   1000                  }
   1001                }
   1002                break;
   1003              case 0x38: // '8'
   1004                {
   1005                  //Dump LINECACHE
   1006                  unsigned int ul;
   1007                  int f;
   1008                  if ((f=fopen("0:\\zbin\\balletmini\\dumplc.txt",A_ReadWrite+A_Create+A_Truncate,P_READ+P_WRITE,&ul))!=-1)
   1009                  {
   1010                    char c[256];
   1011                    sprintf(c,"\nlines_cache_size : %i\n",vd->lines_cache_size);
   1012                    fwrite(f,c,strlen(c),&ul);
   1013                    for (int i=0;i<vd->lines_cache_size;i++)
   1014                    {
   1015                      LINECACHE *lc=vd->lines_cache+i;
   1016                      sprintf(c,"%i\n  pos : %u\n  pix : %u\n",i,lc->pos,lc->pixheight);
   1017                      fwrite(f,c,strlen(c),&ul);
   1018                    }
   1019                   fclose(f,&ul);
   1020                  }
   1021                }
   1022                break;*/
   1023              case 0x39: // '9'
   1024                while(LineDown(vd)) ;
   \                     ??method5_46:
   \   000005CC   0400A0E1           MOV      R0,R4
   \   000005D0   ........           _BLF     LineDown,??LineDown??rA
   \   000005D4   000050E3           CMP      R0,#+0
   \   000005D8   FBFFFF1A           BNE      ??method5_46
   1025                vd->pixdisp=0;
   \   000005DC   208084E5           STR      R8,[R4, #+32]
   1026                scrollUp(vd,ScreenH()-1);
   \   000005E0   898100EF           SWI      +33161
   \   000005E4   011040E2           SUB      R1,R0,#+1
   \   000005E8   0400A0E1           MOV      R0,R4
   \   000005EC   ........           _BLF     scrollUp,??scrollUp??rA
   1027                vd->pos_cur_ref=0xFFFFFFFF;
   \   000005F0   88FFFFEA           B        ??method5_33
   1028                break;
   1029              case 0x30: // '0'
   1030                {
   1031                  // get text from page
   1032                  int scr_h=ScreenH()-1;
   \                     ??method5_47:
   \   000005F4   898100EF           SWI      +33161
   \   000005F8   015040E2           SUB      R5,R0,#+1
   1033                  WSHDR *ws=AllocWS(512);
   \   000005FC   800FA0E3           MOV      R0,#+512
   \   00000600   250100EF           SWI      +293
   1034                  LINECACHE *lc;
   1035                  unsigned int vl;
   1036                  int ypos=-vd->pixdisp;
   1037                  unsigned int store_line=vl=vd->view_line;
   \   00000604   1C8094E5           LDR      R8,[R4, #+28]
   \   00000608   0060A0E1           MOV      R6,R0
   \   0000060C   200094E5           LDR      R0,[R4, #+32]
   \   00000610   00808DE5           STR      R8,[SP, #+0]
   \   00000614   007060E2           RSB      R7,R0,#+0
   \   00000618   060000EA           B        ??method5_48
   1038                  unsigned int len;
   1039                  int sc;
   1040                  int c;
   1041          
   1042                  while(ypos<=scr_h)
   1043                  {
   1044                    if (LineDown(vd))
   1045                    {
   1046                      lc=vd->lines_cache+vl;
   1047                      if ((vl+1)<vd->lines_cache_size)
   1048                      {
   1049                        len=(lc[1]).pos-(lc[0]).pos;
   1050                      }
   1051                      else
   1052                        len=vd->rawtext_size-lc->pos;
   1053                      sc=lc->pos;
   1054                      while(len>0)
   1055                      {
   1056                        c=vd->rawtext[sc];
   1057                        if ((c&0xFF00)!=0xE100)
   1058                        {
   1059                          switch (c)
   1060                          {
   1061                          case UTF16_FONT_SMALL:
   1062                          case UTF16_FONT_SMALL_BOLD:
   1063                          case UTF16_DIS_UNDERLINE:
   1064                          case UTF16_ENA_UNDERLINE:
   1065                          case UTF16_ENA_INVERT:
   1066                          case UTF16_DIS_INVERT:
   1067                          case UTF16_ALIGN_LEFT:
   1068                          case UTF16_ALIGN_RIGHT:
   1069                          case UTF16_ENA_CENTER:
   1070                          case UTF16_DIS_CENTER:
   1071                            break;
   1072                          case UTF16_INK_RGBA:
   1073                          case UTF16_PAPER_RGBA:
   1074                            len--;
   1075                            sc++;
   1076                            len--;
   1077                            sc++;
   1078                            break;
   1079                          default :
   1080                            wsAppendChar(ws,c);
   \                     ??method5_49:
   \   0000061C   0600A0E1           MOV      R0,R6
   \   00000620   1C0000EF           SWI      +28
   1081                          }
   1082                        }
   1083                        sc++;
   \                     ??method5_50:
   \   00000624   01B08BE2           ADD      R11,R11,#+1
   1084                        len--;
   \   00000628   01A05AE2           SUBS     R10,R10,#+1
   \   0000062C   1300001A           BNE      ??method5_51
   1085                      }
   1086                      ypos+=lc->pixheight;
   \                     ??method5_52:
   \   00000630   BE00D9E1           LDRH     R0,[R9, #+14]
   \   00000634   077080E0           ADD      R7,R0,R7
   1087                      vl++;
   \                     ??method5_48:
   \   00000638   070055E1           CMP      R5,R7
   \   0000063C   270000BA           BLT      ??method5_53
   \   00000640   0400A0E1           MOV      R0,R4
   \   00000644   ........           _BLF     LineDown,??LineDown??rA
   \   00000648   000050E3           CMP      R0,#+0
   \   0000064C   2300000A           BEQ      ??method5_53
   \   00000650   100094E5           LDR      R0,[R4, #+16]
   \   00000654   089280E0           ADD      R9,R0,R8, LSL #+4
   \   00000658   140094E5           LDR      R0,[R4, #+20]
   \   0000065C   001099E5           LDR      R1,[R9, #+0]
   \   00000660   018088E2           ADD      R8,R8,#+1
   \   00000664   000058E1           CMP      R8,R0
   \   00000668   10009935           LDRCC    R0,[R9, #+16]
   \   0000066C   01B0A0E1           MOV      R11,R1
   \   00000670   0C009425           LDRCS    R0,[R4, #+12]
   \   00000674   01A040E0           SUB      R10,R0,R1
   \   00000678   00005AE3           CMP      R10,#+0
   \   0000067C   EBFFFF0A           BEQ      ??method5_52
   \                     ??method5_51:
   \   00000680   080094E5           LDR      R0,[R4, #+8]
   \   00000684   8B0080E0           ADD      R0,R0,R11, LSL #+1
   \   00000688   B010D0E1           LDRH     R1,[R0, #+0]
   \   0000068C   FF0C01E2           AND      R0,R1,#0xFF00
   \   00000690   E10C50E3           CMP      R0,#+57600
   \   00000694   E2FFFF0A           BEQ      ??method5_50
   \   00000698   010041E2           SUB      R0,R1,#+1
   \   0000069C   E00C40E2           SUB      R0,R0,#+57344
   \   000006A0   1E0050E3           CMP      R0,#+30
   \   000006A4   DCFFFF8A           BHI      ??method5_49
   \   000006A8   012F8FE2           ADR      R2,??method5_2
   \   000006AC   D02092E1           LDRSB    R2,[R2, R0]
   \   000006B0   02F18FE0           ADD      PC,PC,R2, LSL #+2
   \                     ??method5_2:
   \   000006B4   DBDBD9DB           DC8      +219,+219,+217,+219
   \   000006B8   DB0707D9           DC8      +219,+7,+7,+217
   \   000006BC   D9D9D9D9           DC8      +217,+217,+217,+217
   \   000006C0   D9D9D9D9           DC8      +217,+217,+217,+217
   \   000006C4   D9DBDBD9           DC8      +217,+219,+219,+217
   \   000006C8   D9D9D9D9           DC8      +217,+217,+217,+217
   \   000006CC   D9D9D9DB           DC8      +217,+217,+217,+219
   \   000006D0   DBDBDB00           DC8      +219,+219,+219,+0
   \                     ??method5_54:
   \   000006D4   02A04AE2           SUB      R10,R10,#+2
   \   000006D8   02B08BE2           ADD      R11,R11,#+2
   \   000006DC   D0FFFFEA           B        ??method5_50
   1088                    }
   1089                    else
   1090                      break;
   1091                  }
   1092                  vd->view_line=store_line;
   \                     ??method5_53:
   \   000006E0   00009DE5           LDR      R0,[SP, #+0]
   \   000006E4   1C0084E5           STR      R0,[R4, #+28]
   1093                  createTextView(ws);
   \   000006E8   0600A0E1           MOV      R0,R6
   \   000006EC   ........           _BLF     createTextView,??createTextView??rA
   1094                }
   1095                break;
   1096              }
   1097            }
   1098            DirectRedrawGUI();
   \                     ??method5_3:
   \   000006F0   3F0100EF           SWI      +319
   1099            return(0);
   \   000006F4   0000A0E3           MOV      R0,#+0
   \   000006F8   84D08DE2           ADD      SP,SP,#+132
   \   000006FC   F08FBDE8           POP      {R4-R11,PC}      ;; return
   1100          }
   1101          

   \                                 In segment CODE, align 4, keep-with-next
   1102          static int method8(void){return(0);}
   \                     method8:
   \   00000000   0000A0E3           MOV      R0,#+0
   \   00000004   1EFF2FE1           BX       LR               ;; return
   1103          

   \                                 In segment CODE, align 4, keep-with-next
   1104          static int method9(void){return(0);}
   \                     method9:
   \   00000000   0000A0E3           MOV      R0,#+0
   \   00000004   1EFF2FE1           BX       LR               ;; return
   1105          
   1106          static const void * const gui_methods[11]={
   1107            (void *)method0,  //Redraw
   1108            (void *)method1,  //Create
   1109            (void *)method2,  //Close
   1110            (void *)method3,  //Focus
   1111            (void *)method4,  //Unfocus
   1112            (void *)method5,  //OnKey
   1113            0,
   1114            (void *)kill_data, //method7, //Destroy
   1115            (void *)method8,
   1116            (void *)method9,
   1117            0
   1118          };
   1119          

   \                                 In segment CODE, align 4, keep-with-next
   1120          static int CreateViewGUI(int cached)
   1121          {
   \                     CreateViewGUI:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
   1122            static const RECT Canvas={0,0,0,0};
   1123            VIEW_GUI *view_gui=malloc(sizeof(VIEW_GUI));
   1124            zeromem(view_gui,sizeof(VIEW_GUI));
   1125            patch_rect((RECT*)&Canvas,0,0,ScreenW()-1,ScreenH()-1);
   \   00000004   60709FE5           LDR      R7,??CreateViewGUI_0  ;; gui_methods
   \   00000008   0040A0E1           MOV      R4,R0
   \   0000000C   4400A0E3           MOV      R0,#+68
   \   00000010   140000EF           SWI      +20
   \   00000014   0050A0E1           MOV      R5,R0
   \   00000018   4410A0E3           MOV      R1,#+68
   \   0000001C   1D0100EF           SWI      +285
   \   00000020   898100EF           SWI      +33161
   \   00000024   0060A0E1           MOV      R6,R0
   \   00000028   888100EF           SWI      +33160
   \   0000002C   011046E2           SUB      R1,R6,#+1
   \   00000030   02002DE9           PUSH     {R1}
   \   00000034   013040E2           SUB      R3,R0,#+1
   \   00000038   0020A0E3           MOV      R2,#+0
   \   0000003C   2C0087E2           ADD      R0,R7,#+44
   \   00000040   0010A0E3           MOV      R1,#+0
   \   00000044   ........           _BLF     patch_rect,??patch_rect??rA
   1126            view_gui->gui.canvas=(void *)(&Canvas);
   \   00000048   2C0087E2           ADD      R0,R7,#+44
   \   0000004C   000085E5           STR      R0,[R5, #+0]
   1127          //  view_gui->gui.flag30=2;
   1128            view_gui->gui.methods=(void *)gui_methods;
   \   00000050   047085E5           STR      R7,[R5, #+4]
   1129            view_gui->gui.item_ll.data_mfree=(void (*)(void *))mfree_adr();
   \   00000054   158000EF           SWI      +32789
   \   00000058   200085E5           STR      R0,[R5, #+32]
   1130            view_gui->cached=cached;
   \   0000005C   384085E5           STR      R4,[R5, #+56]
   1131            return CreateGUI(view_gui);
   \   00000060   0500A0E1           MOV      R0,R5
   \   00000064   370100EF           SWI      +311
   \   00000068   F280BDE8           POP      {R1,R4-R7,PC}    ;; return
   \                     ??CreateViewGUI_0:
   \   0000006C   ........           DC32     gui_methods
   1132          }

   \                                 In segment DATA_C, align 4, align-sorted
   \                     gui_methods:
   \   00000000   ............       DC32 method0, method1, method2, method3, method4, method5, 0H
   \              ............
   \              ............
   \              ............
   \              00000000    
   \   0000001C   ............       DC32 kill_data, method8, method9, 0H
   \              ............
   \              00000000    
   \   0000002C   000000000000       DC16 0, 0, 0, 0
   \              0000        
   1133          

   \                                 In segment CODE, align 4, keep-with-next
   1134          static void maincsm_oncreate(CSM_RAM *data)
   1135          {
   \                     maincsm_oncreate:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
   1136            MAIN_CSM *csm=(MAIN_CSM*)data;
   1137            ws_console=AllocWS(1024);
   \   00000004   ........           LDR      R5,??DataTable27  ;; lgpData
   \   00000008   0040A0E1           MOV      R4,R0
   \   0000000C   400EA0E3           MOV      R0,#+1024
   \   00000010   250100EF           SWI      +293
   \   00000014   280185E5           STR      R0,[R5, #+296]
   1138            csm->csm.state=0;
   \   00000018   0060A0E3           MOV      R6,#+0
   \   0000001C   106084E5           STR      R6,[R4, #+16]
   1139            csm->csm.unk1=0;
   \   00000020   146084E5           STR      R6,[R4, #+20]
   1140            csm->view_id=CreateViewGUI(0);
   \   00000024   0000A0E3           MOV      R0,#+0
   \   00000028   ........           BL       CreateViewGUI
   \   0000002C   280084E5           STR      R0,[R4, #+40]
   1141            sieget_ipc.data = NULL;
   \   00000030   046185E5           STR      R6,[R5, #+260]
   1142          }
   \   00000034   7080BDE8           POP      {R4-R6,PC}       ;; return
   1143          

   \                                 In segment CODE, align 4, keep-with-next
   1144          static void KillAll(void)
   1145          {
   \                     KillAll:
   \   00000000   00402DE9           PUSH     {LR}
   1146            FreePageStack();
   \   00000004   ........           _BLF     FreePageStack,??FreePageStack??rA
   1147            FreeWS(ws_console);
   \   00000008   0C009FE5           LDR      R0,??KillAll_0   ;; lgpData + 296
   \   0000000C   000090E5           LDR      R0,[R0, #+0]
   \   00000010   290100EF           SWI      +297
   1148            lgpFreeLangPack();
   \   00000014   0040BDE8           POP      {LR}             ;; Pop
   \   00000018   ........           B        lgpFreeLangPack  ;; tailcall
   \                     ??KillAll_0:
   \   0000001C   ........           DC32     lgpData + 296
   1149          }
   1150          

   \                                 In segment CODE, align 4, keep-with-next
   1151          static void Killer(void)
   1152          {
   \                     Killer:
   \   00000000   00402DE9           PUSH     {LR}
   1153            extern void *ELF_BEGIN;
   1154            KillAll();
   \   00000004   ........           BL       KillAll
   1155            kill_data(&ELF_BEGIN,(void (*)(void *))mfree_adr());
   \   00000008   158000EF           SWI      +32789
   \   0000000C   0010A0E1           MOV      R1,R0
   \   00000010   04009FE5           LDR      R0,??Killer_0    ;; ELF_BEGIN
   \   00000014   0040BDE8           POP      {LR}             ;; Pop
   \   00000018   ........           _BF      kill_data,??kill_data??rA  ;; tailcall
   \                     ??Killer_0:
   \   0000001C   ........           DC32     ELF_BEGIN
   1156          }
   1157          

   \                                 In segment CODE, align 4, keep-with-next
   1158          static void maincsm_onclose(CSM_RAM *csm)
   1159          {
   \                     maincsm_onclose:
   \   00000000   10402DE9           PUSH     {R4,LR}
   1160            TERMINATED=1;
   \   00000004   ........           LDR      R4,??DataTable27  ;; lgpData
   \   00000008   0100A0E3           MOV      R0,#+1
   \   0000000C   0C0184E5           STR      R0,[R4, #+268]
   1161            mfree(goto_url);
   \   00000010   1C0194E5           LDR      R0,[R4, #+284]
   \   00000014   150000EF           SWI      +21
   \   00000018   040194E5           LDR      R0,[R4, #+260]
   \   0000001C   000050E3           CMP      R0,#+0
   \   00000020   0000000A           BEQ      ??maincsm_onclose_0
   1162            if (sieget_ipc.data) mfree(sieget_ipc.data);
   \   00000024   150000EF           SWI      +21
   1163            SUBPROC((void *)Killer);
   \                     ??maincsm_onclose_0:
   \   00000028   ........           LDR      R0,??DataTable30  ;; Killer
   \   0000002C   710100EF           SWI      +369
   1164          }
   \   00000030   1080BDE8           POP      {R4,PC}          ;; return
   1165          

   \                                 In segment CODE, align 4, keep-with-next
   1166          void GotoLink(void)
   1167          {
   \                     GotoLink:
   \   00000000   00402DE9           PUSH     {LR}
   1168            LockSched();
   \   00000004   460100EF           SWI      +326
   1169            if (!TERMINATED)
   \   00000008   ........           LDR      R0,??DataTable19  ;; lgpData + 268
   \   0000000C   000090E5           LDR      R0,[R0, #+0]
   \   00000010   000050E3           CMP      R0,#+0
   \   00000014   0F00001A           BNE      ??GotoLink_0
   1170            {
   1171              IPC_REQ *sipc;
   1172              sipc=malloc(sizeof(IPC_REQ));
   \   00000018   0C00A0E3           MOV      R0,#+12
   \   0000001C   140000EF           SWI      +20
   1173              sipc->name_to=ipc_my_name;
   \   00000020   ........           LDR      R1,??DataTable22  ;; `?<Constant "$bookmarks\\\\">`
   1174              sipc->name_from=ipc_my_name;
   1175              sipc->data=NULL;
   1176              GBS_SendMessage(MMI_CEPID,MSG_IPC,IPC_GOTO_URL,sipc);
   \   00000024   0030A0E1           MOV      R3,R0
   \   00000028   1C2081E2           ADD      R2,R1,#+28
   \   0000002C   002080E5           STR      R2,[R0, #+0]
   \   00000030   1C1081E2           ADD      R1,R1,#+28
   \   00000034   041080E5           STR      R1,[R0, #+4]
   \   00000038   0010A0E3           MOV      R1,#+0
   \   0000003C   081080E5           STR      R1,[R0, #+8]
   \   00000040   0220A0E3           MOV      R2,#+2
   \   00000044   B010A0E3           MOV      R1,#+176
   \   00000048   DE1C81E3           ORR      R1,R1,#0xDE00
   \   0000004C   0900A0E3           MOV      R0,#+9
   \   00000050   420C80E3           ORR      R0,R0,#0x4200
   \   00000054   000100EF           SWI      +256
   1177            }
   1178            UnlockSched();
   \                     ??GotoLink_0:
   \   00000058   470100EF           SWI      +327
   1179          }
   \   0000005C   0080BDE8           POP      {PC}             ;; return
   1180          

   \                                 In segment CODE, align 4, keep-with-next
   1181          void GotoFile(void)
   1182          {
   \                     GotoFile:
   \   00000000   00402DE9           PUSH     {LR}
   1183            LockSched();
   \   00000004   460100EF           SWI      +326
   1184            if (!TERMINATED)
   \   00000008   ........           LDR      R0,??DataTable19  ;; lgpData + 268
   \   0000000C   000090E5           LDR      R0,[R0, #+0]
   \   00000010   000050E3           CMP      R0,#+0
   \   00000014   0F00001A           BNE      ??GotoFile_0
   1185            {
   1186              IPC_REQ *sipc;
   1187              sipc=malloc(sizeof(IPC_REQ));
   \   00000018   0C00A0E3           MOV      R0,#+12
   \   0000001C   140000EF           SWI      +20
   1188              sipc->name_to=ipc_my_name;
   \   00000020   ........           LDR      R1,??DataTable22  ;; `?<Constant "$bookmarks\\\\">`
   1189              sipc->name_from=ipc_my_name;
   1190              sipc->data=NULL;
   1191              GBS_SendMessage(MMI_CEPID,MSG_IPC,IPC_GOTO_FILE,sipc);
   \   00000024   0030A0E1           MOV      R3,R0
   \   00000028   1C2081E2           ADD      R2,R1,#+28
   \   0000002C   002080E5           STR      R2,[R0, #+0]
   \   00000030   1C1081E2           ADD      R1,R1,#+28
   \   00000034   041080E5           STR      R1,[R0, #+4]
   \   00000038   0010A0E3           MOV      R1,#+0
   \   0000003C   081080E5           STR      R1,[R0, #+8]
   \   00000040   0320A0E3           MOV      R2,#+3
   \   00000044   B010A0E3           MOV      R1,#+176
   \   00000048   DE1C81E3           ORR      R1,R1,#0xDE00
   \   0000004C   0900A0E3           MOV      R0,#+9
   \   00000050   420C80E3           ORR      R0,R0,#0x4200
   \   00000054   000100EF           SWI      +256
   1192            }
   1193            UnlockSched();
   \                     ??GotoFile_0:
   \   00000058   470100EF           SWI      +327
   1194          }
   \   0000005C   0080BDE8           POP      {PC}             ;; return
   1195          

   \                                 In segment CODE, align 4, keep-with-next
   1196          static int maincsm_onmessage(CSM_RAM *data, GBS_MSG *msg)
   1197          {
   \                     maincsm_onmessage:
   \   00000000   F0472DE9           PUSH     {R4-R10,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   1198            MAIN_CSM *csm=(MAIN_CSM*)data;
   1199            int csm_result=1;
   1200            //IPC
   1201            if (msg->msg==MSG_IPC)
   \   00000008   ........           LDR      R6,??DataTable28  ;; lgpData
   \   0000000C   0150A0E1           MOV      R5,R1
   \   00000010   040095E5           LDR      R0,[R5, #+4]
   \   00000014   0180A0E3           MOV      R8,#+1
   \   00000018   0070A0E3           MOV      R7,#+0
   \   0000001C   B010A0E3           MOV      R1,#+176
   \   00000020   DE1C81E3           ORR      R1,R1,#0xDE00
   \   00000024   010050E1           CMP      R0,R1
   \   00000028   4900001A           BNE      ??maincsm_onmessage_0
   1202            {
   1203              IPC_REQ *ipc;
   1204              if ((ipc=(IPC_REQ*)msg->data0))
   \   0000002C   0C9095E5           LDR      R9,[R5, #+12]
   \   00000030   000059E3           CMP      R9,#+0
   \   00000034   5500000A           BEQ      ??maincsm_onmessage_1
   1205              {
   1206                if (strcmp_nocase(ipc->name_to,ipc_my_name)==0)
   \   00000038   ........           LDR      R10,??DataTable22  ;; `?<Constant "$bookmarks\\\\">`
   \   0000003C   000099E5           LDR      R0,[R9, #+0]
   \   00000040   1C108AE2           ADD      R1,R10,#+28
   \   00000044   ........           _BLF     strcmp_nocase,??strcmp_nocase??rA
   \   00000048   000050E3           CMP      R0,#+0
   \   0000004C   4000001A           BNE      ??maincsm_onmessage_0
   1207                {
   1208                  //    ,   
   1209                  switch (msg->submess)
   \   00000050   081095E5           LDR      R1,[R5, #+8]
   \   00000054   040099E5           LDR      R0,[R9, #+4]
   \   00000058   011051E2           SUBS     R1,R1,#+1
   \   0000005C   0400000A           BEQ      ??maincsm_onmessage_2
   \   00000060   011051E2           SUBS     R1,R1,#+1
   \   00000064   1900000A           BEQ      ??maincsm_onmessage_3
   \   00000068   011051E2           SUBS     R1,R1,#+1
   \   0000006C   2700000A           BEQ      ??maincsm_onmessage_4
   \   00000070   370000EA           B        ??maincsm_onmessage_0
   1210                  {
   1211                  case IPC_DATA_ARRIVED:
   1212                    if (ipc->name_from==ipc_my_name)
   \                     ??maincsm_onmessage_2:
   \   00000074   1C108AE2           ADD      R1,R10,#+28
   \   00000078   010050E1           CMP      R0,R1
   \   0000007C   3400001A           BNE      ??maincsm_onmessage_0
   1213                    {
   1214                      VIEW_GUI *p=FindGUIbyId(csm->view_id,NULL);
   \   00000080   280094E5           LDR      R0,[R4, #+40]
   \   00000084   0010A0E3           MOV      R1,#+0
   \   00000088   090200EF           SWI      +521
   1215                      VIEWDATA *vd;
   1216                      int len=*((int*)(ipc->data));
   \   0000008C   081099E5           LDR      R1,[R9, #+8]
   1217                      char *buf=((char*)(ipc->data))+4;
   1218                      if (p)
   \   00000090   000050E3           CMP      R0,#+0
   1219                      {
   1220                        vd=p->vd;
   \   00000094   34009015           LDRNE    R0,[R0, #+52]
   \   00000098   ........           LDR      R2,[R1], #+4
   1221                        if (vd)
   \   0000009C   00005013           CMPNE    R0,#+0
   \   000000A0   0500000A           BEQ      ??maincsm_onmessage_5
   1222                        {
   1223                          OMS_DataArrived(vd,buf,len);
   \   000000A4   ........           _BLF     OMS_DataArrived,??OMS_DataArrived??rA
   1224                          if (IsGuiOnTop(csm->view_id)) DirectRedrawGUI();
   \   000000A8   280094E5           LDR      R0,[R4, #+40]
   \   000000AC   350100EF           SWI      +309
   \   000000B0   000050E3           CMP      R0,#+0
   \   000000B4   0000000A           BEQ      ??maincsm_onmessage_5
   \   000000B8   3F0100EF           SWI      +319
   1225                        }
   1226                      }
   1227                      mfree(ipc->data);
   \                     ??maincsm_onmessage_5:
   \   000000BC   080099E5           LDR      R0,[R9, #+8]
   \   000000C0   150000EF           SWI      +21
   1228                      mfree(ipc);
   \   000000C4   0900A0E1           MOV      R0,R9
   \   000000C8   150000EF           SWI      +21
   1229                      csm_result=0;  //  
   \   000000CC   1F0000EA           B        ??maincsm_onmessage_6
   1230                    }
   1231                    break;
   1232                  case IPC_GOTO_URL:
   1233                    if (ipc->name_from==ipc_my_name)
   \                     ??maincsm_onmessage_3:
   \   000000D0   1C108AE2           ADD      R1,R10,#+28
   \   000000D4   010050E1           CMP      R0,R1
   \   000000D8   1D00001A           BNE      ??maincsm_onmessage_0
   1234                    {
   1235                      mfree(ipc);
   \   000000DC   0900A0E1           MOV      R0,R9
   \   000000E0   150000EF           SWI      +21
   1236                      FreeViewUrl();
   \   000000E4   ........           BL       FreeViewUrl
   1237                      view_url=goto_url;
   \   000000E8   1C0196E5           LDR      R0,[R6, #+284]
   1238                      view_url_mode=MODE_URL;
   1239                      goto_url=NULL;
   \   000000EC   1C7186E5           STR      R7,[R6, #+284]
   \   000000F0   180186E5           STR      R0,[R6, #+280]
   \   000000F4   0100A0E3           MOV      R0,#+1
   \   000000F8   140186E5           STR      R0,[R6, #+276]
   1240                      UpdateCSMname();
   \   000000FC   ........           BL       UpdateCSMname
   1241                      csm->view_id=CreateViewGUI(0);
   \   00000100   0700A0E1           MOV      R0,R7
   \   00000104   ........           BL       CreateViewGUI
   \   00000108   280084E5           STR      R0,[R4, #+40]
   1242                      csm_result=0;  //  
   \   0000010C   0F0000EA           B        ??maincsm_onmessage_6
   1243                    }
   1244                    break;
   1245                  case IPC_GOTO_FILE:
   1246                    if (ipc->name_from==ipc_my_name)
   \                     ??maincsm_onmessage_4:
   \   00000110   1C108AE2           ADD      R1,R10,#+28
   \   00000114   010050E1           CMP      R0,R1
   \   00000118   0D00001A           BNE      ??maincsm_onmessage_0
   1247                    {
   1248                      mfree(ipc);
   \   0000011C   0900A0E1           MOV      R0,R9
   \   00000120   150000EF           SWI      +21
   1249                      if (ParseInputFilename(goto_url))
   \   00000124   1C0196E5           LDR      R0,[R6, #+284]
   \   00000128   ........           BL       ParseInputFilename
   \   0000012C   000050E3           CMP      R0,#+0
   \   00000130   0300000A           BEQ      ??maincsm_onmessage_7
   1250                      {
   1251                        UpdateCSMname();
   \   00000134   ........           BL       UpdateCSMname
   1252                        csm->view_id=CreateViewGUI(1);
   \   00000138   0100A0E3           MOV      R0,#+1
   \   0000013C   ........           BL       CreateViewGUI
   \   00000140   280084E5           STR      R0,[R4, #+40]
   1253                      }
   1254                      mfree(goto_url);
   \                     ??maincsm_onmessage_7:
   \   00000144   1C0196E5           LDR      R0,[R6, #+284]
   \   00000148   150000EF           SWI      +21
   1255                      goto_url=NULL;
   \   0000014C   1C7186E5           STR      R7,[R6, #+284]
   1256                      csm_result=0;   //  
   \                     ??maincsm_onmessage_6:
   \   00000150   0080A0E3           MOV      R8,#+0
   1257                    }
   1258                    break;
   1259                  }
   1260                }
   1261              }
   1262            }
   1263            if (msg->msg==MSG_RECONFIGURE_REQ)
   \                     ??maincsm_onmessage_0:
   \   00000154   040095E5           LDR      R0,[R5, #+4]
   \   00000158   AF10A0E3           MOV      R1,#+175
   \   0000015C   DE1C81E3           ORR      R1,R1,#0xDE00
   \   00000160   010050E1           CMP      R0,R1
   \   00000164   0900001A           BNE      ??maincsm_onmessage_1
   1264            {
   1265              if (strcmp_nocase(successed_config_filename,(char *)msg->data0)==0)
   \   00000168   08019FE5           LDR      R0,??maincsm_onmessage_8  ;; successed_config_filename
   \   0000016C   0C1095E5           LDR      R1,[R5, #+12]
   \   00000170   000090E5           LDR      R0,[R0, #+0]
   \   00000174   ........           _BLF     strcmp_nocase,??strcmp_nocase??rA
   \   00000178   000050E3           CMP      R0,#+0
   \   0000017C   0300001A           BNE      ??maincsm_onmessage_1
   1266              {
   1267                //ShowMSG(1,(int)"BalletMini config updated!");
   1268                ShowMSG(1,(int)lgpData[LGP_CfgUpdated]);
   \   00000180   0C1096E5           LDR      R1,[R6, #+12]
   \   00000184   0100A0E3           MOV      R0,#+1
   \   00000188   480100EF           SWI      +328
   1269                InitConfig();
   \   0000018C   ........           _BLF     InitConfig,??InitConfig??rA
   1270              }    
   1271            }
   1272            ParseSocketMsg(msg);
   \                     ??maincsm_onmessage_1:
   \   00000190   0500A0E1           MOV      R0,R5
   \   00000194   ........           _BLF     ParseSocketMsg,??ParseSocketMsg??rA
   1273            if (msg->msg==MSG_GUI_DESTROYED)
   \   00000198   040095E5           LDR      R0,[R5, #+4]
   \   0000019C   0E10A0E3           MOV      R1,#+14
   \   000001A0   641C81E3           ORR      R1,R1,#0x6400
   \   000001A4   010050E1           CMP      R0,R1
   \   000001A8   3000001A           BNE      ??maincsm_onmessage_9
   1274            {
   1275              if ((int)msg->data0==csm->view_id)
   \   000001AC   0C0095E5           LDR      R0,[R5, #+12]
   \   000001B0   281094E5           LDR      R1,[R4, #+40]
   \   000001B4   010050E1           CMP      R0,R1
   \   000001B8   1200001A           BNE      ??maincsm_onmessage_10
   1276              {
   1277                switch((int)msg->data1)
   \   000001BC   100095E5           LDR      R0,[R5, #+16]
   \   000001C0   FE0050E2           SUBS     R0,R0,#+254
   \   000001C4   0200000A           BEQ      ??maincsm_onmessage_11
   \   000001C8   010050E2           SUBS     R0,R0,#+1
   \   000001CC   0700000A           BEQ      ??maincsm_onmessage_12
   \   000001D0   0A0000EA           B        ??maincsm_onmessage_13
   1278                {
   1279                case 0xFE: //    
   1280                  if ((goto_url=PopPageFromStack()))
   \                     ??maincsm_onmessage_11:
   \   000001D4   ........           _BLF     PopPageFromStack,??PopPageFromStack??rA
   \   000001D8   1C0186E5           STR      R0,[R6, #+284]
   \   000001DC   000050E3           CMP      R0,#+0
   \   000001E0   0600000A           BEQ      ??maincsm_onmessage_13
   1281                  {
   1282                    SUBPROC((void*)GotoFile);
   \   000001E4   90009FE5           LDR      R0,??maincsm_onmessage_8+0x4  ;; GotoFile
   \                     ??maincsm_onmessage_14:
   \   000001E8   710100EF           SWI      +369
   1283                    break;
   \   000001EC   050000EA           B        ??maincsm_onmessage_10
   1284                  }
   1285                  goto L_CLOSE;
   1286                case 0xFF: //  
   1287                  if (goto_url)
   \                     ??maincsm_onmessage_12:
   \   000001F0   1C0196E5           LDR      R0,[R6, #+284]
   \   000001F4   000050E3           CMP      R0,#+0
   1288                  {
   1289                    SUBPROC((void*)GotoLink);
   \   000001F8   80009F15           LDRNE    R0,??maincsm_onmessage_8+0x8  ;; GotoLink
   \   000001FC   F9FFFF1A           BNE      ??maincsm_onmessage_14
   1290                    break;
   1291                  }
   1292                  else
   1293                    goto L_CLOSE;
   1294                default:
   1295                L_CLOSE:
   1296                  csm->csm.state=-3;
   \                     ??maincsm_onmessage_13:
   \   00000200   0200E0E3           MVN      R0,#+2
   \   00000204   100084E5           STR      R0,[R4, #+16]
   1297                  break;
   1298                }
   1299              }
   1300              if ((int)msg->data0==csm->goto_url)
   \                     ??maincsm_onmessage_10:
   \   00000208   0C0095E5           LDR      R0,[R5, #+12]
   \   0000020C   2C1094E5           LDR      R1,[R4, #+44]
   \   00000210   010050E1           CMP      R0,R1
   \   00000214   0600001A           BNE      ??maincsm_onmessage_15
   1301              {
   1302                if ((int)msg->data1==0xFF)
   \   00000218   100095E5           LDR      R0,[R5, #+16]
   \   0000021C   FF0050E3           CMP      R0,#+255
   \   00000220   0200001A           BNE      ??maincsm_onmessage_16
   1303                {
   1304                  GeneralFunc_flag1(csm->view_id,0xFF);
   \   00000224   280094E5           LDR      R0,[R4, #+40]
   \   00000228   FF10A0E3           MOV      R1,#+255
   \   0000022C   3D0100EF           SWI      +317
   1305                }
   1306                csm->goto_url=0;
   \                     ??maincsm_onmessage_16:
   \   00000230   2C7084E5           STR      R7,[R4, #+44]
   1307              }
   1308              if ((int)msg->data0==csm->sel_bmk)
   \                     ??maincsm_onmessage_15:
   \   00000234   0C0095E5           LDR      R0,[R5, #+12]
   \   00000238   301094E5           LDR      R1,[R4, #+48]
   \   0000023C   010050E1           CMP      R0,R1
   \   00000240   0600001A           BNE      ??maincsm_onmessage_17
   1309              {
   1310                if ((int)msg->data1==0xFF)
   \   00000244   100095E5           LDR      R0,[R5, #+16]
   \   00000248   FF0050E3           CMP      R0,#+255
   \   0000024C   0200001A           BNE      ??maincsm_onmessage_18
   1311                {
   1312                  GeneralFunc_flag1(csm->view_id,0xFF);
   \   00000250   280094E5           LDR      R0,[R4, #+40]
   \   00000254   FF10A0E3           MOV      R1,#+255
   \   00000258   3D0100EF           SWI      +317
   1313                }
   1314                csm->sel_bmk=0;
   \                     ??maincsm_onmessage_18:
   \   0000025C   307084E5           STR      R7,[R4, #+48]
   1315              }
   1316              if ((int)msg->data0==csm->main_menu_id)
   \                     ??maincsm_onmessage_17:
   \   00000260   0C0095E5           LDR      R0,[R5, #+12]
   \   00000264   341094E5           LDR      R1,[R4, #+52]
   \   00000268   010050E1           CMP      R0,R1
   1317              {
   1318                csm->main_menu_id=0;
   \   0000026C   34708405           STREQ    R7,[R4, #+52]
   1319              }
   1320            }
   1321            return(csm_result);
   \                     ??maincsm_onmessage_9:
   \   00000270   0800A0E1           MOV      R0,R8
   \   00000274   F087BDE8           POP      {R4-R10,PC}      ;; return
   \                     ??maincsm_onmessage_8:
   \   00000278   ........           DC32     successed_config_filename
   \   0000027C   ........           DC32     GotoFile
   \   00000280   ........           DC32     GotoLink
   1322          }
   1323          
   1324          static unsigned short maincsm_name_body[140];
   1325          
   1326          static const struct
   1327          {
   1328            CSM_DESC maincsm;
   1329            WSHDR maincsm_name;

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "INET process bussy!">`:
   \   00000000   494E45542070       DC8 "INET process bussy!"
   \              726F63657373
   \              206275737379
   \              2100        
   \   00000014   456E61626C65       DC8 "Enable GPRS first!"
   \              204750525320
   \              666972737421
   \              00          
   \   00000027   00                 DC8 0
   \   00000028   556E64657220       DC8 "Under Construction!"
   \              436F6E737472
   \              756374696F6E
   \              2100        
   \   0000003C   54656D706C61       DC8 "Templates"
   \              74657300    
   \   00000046   0000               DC8 0, 0
   \   00000048   5361766500         DC8 "Save"
   \   0000004D   000000             DC8 0, 0, 0
   \   00000050   4E616D653A00       DC8 "Name:"
   \   00000056   0000               DC8 0, 0
   \   00000058   4E657720426F       DC8 "New Bookmark"
   \              6F6B6D61726B
   \              00          
   \   00000065   000000             DC8 0, 0, 0
   \   00000068   4C696E6B3A00       DC8 "Link:"
   \   0000006E   0000               DC8 0, 0
   \   00000070   497020636F6E       DC8 "Ip connect ..."
   \              6E656374202E
   \              2E2E00      
   \   0000007F   00                 DC8 0
   \   00000080   416273656E74       DC8 "Absent..."
   \              2E2E2E00    
   \   0000008A   0000               DC8 0, 0
   \   0000008C   536561726368       DC8 "Search"
   \              00          
   \   00000093   00                 DC8 0
   \   00000094   546578743A00       DC8 "Text:"
   \   0000009A   0000               DC8 0, 0
   \   0000009C   536561726368       DC8 "Search engine:"
   \              20656E67696E
   \              653A00      
   \   000000AB   00                 DC8 0
   \   000000AC   424D3A202577       DC8 "BM: %w"
   \              00          
   \   000000B3   00                 DC8 0
   \   000000B4   4F6D73436163       DC8 "OmsCache"
   \              686500      
   \   000000BD   000000             DC8 0, 0, 0
   \   000000C0   41757468436F       DC8 "AuthCode"
   \              646500      
   \   000000C9   000000             DC8 0, 0, 0
   \   000000CC   426F6F6B6D61       DC8 "Bookmarks"
   \              726B7300    
   \   000000D6   0000               DC8 0, 0
   \   000000D8   2462616C6C65       DC8 "$ballet\\lang.txt"
   \              745C6C616E67
   \              2E74787400  
   \   000000E9   000000             DC8 0, 0, 0
   \   000000EC   43616E277420       DC8 "Can't open file!"
   \              6F70656E2066
   \              696C652100  
   \   000000FD   000000             DC8 0, 0, 0
   \   00000100   43616E277420       DC8 "Can't load AuthCode!"
   \              6C6F61642041
   \              757468436F64
   \              652100      
   \   00000115   000000             DC8 0, 0, 0
   \   00000118   43616E277420       DC8 "Can't open history.txt!"
   \              6F70656E2068
   \              6973746F7279
   \              2E7478742100
   \   00000130   436F6E676966       DC8 "Congif updated"
   \              207570646174
   \              656400      
   \   0000013F   00                 DC8 0
   \   00000140   526566202725       DC8 "Ref '%c' under construction!"
   \              632720756E64
   \              657220636F6E
   \              737472756374
   \              696F6E2100  
   \   0000015D   000000             DC8 0, 0, 0
   \   00000160   524620656D70       DC8 "RF empty!"
   \              74792100    
   \   0000016A   0000               DC8 0, 0
   \   0000016C   4572726F7221       DC8 "Error!"
   \              00          
   \   00000173   00                 DC8 0
   \   00000174   53746F7000         DC8 "Stop"
   \   00000179   000000             DC8 0, 0, 0
   \   0000017C   576169742044       DC8 "Wait DNR ..."
   \              4E52202E2E2E
   \              00          
   \   00000189   000000             DC8 0, 0, 0
   \   0000018C   47657420686F       DC8 "Get host by name"
   \              737420627920
   \              6E616D6500  
   \   0000019D   000000             DC8 0, 0, 0
   \   000001A0   444E52206661       DC8 "DNR falut!"
   \              6C75742100  
   \   000001AB   00                 DC8 0
   \   000001AC   444E52206F6B       DC8 "DNR ok!"
   \              2100        
   \   000001B4   4F70656E2073       DC8 "Open socket..."
   \              6F636B65742E
   \              2E2E00      
   \   000001C3   00                 DC8 0
   \   000001C4   436F6E6E6563       DC8 "Connect fault..."
   \              74206661756C
   \              742E2E2E00  
   \   000001D5   000000             DC8 0, 0, 0
   \   000001D8   444E5220616E       DC8 "DNR answer..."
   \              737765722E2E
   \              2E00        
   \   000001E6   0000               DC8 0, 0
   \   000001E8   436F6E6E6563       DC8 "Connected..."
   \              7465642E2E2E
   \              00          
   \   000001F5   000000             DC8 0, 0, 0
   \   000001F8   446174612072       DC8 "Data received..."
   \              656365697665
   \              642E2E2E00  
   \   00000209   000000             DC8 0, 0, 0
   \   0000020C   52656D6F7465       DC8 "Remote closed!"
   \              20636C6F7365
   \              642100      
   \   0000021B   00                 DC8 0
   \   0000021C   4C6F63616C20       DC8 "Local closed!"
   \              636C6F736564
   \              2100        
   \   0000022A   0000               DC8 0, 0
   \   0000022C   ............       DC32 maincsm_onmessage, maincsm_oncreate, 0, 0, 0, 0, maincsm_onclose
   \              ....00000000
   \              000000000000
   \              000000000000
   \              ........    
   \   00000248   380000000100       DC32 56, 1, minus11, maincsm_name_body, 55AACCCCH, 3333AA55H, 0
   \              0000........
   \              ........CCCC
   \              AA5555AA3333
   \              00000000    
   \   00000264   8B00               DC16 139
   \   00000266   0000               DC8 0, 0
   1330          }MAINCSM =
   1331          {
   1332            {
   1333            maincsm_onmessage,
   1334            maincsm_oncreate,
   1335          #ifdef NEWSGOLD
   1336            0,
   1337            0,
   1338            0,
   1339            0,
   1340          #endif
   1341            maincsm_onclose,
   1342            sizeof(MAIN_CSM),
   1343            1,
   1344            &minus11
   1345            },
   1346            {
   1347              maincsm_name_body,
   1348              NAMECSM_MAGIC1,
   1349              NAMECSM_MAGIC2,
   1350              0x0,
   1351              139
   1352            }
   1353          };
   1354          

   \                                 In segment CODE, align 4, keep-with-next
   1355          static void UpdateCSMname(void)
   1356          {
   \                     UpdateCSMname:
   \   00000000   10402DE9           PUSH     {R4,LR}
   1357            WSHDR *ws=AllocWS(256);
   \   00000004   400FA0E3           MOV      R0,#+256
   \   00000008   250100EF           SWI      +293
   \   0000000C   0040A0E1           MOV      R4,R0
   1358            switch(view_url_mode)
   \   00000010   ........           LDR      R0,??DataTable27  ;; lgpData
   \   00000014   141190E5           LDR      R1,[R0, #+276]
   \   00000018   000051E3           CMP      R1,#+0
   \   0000001C   0200000A           BEQ      ??UpdateCSMname_0
   \   00000020   011051E2           SUBS     R1,R1,#+1
   \   00000024   0300000A           BEQ      ??UpdateCSMname_1
   \   00000028   070000EA           B        ??UpdateCSMname_2
   1359            {
   1360            case MODE_FILE:
   1361              str_2ws(ws,view_url,255);
   \                     ??UpdateCSMname_0:
   \   0000002C   181190E5           LDR      R1,[R0, #+280]
   \   00000030   FF20A0E3           MOV      R2,#+255
   \   00000034   060000EA           B        ??UpdateCSMname_3
   1362              break;
   1363            case MODE_URL:
   1364              ascii2ws(ws,view_url+2);
   \                     ??UpdateCSMname_1:
   \   00000038   180190E5           LDR      R0,[R0, #+280]
   \   0000003C   021080E2           ADD      R1,R0,#+2
   \   00000040   0400A0E1           MOV      R0,R4
   \   00000044   ........           _BLF     ascii2ws,??ascii2ws??rA
   \   00000048   030000EA           B        ??UpdateCSMname_4
   1365              break;
   1366            default:
   1367              str_2ws(ws,"",1);
   \                     ??UpdateCSMname_2:
   \   0000004C   0120A0E3           MOV      R2,#+1
   \   00000050   091F8FE2           ADR      R1,??UpdateCSMname_5  ;; ""
   \                     ??UpdateCSMname_3:
   \   00000054   0400A0E1           MOV      R0,R4
   \   00000058   6C0100EF           SWI      +364
   1368              break;
   1369            }
   1370            wsprintf((WSHDR *)(&MAINCSM.maincsm_name),"BM: %w",ws);
   \                     ??UpdateCSMname_4:
   \   0000005C   ........           LDR      R0,??DataTable29  ;; `?<Constant "INET process bussy!">`
   \   00000060   0420A0E1           MOV      R2,R4
   \   00000064   AC1080E2           ADD      R1,R0,#+172
   \   00000068   950F80E2           ADD      R0,R0,#+596
   \   0000006C   240100EF           SWI      +292
   1371            FreeWS(ws);
   \   00000070   0400A0E1           MOV      R0,R4
   \   00000074   290100EF           SWI      +297
   1372          }
   \   00000078   1080BDE8           POP      {R4,PC}          ;; return
   \                     ??UpdateCSMname_5:
   \   0000007C   00000000           DC8      "",+0,+0,+0
   1373          

   \                                 In segment CODE, align 4, keep-with-next
   1374          int ReadUrlFile(char *url_file)
   1375          {
   \                     ReadUrlFile:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
   \   00000004   2CD04DE2           SUB      SP,SP,#+44
   \   00000008   0040A0E1           MOV      R4,R0
   1376            int f;
   1377            unsigned int err;
   1378            int fsize;
   1379            char *buf, *s;
   1380            FSTATS stat;
   1381            if (GetFileStats(url_file,&stat,&err)==-1) return 0;
   \   0000000C   0050E0E3           MVN      R5,#+0
   \   00000010   0D20A0E1           MOV      R2,SP
   \   00000014   04108DE2           ADD      R1,SP,#+4
   \   00000018   840000EF           SWI      +132
   \   0000001C   050050E1           CMP      R0,R5
   \   00000020   0200001A           BNE      ??ReadUrlFile_0
   \                     ??ReadUrlFile_1:
   \   00000024   0000A0E3           MOV      R0,#+0
   \   00000028   2CD08DE2           ADD      SP,SP,#+44
   \   0000002C   F080BDE8           POP      {R4-R7,PC}
   1382            if ((fsize=stat.size)<=0) return 0;
   \                     ??ReadUrlFile_0:
   \   00000030   08609DE5           LDR      R6,[SP, #+8]
   \   00000034   010056E3           CMP      R6,#+1
   \   00000038   F9FFFFBA           BLT      ??ReadUrlFile_1
   1383            if ((f=fopen(url_file,A_ReadOnly+A_BIN,P_READ,&err))==-1) return 0;
   \   0000003C   0D30A0E1           MOV      R3,SP
   \   00000040   8020A0E3           MOV      R2,#+128
   \   00000044   801CA0E3           MOV      R1,#+32768
   \   00000048   0400A0E1           MOV      R0,R4
   \   0000004C   0A0000EF           SWI      +10
   \   00000050   0070A0E1           MOV      R7,R0
   \   00000054   050057E1           CMP      R7,R5
   \   00000058   F1FFFF0A           BEQ      ??ReadUrlFile_1
   1384            FreeViewUrl();
   \   0000005C   ........           BL       FreeViewUrl
   1385            buf=malloc(fsize+3);
   \   00000060   030086E2           ADD      R0,R6,#+3
   \   00000064   140000EF           SWI      +20
   \   00000068   0040A0E1           MOV      R4,R0
   1386            buf[0]='0';
   \   0000006C   3000A0E3           MOV      R0,#+48
   \   00000070   0000C4E5           STRB     R0,[R4, #+0]
   1387            buf[1]='/';
   \   00000074   2F00A0E3           MOV      R0,#+47
   \   00000078   0100C4E5           STRB     R0,[R4, #+1]
   1388            buf[fread(f,buf+2,fsize,&err)+2]=0;
   \   0000007C   0050A0E3           MOV      R5,#+0
   \   00000080   0D30A0E1           MOV      R3,SP
   \   00000084   0620A0E1           MOV      R2,R6
   \   00000088   021084E2           ADD      R1,R4,#+2
   \   0000008C   0700A0E1           MOV      R0,R7
   \   00000090   0B0000EF           SWI      +11
   \   00000094   040080E0           ADD      R0,R0,R4
   \   00000098   0250C0E5           STRB     R5,[R0, #+2]
   1389            fclose(f,&err);
   \   0000009C   0D10A0E1           MOV      R1,SP
   \   000000A0   0700A0E1           MOV      R0,R7
   \   000000A4   0D0000EF           SWI      +13
   1390            s=buf;
   \   000000A8   0400A0E1           MOV      R0,R4
   \   000000AC   0010D0E5           LDRB     R1,[R0, #+0]
   \   000000B0   210051E3           CMP      R1,#+33
   \   000000B4   0200003A           BCC      ??ReadUrlFile_2
   1391            while(*s>32) s++;
   \                     ??ReadUrlFile_3:
   \   000000B8   0110F0E5           LDRB     R1,[R0, #+1]!
   \   000000BC   210051E3           CMP      R1,#+33
   \   000000C0   FCFFFF2A           BCS      ??ReadUrlFile_3
   1392            *s++=0;
   \                     ??ReadUrlFile_2:
   \   000000C4   ........           STRB     R5,[R0], #+1
   1393            view_url=realloc(buf,s-buf);
   \   000000C8   ........           LDR      R5,??DataTable27  ;; lgpData
   \   000000CC   041040E0           SUB      R1,R0,R4
   \   000000D0   0400A0E1           MOV      R0,R4
   \   000000D4   BA0000EF           SWI      +186
   \   000000D8   180185E5           STR      R0,[R5, #+280]
   1394            view_url_mode=MODE_URL;
   \   000000DC   0100A0E3           MOV      R0,#+1
   \   000000E0   140185E5           STR      R0,[R5, #+276]
   1395            return (1);
   \   000000E4   2CD08DE2           ADD      SP,SP,#+44
   \   000000E8   F080BDE8           POP      {R4-R7,PC}       ;; return
   1396          }
   1397          

   \                                 In segment CODE, align 4, keep-with-next
   1398          static int ParseInputFilename(const char *fn)
   1399          {
   1400            if (!strcmp_nocase(fn,"bookmarks"))
   \                     ParseInputFilename:
   \   00000000   A0109FE5           LDR      R1,??ParseInputFilename_0+0x8  ;; `?<Constant "bookmarks">`
   \   00000004   70402DE9           PUSH     {R4-R6,LR}
   \   00000008   ........           LDR      R5,??DataTable27  ;; lgpData
   \   0000000C   0040A0E1           MOV      R4,R0
   \   00000010   ........           _BLF     strcmp_nocase,??strcmp_nocase??rA
   \   00000014   000050E3           CMP      R0,#+0
   1401            {
   1402              view_url_mode=MODE_BOOKMARKS;
   \   00000018   0200A003           MOVEQ    R0,#+2
   \   0000001C   14018505           STREQ    R0,[R5, #+276]
   1403              return 1;
   \   00000020   1100000A           BEQ      ??ParseInputFilename_1
   1404            }
   1405            else
   1406            {
   1407              char *s=strrchr(fn,'.');
   \   00000024   2E10A0E3           MOV      R1,#+46
   \   00000028   0400A0E1           MOV      R0,R4
   \   0000002C   170100EF           SWI      +279
   \   00000030   0060A0E1           MOV      R6,R0
   1408              FreeViewUrl();
   \   00000034   ........           BL       FreeViewUrl
   1409              if (s)
   \   00000038   000056E3           CMP      R6,#+0
   \   0000003C   1500000A           BEQ      ??ParseInputFilename_2
   1410              {
   1411                s++;
   1412                if (!strcmp_nocase(s,"oms"))
   \   00000040   161F8FE2           ADR      R1,??ParseInputFilename_0  ;; "oms"
   \   00000044   016086E2           ADD      R6,R6,#+1
   \   00000048   0600A0E1           MOV      R0,R6
   \   0000004C   ........           _BLF     strcmp_nocase,??strcmp_nocase??rA
   \   00000050   000050E3           CMP      R0,#+0
   \   00000054   0600001A           BNE      ??ParseInputFilename_3
   1413                {
   1414                  view_url=globalstr(fn);
   \   00000058   0400A0E1           MOV      R0,R4
   \   0000005C   ........           _BLF     globalstr,??globalstr??rA
   \   00000060   180185E5           STR      R0,[R5, #+280]
   1415                  view_url_mode=MODE_FILE;
   \   00000064   0000A0E3           MOV      R0,#+0
   \   00000068   140185E5           STR      R0,[R5, #+276]
   1416                }
   1417                else if (!strcmp_nocase(s,"url"))
   1418                {
   1419                  if (!ReadUrlFile((char *)fn)) return (0);
   1420                }
   1421                else return 0;
   1422                return 1;
   \                     ??ParseInputFilename_1:
   \   0000006C   0100A0E3           MOV      R0,#+1
   \   00000070   7080BDE8           POP      {R4-R6,PC}       ;; return
   \                     ??ParseInputFilename_3:
   \   00000074   0A1F8FE2           ADR      R1,??ParseInputFilename_0+0x4  ;; "url"
   \   00000078   0600A0E1           MOV      R0,R6
   \   0000007C   ........           _BLF     strcmp_nocase,??strcmp_nocase??rA
   \   00000080   000050E3           CMP      R0,#+0
   \   00000084   0300001A           BNE      ??ParseInputFilename_2
   \   00000088   0400A0E1           MOV      R0,R4
   \   0000008C   ........           BL       ReadUrlFile
   \   00000090   000050E3           CMP      R0,#+0
   \   00000094   F4FFFF1A           BNE      ??ParseInputFilename_1
   \                     ??ParseInputFilename_2:
   \   00000098   0000A0E3           MOV      R0,#+0
   \   0000009C   7080BDE8           POP      {R4-R6,PC}
   \                     ??ParseInputFilename_0:
   \   000000A0   6F6D7300           DC8      "oms"
   \   000000A4   75726C00           DC8      "url"
   \   000000A8   ........           DC32     `?<Constant "bookmarks">`
   1423              }
   1424            }
   1425            return 0;
   1426          }

   \                                 In segment DATA_Z, align 4, align-sorted
   \                     lgpData:
   \   00000000                      DS8 252
   \                     sieget_ipc:
   \   000000FC                      DS8 12
   \                     lgpLoaded:
   \   00000108                      DS8 4
   \                     TERMINATED:
   \   0000010C                      DS8 4
   \                     STOPPED:
   \   00000110                      DS8 4
   \                     view_url_mode:
   \   00000114                      DS8 4
   \                     view_url:
   \   00000118                      DS8 4
   \                     goto_url:
   \   0000011C                      DS8 4
   \                     from_url:
   \   00000120                      DS8 4
   \                     goto_params:
   \   00000124                      DS8 4
   \                     ws_console:
   \   00000128                      DS8 4
   \                     maincsm_id:
   \   0000012C                      DS8 4
   1427          
   1428          char AUTH_PREFIX[64];
   \                     AUTH_PREFIX:
   \   00000130                      DS8 64
   1429          char AUTH_CODE[128];
   \                     AUTH_CODE:
   \   00000170                      DS8 128
   \                     OMSCACHE_PATH:
   \   000001F0                      DS8 256
   \                     AUTHDATA_FILE:
   \   000002F0                      DS8 256
   \                     BOOKMARKS_PATH:
   \   000003F0                      DS8 256
   \                     SEARCH_PATH:
   \   000004F0                      DS8 256
   \                     BALLET_PATH:
   \   000005F0                      DS8 256
   \                     BALLET_EXE:
   \   000006F0                      DS8 256

   \                                 In segment DATA_Z, align 4, align-sorted
   \                     ENABLE_REDRAW:
   \   00000000                      DS8 4

   \                                 In segment DATA_Z, align 4, align-sorted
   \                     maincsm_name_body:
   \   00000000                      DS8 280
   1430          

   \                                 In segment CODE, align 4, keep-with-next
   1431          int LoadAuthCode(void)
   1432          {
   \                     LoadAuthCode:
   \   00000000   F0412DE9           PUSH     {R4-R8,LR}
   1433            int f;
   1434            unsigned int err;
   1435            int fsize;
   1436            char *buf;
   1437            char *s;
   1438            int c;
   1439            FSTATS stat;
   1440            if (GetFileStats(AUTHDATA_FILE,&stat,&err)==-1) return 0;
   \   00000004   ........           LDR      R4,??DataTable27  ;; lgpData
   \   00000008   2CD04DE2           SUB      SP,SP,#+44
   \   0000000C   0060E0E3           MVN      R6,#+0
   \   00000010   BC5FA0E3           MOV      R5,#+752
   \   00000014   0D20A0E1           MOV      R2,SP
   \   00000018   04108DE2           ADD      R1,SP,#+4
   \   0000001C   040085E0           ADD      R0,R5,R4
   \   00000020   840000EF           SWI      +132
   \   00000024   060050E1           CMP      R0,R6
   \   00000028   0200001A           BNE      ??LoadAuthCode_0
   \                     ??LoadAuthCode_1:
   \   0000002C   0000A0E3           MOV      R0,#+0
   \   00000030   2CD08DE2           ADD      SP,SP,#+44
   \   00000034   F081BDE8           POP      {R4-R8,PC}
   1441            if ((fsize=stat.size)<=0) return 0;
   \                     ??LoadAuthCode_0:
   \   00000038   08709DE5           LDR      R7,[SP, #+8]
   \   0000003C   010057E3           CMP      R7,#+1
   \   00000040   F9FFFFBA           BLT      ??LoadAuthCode_1
   1442            if ((f=fopen(AUTHDATA_FILE,A_ReadOnly+A_BIN,P_READ,&err))==-1) return 0;
   \   00000044   0D30A0E1           MOV      R3,SP
   \   00000048   8020A0E3           MOV      R2,#+128
   \   0000004C   801CA0E3           MOV      R1,#+32768
   \   00000050   040085E0           ADD      R0,R5,R4
   \   00000054   0A0000EF           SWI      +10
   \   00000058   0050A0E1           MOV      R5,R0
   \   0000005C   060055E1           CMP      R5,R6
   \   00000060   F1FFFF0A           BEQ      ??LoadAuthCode_1
   1443            buf=malloc(fsize+1);
   \   00000064   010087E2           ADD      R0,R7,#+1
   \   00000068   140000EF           SWI      +20
   \   0000006C   0060A0E1           MOV      R6,R0
   1444            buf[fread(f,buf,fsize,&err)]=0;
   \   00000070   0080A0E3           MOV      R8,#+0
   \   00000074   0D30A0E1           MOV      R3,SP
   \   00000078   0720A0E1           MOV      R2,R7
   \   0000007C   0610A0E1           MOV      R1,R6
   \   00000080   0500A0E1           MOV      R0,R5
   \   00000084   0B0000EF           SWI      +11
   \   00000088   0680C0E7           STRB     R8,[R0, +R6]
   1445            fclose(f,&err);
   \   0000008C   0D10A0E1           MOV      R1,SP
   \   00000090   0500A0E1           MOV      R0,R5
   \   00000094   0D0000EF           SWI      +13
   1446            s=buf;
   \   00000098   0600A0E1           MOV      R0,R6
   1447            f=0;
   \   0000009C   0050A0E3           MOV      R5,#+0
   1448            err=0;
   \   000000A0   00808DE5           STR      R8,[SP, #+0]
   \   000000A4   050000EA           B        ??LoadAuthCode_2
   1449            while((c=*s++)>=32)
   1450            {
   1451              if (c=='.') break;
   \                     ??LoadAuthCode_3:
   \   000000A8   2E0051E3           CMP      R1,#+46
   \   000000AC   0C00000A           BEQ      ??LoadAuthCode_4
   1452              if (f<63) AUTH_PREFIX[f++]=c;
   \   000000B0   3F0055E3           CMP      R5,#+63
   \   000000B4   042085B0           ADDLT    R2,R5,R4
   \   000000B8   3011C2B5           STRBLT   R1,[R2, #+304]
   \   000000BC   015085B2           ADDLT    R5,R5,#+1
   1453            }
   \                     ??LoadAuthCode_2:
   \   000000C0   ........           LDRB     R1,[R0], #+1
   \   000000C4   200051E3           CMP      R1,#+32
   \   000000C8   F6FFFFAA           BGE      ??LoadAuthCode_3
   1454            if (c)
   \   000000CC   000051E3           CMP      R1,#+0
   \   000000D0   0300001A           BNE      ??LoadAuthCode_4
   \   000000D4   120000EA           B        ??LoadAuthCode_5
   1455            {
   1456              while((c=*s)<32)
   1457              {
   1458                if (!c) goto LEND;
   \                     ??LoadAuthCode_6:
   \   000000D8   000051E3           CMP      R1,#+0
   \   000000DC   1000000A           BEQ      ??LoadAuthCode_5
   1459                s++;
   \   000000E0   010080E2           ADD      R0,R0,#+1
   1460              }
   \                     ??LoadAuthCode_4:
   \   000000E4   0010D0E5           LDRB     R1,[R0, #+0]
   \   000000E8   200051E3           CMP      R1,#+32
   \   000000EC   F9FFFFBA           BLT      ??LoadAuthCode_6
   1461              f=0;
   \   000000F0   0050A0E3           MOV      R5,#+0
   \   000000F4   030000EA           B        ??LoadAuthCode_7
   1462              while((c=*s++)>32)
   1463              {
   1464                if (c=='.') break;
   1465                if (f<127) AUTH_CODE[f++]=c;
   \                     ??LoadAuthCode_8:
   \   000000F8   7F0055E3           CMP      R5,#+127
   \   000000FC   042085B0           ADDLT    R2,R5,R4
   \   00000100   7011C2B5           STRBLT   R1,[R2, #+368]
   \   00000104   015085B2           ADDLT    R5,R5,#+1
   \                     ??LoadAuthCode_7:
   \   00000108   ........           LDRB     R1,[R0], #+1
   \   0000010C   210051E3           CMP      R1,#+33
   \   00000110   010000BA           BLT      ??LoadAuthCode_9
   \   00000114   2E0051E3           CMP      R1,#+46
   \   00000118   F6FFFF1A           BNE      ??LoadAuthCode_8
   1466              }
   1467              err=1;
   \                     ??LoadAuthCode_9:
   \   0000011C   0110A0E3           MOV      R1,#+1
   \   00000120   00108DE5           STR      R1,[SP, #+0]
   1468            }
   1469          LEND:
   1470            mfree(buf);
   \                     ??LoadAuthCode_5:
   \   00000124   0600A0E1           MOV      R0,R6
   \   00000128   150000EF           SWI      +21
   1471            return err;
   \   0000012C   00009DE5           LDR      R0,[SP, #+0]
   \   00000130   2CD08DE2           ADD      SP,SP,#+44
   \   00000134   F081BDE8           POP      {R4-R8,PC}       ;; return
   1472          }
   1473          

   \                                 In segment CODE, align 4, keep-with-next
   1474          void GenerateFile(char *path, char *name, unsigned char *from, unsigned size)
   1475          {
   \                     GenerateFile:
   \   00000000   F0412DE9           PUSH     {R4-R8,LR}
   \   00000004   2CD04DE2           SUB      SP,SP,#+44
   \   00000008   0070A0E1           MOV      R7,R0
   \   0000000C   0180A0E1           MOV      R8,R1
   \   00000010   0240A0E1           MOV      R4,R2
   \   00000014   0350A0E1           MOV      R5,R3
   1476            unsigned ul;
   1477            int f;
   1478            FSTATS stat;
   1479            char *pathbuf;
   1480          
   1481            pathbuf = (char *)malloc(strlen(path) + strlen(name) + 1);
   \   00000018   1B0000EF           SWI      +27
   \   0000001C   0060A0E1           MOV      R6,R0
   \   00000020   0800A0E1           MOV      R0,R8
   \   00000024   1B0000EF           SWI      +27
   \   00000028   060080E0           ADD      R0,R0,R6
   \   0000002C   010080E2           ADD      R0,R0,#+1
   \   00000030   140000EF           SWI      +20
   \   00000034   0060A0E1           MOV      R6,R0
   1482            strcpy(pathbuf, path); strcat(pathbuf, name);
   \   00000038   0710A0E1           MOV      R1,R7
   \   0000003C   1A0000EF           SWI      +26
   \   00000040   0810A0E1           MOV      R1,R8
   \   00000044   0600A0E1           MOV      R0,R6
   \   00000048   170000EF           SWI      +23
   1483            
   1484            stat.size = 0;
   \   0000004C   0010A0E3           MOV      R1,#+0
   \   00000050   08108DE5           STR      R1,[SP, #+8]
   1485            GetFileStats(pathbuf,&stat,&ul);
   \   00000054   0D20A0E1           MOV      R2,SP
   \   00000058   04108DE2           ADD      R1,SP,#+4
   \   0000005C   0600A0E1           MOV      R0,R6
   \   00000060   840000EF           SWI      +132
   1486            //if (GetFileStats(pathbuf,&stat,&ul)!=-1) return;
   1487            if (stat.size==0)
   \   00000064   08009DE5           LDR      R0,[SP, #+8]
   \   00000068   000050E3           CMP      R0,#+0
   \   0000006C   1200001A           BNE      ??GenerateFile_0
   1488            {
   1489              unlink(pathbuf,&ul);
   \   00000070   0D10A0E1           MOV      R1,SP
   \   00000074   0600A0E1           MOV      R0,R6
   \   00000078   6B0100EF           SWI      +363
   1490              f = fopen(pathbuf,A_WriteOnly+A_Create+A_BIN,P_READ+P_WRITE,&ul);
   \   0000007C   0D30A0E1           MOV      R3,SP
   \   00000080   602FA0E3           MOV      R2,#+384
   \   00000084   0110A0E3           MOV      R1,#+1
   \   00000088   811C81E3           ORR      R1,R1,#0x8100
   \   0000008C   0600A0E1           MOV      R0,R6
   \   00000090   0A0000EF           SWI      +10
   \   00000094   0070A0E1           MOV      R7,R0
   1491              if (f!=-1)
   \   00000098   010077E3           CMN      R7,#+1
   \   0000009C   0600000A           BEQ      ??GenerateFile_0
   1492              {
   1493                fwrite(f,from,size,&ul);
   \   000000A0   0D30A0E1           MOV      R3,SP
   \   000000A4   0520A0E1           MOV      R2,R5
   \   000000A8   0410A0E1           MOV      R1,R4
   \   000000AC   0C0000EF           SWI      +12
   1494                fclose(f,&ul);
   \   000000B0   0D10A0E1           MOV      R1,SP
   \   000000B4   0700A0E1           MOV      R0,R7
   \   000000B8   0D0000EF           SWI      +13
   1495              }
   1496            }
   1497            mfree(pathbuf);
   \                     ??GenerateFile_0:
   \   000000BC   0600A0E1           MOV      R0,R6
   \   000000C0   150000EF           SWI      +21
   1498          
   1499          }
   \   000000C4   2CD08DE2           ADD      SP,SP,#+44
   \   000000C8   F081BDE8           POP      {R4-R8,PC}       ;; return
   1500          

   \                                 In segment CODE, align 4, keep-with-next
   1501          int main(const char *exename, const char *filename)
   1502          {
   \                     main:
   \   00000000   F04F2DE9           PUSH     {R4-R11,LR}
   \   00000004   3CD04DE2           SUB      SP,SP,#+60
   \   00000008   0040A0E1           MOV      R4,R0
   \   0000000C   0150A0E1           MOV      R5,R1
   1503            char dummy[sizeof(MAIN_CSM)];
   1504            unsigned int ul;
   1505            char *path=strrchr(exename,'\\');
   \   00000010   5C10A0E3           MOV      R1,#+92
   \   00000014   170100EF           SWI      +279
   1506            int l;
   1507            if (!path) return 0; // -
   \   00000018   000050E3           CMP      R0,#+0
   \   0000001C   0000A003           MOVEQ    R0,#+0
   \   00000020   3CD08D02           ADDEQ    SP,SP,#+60
   \   00000024   F08FBD08           POPEQ    {R4-R11,PC}
   1508            path++;
   1509            l=path-exename;
   1510            InitConfig();
   1511            memcpy(OMSCACHE_PATH,exename,l);
   \   00000028   ........           LDR      R8,??DataTable28  ;; lgpData
   1512            strcat(OMSCACHE_PATH,"OmsCache");
   \   0000002C   ........           LDR      R9,??DataTable29  ;; `?<Constant "INET process bussy!">`
   \   00000030   010080E2           ADD      R0,R0,#+1
   \   00000034   046040E0           SUB      R6,R0,R4
   \   00000038   ........           _BLF     InitConfig,??InitConfig??rA
   \   0000003C   7C7FA0E3           MOV      R7,#+496
   \   00000040   0620A0E1           MOV      R2,R6
   \   00000044   0410A0E1           MOV      R1,R4
   \   00000048   080087E0           ADD      R0,R7,R8
   \   0000004C   1E0100EF           SWI      +286
   \   00000050   B41089E2           ADD      R1,R9,#+180
   \   00000054   080087E0           ADD      R0,R7,R8
   \   00000058   170000EF           SWI      +23
   1513            memcpy(AUTHDATA_FILE,exename,l);
   \   0000005C   BCAFA0E3           MOV      R10,#+752
   \   00000060   0620A0E1           MOV      R2,R6
   \   00000064   0410A0E1           MOV      R1,R4
   \   00000068   08008AE0           ADD      R0,R10,R8
   \   0000006C   1E0100EF           SWI      +286
   1514            strcat(AUTHDATA_FILE,"AuthCode");
   \   00000070   C01089E2           ADD      R1,R9,#+192
   \   00000074   08008AE0           ADD      R0,R10,R8
   \   00000078   170000EF           SWI      +23
   1515            memcpy(BOOKMARKS_PATH,exename,l);
   \   0000007C   FCAFA0E3           MOV      R10,#+1008
   \   00000080   0620A0E1           MOV      R2,R6
   \   00000084   0410A0E1           MOV      R1,R4
   \   00000088   08008AE0           ADD      R0,R10,R8
   \   0000008C   1E0100EF           SWI      +286
   1516            strcat(BOOKMARKS_PATH,"Bookmarks");
   \   00000090   CC1089E2           ADD      R1,R9,#+204
   \   00000094   08008AE0           ADD      R0,R10,R8
   \   00000098   170000EF           SWI      +23
   1517            
   1518            memcpy(BALLET_PATH,exename,l);
   \   0000009C   0620A0E1           MOV      R2,R6
   \   000000A0   0410A0E1           MOV      R1,R4
   \   000000A4   5F0E88E2           ADD      R0,R8,#+1520
   \   000000A8   1E0100EF           SWI      +286
   1519            strcpy(BALLET_EXE, exename);
   \   000000AC   0410A0E1           MOV      R1,R4
   \   000000B0   6F0E88E2           ADD      R0,R8,#+1776
   \   000000B4   1A0000EF           SWI      +26
   1520            
   1521            memcpy(SEARCH_PATH,exename,l);
   \   000000B8   4FBEA0E3           MOV      R11,#+1264
   \   000000BC   0620A0E1           MOV      R2,R6
   \   000000C0   0410A0E1           MOV      R1,R4
   \   000000C4   08008BE0           ADD      R0,R11,R8
   \   000000C8   1E0100EF           SWI      +286
   1522            strcat(SEARCH_PATH,"Search");
   \   000000CC   8C1089E2           ADD      R1,R9,#+140
   \   000000D0   08008BE0           ADD      R0,R11,R8
   \   000000D4   170000EF           SWI      +23
   1523          
   1524            //Create folders if not exists
   1525            if (!isdir(OMSCACHE_PATH,&ul))
   \   000000D8   0D10A0E1           MOV      R1,SP
   \   000000DC   080087E0           ADD      R0,R7,R8
   \   000000E0   910000EF           SWI      +145
   \   000000E4   000050E3           CMP      R0,#+0
   \   000000E8   0200001A           BNE      ??main_0
   1526              mkdir(OMSCACHE_PATH,&ul);
   \   000000EC   0D10A0E1           MOV      R1,SP
   \   000000F0   080087E0           ADD      R0,R7,R8
   \   000000F4   100000EF           SWI      +16
   1527            if (!isdir(BOOKMARKS_PATH,&ul))
   \                     ??main_0:
   \   000000F8   0D10A0E1           MOV      R1,SP
   \   000000FC   08008AE0           ADD      R0,R10,R8
   \   00000100   910000EF           SWI      +145
   \   00000104   000050E3           CMP      R0,#+0
   \   00000108   0200001A           BNE      ??main_1
   1528              mkdir(BOOKMARKS_PATH,&ul);
   \   0000010C   0D10A0E1           MOV      R1,SP
   \   00000110   08008AE0           ADD      R0,R10,R8
   \   00000114   100000EF           SWI      +16
   1529            if (!isdir(SEARCH_PATH,&ul))
   \                     ??main_1:
   \   00000118   0D10A0E1           MOV      R1,SP
   \   0000011C   08008BE0           ADD      R0,R11,R8
   \   00000120   910000EF           SWI      +145
   \   00000124   000050E3           CMP      R0,#+0
   \   00000128   0200001A           BNE      ??main_2
   1530              mkdir(SEARCH_PATH,&ul);
   \   0000012C   0D10A0E1           MOV      R1,SP
   \   00000130   08008BE0           ADD      R0,R11,R8
   \   00000134   100000EF           SWI      +16
   1531            
   1532            strcat(OMSCACHE_PATH,"\\");
   \                     ??main_2:
   \   00000138   334F8FE2           ADR      R4,??main_3      ;; "\\"
   \   0000013C   0410A0E1           MOV      R1,R4
   \   00000140   080087E0           ADD      R0,R7,R8
   \   00000144   170000EF           SWI      +23
   1533            strcat(BOOKMARKS_PATH,"\\");
   \   00000148   0410A0E1           MOV      R1,R4
   \   0000014C   08008AE0           ADD      R0,R10,R8
   \   00000150   170000EF           SWI      +23
   1534            strcat(SEARCH_PATH,"\\");
   \   00000154   0410A0E1           MOV      R1,R4
   \   00000158   08008BE0           ADD      R0,R11,R8
   \   0000015C   170000EF           SWI      +23
   1535            
   1536            //CheckHistory("http://perk11.info/elf");
   1537          
   1538          //  GenerateFile(IMG_PATH, RADIO_BTTN_CLKD, radio_bttn_clkd_png, radio_bttn_clkd_png_size);
   1539          //  GenerateFile(IMG_PATH, RADIO_BTTN,      radio_bttn_png,      radio_bttn_png_size);
   1540          //  GenerateFile(IMG_PATH, BUTTON_CLKD,     button_clkd_png,     button_clkd_png_size);
   1541          //  GenerateFile(IMG_PATH, BUTTON,          button_png,          button_png_size);
   1542          //  GenerateFile(IMG_PATH, TEXT_FORM,       text_form_png,       text_form_png_size);
   1543          //  GenerateFile(IMG_PATH, LIST,            list_png,            list_png_size);
   1544            
   1545            lgpInitLangPack();
   \   00000160   ........           BL       lgpInitLangPack
   1546          
   1547            if (!LoadAuthCode())
   \   00000164   ........           BL       LoadAuthCode
   \   00000168   000050E3           CMP      R0,#+0
   \   0000016C   0700001A           BNE      ??main_4
   1548            {
   1549              LockSched();
   \   00000170   460100EF           SWI      +326
   1550              ShowMSG(1,(int)lgpData[LGP_CantLoadAuthCode]);
   \   00000174   041098E5           LDR      R1,[R8, #+4]
   \   00000178   0100A0E3           MOV      R0,#+1
   \   0000017C   480100EF           SWI      +328
   1551              UnlockSched();
   \   00000180   470100EF           SWI      +327
   1552              SUBPROC((void *)Killer);
   \   00000184   ........           LDR      R0,??DataTable30  ;; Killer
   \   00000188   710100EF           SWI      +369
   1553              return 0;
   \   0000018C   0C0000EA           B        ??main_5
   1554            }
   1555          
   1556            if (ParseInputFilename(filename)) // open oms or url
   \                     ??main_4:
   \   00000190   8B4FA0E3           MOV      R4,#+556
   \   00000194   0500A0E1           MOV      R0,R5
   \   00000198   ........           BL       ParseInputFilename
   \   0000019C   000050E3           CMP      R0,#+0
   \   000001A0   0A00000A           BEQ      ??main_6
   1557            {
   1558              UpdateCSMname();
   \                     ??main_7:
   \   000001A4   ........           BL       UpdateCSMname
   1559              LockSched();
   \   000001A8   460100EF           SWI      +326
   1560              maincsm_id=CreateCSM(&MAINCSM.maincsm,dummy,0);
   \   000001AC   0020A0E3           MOV      R2,#+0
   \   000001B0   04108DE2           ADD      R1,SP,#+4
   \   000001B4   090084E0           ADD      R0,R4,R9
   \   000001B8   070100EF           SWI      +263
   \   000001BC   2C0188E5           STR      R0,[R8, #+300]
   1561              UnlockSched();
   \   000001C0   470100EF           SWI      +327
   \                     ??main_5:
   \   000001C4   0000A0E3           MOV      R0,#+0
   \   000001C8   3CD08DE2           ADD      SP,SP,#+60
   \   000001CC   F08FBDE8           POP      {R4-R11,PC}
   1562            }
   1563            else
   1564            {
   1565              if (ParseInputFilename(DEFAULT_PARAM))
   \                     ??main_6:
   \   000001D0   38009FE5           LDR      R0,??main_3+0x4  ;; DEFAULT_PARAM
   \   000001D4   ........           BL       ParseInputFilename
   \   000001D8   000050E3           CMP      R0,#+0
   \   000001DC   F0FFFF1A           BNE      ??main_7
   1566              {
   1567                UpdateCSMname();
   1568                LockSched();
   1569                maincsm_id=CreateCSM(&MAINCSM.maincsm,dummy,0);
   1570                UnlockSched();
   1571              }
   1572              else
   1573              {
   1574                // create smiles view
   1575                UpdateCSMname();
   \   000001E0   ........           BL       UpdateCSMname
   1576                LockSched();
   \   000001E4   460100EF           SWI      +326
   1577                maincsm_id=CreateCSM(&MAINCSM.maincsm,dummy,0);
   \   000001E8   0020A0E3           MOV      R2,#+0
   \   000001EC   04108DE2           ADD      R1,SP,#+4
   \   000001F0   090084E0           ADD      R0,R4,R9
   \   000001F4   070100EF           SWI      +263
   \   000001F8   2C0188E5           STR      R0,[R8, #+300]
   1578                UnlockSched();
   \   000001FC   470100EF           SWI      +327
   1579                view_url_mode=MODE_NONE;
   \   00000200   0300A0E3           MOV      R0,#+3
   \   00000204   140188E5           STR      R0,[R8, #+276]
   \   00000208   EDFFFFEA           B        ??main_5
   \                     ??main_3:
   \   0000020C   5C000000           DC8      "\\",+0,+0
   \   00000210   ........           DC32     DEFAULT_PARAM
   1580              }
   1581            }
   1582            return 0;
   1583          }

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable1:
   \   00000000   ........           DC32     `?<Constant "INET process bussy!">`

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable3:
   \   00000000   ........           DC32     lgpData

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable4:
   \   00000000   ........           DC32     `?<Constant "$bookmarks\\\\">`

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable7:
   \   00000000   ........           DC32     lgpData + 272

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable10:
   \   00000000   ........           DC32     ENABLE_REDRAW

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable12:
   \   00000000   ........           DC32     lgpData

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable13:
   \   00000000   ........           DC32     StopINET

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable19:
   \   00000000   ........           DC32     lgpData + 268

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable22:
   \   00000000   ........           DC32     `?<Constant "$bookmarks\\\\">`

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable27:
   \   00000000   ........           DC32     lgpData

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable28:
   \   00000000   ........           DC32     lgpData

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable29:
   \   00000000   ........           DC32     `?<Constant "INET process bussy!">`

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable30:
   \   00000000   ........           DC32     Killer

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   4F6B00             DC8 "Ok"

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   476F00             DC8 "Go"

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   656E00             DC8 "en"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "$urlcache\\\\$date$time.url">`:
   \   00000000   2475726C6361       DC8 "$urlcache\\$date$time.url"
   \              6368655C2464
   \              617465247469
   \              6D652E75726C
   \              00          
   \   00000019   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   00                 DC8 ""

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   75726C00           DC8 "url"

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   6F6D7300           DC8 "oms"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "bookmarks">`:
   \   00000000   626F6F6B6D61       DC8 "bookmarks"
   \              726B7300    
   \   0000000A   0000               DC8 0, 0

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   727500             DC8 "ru"

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   5C00               DC8 "\\"

   Maximum stack usage in bytes:

     Function           CSTACK
     --------           ------
     CreateViewGUI         24
     FreeViewUrl            4
     GenerateFile          68
     GotoFile               4
     GotoLink               4
     KillAll                4
     Killer                 4
     LoadAuthCode          68
     ParseInputFilename    16
     ReadUrlFile           64
     RunOtherCopyByURL    276
     StartGetFile        1320
     UpdateCSMname          8
     collectItemsParams    44
     lgpFreeLangPack       12
     lgpInitLangPack      328
     main                  96
     maincsm_onclose        8
     maincsm_oncreate      16
     maincsm_onmessage     32
     method0               76
     method1               16
     method2               12
     method3                8
     method4                8
     method5              168
     method8                0
     method9                0
     patch_rect             0


   Segment part sizes:

     Function/Label                 Bytes
     --------------                 -----
     patch_rect                       24
     lgpInitLangPack                 720
     lgpFreeLangPack                  56
     minus11                           4
     ?<Constant "$bookmarks\\">       92
     percent_t                        12
     StartGetFile                    496
     collectItemsParams             2044
     method0                         664
     method1                         160
     FreeViewUrl                      12
     method2                          72
     method3                          60
     method4                          56
     RunOtherCopyByURL               204
     method5                        1792
     method8                           8
     method9                           8
     CreateViewGUI                   112
     gui_methods                      52
     maincsm_oncreate                 56
     KillAll                          32
     Killer                           32
     maincsm_onclose                  52
     GotoLink                         96
     GotoFile                         96
     maincsm_onmessage               644
     ?<Constant "INET process bussy!">
                                     616
     UpdateCSMname                   128
     ReadUrlFile                     236
     ParseInputFilename              172
     lgpData                        2032
     ENABLE_REDRAW                     4
     maincsm_name_body               280
     LoadAuthCode                    312
     GenerateFile                    204
     main                            532
     ??DataTable1                      4
     ??DataTable3                      4
     ??DataTable4                      4
     ??DataTable7                      4
     ??DataTable10                     4
     ??DataTable12                     4
     ??DataTable13                     4
     ??DataTable19                     4
     ??DataTable22                     4
     ??DataTable27                     4
     ??DataTable28                     4
     ??DataTable29                     4
     ??DataTable30                     4
     ?<Constant "Ok">                  3
     ?<Constant "Go">                  3
     ?<Constant "en">                  3
     ?<Constant "$urlcache\\$date$time.url">
                                      28
     ?<Constant "">                    1
     ?<Constant "url">                 4
     ?<Constant "oms">                 4
     ?<Constant "bookmarks">          12
     ?<Constant "ru">                  3
     ?<Constant "\\">                  2
      Others                         556

 
 9 676 bytes in segment CODE
   839 bytes in segment DATA_C
 2 316 bytes in segment DATA_Z
    12 bytes in segment INITTAB
 
 9 108 bytes of CODE  memory (+ 580 bytes shared)
   839 bytes of CONST memory
 2 316 bytes of DATA  memory

Errors: none
Warnings: none
