##############################################################################
#                                                                            #
# IAR ARM ANSI C/C++ Compiler V4.42A/W32 EVALUATION    06/Oct/2008  21:46:50 #
# Copyright 1999-2005 IAR Systems. All rights reserved.                      #
#                                                                            #
#    Cpu mode        =  interwork                                            #
#    Endian          =  little                                               #
#    Stack alignment =  4                                                    #
#    Source file     =  D:\Pasha\elf\BelleteMini13.05.08\mainmenu.c          #
#    Command line    =  D:\Pasha\elf\BelleteMini13.05.08\mainmenu.c -D       #
#                       NEWSGOLD -D ELKA -lC D:\Pasha\elf\BelleteMini13.05.0 #
#                       8\Release_ELKA\List\ -o D:\Pasha\elf\BelleteMini13.0 #
#                       5.08\Release_ELKA\Obj\ -s9 --no_unroll --no_inline   #
#                       --cpu_mode arm --endian little --cpu ARM926EJ-S      #
#                       --stack_align 4 --interwork -e --fpu None            #
#                       --dlib_config "D:\Pasha\Embedded Workbench 4.0       #
#                       Evaluation2\ARM\LIB\dl5tpainl8n.h" -I                #
#                       "D:\Pasha\Embedded Workbench 4.0                     #
#                       Evaluation2\ARM\INC\"                                #
#    List file       =  D:\Pasha\elf\BelleteMini13.05.08\Release_ELKA\List\m #
#                       ainmenu.lst                                          #
#    Object file     =  D:\Pasha\elf\BelleteMini13.05.08\Release_ELKA\Obj\ma #
#                       inmenu.r79                                           #
#                                                                            #
#                                                                            #
##############################################################################

D:\Pasha\elf\BelleteMini13.05.08\mainmenu.c
      1          #include "..\inc\swilib.h"
      2          #include "rect_patcher.h"

   \                                 In segment CODE, align 4, keep-with-next
   \   __??Code32?? __code __interwork __atpcs void patch_header(HEADER_DESC const *)
   \                     patch_header:
   \   00000000   10402DE9           PUSH     {R4,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   \   00000008   0000A0E3           MOV      R0,#+0
   \   0000000C   B000C4E1           STRH     R0,[R4, #+0]
   \   00000010   1800A0E3           MOV      R0,#+24
   \   00000014   B200C4E1           STRH     R0,[R4, #+2]
   \   00000018   888100EF           SWI      +33160
   \   0000001C   010040E2           SUB      R0,R0,#+1
   \   00000020   B400C4E1           STRH     R0,[R4, #+4]
   \   00000024   8A8100EF           SWI      +33162
   \   00000028   170080E2           ADD      R0,R0,#+23
   \   0000002C   B600C4E1           STRH     R0,[R4, #+6]
   \   00000030   1080BDE8           POP      {R4,PC}          ;; return

   \                                 In segment CODE, align 4, keep-with-next
   \   __??Code32?? __code __interwork __atpcs void patch_input(INPUTDIA_DESC const *)
   \                     patch_input:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   \   00000008   0000A0E3           MOV      R0,#+0
   \   0000000C   B801C4E1           STRH     R0,[R4, #+24]
   \   00000010   8A8100EF           SWI      +33162
   \   00000014   190080E2           ADD      R0,R0,#+25
   \   00000018   BA01C4E1           STRH     R0,[R4, #+26]
   \   0000001C   888100EF           SWI      +33160
   \   00000020   010040E2           SUB      R0,R0,#+1
   \   00000024   BC01C4E1           STRH     R0,[R4, #+28]
   \   00000028   898100EF           SWI      +33161
   \   0000002C   0050A0E1           MOV      R5,R0
   \   00000030   8B8100EF           SWI      +33163
   \   00000034   000045E0           SUB      R0,R5,R0
   \   00000038   010040E2           SUB      R0,R0,#+1
   \   0000003C   BE01C4E1           STRH     R0,[R4, #+30]
   \   00000040   3080BDE8           POP      {R4,R5,PC}       ;; return

   \                                 In segment CODE, align 4, keep-with-next
   \   __??Code32?? __code __interwork __atpcs void patch_header_small(HEADER_DESC *)
   \                     patch_header_small:
   \   00000000   10402DE9           PUSH     {R4,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   \   00000008   0300A0E3           MOV      R0,#+3
   \   0000000C   B000C4E1           STRH     R0,[R4, #+0]
   \   00000010   888100EF           SWI      +33160
   \   00000014   060040E2           SUB      R0,R0,#+6
   \   00000018   B400C4E1           STRH     R0,[R4, #+4]
   \   0000001C   3B00A0E3           MOV      R0,#+59
   \   00000020   B200C4E1           STRH     R0,[R4, #+2]
   \   00000024   5D00A0E3           MOV      R0,#+93
   \   00000028   B600C4E1           STRH     R0,[R4, #+6]
   \   0000002C   1080BDE8           POP      {R4,PC}          ;; return
      3          #include "view.h"
      4          #include "main.h"
      5          #include "string_works.h"
      6          #include "mainmenu.h"
      7          #include "conf_loader.h"
      8          #include "urlstack.h"
      9          #include "history.h"
     10          #include "file_works.h"
     11          #include "lang.h"
     12          
     13          extern int view_url_mode;
     14          extern char *view_url;
     15          extern char *goto_url;
     16          extern int maincsm_id;
     17          
     18          char curBookmarksDir[128];
     19          
     20          int CreateBookmarksMenu(char *dir);
     21          
     22          typedef struct
     23          {
     24            void *next;
     25            char urlname[64];
     26            char fullpath[128];
     27          }URL_STRUCT;
     28          
     29          //------------------------------------------------------------------------------
     30          
     31          
     32          SOFTKEY_DESC add_bookmark_sk[]=
     33          {
     34            {0x0018,0x0000,(int)"Add"},
     35            {0x0001,0x0000,(int)"Cancel"},
     36            {0x003D,0x0000,(int)LGP_DOIT_PIC}
     37          };
     38          

   \                                 In segment DATA_C, align 4, align-sorted
     39          static const SOFTKEYSTAB add_bookmark_skt=
   \                     add_bookmark_skt:
   \   00000000   ........0000       DC32 add_bookmark_sk, 0
   \              0000        
     40          {
     41            add_bookmark_sk,0
     42          };
     43          
     44          
     45          HEADER_DESC add_bookmark_hdr={0,0,0,0,NULL,(int)"Bookmark...",LGP_NULL};
     46          

   \                                 In segment CODE, align 4, keep-with-next
     47          static void add_bookmark_ghook(GUI *data, int cmd)
     48          {
     49            SOFTKEY_DESC sk={0x0FFF,0x0000,(int)lgpData[LGP_Save]};
   \                     add_bookmark_ghook:
   \   00000000   44309FE5           LDR      R3,??add_bookmark_ghook_0  ;; `?<Constant {4095, 0, 0}>_2`
   \   00000004   30402DE9           PUSH     {R4,R5,LR}
   \   00000008   08D04DE2           SUB      SP,SP,#+8
   \   0000000C   300093E8           LDM      R3,{R4,R5}
   \   00000010   38309FE5           LDR      R3,??add_bookmark_ghook_0+0x4  ;; lgpData + 144
   \   00000014   0D20A0E1           MOV      R2,SP
   \   00000018   300082E8           STM      R2,{R4,R5}
   \   0000001C   003093E5           LDR      R3,[R3, #+0]
     50            if (cmd==0x0A)
   \   00000020   0A0051E3           CMP      R1,#+10
   \   00000024   04308DE5           STR      R3,[SP, #+4]
   \   00000028   0100001A           BNE      ??add_bookmark_ghook_1
     51            {
     52              DisableIDLETMR();
   \   0000002C   7F0100EF           SWI      +383
   \   00000030   3380BDE8           POP      {R0,R1,R4,R5,PC}
     53            }
     54            if (cmd==7)
   \                     ??add_bookmark_ghook_1:
   \   00000034   070051E3           CMP      R1,#+7
   \   00000038   3380BD18           POPNE    {R0,R1,R4,R5,PC}
     55            {
     56              SetSoftKey(data,&sk,SET_SOFT_KEY_N);
   \   0000003C   0020A0E3           MOV      R2,#+0
   \   00000040   0D10A0E1           MOV      R1,SP
   \   00000044   680100EF           SWI      +360
     57            }
     58          }
   \   00000048   3380BDE8           POP      {R0,R1,R4,R5,PC}  ;; return
   \                     ??add_bookmark_ghook_0:
   \   0000004C   ........           DC32     `?<Constant {4095, 0, 0}>_2`
   \   00000050   ........           DC32     lgpData + 144
     59          

   \                                 In segment CODE, align 4, keep-with-next
     60          static void add_bookmark_locret(void){}
   \                     add_bookmark_locret:
   \   00000000   1EFF2FE1           BX       LR               ;; return
     61          

   \                                 In segment CODE, align 4, keep-with-next
     62          static int add_bookmark_onkey(GUI *data, GUI_MSG *msg)
     63          {
   \                     add_bookmark_onkey:
   \   00000000   F0412DE9           PUSH     {R4-R8,LR}
   \   00000004   4CDF4DE2           SUB      SP,SP,#+304
   \   00000008   0050A0E1           MOV      R5,R0
     64            EDITCONTROL ec;
     65            WSHDR *ws;
     66            char *name, *url, path[256], *tmp;
     67            unsigned ul;
     68            int f;
     69          
     70            if (msg->keys==0xFFF)
   \   0000000C   F200D1E1           LDRSH    R0,[R1, #+2]
   \   00000010   FF10A0E3           MOV      R1,#+255
   \   00000014   F01E81E3           ORR      R1,R1,#0xF00
   \   00000018   010050E1           CMP      R0,R1
   \   0000001C   5000001A           BNE      ??add_bookmark_onkey_0
     71            {
     72              ExtractEditControl(data,2,&ec);
   \   00000020   412F8DE2           ADD      R2,SP,#+260
   \   00000024   0210A0E3           MOV      R1,#+2
   \   00000028   0500A0E1           MOV      R0,R5
   \   0000002C   690100EF           SWI      +361
     73              ws = ec.pWS;
   \   00000030   2C619DE5           LDR      R6,[SP, #+300]
     74              name = (char *)malloc(256);
   \   00000034   400FA0E3           MOV      R0,#+256
   \   00000038   140000EF           SWI      +20
   \   0000003C   0040A0E1           MOV      R4,R0
     75              ws_2str(ws, name, 256);
   \   00000040   402FA0E3           MOV      R2,#+256
   \   00000044   0410A0E1           MOV      R1,R4
   \   00000048   0600A0E1           MOV      R0,R6
   \   0000004C   A30000EF           SWI      +163
     76          
     77              ExtractEditControl(data,4,&ec);
   \   00000050   412F8DE2           ADD      R2,SP,#+260
   \   00000054   0410A0E3           MOV      R1,#+4
   \   00000058   0500A0E1           MOV      R0,R5
   \   0000005C   690100EF           SWI      +361
     78              ws = ec.pWS;
   \   00000060   2C519DE5           LDR      R5,[SP, #+300]
     79              tmp = url = (char *)malloc(ws->wsbody[0]+3);
     80              for (int i=0; i<ws->wsbody[0]; i++) *url++=char16to8(ws->wsbody[i+1]);
   \   00000064   0080A0E3           MOV      R8,#+0
   \   00000068   000095E5           LDR      R0,[R5, #+0]
   \   0000006C   B000D0E1           LDRH     R0,[R0, #+0]
   \   00000070   030080E2           ADD      R0,R0,#+3
   \   00000074   140000EF           SWI      +20
   \   00000078   0070A0E1           MOV      R7,R0
   \   0000007C   000095E5           LDR      R0,[R5, #+0]
   \   00000080   0760A0E1           MOV      R6,R7
   \   00000084   B000D0E1           LDRH     R0,[R0, #+0]
   \   00000088   000050E3           CMP      R0,#+0
   \   0000008C   0500001A           BNE      ??add_bookmark_onkey_1
   \   00000090   080000EA           B        ??add_bookmark_onkey_2
   \                     ??add_bookmark_onkey_3:
   \   00000094   880080E0           ADD      R0,R0,R8, LSL #+1
   \   00000098   B200D0E1           LDRH     R0,[R0, #+2]
   \   0000009C   018088E2           ADD      R8,R8,#+1
   \   000000A0   ........           _BLF     char16to8,??char16to8??rA
   \   000000A4   ........           STRB     R0,[R7], #+1
   \                     ??add_bookmark_onkey_1:
   \   000000A8   000095E5           LDR      R0,[R5, #+0]
   \   000000AC   B010D0E1           LDRH     R1,[R0, #+0]
   \   000000B0   010058E1           CMP      R8,R1
   \   000000B4   F6FFFFBA           BLT      ??add_bookmark_onkey_3
     81              *url = 0;
     82              url = tmp;
     83          
     84              getSymbolicPath(path,curBookmarksDir);
   \                     ??add_bookmark_onkey_2:
   \   000000B8   B0109FE5           LDR      R1,??add_bookmark_onkey_4  ;; main_menu_ITEMS + 724
   \   000000BC   0000A0E3           MOV      R0,#+0
   \   000000C0   0000C7E5           STRB     R0,[R7, #+0]
   \   000000C4   04008DE2           ADD      R0,SP,#+4
   \   000000C8   ........           _BLF     getSymbolicPath,??getSymbolicPath??rA
     85              strcat(path, name);
   \   000000CC   0410A0E1           MOV      R1,R4
   \   000000D0   04008DE2           ADD      R0,SP,#+4
   \   000000D4   170000EF           SWI      +23
     86              strcat(path, ".url");
   \   000000D8   ........           LDR      R1,??DataTable7  ;; `?<Constant "$resources\\\\folder.png">` + 60
   \   000000DC   04008DE2           ADD      R0,SP,#+4
   \   000000E0   170000EF           SWI      +23
     87              unlink(path,&ul); // it will duplicate, if name changed :(
   \   000000E4   0D10A0E1           MOV      R1,SP
   \   000000E8   04008DE2           ADD      R0,SP,#+4
   \   000000EC   6B0100EF           SWI      +363
     88              f=fopen(path,A_WriteOnly+A_Create+A_BIN,P_READ+P_WRITE,&ul);
   \   000000F0   0D30A0E1           MOV      R3,SP
   \   000000F4   602FA0E3           MOV      R2,#+384
   \   000000F8   0110A0E3           MOV      R1,#+1
   \   000000FC   811C81E3           ORR      R1,R1,#0x8100
   \   00000100   04008DE2           ADD      R0,SP,#+4
   \   00000104   0A0000EF           SWI      +10
   \   00000108   0050A0E1           MOV      R5,R0
     89              if (f!=-1)
   \   0000010C   010075E3           CMN      R5,#+1
   \   00000110   0C00000A           BEQ      ??add_bookmark_onkey_5
     90              {
     91                url = ToWeb(url, 0);
   \   00000114   0010A0E3           MOV      R1,#+0
   \   00000118   0600A0E1           MOV      R0,R6
   \   0000011C   ........           _BLF     ToWeb,??ToWeb??rA
   \   00000120   0060A0E1           MOV      R6,R0
     92                fwrite(f,url,strlen(url),&ul);
   \   00000124   1B0000EF           SWI      +27
   \   00000128   0D30A0E1           MOV      R3,SP
   \   0000012C   0020A0E1           MOV      R2,R0
   \   00000130   0610A0E1           MOV      R1,R6
   \   00000134   0500A0E1           MOV      R0,R5
   \   00000138   0C0000EF           SWI      +12
     93                fclose(f,&ul);
   \   0000013C   0D10A0E1           MOV      R1,SP
   \   00000140   0500A0E1           MOV      R0,R5
   \   00000144   0D0000EF           SWI      +13
     94              }
     95              mfree(url);
   \                     ??add_bookmark_onkey_5:
   \   00000148   0600A0E1           MOV      R0,R6
   \   0000014C   150000EF           SWI      +21
     96              mfree(name);
   \   00000150   0400A0E1           MOV      R0,R4
   \   00000154   150000EF           SWI      +21
     97              return (1);
   \   00000158   0100A0E3           MOV      R0,#+1
   \   0000015C   4CDF8DE2           ADD      SP,SP,#+304
   \   00000160   F081BDE8           POP      {R4-R8,PC}
     98            }
     99            return (0);
   \                     ??add_bookmark_onkey_0:
   \   00000164   0000A0E3           MOV      R0,#+0
   \   00000168   4CDF8DE2           ADD      SP,SP,#+304
   \   0000016C   F081BDE8           POP      {R4-R8,PC}       ;; return
   \                     ??add_bookmark_onkey_4:
   \   00000170   ........           DC32     main_menu_ITEMS + 724
    100          }
    101          

   \                                 In segment DATA_C, align 4, align-sorted
    102          static const INPUTDIA_DESC add_bookmark_desc =
   \                     add_bookmark_desc:
   \   00000000   01000000....       DC32 1, add_bookmark_onkey, add_bookmark_ghook, add_bookmark_locret, 0
   \              ............
   \              ........0000
   \              0000        
   \   00000014   ........           DC32 add_bookmark_skt
   \   00000018   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   00000020   080000006400       DC32 8, 100, 101, 0, 0, 1073741824
   \              000065000000
   \              000000000000
   \              000000000040
    103          {
    104            1,
    105            add_bookmark_onkey,
    106            add_bookmark_ghook,
    107            (void *)add_bookmark_locret,
    108            0,
    109            &add_bookmark_skt,
    110            {0,0,0,0},
    111            FONT_SMALL,
    112            100,
    113            101,
    114            0,
    115            //  0x00000001 - Выровнять по правому краю
    116            //  0x00000002 - Выровнять по центру
    117            //  0x00000004 - Инверсия знакомест
    118            //  0x00000008 - UnderLine
    119            //  0x00000020 - Не переносить слова
    120            //  0x00000200 - bold
    121            0,
    122            //  0x00000002 - ReadOnly
    123            //  0x00000004 - Не двигается курсор
    124            //  0x40000000 - Поменять местами софт-кнопки
    125            0x40000000
    126          };
    127          
    128          

   \                                 In segment CODE, align 4, keep-with-next
    129          int CreateAddBookmark(GUI *data)
    130          {
   \                     CreateAddBookmark:
   \   00000000   F04F2DE9           PUSH     {R4-R11,LR}
   \   00000004   58D04DE2           SUB      SP,SP,#+88
   \   00000008   0090A0E1           MOV      R9,R0
    131            void *ma=malloc_adr();
    132            void *eq;
    133            MAIN_CSM *main_csm;
    134            VIEW_GUI *p;
    135            EDITCONTROL ec;
    136            char *url_start;
    137            int flag = 0;
   \   0000000C   0080A0E3           MOV      R8,#+0
   \   00000010   148000EF           SWI      +32788
   \   00000014   0040A0E1           MOV      R4,R0
    138            char *buf;
    139            
    140            eq=AllocEQueue(ma,mfree_adr());    // Extension
   \   00000018   158000EF           SWI      +32789
   \   0000001C   0010A0E1           MOV      R1,R0
   \   00000020   0400A0E1           MOV      R0,R4
   \   00000024   630100EF           SWI      +355
   \   00000028   0050A0E1           MOV      R5,R0
    141            WSHDR *ews=AllocWS(1024);
   \   0000002C   400EA0E3           MOV      R0,#+1024
   \   00000030   250100EF           SWI      +293
   \   00000034   0060A0E1           MOV      R6,R0
    142          
    143            URL_STRUCT *ustop = MenuGetUserPointer(data);
   \   00000038   0900A0E1           MOV      R0,R9
   \   0000003C   E00100EF           SWI      +480
   \   00000040   00B0A0E1           MOV      R11,R0
    144          
    145            if(data) // edit
   \   00000044   000059E3           CMP      R9,#+0
   \   00000048   1E00000A           BEQ      ??CreateAddBookmark_0
   \   0000004C   0D20A0E1           MOV      R2,SP
   \   00000050   30108DE2           ADD      R1,SP,#+48
   \   00000054   44008BE2           ADD      R0,R11,#+68
    146            {
    147              // read url file
    148              int f;
    149              unsigned int err;
    150              int fsize;
    151              FSTATS stat;
    152              if (GetFileStats(ustop->fullpath,&stat,&err)!=-1)
   \   00000058   840000EF           SWI      +132
   \   0000005C   010070E3           CMN      R0,#+1
   \   00000060   1800000A           BEQ      ??CreateAddBookmark_0
    153              {
    154                if ((fsize=stat.size)>0)
   \   00000064   34A09DE5           LDR      R10,[SP, #+52]
   \   00000068   01005AE3           CMP      R10,#+1
   \   0000006C   150000BA           BLT      ??CreateAddBookmark_0
    155                {
    156                  if ((f=fopen(ustop->fullpath,A_ReadOnly+A_BIN,P_READ,&err))!=-1)
   \   00000070   0D30A0E1           MOV      R3,SP
   \   00000074   8020A0E3           MOV      R2,#+128
   \   00000078   801CA0E3           MOV      R1,#+32768
   \   0000007C   44008BE2           ADD      R0,R11,#+68
   \   00000080   0A0000EF           SWI      +10
   \   00000084   0090A0E1           MOV      R9,R0
   \   00000088   010079E3           CMN      R9,#+1
   \   0000008C   0D00000A           BEQ      ??CreateAddBookmark_0
    157                  {
    158                    buf=malloc(fsize+1);
   \   00000090   01008AE2           ADD      R0,R10,#+1
   \   00000094   140000EF           SWI      +20
   \   00000098   0070A0E1           MOV      R7,R0
    159                    buf[fread(f,buf,fsize,&err)]=0;
   \   0000009C   0D30A0E1           MOV      R3,SP
   \   000000A0   0A20A0E1           MOV      R2,R10
   \   000000A4   0710A0E1           MOV      R1,R7
   \   000000A8   0900A0E1           MOV      R0,R9
   \   000000AC   0B0000EF           SWI      +11
   \   000000B0   0010A0E3           MOV      R1,#+0
   \   000000B4   0710C0E7           STRB     R1,[R0, +R7]
    160                    fclose(f,&err);
   \   000000B8   0D10A0E1           MOV      R1,SP
   \   000000BC   0900A0E1           MOV      R0,R9
   \   000000C0   0D0000EF           SWI      +13
    161                    flag = 1;
   \   000000C4   0180A0E3           MOV      R8,#+1
    162                  }
    163                }
    164              }
    165            }
    166            
    167            ascii2ws(ews,lgpData[LGP_NameHeader]);
   \                     ??CreateAddBookmark_0:
   \   000000C8   ........           LDR      R9,??DataTable21  ;; lgpData
    168            ConstructEditControl(&ec,ECT_HEADER,ECF_APPEND_EOL,ews,wslen(ews));
    169            AddEditControlToEditQend(eq,&ec,ma);
    170                
    171            if(flag) // edit bookmark
   \   000000CC   ........           LDR      R10,??DataTable10  ;; maincsm_id
   \   000000D0   701099E5           LDR      R1,[R9, #+112]
   \   000000D4   0600A0E1           MOV      R0,R6
   \   000000D8   ........           _BLF     ascii2ws,??ascii2ws??rA
   \   000000DC   000096E5           LDR      R0,[R6, #+0]
   \   000000E0   0630A0E1           MOV      R3,R6
   \   000000E4   B000D0E1           LDRH     R0,[R0, #+0]
   \   000000E8   4020A0E3           MOV      R2,#+64
   \   000000EC   0110A0E3           MOV      R1,#+1
   \   000000F0   01002DE9           PUSH     {R0}
   \   000000F4   08008DE2           ADD      R0,SP,#+8
   \   000000F8   650100EF           SWI      +357
   \   000000FC   0420A0E1           MOV      R2,R4
   \   00000100   08108DE2           ADD      R1,SP,#+8
   \   00000104   0500A0E1           MOV      R0,R5
   \   00000108   660100EF           SWI      +358
   \   0000010C   000058E3           CMP      R8,#+0
   \   00000110   04D08DE2           ADD      SP,SP,#+4
   \   00000114   0400000A           BEQ      ??CreateAddBookmark_1
    172            {
    173              str_2ws(ews,ustop->urlname,64);
   \   00000118   4020A0E3           MOV      R2,#+64
   \   0000011C   04108BE2           ADD      R1,R11,#+4
   \   00000120   0600A0E1           MOV      R0,R6
   \   00000124   6C0100EF           SWI      +364
   \   00000128   0C0000EA           B        ??CreateAddBookmark_2
    174            }
    175            else // add bookmark
    176            {
    177              if ((main_csm=(MAIN_CSM *)FindCSMbyID(maincsm_id)))
   \                     ??CreateAddBookmark_1:
   \   0000012C   00009AE5           LDR      R0,[R10, #+0]
   \   00000130   080100EF           SWI      +264
   \   00000134   000050E3           CMP      R0,#+0
   \   00000138   0800000A           BEQ      ??CreateAddBookmark_2
    178              {
    179                p=FindGUIbyId(main_csm->view_id,NULL);
   \   0000013C   280090E5           LDR      R0,[R0, #+40]
   \   00000140   0010A0E3           MOV      R1,#+0
   \   00000144   090200EF           SWI      +521
    180                if (p->vd->title)
   \   00000148   340090E5           LDR      R0,[R0, #+52]
   \   0000014C   DC1090E5           LDR      R1,[R0, #+220]
    181                  ascii2ws(ews,p->vd->title);
    182                else
    183                  ascii2ws(ews,lgpData[LGP_NewBookmark]);
   \   00000150   0600A0E1           MOV      R0,R6
   \   00000154   000051E3           CMP      R1,#+0
   \   00000158   94109905           LDREQ    R1,[R9, #+148]
   \   0000015C   ........           _BLF     ascii2ws,??ascii2ws??rA
    184              }
    185            }
    186              
    187            PrepareEditControl(&ec);
   \                     ??CreateAddBookmark_2:
   \   00000160   04008DE2           ADD      R0,SP,#+4
   \   00000164   640100EF           SWI      +356
    188            ConstructEditControl(&ec,ECT_NORMAL_TEXT,0x40,ews,64);
   \   00000168   4000A0E3           MOV      R0,#+64
   \   0000016C   01002DE9           PUSH     {R0}
   \   00000170   0630A0E1           MOV      R3,R6
   \   00000174   4020A0E3           MOV      R2,#+64
   \   00000178   0310A0E3           MOV      R1,#+3
   \   0000017C   08008DE2           ADD      R0,SP,#+8
   \   00000180   650100EF           SWI      +357
    189            AddEditControlToEditQend(eq,&ec,ma);   //2
   \   00000184   0420A0E1           MOV      R2,R4
   \   00000188   08108DE2           ADD      R1,SP,#+8
   \   0000018C   0500A0E1           MOV      R0,R5
   \   00000190   660100EF           SWI      +358
    190          
    191            ascii2ws(ews,lgpData[LGP_LinkHeader]);
   \   00000194   741099E5           LDR      R1,[R9, #+116]
   \   00000198   0600A0E1           MOV      R0,R6
   \   0000019C   ........           _BLF     ascii2ws,??ascii2ws??rA
    192            ConstructEditControl(&ec,ECT_HEADER,ECF_APPEND_EOL,ews,wslen(ews));
   \   000001A0   000096E5           LDR      R0,[R6, #+0]
   \   000001A4   0630A0E1           MOV      R3,R6
   \   000001A8   B000D0E1           LDRH     R0,[R0, #+0]
   \   000001AC   4020A0E3           MOV      R2,#+64
   \   000001B0   0110A0E3           MOV      R1,#+1
   \   000001B4   01002DE9           PUSH     {R0}
   \   000001B8   0C008DE2           ADD      R0,SP,#+12
   \   000001BC   650100EF           SWI      +357
    193            AddEditControlToEditQend(eq,&ec,ma);
   \   000001C0   0420A0E1           MOV      R2,R4
   \   000001C4   0C108DE2           ADD      R1,SP,#+12
   \   000001C8   0500A0E1           MOV      R0,R5
   \   000001CC   660100EF           SWI      +358
    194          
    195            if(flag) // edit bookmark
   \   000001D0   000058E3           CMP      R8,#+0
   \   000001D4   08D08DE2           ADD      SP,SP,#+8
   \   000001D8   0500000A           BEQ      ??CreateAddBookmark_3
    196            {
    197              ascii2ws(ews,buf);
   \   000001DC   0710A0E1           MOV      R1,R7
   \   000001E0   0600A0E1           MOV      R0,R6
   \   000001E4   ........           _BLF     ascii2ws,??ascii2ws??rA
    198              mfree(buf);
   \   000001E8   0700A0E1           MOV      R0,R7
   \   000001EC   150000EF           SWI      +21
   \   000001F0   3B0000EA           B        ??CreateAddBookmark_4
    199            }
    200            else // add bookmark
    201            {
    202              if ((main_csm=(MAIN_CSM *)FindCSMbyID(maincsm_id)))
   \                     ??CreateAddBookmark_3:
   \   000001F4   00009AE5           LDR      R0,[R10, #+0]
   \   000001F8   080100EF           SWI      +264
   \   000001FC   000050E3           CMP      R0,#+0
   \   00000200   3700000A           BEQ      ??CreateAddBookmark_4
    203              {
    204                p=FindGUIbyId(main_csm->view_id,NULL);
   \   00000204   280090E5           LDR      R0,[R0, #+40]
   \   00000208   0010A0E3           MOV      R1,#+0
   \   0000020C   090200EF           SWI      +521
    205                if (p->vd->pageurl)
   \   00000210   340090E5           LDR      R0,[R0, #+52]
   \   00000214   D81090E5           LDR      R1,[R0, #+216]
   \   00000218   000051E3           CMP      R1,#+0
   \   0000021C   1100000A           BEQ      ??CreateAddBookmark_5
    206                {
    207                  for(url_start = p->vd->pageurl; *url_start && *url_start != '/'; url_start++);
   \   00000220   0170A0E1           MOV      R7,R1
   \   00000224   000000EA           B        ??CreateAddBookmark_6
   \                     ??CreateAddBookmark_7:
   \   00000228   017087E2           ADD      R7,R7,#+1
   \                     ??CreateAddBookmark_6:
   \   0000022C   0000D7E5           LDRB     R0,[R7, #+0]
   \   00000230   000050E3           CMP      R0,#+0
   \   00000234   2F005013           CMPNE    R0,#+47
   \   00000238   FAFFFF1A           BNE      ??CreateAddBookmark_7
    208                  for(; *url_start && *url_start == '/'; url_start++);
   \                     ??CreateAddBookmark_8:
   \   0000023C   0000D7E5           LDRB     R0,[R7, #+0]
   \   00000240   000050E3           CMP      R0,#+0
   \   00000244   0200000A           BEQ      ??CreateAddBookmark_9
   \   00000248   2F0050E3           CMP      R0,#+47
   \   0000024C   01708702           ADDEQ    R7,R7,#+1
   \   00000250   F9FFFF0A           BEQ      ??CreateAddBookmark_8
    209                  str_2ws(ews,url_start,strlen(url_start));
   \                     ??CreateAddBookmark_9:
   \   00000254   0700A0E1           MOV      R0,R7
   \   00000258   1B0000EF           SWI      +27
   \   0000025C   0020A0E1           MOV      R2,R0
   \                     ??CreateAddBookmark_10:
   \   00000260   0710A0E1           MOV      R1,R7
   \   00000264   1C0000EA           B        ??CreateAddBookmark_11
    210                }
    211                else // url не загружен
    212                {
    213                  switch(view_url_mode)
   \                     ??CreateAddBookmark_5:
   \   00000268   ........           LDR      R0,??DataTable8  ;; view_url
   \   0000026C   007090E5           LDR      R7,[R0, #+0]
   \   00000270   ........           LDR      R0,??DataTable4  ;; view_url_mode
   \   00000274   000090E5           LDR      R0,[R0, #+0]
   \   00000278   000050E3           CMP      R0,#+0
   \   0000027C   0200000A           BEQ      ??CreateAddBookmark_12
   \   00000280   010050E2           SUBS     R0,R0,#+1
   \   00000284   0300000A           BEQ      ??CreateAddBookmark_13
   \   00000288   110000EA           B        ??CreateAddBookmark_14
    214                  {
    215                  case MODE_FILE:
    216                    str_2ws(ews,view_url,255);
   \                     ??CreateAddBookmark_12:
   \   0000028C   FF20A0E3           MOV      R2,#+255
   \   00000290   F2FFFFEA           B        ??CreateAddBookmark_10
    217                    break;
    218                  case MODE_URL:
    219                    for(url_start = view_url; *url_start && *url_start != '/'; url_start++);
   \                     ??CreateAddBookmark_15:
   \   00000294   017087E2           ADD      R7,R7,#+1
   \                     ??CreateAddBookmark_13:
   \   00000298   0000D7E5           LDRB     R0,[R7, #+0]
   \   0000029C   000050E3           CMP      R0,#+0
   \   000002A0   2F005013           CMPNE    R0,#+47
   \   000002A4   FAFFFF1A           BNE      ??CreateAddBookmark_15
    220                    for(; *url_start && *url_start == '/'; url_start++);
   \                     ??CreateAddBookmark_16:
   \   000002A8   0000D7E5           LDRB     R0,[R7, #+0]
   \   000002AC   000050E3           CMP      R0,#+0
   \   000002B0   0200000A           BEQ      ??CreateAddBookmark_17
   \   000002B4   2F0050E3           CMP      R0,#+47
   \   000002B8   01708702           ADDEQ    R7,R7,#+1
   \   000002BC   F9FFFF0A           BEQ      ??CreateAddBookmark_16
    221                    str_2ws(ews,url_start,strlen(url_start));
   \                     ??CreateAddBookmark_17:
   \   000002C0   0700A0E1           MOV      R0,R7
   \   000002C4   1B0000EF           SWI      +27
   \   000002C8   0020A0E1           MOV      R2,R0
   \   000002CC   0710A0E1           MOV      R1,R7
   \   000002D0   010000EA           B        ??CreateAddBookmark_11
    222                    break;
    223                  default:
    224                    str_2ws(ews,lgpData[LGP_Absent],32);
   \                     ??CreateAddBookmark_14:
   \   000002D4   981099E5           LDR      R1,[R9, #+152]
   \   000002D8   2020A0E3           MOV      R2,#+32
   \                     ??CreateAddBookmark_11:
   \   000002DC   0600A0E1           MOV      R0,R6
   \   000002E0   6C0100EF           SWI      +364
    225                    break;
    226                  }
    227                }
    228              }
    229            }
    230            PrepareEditControl(&ec);
    231            ConstructEditControl(&ec,ECT_NORMAL_TEXT,0x40,ews,1024);
    232            AddEditControlToEditQend(eq,&ec,ma);   //2
    233            
    234            FreeWS(ews);
    235            patch_header(&add_bookmark_hdr);
    236            patch_input(&add_bookmark_desc);
   \                     ??CreateAddBookmark_4:
   \   000002E4   74709FE5           LDR      R7,??CreateAddBookmark_18  ;; add_bookmark_desc
   \   000002E8   04008DE2           ADD      R0,SP,#+4
   \   000002EC   640100EF           SWI      +356
   \   000002F0   400EA0E3           MOV      R0,#+1024
   \   000002F4   01002DE9           PUSH     {R0}
   \   000002F8   0630A0E1           MOV      R3,R6
   \   000002FC   4020A0E3           MOV      R2,#+64
   \   00000300   0310A0E3           MOV      R1,#+3
   \   00000304   08008DE2           ADD      R0,SP,#+8
   \   00000308   650100EF           SWI      +357
   \   0000030C   0420A0E1           MOV      R2,R4
   \   00000310   08108DE2           ADD      R1,SP,#+8
   \   00000314   0500A0E1           MOV      R0,R5
   \   00000318   660100EF           SWI      +358
   \   0000031C   0600A0E1           MOV      R0,R6
   \   00000320   ........           LDR      R6,??DataTable27  ;; main_menu_ITEMS
   \   00000324   290100EF           SWI      +297
   \   00000328   4C4FA0E3           MOV      R4,#+304
   \   0000032C   060084E0           ADD      R0,R4,R6
   \   00000330   ........           _BLF     patch_header,??patch_header??rA
   \   00000334   0700A0E1           MOV      R0,R7
   \   00000338   ........           _BLF     patch_input,??patch_input??rA
    237            return CreateInputTextDialog(&add_bookmark_desc,&add_bookmark_hdr,eq,1,0);
   \   0000033C   0000A0E3           MOV      R0,#+0
   \   00000340   01002DE9           PUSH     {R0}
   \   00000344   0130A0E3           MOV      R3,#+1
   \   00000348   0520A0E1           MOV      R2,R5
   \   0000034C   061084E0           ADD      R1,R4,R6
   \   00000350   0700A0E1           MOV      R0,R7
   \   00000354   670100EF           SWI      +359
   \   00000358   60D08DE2           ADD      SP,SP,#+96
   \   0000035C   F08FBDE8           POP      {R4-R11,PC}      ;; return
   \                     ??CreateAddBookmark_18:
   \   00000360   ........           DC32     add_bookmark_desc
    238          }
    239          

   \                                 In segment CODE, align 4, keep-with-next
    240          static void do_add_bookmark(GUI *data)
    241          {
   \                     do_add_bookmark:
   \   00000000   00402DE9           PUSH     {LR}
    242            CreateAddBookmark(0);
   \   00000004   0000A0E3           MOV      R0,#+0
   \   00000008   ........           BL       CreateAddBookmark
    243            GeneralFuncF1(2);
   \   0000000C   0200A0E3           MOV      R0,#+2
   \   00000010   3B0100EF           SWI      +315
    244          }
   \   00000014   0080BDE8           POP      {PC}             ;; return
    245          //------------------------------------------------------------------------------
    246          

   \                                 In segment CODE, align 4, keep-with-next
    247          static void do_edit_bookmark(GUI *data)
    248          {
   \                     do_edit_bookmark:
   \   00000000   00402DE9           PUSH     {LR}
    249            CreateAddBookmark(data);
   \   00000004   ........           BL       CreateAddBookmark
    250            GeneralFuncF1(2);
   \   00000008   0200A0E3           MOV      R0,#+2
   \   0000000C   3B0100EF           SWI      +315
    251          }
   \   00000010   0080BDE8           POP      {PC}             ;; return
    252          
    253          //------------------------------------------------------------------------------
    254          

   \                                 In segment CODE, align 4, keep-with-next
    255          static void do_delete_bookmark(GUI *data)
    256          {
   \                     do_delete_bookmark:
   \   00000000   00402DE9           PUSH     {LR}
   \   00000004   04D04DE2           SUB      SP,SP,#+4
    257            URL_STRUCT *ustop = MenuGetUserPointer(data);
   \   00000008   E00100EF           SWI      +480
    258            unsigned ul;
    259            if(ustop)
   \   0000000C   000050E3           CMP      R0,#+0
    260              if(ustop->fullpath)
   \   00000010   44109012           ADDSNE   R1,R0,#+68
   \   00000014   0200000A           BEQ      ??do_delete_bookmark_0
    261                unlink(ustop->fullpath,&ul);
   \   00000018   0D10A0E1           MOV      R1,SP
   \   0000001C   440080E2           ADD      R0,R0,#+68
   \   00000020   6B0100EF           SWI      +363
    262            GeneralFuncF1(2);
   \                     ??do_delete_bookmark_0:
   \   00000024   0200A0E3           MOV      R0,#+2
   \   00000028   3B0100EF           SWI      +315
    263          }
   \   0000002C   0180BDE8           POP      {R0,PC}          ;; return
    264            
    265          //------------------------------------------------------------------------------
    266          

   \                                 In segment CODE, align 4, keep-with-next
    267          void back(GUI *data)
    268          {
   \                     back:
   \   00000000   00402DE9           PUSH     {LR}
    269            GeneralFuncF1(1);
   \   00000004   0100A0E3           MOV      R0,#+1
   \   00000008   3B0100EF           SWI      +315
    270          }
   \   0000000C   0080BDE8           POP      {PC}             ;; return
    271          
    272          
    273          #define OPTIONS_ITEMS_N 4
    274          HEADER_DESC options_menuhdr={0,0,0,0,NULL,(int)"Options:",LGP_NULL};
    275          
    276          MENUITEM_DESC options_menu_ITEMS[OPTIONS_ITEMS_N]=
    277          {
    278            {NULL,(int)"Add",       LGP_NULL, 0, NULL, MENU_FLAG3, MENU_FLAG2}, //0
    279            {NULL,(int)"Edit",      LGP_NULL, 0, NULL, MENU_FLAG3, MENU_FLAG2}, //1
    280            {NULL,(int)"Delete",    LGP_NULL, 0, NULL, MENU_FLAG3, MENU_FLAG2}, //2
    281            {NULL,(int)"Back",      LGP_NULL, 0, NULL, MENU_FLAG3, MENU_FLAG2}, //3
    282          };
    283          

   \                                 In segment DATA_C, align 4, align-sorted
    284          const MENUPROCS_DESC options_menu_HNDLS[OPTIONS_ITEMS_N]=
   \                     options_menu_HNDLS:
   \   00000000   ............       DC32 do_add_bookmark, do_edit_bookmark, do_delete_bookmark, back
   \              ............
   \              ........    
    285          {
    286            do_add_bookmark,
    287            do_edit_bookmark,
    288            do_delete_bookmark,
    289            back,
    290          };
    291          
    292          int menusoftkeys[]={0,1,2};
    293          SOFTKEY_DESC menu_sk[]=
    294          {
    295            {0x0018,0x0000,(int)"Options"},
    296            {0x0001,0x0000,(int)"Close"},
    297            {0x003D,0x0000,(int)LGP_DOIT_PIC}
    298          };
    299          
    300          SOFTKEYSTAB menu_skt=
    301          {
    302            menu_sk,0
    303          };
    304          
    305          MENU_DESC options_menu_STRUCT=
    306          {
    307            0,(void *)NULL,(void*)NULL,NULL,
    308            menusoftkeys,
    309            &menu_skt,
    310            8,
    311            NULL,
    312            options_menu_ITEMS,   //Items
    313            options_menu_HNDLS,   //Procs
    314            OPTIONS_ITEMS_N //n
    315          };
    316          

   \                                 In segment CODE, align 4, keep-with-next
    317          void create_options_menu(URL_STRUCT *ustop)
    318          {
   \                     create_options_menu:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
   \   00000004   14D04DE2           SUB      SP,SP,#+20
   \   00000008   0040B0E1           MOVS     R4,R0
    319            int to_remove[OPTIONS_ITEMS_N+1];
    320            int n = 0;
   \   0000000C   0000A0E3           MOV      R0,#+0
    321            if(!ustop)
   \   00000010   0400001A           BNE      ??create_options_menu_0
    322            {
    323              to_remove[++n]=1;
   \   00000014   0110A0E3           MOV      R1,#+1
   \   00000018   04108DE5           STR      R1,[SP, #+4]
    324              to_remove[++n]=2;
   \   0000001C   0200A0E3           MOV      R0,#+2
   \   00000020   0220A0E3           MOV      R2,#+2
   \   00000024   08208DE5           STR      R2,[SP, #+8]
    325            }
    326            to_remove[0]=n;
    327            patch_header_small((HEADER_DESC*)(&options_menuhdr));
   \                     ??create_options_menu_0:
   \   00000028   ........           LDR      R6,??DataTable27  ;; main_menu_ITEMS
   \   0000002C   00008DE5           STR      R0,[SP, #+0]
   \   00000030   515FA0E3           MOV      R5,#+324
   \   00000034   060085E0           ADD      R0,R5,R6
   \   00000038   ........           _BLF     patch_header_small,??patch_header_small??rA
    328            CreateMenu(1,0,&options_menu_STRUCT,&options_menuhdr,0,OPTIONS_ITEMS_N,ustop,to_remove);
   \   0000003C   0D00A0E1           MOV      R0,SP
   \   00000040   01002DE9           PUSH     {R0}
   \   00000044   10002DE9           PUSH     {R4}
   \   00000048   063085E0           ADD      R3,R5,R6
   \   0000004C   0400A0E3           MOV      R0,#+4
   \   00000050   01002DE9           PUSH     {R0}
   \   00000054   D52F86E2           ADD      R2,R6,#+852
   \   00000058   0010A0E3           MOV      R1,#+0
   \   0000005C   0000A0E3           MOV      R0,#+0
   \   00000060   01002DE9           PUSH     {R0}
   \   00000064   0100A0E3           MOV      R0,#+1
   \   00000068   520100EF           SWI      +338
    329          }
   \   0000006C   24D08DE2           ADD      SP,SP,#+36
   \   00000070   7080BDE8           POP      {R4-R6,PC}       ;; return
    330          
    331          // ----------------------------------------------------------------------------------
    332          
    333          

   \                                 In segment CODE, align 4, keep-with-next
    334          int selurl_menu_onkey(void *gui, GUI_MSG *msg) //bookmarks
    335          {
   \                     selurl_menu_onkey:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
   \   00000004   0140A0E1           MOV      R4,R1
   \   00000008   0060A0E1           MOV      R6,R0
    336            int l;
    337            URL_STRUCT *ustop=MenuGetUserPointer(gui);
   \   0000000C   E00100EF           SWI      +480
   \   00000010   0050A0E1           MOV      R5,R0
    338          
    339            int i=GetCurMenuItem(gui);
   \   00000014   0600A0E1           MOV      R0,R6
   \   00000018   8F0100EF           SWI      +399
    340            for (int n=0; n!=i; n++) ustop=ustop->next;
   \   0000001C   0010A0E3           MOV      R1,#+0
   \   00000020   000050E3           CMP      R0,#+0
   \   00000024   0300000A           BEQ      ??selurl_menu_onkey_0
   \                     ??selurl_menu_onkey_1:
   \   00000028   005095E5           LDR      R5,[R5, #+0]
   \   0000002C   011081E2           ADD      R1,R1,#+1
   \   00000030   000051E1           CMP      R1,R0
   \   00000034   FBFFFF1A           BNE      ??selurl_menu_onkey_1
    341            if (ustop)
   \                     ??selurl_menu_onkey_0:
   \   00000038   F200D4E1           LDRSH    R0,[R4, #+2]
   \   0000003C   000055E3           CMP      R5,#+0
   \   00000040   2B00000A           BEQ      ??selurl_menu_onkey_2
    342            {
    343              if (msg->keys==0x3D)
   \   00000044   3D0050E3           CMP      R0,#+61
   \   00000048   2400001A           BNE      ??selurl_menu_onkey_3
    344              {
    345                if (!strcmp(ustop->fullpath+(strlen(ustop->fullpath)-4),".url")) // file
   \   0000004C   440085E2           ADD      R0,R5,#+68
   \   00000050   1B0000EF           SWI      +27
   \   00000054   ........           LDR      R1,??DataTable7  ;; `?<Constant "$resources\\\\folder.png">` + 60
   \   00000058   050080E0           ADD      R0,R0,R5
   \   0000005C   400080E2           ADD      R0,R0,#+64
   \   00000060   190000EF           SWI      +25
   \   00000064   000050E3           CMP      R0,#+0
   \   00000068   1000001A           BNE      ??selurl_menu_onkey_4
    346                {
    347                  if (ReadUrlFile(ustop->fullpath))
   \   0000006C   440085E2           ADD      R0,R5,#+68
   \   00000070   ........           _BLF     ReadUrlFile,??ReadUrlFile??rA
   \   00000074   000050E3           CMP      R0,#+0
   \   00000078   2100000A           BEQ      ??selurl_menu_onkey_5
    348                  {
    349                    goto_url=malloc((l=strlen(view_url))+1);
   \   0000007C   ........           LDR      R4,??DataTable8  ;; view_url
   \   00000080   ........           LDR      R6,??DataTable28  ;; goto_url
   \   00000084   000094E5           LDR      R0,[R4, #+0]
   \   00000088   1B0000EF           SWI      +27
   \   0000008C   015080E2           ADD      R5,R0,#+1
   \   00000090   0500A0E1           MOV      R0,R5
   \   00000094   140000EF           SWI      +20
    350                    memcpy(goto_url,view_url,l+1);
   \   00000098   001094E5           LDR      R1,[R4, #+0]
   \   0000009C   000086E5           STR      R0,[R6, #+0]
   \   000000A0   0520A0E1           MOV      R2,R5
   \   000000A4   1E0100EF           SWI      +286
    351                    return (0xFF);
   \   000000A8   FF00A0E3           MOV      R0,#+255
   \   000000AC   7080BDE8           POP      {R4-R6,PC}
    352                  }
    353                  return(1);
    354                }
    355                else // dir
    356                {
    357                  MAIN_CSM *main_csm;
    358                  int bookmark_menu_id;
    359                  if ((main_csm=(MAIN_CSM *)FindCSMbyID(maincsm_id)))
   \                     ??selurl_menu_onkey_4:
   \   000000B0   ........           LDR      R0,??DataTable10  ;; maincsm_id
   \   000000B4   000090E5           LDR      R0,[R0, #+0]
   \   000000B8   080100EF           SWI      +264
   \   000000BC   0060B0E1           MOVS     R6,R0
   \   000000C0   0600000A           BEQ      ??selurl_menu_onkey_3
    360                  {
    361                    main_csm->sel_bmk=0;
   \   000000C4   0000A0E3           MOV      R0,#+0
   \   000000C8   300086E5           STR      R0,[R6, #+48]
    362                    GeneralFuncF1(1);
   \   000000CC   0100A0E3           MOV      R0,#+1
   \   000000D0   3B0100EF           SWI      +315
    363                    bookmark_menu_id=CreateBookmarksMenu(ustop->fullpath);
    364                    main_csm->sel_bmk=bookmark_menu_id;
   \   000000D4   440085E2           ADD      R0,R5,#+68
   \   000000D8   ........           BL       CreateBookmarksMenu
   \   000000DC   300086E5           STR      R0,[R6, #+48]
    365                  }
    366                }
    367              }
    368              if(msg->keys==0x18)
   \                     ??selurl_menu_onkey_3:
   \   000000E0   F200D4E1           LDRSH    R0,[R4, #+2]
   \   000000E4   180050E3           CMP      R0,#+24
   \   000000E8   0700001A           BNE      ??selurl_menu_onkey_6
    369              {
    370                create_options_menu(ustop);
   \   000000EC   0500A0E1           MOV      R0,R5
   \   000000F0   020000EA           B        ??selurl_menu_onkey_7
    371                return(1);
    372              }
    373            }
    374            else
    375            {
    376              if(msg->keys==0x18)
   \                     ??selurl_menu_onkey_2:
   \   000000F4   180050E3           CMP      R0,#+24
   \   000000F8   0300001A           BNE      ??selurl_menu_onkey_6
    377              {
    378                create_options_menu(0);
   \   000000FC   0000A0E3           MOV      R0,#+0
   \                     ??selurl_menu_onkey_7:
   \   00000100   ........           BL       create_options_menu
    379                return(1);
   \                     ??selurl_menu_onkey_5:
   \   00000104   0100A0E3           MOV      R0,#+1
   \   00000108   7080BDE8           POP      {R4-R6,PC}
    380              }
    381            }
    382            return (0);
   \                     ??selurl_menu_onkey_6:
   \   0000010C   0000A0E3           MOV      R0,#+0
   \   00000110   7080BDE8           POP      {R4-R6,PC}       ;; return
    383          }
    384          

   \                                 In segment CODE, align 4, keep-with-next
    385          void selurl_menu_ghook(void *gui, int cmd)
    386          {
   \                     selurl_menu_ghook:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   \   00000004   0140A0E1           MOV      R4,R1
    387            URL_STRUCT *ustop=MenuGetUserPointer(gui);
   \   00000008   E00100EF           SWI      +480
   \   0000000C   0050A0E1           MOV      R5,R0
    388            if (cmd==3)
   \   00000010   030054E3           CMP      R4,#+3
   \   00000014   0500001A           BNE      ??selurl_menu_ghook_0
    389            {
    390              
    391              while(ustop)
   \                     ??selurl_menu_ghook_1:
   \   00000018   000055E3           CMP      R5,#+0
   \   0000001C   3080BD08           POPEQ    {R4,R5,PC}
    392              {
    393                URL_STRUCT *us=ustop;
   \   00000020   0500A0E1           MOV      R0,R5
    394                ustop=ustop->next;
   \   00000024   005095E5           LDR      R5,[R5, #+0]
    395                mfree(us);
   \   00000028   150000EF           SWI      +21
   \   0000002C   F9FFFFEA           B        ??selurl_menu_ghook_1
    396              }    
    397            }
    398            if (cmd==0x0A)
   \                     ??selurl_menu_ghook_0:
   \   00000030   0A0054E3           CMP      R4,#+10
   \   00000034   3080BD18           POPNE    {R4,R5,PC}
    399            {
    400              DisableIDLETMR();
   \   00000038   7F0100EF           SWI      +383
    401            }
    402          }
   \   0000003C   3080BDE8           POP      {R4,R5,PC}       ;; return
    403          

   \                                 In segment DATA_Z, align 4, align-sorted
    404          int S_ICONS[2];
   \                     S_ICONS:
   \   00000000                      DS8 8
    405          char bmkpic[128];
   \                     bmkpic:
   \   00000008                      DS8 128
    406          char dirpic[128];
   \                     dirpic:
   \   00000088                      DS8 128
    407          

   \                                 In segment CODE, align 4, keep-with-next
    408          void selurl_menu_iconhndl(void *gui, int cur_item, void *user_pointer)
    409          {
   \                     selurl_menu_iconhndl:
   \   00000000   F0472DE9           PUSH     {R4-R10,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   \   00000008   0150A0E1           MOV      R5,R1
   \   0000000C   0260A0E1           MOV      R6,R2
    410            URL_STRUCT *ustop=user_pointer;
    411            WSHDR *ws;
    412            int len;
    413            for (int n=0; n!=cur_item; n++) ustop=ustop->next;
   \   00000010   0000A0E3           MOV      R0,#+0
   \   00000014   000055E3           CMP      R5,#+0
   \   00000018   0300000A           BEQ      ??selurl_menu_iconhndl_0
   \                     ??selurl_menu_iconhndl_1:
   \   0000001C   006096E5           LDR      R6,[R6, #+0]
   \   00000020   010080E2           ADD      R0,R0,#+1
   \   00000024   050050E1           CMP      R0,R5
   \   00000028   FBFFFF1A           BNE      ??selurl_menu_iconhndl_1
    414            void *item=AllocMenuItem(gui);
    415            if (!S_ICONS[0])
   \                     ??selurl_menu_iconhndl_0:
   \   0000002C   D8909FE5           LDR      R9,??selurl_menu_iconhndl_2  ;; S_ICONS
   \   00000030   ........           LDR      R8,??DataTable24  ;; `?<Constant "$resources\\\\folder.png">`
   \   00000034   0400A0E1           MOV      R0,R4
   \   00000038   970100EF           SWI      +407
   \   0000003C   0070A0E1           MOV      R7,R0
   \   00000040   000099E5           LDR      R0,[R9, #+0]
   \   00000044   000050E3           CMP      R0,#+0
   \   00000048   0900001A           BNE      ??selurl_menu_iconhndl_3
    416            {
    417              getSymbolicPath(bmkpic,"$resources\\bookmark.png");
   \   0000004C   241088E2           ADD      R1,R8,#+36
   \   00000050   080089E2           ADD      R0,R9,#+8
   \   00000054   ........           _BLF     getSymbolicPath,??getSymbolicPath??rA
    418              getSymbolicPath(dirpic,"$resources\\folder.png");
   \   00000058   0810A0E1           MOV      R1,R8
   \   0000005C   880089E2           ADD      R0,R9,#+136
   \   00000060   ........           _BLF     getSymbolicPath,??getSymbolicPath??rA
    419              S_ICONS[0] = (int)bmkpic;
   \   00000064   080089E2           ADD      R0,R9,#+8
   \   00000068   000089E5           STR      R0,[R9, #+0]
    420              S_ICONS[1] = (int)dirpic;
   \   0000006C   880089E2           ADD      R0,R9,#+136
   \   00000070   040089E5           STR      R0,[R9, #+4]
    421            }
    422            if (ustop)
   \                     ??selurl_menu_iconhndl_3:
   \   00000074   000056E3           CMP      R6,#+0
   \   00000078   1500000A           BEQ      ??selurl_menu_iconhndl_4
    423            {
    424              len=strlen(ustop->urlname);
   \   0000007C   040086E2           ADD      R0,R6,#+4
   \   00000080   1B0000EF           SWI      +27
    425              ws=AllocMenuWS(gui,len+4);
   \   00000084   041080E2           ADD      R1,R0,#+4
   \   00000088   0400A0E1           MOV      R0,R4
   \   0000008C   980100EF           SWI      +408
   \   00000090   00A0A0E1           MOV      R10,R0
    426              //ascii2ws(ws,ustop->urlname);
    427              str_2ws(ws,ustop->urlname,64);
   \   00000094   4020A0E3           MOV      R2,#+64
   \   00000098   041086E2           ADD      R1,R6,#+4
   \   0000009C   6C0100EF           SWI      +364
    428              if (!strcmp(ustop->fullpath+(strlen(ustop->fullpath)-4),".url"))
   \   000000A0   440086E2           ADD      R0,R6,#+68
   \   000000A4   1B0000EF           SWI      +27
   \   000000A8   3C1088E2           ADD      R1,R8,#+60
   \   000000AC   060080E0           ADD      R0,R0,R6
   \   000000B0   400080E2           ADD      R0,R0,#+64
   \   000000B4   190000EF           SWI      +25
   \   000000B8   000050E3           CMP      R0,#+0
   \   000000BC   04208912           ADDNE    R2,R9,#+4
    429                SetMenuItemIconArray(gui,item,S_ICONS+0);
   \   000000C0   0920A001           MOVEQ    R2,R9
   \   000000C4   0710A0E1           MOV      R1,R7
   \   000000C8   0400A0E1           MOV      R0,R4
   \   000000CC   990100EF           SWI      +409
   \   000000D0   070000EA           B        ??selurl_menu_iconhndl_5
    430              else
    431                SetMenuItemIconArray(gui,item,S_ICONS+1);
    432            }
    433            else
    434            {
    435              ws=AllocMenuWS(gui,10);
   \                     ??selurl_menu_iconhndl_4:
   \   000000D4   0A10A0E3           MOV      R1,#+10
   \   000000D8   0400A0E1           MOV      R0,R4
   \   000000DC   980100EF           SWI      +408
   \   000000E0   00A0A0E1           MOV      R10,R0
    436              ascii2ws(ws,lgpData[LGP_Error]);
   \   000000E4   ........           LDR      R0,??DataTable26  ;; lgpData + 24
   \   000000E8   001090E5           LDR      R1,[R0, #+0]
   \   000000EC   0A00A0E1           MOV      R0,R10
   \   000000F0   ........           _BLF     ascii2ws,??ascii2ws??rA
    437            }
    438            SetMenuItemText(gui, item, ws, cur_item);
   \                     ??selurl_menu_iconhndl_5:
   \   000000F4   0530A0E1           MOV      R3,R5
   \   000000F8   0A20A0E1           MOV      R2,R10
   \   000000FC   0710A0E1           MOV      R1,R7
   \   00000100   0400A0E1           MOV      R0,R4
   \   00000104   9A0100EF           SWI      +410
    439          }
   \   00000108   F087BDE8           POP      {R4-R10,PC}      ;; return
   \                     ??selurl_menu_iconhndl_2:
   \   0000010C   ........           DC32     S_ICONS
    440          
    441          int selurl_softkeys[]={0,1,2};
    442          SOFTKEY_DESC selurl_sk[]=
    443          {
    444            {0x0018,0x0000,(int)"Options"},
    445            {0x0001,0x0000,(int)"Cancel"},
    446            {0x003D,0x0000,(int)LGP_DOIT_PIC}
    447          };
    448          
    449          SOFTKEYSTAB selurl_skt=
    450          {
    451            selurl_sk,0
    452          };
    453          
    454          HEADER_DESC selurl_HDR={0,0,0,0,NULL,(int)"Select Bookmark:",LGP_NULL};
    455          
    456          
    457          MENU_DESC selurl_STRUCT=
    458          {
    459            8,selurl_menu_onkey,selurl_menu_ghook,NULL,
    460            selurl_softkeys,
    461            &selurl_skt,
    462            0x11,
    463            selurl_menu_iconhndl,
    464            NULL,   //Items
    465            NULL,   //Procs
    466            0   //n
    467          };
    468          
    469          //-----
    470          
    471          #define   MAX_SEARCH_ENGINES 32
    472          
    473          SOFTKEY_DESC search_sk[]=
    474          {
    475            {0x0018,0x0000,(int)"Search"},
    476            {0x0001,0x0000,(int)"Cancel"},
    477            {0x003D,0x0000,(int)LGP_DOIT_PIC}
    478          };
    479          

   \                                 In segment DATA_C, align 4, align-sorted
    480          static const SOFTKEYSTAB search_skt=
   \                     search_skt:
   \   00000000   ........0000       DC32 search_sk, 0
   \              0000        
    481          {
    482            search_sk,0
    483          };
    484          
    485          static int search_engine_count=0;
    486          static int selected_search_engine=0;
    487          static char * search_engines[MAX_SEARCH_ENGINES];
    488          

   \                                 In segment CODE, align 4, keep-with-next
    489          static void free_search_engines()
    490          {
   \                     free_search_engines:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
    491            LockSched();
    492            char ** p=search_engines;
   \   00000004   ........           LDR      R4,??DataTable27  ;; main_menu_ITEMS
   \   00000008   460100EF           SWI      +326
    493            for(int i=search_engine_count-1;i>=0;i--) mfree(*p++);
   \   0000000C   4C0294E5           LDR      R0,[R4, #+588]
   \   00000010   955F84E2           ADD      R5,R4,#+596
   \   00000014   016050E2           SUBS     R6,R0,#+1
   \   00000018   0300004A           BMI      ??free_search_engines_0
   \                     ??free_search_engines_1:
   \   0000001C   ........           LDR      R0,[R5], #+4
   \   00000020   150000EF           SWI      +21
   \   00000024   016056E2           SUBS     R6,R6,#+1
   \   00000028   FBFFFF5A           BPL      ??free_search_engines_1
    494            search_engine_count=0;
   \                     ??free_search_engines_0:
   \   0000002C   0000A0E3           MOV      R0,#+0
   \   00000030   4C0284E5           STR      R0,[R4, #+588]
    495            UnlockSched();
   \   00000034   470100EF           SWI      +327
    496          };
   \   00000038   7080BDE8           POP      {R4-R6,PC}       ;; return
    497          

   \                                 In segment CODE, align 4, keep-with-next
    498          static void get_search_engines()
    499          {
   \                     get_search_engines:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
    500            free_search_engines();  
    501                
    502            char **sep=search_engines;
   \   00000004   ........           LDR      R4,??DataTable27  ;; main_menu_ITEMS
   \   00000008   F2DF4DE2           SUB      SP,SP,#+968
   \   0000000C   955F84E2           ADD      R5,R4,#+596
   \   00000010   ........           BL       free_search_engines
    503            unsigned int err;
    504            DIR_ENTRY de;
    505            char str[128];  
    506            
    507            extern char SEARCH_PATH[256];
    508            char * s=SEARCH_PATH;
    509            strcpy(str,s);
   \   00000014   ........           LDR      R1,??DataTable17  ;; SEARCH_PATH
   \   00000018   D20F8DE2           ADD      R0,SP,#+840
   \   0000001C   1A0000EF           SWI      +26
    510            strcat(str,"*.url");
   \   00000020   B4109FE5           LDR      R1,??get_search_engines_0  ;; `?<Constant "*.url">`
   \   00000024   D20F8DE2           ADD      R0,SP,#+840
   \   00000028   170000EF           SWI      +23
    511            if (FindFirstFile(&de,str,&err))
   \   0000002C   0D20A0E1           MOV      R2,SP
   \   00000030   D21F8DE2           ADD      R1,SP,#+840
   \   00000034   04008DE2           ADD      R0,SP,#+4
   \   00000038   6B0000EF           SWI      +107
   \   0000003C   000050E3           CMP      R0,#+0
   \   00000040   1B00000A           BEQ      ??get_search_engines_1
    512            {
    513              do
    514              {
    515                if (!(de.file_attr&FA_DIRECTORY))
   \                     ??get_search_engines_2:
   \   00000044   F003DDE1           LDRSH    R0,[SP, #+48]
   \   00000048   100010E3           TST      R0,#0x10
   \   0000004C   1300001A           BNE      ??get_search_engines_3
    516                {
    517                  if(search_engine_count>=MAX_SEARCH_ENGINES) break;        
   \   00000050   4C0294E5           LDR      R0,[R4, #+588]
   \   00000054   200050E3           CMP      R0,#+32
   \   00000058   150000AA           BGE      ??get_search_engines_1
    518                  int l=strlen(de.file_name); 
   \   0000005C   B9008DE2           ADD      R0,SP,#+185
   \   00000060   1B0000EF           SWI      +27
   \   00000064   0060A0E1           MOV      R6,R0
    519                  char * s=malloc(strlen(de.file_name)+1);
   \   00000068   B9008DE2           ADD      R0,SP,#+185
   \   0000006C   1B0000EF           SWI      +27
   \   00000070   010080E2           ADD      R0,R0,#+1
   \   00000074   140000EF           SWI      +20
   \   00000078   0070A0E1           MOV      R7,R0
    520                  strcpy(s,de.file_name);
   \   0000007C   B9108DE2           ADD      R1,SP,#+185
   \   00000080   1A0000EF           SWI      +26
    521                  s[l-4]=0;
   \   00000084   070086E0           ADD      R0,R6,R7
   \   00000088   0010A0E3           MOV      R1,#+0
   \   0000008C   041040E5           STRB     R1,[R0, #-4]
    522                  search_engine_count++;
   \   00000090   4C0294E5           LDR      R0,[R4, #+588]
   \   00000094   010080E2           ADD      R0,R0,#+1
   \   00000098   4C0284E5           STR      R0,[R4, #+588]
    523                  *sep++=s;
   \   0000009C   ........           STR      R7,[R5], #+4
    524                }
    525              }
    526              while(FindNextFile(&de,&err));
   \                     ??get_search_engines_3:
   \   000000A0   0D10A0E1           MOV      R1,SP
   \   000000A4   04008DE2           ADD      R0,SP,#+4
   \   000000A8   6C0000EF           SWI      +108
   \   000000AC   000050E3           CMP      R0,#+0
   \   000000B0   E3FFFF1A           BNE      ??get_search_engines_2
    527            }
    528            FindClose(&de,&err);
   \                     ??get_search_engines_1:
   \   000000B4   0D10A0E1           MOV      R1,SP
   \   000000B8   04008DE2           ADD      R0,SP,#+4
   \   000000BC   6D0000EF           SWI      +109
    529            
    530            if(selected_search_engine>=search_engine_count) selected_search_engine=search_engine_count-1;
   \   000000C0   4C0294E5           LDR      R0,[R4, #+588]
   \   000000C4   501294E5           LDR      R1,[R4, #+592]
   \   000000C8   000051E1           CMP      R1,R0
   \   000000CC   010040A2           SUBGE    R0,R0,#+1
   \   000000D0   500284A5           STRGE    R0,[R4, #+592]
    531          };
   \   000000D4   F2DF8DE2           ADD      SP,SP,#+968
   \   000000D8   F080BDE8           POP      {R4-R7,PC}       ;; return
   \                     ??get_search_engines_0:
   \   000000DC   ........           DC32     `?<Constant "*.url">`
    532          

   \                                 In segment CODE, align 4, keep-with-next
    533          void search_locret(void){}
   \                     search_locret:
   \   00000000   1EFF2FE1           BX       LR               ;; return
    534          

   \                                 In segment CODE, align 4, keep-with-next
    535          int search_onkey(GUI *data, GUI_MSG *msg)
    536          {
   \                     search_onkey:
   \   00000000   F04F2DE9           PUSH     {R4-R11,LR}
   \   00000004   56DF4DE2           SUB      SP,SP,#+344
    537            EDITCONTROL ec;
    538            if (msg->keys==0xFFF)
   \   00000008   F210D1E1           LDRSH    R1,[R1, #+2]
   \   0000000C   FF20A0E3           MOV      R2,#+255
   \   00000010   F02E82E3           ORR      R2,R2,#0xF00
   \   00000014   020051E1           CMP      R1,R2
   \   00000018   8A00001A           BNE      ??search_onkey_0
    539            {
    540              if(selected_search_engine<0)return 0;
   \   0000001C   ........           LDR      R6,??DataTable27  ;; main_menu_ITEMS
   \   00000020   501296E5           LDR      R1,[R6, #+592]
   \   00000024   000051E3           CMP      R1,#+0
   \   00000028   8600004A           BMI      ??search_onkey_0
    541          
    542              //query
    543              ExtractEditControl(data,2,&ec);
   \   0000002C   412F8DE2           ADD      R2,SP,#+260
   \   00000030   0210A0E3           MOV      R1,#+2
   \   00000034   690100EF           SWI      +361
    544              WSHDR *ws = ec.pWS;
   \   00000038   2C419DE5           LDR      R4,[SP, #+300]
    545              int ql=ws->wsbody[0];
    546              
    547              //read url file    
    548              int f,fsize;
    549              unsigned int err;
    550              
    551              char *s, *url;
    552              FSTATS stat;
    553              char url_file[256];
    554              
    555              extern char SEARCH_PATH[256];
    556              sprintf(url_file,"%s%s.url",SEARCH_PATH,search_engines[selected_search_engine]);
   \   0000003C   ........           LDR      R2,??DataTable17  ;; SEARCH_PATH
   \   00000040   000094E5           LDR      R0,[R4, #+0]
   \   00000044   0C129FE5           LDR      R1,??search_onkey_1+0x4  ;; `?<Constant "%s%s.url">`
   \   00000048   B050D0E1           LDRH     R5,[R0, #+0]
   \   0000004C   500296E5           LDR      R0,[R6, #+592]
   \   00000050   000186E0           ADD      R0,R6,R0, LSL #+2
   \   00000054   543290E5           LDR      R3,[R0, #+596]
   \   00000058   04008DE2           ADD      R0,SP,#+4
   \   0000005C   160000EF           SWI      +22
    557              
    558              if (GetFileStats(url_file,&stat,&err)==-1) goto fail;
   \   00000060   0060E0E3           MVN      R6,#+0
   \   00000064   0D20A0E1           MOV      R2,SP
   \   00000068   4C1F8DE2           ADD      R1,SP,#+304
   \   0000006C   04008DE2           ADD      R0,SP,#+4
   \   00000070   840000EF           SWI      +132
   \   00000074   060050E1           CMP      R0,R6
   \   00000078   6E00000A           BEQ      ??search_onkey_2
    559              if ((fsize=stat.size)<=0)  goto fail;
   \   0000007C   34719DE5           LDR      R7,[SP, #+308]
   \   00000080   010057E3           CMP      R7,#+1
   \   00000084   6B0000BA           BLT      ??search_onkey_2
    560              if ((f=fopen(url_file,A_ReadOnly+A_BIN,P_READ,&err))==-1) goto fail;    
   \   00000088   0D30A0E1           MOV      R3,SP
   \   0000008C   8020A0E3           MOV      R2,#+128
   \   00000090   801CA0E3           MOV      R1,#+32768
   \   00000094   04008DE2           ADD      R0,SP,#+4
   \   00000098   0A0000EF           SWI      +10
   \   0000009C   0080A0E1           MOV      R8,R0
   \   000000A0   060058E1           CMP      R8,R6
   \   000000A4   6300000A           BEQ      ??search_onkey_2
    561              
    562              url=(char*)malloc(fsize+1);
   \   000000A8   010087E2           ADD      R0,R7,#+1
   \   000000AC   140000EF           SWI      +20
   \   000000B0   0060A0E1           MOV      R6,R0
    563              url[fread(f,url,fsize,&err)]=0;    
   \   000000B4   00A0A0E3           MOV      R10,#+0
   \   000000B8   0D30A0E1           MOV      R3,SP
   \   000000BC   0720A0E1           MOV      R2,R7
   \   000000C0   0610A0E1           MOV      R1,R6
   \   000000C4   0800A0E1           MOV      R0,R8
   \   000000C8   0B0000EF           SWI      +11
   \   000000CC   06A0C0E7           STRB     R10,[R0, +R6]
    564              fclose(f,&err);  
   \   000000D0   0D10A0E1           MOV      R1,SP
   \   000000D4   0800A0E1           MOV      R0,R8
   \   000000D8   0D0000EF           SWI      +13
    565              s=url;
   \   000000DC   0600A0E1           MOV      R0,R6
   \   000000E0   0010D0E5           LDRB     R1,[R0, #+0]
   \   000000E4   210051E3           CMP      R1,#+33
   \   000000E8   0200003A           BCC      ??search_onkey_3
    566              while(*s>32) s++;
   \                     ??search_onkey_4:
   \   000000EC   0110F0E5           LDRB     R1,[R0, #+1]!
   \   000000F0   210051E3           CMP      R1,#+33
   \   000000F4   FCFFFF2A           BCS      ??search_onkey_4
    567              *s=0;
    568              fsize=strlen(url);
    569              
    570              //build search url    
    571              goto_url=malloc(2+fsize+ql+2);    
   \                     ??search_onkey_3:
   \   000000F8   ........           LDR      R8,??DataTable28  ;; goto_url
   \   000000FC   00A0C0E5           STRB     R10,[R0, #+0]
   \   00000100   0600A0E1           MOV      R0,R6
   \   00000104   1B0000EF           SWI      +27
   \   00000108   0070A0E1           MOV      R7,R0
   \   0000010C   070085E0           ADD      R0,R5,R7
   \   00000110   040080E2           ADD      R0,R0,#+4
   \   00000114   140000EF           SWI      +20
   \   00000118   000088E5           STR      R0,[R8, #+0]
    572              goto_url[0]='0';
   \   0000011C   3010A0E3           MOV      R1,#+48
   \   00000120   0010C0E5           STRB     R1,[R0, #+0]
    573              goto_url[1]='/';          
   \   00000124   000098E5           LDR      R0,[R8, #+0]
   \   00000128   2F10A0E3           MOV      R1,#+47
   \   0000012C   0110C0E5           STRB     R1,[R0, #+1]
    574              
    575              s=strstr(url,"%s");
   \   00000130   471F8FE2           ADR      R1,??search_onkey_1  ;; "%s"
   \   00000134   0600A0E1           MOV      R0,R6
   \   00000138   180100EF           SWI      +280
    576              if(s)
   \   0000013C   000050E3           CMP      R0,#+0
   \   00000140   1E00000A           BEQ      ??search_onkey_5
    577                {
    578                int ofs=s-url;
   \   00000144   06A040E0           SUB      R10,R0,R6
    579                memcpy(goto_url+2,url,ofs);
   \   00000148   000098E5           LDR      R0,[R8, #+0]
   \   0000014C   0A20A0E1           MOV      R2,R10
   \   00000150   0610A0E1           MOV      R1,R6
   \   00000154   020080E2           ADD      R0,R0,#+2
   \   00000158   1E0100EF           SWI      +286
    580                s=goto_url+2+ofs;
   \   0000015C   000098E5           LDR      R0,[R8, #+0]
    581                for (int i=0; i<ql; i++) *s++=char16to8(ws->wsbody[i+1]);
   \   00000160   00B0A0E3           MOV      R11,#+0
   \   00000164   00008AE0           ADD      R0,R10,R0
   \   00000168   029080E2           ADD      R9,R0,#+2
   \   0000016C   010055E3           CMP      R5,#+1
   \   00000170   060000AA           BGE      ??search_onkey_6
   \   00000174   070000EA           B        ??search_onkey_7
   \                     ??search_onkey_8:
   \   00000178   000094E5           LDR      R0,[R4, #+0]
   \   0000017C   8B0080E0           ADD      R0,R0,R11, LSL #+1
   \   00000180   B200D0E1           LDRH     R0,[R0, #+2]
   \   00000184   01B08BE2           ADD      R11,R11,#+1
   \   00000188   ........           _BLF     char16to8,??char16to8??rA
   \   0000018C   ........           STRB     R0,[R9], #+1
   \                     ??search_onkey_6:
   \   00000190   05005BE1           CMP      R11,R5
   \   00000194   F7FFFFBA           BLT      ??search_onkey_8
    582                memcpy(goto_url+2+ofs+ql,url+ofs+2,fsize-ofs-1);
   \                     ??search_onkey_7:
   \   00000198   0A0047E0           SUB      R0,R7,R10
   \   0000019C   012040E2           SUB      R2,R0,#+1
   \   000001A0   06008AE0           ADD      R0,R10,R6
   \   000001A4   021080E2           ADD      R1,R0,#+2
   \   000001A8   000098E5           LDR      R0,[R8, #+0]
   \   000001AC   00008AE0           ADD      R0,R10,R0
   \   000001B0   000085E0           ADD      R0,R5,R0
   \   000001B4   020080E2           ADD      R0,R0,#+2
   \   000001B8   1E0100EF           SWI      +286
   \   000001BC   140000EA           B        ??search_onkey_9
    583                }
    584              else
    585                {
    586                memcpy(goto_url+2,url,fsize);  
   \                     ??search_onkey_5:
   \   000001C0   000098E5           LDR      R0,[R8, #+0]
   \   000001C4   0720A0E1           MOV      R2,R7
   \   000001C8   0610A0E1           MOV      R1,R6
   \   000001CC   020080E2           ADD      R0,R0,#+2
   \   000001D0   1E0100EF           SWI      +286
    587                s=goto_url+2+fsize;
   \   000001D4   000098E5           LDR      R0,[R8, #+0]
    588                for (int i=0; i<ql; i++) *s++=char16to8(ws->wsbody[i+1]);
   \   000001D8   010055E3           CMP      R5,#+1
   \   000001DC   000087E0           ADD      R0,R7,R0
   \   000001E0   029080E2           ADD      R9,R0,#+2
   \   000001E4   0070A0E3           MOV      R7,#+0
   \   000001E8   060000AA           BGE      ??search_onkey_10
   \   000001EC   070000EA           B        ??search_onkey_11
   \                     ??search_onkey_12:
   \   000001F0   000094E5           LDR      R0,[R4, #+0]
   \   000001F4   870080E0           ADD      R0,R0,R7, LSL #+1
   \   000001F8   B200D0E1           LDRH     R0,[R0, #+2]
   \   000001FC   017087E2           ADD      R7,R7,#+1
   \   00000200   ........           _BLF     char16to8,??char16to8??rA
   \   00000204   ........           STRB     R0,[R9], #+1
   \                     ??search_onkey_10:
   \   00000208   050057E1           CMP      R7,R5
   \   0000020C   F7FFFFBA           BLT      ??search_onkey_12
    589                *s = 0;  
   \                     ??search_onkey_11:
   \   00000210   00A0C9E5           STRB     R10,[R9, #+0]
    590                };       
    591              mfree(url);
   \                     ??search_onkey_9:
   \   00000214   0600A0E1           MOV      R0,R6
   \   00000218   150000EF           SWI      +21
    592             
    593              goto_url = ToWeb(goto_url,0);
   \   0000021C   000098E5           LDR      R0,[R8, #+0]
   \   00000220   0010A0E3           MOV      R1,#+0
   \   00000224   ........           _BLF     ToWeb,??ToWeb??rA
   \   00000228   000088E5           STR      R0,[R8, #+0]
    594              
    595              return (0xFF);     
   \   0000022C   FF00A0E3           MOV      R0,#+255
   \   00000230   56DF8DE2           ADD      SP,SP,#+344
   \   00000234   F08FBDE8           POP      {R4-R11,PC}
    596              
    597            fail:
    598              ShowMSG(2,(int)lgpData[LGP_Error]);
   \                     ??search_onkey_2:
   \   00000238   ........           LDR      R0,??DataTable26  ;; lgpData + 24
   \   0000023C   001090E5           LDR      R1,[R0, #+0]
   \   00000240   0200A0E3           MOV      R0,#+2
   \   00000244   480100EF           SWI      +328
    599              return (0);
   \                     ??search_onkey_0:
   \   00000248   0000A0E3           MOV      R0,#+0
   \   0000024C   56DF8DE2           ADD      SP,SP,#+344
   \   00000250   F08FBDE8           POP      {R4-R11,PC}      ;; return
   \                     ??search_onkey_1:
   \   00000254   25730000           DC8      "%s",+0
   \   00000258   ........           DC32     `?<Constant "%s%s.url">`
    600            }
    601            return (0);
    602          }
    603          

   \                                 In segment CODE, align 4, keep-with-next
    604          void search_ghook(GUI *data, int cmd)
    605          {
    606            SOFTKEY_DESC sk={0x0FFF,0x0000,(int)lgpData[LGP_Search]};
   \                     search_ghook:
   \   00000000   D4209FE5           LDR      R2,??search_ghook_0  ;; `?<Constant {4095, 0, 0}>`
   \   00000004   70402DE9           PUSH     {R4-R6,LR}
   \   00000008   08D04DE2           SUB      SP,SP,#+8
   \   0000000C   0C0092E8           LDM      R2,{R2,R3}
   \   00000010   0040A0E1           MOV      R4,R0
   \   00000014   0D00A0E1           MOV      R0,SP
   \   00000018   0C0080E8           STM      R0,{R2,R3}
   \   0000001C   BC209FE5           LDR      R2,??search_ghook_0+0x4  ;; lgpData + 220
    607            
    608          //  if (cmd==2)
    609          //  {
    610              //Create
    611          //  }
    612            
    613            if(cmd==0x03)     // onDestroy
   \   00000020   030051E3           CMP      R1,#+3
   \   00000024   002092E5           LDR      R2,[R2, #+0]
   \   00000028   04208DE5           STR      R2,[SP, #+4]
   \   0000002C   0100001A           BNE      ??search_ghook_1
    614            {
    615              free_search_engines();
   \   00000030   ........           BL       free_search_engines
   \   00000034   7380BDE8           POP      {R0,R1,R4-R6,PC}
    616            }  
    617            
    618            if (cmd==7)
   \                     ??search_ghook_1:
   \   00000038   070051E3           CMP      R1,#+7
   \   0000003C   0400001A           BNE      ??search_ghook_2
    619            {
    620              //OnRun
    621              SetSoftKey(data,&sk,SET_SOFT_KEY_N);
   \   00000040   0020A0E3           MOV      R2,#+0
   \   00000044   0D10A0E1           MOV      R1,SP
   \   00000048   0400A0E1           MOV      R0,R4
   \   0000004C   680100EF           SWI      +360
   \   00000050   7380BDE8           POP      {R0,R1,R4-R6,PC}
    622            }
    623            
    624            if (cmd==0x0A)
   \                     ??search_ghook_2:
   \   00000054   0A0051E3           CMP      R1,#+10
   \   00000058   0100001A           BNE      ??search_ghook_3
    625            {
    626              DisableIDLETMR();
   \   0000005C   7F0100EF           SWI      +383
   \   00000060   7380BDE8           POP      {R0,R1,R4-R6,PC}
    627            }
    628            
    629            if (cmd==0x0D)
   \                     ??search_ghook_3:
   \   00000064   0D0051E3           CMP      R1,#+13
   \   00000068   7380BD18           POPNE    {R0,R1,R4-R6,PC}
    630            {
    631              //onCombo
    632              int cbi=EDIT_GetFocus(data);
    633              if(cbi==4)
   \   0000006C   0400A0E1           MOV      R0,R4
   \   00000070   820100EF           SWI      +386
   \   00000074   040050E3           CMP      R0,#+4
   \   00000078   7380BD18           POPNE    {R0,R1,R4-R6,PC}
    634                {
    635                WSHDR * ews=AllocWS(128);    
    636                selected_search_engine=EDIT_GetItemNumInFocusedComboBox(data)-1;
   \   0000007C   ........           LDR      R6,??DataTable27  ;; main_menu_ITEMS
   \   00000080   8000A0E3           MOV      R0,#+128
   \   00000084   250100EF           SWI      +293
   \   00000088   0050A0E1           MOV      R5,R0
   \   0000008C   0400A0E1           MOV      R0,R4
   \   00000090   800100EF           SWI      +384
   \   00000094   010040E2           SUB      R0,R0,#+1
   \   00000098   500286E5           STR      R0,[R6, #+592]
    637                if(selected_search_engine>=0&&selected_search_engine<search_engine_count)
   \   0000009C   000050E3           CMP      R0,#+0
   \   000000A0   0A00004A           BMI      ??search_ghook_4
   \   000000A4   4C1296E5           LDR      R1,[R6, #+588]
   \   000000A8   010050E1           CMP      R0,R1
   \   000000AC   070000AA           BGE      ??search_ghook_4
    638                  {
    639                  str_2ws(ews,search_engines[selected_search_engine],128);
   \   000000B0   8020A0E3           MOV      R2,#+128
   \   000000B4   000186E0           ADD      R0,R6,R0, LSL #+2
   \   000000B8   541290E5           LDR      R1,[R0, #+596]
   \   000000BC   0500A0E1           MOV      R0,R5
   \   000000C0   6C0100EF           SWI      +364
    640                  EDIT_SetTextToFocused(data,ews);
   \   000000C4   0510A0E1           MOV      R1,R5
   \   000000C8   0400A0E1           MOV      R0,R4
   \   000000CC   810100EF           SWI      +385
    641                  };
    642                FreeWS(ews);
   \                     ??search_ghook_4:
   \   000000D0   0500A0E1           MOV      R0,R5
   \   000000D4   290100EF           SWI      +297
    643                };
    644            }
    645          }
   \   000000D8   7380BDE8           POP      {R0,R1,R4-R6,PC}  ;; return
   \                     ??search_ghook_0:
   \   000000DC   ........           DC32     `?<Constant {4095, 0, 0}>`
   \   000000E0   ........           DC32     lgpData + 220
    646          
    647          HEADER_DESC search_hdr={0,0,0,0,NULL,(int)"Search:",0x7FFFFFFF};
    648          
    649          INPUTDIA_DESC search_desc=
    650          {
    651            1,
    652            search_onkey,
    653            search_ghook,
    654            (void *)search_locret,
    655            0,
    656            &search_skt,
    657            {0,0,0,0},
    658            FONT_SMALL,
    659            100,
    660            101,
    661            0,
    662            0,
    663            0x40000000
    664          };
    665          
    666          

   \                                 In segment CODE, align 4, keep-with-next
    667          static int CreateSearchDialog()
    668          {
   \                     CreateSearchDialog:
   \   00000000   F0412DE9           PUSH     {R4-R8,LR}
    669            get_search_engines();
    670          
    671            void *ma=malloc_adr();
    672            void *eq;
    673            EDITCONTROL ec;
    674          
    675            WSHDR * ews=AllocWS(1024);
    676          
    677            PrepareEditControl(&ec);
    678            eq=AllocEQueue(ma,mfree_adr());
    679          
    680            ascii2ws(ews,lgpData[LGP_TextHeader]);
   \   00000004   ........           LDR      R7,??DataTable21  ;; lgpData
   \   00000008   2CD04DE2           SUB      SP,SP,#+44
    681            ConstructEditControl(&ec,ECT_HEADER,ECF_APPEND_EOL,ews,1024);
    682            AddEditControlToEditQend(eq,&ec,ma);
    683          
    684            wsprintf(ews,"");
   \   0000000C   5D8F8FE2           ADR      R8,??CreateSearchDialog_0  ;; ""
   \   00000010   ........           BL       get_search_engines
   \   00000014   148000EF           SWI      +32788
   \   00000018   0050A0E1           MOV      R5,R0
   \   0000001C   400EA0E3           MOV      R0,#+1024
   \   00000020   250100EF           SWI      +293
   \   00000024   0060A0E1           MOV      R6,R0
   \   00000028   0D00A0E1           MOV      R0,SP
   \   0000002C   640100EF           SWI      +356
   \   00000030   158000EF           SWI      +32789
   \   00000034   0010A0E1           MOV      R1,R0
   \   00000038   0500A0E1           MOV      R0,R5
   \   0000003C   630100EF           SWI      +355
   \   00000040   781097E5           LDR      R1,[R7, #+120]
   \   00000044   0040A0E1           MOV      R4,R0
   \   00000048   0600A0E1           MOV      R0,R6
   \   0000004C   ........           _BLF     ascii2ws,??ascii2ws??rA
   \   00000050   400EA0E3           MOV      R0,#+1024
   \   00000054   01002DE9           PUSH     {R0}
   \   00000058   0630A0E1           MOV      R3,R6
   \   0000005C   4020A0E3           MOV      R2,#+64
   \   00000060   0110A0E3           MOV      R1,#+1
   \   00000064   04008DE2           ADD      R0,SP,#+4
   \   00000068   650100EF           SWI      +357
   \   0000006C   0520A0E1           MOV      R2,R5
   \   00000070   04108DE2           ADD      R1,SP,#+4
   \   00000074   0400A0E1           MOV      R0,R4
   \   00000078   660100EF           SWI      +358
   \   0000007C   0810A0E1           MOV      R1,R8
   \   00000080   0600A0E1           MOV      R0,R6
   \   00000084   240100EF           SWI      +292
    685            ConstructEditControl(&ec,ECT_NORMAL_TEXT,ECF_APPEND_EOL,ews,1024);
   \   00000088   400EA0E3           MOV      R0,#+1024
   \   0000008C   01002DE9           PUSH     {R0}
   \   00000090   0630A0E1           MOV      R3,R6
   \   00000094   4020A0E3           MOV      R2,#+64
   \   00000098   0310A0E3           MOV      R1,#+3
   \   0000009C   08008DE2           ADD      R0,SP,#+8
   \   000000A0   650100EF           SWI      +357
    686            AddEditControlToEditQend(eq,&ec,ma);
   \   000000A4   0520A0E1           MOV      R2,R5
   \   000000A8   08108DE2           ADD      R1,SP,#+8
   \   000000AC   0400A0E1           MOV      R0,R4
   \   000000B0   660100EF           SWI      +358
    687            
    688            ascii2ws(ews,lgpData[LGP_SearchEngine]);
   \   000000B4   7C1097E5           LDR      R1,[R7, #+124]
    689            ConstructEditControl(&ec,ECT_HEADER,ECF_APPEND_EOL,ews,1024);
    690            AddEditControlToEditQend(eq,&ec,ma);
    691            
    692            wsprintf(ews,"");
    693            ConstructComboBox(&ec,7,ECF_APPEND_EOL,ews,32,0,search_engine_count,selected_search_engine+1);
   \   000000B8   ........           LDR      R7,??DataTable27  ;; main_menu_ITEMS
   \   000000BC   0600A0E1           MOV      R0,R6
   \   000000C0   ........           _BLF     ascii2ws,??ascii2ws??rA
   \   000000C4   400EA0E3           MOV      R0,#+1024
   \   000000C8   01002DE9           PUSH     {R0}
   \   000000CC   0630A0E1           MOV      R3,R6
   \   000000D0   4020A0E3           MOV      R2,#+64
   \   000000D4   0110A0E3           MOV      R1,#+1
   \   000000D8   0C008DE2           ADD      R0,SP,#+12
   \   000000DC   650100EF           SWI      +357
   \   000000E0   0520A0E1           MOV      R2,R5
   \   000000E4   0C108DE2           ADD      R1,SP,#+12
   \   000000E8   0400A0E1           MOV      R0,R4
   \   000000EC   660100EF           SWI      +358
   \   000000F0   0810A0E1           MOV      R1,R8
   \   000000F4   0600A0E1           MOV      R0,R6
   \   000000F8   240100EF           SWI      +292
   \   000000FC   500297E5           LDR      R0,[R7, #+592]
   \   00000100   0630A0E1           MOV      R3,R6
   \   00000104   010080E2           ADD      R0,R0,#+1
   \   00000108   01002DE9           PUSH     {R0}
   \   0000010C   4C0297E5           LDR      R0,[R7, #+588]
   \   00000110   4020A0E3           MOV      R2,#+64
   \   00000114   01002DE9           PUSH     {R0}
   \   00000118   0710A0E3           MOV      R1,#+7
   \   0000011C   0000A0E3           MOV      R0,#+0
   \   00000120   01002DE9           PUSH     {R0}
   \   00000124   2000A0E3           MOV      R0,#+32
   \   00000128   01002DE9           PUSH     {R0}
   \   0000012C   1C008DE2           ADD      R0,SP,#+28
   \   00000130   840100EF           SWI      +388
    694            AddEditControlToEditQend(eq,&ec,ma);
   \   00000134   0520A0E1           MOV      R2,R5
   \   00000138   1C108DE2           ADD      R1,SP,#+28
   \   0000013C   0400A0E1           MOV      R0,R4
   \   00000140   660100EF           SWI      +358
    695            
    696            FreeWS(ews);
   \   00000144   0600A0E1           MOV      R0,R6
   \   00000148   290100EF           SWI      +297
    697            patch_header(&search_hdr);
   \   0000014C   6D5FA0E3           MOV      R5,#+436
   \   00000150   070085E0           ADD      R0,R5,R7
   \   00000154   ........           _BLF     patch_header,??patch_header??rA
    698            patch_input(&search_desc);
   \   00000158   EB6FA0E3           MOV      R6,#+940
   \   0000015C   070086E0           ADD      R0,R6,R7
   \   00000160   ........           _BLF     patch_input,??patch_input??rA
    699            return CreateInputTextDialog(&search_desc,&search_hdr,eq,1,0);  
   \   00000164   0000A0E3           MOV      R0,#+0
   \   00000168   01002DE9           PUSH     {R0}
   \   0000016C   0130A0E3           MOV      R3,#+1
   \   00000170   0420A0E1           MOV      R2,R4
   \   00000174   071085E0           ADD      R1,R5,R7
   \   00000178   070086E0           ADD      R0,R6,R7
   \   0000017C   670100EF           SWI      +359
   \   00000180   4CD08DE2           ADD      SP,SP,#+76
   \   00000184   F081BDE8           POP      {R4-R8,PC}       ;; return
   \                     ??CreateSearchDialog_0:
   \   00000188   00000000           DC8      "",+0,+0,+0
    700          };
    701          //-----
    702          

   \                                 In segment CODE, align 4, keep-with-next
    703          int CreateBookmarksMenu(char *dir)
    704          {
   \                     CreateBookmarksMenu:
   \   00000000   F04F2DE9           PUSH     {R4-R11,LR}
    705            strcpy(curBookmarksDir,dir);
   \   00000004   ........           LDR      R5,??DataTable27  ;; main_menu_ITEMS
    706            unsigned int err;
    707            DIR_ENTRY de;
    708            URL_STRUCT *ustop=0, *usbot=0;
    709            URL_STRUCT *us;
    710            int n_url=0;
    711            char path[128];
    712            sprintf(path,"%s*",dir);
    713            
    714            char rootpath[128];
    715            getSymbolicPath(rootpath,"$bookmarks\\");
   \   00000008   ........           LDR      R7,??DataTable24  ;; `?<Constant "$resources\\\\folder.png">`
   \   0000000C   48D04DE2           SUB      SP,SP,#+72
   \   00000010   40DE4DE2           SUB      SP,SP,#+1024
   \   00000014   0040A0E1           MOV      R4,R0
   \   00000018   0410A0E1           MOV      R1,R4
   \   0000001C   B50F85E2           ADD      R0,R5,#+724
   \   00000020   1A0000EF           SWI      +26
   \   00000024   0060A0E3           MOV      R6,#+0
   \   00000028   0090A0E3           MOV      R9,#+0
   \   0000002C   06B0A0E1           MOV      R11,R6
   \   00000030   06A0A0E1           MOV      R10,R6
   \   00000034   0420A0E1           MOV      R2,R4
   \   00000038   8E1F8FE2           ADR      R1,??CreateBookmarksMenu_0  ;; "%s*"
   \   0000003C   D20F8DE2           ADD      R0,SP,#+840
   \   00000040   160000EF           SWI      +22
   \   00000044   181087E2           ADD      R1,R7,#+24
   \   00000048   F20F8DE2           ADD      R0,SP,#+968
   \   0000004C   ........           _BLF     getSymbolicPath,??getSymbolicPath??rA
    716            if (strcmp(dir,rootpath))
   \   00000050   F21F8DE2           ADD      R1,SP,#+968
   \   00000054   0400A0E1           MOV      R0,R4
   \   00000058   190000EF           SWI      +25
   \   0000005C   000050E3           CMP      R0,#+0
   \   00000060   1D00000A           BEQ      ??CreateBookmarksMenu_1
    717            {
    718              us=malloc(sizeof(URL_STRUCT));
   \   00000064   C400A0E3           MOV      R0,#+196
   \   00000068   140000EF           SWI      +20
   \   0000006C   0080A0E1           MOV      R8,R0
    719              int last=strlen(dir)-1;
   \   00000070   0400A0E1           MOV      R0,R4
   \   00000074   1B0000EF           SWI      +27
   \   00000078   019040E2           SUB      R9,R0,#+1
    720              for (int i=0;i<strlen(dir)-1;i++)
   \   0000007C   040000EA           B        ??CreateBookmarksMenu_2
    721              {
    722                if (dir[i]=='\\') last=i+1;
   \                     ??CreateBookmarksMenu_3:
   \   00000080   0410DAE7           LDRB     R1,[R10, +R4]
   \   00000084   01008AE2           ADD      R0,R10,#+1
    723              }
   \   00000088   00A0A0E1           MOV      R10,R0
   \   0000008C   5C0051E3           CMP      R1,#+92
   \   00000090   0090A001           MOVEQ    R9,R0
   \                     ??CreateBookmarksMenu_2:
   \   00000094   0400A0E1           MOV      R0,R4
   \   00000098   1B0000EF           SWI      +27
   \   0000009C   010040E2           SUB      R0,R0,#+1
   \   000000A0   00005AE1           CMP      R10,R0
   \   000000A4   F5FFFF3A           BCC      ??CreateBookmarksMenu_3
    724              memcpy(us->fullpath,dir,last);
   \   000000A8   0920A0E1           MOV      R2,R9
   \   000000AC   0410A0E1           MOV      R1,R4
   \   000000B0   440088E2           ADD      R0,R8,#+68
   \   000000B4   1E0100EF           SWI      +286
    725              us->fullpath[last]=NULL;
   \   000000B8   080089E0           ADD      R0,R9,R8
   \   000000BC   4460C0E5           STRB     R6,[R0, #+68]
    726              strcpy(us->urlname,"...");
   \   000000C0   6D1F8FE2           ADR      R1,??CreateBookmarksMenu_0+0x4  ;; "..."
   \   000000C4   040088E2           ADD      R0,R8,#+4
   \   000000C8   1A0000EF           SWI      +26
    727              us->next=0;
   \   000000CC   006088E5           STR      R6,[R8, #+0]
    728              if (usbot)
    729              {
    730                usbot->next=us;
    731                usbot=us;
    732              }
    733              else
    734              {
    735                ustop=us;
   \   000000D0   0890A0E1           MOV      R9,R8
    736                usbot=us;
   \   000000D4   08B0A0E1           MOV      R11,R8
    737              }
    738              n_url++;
   \   000000D8   01A0A0E3           MOV      R10,#+1
    739            }
    740            if (FindFirstFile(&de,path,&err))
   \                     ??CreateBookmarksMenu_1:
   \   000000DC   0D20A0E1           MOV      R2,SP
   \   000000E0   D21F8DE2           ADD      R1,SP,#+840
   \   000000E4   04008DE2           ADD      R0,SP,#+4
   \   000000E8   6B0000EF           SWI      +107
   \   000000EC   000050E3           CMP      R0,#+0
   \   000000F0   1C00000A           BEQ      ??CreateBookmarksMenu_4
    741            {
    742              do
    743              {
    744                if (de.file_attr&FA_DIRECTORY) // dir
   \                     ??CreateBookmarksMenu_5:
   \   000000F4   F003DDE1           LDRSH    R0,[SP, #+48]
   \   000000F8   100010E3           TST      R0,#0x10
   \   000000FC   1400000A           BEQ      ??CreateBookmarksMenu_6
    745                {
    746                  us=malloc(sizeof(URL_STRUCT));
   \   00000100   C400A0E3           MOV      R0,#+196
   \   00000104   140000EF           SWI      +20
   \   00000108   0080A0E1           MOV      R8,R0
    747                  strcpy(us->fullpath,dir);
   \   0000010C   0410A0E1           MOV      R1,R4
   \   00000110   440088E2           ADD      R0,R8,#+68
   \   00000114   1A0000EF           SWI      +26
    748                  strcat(us->fullpath,de.file_name);
   \   00000118   B9108DE2           ADD      R1,SP,#+185
   \   0000011C   440088E2           ADD      R0,R8,#+68
   \   00000120   170000EF           SWI      +23
    749                  strcat(us->fullpath,"\\");
   \   00000124   551F8FE2           ADR      R1,??CreateBookmarksMenu_0+0x8  ;; "\\"
   \   00000128   440088E2           ADD      R0,R8,#+68
   \   0000012C   170000EF           SWI      +23
    750                  strcpy(us->urlname,de.file_name);
   \   00000130   B9108DE2           ADD      R1,SP,#+185
   \   00000134   040088E2           ADD      R0,R8,#+4
   \   00000138   1A0000EF           SWI      +26
    751                  us->next=0;
   \   0000013C   006088E5           STR      R6,[R8, #+0]
    752                  if (usbot)
   \   00000140   00005BE3           CMP      R11,#+0
    753                  {
    754                    usbot->next=us;
   \   00000144   00808B15           STRNE    R8,[R11, #+0]
    755                    usbot=us;
    756                  }
    757                  else
    758                  {
    759                    ustop=us;
   \   00000148   0890A001           MOVEQ    R9,R8
    760                    usbot=us;
   \   0000014C   08B0A0E1           MOV      R11,R8
    761                  }
    762                  n_url++;
   \   00000150   01A08AE2           ADD      R10,R10,#+1
    763                }
    764              }
    765              while(FindNextFile(&de,&err));
   \                     ??CreateBookmarksMenu_6:
   \   00000154   0D10A0E1           MOV      R1,SP
   \   00000158   04008DE2           ADD      R0,SP,#+4
   \   0000015C   6C0000EF           SWI      +108
   \   00000160   000050E3           CMP      R0,#+0
   \   00000164   E2FFFF1A           BNE      ??CreateBookmarksMenu_5
    766            }
    767            FindClose(&de,&err);
   \                     ??CreateBookmarksMenu_4:
   \   00000168   0D10A0E1           MOV      R1,SP
   \   0000016C   04008DE2           ADD      R0,SP,#+4
   \   00000170   6D0000EF           SWI      +109
    768            if (FindFirstFile(&de,path,&err))
   \   00000174   0D20A0E1           MOV      R2,SP
   \   00000178   D21F8DE2           ADD      R1,SP,#+840
   \   0000017C   04008DE2           ADD      R0,SP,#+4
   \   00000180   6B0000EF           SWI      +107
   \   00000184   000050E3           CMP      R0,#+0
   \   00000188   2800000A           BEQ      ??CreateBookmarksMenu_7
    769            {
    770              do
    771              {
    772                if (!(de.file_attr&FA_DIRECTORY)&&!strcmp(de.file_name+(strlen(de.file_name)-4),".url")) // file
   \                     ??CreateBookmarksMenu_8:
   \   0000018C   F003DDE1           LDRSH    R0,[SP, #+48]
   \   00000190   100010E3           TST      R0,#0x10
   \   00000194   2000001A           BNE      ??CreateBookmarksMenu_9
   \   00000198   B9008DE2           ADD      R0,SP,#+185
   \   0000019C   1B0000EF           SWI      +27
   \   000001A0   3C1087E2           ADD      R1,R7,#+60
   \   000001A4   040040E2           SUB      R0,R0,#+4
   \   000001A8   04208DE2           ADD      R2,SP,#+4
   \   000001AC   020080E0           ADD      R0,R0,R2
   \   000001B0   B50080E2           ADD      R0,R0,#+181
   \   000001B4   190000EF           SWI      +25
   \   000001B8   000050E3           CMP      R0,#+0
   \   000001BC   1600001A           BNE      ??CreateBookmarksMenu_9
    773                {
    774                  us=malloc(sizeof(URL_STRUCT));
   \   000001C0   C400A0E3           MOV      R0,#+196
   \   000001C4   140000EF           SWI      +20
   \   000001C8   0080A0E1           MOV      R8,R0
    775                  strcpy(us->fullpath,dir);
   \   000001CC   0410A0E1           MOV      R1,R4
   \   000001D0   440088E2           ADD      R0,R8,#+68
   \   000001D4   1A0000EF           SWI      +26
    776                  strcat(us->fullpath,de.file_name);
   \   000001D8   B9108DE2           ADD      R1,SP,#+185
   \   000001DC   440088E2           ADD      R0,R8,#+68
   \   000001E0   170000EF           SWI      +23
    777                  strcpy(us->urlname,de.file_name);
   \   000001E4   B9108DE2           ADD      R1,SP,#+185
   \   000001E8   040088E2           ADD      R0,R8,#+4
   \   000001EC   1A0000EF           SWI      +26
    778                  us->urlname[strlen(de.file_name)-4]=0;
   \   000001F0   B9008DE2           ADD      R0,SP,#+185
   \   000001F4   1B0000EF           SWI      +27
   \   000001F8   040040E2           SUB      R0,R0,#+4
   \   000001FC   080080E0           ADD      R0,R0,R8
   \   00000200   0460C0E5           STRB     R6,[R0, #+4]
    779                  us->next=0;
   \   00000204   006088E5           STR      R6,[R8, #+0]
    780                  if (usbot)
   \   00000208   00005BE3           CMP      R11,#+0
    781                  {
    782                    usbot->next=us;
   \   0000020C   00808B15           STRNE    R8,[R11, #+0]
    783                    usbot=us;
    784                  }
    785                  else
    786                  {
    787                    ustop=us;
   \   00000210   0890A001           MOVEQ    R9,R8
    788                    usbot=us;
   \   00000214   08B0A0E1           MOV      R11,R8
    789                  }
    790                  n_url++;
   \   00000218   01A08AE2           ADD      R10,R10,#+1
    791                }
    792              }
    793              while(FindNextFile(&de,&err));
   \                     ??CreateBookmarksMenu_9:
   \   0000021C   0D10A0E1           MOV      R1,SP
   \   00000220   04008DE2           ADD      R0,SP,#+4
   \   00000224   6C0000EF           SWI      +108
   \   00000228   000050E3           CMP      R0,#+0
   \   0000022C   D6FFFF1A           BNE      ??CreateBookmarksMenu_8
    794            }
    795            FindClose(&de,&err);
   \                     ??CreateBookmarksMenu_7:
   \   00000230   0D10A0E1           MOV      R1,SP
   \   00000234   04008DE2           ADD      R0,SP,#+4
   \   00000238   6D0000EF           SWI      +109
    796            patch_header(&selurl_HDR);
   \   0000023C   624FA0E3           MOV      R4,#+392
   \   00000240   050084E0           ADD      R0,R4,R5
   \   00000244   ........           _BLF     patch_header,??patch_header??rA
    797            return CreateMenu(0,0,&selurl_STRUCT,&selurl_HDR,0,n_url,ustop,0);
   \   00000248   0000A0E3           MOV      R0,#+0
   \   0000024C   01002DE9           PUSH     {R0}
   \   00000250   00022DE9           PUSH     {R9}
   \   00000254   00042DE9           PUSH     {R10}
   \   00000258   01002DE9           PUSH     {R0}
   \   0000025C   053084E0           ADD      R3,R4,R5
   \   00000260   E02F85E2           ADD      R2,R5,#+896
   \   00000264   0010A0E1           MOV      R1,R0
   \   00000268   520100EF           SWI      +338
   \   0000026C   58D08DE2           ADD      SP,SP,#+88
   \   00000270   40DE8DE2           ADD      SP,SP,#+1024
   \   00000274   F08FBDE8           POP      {R4-R11,PC}      ;; return
   \                     ??CreateBookmarksMenu_0:
   \   00000278   25732A00           DC8      "%s*"
   \   0000027C   2E2E2E00           DC8      "..."
   \   00000280   5C000000           DC8      "\\",+0,+0
    798          }
    799          
    800          // ----------------------------------------------------------------------------------

   \                                 In segment CODE, align 4, keep-with-next
    801          int history_menu_onkey(void *gui, GUI_MSG *msg) //history
    802          {
   \                     history_menu_onkey:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   \   00000008   0150A0E1           MOV      R5,R1
    803            char **history = MenuGetUserPointer(gui);
   \   0000000C   E00100EF           SWI      +480
   \   00000010   0060A0E1           MOV      R6,R0
    804          
    805            int i = GetCurMenuItem(gui);
   \   00000014   0400A0E1           MOV      R0,R4
   \   00000018   8F0100EF           SWI      +399
    806            if (msg->keys==0x3D || msg->keys==0x18)
   \   0000001C   F210D5E1           LDRSH    R1,[R5, #+2]
   \   00000020   3D0051E3           CMP      R1,#+61
   \   00000024   18005113           CMPNE    R1,#+24
   \   00000028   1500001A           BNE      ??history_menu_onkey_0
    807            {
    808              if (history[i])
   \   0000002C   004186E0           ADD      R4,R6,R0, LSL #+2
   \   00000030   000094E5           LDR      R0,[R4, #+0]
   \   00000034   000050E3           CMP      R0,#+0
   \   00000038   0F00000A           BEQ      ??history_menu_onkey_1
    809              {
    810                goto_url=malloc(strlen(history[i])+3);
   \   0000003C   ........           LDR      R5,??DataTable28  ;; goto_url
   \   00000040   1B0000EF           SWI      +27
   \   00000044   030080E2           ADD      R0,R0,#+3
   \   00000048   140000EF           SWI      +20
   \   0000004C   000085E5           STR      R0,[R5, #+0]
    811                goto_url[0] = '0'; goto_url[1] = '/';      
   \   00000050   3010A0E3           MOV      R1,#+48
   \   00000054   0010C0E5           STRB     R1,[R0, #+0]
   \   00000058   000095E5           LDR      R0,[R5, #+0]
   \   0000005C   2F10A0E3           MOV      R1,#+47
   \   00000060   0110C0E5           STRB     R1,[R0, #+1]
    812                strcpy(goto_url+2,history[i]);
   \   00000064   000095E5           LDR      R0,[R5, #+0]
   \   00000068   001094E5           LDR      R1,[R4, #+0]
   \   0000006C   020080E2           ADD      R0,R0,#+2
   \   00000070   1A0000EF           SWI      +26
    813                return (0xFF);
   \   00000074   FF00A0E3           MOV      R0,#+255
   \   00000078   7080BDE8           POP      {R4-R6,PC}
    814              }
    815              return(1);
   \                     ??history_menu_onkey_1:
   \   0000007C   0100A0E3           MOV      R0,#+1
   \   00000080   7080BDE8           POP      {R4-R6,PC}
    816            }
    817          
    818          /*
    819            if (msg->keys==0x3D)
    820            {
    821              int i=GetCurMenuItem(gui);
    822              for (int n=0; n!=i; n++) ustop=ustop->next;
    823              if (ustop)
    824              {
    825                if (ReadUrlFile(ustop->fullpath))
    826                {
    827                  goto_url=malloc((l=strlen(view_url))+1);
    828                  memcpy(goto_url,view_url,l+1);
    829                  return (0xFF);
    830                }
    831              }
    832            }
    833            if(msg->keys==0x18)
    834            {
    835              create_options_menu();
    836              return(1);
    837            }
    838          */
    839            return (0);
   \                     ??history_menu_onkey_0:
   \   00000084   0000A0E3           MOV      R0,#+0
   \   00000088   7080BDE8           POP      {R4-R6,PC}       ;; return
    840          }
    841          

   \                                 In segment CODE, align 4, keep-with-next
    842          void history_menu_ghook(void *gui, int cmd)
    843          {
   \                     history_menu_ghook:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
   \   00000004   0140A0E1           MOV      R4,R1
    844            extern const int HISTORY_DEPTH;
    845            int i;
    846            char **history = MenuGetUserPointer(gui);
   \   00000008   E00100EF           SWI      +480
   \   0000000C   0050A0E1           MOV      R5,R0
    847            if (cmd==3)
   \   00000010   030054E3           CMP      R4,#+3
   \   00000014   1100001A           BNE      ??history_menu_ghook_0
    848            {
    849              for(i = 0; i < HISTORY_DEPTH; i++)
   \   00000018   50009FE5           LDR      R0,??history_menu_ghook_1  ;; HISTORY_DEPTH
   \   0000001C   0040A0E3           MOV      R4,#+0
   \   00000020   006090E5           LDR      R6,[R0, #+0]
   \   00000024   010056E3           CMP      R6,#+1
   \   00000028   070000AA           BGE      ??history_menu_ghook_2
   \   0000002C   0500A0E1           MOV      R0,R5
   \   00000030   150000EF           SWI      +21
   \   00000034   7080BDE8           POP      {R4-R6,PC}
    850                if(history[i])
   \                     ??history_menu_ghook_3:
   \   00000038   040195E7           LDR      R0,[R5, +R4, LSL #+2]
   \   0000003C   000050E3           CMP      R0,#+0
   \   00000040   0000000A           BEQ      ??history_menu_ghook_4
    851                  mfree(history[i]);
   \   00000044   150000EF           SWI      +21
   \                     ??history_menu_ghook_4:
   \   00000048   014084E2           ADD      R4,R4,#+1
   \                     ??history_menu_ghook_2:
   \   0000004C   060054E1           CMP      R4,R6
   \   00000050   F8FFFFBA           BLT      ??history_menu_ghook_3
    852              mfree(history);
   \   00000054   0500A0E1           MOV      R0,R5
   \   00000058   150000EF           SWI      +21
   \   0000005C   7080BDE8           POP      {R4-R6,PC}
    853            }
    854            if (cmd==0x0A)
   \                     ??history_menu_ghook_0:
   \   00000060   0A0054E3           CMP      R4,#+10
   \   00000064   7080BD18           POPNE    {R4-R6,PC}
    855            {
    856              DisableIDLETMR();
   \   00000068   7F0100EF           SWI      +383
    857            }
    858          }
   \   0000006C   7080BDE8           POP      {R4-R6,PC}       ;; return
   \                     ??history_menu_ghook_1:
   \   00000070   ........           DC32     HISTORY_DEPTH
    859          

   \                                 In segment CODE, align 4, keep-with-next
    860          void history_menu_iconhndl(void *gui, int cur_item, void *user_pointer)
    861          {
   \                     history_menu_iconhndl:
   \   00000000   F0412DE9           PUSH     {R4-R8,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   \   00000008   0150A0E1           MOV      R5,R1
   \   0000000C   0260A0E1           MOV      R6,R2
    862            char **history=user_pointer;
    863            int len;
    864            WSHDR *ws;
    865            void *item=AllocMenuItem(gui);
   \   00000010   970100EF           SWI      +407
   \   00000014   0070A0E1           MOV      R7,R0
    866          
    867            if (history[cur_item])
   \   00000018   050196E7           LDR      R0,[R6, +R5, LSL #+2]
   \   0000001C   000050E3           CMP      R0,#+0
   \   00000020   0800000A           BEQ      ??history_menu_iconhndl_0
    868            {
    869              len=strlen(history[cur_item]);
   \   00000024   1B0000EF           SWI      +27
    870              ws=AllocMenuWS(gui,len+4);
   \   00000028   041080E2           ADD      R1,R0,#+4
   \   0000002C   0400A0E1           MOV      R0,R4
   \   00000030   980100EF           SWI      +408
    871              str_2ws(ws,history[cur_item],64);
   \   00000034   051196E7           LDR      R1,[R6, +R5, LSL #+2]
   \   00000038   0080A0E1           MOV      R8,R0
   \   0000003C   4020A0E3           MOV      R2,#+64
   \   00000040   6C0100EF           SWI      +364
   \   00000044   070000EA           B        ??history_menu_iconhndl_1
    872            }
    873            else
    874            {
    875              ws=AllocMenuWS(gui,10);
   \                     ??history_menu_iconhndl_0:
   \   00000048   0A10A0E3           MOV      R1,#+10
   \   0000004C   0400A0E1           MOV      R0,R4
   \   00000050   980100EF           SWI      +408
   \   00000054   0080A0E1           MOV      R8,R0
    876              ascii2ws(ws,lgpData[LGP_Error]);
   \   00000058   ........           LDR      R0,??DataTable26  ;; lgpData + 24
   \   0000005C   001090E5           LDR      R1,[R0, #+0]
   \   00000060   0800A0E1           MOV      R0,R8
   \   00000064   ........           _BLF     ascii2ws,??ascii2ws??rA
    877            }
    878            SetMenuItemText(gui, item, ws, cur_item);
   \                     ??history_menu_iconhndl_1:
   \   00000068   0530A0E1           MOV      R3,R5
   \   0000006C   0820A0E1           MOV      R2,R8
   \   00000070   0710A0E1           MOV      R1,R7
   \   00000074   0400A0E1           MOV      R0,R4
   \   00000078   9A0100EF           SWI      +410
    879          }
   \   0000007C   F081BDE8           POP      {R4-R8,PC}       ;; return
    880          
    881          int history_softkeys[]={0,1,2};
    882          SOFTKEY_DESC history_sk[]=
    883          {
    884            {0x0018,0x0000,(int)"Go"},
    885            {0x0001,0x0000,(int)"Cancel"},
    886            {0x003D,0x0000,(int)LGP_DOIT_PIC}
    887          };
    888          
    889          SOFTKEYSTAB history_skt=
    890          {
    891            history_sk,0
    892          };
    893          
    894          HEADER_DESC history_HDR={0,0,0,0,NULL,(int)"History:",LGP_NULL};
    895          
    896          MENU_DESC history_STRUCT=
    897          {
    898            8,history_menu_onkey,history_menu_ghook,NULL,
    899            history_softkeys,
    900            &history_skt,
    901            0x10,
    902            history_menu_iconhndl,
    903            NULL,   //Items
    904            NULL,   //Procs
    905            0   //n
    906          };
    907          

   \                                 In segment CODE, align 4, keep-with-next
    908          int CreateHistoryMenu()
    909          {
   \                     CreateHistoryMenu:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
   \   00000004   04D04DE2           SUB      SP,SP,#+4
    910            int depth;
    911            char **history;
    912            history = GetHistory(&depth);
   \   00000008   0D00A0E1           MOV      R0,SP
   \   0000000C   ........           _BLF     GetHistory,??GetHistory??rA
   \   00000010   0040A0E1           MOV      R4,R0
    913            if (!depth) return 0;
   \   00000014   00009DE5           LDR      R0,[SP, #+0]
   \   00000018   000050E3           CMP      R0,#+0
   \   0000001C   7280BD08           POPEQ    {R1,R4-R6,PC}
    914            patch_header(&history_HDR);
   \   00000020   ........           LDR      R6,??DataTable27  ;; main_menu_ITEMS
   \   00000024   785FA0E3           MOV      R5,#+480
   \   00000028   060085E0           ADD      R0,R5,R6
   \   0000002C   ........           _BLF     patch_header,??patch_header??rA
    915            return CreateMenu(0,0,&history_STRUCT,&history_HDR,0,depth,history,0);
   \   00000030   0000A0E3           MOV      R0,#+0
   \   00000034   01002DE9           PUSH     {R0}
   \   00000038   10002DE9           PUSH     {R4}
   \   0000003C   08009DE5           LDR      R0,[SP, #+8]
   \   00000040   063085E0           ADD      R3,R5,R6
   \   00000044   01002DE9           PUSH     {R0}
   \   00000048   F92F86E2           ADD      R2,R6,#+996
   \   0000004C   0010A0E3           MOV      R1,#+0
   \   00000050   0000A0E3           MOV      R0,#+0
   \   00000054   01002DE9           PUSH     {R0}
   \   00000058   520100EF           SWI      +338
   \   0000005C   10D08DE2           ADD      SP,SP,#+16
   \   00000060   7280BDE8           POP      {R1,R4-R6,PC}    ;; return
    916          }
    917          
    918          //------------------------------------------------------------------------------
    919          
    920          SOFTKEY_DESC input_menu_sk[]=
    921          {
    922            {0x0018,0x0000,(int)"Go"},
    923            {0x0001,0x0000,(int)"Cnacel"},
    924            {0x003D,0x0000,(int)LGP_DOIT_PIC}
    925          };
    926          

   \                                 In segment DATA_C, align 4, align-sorted
    927          static const SOFTKEYSTAB input_menu_skt=
   \                     input_menu_skt:
   \   00000000   ........0000       DC32 input_menu_sk, 0
   \              0000        
    928          {
    929            input_menu_sk,0
    930          };
    931          
    932          
    933          HEADER_DESC input_url_hdr={0,0,0,0,NULL,(int)"Adress:",LGP_NULL};
    934          

   \                                 In segment CODE, align 4, keep-with-next
    935          static void input_url_ghook(GUI *data, int cmd)
    936          {
    937            SOFTKEY_DESC sk={0x0FFF,0x0000,(int)lgpData[LGP_Go]};
   \                     input_url_ghook:
   \   00000000   44309FE5           LDR      R3,??input_url_ghook_0  ;; `?<Constant {4095, 0, 0}>_1`
   \   00000004   30402DE9           PUSH     {R4,R5,LR}
   \   00000008   08D04DE2           SUB      SP,SP,#+8
   \   0000000C   300093E8           LDM      R3,{R4,R5}
   \   00000010   38309FE5           LDR      R3,??input_url_ghook_0+0x4  ;; lgpData + 184
   \   00000014   0D20A0E1           MOV      R2,SP
   \   00000018   300082E8           STM      R2,{R4,R5}
   \   0000001C   003093E5           LDR      R3,[R3, #+0]
    938            if (cmd==0x0A)
   \   00000020   0A0051E3           CMP      R1,#+10
   \   00000024   04308DE5           STR      R3,[SP, #+4]
   \   00000028   0100001A           BNE      ??input_url_ghook_1
    939            {
    940              DisableIDLETMR();
   \   0000002C   7F0100EF           SWI      +383
   \   00000030   3380BDE8           POP      {R0,R1,R4,R5,PC}
    941            }
    942            if (cmd==7)
   \                     ??input_url_ghook_1:
   \   00000034   070051E3           CMP      R1,#+7
   \   00000038   3380BD18           POPNE    {R0,R1,R4,R5,PC}
    943            {
    944              SetSoftKey(data,&sk,SET_SOFT_KEY_N);
   \   0000003C   0020A0E3           MOV      R2,#+0
   \   00000040   0D10A0E1           MOV      R1,SP
   \   00000044   680100EF           SWI      +360
    945            }
    946          }
   \   00000048   3380BDE8           POP      {R0,R1,R4,R5,PC}  ;; return
   \                     ??input_url_ghook_0:
   \   0000004C   ........           DC32     `?<Constant {4095, 0, 0}>_1`
   \   00000050   ........           DC32     lgpData + 184
    947          

   \                                 In segment CODE, align 4, keep-with-next
    948          static void input_url_locret(void){}
   \                     input_url_locret:
   \   00000000   1EFF2FE1           BX       LR               ;; return
    949          

   \                                 In segment CODE, align 4, keep-with-next
    950          static int input_url_onkey(GUI *data, GUI_MSG *msg)
    951          {
   \                     input_url_onkey:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
   \   00000004   2CD04DE2           SUB      SP,SP,#+44
    952            EDITCONTROL ec;
    953            WSHDR *ws;
    954            char *s;
    955            if (msg->keys==0xFFF || msg->keys == 0x18)
   \   00000008   F210D1E1           LDRSH    R1,[R1, #+2]
   \   0000000C   FF20A0E3           MOV      R2,#+255
   \   00000010   F02E82E3           ORR      R2,R2,#0xF00
   \   00000014   020051E1           CMP      R1,R2
   \   00000018   18005113           CMPNE    R1,#+24
   \   0000001C   2600001A           BNE      ??input_url_onkey_0
    956            {
    957              ExtractEditControl(data,1,&ec);
   \   00000020   0D20A0E1           MOV      R2,SP
    958              ws = ec.pWS;
    959              s = goto_url = (char *)malloc(ws->wsbody[0]+3);
   \   00000024   ........           LDR      R5,??DataTable28  ;; goto_url
   \   00000028   0110A0E3           MOV      R1,#+1
   \   0000002C   690100EF           SWI      +361
   \   00000030   28409DE5           LDR      R4,[SP, #+40]
    960              *s++='0';
    961              *s++='/';
    962              for (int i=0; i<ws->wsbody[0]; i++) *s++=char16to8(ws->wsbody[i+1]);
   \   00000034   0070A0E3           MOV      R7,#+0
   \   00000038   000094E5           LDR      R0,[R4, #+0]
   \   0000003C   B000D0E1           LDRH     R0,[R0, #+0]
   \   00000040   030080E2           ADD      R0,R0,#+3
   \   00000044   140000EF           SWI      +20
   \   00000048   000085E5           STR      R0,[R5, #+0]
   \   0000004C   0060A0E1           MOV      R6,R0
   \   00000050   3000A0E3           MOV      R0,#+48
   \   00000054   ........           STRB     R0,[R6], #+1
   \   00000058   2F00A0E3           MOV      R0,#+47
   \   0000005C   ........           STRB     R0,[R6], #+1
   \   00000060   000094E5           LDR      R0,[R4, #+0]
   \   00000064   B000D0E1           LDRH     R0,[R0, #+0]
   \   00000068   000050E3           CMP      R0,#+0
   \   0000006C   0500001A           BNE      ??input_url_onkey_1
   \   00000070   080000EA           B        ??input_url_onkey_2
   \                     ??input_url_onkey_3:
   \   00000074   870080E0           ADD      R0,R0,R7, LSL #+1
   \   00000078   B200D0E1           LDRH     R0,[R0, #+2]
   \   0000007C   017087E2           ADD      R7,R7,#+1
   \   00000080   ........           _BLF     char16to8,??char16to8??rA
   \   00000084   ........           STRB     R0,[R6], #+1
   \                     ??input_url_onkey_1:
   \   00000088   000094E5           LDR      R0,[R4, #+0]
   \   0000008C   B010D0E1           LDRH     R1,[R0, #+0]
   \   00000090   010057E1           CMP      R7,R1
   \   00000094   F6FFFFBA           BLT      ??input_url_onkey_3
    963              *s = 0;
   \                     ??input_url_onkey_2:
   \   00000098   0000A0E3           MOV      R0,#+0
   \   0000009C   0000C6E5           STRB     R0,[R6, #+0]
    964              goto_url = ToWeb(goto_url,0);
   \   000000A0   000095E5           LDR      R0,[R5, #+0]
   \   000000A4   0010A0E3           MOV      R1,#+0
   \   000000A8   ........           _BLF     ToWeb,??ToWeb??rA
   \   000000AC   000085E5           STR      R0,[R5, #+0]
    965              return (0xFF);
   \   000000B0   FF00A0E3           MOV      R0,#+255
   \   000000B4   2CD08DE2           ADD      SP,SP,#+44
   \   000000B8   F080BDE8           POP      {R4-R7,PC}
    966            }
    967            return (0);
   \                     ??input_url_onkey_0:
   \   000000BC   0000A0E3           MOV      R0,#+0
   \   000000C0   2CD08DE2           ADD      SP,SP,#+44
   \   000000C4   F080BDE8           POP      {R4-R7,PC}       ;; return
    968          }
    969          

   \                                 In segment DATA_C, align 4, align-sorted
    970          static const INPUTDIA_DESC input_url_desc =
   \                     input_url_desc:
   \   00000000   01000000....       DC32 1, input_url_onkey, input_url_ghook, input_url_locret, 0
   \              ............
   \              ........0000
   \              0000        
   \   00000014   ........           DC32 input_menu_skt
   \   00000018   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   00000020   080000006400       DC32 8, 100, 101, 0, 0, 1073741824
   \              000065000000
   \              000000000000
   \              000000000040
    971          {
    972            1,
    973            input_url_onkey,
    974            input_url_ghook,
    975            (void *)input_url_locret,
    976            0,
    977            &input_menu_skt,
    978            {0,0,0,0},
    979            FONT_SMALL,
    980            100,
    981            101,
    982            0,
    983            //  0x00000001 - Выровнять по правому краю
    984            //  0x00000002 - Выровнять по центру
    985            //  0x00000004 - Инверсия знакомест
    986            //  0x00000008 - UnderLine
    987            //  0x00000020 - Не переносить слова
    988            //  0x00000200 - bold
    989            0,
    990            //  0x00000002 - ReadOnly
    991            //  0x00000004 - Не двигается курсор
    992            //  0x40000000 - Поменять местами софт-кнопки
    993            0x40000000
    994          };
    995          
    996          

   \                                 In segment CODE, align 4, keep-with-next
    997          int CreateInputUrl()
    998          {
   \                     CreateInputUrl:
   \   00000000   F0412DE9           PUSH     {R4-R8,LR}
   \   00000004   2CD04DE2           SUB      SP,SP,#+44
    999            void *ma=malloc_adr();
   \   00000008   148000EF           SWI      +32788
   \   0000000C   0040A0E1           MOV      R4,R0
   1000            void *eq;
   1001            char *url_start;
   1002            EDITCONTROL ec;
   1003            
   1004            eq=AllocEQueue(ma,mfree_adr());    // Extension
   \   00000010   158000EF           SWI      +32789
   \   00000014   0010A0E1           MOV      R1,R0
   \   00000018   0400A0E1           MOV      R0,R4
   \   0000001C   630100EF           SWI      +355
   \   00000020   0050A0E1           MOV      R5,R0
   1005            WSHDR *ews=AllocWS(1024);
   \   00000024   400EA0E3           MOV      R0,#+1024
   \   00000028   250100EF           SWI      +293
   \   0000002C   0060A0E1           MOV      R6,R0
   1006          
   1007            MAIN_CSM *main_csm;
   1008            if ((main_csm=(MAIN_CSM *)FindCSMbyID(maincsm_id)))
   \   00000030   ........           LDR      R0,??DataTable39  ;; maincsm_id
   \   00000034   000090E5           LDR      R0,[R0, #+0]
   \   00000038   080100EF           SWI      +264
   \   0000003C   000050E3           CMP      R0,#+0
   \   00000040   2B00000A           BEQ      ??CreateInputUrl_0
   1009            {
   1010              VIEW_GUI *p=FindGUIbyId(main_csm->view_id,NULL);
   \   00000044   280090E5           LDR      R0,[R0, #+40]
   \   00000048   0010A0E3           MOV      R1,#+0
   \   0000004C   090200EF           SWI      +521
   1011              if (p->vd->pageurl)
   \   00000050   340090E5           LDR      R0,[R0, #+52]
   \   00000054   D81090E5           LDR      R1,[R0, #+216]
   \   00000058   000051E3           CMP      R1,#+0
   \   0000005C   0D00000A           BEQ      ??CreateInputUrl_1
   1012              {
   1013                for(url_start = p->vd->pageurl; *url_start && *url_start != '/'; url_start++);
   \   00000060   0170A0E1           MOV      R7,R1
   \   00000064   000000EA           B        ??CreateInputUrl_2
   \                     ??CreateInputUrl_3:
   \   00000068   017087E2           ADD      R7,R7,#+1
   \                     ??CreateInputUrl_2:
   \   0000006C   0000D7E5           LDRB     R0,[R7, #+0]
   \   00000070   000050E3           CMP      R0,#+0
   \   00000074   2F005013           CMPNE    R0,#+47
   \   00000078   FAFFFF1A           BNE      ??CreateInputUrl_3
   1014                for(; *url_start && *url_start == '/'; url_start++);
   \                     ??CreateInputUrl_4:
   \   0000007C   0000D7E5           LDRB     R0,[R7, #+0]
   \   00000080   000050E3           CMP      R0,#+0
   \   00000084   1A00000A           BEQ      ??CreateInputUrl_0
   \   00000088   2F0050E3           CMP      R0,#+47
   \   0000008C   1800001A           BNE      ??CreateInputUrl_0
   \   00000090   017087E2           ADD      R7,R7,#+1
   \   00000094   F8FFFFEA           B        ??CreateInputUrl_4
   1015              }
   1016              else
   1017              {
   1018                switch(view_url_mode)
   \                     ??CreateInputUrl_1:
   \   00000098   ........           LDR      R0,??DataTable30  ;; view_url
   \   0000009C   007090E5           LDR      R7,[R0, #+0]
   \   000000A0   ........           LDR      R0,??DataTable31  ;; view_url_mode
   \   000000A4   000090E5           LDR      R0,[R0, #+0]
   \   000000A8   000050E3           CMP      R0,#+0
   \   000000AC   1000000A           BEQ      ??CreateInputUrl_0
   \   000000B0   010050E2           SUBS     R0,R0,#+1
   \   000000B4   0100000A           BEQ      ??CreateInputUrl_5
   \   000000B8   0B0000EA           B        ??CreateInputUrl_6
   1019                {
   1020                case MODE_FILE:
   1021                  url_start=view_url;
   1022                  break;
   1023                case MODE_URL:
   1024                  for(url_start = view_url; *url_start && *url_start != '/'; url_start++);
   \                     ??CreateInputUrl_7:
   \   000000BC   017087E2           ADD      R7,R7,#+1
   \                     ??CreateInputUrl_5:
   \   000000C0   0000D7E5           LDRB     R0,[R7, #+0]
   \   000000C4   000050E3           CMP      R0,#+0
   \   000000C8   2F005013           CMPNE    R0,#+47
   \   000000CC   FAFFFF1A           BNE      ??CreateInputUrl_7
   1025                  for(; *url_start && *url_start == '/'; url_start++);
   \                     ??CreateInputUrl_8:
   \   000000D0   0000D7E5           LDRB     R0,[R7, #+0]
   \   000000D4   000050E3           CMP      R0,#+0
   \   000000D8   0500000A           BEQ      ??CreateInputUrl_0
   \   000000DC   2F0050E3           CMP      R0,#+47
   \   000000E0   0300001A           BNE      ??CreateInputUrl_0
   \   000000E4   017087E2           ADD      R7,R7,#+1
   \   000000E8   F8FFFFEA           B        ??CreateInputUrl_8
   1026                  break;
   1027                default:
   1028                  url_start=lgpData[LGP_Absent]; // HACK, symbols will be taken from the bottom table part
   \                     ??CreateInputUrl_6:
   \   000000EC   C8009FE5           LDR      R0,??CreateInputUrl_9  ;; lgpData + 152
   \   000000F0   007090E5           LDR      R7,[R0, #+0]
   1029                  break;
   1030                }
   1031              }
   1032            }
   1033            ews->wsbody[0]=0;
   \                     ??CreateInputUrl_0:
   \   000000F4   000096E5           LDR      R0,[R6, #+0]
   \   000000F8   0010A0E3           MOV      R1,#+0
   \   000000FC   B010C0E1           STRH     R1,[R0, #+0]
   1034            for(int i=0;i<strlen(url_start);i++)
   \   00000100   0080A0E3           MOV      R8,#+0
   \   00000104   090000EA           B        ??CreateInputUrl_10
   1035              ews->wsbody[++ews->wsbody[0]]=url_start[i];
   \                     ??CreateInputUrl_11:
   \   00000108   000096E5           LDR      R0,[R6, #+0]
   \   0000010C   B010D0E1           LDRH     R1,[R0, #+0]
   \   00000110   011081E2           ADD      R1,R1,#+1
   \   00000114   B010C0E1           STRH     R1,[R0, #+0]
   \   00000118   000096E5           LDR      R0,[R6, #+0]
   \   0000011C   B010D0E1           LDRH     R1,[R0, #+0]
   \   00000120   810080E0           ADD      R0,R0,R1, LSL #+1
   \   00000124   0710D8E7           LDRB     R1,[R8, +R7]
   \   00000128   018088E2           ADD      R8,R8,#+1
   \   0000012C   B010C0E1           STRH     R1,[R0, #+0]
   \                     ??CreateInputUrl_10:
   \   00000130   0700A0E1           MOV      R0,R7
   \   00000134   1B0000EF           SWI      +27
   \   00000138   000058E1           CMP      R8,R0
   \   0000013C   F1FFFF3A           BCC      ??CreateInputUrl_11
   1036          
   1037            PrepareEditControl(&ec);
   1038            ConstructEditControl(&ec,ECT_NORMAL_TEXT,0x40,ews,1024);
   1039            AddEditControlToEditQend(eq,&ec,ma);   //2
   1040          
   1041            FreeWS(ews);
   1042            patch_header(&input_url_hdr);
   1043            patch_input(&input_url_desc);
   \   00000140   78709FE5           LDR      R7,??CreateInputUrl_9+0x4  ;; input_url_desc
   \   00000144   0D00A0E1           MOV      R0,SP
   \   00000148   640100EF           SWI      +356
   \   0000014C   400EA0E3           MOV      R0,#+1024
   \   00000150   01002DE9           PUSH     {R0}
   \   00000154   0630A0E1           MOV      R3,R6
   \   00000158   4020A0E3           MOV      R2,#+64
   \   0000015C   0310A0E3           MOV      R1,#+3
   \   00000160   04008DE2           ADD      R0,SP,#+4
   \   00000164   650100EF           SWI      +357
   \   00000168   0420A0E1           MOV      R2,R4
   \   0000016C   04108DE2           ADD      R1,SP,#+4
   \   00000170   0500A0E1           MOV      R0,R5
   \   00000174   660100EF           SWI      +358
   \   00000178   0600A0E1           MOV      R0,R6
   \   0000017C   ........           LDR      R6,??DataTable40  ;; main_menu_ITEMS
   \   00000180   290100EF           SWI      +297
   \   00000184   834FA0E3           MOV      R4,#+524
   \   00000188   060084E0           ADD      R0,R4,R6
   \   0000018C   ........           _BLF     patch_header,??patch_header??rA
   \   00000190   0700A0E1           MOV      R0,R7
   \   00000194   ........           _BLF     patch_input,??patch_input??rA
   1044            return CreateInputTextDialog(&input_url_desc,&input_url_hdr,eq,1,0);
   \   00000198   0000A0E3           MOV      R0,#+0
   \   0000019C   01002DE9           PUSH     {R0}
   \   000001A0   0130A0E3           MOV      R3,#+1
   \   000001A4   0520A0E1           MOV      R2,R5
   \   000001A8   061084E0           ADD      R1,R4,R6
   \   000001AC   0700A0E1           MOV      R0,R7
   \   000001B0   670100EF           SWI      +359
   \   000001B4   34D08DE2           ADD      SP,SP,#+52
   \   000001B8   F081BDE8           POP      {R4-R8,PC}       ;; return
   \                     ??CreateInputUrl_9:
   \   000001BC   ........           DC32     lgpData + 152
   \   000001C0   ........           DC32     input_url_desc
   1045          }
   1046          
   1047          //------------------------------------------------------------------------------
   1048          

   \                                 In segment CODE, align 4, keep-with-next
   1049          static void mm_goto_url(GUI *gui)
   1050          {
   1051            MAIN_CSM *main_csm;
   1052            int goto_url_id;
   1053            if ((main_csm=(MAIN_CSM *)FindCSMbyID(maincsm_id)))
   \                     mm_goto_url:
   \   00000000   ........           LDR      R0,??DataTable39  ;; maincsm_id
   \   00000004   10402DE9           PUSH     {R4,LR}
   \   00000008   000090E5           LDR      R0,[R0, #+0]
   \   0000000C   080100EF           SWI      +264
   \   00000010   0040B0E1           MOVS     R4,R0
   \   00000014   0100000A           BEQ      ??mm_goto_url_0
   1054            {
   1055              goto_url_id=CreateInputUrl();
   1056              main_csm->goto_url=goto_url_id;
   \   00000018   ........           BL       CreateInputUrl
   \   0000001C   2C0084E5           STR      R0,[R4, #+44]
   1057            } 
   1058            GeneralFuncF1(1);  
   \                     ??mm_goto_url_0:
   \   00000020   0100A0E3           MOV      R0,#+1
   \   00000024   3B0100EF           SWI      +315
   1059          }
   \   00000028   1080BDE8           POP      {R4,PC}          ;; return
   1060          

   \                                 In segment CODE, align 4, keep-with-next
   1061          static void mm_goto_bookmarks(GUI *gui)
   1062          {
   1063            MAIN_CSM *main_csm;
   1064            int bookmark_menu_id;
   1065            if ((main_csm=(MAIN_CSM *)FindCSMbyID(maincsm_id)))
   \                     mm_goto_bookmarks:
   \   00000000   ........           LDR      R0,??DataTable39  ;; maincsm_id
   \   00000004   10402DE9           PUSH     {R4,LR}
   \   00000008   80D04DE2           SUB      SP,SP,#+128
   \   0000000C   000090E5           LDR      R0,[R0, #+0]
   \   00000010   080100EF           SWI      +264
   \   00000014   0040B0E1           MOVS     R4,R0
   \   00000018   0500000A           BEQ      ??mm_goto_bookmarks_0
   1066            {
   1067              char path[128];
   1068              getSymbolicPath(path,"$bookmarks\\");
   \   0000001C   20109FE5           LDR      R1,??mm_goto_bookmarks_1  ;; `?<Constant "$resources\\\\folder.png">` + 24
   \   00000020   0D00A0E1           MOV      R0,SP
   \   00000024   ........           _BLF     getSymbolicPath,??getSymbolicPath??rA
   1069              bookmark_menu_id=CreateBookmarksMenu(path);
   1070              main_csm->sel_bmk=bookmark_menu_id;
   \   00000028   0D00A0E1           MOV      R0,SP
   \   0000002C   ........           BL       CreateBookmarksMenu
   \   00000030   300084E5           STR      R0,[R4, #+48]
   1071            } 
   1072            GeneralFuncF1(1);
   \                     ??mm_goto_bookmarks_0:
   \   00000034   0100A0E3           MOV      R0,#+1
   \   00000038   3B0100EF           SWI      +315
   1073          }
   \   0000003C   80D08DE2           ADD      SP,SP,#+128
   \   00000040   1080BDE8           POP      {R4,PC}          ;; return
   \                     ??mm_goto_bookmarks_1:
   \   00000044   ........           DC32     `?<Constant "$resources\\\\folder.png">` + 24
   1074          
   1075          

   \                                 In segment CODE, align 4, keep-with-next
   1076          static void mm_search(GUI *gui)
   1077          {
   1078            MAIN_CSM *main_csm;
   1079            int search_id;
   1080            if ((main_csm=(MAIN_CSM *)FindCSMbyID(maincsm_id)))
   \                     mm_search:
   \   00000000   ........           LDR      R0,??DataTable39  ;; maincsm_id
   \   00000004   10402DE9           PUSH     {R4,LR}
   \   00000008   000090E5           LDR      R0,[R0, #+0]
   \   0000000C   080100EF           SWI      +264
   \   00000010   0040B0E1           MOVS     R4,R0
   \   00000014   0100000A           BEQ      ??mm_search_0
   1081            {
   1082              search_id=CreateSearchDialog();
   1083              main_csm->goto_url=search_id;
   \   00000018   ........           BL       CreateSearchDialog
   \   0000001C   2C0084E5           STR      R0,[R4, #+44]
   1084            } 
   1085            GeneralFuncF1(1);
   \                     ??mm_search_0:
   \   00000020   0100A0E3           MOV      R0,#+1
   \   00000024   3B0100EF           SWI      +315
   1086          }
   \   00000028   1080BDE8           POP      {R4,PC}          ;; return
   1087          
   1088          

   \                                 In segment CODE, align 4, keep-with-next
   1089          static void mm_goto_history(GUI *gui)
   1090          {
   1091            MAIN_CSM *main_csm;
   1092            int history_menu_id;
   1093            if ((main_csm=(MAIN_CSM *)FindCSMbyID(maincsm_id)))
   \                     mm_goto_history:
   \   00000000   ........           LDR      R0,??DataTable39  ;; maincsm_id
   \   00000004   10402DE9           PUSH     {R4,LR}
   \   00000008   000090E5           LDR      R0,[R0, #+0]
   \   0000000C   080100EF           SWI      +264
   \   00000010   0040B0E1           MOVS     R4,R0
   \   00000014   0100000A           BEQ      ??mm_goto_history_0
   1094            {
   1095              history_menu_id=CreateHistoryMenu();
   1096              main_csm->sel_bmk=history_menu_id;
   \   00000018   ........           BL       CreateHistoryMenu
   \   0000001C   300084E5           STR      R0,[R4, #+48]
   1097            } 
   1098            GeneralFuncF1(1);
   \                     ??mm_goto_history_0:
   \   00000020   0100A0E3           MOV      R0,#+1
   \   00000024   3B0100EF           SWI      +315
   1099          }
   \   00000028   1080BDE8           POP      {R4,PC}          ;; return
   1100          

   \                                 In segment CODE, align 4, keep-with-next
   1101          static void mm_options(GUI *gui)
   1102          {
   \                     mm_options:
   \   00000000   10402DE9           PUSH     {R4,LR}
   1103            WSHDR *ws;
   1104            ws=AllocWS(150);
   \   00000004   9600A0E3           MOV      R0,#+150
   \   00000008   250100EF           SWI      +293
   \   0000000C   0040A0E1           MOV      R4,R0
   1105            str_2ws(ws,successed_config_filename,128);
   \   00000010   30009FE5           LDR      R0,??mm_options_0  ;; successed_config_filename
   \   00000014   8020A0E3           MOV      R2,#+128
   \   00000018   001090E5           LDR      R1,[R0, #+0]
   \   0000001C   0400A0E1           MOV      R0,R4
   \   00000020   6C0100EF           SWI      +364
   1106            ExecuteFile(ws,0,0);
   \   00000024   0020A0E3           MOV      R2,#+0
   \   00000028   0010A0E3           MOV      R1,#+0
   \   0000002C   0400A0E1           MOV      R0,R4
   \   00000030   940000EF           SWI      +148
   1107            FreeWS(ws);
   \   00000034   0400A0E1           MOV      R0,R4
   \   00000038   290100EF           SWI      +297
   1108            GeneralFuncF1(1);
   \   0000003C   0100A0E3           MOV      R0,#+1
   \   00000040   3B0100EF           SWI      +315
   1109          }
   \   00000044   1080BDE8           POP      {R4,PC}          ;; return
   \                     ??mm_options_0:
   \   00000048   ........           DC32     successed_config_filename
   1110          

   \                                 In segment CODE, align 4, keep-with-next
   1111          static void mm_quit(GUI *gui)
   1112          {
   1113            MAIN_CSM *main_csm;
   1114            if ((main_csm=(MAIN_CSM *)FindCSMbyID(maincsm_id)))
   \                     mm_quit:
   \   00000000   ........           LDR      R0,??DataTable39  ;; maincsm_id
   \   00000004   10402DE9           PUSH     {R4,LR}
   \   00000008   000090E5           LDR      R0,[R0, #+0]
   \   0000000C   080100EF           SWI      +264
   \   00000010   0040B0E1           MOVS     R4,R0
   \   00000014   0600000A           BEQ      ??mm_quit_0
   1115            {
   1116              FreePageStack();
   \   00000018   ........           _BLF     FreePageStack,??FreePageStack??rA
   1117              goto_url = 0;
   \   0000001C   ........           LDR      R0,??DataTable38  ;; goto_url
   \   00000020   0010A0E3           MOV      R1,#+0
   \   00000024   001080E5           STR      R1,[R0, #+0]
   1118              GeneralFunc_flag1(main_csm->view_id,0xFF);
   \   00000028   280094E5           LDR      R0,[R4, #+40]
   \   0000002C   FF10A0E3           MOV      R1,#+255
   \   00000030   3D0100EF           SWI      +317
   1119          //    GeneralFunc_flag1(1,main_csm->view_id);
   1120              GeneralFuncF1(1);
   1121            }
   1122            else
   1123            {
   1124              GeneralFuncF1(1);
   \                     ??mm_quit_0:
   \   00000034   0100A0E3           MOV      R0,#+1
   \   00000038   3B0100EF           SWI      +315
   1125            }
   1126          }
   \   0000003C   1080BDE8           POP      {R4,PC}          ;; return
   1127          

   \                                 In segment DATA_C, align 4, align-sorted
   1128          static const int mmenusoftkeys[]={0,1,2};
   \                     mmenusoftkeys:
   \   00000000   000000000100       DC32 0, 1, 2
   \              000002000000
   1129          
   1130          SOFTKEY_DESC mmenu_sk[]=
   1131          {
   1132            {0x0018,0x0000,(int)"Select"},
   1133            {0x0001,0x0000,(int)"Back"},
   1134            {0x003D,0x0000,(int)LGP_DOIT_PIC}
   1135          };
   1136          

   \                                 In segment DATA_C, align 4, align-sorted
   1137          static const SOFTKEYSTAB mmenu_skt=
   \                     mmenu_skt:
   \   00000000   ........0000       DC32 mmenu_sk, 0
   \              0000        

   \                                 In segment DATA_I, align 4, align-sorted
   1138          {
   1139            mmenu_sk,0
   1140          };
   1141          
   1142          #define MAIN_MENU_ITEMS_N 6
   1143          HEADER_DESC main_menuhdr={0,0,0,0,NULL,(int)"Menu:",LGP_NULL};
   1144          
   1145          MENUITEM_DESC main_menu_ITEMS[MAIN_MENU_ITEMS_N]=
   \                     main_menu_ITEMS:
   \   00000000                      DS8 168
   \   000000A8                      REQUIRE `?<Initializer for main_menu_ITEMS>`
   \                     options_menu_ITEMS:
   \   000000A8                      DS8 112
   \   00000118                      REQUIRE `?<Initializer for options_menu_ITEMS>`
   \                     add_bookmark_sk:
   \   00000118                      DS8 24
   \   00000130                      REQUIRE `?<Initializer for add_bookmark_sk>`
   \                     add_bookmark_hdr:
   \   00000130                      DS8 20
   \   00000144                      REQUIRE `?<Initializer for add_bookmark_hdr>`
   \                     options_menuhdr:
   \   00000144                      DS8 20
   \   00000158                      REQUIRE `?<Initializer for options_menuhdr>`
   \                     menu_sk:
   \   00000158                      DS8 24
   \   00000170                      REQUIRE `?<Initializer for menu_sk>`
   \                     selurl_sk:
   \   00000170                      DS8 24
   \   00000188                      REQUIRE `?<Initializer for selurl_sk>`
   \                     selurl_HDR:
   \   00000188                      DS8 20
   \   0000019C                      REQUIRE `?<Initializer for selurl_HDR>`
   \                     search_sk:
   \   0000019C                      DS8 24
   \   000001B4                      REQUIRE `?<Initializer for search_sk>`
   \                     search_hdr:
   \   000001B4                      DS8 20
   \   000001C8                      REQUIRE `?<Initializer for search_hdr>`
   \                     history_sk:
   \   000001C8                      DS8 24
   \   000001E0                      REQUIRE `?<Initializer for history_sk>`
   \                     history_HDR:
   \   000001E0                      DS8 20
   \   000001F4                      REQUIRE `?<Initializer for history_HDR>`
   \                     input_menu_sk:
   \   000001F4                      DS8 24
   \   0000020C                      REQUIRE `?<Initializer for input_menu_sk>`
   \                     input_url_hdr:
   \   0000020C                      DS8 20
   \   00000220                      REQUIRE `?<Initializer for input_url_hdr>`
   \                     mmenu_sk:
   \   00000220                      DS8 24
   \   00000238                      REQUIRE `?<Initializer for mmenu_sk>`
   \                     main_menuhdr:
   \   00000238                      DS8 20
   \   0000024C                      REQUIRE `?<Initializer for main_menuhdr>`
   \   0000024C                      DS8 4
   \   00000250                      REQUIRE `?<Initializer for search_engine_count>`
   \   00000250                      DS8 4
   \   00000254                      REQUIRE `?<Initializer for selected_search_engine>`
   \   00000254                      DS8 128
   \   000002D4                      REQUIRE `?<Initializer for search_engines>`
   \                     curBookmarksDir:
   \   000002D4                      DS8 128
   \   00000354                      REQUIRE `?<Initializer for curBookmarksDir>`
   \                     options_menu_STRUCT:
   \   00000354                      DS8 44
   \   00000380                      REQUIRE `?<Initializer for options_menu_STRUCT>`
   \                     selurl_STRUCT:
   \   00000380                      DS8 44
   \   000003AC                      REQUIRE `?<Initializer for selurl_STRUCT>`
   \                     search_desc:
   \   000003AC                      DS8 56
   \   000003E4                      REQUIRE `?<Initializer for search_desc>`
   \                     history_STRUCT:
   \   000003E4                      DS8 44
   \   00000410                      REQUIRE `?<Initializer for history_STRUCT>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     menusoftkeys:
   \   00000000                      DS8 12
   \   0000000C                      REQUIRE `?<Initializer for menusoftkeys>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     menu_skt:
   \   00000000                      DS8 8
   \   00000008                      REQUIRE `?<Initializer for menu_skt>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     selurl_softkeys:
   \   00000000                      DS8 12
   \   0000000C                      REQUIRE `?<Initializer for selurl_softkeys>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     selurl_skt:
   \   00000000                      DS8 8
   \   00000008                      REQUIRE `?<Initializer for selurl_skt>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     history_softkeys:
   \   00000000                      DS8 12
   \   0000000C                      REQUIRE `?<Initializer for history_softkeys>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     history_skt:
   \   00000000                      DS8 8
   \   00000008                      REQUIRE `?<Initializer for history_skt>`
   1146          {
   1147            {NULL,(int)"Go to",      LGP_NULL, 0, NULL, MENU_FLAG3, MENU_FLAG2}, //0
   1148            {NULL,(int)"Bookmarks",  LGP_NULL, 0, NULL, MENU_FLAG3, MENU_FLAG2}, //1
   1149            {NULL,(int)"History",    LGP_NULL, 0, NULL, MENU_FLAG3, MENU_FLAG2}, //2
   1150            {NULL,(int)"Settings",   LGP_NULL, 0, NULL, MENU_FLAG3, MENU_FLAG2}, //3
   1151            {NULL,(int)"Search",     LGP_NULL, 0, NULL, MENU_FLAG3, MENU_FLAG2}, //3
   1152            {NULL,(int)"Exit",       LGP_NULL, 0, NULL, MENU_FLAG3, MENU_FLAG2}  //4
   1153          };
   1154          

   \                                 In segment DATA_C, align 4, align-sorted
   1155          static const MENUPROCS_DESC main_menu_HNDLS[MAIN_MENU_ITEMS_N]=
   \                     main_menu_HNDLS:
   \   00000000   ............       DC32 mm_goto_url, mm_goto_bookmarks, mm_goto_history, mm_options
   \              ............
   \              ........    
   \   00000010   ............       DC32 mm_search, mm_quit
   \              ....        
   1156          {
   1157            mm_goto_url,
   1158            mm_goto_bookmarks,
   1159            mm_goto_history,
   1160            mm_options,
   1161            mm_search,
   1162            mm_quit
   1163          };
   1164          

   \                                 In segment CODE, align 4, keep-with-next
   1165          static int mainmenu_keyhook(void *data, GUI_MSG *msg)
   1166          {
   1167            return(0);
   \                     mainmenu_keyhook:
   \   00000000   0000A0E3           MOV      R0,#+0
   \   00000004   1EFF2FE1           BX       LR               ;; return
   1168          }
   1169          

   \                                 In segment CODE, align 4, keep-with-next
   1170          static void mainmenu_ghook(void *data, int cmd)
   1171          {
   \                     mainmenu_ghook:
   \   00000000   00402DE9           PUSH     {LR}
   1172            if (cmd==0x0A)
   \   00000004   0A0051E3           CMP      R1,#+10
   \   00000008   0080BD18           POPNE    {PC}
   1173            {
   1174              DisableIDLETMR();
   \   0000000C   7F0100EF           SWI      +383
   1175            }
   1176          }
   \   00000010   0080BDE8           POP      {PC}             ;; return
   1177          

   \                                 In segment DATA_C, align 4, align-sorted
   1178          static const MENU_DESC mainmenu=
   \                     mainmenu:
   \   00000000   08000000....       DC32 8, mainmenu_keyhook, mainmenu_ghook, 0H, mmenusoftkeys, mmenu_skt
   \              ............
   \              00000000....
   \              ............
   \   00000018   100000000000       DC32 16, 0H, main_menu_ITEMS, main_menu_HNDLS, 6
   \              0000........
   \              ........0600
   \              0000        
   1179          {
   1180            8,mainmenu_keyhook,mainmenu_ghook,NULL,
   1181            mmenusoftkeys,
   1182            &mmenu_skt,
   1183            0x10,//MENU_FLAG,
   1184            NULL,
   1185            main_menu_ITEMS,//menuitems,
   1186            main_menu_HNDLS,//menuprocs,
   1187            MAIN_MENU_ITEMS_N
   1188          };
   1189          

   \                                 In segment CODE, align 4, keep-with-next
   1190          int CreateMainMenu(VIEWDATA *vd)
   1191          {
   \                     CreateMainMenu:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   1192            MAIN_CSM *main_csm;
   1193            int main_menu_id;
   1194            if ((main_csm=(MAIN_CSM *)FindCSMbyID(maincsm_id)))
   \   00000008   ........           LDR      R0,??DataTable39  ;; maincsm_id
   \   0000000C   000090E5           LDR      R0,[R0, #+0]
   \   00000010   080100EF           SWI      +264
   \   00000014   0060B0E1           MOVS     R6,R0
   \   00000018   1100000A           BEQ      ??CreateMainMenu_0
   1195            {
   1196              patch_header(&main_menuhdr);
   \   0000001C   ........           LDR      R7,??DataTable40  ;; main_menu_ITEMS
   \   00000020   8E5FA0E3           MOV      R5,#+568
   \   00000024   070085E0           ADD      R0,R5,R7
   \   00000028   ........           _BLF     patch_header,??patch_header??rA
   1197              main_menu_id=CreateMenu(0,0,&mainmenu,&main_menuhdr,0,MAIN_MENU_ITEMS_N,vd,0);
   \   0000002C   38209FE5           LDR      R2,??CreateMainMenu_1  ;; mainmenu
   \   00000030   0000A0E3           MOV      R0,#+0
   \   00000034   01002DE9           PUSH     {R0}
   \   00000038   10002DE9           PUSH     {R4}
   \   0000003C   073085E0           ADD      R3,R5,R7
   \   00000040   0600A0E3           MOV      R0,#+6
   \   00000044   01002DE9           PUSH     {R0}
   \   00000048   0010A0E3           MOV      R1,#+0
   \   0000004C   0000A0E3           MOV      R0,#+0
   \   00000050   01002DE9           PUSH     {R0}
   \   00000054   520100EF           SWI      +338
   \   00000058   0050A0E1           MOV      R5,R0
   1198              main_csm->main_menu_id=main_menu_id;
   \   0000005C   345086E5           STR      R5,[R6, #+52]
   \   00000060   10D08DE2           ADD      SP,SP,#+16
   1199            }
   1200            return main_menu_id;
   \                     ??CreateMainMenu_0:
   \   00000064   0500A0E1           MOV      R0,R5
   \   00000068   F080BDE8           POP      {R4-R7,PC}       ;; return
   \                     ??CreateMainMenu_1:
   \   0000006C   ........           DC32     mainmenu
   1201          }
   1202          

   \                                 In segment CODE, align 4, keep-with-next
   1203          void initMainMenuLangPack()
   1204          {
   1205            add_bookmark_sk[0].lgp_id=(int)lgpData[LGP_Add];
   \                     initMainMenuLangPack:
   \   00000000   ........           LDR      R0,??DataTable41  ;; lgpData
   \   00000004   DC109FE5           LDR      R1,??initMainMenuLangPack_0  ;; main_menu_ITEMS
   \   00000008   30002DE9           PUSH     {R4,R5}
   1206            add_bookmark_sk[1].lgp_id=(int)lgpData[LGP_Cancel];
   \   0000000C   682090E5           LDR      R2,[R0, #+104]
   \   00000010   242181E5           STR      R2,[R1, #+292]
   1207            add_bookmark_hdr.lgp_id=(int)lgpData[LGP_BookmarkHeader];
   1208            options_menuhdr.lgp_id=(int)lgpData[LGP_OptionsHeader];
   1209            options_menu_ITEMS[0].lgp_id_small=(int)lgpData[LGP_Add];
   1210            options_menu_ITEMS[1].lgp_id_small=(int)lgpData[LGP_Edit];
   1211            options_menu_ITEMS[2].lgp_id_small=(int)lgpData[LGP_Delete];
   1212            options_menu_ITEMS[3].lgp_id_small=(int)lgpData[LGP_Back];
   1213            menu_sk[0].lgp_id=(int)lgpData[LGP_Options];
   1214            menu_sk[1].lgp_id=(int)lgpData[LGP_Close];
   1215            selurl_sk[0].lgp_id=(int)lgpData[LGP_Options];
   1216            selurl_sk[1].lgp_id=(int)lgpData[LGP_Cancel];
   \   00000014   7C2181E5           STR      R2,[R1, #+380]
   1217            selurl_HDR.lgp_id=(int)lgpData[LGP_SelectBookmarkHeader];
   1218            search_sk[0].lgp_id=(int)lgpData[LGP_Search];
   1219            search_sk[1].lgp_id=(int)lgpData[LGP_Cancel];
   \   00000018   A82181E5           STR      R2,[R1, #+424]
   1220            search_hdr.lgp_id=(int)lgpData[LGP_SearchHeader];
   1221            history_sk[0].lgp_id=(int)lgpData[LGP_Go];
   1222            history_sk[1].lgp_id=(int)lgpData[LGP_Cancel];
   \   0000001C   D42181E5           STR      R2,[R1, #+468]
   \   00000020   883090E5           LDR      R3,[R0, #+136]
   \   00000024   8C4090E5           LDR      R4,[R0, #+140]
   \   00000028   A8C090E5           LDR      R12,[R0, #+168]
   1223            history_HDR.lgp_id=(int)lgpData[LGP_HistoryHeader];
   \   0000002C   BC5090E5           LDR      R5,[R0, #+188]
   1224            input_menu_sk[0].lgp_id=(int)lgpData[LGP_Go];
   1225            input_menu_sk[1].lgp_id=(int)lgpData[LGP_Cancel];
   \   00000030   002281E5           STR      R2,[R1, #+512]
   1226            input_url_hdr.lgp_id=(int)lgpData[LGP_AddressHeader];
   \   00000034   C02090E5           LDR      R2,[R0, #+192]
   \   00000038   1C3181E5           STR      R3,[R1, #+284]
   \   0000003C   182281E5           STR      R2,[R1, #+536]
   1227            mmenu_sk[0].lgp_id=(int)lgpData[LGP_Select];
   \   00000040   5C2090E5           LDR      R2,[R0, #+92]
   \   00000044   AC3081E5           STR      R3,[R1, #+172]
   \   00000048   A03090E5           LDR      R3,[R0, #+160]
   \   0000004C   242281E5           STR      R2,[R1, #+548]
   1228            mmenu_sk[1].lgp_id=(int)lgpData[LGP_Back];
   1229            main_menuhdr.lgp_id=(int)lgpData[LGP_Menu];
   \   00000050   C42090E5           LDR      R2,[R0, #+196]
   \   00000054   3C4181E5           STR      R4,[R1, #+316]
   \   00000058   9C4090E5           LDR      R4,[R0, #+156]
   \   0000005C   C83081E5           STR      R3,[R1, #+200]
   \   00000060   A43090E5           LDR      R3,[R0, #+164]
   \   00000064   442281E5           STR      R2,[R1, #+580]
   1230            main_menu_ITEMS[0].lgp_id_small=(int)lgpData[LGP_GoTo];
   \   00000068   C82090E5           LDR      R2,[R0, #+200]
   \   0000006C   504181E5           STR      R4,[R1, #+336]
   \   00000070   604090E5           LDR      R4,[R0, #+96]
   \   00000074   E43081E5           STR      R3,[R1, #+228]
   \   00000078   AC3090E5           LDR      R3,[R0, #+172]
   \   0000007C   042081E5           STR      R2,[R1, #+4]
   1231            main_menu_ITEMS[1].lgp_id_small=(int)lgpData[LGP_Bookmarks];
   \   00000080   CC2090E5           LDR      R2,[R0, #+204]
   \   00000084   5C3181E5           STR      R3,[R1, #+348]
   \   00000088   644181E5           STR      R4,[R1, #+356]
   \   0000008C   B44090E5           LDR      R4,[R0, #+180]
   \   00000090   743181E5           STR      R3,[R1, #+372]
   \   00000094   B03090E5           LDR      R3,[R0, #+176]
   \   00000098   202081E5           STR      R2,[R1, #+32]
   1232            main_menu_ITEMS[2].lgp_id_small=(int)lgpData[LGP_History];
   \   0000009C   D02090E5           LDR      R2,[R0, #+208]
   \   000000A0   943181E5           STR      R3,[R1, #+404]
   \   000000A4   DC3090E5           LDR      R3,[R0, #+220]
   \   000000A8   C04181E5           STR      R4,[R1, #+448]
   \   000000AC   B84090E5           LDR      R4,[R0, #+184]
   \   000000B0   3C2081E5           STR      R2,[R1, #+60]
   1233            main_menu_ITEMS[3].lgp_id_small=(int)lgpData[LGP_Settings];
   \   000000B4   D42090E5           LDR      R2,[R0, #+212]
   1234            main_menu_ITEMS[4].lgp_id_small=(int)lgpData[LGP_Search];
   1235            main_menu_ITEMS[5].lgp_id_small=(int)lgpData[LGP_Exit];
   \   000000B8   D80090E5           LDR      R0,[R0, #+216]
   \   000000BC   00C181E5           STR      R12,[R1, #+256]
   \   000000C0   A03181E5           STR      R3,[R1, #+416]
   \   000000C4   CC4181E5           STR      R4,[R1, #+460]
   \   000000C8   EC5181E5           STR      R5,[R1, #+492]
   \   000000CC   F84181E5           STR      R4,[R1, #+504]
   \   000000D0   2CC281E5           STR      R12,[R1, #+556]
   \   000000D4   582081E5           STR      R2,[R1, #+88]
   \   000000D8   743081E5           STR      R3,[R1, #+116]
   \   000000DC   900081E5           STR      R0,[R1, #+144]
   1236          }
   \   000000E0   3000BDE8           POP      {R4,R5}
   \   000000E4   1EFF2FE1           BX       LR               ;; return
   \                     ??initMainMenuLangPack_0:
   \   000000E8   ........           DC32     main_menu_ITEMS

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable4:
   \   00000000   ........           DC32     view_url_mode

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable7:
   \   00000000   ........           DC32     `?<Constant "$resources\\\\folder.png">` + 60

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable8:
   \   00000000   ........           DC32     view_url

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable10:
   \   00000000   ........           DC32     maincsm_id

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable17:
   \   00000000   ........           DC32     SEARCH_PATH

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable21:
   \   00000000   ........           DC32     lgpData

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable24:
   \   00000000   ........           DC32     `?<Constant "$resources\\\\folder.png">`

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable26:
   \   00000000   ........           DC32     lgpData + 24

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable27:
   \   00000000   ........           DC32     main_menu_ITEMS

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable28:
   \   00000000   ........           DC32     goto_url

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable30:
   \   00000000   ........           DC32     view_url

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable31:
   \   00000000   ........           DC32     view_url_mode

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable38:
   \   00000000   ........           DC32     goto_url

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable39:
   \   00000000   ........           DC32     maincsm_id

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable40:
   \   00000000   ........           DC32     main_menu_ITEMS

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable41:
   \   00000000   ........           DC32     lgpData

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for main_menu_ITEMS>`:
   \   00000000   00000000....       DC32 0H, `?<Constant "Go to">`, 2147483647, 0, 0H, 3, 1442, 0H
   \              ....FFFFFF7F
   \              000000000000
   \              000003000000
   \              A20500000000
   \              0000        
   \   00000020   ........FFFF       DC32 `?<Constant "Bookmarks">`, 2147483647, 0, 0H, 3, 1442, 0H
   \              FF7F00000000
   \              000000000300
   \              0000A2050000
   \              00000000    
   \   0000003C   ........FFFF       DC32 `?<Constant "History">`, 2147483647, 0, 0H, 3, 1442, 0H
   \              FF7F00000000
   \              000000000300
   \              0000A2050000
   \              00000000    
   \   00000058   ........FFFF       DC32 `?<Constant "Settings">`, 2147483647, 0, 0H, 3, 1442, 0H
   \              FF7F00000000
   \              000000000300
   \              0000A2050000
   \              00000000    
   \   00000074   ........FFFF       DC32 `?<Constant "Search">`, 2147483647, 0, 0H, 3, 1442, 0H
   \              FF7F00000000
   \              000000000300
   \              0000A2050000
   \              00000000    
   \   00000090   ........FFFF       DC32 `?<Constant "Exit">`, 2147483647, 0, 0H, 3, 1442
   \              FF7F00000000
   \              000000000300
   \              0000A2050000
   \                     `?<Initializer for options_menu_ITEMS>`:
   \   000000A8   00000000....       DC32 0H, `?<Constant "Add">`, 2147483647, 0, 0H, 3, 1442, 0H
   \              ....FFFFFF7F
   \              000000000000
   \              000003000000
   \              A20500000000
   \              0000        
   \   000000C8   ........FFFF       DC32 `?<Constant "Edit">`, 2147483647, 0, 0H, 3, 1442, 0H
   \              FF7F00000000
   \              000000000300
   \              0000A2050000
   \              00000000    
   \   000000E4   ........FFFF       DC32 `?<Constant "Delete">`, 2147483647, 0, 0H, 3, 1442, 0H
   \              FF7F00000000
   \              000000000300
   \              0000A2050000
   \              00000000    
   \   00000100   ........FFFF       DC32 `?<Constant "Back">`, 2147483647, 0, 0H, 3, 1442
   \              FF7F00000000
   \              000000000300
   \              0000A2050000
   \                     `?<Initializer for add_bookmark_sk>`:
   \   00000118   18000000           DC16 24, 0
   \   0000011C   ........           DC32 `?<Constant "Add">`
   \   00000120   01000000           DC16 1, 0
   \   00000124   ........           DC32 `?<Constant "Cancel">`
   \   00000128   3D000000           DC16 61, 0
   \   0000012C   FBC0FF7F           DC32 2147467515
   \                     `?<Initializer for add_bookmark_hdr>`:
   \   00000130   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   00000138   00000000....       DC32 0H, `?<Constant "Bookmark...">`, 2147483647
   \              ....FFFFFF7F
   \                     `?<Initializer for options_menuhdr>`:
   \   00000144   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   0000014C   00000000....       DC32 0H, `?<Constant "Options:">`, 2147483647
   \              ....FFFFFF7F
   \                     `?<Initializer for menu_sk>`:
   \   00000158   18000000           DC16 24, 0
   \   0000015C   ........           DC32 `?<Constant "Options">`
   \   00000160   01000000           DC16 1, 0
   \   00000164   ........           DC32 `?<Constant "Close">`
   \   00000168   3D000000           DC16 61, 0
   \   0000016C   FBC0FF7F           DC32 2147467515
   \                     `?<Initializer for selurl_sk>`:
   \   00000170   18000000           DC16 24, 0
   \   00000174   ........           DC32 `?<Constant "Options">`
   \   00000178   01000000           DC16 1, 0
   \   0000017C   ........           DC32 `?<Constant "Cancel">`
   \   00000180   3D000000           DC16 61, 0
   \   00000184   FBC0FF7F           DC32 2147467515
   \                     `?<Initializer for selurl_HDR>`:
   \   00000188   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   00000190   00000000....       DC32 0H, `?<Constant "Select Bookmark:">`, 2147483647
   \              ....FFFFFF7F
   \                     `?<Initializer for search_sk>`:
   \   0000019C   18000000           DC16 24, 0
   \   000001A0   ........           DC32 `?<Constant "Search">`
   \   000001A4   01000000           DC16 1, 0
   \   000001A8   ........           DC32 `?<Constant "Cancel">`
   \   000001AC   3D000000           DC16 61, 0
   \   000001B0   FBC0FF7F           DC32 2147467515
   \                     `?<Initializer for search_hdr>`:
   \   000001B4   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   000001BC   00000000....       DC32 0H, `?<Constant "Search:">`, 2147483647
   \              ....FFFFFF7F
   \                     `?<Initializer for history_sk>`:
   \   000001C8   18000000           DC16 24, 0
   \   000001CC   ........           DC32 `?<Constant "Go">`
   \   000001D0   01000000           DC16 1, 0
   \   000001D4   ........           DC32 `?<Constant "Cancel">`
   \   000001D8   3D000000           DC16 61, 0
   \   000001DC   FBC0FF7F           DC32 2147467515
   \                     `?<Initializer for history_HDR>`:
   \   000001E0   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   000001E8   00000000....       DC32 0H, `?<Constant "History:">`, 2147483647
   \              ....FFFFFF7F
   \                     `?<Initializer for input_menu_sk>`:
   \   000001F4   18000000           DC16 24, 0
   \   000001F8   ........           DC32 `?<Constant "Go">`
   \   000001FC   01000000           DC16 1, 0
   \   00000200   ........           DC32 `?<Constant "Cnacel">`
   \   00000204   3D000000           DC16 61, 0
   \   00000208   FBC0FF7F           DC32 2147467515
   \                     `?<Initializer for input_url_hdr>`:
   \   0000020C   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   00000214   00000000....       DC32 0H, `?<Constant "Adress:">`, 2147483647
   \              ....FFFFFF7F
   \                     `?<Initializer for mmenu_sk>`:
   \   00000220   18000000           DC16 24, 0
   \   00000224   ........           DC32 `?<Constant "Select">`
   \   00000228   01000000           DC16 1, 0
   \   0000022C   ........           DC32 `?<Constant "Back">`
   \   00000230   3D000000           DC16 61, 0
   \   00000234   FBC0FF7F           DC32 2147467515
   \                     `?<Initializer for main_menuhdr>`:
   \   00000238   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   00000240   00000000....       DC32 0H, `?<Constant "Menu:">`, 2147483647
   \              ....FFFFFF7F
   \                     `?<Initializer for search_engine_count>`:
   \   0000024C   00000000           DC32 0
   \                     `?<Initializer for selected_search_engine>`:
   \   00000250   00000000           DC32 0
   \                     `?<Initializer for search_engines>`:
   \   00000254   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000264   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000274   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000284   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000294   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000002A4   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000002B4   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000002C4   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \                     `?<Initializer for curBookmarksDir>`:
   \   000002D4   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000002E4   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000002F4   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000304   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000314   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000324   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000334   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000344   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \                     `?<Initializer for options_menu_STRUCT>`:
   \   00000354   000000000000       DC32 0, 0H, 0H, 0H, menusoftkeys, menu_skt, 8, 0H, options_menu_ITEMS
   \              000000000000
   \              00000000....
   \              ............
   \              080000000000
   \              0000........
   \   00000378   ........0400       DC32 options_menu_HNDLS, 4
   \              0000        
   \                     `?<Initializer for selurl_STRUCT>`:
   \   00000380   08000000....       DC32 8, selurl_menu_onkey, selurl_menu_ghook, 0H, selurl_softkeys
   \              ............
   \              00000000....
   \              ....        
   \   00000394   ........1100       DC32 selurl_skt, 17, selurl_menu_iconhndl, 0H, 0H, 0
   \              0000........
   \              000000000000
   \              000000000000
   \                     `?<Initializer for search_desc>`:
   \   000003AC   01000000....       DC32 1, search_onkey, search_ghook, search_locret, 0, search_skt
   \              ............
   \              ........0000
   \              0000........
   \   000003C4   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   000003CC   080000006400       DC32 8, 100, 101, 0, 0, 1073741824
   \              000065000000
   \              000000000000
   \              000000000040
   \                     `?<Initializer for history_STRUCT>`:
   \   000003E4   08000000....       DC32 8, history_menu_onkey, history_menu_ghook, 0H, history_softkeys
   \              ............
   \              00000000....
   \              ....        
   \   000003F8   ........1000       DC32 history_skt, 16, history_menu_iconhndl, 0H, 0H, 0
   \              0000........
   \              000000000000
   \              000000000000

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for menusoftkeys>`:
   \   00000000   000000000100       DC32 0, 1, 2
   \              000002000000

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for menu_skt>`:
   \   00000000   ........0000       DC32 menu_sk, 0
   \              0000        

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for selurl_softkeys>`:
   \   00000000   000000000100       DC32 0, 1, 2
   \              000002000000

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for selurl_skt>`:
   \   00000000   ........0000       DC32 selurl_sk, 0
   \              0000        

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for history_softkeys>`:
   \   00000000   000000000100       DC32 0, 1, 2
   \              000002000000

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for history_skt>`:
   \   00000000   ........0000       DC32 history_sk, 0
   \              0000        

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "$resources\\\\folder.png">`:
   \   00000000   247265736F75       DC8 "$resources\\folder.png"
   \              726365735C66
   \              6F6C6465722E
   \              706E6700    
   \   00000016   0000               DC8 0, 0
   \   00000018   24626F6F6B6D       DC8 "$bookmarks\\"
   \              61726B735C00
   \   00000024   247265736F75       DC8 "$resources\\bookmark.png"
   \              726365735C62
   \              6F6F6B6D6172
   \              6B2E706E6700
   \   0000003C   2E75726C00         DC8 ".url"
   \   00000041   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Bookmark...">`:
   \   00000000   426F6F6B6D61       DC8 "Bookmark..."
   \              726B2E2E2E00

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Cancel">`:
   \   00000000   43616E63656C       DC8 "Cancel"
   \              00          
   \   00000007   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Add">`:
   \   00000000   41646400           DC8 "Add"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant {4095, 0, 0}>`:
   \   00000000   FF0F0000           DC16 4095, 0
   \   00000004   00000000           DC32 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Select">`:
   \   00000000   53656C656374       DC8 "Select"
   \              00          
   \   00000007   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   25732A00           DC8 "%s*"

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   2E2E2E00           DC8 "..."

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   5C00               DC8 "\\"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant {4095, 0, 0}>_1`:
   \   00000000   FF0F0000           DC16 4095, 0
   \   00000004   00000000           DC32 0

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   257300             DC8 "%s"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "%s%s.url">`:
   \   00000000   257325732E75       DC8 "%s%s.url"
   \              726C00      
   \   00000009   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "*.url">`:
   \   00000000   2A2E75726C00       DC8 "*.url"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant {4095, 0, 0}>_2`:
   \   00000000   FF0F0000           DC16 4095, 0
   \   00000004   00000000           DC32 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Exit">`:
   \   00000000   4578697400         DC8 "Exit"
   \   00000005   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Settings">`:
   \   00000000   53657474696E       DC8 "Settings"
   \              677300      
   \   00000009   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "History">`:
   \   00000000   486973746F72       DC8 "History"
   \              7900        

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Bookmarks">`:
   \   00000000   426F6F6B6D61       DC8 "Bookmarks"
   \              726B7300    
   \   0000000A   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Go to">`:
   \   00000000   476F20746F00       DC8 "Go to"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Menu:">`:
   \   00000000   4D656E753A00       DC8 "Menu:"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   00                 DC8 ""

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Adress:">`:
   \   00000000   416472657373       DC8 "Adress:"
   \              3A00        

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Cnacel">`:
   \   00000000   436E6163656C       DC8 "Cnacel"
   \              00          
   \   00000007   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "History:">`:
   \   00000000   486973746F72       DC8 "History:"
   \              793A00      
   \   00000009   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 1, align-sorted
   \                     `?<Constant "Go">`:
   \   00000000   476F00             DC8 "Go"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Search:">`:
   \   00000000   536561726368       DC8 "Search:"
   \              3A00        

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Search">`:
   \   00000000   536561726368       DC8 "Search"
   \              00          
   \   00000007   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Options">`:
   \   00000000   4F7074696F6E       DC8 "Options"
   \              7300        

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Select Bookmark:">`:
   \   00000000   53656C656374       DC8 "Select Bookmark:"
   \              20426F6F6B6D
   \              61726B3A00  
   \   00000011   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Close">`:
   \   00000000   436C6F736500       DC8 "Close"
   \   00000006   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Back">`:
   \   00000000   4261636B00         DC8 "Back"
   \   00000005   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Delete">`:
   \   00000000   44656C657465       DC8 "Delete"
   \              00          
   \   00000007   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Edit">`:
   \   00000000   4564697400         DC8 "Edit"
   \   00000005   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Options:">`:
   \   00000000   4F7074696F6E       DC8 "Options:"
   \              733A00      
   \   00000009   000000             DC8 0, 0, 0

   Maximum stack usage in bytes:

     Function              CSTACK
     --------              ------
     CreateAddBookmark       132
     CreateBookmarksMenu    1148
     CreateHistoryMenu        36
     CreateInputUrl           76
     CreateMainMenu           36
     CreateSearchDialog      100
     add_bookmark_ghook       20
     add_bookmark_locret       0
     add_bookmark_onkey      328
     back                      4
     create_options_menu      52
     do_add_bookmark           4
     do_delete_bookmark        8
     do_edit_bookmark          4
     free_search_engines      16
     get_search_engines      988
     history_menu_ghook       16
     history_menu_iconhndl    24
     history_menu_onkey       16
     initMainMenuLangPack     32
     input_url_ghook          20
     input_url_locret          0
     input_url_onkey          64
     mainmenu_ghook            4
     mainmenu_keyhook          0
     mm_goto_bookmarks       136
     mm_goto_history           8
     mm_goto_url               8
     mm_options                8
     mm_quit                   8
     mm_search                 8
     patch_header              8
     patch_header_small        8
     patch_input              12
     search_ghook             24
     search_locret             0
     search_onkey            380
     selurl_menu_ghook        12
     selurl_menu_iconhndl     32
     selurl_menu_onkey        16


   Segment part sizes:

     Function/Label                 Bytes
     --------------                 -----
     patch_header                     52
     patch_input                      68
     patch_header_small               48
     add_bookmark_skt                  8
     add_bookmark_ghook               84
     add_bookmark_locret               4
     add_bookmark_onkey              372
     add_bookmark_desc                56
     CreateAddBookmark               868
     do_add_bookmark                  24
     do_edit_bookmark                 20
     do_delete_bookmark               48
     back                             16
     options_menu_HNDLS               16
     create_options_menu             116
     selurl_menu_onkey               276
     selurl_menu_ghook                64
     S_ICONS                         264
     selurl_menu_iconhndl            272
     search_skt                        8
     free_search_engines              60
     get_search_engines              224
     search_locret                     4
     search_onkey                    604
     search_ghook                    228
     CreateSearchDialog              396
     CreateBookmarksMenu             644
     history_menu_onkey              140
     history_menu_ghook              116
     history_menu_iconhndl           128
     CreateHistoryMenu               100
     input_menu_skt                    8
     input_url_ghook                  84
     input_url_locret                  4
     input_url_onkey                 200
     input_url_desc                   56
     CreateInputUrl                  452
     mm_goto_url                      44
     mm_goto_bookmarks                72
     mm_search                        44
     mm_goto_history                  44
     mm_options                       76
     mm_quit                          64
     mmenusoftkeys                    12
     mmenu_skt                         8
     main_menu_ITEMS                1040
     menusoftkeys                     12
     menu_skt                          8
     selurl_softkeys                  12
     selurl_skt                        8
     history_softkeys                 12
     history_skt                       8
     main_menu_HNDLS                  24
     mainmenu_keyhook                  8
     mainmenu_ghook                   20
     mainmenu                         44
     CreateMainMenu                  112
     initMainMenuLangPack            236
     ??DataTable4                      4
     ??DataTable7                      4
     ??DataTable8                      4
     ??DataTable10                     4
     ??DataTable17                     4
     ??DataTable21                     4
     ??DataTable24                     4
     ??DataTable26                     4
     ??DataTable27                     4
     ??DataTable28                     4
     ??DataTable30                     4
     ??DataTable31                     4
     ??DataTable38                     4
     ??DataTable39                     4
     ??DataTable40                     4
     ??DataTable41                     4
     ?<Initializer for main_menu_ITEMS>
                                    1040
     ?<Initializer for menusoftkeys>
                                      12
     ?<Initializer for menu_skt>       8
     ?<Initializer for selurl_softkeys>
                                      12
     ?<Initializer for selurl_skt>     8
     ?<Initializer for history_softkeys>
                                      12
     ?<Initializer for history_skt>    8
     ?<Constant "$resources\\folder.png">
                                      68
     ?<Constant "Bookmark...">        12
     ?<Constant "Cancel">              8
     ?<Constant "Add">                 4
     ?<Constant {4095, 0, 0}>          8
     ?<Constant "Select">              8
     ?<Constant "%s*">                 4
     ?<Constant "...">                 4
     ?<Constant "\\">                  2
     ?<Constant {4095, 0, 0}>_1        8
     ?<Constant "%s">                  3
     ?<Constant "%s%s.url">           12
     ?<Constant "*.url">               8
     ?<Constant {4095, 0, 0}>_2        8
     ?<Constant "Exit">                8
     ?<Constant "Settings">           12
     ?<Constant "History">             8
     ?<Constant "Bookmarks">          12
     ?<Constant "Go to">               8
     ?<Constant "Menu:">               8
     ?<Constant "">                    1
     ?<Constant "Adress:">             8
     ?<Constant "Cnacel">              8
     ?<Constant "History:">           12
     ?<Constant "Go">                  3
     ?<Constant "Search:">             8
     ?<Constant "Search">              8
     ?<Constant "Options">             8
     ?<Constant "Select Bookmark:">   20
     ?<Constant "Close">               8
     ?<Constant "Back">                8
     ?<Constant "Delete">              8
     ?<Constant "Edit">                8
     ?<Constant "Options:">           12
      Others                         292

 
 6 768 bytes in segment CODE
   573 bytes in segment DATA_C
 1 100 bytes in segment DATA_I
 1 100 bytes in segment DATA_ID
   264 bytes in segment DATA_Z
    24 bytes in segment INITTAB
 
 6 332 bytes of CODE  memory (+ 460 bytes shared)
 1 673 bytes of CONST memory
 1 364 bytes of DATA  memory

Errors: none
Warnings: none
