##############################################################################
#                                                                            #
# IAR ARM ANSI C/C++ Compiler V4.42A/W32 EVALUATION    14/Jan/2009  12:36:55 #
# Copyright 1999-2005 IAR Systems. All rights reserved.                      #
#                                                                            #
#    Cpu mode        =  interwork                                            #
#    Endian          =  little                                               #
#    Stack alignment =  4                                                    #
#    Source file     =  K:\Pasha\elf\SieELF\MySMSYS\smsList.c                #
#    Command line    =  K:\Pasha\elf\SieELF\MySMSYS\smsList.c -D NEWSGOLD    #
#                       -D ELKA -D LANG_EN -D NO_CS -lC                      #
#                       K:\Pasha\elf\SieELF\MySMSYS\Release_ELKA_EN\List\    #
#                       -o K:\Pasha\elf\SieELF\MySMSYS\Release_ELKA_EN\Obj\  #
#                       -s9 --no_unroll --cpu_mode arm --endian little       #
#                       --cpu ARM926EJ-S --stack_align 4 --interwork -e      #
#                       --fpu None --dlib_config "K:\Pasha\Embedded          #
#                       Workbench 4.0 Evaluation2\ARM\LIB\dl5tpainl8n.h" -I  #
#                       "K:\Pasha\Embedded Workbench 4.0                     #
#                       Evaluation2\ARM\INC\" --inline_threshold=2           #
#    List file       =  K:\Pasha\elf\SieELF\MySMSYS\Release_ELKA_EN\List\sms #
#                       List.lst                                             #
#    Object file     =  K:\Pasha\elf\SieELF\MySMSYS\Release_ELKA_EN\Obj\smsL #
#                       ist.r79                                              #
#                                                                            #
#                                                                            #
##############################################################################

K:\Pasha\elf\SieELF\MySMSYS\smsList.c
      1          #include "..\inc\swilib.h"
      2          #include "main.h"
      3          #include "sms_dat.h"
      4          #include "rect_patcher.h"
      5          #include "smsList.h"
      6          #include "edGui.h"
      7          #include "createMenu.h"
      8          #include "adrList.h"
      9          #include "language.h"
     10          
     11          #include "guiIdMan.h"
     12          
     13          #include "lgp_pic.h"
     14          #include "CodeShow.h"
     15          #include "popGui.h"
     16          #include "config_data.h"
     17          
     18          #include "CSMswaper.h"
     19          
     20          #define MENU_MAX_TXT 30
     21          
     22          
     23          typedef struct
     24          {
     25            int type;
     26            int is_tab;
     27            DLG_CSM *dlg_csm;
     28          }SML_OP; //sms list menu user pointer
     29          
     30          typedef struct
     31          {
     32          	SMS_DATA *sd;
     33          	DLG_CSM *dlg_csm;
     34          }SL_UP; //sms list option menu user pointer.
     35          
     36          //const HEADER_DESC sms_menuhdr_all={0,0,0,0,NULL,(int)LGP_ALL,LGP_NULL};
     37          //const HEADER_DESC sms_menuhdr_in_r={0,0,0,0,NULL,(int)LGP_IN_R,LGP_NULL};
     38          //const HEADER_DESC sms_menuhdr_in_n={0,0,0,0,NULL,(int)LGP_IN_N,LGP_NULL};
     39          //const HEADER_DESC sms_menuhdr_out={0,0,0,0,NULL,(int)LGP_OUT,LGP_NULL};
     40          //const HEADER_DESC sms_menuhdr_draft={0,0,0,0,NULL,(int)LGP_DRAFT,LGP_NULL};
     41          //const HEADER_DESC sms_menuhdr_in_a={0,0,0,0,NULL,(int)LGP_IN_A,LGP_NULL};
     42          
     43          //const HEADER_DESC sms_menuhdr={0,0,0,0,NULL,LGP_NULL,LGP_NULL};
     44          //const int hdr_icon[]={(int)"0:\\ZBin\\MySMSYS\\new.png",0};
     45          const HEADER_DESC sms_menuhdr={0,0,0,0,NULL,LGP_NULL,LGP_NULL};
     46          
     47          const HEADER_DESC slop_menuhdr={0,0,0,0,NULL,LGP_NULL,LGP_NULL};
     48          //------------------------------------------------------
     49          
     50          //#define SLOP_MENU_N 7
     51          //#define SLOP_MENU_N_2 (SLOP_MENU_N-1)
     52          #define SLOP_MENU_N_DAT 7
     53          #define SLOP_MENU_N_FILE (SLOP_MENU_N_DAT-1)
     54          
     55          const int slop_menusoftkeys[]={0,1,2};
     56          /*
     57          const SOFTKEY_DESC slop_menu_sk[]=
     58          {
     59            {0x0018,0x0000,(int)LGP_SELECT},
     60            {0x0001,0x0000,(int)LGP_BACK},
     61            {0x003D,0x0000,(int)LGP_DOIT_PIC}
     62          };
     63          */
     64          extern SOFTKEY_DESC ed_menu_sk[];
     65          const SOFTKEYSTAB slop_menu_skt=
     66          {
     67            ed_menu_sk,0
     68            //slop_menu_sk,0
     69          };
     70          
     71          //char slop_hdr_text[64];
     72          //const HEADER_DESC slop_menu_hdr={0,0,0,0,NULL,(int)smshdr_text,LGP_NULL};
     73          

   \                                 In segment CODE, align 4, keep-with-next
     74          void slop_menu_reply(GUI *data)
     75          {
   \                     slop_menu_reply:
   \   00000000   10402DE9           PUSH     {R4,LR}
     76          	SL_UP *su=MenuGetUserPointer(data);
   \   00000004   E00100EF           SWI      +480
   \   00000008   0040A0E1           MOV      R4,R0
     77          	GeneralFuncF1(1);
   \   0000000C   0100A0E3           MOV      R0,#+1
   \   00000010   3B0100EF           SWI      +315
     78          	createEditGUI(su->dlg_csm, su->sd, ED_REPLY, 0);
   \   00000014   001094E5           LDR      R1,[R4, #+0]
   \   00000018   040094E5           LDR      R0,[R4, #+4]
   \   0000001C   0030A0E3           MOV      R3,#+0
   \   00000020   0220A0E3           MOV      R2,#+2
   \   00000024   1040BDE8           POP      {R4,LR}          ;; Pop
   \   00000028   ........           _BF      createEditGUI,??createEditGUI??rA  ;; tailcall
     79          }
     80          

   \                                 In segment CODE, align 4, keep-with-next
     81          void slop_menu_edit(GUI *data)
     82          {
   \                     slop_menu_edit:
   \   00000000   10402DE9           PUSH     {R4,LR}
     83          	SL_UP *su=MenuGetUserPointer(data);
   \   00000004   E00100EF           SWI      +480
   \   00000008   0040A0E1           MOV      R4,R0
     84          	GeneralFuncF1(1);
   \   0000000C   0100A0E3           MOV      R0,#+1
   \   00000010   3B0100EF           SWI      +315
     85          	createEditGUI(su->dlg_csm, su->sd, ED_EDIT, 0);
   \   00000014   001094E5           LDR      R1,[R4, #+0]
   \   00000018   040094E5           LDR      R0,[R4, #+4]
   \   0000001C   0030A0E3           MOV      R3,#+0
   \   00000020   0120A0E3           MOV      R2,#+1
   \   00000024   1040BDE8           POP      {R4,LR}          ;; Pop
   \   00000028   ........           _BF      createEditGUI,??createEditGUI??rA  ;; tailcall
     86          }
     87          

   \                                 In segment CODE, align 4, keep-with-next
     88          void slop_menu_exit(GUI *data)
     89          {
   \                     slop_menu_exit:
   \   00000000   10402DE9           PUSH     {R4,LR}
     90          	SL_UP *su=MenuGetUserPointer(data);
   \   00000004   E00100EF           SWI      +480
   \   00000008   0040A0E1           MOV      R4,R0
     91          	SGUI_ID *gstop=(SGUI_ID *)(su->dlg_csm->gstop);
   \   0000000C   040094E5           LDR      R0,[R4, #+4]
   \   00000010   2C0090E5           LDR      R0,[R0, #+44]
     92          	if(gstop)
   \   00000014   000050E3           CMP      R0,#+0
   \   00000018   0400000A           BEQ      ??slop_menu_exit_0
     93          	{
     94          		GeneralFunc_flag1(gstop->id, 1);
   \   0000001C   040090E5           LDR      R0,[R0, #+4]
   \   00000020   0110A0E3           MOV      R1,#+1
   \   00000024   3D0100EF           SWI      +317
     95          		popGS(su->dlg_csm);
   \   00000028   040094E5           LDR      R0,[R4, #+4]
   \   0000002C   ........           _BLF     popGS,??popGS??rA
     96          	}
     97          	GeneralFuncF1(1);
   \                     ??slop_menu_exit_0:
   \   00000030   0100A0E3           MOV      R0,#+1
   \   00000034   3B0100EF           SWI      +315
     98          }
   \   00000038   1080BDE8           POP      {R4,PC}          ;; return
     99          

   \                                 In segment CODE, align 4, keep-with-next
    100          void slop_menu_del(GUI *data)
    101          {
   \                     slop_menu_del:
   \   00000000   10402DE9           PUSH     {R4,LR}
    102          	SL_UP *su=MenuGetUserPointer(data);
   \   00000004   E00100EF           SWI      +480
   \   00000008   0040A0E1           MOV      R4,R0
    103          	GeneralFuncF1(1);
   \   0000000C   0100A0E3           MOV      R0,#+1
   \   00000010   3B0100EF           SWI      +315
    104          	if(su->sd->isfile)
   \   00000014   000094E5           LDR      R0,[R4, #+0]
   \   00000018   141090E5           LDR      R1,[R0, #+20]
   \   0000001C   000051E3           CMP      R1,#+0
   \   00000020   0010A0E3           MOV      R1,#+0
   \   00000024   0300000A           BEQ      ??slop_menu_del_0
    105          		deleteFile(su->sd, 0);
   \   00000028   ........           _BLF     deleteFile,??deleteFile??rA
   \   0000002C   000094E5           LDR      R0,[R4, #+0]
   \   00000030   1040BDE8           POP      {R4,LR}          ;; Pop
   \   00000034   ........           _BF      delSDList,??delSDList??rA  ;; tailcall
    106          	else
    107          		deleteDat(su->sd, 0);
   \                     ??slop_menu_del_0:
   \   00000038   ........           _BLF     deleteDat,??deleteDat??rA
    108          	delSDList(su->sd);
   \   0000003C   000094E5           LDR      R0,[R4, #+0]
   \   00000040   1040BDE8           POP      {R4,LR}          ;; Pop
   \   00000044   ........           _BF      delSDList,??delSDList??rA  ;; tailcall
    109          }
    110          

   \                                 In segment CODE, align 4, keep-with-next
    111          void slop_menu_save_as_file(GUI *data)
    112          {
   \                     slop_menu_save_as_file:
   \   00000000   10402DE9           PUSH     {R4,LR}
    113            SL_UP *su=MenuGetUserPointer(data);
   \   00000004   E00100EF           SWI      +480
   \   00000008   0040A0E1           MOV      R4,R0
    114            GeneralFuncF1(1);
   \   0000000C   0100A0E3           MOV      R0,#+1
   \   00000010   3B0100EF           SWI      +315
    115            if((!(su->sd->isfile))&&((su->sd->id)>0))
   \   00000014   000094E5           LDR      R0,[R4, #+0]
   \   00000018   141090E5           LDR      R1,[R0, #+20]
   \   0000001C   000051E3           CMP      R1,#+0
   \   00000020   1080BD18           POPNE    {R4,PC}
   \   00000024   0C1090E5           LDR      R1,[R0, #+12]
   \   00000028   010051E3           CMP      R1,#+1
   \   0000002C   1080BDB8           POPLT    {R4,PC}
    116            {
    117              if(saveFile(su->sd->SMS_TEXT, su->sd->Number, su->sd, su->sd->type, 2))
   \   00000030   0210A0E3           MOV      R1,#+2
   \   00000034   02002DE9           PUSH     {R1}
   \   00000038   083090E5           LDR      R3,[R0, #+8]
   \   0000003C   0020A0E1           MOV      R2,R0
   \   00000040   241080E2           ADD      R1,R0,#+36
   \   00000044   640090E5           LDR      R0,[R0, #+100]
   \   00000048   ........           _BLF     saveFile,??saveFile??rA
   \   0000004C   000050E3           CMP      R0,#+0
   \   00000050   04D08DE2           ADD      SP,SP,#+4
   \   00000054   1080BD08           POPEQ    {R4,PC}
    118              {
    119                deleteDat(su->sd, 0);
   \   00000058   000094E5           LDR      R0,[R4, #+0]
   \   0000005C   0010A0E3           MOV      R1,#+0
   \   00000060   ........           _BLF     deleteDat,??deleteDat??rA
    120                delSDList(su->sd);
   \   00000064   000094E5           LDR      R0,[R4, #+0]
   \   00000068   ........           _BLF     delSDList,??delSDList??rA
    121              }
    122            }
    123          }
   \   0000006C   1080BDE8           POP      {R4,PC}          ;; return
    124          

   \                                 In segment CODE, align 4, keep-with-next
    125          void slop_menu_export_txt(GUI *data)
    126          {
   \                     slop_menu_export_txt:
   \   00000000   10402DE9           PUSH     {R4,LR}
    127          	SL_UP *su=MenuGetUserPointer(data);
   \   00000004   E00100EF           SWI      +480
   \   00000008   0040A0E1           MOV      R4,R0
    128          	GeneralFuncF1(1);
   \   0000000C   0100A0E3           MOV      R0,#+1
   \   00000010   3B0100EF           SWI      +315
    129          	if(su->sd)
   \   00000014   000094E5           LDR      R0,[R4, #+0]
   \   00000018   000050E3           CMP      R0,#+0
   \   0000001C   1080BD08           POPEQ    {R4,PC}
    130          		ShowFileErrCode(ExportOneToTxt(su->sd));
   \   00000020   ........           _BLF     ExportOneToTxt,??ExportOneToTxt??rA
   \   00000024   ........           _BLF     ShowFileErrCode,??ShowFileErrCode??rA
    131          }
   \   00000028   1080BDE8           POP      {R4,PC}          ;; return
    132          

   \                                 In segment CODE, align 4, keep-with-next
    133          void slop_menu_move_to_archive(GUI *data)
    134          {
   \                     slop_menu_move_to_archive:
   \   00000000   10402DE9           PUSH     {R4,LR}
    135          	SL_UP *su=MenuGetUserPointer(data);
   \   00000004   E00100EF           SWI      +480
   \   00000008   0040A0E1           MOV      R4,R0
    136          	GeneralFuncF1(1);
   \   0000000C   0100A0E3           MOV      R0,#+1
   \   00000010   3B0100EF           SWI      +315
    137          	if(su->sd)
   \   00000014   000094E5           LDR      R0,[R4, #+0]
   \   00000018   000050E3           CMP      R0,#+0
   \   0000001C   1080BD08           POPEQ    {R4,PC}
    138          	{
    139          		int k=MoveToArchive(su->sd);
   \   00000020   ........           _BLF     MoveToArchive,??MoveToArchive??rA
    140          		if(k==1)
   \   00000024   010050E3           CMP      R0,#+1
   \   00000028   0700001A           BNE      ??slop_menu_move_to_archive_0
    141          		{
    142          			if(!su->sd->isfile) deleteDat(su->sd, 0);
   \   0000002C   000094E5           LDR      R0,[R4, #+0]
   \   00000030   141090E5           LDR      R1,[R0, #+20]
   \   00000034   000051E3           CMP      R1,#+0
   \   00000038   0000001A           BNE      ??slop_menu_move_to_archive_1
   \   0000003C   ........           _BLF     deleteDat,??deleteDat??rA
    143          			delSDList(su->sd);
   \                     ??slop_menu_move_to_archive_1:
   \   00000040   000094E5           LDR      R0,[R4, #+0]
   \   00000044   1040BDE8           POP      {R4,LR}          ;; Pop
   \   00000048   ........           _BF      delSDList,??delSDList??rA  ;; tailcall
    144          		}
    145          		else
    146          			ShowFileErrCode(k);
   \                     ??slop_menu_move_to_archive_0:
   \   0000004C   1040BDE8           POP      {R4,LR}          ;; Pop
   \   00000050   ........           _BF      ShowFileErrCode,??ShowFileErrCode??rA  ;; tailcall
    147          	}
    148          }
    149          

   \                                 In segment CODE, align 4, keep-with-next
    150          void slop_menu_send(GUI *data)
    151          {
   \                     slop_menu_send:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
    152          	char *num;
    153          	WSHDR *wst;
    154          	SL_UP *su=MenuGetUserPointer(data);
   \   00000004   E00100EF           SWI      +480
   \   00000008   0040A0E1           MOV      R4,R0
    155          	GeneralFuncF1(1);
   \   0000000C   0100A0E3           MOV      R0,#+1
   \   00000010   3B0100EF           SWI      +315
    156          	if(su->sd)
   \   00000014   000094E5           LDR      R0,[R4, #+0]
   \   00000018   000050E3           CMP      R0,#+0
   \   0000001C   F080BD08           POPEQ    {R4-R7,PC}
    157          	{
    158          		num=su->sd->Number;
    159          		wst=su->sd->SMS_TEXT;
   \   00000020   646090E5           LDR      R6,[R0, #+100]
   \   00000024   245080E2           ADD      R5,R0,#+36
    160          		if(strlen(num))
   \   00000028   0500A0E1           MOV      R0,R5
   \   0000002C   1B0000EF           SWI      +27
   \   00000030   000050E3           CMP      R0,#+0
   \   00000034   F080BD08           POPEQ    {R4-R7,PC}
    161          		{
    162          			WSHDR *ws=AllocWS(wst->wsbody[0]);
   \   00000038   000096E5           LDR      R0,[R6, #+0]
   \   0000003C   B000D0E1           LDRH     R0,[R0, #+0]
   \   00000040   250100EF           SWI      +293
   \   00000044   0070A0E1           MOV      R7,R0
    163          			wstrcpy(ws, wst);
   \   00000048   0610A0E1           MOV      R1,R6
   \   0000004C   1F0100EF           SWI      +287
    164          			SNEDSMS_CSM_ID=SendSMS(ws, num, MMI_CEPID, MSG_SMS_RX-1, 6);
   \   00000050   0600A0E3           MOV      R0,#+6
   \   00000054   01002DE9           PUSH     {R0}
   \   00000058   0230A0E3           MOV      R3,#+2
   \   0000005C   583C83E3           ORR      R3,R3,#0x5800
   \   00000060   0920A0E3           MOV      R2,#+9
   \   00000064   422C82E3           ORR      R2,R2,#0x4200
   \   00000068   0510A0E1           MOV      R1,R5
   \   0000006C   0700A0E1           MOV      R0,R7
   \   00000070   DA0100EF           SWI      +474
   \   00000074   68109FE5           LDR      R1,??slop_menu_send_0  ;; SNEDSMS_CSM_ID
   \   00000078   000081E5           STR      R0,[R1, #+0]
    165          			if(CFG_ENA_SAVE_SENT) saveFile(wst, num, su->sd, TYPE_OUT, 2);
   \   0000007C   64009FE5           LDR      R0,??slop_menu_send_0+0x4  ;; CFG_ENA_SAVE_SENT
   \   00000080   000090E5           LDR      R0,[R0, #+0]
   \   00000084   04D08DE2           ADD      SP,SP,#+4
   \   00000088   000050E3           CMP      R0,#+0
   \   0000008C   0700000A           BEQ      ??slop_menu_send_1
   \   00000090   0200A0E3           MOV      R0,#+2
   \   00000094   01002DE9           PUSH     {R0}
   \   00000098   002094E5           LDR      R2,[R4, #+0]
   \   0000009C   0130A0E3           MOV      R3,#+1
   \   000000A0   0510A0E1           MOV      R1,R5
   \   000000A4   0600A0E1           MOV      R0,R6
   \   000000A8   ........           _BLF     saveFile,??saveFile??rA
   \   000000AC   04D08DE2           ADD      SP,SP,#+4
    166          			if(!su->sd->isfile) deleteDat(su->sd, 0);
   \                     ??slop_menu_send_1:
   \   000000B0   000094E5           LDR      R0,[R4, #+0]
   \   000000B4   141090E5           LDR      R1,[R0, #+20]
   \   000000B8   000051E3           CMP      R1,#+0
   \   000000BC   0010A0E3           MOV      R1,#+0
   \   000000C0   0100001A           BNE      ??slop_menu_send_2
   \   000000C4   ........           _BLF     deleteDat,??deleteDat??rA
   \   000000C8   000000EA           B        ??slop_menu_send_3
    167          			else deleteFile(su->sd, 0);
   \                     ??slop_menu_send_2:
   \   000000CC   ........           _BLF     deleteFile,??deleteFile??rA
    168          			delSDList(su->sd);
   \                     ??slop_menu_send_3:
   \   000000D0   000094E5           LDR      R0,[R4, #+0]
   \   000000D4   ........           _BLF     delSDList,??delSDList??rA
    169          			DoSendBackGround(su->dlg_csm);
   \   000000D8   040094E5           LDR      R0,[R4, #+4]
   \   000000DC   ........           _BLF     DoSendBackGround,??DoSendBackGround??rA
    170          			//readAllSMS();
    171          		}
    172          	}
    173          }
   \   000000E0   F080BDE8           POP      {R4-R7,PC}       ;; return
   \                     ??slop_menu_send_0:
   \   000000E4   ........           DC32     SNEDSMS_CSM_ID
   \   000000E8   ........           DC32     CFG_ENA_SAVE_SENT
    174          
    175          const MENUPROCS_DESC slop_procs_dat[SLOP_MENU_N_DAT]=
    176          {
    177          	slop_menu_reply,
    178          	slop_menu_edit,
    179          	slop_menu_del,
    180          	slop_menu_save_as_file,
    181          	slop_menu_export_txt,
    182          	slop_menu_move_to_archive,
    183          	slop_menu_exit,
    184          };
    185          
    186          int slop_lgp_dat[SLOP_MENU_N_DAT]=
    187          {
    188          	(int)LGP_NULL,
    189          	(int)LGP_NULL,
    190          	(int)LGP_NULL,
    191          	(int)LGP_NULL,
    192          	(int)LGP_NULL,
    193          	(int)LGP_NULL,
    194          	(int)LGP_NULL,
    195          };
    196          
    197          const MENUPROCS_DESC slop_procs_file[SLOP_MENU_N_FILE]=
    198          {
    199          	slop_menu_reply,
    200          	slop_menu_edit,
    201          	slop_menu_del,
    202          	slop_menu_export_txt,
    203          	slop_menu_move_to_archive,
    204          	slop_menu_exit,
    205          };
    206          
    207          int slop_lgp_file[SLOP_MENU_N_FILE]=
    208          {
    209          	(int)LGP_NULL,
    210          	(int)LGP_NULL,
    211          	(int)LGP_NULL,
    212          	(int)LGP_NULL,
    213          	(int)LGP_NULL,
    214          	(int)LGP_NULL,
    215          };
    216          

   \                                 In segment CODE, align 4, keep-with-next
    217          void slop_menu_ghook(void *data, int cmd)
    218          {
   \                     slop_menu_ghook:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
   \   00000004   0040A0E1           MOV      R4,R0
    219            if(cmd==3)
   \   00000008   030051E3           CMP      R1,#+3
   \   0000000C   0200001A           BNE      ??slop_menu_ghook_0
    220            {
    221              SL_UP *su=MenuGetUserPointer(data);
   \   00000010   E00100EF           SWI      +480
    222              mfree(su);
   \   00000014   150000EF           SWI      +21
   \   00000018   F080BDE8           POP      {R4-R7,PC}
    223            }
    224            if(cmd==2) //create
   \                     ??slop_menu_ghook_0:
   \   0000001C   020051E3           CMP      R1,#+2
   \   00000020   F080BD18           POPNE    {R4-R7,PC}
    225            {
    226              WSHDR *hdr_t=AllocWS(32);
   \   00000024   2000A0E3           MOV      R0,#+32
   \   00000028   250100EF           SWI      +293
    227              wsprintf(hdr_t, PERCENT_T, lgp.LGP_OPTIONS);
   \   0000002C   ........           LDR      R1,??DataTable4  ;; PERCENT_T
   \   00000030   0050A0E1           MOV      R5,R0
   \   00000034   34009FE5           LDR      R0,??slop_menu_ghook_1  ;; lgp + 52
   \   00000038   002090E5           LDR      R2,[R0, #+0]
   \   0000003C   0500A0E1           MOV      R0,R5
   \   00000040   240100EF           SWI      +292
    228              SetHeaderText(GetHeaderPointer(data), hdr_t, malloc_adr(), mfree_adr());
   \   00000044   158000EF           SWI      +32789
   \   00000048   0060A0E1           MOV      R6,R0
   \   0000004C   148000EF           SWI      +32788
   \   00000050   0070A0E1           MOV      R7,R0
   \   00000054   0400A0E1           MOV      R0,R4
   \   00000058   AE0200EF           SWI      +686
   \   0000005C   0630A0E1           MOV      R3,R6
   \   00000060   0720A0E1           MOV      R2,R7
   \   00000064   0510A0E1           MOV      R1,R5
   \   00000068   AF0200EF           SWI      +687
    229            }
    230          }
   \   0000006C   F080BDE8           POP      {R4-R7,PC}       ;; return
   \                     ??slop_menu_ghook_1:
   \   00000070   ........           DC32     lgp + 52
    231          
    232          #pragma swi_number=0x44
    233          __swi __arm void TempLightOn(int x, int y);

   \                                 In segment CODE, align 4, keep-with-next
    234          int slop_menu_onkey(void *data, GUI_MSG *msg)
    235          {
   \                     slop_menu_onkey:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   \   00000008   0150A0E1           MOV      R5,R1
    236            int n;
    237            SL_UP *su;
    238            if(!IsUnlocked()) TempLightOn(3, 0x7FFF);
   \   0000000C   430000EF           SWI      +67
   \   00000010   000050E3           CMP      R0,#+0
   \   00000014   0300001A           BNE      ??slop_menu_onkey_0
   \   00000018   FF10A0E3           MOV      R1,#+255
   \   0000001C   7F1C81E3           ORR      R1,R1,#0x7F00
   \   00000020   0300A0E3           MOV      R0,#+3
   \   00000024   440000EF           SWI      +68
    239            if(msg->keys==0x1)
   \                     ??slop_menu_onkey_0:
   \   00000028   F200D5E1           LDRSH    R0,[R5, #+2]
   \   0000002C   010050E3           CMP      R0,#+1
    240            {
    241              return 1;
   \   00000030   3080BD08           POPEQ    {R4,R5,PC}
    242            }
    243            if((msg->keys==0x18)||(msg->keys==0x3D))
   \   00000034   180050E3           CMP      R0,#+24
   \   00000038   3D005013           CMPNE    R0,#+61
   \   0000003C   2000001A           BNE      ??slop_menu_onkey_1
    244            {
    245              n=GetCurMenuItem(data);
   \   00000040   0400A0E1           MOV      R0,R4
   \   00000044   8F0100EF           SWI      +399
   \   00000048   0050A0E1           MOV      R5,R0
    246            DO_PROC:
    247              su=MenuGetUserPointer(data);
   \                     ??slop_menu_onkey_2:
   \   0000004C   0400A0E1           MOV      R0,R4
   \   00000050   E00100EF           SWI      +480
    248              if(!su->sd)
   \   00000054   000090E5           LDR      R0,[R0, #+0]
   \   00000058   000050E3           CMP      R0,#+0
   \   0000005C   1600000A           BEQ      ??slop_menu_onkey_3
    249                return 1;
    250              if(n==0 && su->sd->type==TYPE_DRAFT)
   \   00000060   000055E3           CMP      R5,#+0
   \   00000064   08109005           LDREQ    R1,[R0, #+8]
   \   00000068   04005103           CMPEQ    R1,#+4
   \   0000006C   0300001A           BNE      ??slop_menu_onkey_4
    251              {
    252                slop_menu_send(data);
   \   00000070   0400A0E1           MOV      R0,R4
   \   00000074   ........           BL       slop_menu_send
    253                return 1;
   \   00000078   0100A0E3           MOV      R0,#+1
   \   0000007C   3080BDE8           POP      {R4,R5,PC}
    254              }
    255              if(su->sd->isfile)
   \                     ??slop_menu_onkey_4:
   \   00000080   140090E5           LDR      R0,[R0, #+20]
   \   00000084   70109FE5           LDR      R1,??slop_menu_onkey_5  ;; slop_procs_dat
   \   00000088   000050E3           CMP      R0,#+0
   \   0000008C   0500000A           BEQ      ??slop_menu_onkey_6
    256              {
    257                if(n>=SLOP_MENU_N_FILE)
   \   00000090   060055E3           CMP      R5,#+6
   \   00000094   160000AA           BGE      ??slop_menu_onkey_7
    258          	return 0;
    259                slop_procs_file[n](data);
   \   00000098   0400A0E1           MOV      R0,R4
   \   0000009C   051181E0           ADD      R1,R1,R5, LSL #+2
   \   000000A0   1C1091E5           LDR      R1,[R1, #+28]
   \   000000A4   030000EA           B        ??slop_menu_onkey_8
    260                return 1;
    261              }
    262              else
    263              {
    264                if(n>=SLOP_MENU_N_DAT)
   \                     ??slop_menu_onkey_6:
   \   000000A8   070055E3           CMP      R5,#+7
    265          	return 0;
   \   000000AC   3080BDA8           POPGE    {R4,R5,PC}
    266                slop_procs_dat[n](data);
   \   000000B0   051191E7           LDR      R1,[R1, +R5, LSL #+2]
   \   000000B4   0400A0E1           MOV      R0,R4
   \                     ??slop_menu_onkey_8:
   \   000000B8   31FF2FE1           BLX      R1
    267                return 1;
   \                     ??slop_menu_onkey_3:
   \   000000BC   0100A0E3           MOV      R0,#+1
   \   000000C0   3080BDE8           POP      {R4,R5,PC}
    268              }
    269            }
    270            if(msg->gbsmsg->msg==KEY_DOWN)
   \                     ??slop_menu_onkey_1:
   \   000000C4   040095E5           LDR      R0,[R5, #+4]
   \   000000C8   9320A0E3           MOV      R2,#+147
   \   000000CC   041090E5           LDR      R1,[R0, #+4]
   \   000000D0   402F82E3           ORR      R2,R2,#0x100
   \   000000D4   020051E1           CMP      R1,R2
   \   000000D8   0500001A           BNE      ??slop_menu_onkey_7
    271            {
    272              n=msg->gbsmsg->submess;
   \   000000DC   085090E5           LDR      R5,[R0, #+8]
    273              if(n>='1' && n<='9')
   \   000000E0   310055E3           CMP      R5,#+49
   \   000000E4   020000BA           BLT      ??slop_menu_onkey_7
   \   000000E8   3A0055E3           CMP      R5,#+58
    274              {
    275                n-='1';
   \   000000EC   315045B2           SUBLT    R5,R5,#+49
    276                goto DO_PROC;
   \   000000F0   D5FFFFBA           BLT      ??slop_menu_onkey_2
    277              }
    278            }
    279            return 0;
   \                     ??slop_menu_onkey_7:
   \   000000F4   0000A0E3           MOV      R0,#+0
   \   000000F8   3080BDE8           POP      {R4,R5,PC}       ;; return
   \                     ??slop_menu_onkey_5:
   \   000000FC   ........           DC32     slop_procs_dat
    280          }

   \                                 In segment DATA_I, align 4, align-sorted
   \                     slop_lgp_dat:
   \   00000000                      DS8 28
   \   0000001C                      REQUIRE `?<Initializer for slop_lgp_dat>`
   \                     slop_lgp_file:
   \   0000001C                      DS8 24
   \   00000034                      REQUIRE `?<Initializer for slop_lgp_file>`
    281          
    282          #ifndef WITHOUT_OP_ICON
    283          
    284          #ifdef NEWSGOLD
    285          #ifdef ELKA
    286          int slop_item_icons[]={0x538,0};
   \                     slop_item_icons:
   \   00000034                      DS8 8
   \   0000003C                      REQUIRE `?<Initializer for slop_item_icons>`
    287          #else
    288          #ifdef S68
    289          int slop_item_icons[]={0x576,0};
    290          #else
    291          int slop_item_icons[]={0x564,0};
    292          #endif
    293          #endif
    294          #endif
    295          
    296          #endif
    297          

   \                                 In segment CODE, align 4, keep-with-next
    298          void slop_menu_itemhndl(void *data, int curitem, void *user_pointer)
    299          {
   \                     slop_menu_itemhndl:
   \   00000000   F0412DE9           PUSH     {R4-R8,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   \   00000008   0150A0E1           MOV      R5,R1
    300            SL_UP *su=MenuGetUserPointer(data);
   \   0000000C   E00100EF           SWI      +480
   \   00000010   0080A0E1           MOV      R8,R0
    301            void *item=AllocMenuItem(data);
   \   00000014   0400A0E1           MOV      R0,R4
   \   00000018   970100EF           SWI      +407
   \   0000001C   0060A0E1           MOV      R6,R0
    302            WSHDR *ws=AllocMenuWS(data, 150);
   \   00000020   9610A0E3           MOV      R1,#+150
   \   00000024   0400A0E1           MOV      R0,R4
   \   00000028   980100EF           SWI      +408
    303            if(su->sd)
   \   0000002C   ........           LDR      R2,??DataTable3  ;; lgp
   \   00000030   ........           LDR      R1,??DataTable4  ;; PERCENT_T
   \   00000034   0070A0E1           MOV      R7,R0
   \   00000038   000098E5           LDR      R0,[R8, #+0]
   \   0000003C   88809FE5           LDR      R8,??slop_menu_itemhndl_0  ;; slop_lgp_dat
   \   00000040   000050E3           CMP      R0,#+0
   \   00000044   0F00000A           BEQ      ??slop_menu_itemhndl_1
    304            {
    305              if(curitem==0 && su->sd->type==TYPE_DRAFT)
   \   00000048   000055E3           CMP      R5,#+0
   \   0000004C   08309005           LDREQ    R3,[R0, #+8]
   \   00000050   04005303           CMPEQ    R3,#+4
    306              {
    307                wsprintf(ws, PERCENT_T, lgp.LGP_SEND);
   \   00000054   44209205           LDREQ    R2,[R2, #+68]
   \   00000058   0B00000A           BEQ      ??slop_menu_itemhndl_2
    308                goto GO_P;
    309              }
    310              if(su->sd->isfile)
   \   0000005C   140090E5           LDR      R0,[R0, #+20]
   \   00000060   000050E3           CMP      R0,#+0
   \   00000064   0400000A           BEQ      ??slop_menu_itemhndl_3
    311              {
    312                if(curitem>=SLOP_MENU_N_FILE)
   \   00000068   060055E3           CMP      R5,#+6
   \   0000006C   050000AA           BGE      ??slop_menu_itemhndl_1
    313          	goto SLOP_ERR;
    314                wsprintf(ws, PERCENT_T, slop_lgp_file[curitem]);
   \   00000070   050188E0           ADD      R0,R8,R5, LSL #+2
   \   00000074   1C2090E5           LDR      R2,[R0, #+28]
   \   00000078   030000EA           B        ??slop_menu_itemhndl_2
    315              }
    316              else
    317              {
    318                if(curitem>=SLOP_MENU_N_DAT)
   \                     ??slop_menu_itemhndl_3:
   \   0000007C   070055E3           CMP      R5,#+7
    319          	goto SLOP_ERR;
    320                wsprintf(ws, PERCENT_T, slop_lgp_dat[curitem]);
   \   00000080   052198B7           LDRLT    R2,[R8, +R5, LSL #+2]
   \   00000084   000000BA           BLT      ??slop_menu_itemhndl_2
    321              }
    322            }
    323            else
    324          SLOP_ERR:
    325            wsprintf(ws, PERCENT_T, lgp.LGP_ERR);
   \                     ??slop_menu_itemhndl_1:
   \   00000088   0C2092E5           LDR      R2,[R2, #+12]
   \                     ??slop_menu_itemhndl_2:
   \   0000008C   0700A0E1           MOV      R0,R7
   \   00000090   240100EF           SWI      +292
    326          GO_P:
    327          #ifndef WITHOUT_OP_ICON
    328            SetMenuItemIconArray(data, item, slop_item_icons);
   \   00000094   342088E2           ADD      R2,R8,#+52
   \   00000098   0610A0E1           MOV      R1,R6
   \   0000009C   0400A0E1           MOV      R0,R4
   \   000000A0   990100EF           SWI      +409
    329            SetMenuItemIcon(data, curitem, 0);
   \   000000A4   0020A0E3           MOV      R2,#+0
   \   000000A8   0510A0E1           MOV      R1,R5
   \   000000AC   0400A0E1           MOV      R0,R4
   \   000000B0   950100EF           SWI      +405
    330          #endif
    331            SetMenuItemText(data, item, ws, curitem);
   \   000000B4   0530A0E1           MOV      R3,R5
   \   000000B8   0720A0E1           MOV      R2,R7
   \   000000BC   0610A0E1           MOV      R1,R6
   \   000000C0   0400A0E1           MOV      R0,R4
   \   000000C4   9A0100EF           SWI      +410
    332          }
   \   000000C8   F081BDE8           POP      {R4-R8,PC}       ;; return
   \                     ??slop_menu_itemhndl_0:
   \   000000CC   ........           DC32     slop_lgp_dat
    333          
    334          const MENU_DESC slop_menu=
    335          {
    336            8,slop_menu_onkey,slop_menu_ghook,NULL,
    337            slop_menusoftkeys,
    338            &slop_menu_skt,
    339          #ifdef WITHOUT_OP_ICON
    340            0x10,
    341          #else
    342            0x11,//Right align
    343          #endif
    344            slop_menu_itemhndl,
    345            0,//menuitems,
    346            0,//menuprocs,
    347            0
    348          };

   \                                 In segment CODE, align 4, keep-with-next
    349          int CreateslOpMenu(DLG_CSM *dlg_csm, SMS_DATA *sd, int type)
    350          {
   \                     CreateslOpMenu:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
   \   00000004   0140A0E1           MOV      R4,R1
   \   00000008   0060A0E1           MOV      R6,R0
    351          	int item_n;
    352          	SL_UP *su=malloc(sizeof(SL_UP));
   \   0000000C   0800A0E3           MOV      R0,#+8
   \   00000010   140000EF           SWI      +20
   \   00000014   0050A0E1           MOV      R5,R0
    353          	su->dlg_csm=dlg_csm;
   \   00000018   046085E5           STR      R6,[R5, #+4]
    354          	su->sd=sd;
    355          
    356          	//patch_header(&sms_menuhdr);
    357          	patch_option_header(&slop_menuhdr);
   \   0000001C   60609FE5           LDR      R6,??CreateslOpMenu_0  ;; slop_menuhdr
   \   00000020   004085E5           STR      R4,[R5, #+0]
   \   00000024   0000A0E3           MOV      R0,#+0
   \   00000028   B000C6E1           STRH     R0,[R6, #+0]
   \   0000002C   8A8100EF           SWI      +33162
   \   00000030   180080E2           ADD      R0,R0,#+24
   \   00000034   B200C6E1           STRH     R0,[R6, #+2]
   \   00000038   888100EF           SWI      +33160
   \   0000003C   010040E2           SUB      R0,R0,#+1
   \   00000040   B400C6E1           STRH     R0,[R6, #+4]
   \   00000044   8A8100EF           SWI      +33162
   \   00000048   0070A0E1           MOV      R7,R0
   \   0000004C   8A8100EF           SWI      +33162
   \   00000050   070080E0           ADD      R0,R0,R7
   \   00000054   160080E2           ADD      R0,R0,#+22
   \   00000058   B600C6E1           STRH     R0,[R6, #+6]
    358          	if(sd->isfile==1)
   \   0000005C   140094E5           LDR      R0,[R4, #+20]
    359          		item_n=SLOP_MENU_N_FILE;
    360          	else
    361          		item_n=SLOP_MENU_N_DAT;
    362          	return (CreateSLMenu_30or2(&slop_menu,&slop_menuhdr,0,item_n, su));
   \   00000060   20002DE9           PUSH     {R5}
   \   00000064   010050E3           CMP      R0,#+1
   \   00000068   0630A003           MOVEQ    R3,#+6
   \   0000006C   0730A013           MOVNE    R3,#+7
   \   00000070   0020A0E3           MOV      R2,#+0
   \   00000074   0610A0E1           MOV      R1,R6
   \   00000078   140086E2           ADD      R0,R6,#+20
   \   0000007C   ........           _BLF     CreateSLMenu_30or2,??CreateSLMenu_30or2??rA
   \   00000080   F280BDE8           POP      {R1,R4-R7,PC}    ;; return
   \                     ??CreateslOpMenu_0:
   \   00000084   ........           DC32     slop_menuhdr
    363          //	if(!sd)
    364          //		return (CreateSLMenu(&slop_menu_3,&sms_menuhdr,0, 1, su));
    365          //	if(sd->isfile==1)
    366          //		return (CreateSLMenu(&slop_menu_2,&sms_menuhdr,0,SLOP_MENU_N_FILE, su));
    367          //	else
    368          //		return (CreateSLMenu(&slop_menu,&sms_menuhdr,0,SLOP_MENU_N_DAT, su));
    369          }
    370          
    371          //------------------------------------------------------
    372          
    373          const int sms_menusoftkeys[]={0,1,2};
    374          

   \                                 In segment DATA_I, align 4, align-sorted
    375          SOFTKEY_DESC sms_menu_sk[]=
   \                     sms_menu_sk:
   \   00000000                      DS8 24
   \   00000018                      REQUIRE `?<Initializer for sms_menu_sk>`
    376          {
    377            {0x0018,0x0000,(int)LGP_NULL},
    378            {0x0001,0x0000,(int)LGP_NULL},
    379            {0x003D,0x0000,(int)LGP_DOIT_PIC}
    380          };
    381          
    382          const SOFTKEYSTAB sms_menu_skt=
    383          {
    384            sms_menu_sk,0
    385          };
    386          

   \                                 In segment CODE, align 4, keep-with-next
    387          int sms_menu_onkey(void *data, GUI_MSG *msg)
    388          {
   \                     sms_menu_onkey:
   \   00000000   F0412DE9           PUSH     {R4-R8,LR}
   \   00000004   0050A0E1           MOV      R5,R0
   \   00000008   0180A0E1           MOV      R8,R1
    389            SML_OP *so=MenuGetUserPointer(data);
   \   0000000C   E00100EF           SWI      +480
   \   00000010   0060A0E1           MOV      R6,R0
    390            SMS_DATA *sd=getSMSDataByType(GetCurMenuItem(data), so->type);
   \   00000014   0500A0E1           MOV      R0,R5
   \   00000018   8F0100EF           SWI      +399
   \   0000001C   001096E5           LDR      R1,[R6, #+0]
   \   00000020   ........           _BLF     getSMSDataByType,??getSMSDataByType??rA
   \   00000024   0040A0E1           MOV      R4,R0
    391            int n=GetMenuItemCount(data);
   \   00000028   0500A0E1           MOV      R0,R5
   \   0000002C   A80200EF           SWI      +680
   \   00000030   0070A0E1           MOV      R7,R0
    392          	
    393            if(!IsUnlocked())
   \   00000034   430000EF           SWI      +67
   \   00000038   000050E3           CMP      R0,#+0
   \   0000003C   0300001A           BNE      ??sms_menu_onkey_0
    394              TempLightOn(3, 0x7FFF);
   \   00000040   FF10A0E3           MOV      R1,#+255
   \   00000044   7F1C81E3           ORR      R1,R1,#0x7F00
   \   00000048   0300A0E3           MOV      R0,#+3
   \   0000004C   440000EF           SWI      +68
    395          
    396            if(msg->keys==0x05)
   \                     ??sms_menu_onkey_0:
   \   00000050   F210D8E1           LDRSH    R1,[R8, #+2]
   \   00000054   080096E5           LDR      R0,[R6, #+8]
   \   00000058   050051E3           CMP      R1,#+5
   \   0000005C   1C00001A           BNE      ??sms_menu_onkey_1
    397            {
    398              if(n) createEditGUI(so->dlg_csm, sd, (sd->type==TYPE_DRAFT)?ED_EDIT:ED_REPLY, 0);
   \   00000060   000057E3           CMP      R7,#+0
   \   00000064   0600000A           BEQ      ??sms_menu_onkey_2
   \   00000068   081094E5           LDR      R1,[R4, #+8]
   \   0000006C   0030A0E3           MOV      R3,#+0
   \   00000070   040051E3           CMP      R1,#+4
   \   00000074   0120A003           MOVEQ    R2,#+1
   \   00000078   0220A013           MOVNE    R2,#+2
   \                     ??sms_menu_onkey_3:
   \   0000007C   0410A0E1           MOV      R1,R4
   \   00000080   ........           _BLF     createEditGUI,??createEditGUI??rA
    399            }
    400            else if((msg->keys==0x18))//||(msg->keys==0x3D))
    401            {
    402              //if(!n)
    403              //	CreateslOpMenu(so->dlg_csm, 0, so->type);
    404              //else
    405              if(n) CreateslOpMenu(so->dlg_csm, sd, so->type);
    406              else return 1;
    407            }
    408            else if(msg->keys==0x3D)
    409            {
    410              if(n) createEditGUI(so->dlg_csm, sd, ED_VIEW, so->type);
    411              else return 1;
    412            }
    413            else if(msg->keys==0x1)
    414            {
    415              popGS(so->dlg_csm);
    416              return 1;
    417            }
    418            if((msg->gbsmsg->msg==KEY_DOWN)&&(n>0)&&(sd))
   \                     ??sms_menu_onkey_2:
   \   00000084   040098E5           LDR      R0,[R8, #+4]
   \   00000088   9320A0E3           MOV      R2,#+147
   \   0000008C   041090E5           LDR      R1,[R0, #+4]
   \   00000090   402F82E3           ORR      R2,R2,#0x100
   \   00000094   020051E1           CMP      R1,R2
   \   00000098   7B00001A           BNE      ??sms_menu_onkey_4
   \   0000009C   010057E3           CMP      R7,#+1
   \   000000A0   790000BA           BLT      ??sms_menu_onkey_4
   \   000000A4   000054E3           CMP      R4,#+0
   \   000000A8   7700000A           BEQ      ??sms_menu_onkey_4
    419            {
    420              int i=msg->gbsmsg->submess;
   \   000000AC   080090E5           LDR      R0,[R0, #+8]
    421              if((i=='7')) //key 7 for delete
   \   000000B0   141094E5           LDR      R1,[R4, #+20]
   \   000000B4   370050E3           CMP      R0,#+55
   \   000000B8   1F00001A           BNE      ??sms_menu_onkey_5
    422              {
    423                if(sd->isfile)
   \   000000BC   000051E3           CMP      R1,#+0
   \   000000C0   0010A0E3           MOV      R1,#+0
   \   000000C4   0400A0E1           MOV      R0,R4
   \   000000C8   1500000A           BEQ      ??sms_menu_onkey_6
    424          	deleteFile(sd, 0);
   \   000000CC   ........           _BLF     deleteFile,??deleteFile??rA
   \   000000D0   140000EA           B        ??sms_menu_onkey_7
   \                     ??sms_menu_onkey_1:
   \   000000D4   003096E5           LDR      R3,[R6, #+0]
   \   000000D8   180051E3           CMP      R1,#+24
   \   000000DC   0500001A           BNE      ??sms_menu_onkey_8
   \   000000E0   000057E3           CMP      R7,#+0
   \   000000E4   0C00000A           BEQ      ??sms_menu_onkey_9
   \   000000E8   0320A0E1           MOV      R2,R3
   \   000000EC   0410A0E1           MOV      R1,R4
   \   000000F0   ........           BL       CreateslOpMenu
   \   000000F4   E2FFFFEA           B        ??sms_menu_onkey_2
   \                     ??sms_menu_onkey_8:
   \   000000F8   3D0051E3           CMP      R1,#+61
   \   000000FC   0300001A           BNE      ??sms_menu_onkey_10
   \   00000100   000057E3           CMP      R7,#+0
   \   00000104   0400000A           BEQ      ??sms_menu_onkey_9
   \   00000108   0020A0E3           MOV      R2,#+0
   \   0000010C   DAFFFFEA           B        ??sms_menu_onkey_3
   \                     ??sms_menu_onkey_10:
   \   00000110   010051E3           CMP      R1,#+1
   \   00000114   DAFFFF1A           BNE      ??sms_menu_onkey_2
   \   00000118   ........           _BLF     popGS,??popGS??rA
   \                     ??sms_menu_onkey_9:
   \   0000011C   0100A0E3           MOV      R0,#+1
   \   00000120   F081BDE8           POP      {R4-R8,PC}
    425                else
    426          	deleteDat(sd, 0);
   \                     ??sms_menu_onkey_6:
   \   00000124   ........           _BLF     deleteDat,??deleteDat??rA
    427                delSDList(sd);
   \                     ??sms_menu_onkey_7:
   \   00000128   0400A0E1           MOV      R0,R4
   \   0000012C   ........           _BLF     delSDList,??delSDList??rA
    428                //Menu_SetItemCountDyn(data, getCountByType(so->type));
    429                RefreshGUI();
   \   00000130   960100EF           SWI      +406
   \   00000134   0000E0E3           MVN      R0,#+0
   \   00000138   F081BDE8           POP      {R4-R8,PC}
    430                return (-1);
    431              }
    432              else if((i=='9')&&(!sd->isfile))
   \                     ??sms_menu_onkey_5:
   \   0000013C   390050E3           CMP      R0,#+57
   \   00000140   1C00001A           BNE      ??sms_menu_onkey_11
   \   00000144   000051E3           CMP      R1,#+0
   \   00000148   4F00001A           BNE      ??sms_menu_onkey_4
    433              {
    434                if(saveFile(sd->SMS_TEXT, sd->Number, sd, sd->type, 2))
   \   0000014C   0200A0E3           MOV      R0,#+2
   \   00000150   01002DE9           PUSH     {R0}
   \   00000154   083094E5           LDR      R3,[R4, #+8]
   \   00000158   640094E5           LDR      R0,[R4, #+100]
   \   0000015C   0420A0E1           MOV      R2,R4
   \   00000160   241084E2           ADD      R1,R4,#+36
   \   00000164   ........           _BLF     saveFile,??saveFile??rA
   \   00000168   000050E3           CMP      R0,#+0
   \   0000016C   04D08DE2           ADD      SP,SP,#+4
   \   00000170   0D00000A           BEQ      ??sms_menu_onkey_12
    435                {
    436          	int k=GetCurMenuItem(data);
   \   00000174   0500A0E1           MOV      R0,R5
   \   00000178   8F0100EF           SWI      +399
   \   0000017C   0060A0E1           MOV      R6,R0
    437          	deleteDat(sd, 0);
   \   00000180   0010A0E3           MOV      R1,#+0
   \   00000184   0400A0E1           MOV      R0,R4
   \   00000188   ........           _BLF     deleteDat,??deleteDat??rA
    438          	delSDList(sd);
   \   0000018C   0400A0E1           MOV      R0,R4
   \   00000190   ........           _BLF     delSDList,??delSDList??rA
    439          	SetCursorToMenuItem(data, (k==(n-1))?k:(k+1));
   \   00000194   010047E2           SUB      R0,R7,#+1
   \   00000198   000056E1           CMP      R6,R0
   \   0000019C   01608612           ADDNE    R6,R6,#+1
   \   000001A0   0610A0E1           MOV      R1,R6
   \   000001A4   0500A0E1           MOV      R0,R5
   \   000001A8   C40100EF           SWI      +452
    440                }
    441                RefreshGUI();
   \                     ??sms_menu_onkey_12:
   \   000001AC   960100EF           SWI      +406
    442                return (-1);
   \   000001B0   0000E0E3           MVN      R0,#+0
   \   000001B4   F081BDE8           POP      {R4-R8,PC}
    443              }
    444              else if((i=='*')) //*,
   \                     ??sms_menu_onkey_11:
   \   000001B8   2A0050E3           CMP      R0,#+42
   \   000001BC   1000001A           BNE      ??sms_menu_onkey_13
    445              {
    446                WSHDR *msg=AllocWS(128);
   \   000001C0   8000A0E3           MOV      R0,#+128
   \   000001C4   250100EF           SWI      +293
    447          #ifdef NO_CS
    448                wsprintf(msg, "%t:\n%s", (sd->type==TYPE_OUT||sd->type==TYPE_DRAFT)?lgp.LGP_TO:lgp.LGP_FROM, sd->Number);
   \   000001C8   ........           LDR      R1,??DataTable3  ;; lgp
   \   000001CC   0050A0E1           MOV      R5,R0
   \   000001D0   080094E5           LDR      R0,[R4, #+8]
   \   000001D4   243084E2           ADD      R3,R4,#+36
   \   000001D8   010050E3           CMP      R0,#+1
   \   000001DC   04005013           CMPNE    R0,#+4
   \   000001E0   1C219105           LDREQ    R2,[R1, #+284]
   \   000001E4   0500A0E1           MOV      R0,R5
   \   000001E8   70209115           LDRNE    R2,[R1, #+112]
   \   000001EC   A0109FE5           LDR      R1,??sms_menu_onkey_14  ;; `?<Constant "%t:\\n%s">`
   \   000001F0   240100EF           SWI      +292
    449          #else
    450                {
    451          	char num[32];
    452          	WSHDR csloc, *cs;
    453          	unsigned short csb[30];
    454          	cs=CreateLocalWS(&csloc,csb,30);
    455          	strcpy(num, sd->Number);
    456          	GetProvAndCity(cs->wsbody, num);
    457          	wsprintf(msg, "%t:\n%s\n%t:\n%w", (sd->type==TYPE_OUT||sd->type==TYPE_DRAFT)?lgp.LGP_TO:lgp.LGP_FROM, sd->Number, lgp.LGP_CODESHOW, cs);
    458                }
    459          #endif
    460                ShowMSG_ws(1, msg);
   \   000001F4   0510A0E1           MOV      R1,R5
   \   000001F8   0100A0E3           MOV      R0,#+1
   \   000001FC   ........           _BLF     ShowMSG_ws,??ShowMSG_ws??rA
   \   00000200   040000EA           B        ??sms_menu_onkey_15
    461              }
    462              else if((i=='8'))
   \                     ??sms_menu_onkey_13:
   \   00000204   380050E3           CMP      R0,#+56
   \   00000208   0400001A           BNE      ??sms_menu_onkey_16
    463              {
    464                int k;
    465                //	extern int ExportOneToTxt(SMS_DATA *sd);
    466                k=ExportOneToTxt(sd);
   \   0000020C   0400A0E1           MOV      R0,R4
   \   00000210   ........           _BLF     ExportOneToTxt,??ExportOneToTxt??rA
    467                ShowFileErrCode(k);
   \                     ??sms_menu_onkey_17:
   \   00000214   ........           _BLF     ShowFileErrCode,??ShowFileErrCode??rA
   \                     ??sms_menu_onkey_15:
   \   00000218   0000A0E3           MOV      R0,#+0
   \   0000021C   F081BDE8           POP      {R4-R8,PC}
    468              }
    469              else if(i=='4')
   \                     ??sms_menu_onkey_16:
   \   00000220   340050E3           CMP      R0,#+52
   \   00000224   0900001A           BNE      ??sms_menu_onkey_18
    470              {	
    471                int k;
    472                //extern int MoveToArchive(SMS_DATA *sd);
    473                k=MoveToArchive(sd);
   \   00000228   0400A0E1           MOV      R0,R4
   \   0000022C   ........           _BLF     MoveToArchive,??MoveToArchive??rA
    474                if(k==1)
   \   00000230   010050E3           CMP      R0,#+1
   \   00000234   F6FFFF1A           BNE      ??sms_menu_onkey_17
    475                {
    476          	if(!sd->isfile) deleteDat(sd, 0);
   \   00000238   140094E5           LDR      R0,[R4, #+20]
   \   0000023C   000050E3           CMP      R0,#+0
   \   00000240   B8FFFF1A           BNE      ??sms_menu_onkey_7
   \   00000244   0010A0E3           MOV      R1,#+0
   \   00000248   0400A0E1           MOV      R0,R4
   \   0000024C   B4FFFFEA           B        ??sms_menu_onkey_6
    477          	delSDList(sd);
    478          	RefreshGUI();
    479          	return (-1);
    480                }
    481                ShowFileErrCode(k);
    482              }
    483              else if(i==RIGHT_BUTTON && !so->is_tab)
   \                     ??sms_menu_onkey_18:
   \   00000250   041096E5           LDR      R1,[R6, #+4]
   \   00000254   3E0050E3           CMP      R0,#+62
   \   00000258   0800001A           BNE      ??sms_menu_onkey_19
   \   0000025C   000051E3           CMP      R1,#+0
   \   00000260   0900001A           BNE      ??sms_menu_onkey_4
    484              {
    485                createEditGUI(so->dlg_csm, sd, ED_EDIT, 0);
   \   00000264   080096E5           LDR      R0,[R6, #+8]
   \   00000268   0030A0E3           MOV      R3,#+0
   \   0000026C   0120A0E3           MOV      R2,#+1
   \   00000270   0410A0E1           MOV      R1,R4
   \   00000274   ........           _BLF     createEditGUI,??createEditGUI??rA
    486                return 1;
   \   00000278   0100A0E3           MOV      R0,#+1
   \   0000027C   F081BDE8           POP      {R4-R8,PC}
    487              }
    488              else if(i==LEFT_BUTTON && !so->is_tab)
   \                     ??sms_menu_onkey_19:
   \   00000280   3D0050E3           CMP      R0,#+61
   \   00000284   00005103           CMPEQ    R1,#+0
   \   00000288   A3FFFF0A           BEQ      ??sms_menu_onkey_9
    489              {
    490                return 1;
    491              }
    492            }
    493            return 0;
   \                     ??sms_menu_onkey_4:
   \   0000028C   0000A0E3           MOV      R0,#+0
   \   00000290   F081BDE8           POP      {R4-R8,PC}       ;; return
   \                     ??sms_menu_onkey_14:
   \   00000294   ........           DC32     `?<Constant "%t:\\n%s">`
    494          }
    495          
    496          #ifdef ELKA
    497          #define ICON_UNK 0x5B8
    498          #define ICON_OUT 0x5B8
    499          #define ICON_IN_R 0x5B5
    500          #define ICON_IN_N	0x5B6
    501          #define ICON_DRAFT 0x5B2
    502          #define ICON_IN_ALL 0x5B5
    503          #define ICON_LINE 0x537
    504          #else
    505          #define ICON_UNK 0x5E4
    506          #define ICON_OUT 0x5E4
    507          #define ICON_IN_R 0x5E1
    508          #define ICON_IN_N	0x5E2
    509          #define ICON_DRAFT 0x5DE
    510          #define ICON_IN_ALL 0x5E1
    511          #define ICON_LINE 0x563
    512          #endif
    513          
    514          //const int hdr_icon[]={0X5D0,0};
    515          //main 0x347
    516          //sent 0x515
    517          //draft 0x5C4
    518          //inbox 0x5C5
    519          //edit 0x4BD
    520          //view 0x29A
    521          //adrbk 0x290
    522          /*
    523          const int HDRIC_UNK[]={0x347, 0};
    524          const int HDRIC_OUT[]={0x515, 0};
    525          const int HDRIC_IN_R[]={0x5C5, 0};
    526          const int HDRIC_IN_N[]={0x5C5, 0};
    527          const int HDRIC_DRAFT[]={0x5C4, 0};
    528          const int HDRIC_IN_ALL[]={0x5C5, 0};
    529          */
    530          int SL_HDR_ICONS[7][2]=
    531          {
    532          #ifdef NEWSGOLD
    533          #ifdef ELKA
    534            {0x2AB, 0},
    535            {0x5A4, 0},
    536            {0x2AB, 0},
    537            {0x2AB, 0},
    538            {0x598, 0},
    539            {0x2AB, 0},
    540            {0,0}
    541          #else
    542            {0x347, 0},
    543            {0x515, 0},
    544            {0x5C5, 0},
    545            {0x5C5, 0},
    546            {0x5C4, 0},
    547            {0x5C5, 0},
    548            {0,0}
    549          #endif
    550          #endif
    551          };
    552          //extern void SetHeaderIcon(void *hdr_pointer, const int *icon, void *malloc_adr, void *mfree_adr);
    553          #ifdef S68
    554          int SL_ICONS[8]={0, 0, 0, 0, 0, 0, 0x575, 0};
    555          int ESL_ICONS[8]={0, 0, 0, 0, 0, 0, 0x575, 0};
    556          #else
    557          int SL_ICONS[8]={ICON_UNK, ICON_OUT, ICON_IN_R, ICON_IN_N, ICON_DRAFT, ICON_IN_ALL, ICON_LINE, 0};
    558          int ESL_ICONS[8]={ICON_UNK, ICON_OUT, ICON_IN_R, ICON_IN_N, ICON_DRAFT, ICON_IN_ALL, ICON_LINE, 0};
    559          #endif

   \                                 In segment CODE, align 4, keep-with-next
    560          void sms_menu_itemhndl(void *data, int curitem, void *user_pointer)
    561          {
   \                     sms_menu_itemhndl:
   \   00000000   F04F2DE9           PUSH     {R4-R11,LR}
    562          	SML_OP *so=(SML_OP *)user_pointer;
    563          	int type=so->type;
    564          	int isems=0;
    565          	void *item=AllocMLMenuItem(data);
    566          	WSHDR *ws1=AllocMenuWS(data, MENU_MAX_TXT);
    567          	WSHDR *ws2=AllocMenuWS(data, 150);
    568          	WSHDR wsloc, *wn;
    569          	unsigned short wsb[150];
    570          	wn=CreateLocalWS(&wsloc,wsb,150);
    571          	SMS_DATA *sdl=getSMSDataByType(curitem, type);
    572          	if(sdl)
   \   00000004   9CB19FE5           LDR      R11,??sms_menu_itemhndl_0  ;; SL_ICONS
   \   00000008   50DF4DE2           SUB      SP,SP,#+320
   \   0000000C   00A092E5           LDR      R10,[R2, #+0]
   \   00000010   0040A0E1           MOV      R4,R0
   \   00000014   0150A0E1           MOV      R5,R1
   \   00000018   190200EF           SWI      +537
   \   0000001C   0060A0E1           MOV      R6,R0
   \   00000020   1E10A0E3           MOV      R1,#+30
   \   00000024   0400A0E1           MOV      R0,R4
   \   00000028   980100EF           SWI      +408
   \   0000002C   0070A0E1           MOV      R7,R0
   \   00000030   9610A0E3           MOV      R1,#+150
   \   00000034   0400A0E1           MOV      R0,R4
   \   00000038   980100EF           SWI      +408
   \   0000003C   0080A0E1           MOV      R8,R0
   \   00000040   9620A0E3           MOV      R2,#+150
   \   00000044   0D10A0E1           MOV      R1,SP
   \   00000048   4B0F8DE2           ADD      R0,SP,#+300
   \   0000004C   270100EF           SWI      +295
   \   00000050   0090A0E1           MOV      R9,R0
   \   00000054   0A10A0E1           MOV      R1,R10
   \   00000058   0500A0E1           MOV      R0,R5
   \   0000005C   ........           _BLF     getSMSDataByType,??getSMSDataByType??rA
   \   00000060   00A0B0E1           MOVS     R10,R0
    573          	{
    574          		if(sdl->SMS_TEXT)
   \   00000064   64109A15           LDRNE    R1,[R10, #+100]
   \   00000068   00005113           CMPNE    R1,#+0
   \   0000006C   1800000A           BEQ      ??sms_menu_itemhndl_1
    575          			wstrncpy(ws1, sdl->SMS_TEXT, MENU_MAX_TXT);
   \   00000070   1E20A0E3           MOV      R2,#+30
   \   00000074   0700A0E1           MOV      R0,R7
   \   00000078   200100EF           SWI      +288
    576          		else
    577          			goto AL_ERR;
    578          			
    579          		if(!strlen(sdl->Number))
   \   0000007C   24008AE2           ADD      R0,R10,#+36
   \   00000080   1B0000EF           SWI      +27
   \   00000084   000050E3           CMP      R0,#+0
   \   00000088   0300001A           BNE      ??sms_menu_itemhndl_2
    580          			CutWSTR(ws2, 0);
   \   0000008C   0010A0E3           MOV      R1,#+0
   \   00000090   0800A0E1           MOV      R0,R8
   \   00000094   260100EF           SWI      +294
   \   00000098   170000EA           B        ??sms_menu_itemhndl_3
    581          	#ifdef LANG_CN
    582          		else
    583          		{
    584          			int is_fetion=0;
    585          			if(!strncmp(num_fetion, sdl->Number, 5)) is_fetion=1;
    586          			if(findNameByNum(wn, is_fetion?(sdl->Number+5):sdl->Number))
    587          			{
    588          				if(is_fetion) wsprintf(ws2, "%w(%t)", wn, lgp.LGP_FETION);
    589          				else	wstrcpy(ws2, wn);
    590          			}
    591          			else
    592          				wsprintf(ws2, PERCENT_S, sdl->Number);
    593          		}
    594          	#else
    595          		else if(findNameByNum(wn, sdl->Number))
   \                     ??sms_menu_itemhndl_2:
   \   0000009C   24108AE2           ADD      R1,R10,#+36
   \   000000A0   0900A0E1           MOV      R0,R9
   \   000000A4   ........           _BLF     findNameByNum,??findNameByNum??rA
   \   000000A8   000050E3           CMP      R0,#+0
   \   000000AC   0300000A           BEQ      ??sms_menu_itemhndl_4
    596          			wstrcpy(ws2, wn);
   \   000000B0   0910A0E1           MOV      R1,R9
   \   000000B4   0800A0E1           MOV      R0,R8
   \   000000B8   1F0100EF           SWI      +287
   \   000000BC   0E0000EA           B        ??sms_menu_itemhndl_3
    597          		else
    598          			wsprintf(ws2, PERCENT_S, sdl->Number);
   \                     ??sms_menu_itemhndl_4:
   \   000000C0   E4109FE5           LDR      R1,??sms_menu_itemhndl_0+0x4  ;; PERCENT_S
   \   000000C4   24208AE2           ADD      R2,R10,#+36
   \   000000C8   0800A0E1           MOV      R0,R8
   \   000000CC   240100EF           SWI      +292
   \   000000D0   090000EA           B        ??sms_menu_itemhndl_3
    599          	#endif
    600          	}
    601          	else
    602          	{
    603          AL_ERR:
    604          		wsprintf(ws1, PERCENT_T, lgp.LGP_ERR);
   \                     ??sms_menu_itemhndl_1:
   \   000000D4   D4009FE5           LDR      R0,??sms_menu_itemhndl_0+0x8  ;; lgp + 12
   \   000000D8   ........           LDR      R1,??DataTable4  ;; PERCENT_T
   \   000000DC   002090E5           LDR      R2,[R0, #+0]
   \   000000E0   0700A0E1           MOV      R0,R7
   \   000000E4   240100EF           SWI      +292
    605          		CutWSTR(ws2, 0);
   \   000000E8   0010A0E3           MOV      R1,#+0
   \   000000EC   0800A0E1           MOV      R0,R8
   \   000000F0   260100EF           SWI      +294
    606          	}
    607          	if(sdl)
   \   000000F4   00005AE3           CMP      R10,#+0
   \   000000F8   1000000A           BEQ      ??sms_menu_itemhndl_5
    608          	{
    609          	  extern int IsWsSmall(WSHDR *ws);
    610          	  if((sdl->msg_type&ISEMS) || sdl->cnt_r>1)
   \                     ??sms_menu_itemhndl_3:
   \   000000FC   18009AE5           LDR      R0,[R10, #+24]
   \   00000100   010010E3           TST      R0,#0x1
   \   00000104   1A00001A           BNE      ??sms_menu_itemhndl_6
   \   00000108   1C109AE5           LDR      R1,[R10, #+28]
   \   0000010C   020051E3           CMP      R1,#+2
   \   00000110   170000AA           BGE      ??sms_menu_itemhndl_6
    611          	    isems=1;
    612          	  else
    613          	  {
    614          	    if((sdl->msg_type&IS7BIT) || IsWsSmall(sdl->SMS_TEXT))
   \   00000114   080010E3           TST      R0,#0x8
   \   00000118   0300001A           BNE      ??sms_menu_itemhndl_7
   \   0000011C   64009AE5           LDR      R0,[R10, #+100]
   \   00000120   ........           _BLF     IsWsSmall,??IsWsSmall??rA
   \   00000124   000050E3           CMP      R0,#+0
   \   00000128   0C00000A           BEQ      ??sms_menu_itemhndl_8
    615          	    {
    616          	      if(sdl->SMS_TEXT->wsbody[0]>SEG7_MAX) isems=1;
   \                     ??sms_menu_itemhndl_7:
   \   0000012C   64009AE5           LDR      R0,[R10, #+100]
   \   00000130   000090E5           LDR      R0,[R0, #+0]
   \   00000134   B000D0E1           LDRH     R0,[R0, #+0]
   \   00000138   A10050E3           CMP      R0,#+161
   \   0000013C   0C00002A           BCS      ??sms_menu_itemhndl_6
   \                     ??sms_menu_itemhndl_5:
   \   00000140   0B20A0E1           MOV      R2,R11
   \   00000144   0610A0E1           MOV      R1,R6
   \   00000148   0400A0E1           MOV      R0,R4
   \   0000014C   990100EF           SWI      +409
    617          	    }
    618          	    else
    619          	    {
    620          	      if(sdl->SMS_TEXT->wsbody[0]>SEGN_MAX) isems=1;
    621          	    }
    622          	  }
    623          	}
    624          	SetMenuItemIconArray(data, item, (isems)?ESL_ICONS:SL_ICONS);
    625          	SetMenuItemIcon(data, curitem, (sdl)?(sdl->type):6);
   \   00000150   00005AE3           CMP      R10,#+0
   \   00000154   08209A15           LDRNE    R2,[R10, #+8]
   \   00000158   0620A003           MOVEQ    R2,#+6
   \   0000015C   060000EA           B        ??sms_menu_itemhndl_9
   \                     ??sms_menu_itemhndl_8:
   \   00000160   64009AE5           LDR      R0,[R10, #+100]
   \   00000164   000090E5           LDR      R0,[R0, #+0]
   \   00000168   B000D0E1           LDRH     R0,[R0, #+0]
   \   0000016C   470050E3           CMP      R0,#+71
   \   00000170   F2FFFF3A           BCC      ??sms_menu_itemhndl_5
   \                     ??sms_menu_itemhndl_6:
   \   00000174   20B08BE2           ADD      R11,R11,#+32
   \   00000178   F0FFFFEA           B        ??sms_menu_itemhndl_5
   \                     ??sms_menu_itemhndl_9:
   \   0000017C   0510A0E1           MOV      R1,R5
   \   00000180   0400A0E1           MOV      R0,R4
   \   00000184   950100EF           SWI      +405
    626          	SetMLMenuItemText(data, item, ws1, ws2, curitem);
   \   00000188   20002DE9           PUSH     {R5}
   \   0000018C   0830A0E1           MOV      R3,R8
   \   00000190   0720A0E1           MOV      R2,R7
   \   00000194   0610A0E1           MOV      R1,R6
   \   00000198   0400A0E1           MOV      R0,R4
   \   0000019C   180200EF           SWI      +536
    627          }
   \   000001A0   51DF8DE2           ADD      SP,SP,#+324
   \   000001A4   F08FBDE8           POP      {R4-R11,PC}      ;; return
   \                     ??sms_menu_itemhndl_0:
   \   000001A8   ........           DC32     SL_ICONS
   \   000001AC   ........           DC32     PERCENT_S
   \   000001B0   ........           DC32     lgp + 12

   \                                 In segment DATA_I, align 4, align-sorted
   \                     SL_HDR_ICONS:
   \   00000000                      DS8 56
   \   00000038                      REQUIRE `?<Initializer for SL_HDR_ICONS>`
    628          
    629          const char SM_FORMAT[]="%t%c%d/%d";
    630          const SOFTKEY_DESC SK_VIEW_PIC={0x003D,0x0000,(int)LGP_VIEW_PIC};
    631          SOFTKEY_DESC SK_OK2={0x0018,0x0000,LGP_NULL};
   \                     SK_OK2:
   \   00000038                      DS8 8
   \   00000040                      REQUIRE `?<Initializer for SK_OK2>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     SL_ICONS:
   \   00000000                      DS8 32
   \   00000020                      REQUIRE `?<Initializer for SL_ICONS>`
   \                     ESL_ICONS:
   \   00000020                      DS8 32
   \   00000040                      REQUIRE `?<Initializer for ESL_ICONS>`

   \                                 In segment CODE, align 4, keep-with-next
    632          void sms_menu_ghook(void *data, int cmd)
    633          {
   \                     sms_menu_ghook:
   \   00000000   F04F2DE9           PUSH     {R4-R11,LR}
   \   00000004   08D04DE2           SUB      SP,SP,#+8
   \   00000008   0040A0E1           MOV      R4,R0
   \   0000000C   0160A0E1           MOV      R6,R1
    634            SML_OP *so=MenuGetUserPointer(data);
   \   00000010   E00100EF           SWI      +480
   \   00000014   0050A0E1           MOV      R5,R0
    635            if(cmd==0x0A)
   \   00000018   000095E5           LDR      R0,[R5, #+0]
   \   0000001C   0A0056E3           CMP      R6,#+10
   \   00000020   0D00001A           BNE      ??sms_menu_ghook_2
    636            {
    637              int n=getCountByType(so->type);
   \   00000024   ........           _BLF     getCountByType,??getCountByType??rA
   \   00000028   0050A0E1           MOV      R5,R0
    638              int cur=GetCurMenuItem(data);
    639              if(cur>=n) SetCursorToMenuItem(data, 0);
   \   0000002C   0400A0E1           MOV      R0,R4
   \   00000030   8F0100EF           SWI      +399
   \   00000034   050050E1           CMP      R0,R5
   \   00000038   020000BA           BLT      ??sms_menu_ghook_3
   \   0000003C   0010A0E3           MOV      R1,#+0
   \   00000040   0400A0E1           MOV      R0,R4
   \   00000044   C40100EF           SWI      +452
    640              Menu_SetItemCountDyn(data, n);
   \                     ??sms_menu_ghook_3:
   \   00000048   0510A0E1           MOV      R1,R5
   \   0000004C   0400A0E1           MOV      R0,R4
   \   00000050   E60100EF           SWI      +486
    641              //patch_header(&sms_menuhdr);
    642              DisableIDLETMR();
   \   00000054   7F0100EF           SWI      +383
   \   00000058   F38FBDE8           POP      {R0,R1,R4-R11,PC}
    643            }
    644            else if(cmd==7)
   \                     ??sms_menu_ghook_2:
   \   0000005C   30929FE5           LDR      R9,??sms_menu_ghook_4  ;; lgp
   \   00000060   070056E3           CMP      R6,#+7
   \   00000064   6800001A           BNE      ??sms_menu_ghook_5
    645            {
    646              //extern void SetMenuSoftKey(void *gui, const SOFTKEY_DESC *,int n);
    647              int n=getCountByType(so->type);
    648              int cur_n=GetCurMenuItem(data)+1;
    649              if(!n) cur_n=0;
    650              WSHDR *hdr_t=AllocWS(64);
    651              void *hdr_p=GetHeaderPointer(data);
    652              void *ma=malloc_adr();
    653              void *mf=mfree_adr();
    654              switch(so->type)
   \   00000068   28829FE5           LDR      R8,??sms_menu_ghook_4+0x4  ;; SM_FORMAT
   \   0000006C   ........           _BLF     getCountByType,??getCountByType??rA
   \   00000070   0060A0E1           MOV      R6,R0
   \   00000074   0400A0E1           MOV      R0,R4
   \   00000078   8F0100EF           SWI      +399
   \   0000007C   01A080E2           ADD      R10,R0,#+1
   \   00000080   000056E3           CMP      R6,#+0
   \   00000084   00A0A003           MOVEQ    R10,#+0
   \   00000088   4000A0E3           MOV      R0,#+64
   \   0000008C   250100EF           SWI      +293
   \   00000090   00B0A0E1           MOV      R11,R0
   \   00000094   0400A0E1           MOV      R0,R4
   \   00000098   AE0200EF           SWI      +686
   \   0000009C   00008DE5           STR      R0,[SP, #+0]
   \   000000A0   148000EF           SWI      +32788
   \   000000A4   04008DE5           STR      R0,[SP, #+4]
   \   000000A8   158000EF           SWI      +32789
   \   000000AC   0070A0E1           MOV      R7,R0
   \   000000B0   000095E5           LDR      R0,[R5, #+0]
   \   000000B4   1D30A0E3           MOV      R3,#+29
   \   000000B8   E03C83E3           ORR      R3,R3,#0xE000
   \   000000BC   0F0050E3           CMP      R0,#+15
   \   000000C0   3100008A           BHI      ??sms_menu_ghook_6
   \   000000C4   011F8FE2           ADR      R1,??sms_menu_ghook_0
   \   000000C8   0010D1E7           LDRB     R1,[R1, R0]
   \   000000CC   01F18FE0           ADD      PC,PC,R1, LSL #+2
   \                     ??sms_menu_ghook_0:
   \   000000D0   03160C11           DC8      +3,+22,+12,+17
   \   000000D4   1B202E2E           DC8      +27,+32,+46,+46
   \   000000D8   2E2E2E2E           DC8      +46,+46,+46,+46
   \   000000DC   2E2E2E25           DC8      +46,+46,+46,+37
    655              {
    656              case 0:
    657                wsprintf(hdr_t, SM_FORMAT, lgp.LGP_ALL, 0xE01D, cur_n, n);
   \                     ??sms_menu_ghook_7:
   \   000000E0   0600A0E1           MOV      R0,R6
   \   000000E4   01002DE9           PUSH     {R0}
   \   000000E8   00042DE9           PUSH     {R10}
   \   000000EC   302099E5           LDR      R2,[R9, #+48]
   \                     ??sms_menu_ghook_8:
   \   000000F0   0810A0E1           MOV      R1,R8
   \   000000F4   0B00A0E1           MOV      R0,R11
   \   000000F8   240100EF           SWI      +292
   \   000000FC   08D08DE2           ADD      SP,SP,#+8
   \   00000100   240000EA           B        ??sms_menu_ghook_9
    658                break;
    659              case TYPE_IN_R:
    660                wsprintf(hdr_t, SM_FORMAT, lgp.LGP_IN_R, 0xE01D, cur_n, n);
   \                     ??sms_menu_ghook_10:
   \   00000104   0600A0E1           MOV      R0,R6
   \   00000108   01002DE9           PUSH     {R0}
   \   0000010C   00042DE9           PUSH     {R10}
   \   00000110   1C2099E5           LDR      R2,[R9, #+28]
   \   00000114   F5FFFFEA           B        ??sms_menu_ghook_8
    661                break;
    662              case TYPE_IN_N:
    663                wsprintf(hdr_t, SM_FORMAT, lgp.LGP_IN_N, 0xE01D, cur_n, n);
   \                     ??sms_menu_ghook_11:
   \   00000118   0600A0E1           MOV      R0,R6
   \   0000011C   01002DE9           PUSH     {R0}
   \   00000120   00042DE9           PUSH     {R10}
   \   00000124   202099E5           LDR      R2,[R9, #+32]
   \                     ??sms_menu_ghook_12:
   \   00000128   F0FFFFEA           B        ??sms_menu_ghook_8
    664                break;
    665              case TYPE_OUT:
    666                wsprintf(hdr_t, SM_FORMAT, lgp.LGP_OUT, 0xE01D, cur_n, n);
   \                     ??sms_menu_ghook_13:
   \   0000012C   0600A0E1           MOV      R0,R6
   \   00000130   01002DE9           PUSH     {R0}
   \   00000134   00042DE9           PUSH     {R10}
   \   00000138   282099E5           LDR      R2,[R9, #+40]
   \   0000013C   EBFFFFEA           B        ??sms_menu_ghook_8
    667                break;
    668              case TYPE_DRAFT:
    669                wsprintf(hdr_t, SM_FORMAT, lgp.LGP_DRAFT, 0xE01D, cur_n, n);
   \                     ??sms_menu_ghook_14:
   \   00000140   0600A0E1           MOV      R0,R6
   \   00000144   01002DE9           PUSH     {R0}
   \   00000148   00042DE9           PUSH     {R10}
   \   0000014C   2C2099E5           LDR      R2,[R9, #+44]
   \   00000150   E6FFFFEA           B        ??sms_menu_ghook_8
    670                break;
    671              case TYPE_IN_ALL:
    672                wsprintf(hdr_t, SM_FORMAT, lgp.LGP_IN_A, 0xE01D, cur_n, n);
   \                     ??sms_menu_ghook_15:
   \   00000154   0600A0E1           MOV      R0,R6
   \   00000158   01002DE9           PUSH     {R0}
   \   0000015C   00042DE9           PUSH     {R10}
   \   00000160   242099E5           LDR      R2,[R9, #+36]
   \   00000164   E1FFFFEA           B        ??sms_menu_ghook_8
    673                break;
    674              case TYPE_FILTER:
    675                wsprintf(hdr_t, SM_FORMAT, lgp.LGP_FILTER, 0xE01D, cur_n, n);
   \                     ??sms_menu_ghook_16:
   \   00000168   0600A0E1           MOV      R0,R6
   \   0000016C   01002DE9           PUSH     {R0}
   \   00000170   00042DE9           PUSH     {R10}
   \   00000174   242199E5           LDR      R2,[R9, #+292]
   \   00000178   0810A0E1           MOV      R1,R8
   \   0000017C   0B00A0E1           MOV      R0,R11
   \   00000180   240100EF           SWI      +292
   \   00000184   08D08DE2           ADD      SP,SP,#+8
   \   00000188   020000EA           B        ??sms_menu_ghook_9
    676                break;
    677              default:
    678                CutWSTR(hdr_t, 0);
   \                     ??sms_menu_ghook_6:
   \   0000018C   0010A0E3           MOV      R1,#+0
   \   00000190   0B00A0E1           MOV      R0,R11
   \   00000194   260100EF           SWI      +294
    679                break;
    680              }
    681              SetHeaderText(hdr_p, hdr_t, ma, mf);
   \                     ??sms_menu_ghook_9:
   \   00000198   04209DE5           LDR      R2,[SP, #+4]
   \   0000019C   00009DE5           LDR      R0,[SP, #+0]
   \   000001A0   0730A0E1           MOV      R3,R7
    682              extern int MM_HDR_ICONS[]; //main.c
    683              if(!so->is_tab) SetHeaderIcon(hdr_p, SL_HDR_ICONS[(so->type>6)?0:so->type], ma, mf);
   \   000001A4   F0909FE5           LDR      R9,??sms_menu_ghook_4+0x8  ;; SL_HDR_ICONS
   \   000001A8   0B10A0E1           MOV      R1,R11
   \   000001AC   AF0200EF           SWI      +687
   \   000001B0   040095E5           LDR      R0,[R5, #+4]
   \   000001B4   000050E3           CMP      R0,#+0
   \   000001B8   0600001A           BNE      ??sms_menu_ghook_17
   \   000001BC   000095E5           LDR      R0,[R5, #+0]
   \   000001C0   04209DE5           LDR      R2,[SP, #+4]
   \   000001C4   070050E3           CMP      R0,#+7
   \   000001C8   0000A0A3           MOVGE    R0,#+0
   \   000001CC   0730A0E1           MOV      R3,R7
   \   000001D0   801189E0           ADD      R1,R9,R0, LSL #+3
   \   000001D4   020000EA           B        ??sms_menu_ghook_18
    684              else SetHeaderIcon(hdr_p, MM_HDR_ICONS, ma, mf);
   \                     ??sms_menu_ghook_17:
   \   000001D8   04209DE5           LDR      R2,[SP, #+4]
   \   000001DC   BC109FE5           LDR      R1,??sms_menu_ghook_4+0xC  ;; MM_HDR_ICONS
   \   000001E0   0730A0E1           MOV      R3,R7
   \                     ??sms_menu_ghook_18:
   \   000001E4   00009DE5           LDR      R0,[SP, #+0]
   \   000001E8   BA0200EF           SWI      +698
    685              //if(n) SetSoftKey(data,&SK_VIEW_PIC,SET_SOFT_KEY_M);
    686              if(n) SetMenuSoftKey(data,&SK_VIEW_PIC,SET_SOFT_KEY_M);
   \   000001EC   000056E3           CMP      R6,#+0
   \   000001F0   0220A013           MOVNE    R2,#+2
   \   000001F4   0C108812           ADDNE    R1,R8,#+12
    687              else SetMenuSoftKey(data,&SK_OK2,SET_SOFT_KEY_N);
   \   000001F8   0020A003           MOVEQ    R2,#+0
   \   000001FC   38108902           ADDEQ    R1,R9,#+56
   \   00000200   0400A0E1           MOV      R0,R4
   \   00000204   B00200EF           SWI      +688
   \   00000208   F38FBDE8           POP      {R0,R1,R4-R11,PC}
    688            }
    689            else if(cmd==3)
   \                     ??sms_menu_ghook_5:
   \   0000020C   030056E3           CMP      R6,#+3
   \   00000210   0200001A           BNE      ??sms_menu_ghook_19
    690            {
    691              mfree(so);
   \   00000214   0500A0E1           MOV      R0,R5
   \   00000218   150000EF           SWI      +21
   \   0000021C   F38FBDE8           POP      {R0,R1,R4-R11,PC}
    692            }
    693            else if(cmd==5)
   \                     ??sms_menu_ghook_19:
   \   00000220   050056E3           CMP      R6,#+5
   \   00000224   F38FBD18           POPNE    {R0,R1,R4-R11,PC}
    694            {
    695              const char *lgpN;
    696              switch(so->type)
   \   00000228   0F0050E3           CMP      R0,#+15
   \   0000022C   F38FBD88           POPHI    {R0,R1,R4-R11,PC}
   \   00000230   011F8FE2           ADR      R1,??sms_menu_ghook_1
   \   00000234   0010D1E7           LDRB     R1,[R1, R0]
   \   00000238   01F18FE0           ADD      PC,PC,R1, LSL #+2
   \                     ??sms_menu_ghook_1:
   \   0000023C   03090507           DC8      +3,+9,+5,+7
   \   00000240   0B0D1414           DC8      +11,+13,+20,+20
   \   00000244   14141414           DC8      +20,+20,+20,+20
   \   00000248   1414140F           DC8      +20,+20,+20,+15
    697              {
    698              case 0:
    699                lgpN=lgp.LGP_ALL;
   \                     ??sms_menu_ghook_20:
   \   0000024C   301099E5           LDR      R1,[R9, #+48]
   \   00000250   0A0000EA           B        ??sms_menu_ghook_21
    700                break;
    701              case TYPE_IN_R:
    702                lgpN=lgp.LGP_IN_R;
   \                     ??sms_menu_ghook_22:
   \   00000254   1C1099E5           LDR      R1,[R9, #+28]
   \   00000258   080000EA           B        ??sms_menu_ghook_21
    703                break;
    704              case TYPE_IN_N:
    705                lgpN=lgp.LGP_IN_N;
   \                     ??sms_menu_ghook_23:
   \   0000025C   201099E5           LDR      R1,[R9, #+32]
   \   00000260   060000EA           B        ??sms_menu_ghook_21
    706                break;
    707              case TYPE_OUT:
    708                lgpN=lgp.LGP_OUT;
   \                     ??sms_menu_ghook_24:
   \   00000264   281099E5           LDR      R1,[R9, #+40]
   \   00000268   040000EA           B        ??sms_menu_ghook_21
    709                break;
    710              case TYPE_DRAFT:
    711                lgpN=lgp.LGP_DRAFT;
   \                     ??sms_menu_ghook_25:
   \   0000026C   2C1099E5           LDR      R1,[R9, #+44]
   \   00000270   020000EA           B        ??sms_menu_ghook_21
    712                break;
    713              case TYPE_IN_ALL:
    714                lgpN=lgp.LGP_IN_A;
   \                     ??sms_menu_ghook_26:
   \   00000274   241099E5           LDR      R1,[R9, #+36]
   \   00000278   000000EA           B        ??sms_menu_ghook_21
    715                break;
    716              case TYPE_FILTER:
    717                lgpN=lgp.LGP_FILTER;
   \                     ??sms_menu_ghook_27:
   \   0000027C   241199E5           LDR      R1,[R9, #+292]
    718                break;
    719              default:
    720                lgpN=0;
    721              }
    722              if(lgpN) UpdateDlgCsmName(so->dlg_csm, lgpN);
   \                     ??sms_menu_ghook_21:
   \   00000280   000051E3           CMP      R1,#+0
   \   00000284   F38FBD08           POPEQ    {R0,R1,R4-R11,PC}
   \   00000288   080095E5           LDR      R0,[R5, #+8]
   \   0000028C   ........           _BLF     UpdateDlgCsmName,??UpdateDlgCsmName??rA
    723            }
    724          }
   \                     ??sms_menu_ghook_28:
   \   00000290   F38FBDE8           POP      {R0,R1,R4-R11,PC}  ;; return
   \                     ??sms_menu_ghook_4:
   \   00000294   ........           DC32     lgp
   \   00000298   ........           DC32     SM_FORMAT
   \   0000029C   ........           DC32     SL_HDR_ICONS
   \   000002A0   ........           DC32     MM_HDR_ICONS

   \                                 In segment DATA_C, align 4, align-sorted
   \                     sms_menuhdr:
   \   00000000   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   00000008   00000000FFFF       DC32 0H, 2147483647, 2147483647
   \              FF7FFFFFFF7F
    725          const ML_MENU_DESC sms_menu=
   \                     sms_menu:
   \   00000014   08000000....       DC32 8, sms_menu_onkey, sms_menu_ghook, 0H, sms_menusoftkeys
   \              ............
   \              00000000....
   \              ....        
   \   00000028   ........1100       DC32 sms_menu_skt, 17, sms_menu_itemhndl, 0H, 0H, 0, 1
   \              0000........
   \              000000000000
   \              000000000000
   \              01000000    

   \                                 In segment DATA_C, align 4, align-sorted
   \                     slop_menuhdr:
   \   00000000   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   00000008   00000000FFFF       DC32 0H, 2147483647, 2147483647
   \              FF7FFFFFFF7F
   \                     slop_menu:
   \   00000014   08000000....       DC32 8, slop_menu_onkey, slop_menu_ghook, 0H, slop_menusoftkeys
   \              ............
   \              00000000....
   \              ....        
   \   00000028   ........1100       DC32 slop_menu_skt, 17, slop_menu_itemhndl, 0H, 0H, 0
   \              0000........
   \              000000000000
   \              000000000000

   \                                 In segment DATA_C, align 4, align-sorted
   \                     slop_menusoftkeys:
   \   00000000   000000000100       DC32 0, 1, 2
   \              000002000000

   \                                 In segment DATA_C, align 4, align-sorted
   \                     slop_menu_skt:
   \   00000000   ........0000       DC32 ed_menu_sk, 0
   \              0000        

   \                                 In segment DATA_C, align 4, align-sorted
   \                     slop_procs_dat:
   \   00000000   ............       DC32 slop_menu_reply, slop_menu_edit, slop_menu_del
   \              ............
   \   0000000C   ............       DC32 slop_menu_save_as_file, slop_menu_export_txt
   \              ....        
   \   00000014   ............       DC32 slop_menu_move_to_archive, slop_menu_exit
   \              ....        
   \                     slop_procs_file:
   \   0000001C   ............       DC32 slop_menu_reply, slop_menu_edit, slop_menu_del
   \              ............
   \   00000028   ............       DC32 slop_menu_export_txt, slop_menu_move_to_archive, slop_menu_exit
   \              ............

   \                                 In segment DATA_C, align 4, align-sorted
   \                     sms_menusoftkeys:
   \   00000000   000000000100       DC32 0, 1, 2
   \              000002000000

   \                                 In segment DATA_C, align 4, align-sorted
   \                     sms_menu_skt:
   \   00000000   ........0000       DC32 sms_menu_sk, 0
   \              0000        

   \                                 In segment DATA_C, align 4, align-sorted
   \                     SM_FORMAT:
   \   00000000   257425632564       DC8 "%t%c%d/%d"
   \              2F256400    
   \   0000000A   0000               DC8 0, 0
   \                     SK_VIEW_PIC:
   \   0000000C   3D000000           DC16 61, 0
   \   00000010   12C1FF7F           DC32 2147467538
    726          {
    727            8,sms_menu_onkey,sms_menu_ghook,NULL,
    728            sms_menusoftkeys,
    729            &sms_menu_skt,
    730            0x11,//0x11,
    731            sms_menu_itemhndl,
    732            NULL,   //Items
    733            NULL,   //Procs
    734            0,   //n
    735            1 //line
    736          };
    737          

   \                                 In segment CODE, align 4, keep-with-next
    738          void *GetSLUserPointer(void *dlg_csm, int type, int is_tab)
    739          {
   \                     GetSLUserPointer:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   \   00000008   0150A0E1           MOV      R5,R1
   \   0000000C   0260A0E1           MOV      R6,R2
    740            SML_OP *so=malloc(sizeof(SML_OP));
   \   00000010   0C00A0E3           MOV      R0,#+12
   \   00000014   140000EF           SWI      +20
    741            so->type=type;
   \   00000018   005080E5           STR      R5,[R0, #+0]
    742            so->is_tab=is_tab;
   \   0000001C   046080E5           STR      R6,[R0, #+4]
    743            so->dlg_csm=dlg_csm;
   \   00000020   084080E5           STR      R4,[R0, #+8]
    744            return so;
   \   00000024   7080BDE8           POP      {R4-R6,PC}       ;; return
    745          }
    746          

   \                                 In segment CODE, align 4, keep-with-next
    747          int showSMSList(void *dlg_csm, int type)
    748          {
   \                     showSMSList:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
    749            unsigned int id;
    750            SML_OP *so=GetSLUserPointer(dlg_csm, type, 0);//=malloc(sizeof(SML_OP));
    751            //so->type=type;
    752            //so->is_tab=0;
    753            //so->dlg_csm=dlg_csm;
    754            patch_header(&sms_menuhdr);
   \   00000004   70709FE5           LDR      R7,??showSMSList_0  ;; sms_menuhdr
   \   00000008   0040A0E1           MOV      R4,R0
   \   0000000C   0150A0E1           MOV      R5,R1
   \   00000010   0020A0E3           MOV      R2,#+0
   \   00000014   ........           BL       GetSLUserPointer
   \   00000018   0060A0E1           MOV      R6,R0
   \   0000001C   0000A0E3           MOV      R0,#+0
   \   00000020   B000C7E1           STRH     R0,[R7, #+0]
   \   00000024   1800A0E3           MOV      R0,#+24
   \   00000028   B200C7E1           STRH     R0,[R7, #+2]
   \   0000002C   888100EF           SWI      +33160
   \   00000030   010040E2           SUB      R0,R0,#+1
   \   00000034   B400C7E1           STRH     R0,[R7, #+4]
   \   00000038   8A8100EF           SWI      +33162
   \   0000003C   170080E2           ADD      R0,R0,#+23
   \   00000040   B600C7E1           STRH     R0,[R7, #+6]
    755            id=CreateMLMenu(&sms_menu,&sms_menuhdr,0,getCountByType(type), so);
   \   00000044   0500A0E1           MOV      R0,R5
   \   00000048   ........           _BLF     getCountByType,??getCountByType??rA
   \   0000004C   40002DE9           PUSH     {R6}
   \   00000050   0030A0E1           MOV      R3,R0
   \   00000054   0020A0E3           MOV      R2,#+0
   \   00000058   0710A0E1           MOV      R1,R7
   \   0000005C   140087E2           ADD      R0,R7,#+20
   \   00000060   ........           _BLF     CreateMLMenu,??CreateMLMenu??rA
   \   00000064   0050A0E1           MOV      R5,R0
    756            pushGS(dlg_csm, id);
   \   00000068   0510A0E1           MOV      R1,R5
   \   0000006C   0400A0E1           MOV      R0,R4
   \   00000070   ........           _BLF     pushGS,??pushGS??rA
    757            return id;
   \   00000074   0500A0E1           MOV      R0,R5
   \   00000078   F280BDE8           POP      {R1,R4-R7,PC}    ;; return
   \                     ??showSMSList_0:
   \   0000007C   ........           DC32     sms_menuhdr
    758          }

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable3:
   \   00000000   ........           DC32     lgp

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable4:
   \   00000000   ........           DC32     PERCENT_T

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for slop_lgp_dat>`:
   \   00000000   FFFFFF7FFFFF       DC32 2147483647, 2147483647, 2147483647, 2147483647, 2147483647
   \              FF7FFFFFFF7F
   \              FFFFFF7FFFFF
   \              FF7F        
   \   00000014   FFFFFF7FFFFF       DC32 2147483647, 2147483647
   \              FF7F        
   \                     `?<Initializer for slop_lgp_file>`:
   \   0000001C   FFFFFF7FFFFF       DC32 2147483647, 2147483647, 2147483647, 2147483647, 2147483647
   \              FF7FFFFFFF7F
   \              FFFFFF7FFFFF
   \              FF7F        
   \   00000030   FFFFFF7F           DC32 2147483647
   \                     `?<Initializer for slop_item_icons>`:
   \   00000034   380500000000       DC32 1336, 0
   \              0000        

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for sms_menu_sk>`:
   \   00000000   18000000           DC16 24, 0
   \   00000004   FFFFFF7F           DC32 2147483647
   \   00000008   01000000           DC16 1, 0
   \   0000000C   FFFFFF7F           DC32 2147483647
   \   00000010   3D000000           DC16 61, 0
   \   00000014   FBC0FF7F           DC32 2147467515

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for SL_HDR_ICONS>`:
   \   00000000   AB0200000000       DC32 683, 0, 1444, 0, 683, 0, 683, 0, 1432, 0, 683, 0, 0, 0
   \              0000A4050000
   \              00000000AB02
   \              000000000000
   \              AB0200000000
   \              000098050000
   \              00000000AB02
   \              000000000000
   \              000000000000
   \              0000        
   \                     `?<Initializer for SK_OK2>`:
   \   00000038   18000000           DC16 24, 0
   \   0000003C   FFFFFF7F           DC32 2147483647

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for SL_ICONS>`:
   \   00000000   B8050000B805       DC32 1464, 1464, 1461, 1462, 1458, 1461, 1335, 0
   \              0000B5050000
   \              B6050000B205
   \              0000B5050000
   \              370500000000
   \              0000        
   \                     `?<Initializer for ESL_ICONS>`:
   \   00000020   B8050000B805       DC32 1464, 1464, 1461, 1462, 1458, 1461, 1335, 0
   \              0000B5050000
   \              B6050000B205
   \              0000B5050000
   \              370500000000
   \              0000        

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "%t:\\n%s">`:
   \   00000000   25743A0A2573       DC8 "%t:\012%s"
   \              00          
   \   00000007   00                 DC8 0

   Maximum stack usage in bytes:

     Function                  CSTACK
     --------                  ------
     CreateslOpMenu               24
     GetSLUserPointer             16
     showSMSList                  24
     slop_menu_del                 8
     slop_menu_edit                8
     slop_menu_exit                8
     slop_menu_export_txt          8
     slop_menu_ghook              20
     slop_menu_itemhndl           24
     slop_menu_move_to_archive     8
     slop_menu_onkey              12
     slop_menu_reply               8
     slop_menu_save_as_file       12
     slop_menu_send               24
     sms_menu_ghook               52
     sms_menu_itemhndl           360
     sms_menu_onkey               28


   Segment part sizes:

     Function/Label                 Bytes
     --------------                 -----
     slop_menu_reply                  44
     slop_menu_edit                   44
     slop_menu_exit                   60
     slop_menu_del                    72
     slop_menu_save_as_file          112
     slop_menu_export_txt             44
     slop_menu_move_to_archive        84
     slop_menu_send                  236
     slop_menu_ghook                 116
     slop_menu_onkey                 256
     slop_lgp_dat                     60
     slop_menu_itemhndl              208
     CreateslOpMenu                  136
     sms_menu_sk                      24
     sms_menu_onkey                  664
     sms_menu_itemhndl               436
     SL_HDR_ICONS                     64
     SL_ICONS                         64
     sms_menu_ghook                  676
     sms_menuhdr                      68
     slop_menuhdr                     64
     slop_menusoftkeys                12
     slop_menu_skt                     8
     slop_procs_dat                   52
     sms_menusoftkeys                 12
     sms_menu_skt                      8
     SM_FORMAT                        20
     GetSLUserPointer                 40
     showSMSList                     128
     ??DataTable3                      4
     ??DataTable4                      4
     ?<Initializer for slop_lgp_dat>
                                      60
     ?<Initializer for sms_menu_sk>   24
     ?<Initializer for SL_HDR_ICONS>
                                      64
     ?<Initializer for SL_ICONS>      64
     ?<Constant "%t:\n%s">             8
      Others                         308

 
 3 660 bytes in segment CODE
   252 bytes in segment DATA_C
   212 bytes in segment DATA_I
   212 bytes in segment DATA_ID
    12 bytes in segment INITTAB
 
 3 364 bytes of CODE  memory (+ 308 bytes shared)
   464 bytes of CONST memory
   212 bytes of DATA  memory

Errors: none
Warnings: none
