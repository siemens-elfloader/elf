##############################################################################
#                                                                            #
# IAR ARM ANSI C/C++ Compiler V4.42A/W32 EVALUATION    14/Jan/2009  12:36:48 #
# Copyright 1999-2005 IAR Systems. All rights reserved.                      #
#                                                                            #
#    Cpu mode        =  interwork                                            #
#    Endian          =  little                                               #
#    Stack alignment =  4                                                    #
#    Source file     =  K:\Pasha\elf\SieELF\MySMSYS\main.c                   #
#    Command line    =  K:\Pasha\elf\SieELF\MySMSYS\main.c -D NEWSGOLD -D    #
#                       ELKA -D LANG_EN -D NO_CS -lC                         #
#                       K:\Pasha\elf\SieELF\MySMSYS\Release_ELKA_EN\List\    #
#                       -o K:\Pasha\elf\SieELF\MySMSYS\Release_ELKA_EN\Obj\  #
#                       -s9 --no_unroll --cpu_mode arm --endian little       #
#                       --cpu ARM926EJ-S --stack_align 4 --interwork -e      #
#                       --fpu None --dlib_config "K:\Pasha\Embedded          #
#                       Workbench 4.0 Evaluation2\ARM\LIB\dl5tpainl8n.h" -I  #
#                       "K:\Pasha\Embedded Workbench 4.0                     #
#                       Evaluation2\ARM\INC\" --inline_threshold=2           #
#    List file       =  K:\Pasha\elf\SieELF\MySMSYS\Release_ELKA_EN\List\mai #
#                       n.lst                                                #
#    Object file     =  K:\Pasha\elf\SieELF\MySMSYS\Release_ELKA_EN\Obj\main #
#                       .r79                                                 #
#                                                                            #
#                                                                            #
##############################################################################

K:\Pasha\elf\SieELF\MySMSYS\main.c
      1          #include "..\inc\swilib.h"
      2          #include "..\inc\playsound.h"
      3          #include "MySMSYS_ipc.h"
      4          #include "adrList.h"
      5          #include "rect_patcher.h"
      6          #include "sms_dat.h"
      7          #include "smsList.h"
      8          #include "language.h"
      9          #include "edGui.h"
     10          
     11          #include "main.h"
     12          #include "createMenu.h"
     13          
     14          #include "guiIdMan.h"
     15          
     16          #include "popGui.h"
     17          #include "config_data.h"
     18          #include "conf_loader.h"
     19          
     20          #include "NewDatReader.h"
     21          #include "string_works.h"
     22          #include "iconpack.h"
     23          #include "key_hook.h"
     24          #include "CSMswaper.h"
     25          #include "TabGui.h"
     26          
     27          extern void kill_data(void *p, void (*func_p)(void *));
     28          
     29          unsigned int DAEMON_CSM_ID=0;

   \                                 In segment DATA_Z, align 4, align-sorted
     30          unsigned int DIALOG_CSM_ID=0;
   \                     DIALOG_CSM_ID:
   \   00000000                      DS8 4

   \                                 In segment DATA_Z, align 4, align-sorted
     31          unsigned int DIALOG_GUI_ID=0;
   \                     DIALOG_GUI_ID:
   \   00000000                      DS8 4
     32          
     33          unsigned int SNEDSMS_CSM_ID=0;
     34          
     35          typedef struct
     36          {
     37          	CSM_DESC csmd;
     38          	WSHDR name;
     39          }DLGCSM_DESC;
     40          typedef struct
     41          {
     42          	unsigned int csm_id;
     43          	int code;
     44          	char *fname;
     45          }IPC_DATA_DAEMON;
     46          
     47          typedef struct
     48          {
     49          	int ipc_msg;
     50          }IPC_DATA_DLG;
     51          
     52          #define MAX_DLG 32
     53          
     54          typedef struct
     55          {
     56            CSM_RAM csm;
     57          }DEAMON_CSM;
     58          
     59          int IPC_SUB_MSG=0;

   \                                 In segment DATA_Z, align 4, align-sorted
     60          int SMS_INDEX=0;
   \                     SMS_INDEX:
   \   00000000                      DS8 4
     61          IPC_REQ daemon_ipc=
     62          {
     63          	my_ipc_name,
     64          	my_ipc_name,
     65          	NULL
     66          };
     67          IPC_DATA_DAEMON ipc_data_daemon;
     68          
     69          IPC_REQ dlg_ipc=
     70          {
     71          	my_ipc_name,
     72          	my_ipc_name,
     73          	NULL
     74          };

   \                                 In segment DATA_Z, align 4, align-sorted
     75          IPC_DATA_DLG ipc_data_dlg;
   \                     ipc_data_dlg:
   \   00000000                      DS8 4

   \                                 In segment DATA_C, align 4, align-sorted
     76          const int minus11=-11;
   \                     minus11:
   \   00000000   F5FFFFFF           DC32 -11
     77          
     78          char *num_from_ipc=0;
     79          char *text_utf8=0;
     80          int opmsg_id=0;
     81          WSHDR *text_ws=0;
     82          
     83          int is_fview=0;
     84          char filename[128]={0};
     85          int new_sms_n=0;

   \                                 In segment DATA_Z, align 4, align-sorted
     86          char sms_dat[128];
   \                     sms_dat:
   \   00000000                      DS8 128
     87          char ems_admin_dat[128];
   \                     ems_admin_dat:
   \   00000080                      DS8 128
     88          //---------------------------------------
     89          //csm_id man
     90          
     91          unsigned int DlgCsmIDs[MAX_DLG];
     92          

   \                                 In segment CODE, align 4, keep-with-next
     93          void dlgIDsInit(void)
     94          {
     95          	int i=0;
   \                     dlgIDsInit:
   \   00000000   0000A0E3           MOV      R0,#+0
   \   00000004   0020A0E3           MOV      R2,#+0
     96          	for(;i<MAX_DLG;i++)
     97          		DlgCsmIDs[i]=0;
   \                     ??dlgIDsInit_0:
   \   00000008   ........           LDR      R1,??DataTable17  ;; daemon_ipc
   \   0000000C   001181E0           ADD      R1,R1,R0, LSL #+2
   \   00000010   3C2081E5           STR      R2,[R1, #+60]
   \   00000014   010080E2           ADD      R0,R0,#+1
   \   00000018   200050E3           CMP      R0,#+32
   \   0000001C   F9FFFFBA           BLT      ??dlgIDsInit_0
     98          }
   \   00000020   1EFF2FE1           BX       LR               ;; return
     99          

   \                                 In segment CODE, align 4, keep-with-next
    100          int addCSMid(unsigned int *id_pool, unsigned int id)
    101          {
    102          	int i=0;
   \                     addCSMid:
   \   00000000   0020A0E3           MOV      R2,#+0
    103          	for(;i<MAX_DLG;i++)
    104          	{
    105          		if(id_pool[i]==0)
   \                     ??addCSMid_0:
   \   00000004   023190E7           LDR      R3,[R0, +R2, LSL #+2]
   \   00000008   000053E3           CMP      R3,#+0
    106          		{
    107          			id_pool[i]=id;
   \   0000000C   02118007           STREQ    R1,[R0, +R2, LSL #+2]
    108          			return i;
   \   00000010   0200A001           MOVEQ    R0,R2
   \   00000014   1EFF2F01           BXEQ     LR
    109          		}
    110          	}
   \   00000018   012082E2           ADD      R2,R2,#+1
   \   0000001C   200052E3           CMP      R2,#+32
   \   00000020   F7FFFFBA           BLT      ??addCSMid_0
    111          	return -1;
   \   00000024   0000E0E3           MVN      R0,#+0
   \   00000028   1EFF2FE1           BX       LR               ;; return
    112          }

   \                                 In segment CODE, align 4, keep-with-next
    113          void addCSMidForced0(unsigned int *id_pool, unsigned int id)
    114          {
   \                     addCSMidForced0:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   \   00000004   0040A0E1           MOV      R4,R0
    115          	CloseCSM(id_pool[0]);
   \   00000008   000094E5           LDR      R0,[R4, #+0]
   \   0000000C   0150A0E1           MOV      R5,R1
   \   00000010   FC0100EF           SWI      +508
    116          	id_pool[0]=id;
   \   00000014   005084E5           STR      R5,[R4, #+0]
    117          }
   \   00000018   3080BDE8           POP      {R4,R5,PC}       ;; return

   \                                 In segment CODE, align 4, keep-with-next
    118          void delCSMid(unsigned int *id_pool, unsigned int id)
    119          {
    120          	int i=0;
   \                     delCSMid:
   \   00000000   0020A0E3           MOV      R2,#+0
    121          	for(;i<MAX_DLG;i++)
    122          	{
    123          		if(id_pool[i]==id)
   \                     ??delCSMid_0:
   \   00000004   023190E7           LDR      R3,[R0, +R2, LSL #+2]
   \   00000008   010053E1           CMP      R3,R1
    124          		{
    125          			id_pool[i]=0;
   \   0000000C   0010A003           MOVEQ    R1,#+0
   \   00000010   02118007           STREQ    R1,[R0, +R2, LSL #+2]
    126          			return;
   \   00000014   1EFF2F01           BXEQ     LR
    127          		}
    128          	}
   \   00000018   012082E2           ADD      R2,R2,#+1
   \   0000001C   200052E3           CMP      R2,#+32
   \   00000020   F7FFFFBA           BLT      ??delCSMid_0
   \   00000024   1EFF2FE1           BX       LR               ;; return
    129          }
    130          

   \                                 In segment CODE, align 4, keep-with-next
    131          void closeAllDlgCSM(unsigned int *id_pool)
    132          {
   \                     closeAllDlgCSM:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   \   00000004   0040A0E1           MOV      R4,R0
    133          	int i=0;
   \   00000008   0050A0E3           MOV      R5,#+0
    134          	for(;i<MAX_DLG;i++)
    135          	{
    136          		if(id_pool[i]!=0)
   \                     ??closeAllDlgCSM_0:
   \   0000000C   050194E7           LDR      R0,[R4, +R5, LSL #+2]
   \   00000010   000050E3           CMP      R0,#+0
   \   00000014   0200000A           BEQ      ??closeAllDlgCSM_1
    137          		{
    138          			CloseCSM(id_pool[i]);
   \   00000018   FC0100EF           SWI      +508
    139          			id_pool[i]=0;
   \   0000001C   0000A0E3           MOV      R0,#+0
   \   00000020   050184E7           STR      R0,[R4, +R5, LSL #+2]
    140          		}
    141          	}
   \                     ??closeAllDlgCSM_1:
   \   00000024   015085E2           ADD      R5,R5,#+1
   \   00000028   200055E3           CMP      R5,#+32
   \   0000002C   F6FFFFBA           BLT      ??closeAllDlgCSM_0
    142          }
   \   00000030   3080BDE8           POP      {R4,R5,PC}       ;; return
    143          

   \                                 In segment CODE, align 4, keep-with-next
    144          int IsNoDlg(unsigned int *id_pool)
    145          {
    146          	int i=0;
   \                     IsNoDlg:
   \   00000000   0010A0E3           MOV      R1,#+0
    147          	for(;i<MAX_DLG;i++)
    148          	{
    149          		if(id_pool[i])
   \                     ??IsNoDlg_0:
   \   00000004   012190E7           LDR      R2,[R0, +R1, LSL #+2]
   \   00000008   000052E3           CMP      R2,#+0
    150          			return 0;
   \   0000000C   0000A013           MOVNE    R0,#+0
   \   00000010   1EFF2F11           BXNE     LR
    151          	}
   \   00000014   011081E2           ADD      R1,R1,#+1
   \   00000018   200051E3           CMP      R1,#+32
   \   0000001C   F8FFFFBA           BLT      ??IsNoDlg_0
    152          	return 1;
   \   00000020   0100A0E3           MOV      R0,#+1
   \   00000024   1EFF2FE1           BX       LR               ;; return
    153          }
    154          

   \                                 In segment CODE, align 4, keep-with-next
    155          int IsCsmExist(void *dlg_csm)
    156          {
   \                     IsCsmExist:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   \   00000004   0040A0E1           MOV      R4,R0
    157            int i=0;
   \   00000008   0050A0E3           MOV      R5,#+0
    158            unsigned int id;
    159            for(;i<MAX_DLG;i++)
    160            {
    161              if((id=DlgCsmIDs[i]))
   \                     ??IsCsmExist_0:
   \   0000000C   ........           LDR      R0,??DataTable17  ;; daemon_ipc
   \   00000010   050180E0           ADD      R0,R0,R5, LSL #+2
   \   00000014   3C0090E5           LDR      R0,[R0, #+60]
   \   00000018   000050E3           CMP      R0,#+0
   \   0000001C   0300000A           BEQ      ??IsCsmExist_1
    162              {
    163                if(FindCSMbyID(id)==dlg_csm)
   \   00000020   080100EF           SWI      +264
   \   00000024   040050E1           CMP      R0,R4
    164          	return 1;
   \   00000028   0100A003           MOVEQ    R0,#+1
   \   0000002C   3080BD08           POPEQ    {R4,R5,PC}
    165              }
    166            }
   \                     ??IsCsmExist_1:
   \   00000030   015085E2           ADD      R5,R5,#+1
   \   00000034   200055E3           CMP      R5,#+32
   \   00000038   F3FFFFBA           BLT      ??IsCsmExist_0
    167            return 0;
   \   0000003C   0000A0E3           MOV      R0,#+0
   \   00000040   3080BDE8           POP      {R4,R5,PC}       ;; return
    168          }
    169          

   \                                 In segment CODE, align 4, keep-with-next
    170          int IsHaveDlgGuiOnTop(void)
    171          {
   \                     IsHaveDlgGuiOnTop:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
    172            int i=0;
   \   00000004   0040A0E3           MOV      R4,#+0
    173            unsigned int id;
    174            DLG_CSM *dlg_csm;
    175            SGUI_ID *gs;
    176            for(;i<MAX_DLG;i++)
    177            {
    178              if((id=DlgCsmIDs[i]))
   \                     ??IsHaveDlgGuiOnTop_0:
   \   00000008   ........           LDR      R0,??DataTable17  ;; daemon_ipc
   \   0000000C   040180E0           ADD      R0,R0,R4, LSL #+2
   \   00000010   3C0090E5           LDR      R0,[R0, #+60]
   \   00000014   000050E3           CMP      R0,#+0
   \   00000018   0D00000A           BEQ      ??IsHaveDlgGuiOnTop_1
    179              {
    180                if((dlg_csm=(DLG_CSM *)FindCSMbyID(id)))
   \   0000001C   080100EF           SWI      +264
   \   00000020   000050E3           CMP      R0,#+0
   \   00000024   0A00000A           BEQ      ??IsHaveDlgGuiOnTop_1
    181                {
    182          	gs=(SGUI_ID *)(dlg_csm->gstop);
   \   00000028   2C5090E5           LDR      R5,[R0, #+44]
   \   0000002C   000000EA           B        ??IsHaveDlgGuiOnTop_2
    183          	while(gs)
    184          	{
    185          	  if(IsGuiOnTop(gs->id)) return 1;
    186          	  gs=gs->next;
   \                     ??IsHaveDlgGuiOnTop_3:
   \   00000030   005095E5           LDR      R5,[R5, #+0]
   \                     ??IsHaveDlgGuiOnTop_2:
   \   00000034   000055E3           CMP      R5,#+0
   \   00000038   0500000A           BEQ      ??IsHaveDlgGuiOnTop_1
   \   0000003C   040095E5           LDR      R0,[R5, #+4]
   \   00000040   350100EF           SWI      +309
   \   00000044   000050E3           CMP      R0,#+0
   \   00000048   F8FFFF0A           BEQ      ??IsHaveDlgGuiOnTop_3
   \   0000004C   0100A0E3           MOV      R0,#+1
   \   00000050   3080BDE8           POP      {R4,R5,PC}
    187          	}
    188                }
    189              }
    190            }
   \                     ??IsHaveDlgGuiOnTop_1:
   \   00000054   014084E2           ADD      R4,R4,#+1
   \   00000058   200054E3           CMP      R4,#+32
   \   0000005C   E9FFFFBA           BLT      ??IsHaveDlgGuiOnTop_0
    191            return 0;
   \   00000060   0000A0E3           MOV      R0,#+0
   \   00000064   3080BDE8           POP      {R4,R5,PC}       ;; return
    192          }
    193          

   \                                 In segment CODE, align 4, keep-with-next
    194          int isTheLastDlg(unsigned int *id_pool, unsigned int id)
    195          {
    196          	return 0;
   \                     isTheLastDlg:
   \   00000000   0000A0E3           MOV      R0,#+0
   \   00000004   1EFF2FE1           BX       LR               ;; return
    197          }
    198          
    199          //---------------------------------------
    200          

   \                                 In segment DATA_C, align 4, align-sorted
    201          const IPC_REQ smp_ipc=
   \                     smp_ipc:
   \   00000000   ............       DC32 my_ipc_name, my_ipc_name, 0H
   \              ....00000000
    202          {
    203            my_ipc_name,
    204            my_ipc_name,
    205            NULL
    206          };
    207          

   \                                 In segment CODE, align 4, keep-with-next
    208          void SendSimpleIpcMsg(int submess)
    209          {
    210            GBS_SendMessage(MMI_CEPID,MSG_IPC,submess,&smp_ipc);
   \                     SendSimpleIpcMsg:
   \   00000000   1C309FE5           LDR      R3,??SendSimpleIpcMsg_0  ;; smp_ipc
   \   00000004   00402DE9           PUSH     {LR}
   \   00000008   0020A0E1           MOV      R2,R0
   \   0000000C   B010A0E3           MOV      R1,#+176
   \   00000010   DE1C81E3           ORR      R1,R1,#0xDE00
   \   00000014   0900A0E3           MOV      R0,#+9
   \   00000018   420C80E3           ORR      R0,R0,#0x4200
   \   0000001C   000100EF           SWI      +256
    211          }
   \   00000020   0080BDE8           POP      {PC}             ;; return
   \                     ??SendSimpleIpcMsg_0:
   \   00000024   ........           DC32     smp_ipc
    212          //---------------------------------------
    213          //main menu

   \                                 In segment DATA_C, align 4, align-sorted
    214          const int main_menusoftkeys[]={0,1,2};
   \                     main_menusoftkeys:
   \   00000000   000000000100       DC32 0, 1, 2
   \              000002000000
    215          SOFTKEY_DESC main_menu_sk[]=
    216          {
    217            {0x0018,0x0000,(int)LGP_NULL},
    218            {0x0001,0x0000,(int)LGP_NULL},
    219            {0x003D,0x0000,(int)LGP_DOIT_PIC}
    220          };
    221          
    222          

   \                                 In segment DATA_C, align 4, align-sorted
    223          const SOFTKEYSTAB main_menu_skt=
   \                     main_menu_skt:
   \   00000000   ........0000       DC32 main_menu_sk, 0
   \              0000        
    224          {
    225            main_menu_sk,0
    226          };
    227          HEADER_DESC main_menuhdr={0,0,0,0,NULL,(int)LGP_NULL,LGP_NULL};
    228          #define MAIN_MENU_N 6
    229          

   \                                 In segment CODE, align 4, keep-with-next
    230          void mm_newsms(GUI *gui)
    231          {
   \                     mm_newsms:
   \   00000000   00402DE9           PUSH     {LR}
    232          	DLG_CSM *dlg_csm=MenuGetUserPointer(gui);
   \   00000004   E00100EF           SWI      +480
    233          	newSMS(dlg_csm);
   \   00000008   0040BDE8           POP      {LR}             ;; Pop
   \   0000000C   ........           _BF      newSMS,??newSMS??rA  ;; tailcall
    234          }
    235          

   \                                 In segment CODE, align 4, keep-with-next
    236          void mm_insms_n(GUI *gui)
    237          {
   \                     mm_insms_n:
   \   00000000   00402DE9           PUSH     {LR}
    238          	DLG_CSM *dlg_csm=MenuGetUserPointer(gui);
   \   00000004   E00100EF           SWI      +480
    239          	showSMSList(dlg_csm, TYPE_IN_N);
   \   00000008   0310A0E3           MOV      R1,#+3
   \   0000000C   0040BDE8           POP      {LR}             ;; Pop
   \   00000010   ........           _BF      showSMSList,??showSMSList??rA  ;; tailcall
    240          }
    241          

   \                                 In segment CODE, align 4, keep-with-next
    242          void mm_insms_r(GUI *gui)
    243          {
   \                     mm_insms_r:
   \   00000000   00402DE9           PUSH     {LR}
    244          	DLG_CSM *dlg_csm=MenuGetUserPointer(gui);
   \   00000004   E00100EF           SWI      +480
    245          	showSMSList(dlg_csm, TYPE_IN_R);
   \   00000008   0210A0E3           MOV      R1,#+2
   \   0000000C   0040BDE8           POP      {LR}             ;; Pop
   \   00000010   ........           _BF      showSMSList,??showSMSList??rA  ;; tailcall
    246          }
    247          

   \                                 In segment CODE, align 4, keep-with-next
    248          void mm_insms_all(GUI *gui)
    249          {
   \                     mm_insms_all:
   \   00000000   00402DE9           PUSH     {LR}
    250          	DLG_CSM *dlg_csm=MenuGetUserPointer(gui);
   \   00000004   E00100EF           SWI      +480
    251          	showSMSList(dlg_csm, TYPE_IN_ALL);
   \   00000008   0510A0E3           MOV      R1,#+5
   \   0000000C   0040BDE8           POP      {LR}             ;; Pop
   \   00000010   ........           _BF      showSMSList,??showSMSList??rA  ;; tailcall
    252          }
    253          

   \                                 In segment CODE, align 4, keep-with-next
    254          void mm_outsms(GUI *gui)
    255          {
   \                     mm_outsms:
   \   00000000   00402DE9           PUSH     {LR}
    256          	DLG_CSM *dlg_csm=MenuGetUserPointer(gui);
   \   00000004   E00100EF           SWI      +480
    257          	showSMSList(dlg_csm, TYPE_OUT);
   \   00000008   0110A0E3           MOV      R1,#+1
   \   0000000C   0040BDE8           POP      {LR}             ;; Pop
   \   00000010   ........           _BF      showSMSList,??showSMSList??rA  ;; tailcall
    258          }
    259          

   \                                 In segment CODE, align 4, keep-with-next
    260          void mm_draftsms(GUI *gui)
    261          {
   \                     mm_draftsms:
   \   00000000   00402DE9           PUSH     {LR}
    262          	DLG_CSM *dlg_csm=MenuGetUserPointer(gui);
   \   00000004   E00100EF           SWI      +480
    263          	showSMSList(dlg_csm, TYPE_DRAFT);
   \   00000008   0410A0E3           MOV      R1,#+4
   \   0000000C   0040BDE8           POP      {LR}             ;; Pop
   \   00000010   ........           _BF      showSMSList,??showSMSList??rA  ;; tailcall
    264          }
    265          /*
    266          void mm_allsms(GUI *gui)
    267          {
    268          	DLG_CSM *dlg_csm=MenuGetUserPointer(gui);
    269          	showSMSList(dlg_csm, 0);
    270          }
    271          */
    272          unsigned int CreateOthMenu(void *dlg_csm);
    273          

   \                                 In segment CODE, align 4, keep-with-next
    274          void mm_oth(GUI *gui)
    275          {
   \                     mm_oth:
   \   00000000   00402DE9           PUSH     {LR}
    276            DLG_CSM *dlg_csm=MenuGetUserPointer(gui);
   \   00000004   E00100EF           SWI      +480
    277            CreateOthMenu(dlg_csm);
   \   00000008   0040BDE8           POP      {LR}             ;; Pop
   \   0000000C   ........           B        CreateOthMenu    ;; tailcall
    278          }
    279          
    280          
    281          int MENU_TEXT[MAIN_MENU_N]=
    282          {
    283            LGP_NULL,
    284            LGP_NULL,
    285            LGP_NULL,
    286            LGP_NULL,
    287            LGP_NULL,
    288            //LGP_NULL,
    289            LGP_NULL
    290          };
    291          

   \                                 In segment DATA_C, align 4, align-sorted
    292          const MENUPROCS_DESC procs_mmenu[MAIN_MENU_N]=
   \                     procs_mmenu:
   \   00000000   ............       DC32 mm_newsms, mm_insms_n, mm_insms_all, mm_outsms, mm_draftsms
   \              ............
   \              ............
   \              ....        
   \   00000014   ........           DC32 mm_oth
    293          {
    294            mm_newsms,
    295            mm_insms_n,
    296            mm_insms_all,
    297            mm_outsms,
    298            mm_draftsms,
    299            //mm_allsms,
    300            mm_oth,
    301          };
    302          
    303          int MM_ITEM_ICONS[]={0x564,0x564,0x564,0x564,0x564,0x564,0x564,0};
    304          int MM_HDR_ICONS[]={0x5C5, 0};
    305          

   \                                 In segment CODE, align 4, keep-with-next
    306          int main_menu_onkey(void *data, GUI_MSG *msg)
    307          {
   \                     main_menu_onkey:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   \   00000004   0040A0E1           MOV      R4,R0
   \   00000008   0150A0E1           MOV      R5,R1
    308          #pragma swi_number=0x44
    309          __swi __arm void TempLightOn(int x, int y);
    310            int n;
    311            if(!IsUnlocked()) TempLightOn(3, 0x7FFF);
   \   0000000C   430000EF           SWI      +67
   \   00000010   000050E3           CMP      R0,#+0
   \   00000014   0300001A           BNE      ??main_menu_onkey_0
   \   00000018   FF10A0E3           MOV      R1,#+255
   \   0000001C   7F1C81E3           ORR      R1,R1,#0x7F00
   \   00000020   0300A0E3           MOV      R0,#+3
   \   00000024   440000EF           SWI      +68
    312          
    313            if((msg->keys==0x1)/* || (msg->keys==0x28)*/)
   \                     ??main_menu_onkey_0:
   \   00000028   F200D5E1           LDRSH    R0,[R5, #+2]
   \   0000002C   010050E3           CMP      R0,#+1
   \   00000030   0400001A           BNE      ??main_menu_onkey_1
    314            {
    315              void *dlg_csm=MenuGetUserPointer(data);
   \   00000034   0400A0E1           MOV      R0,R4
   \   00000038   E00100EF           SWI      +480
    316              popGS(dlg_csm);
   \   0000003C   ........           _BLF     popGS,??popGS??rA
    317              return 1;
   \   00000040   0100A0E3           MOV      R0,#+1
   \   00000044   3080BDE8           POP      {R4,R5,PC}       ;; return
    318            }
    319            if((msg->keys==0x18)||(msg->keys==0x3D)/*||(msg->keys==0x27)*/)
   \                     ??main_menu_onkey_1:
   \   00000048   180050E3           CMP      R0,#+24
   \   0000004C   3D005013           CMPNE    R0,#+61
   \   00000050   0C00001A           BNE      ??main_menu_onkey_2
    320            {
    321              n=GetCurMenuItem(data);
   \   00000054   0400A0E1           MOV      R0,R4
   \   00000058   8F0100EF           SWI      +399
   \   0000005C   0010A0E1           MOV      R1,R0
    322            DO_P:
    323              if(n<0 || n>=MAIN_MENU_N)
   \                     ??main_menu_onkey_3:
   \   00000060   000051E3           CMP      R1,#+0
   \   00000064   0500004A           BMI      ??main_menu_onkey_4
   \   00000068   060051E3           CMP      R1,#+6
   \   0000006C   030000AA           BGE      ??main_menu_onkey_4
    324                return 0;
    325              procs_mmenu[n](data);
   \   00000070   6C209FE5           LDR      R2,??main_menu_onkey_5  ;; procs_mmenu
   \   00000074   0400A0E1           MOV      R0,R4
   \   00000078   011192E7           LDR      R1,[R2, +R1, LSL #+2]
   \   0000007C   31FF2FE1           BLX      R1
    326              return 0;
   \                     ??main_menu_onkey_4:
   \   00000080   0000A0E3           MOV      R0,#+0
   \   00000084   3080BDE8           POP      {R4,R5,PC}
    327            }
    328            if(msg->gbsmsg->msg==KEY_DOWN)
   \                     ??main_menu_onkey_2:
   \   00000088   040095E5           LDR      R0,[R5, #+4]
   \   0000008C   9320A0E3           MOV      R2,#+147
   \   00000090   041090E5           LDR      R1,[R0, #+4]
   \   00000094   402F82E3           ORR      R2,R2,#0x100
   \   00000098   020051E1           CMP      R1,R2
   \   0000009C   F7FFFF1A           BNE      ??main_menu_onkey_4
    329            {
    330              n=msg->gbsmsg->submess;
   \   000000A0   081090E5           LDR      R1,[R0, #+8]
    331              if(n>='1' && n<='9')
   \   000000A4   310051E3           CMP      R1,#+49
   \   000000A8   030000BA           BLT      ??main_menu_onkey_6
   \   000000AC   3A0051E3           CMP      R1,#+58
   \   000000B0   F2FFFFAA           BGE      ??main_menu_onkey_4
    332              {
    333                n-='1';
   \   000000B4   311041E2           SUB      R1,R1,#+49
    334                goto DO_P;
   \   000000B8   E8FFFFEA           B        ??main_menu_onkey_3
    335              }
    336              if(n=='*')
   \                     ??main_menu_onkey_6:
   \   000000BC   2A0051E3           CMP      R1,#+42
   \   000000C0   EEFFFF1A           BNE      ??main_menu_onkey_4
    337              {
    338                extern int ShowCount(void); //ed_gui.c
    339                UpdateDlgCsmName(MenuGetUserPointer(data), lgp.LGP_STATISTICS);
   \   000000C4   0400A0E1           MOV      R0,R4
   \   000000C8   E00100EF           SWI      +480
   \   000000CC   ........           LDR      R1,??DataTable3  ;; lgp + 240
   \   000000D0   001091E5           LDR      R1,[R1, #+0]
   \   000000D4   ........           BL       UpdateDlgCsmName
    340                ShowCount();
   \   000000D8   ........           _BLF     ShowCount,??ShowCount??rA
   \   000000DC   0000A0E3           MOV      R0,#+0
   \   000000E0   3080BDE8           POP      {R4,R5,PC}
   \                     ??main_menu_onkey_5:
   \   000000E4   ........           DC32     procs_mmenu
    341              }
    342            }
    343            return 0;
    344          }
    345          

   \                                 In segment DATA_C, align 4, align-sorted
    346          const char MM_FORMAT[]="%t%c%d";
   \                     MM_FORMAT:
   \   00000000   257425632564       DC8 "%t%c%d"
   \              00          
   \   00000007   00                 DC8 0

   \                                 In segment CODE, align 4, keep-with-next
    347          void main_menu_itemhndl(void *data, int curitem, void *user_pointer)
    348          {
   \                     main_menu_itemhndl:
   \   00000000   F0472DE9           PUSH     {R4-R10,LR}
    349            void *item=AllocMenuItem(data);
    350            WSHDR *ws=AllocMenuWS(data, 150);
    351            switch(curitem)
   \   00000004   DC809FE5           LDR      R8,??main_menu_itemhndl_1  ;; MENU_TEXT
   \   00000008   DC909FE5           LDR      R9,??main_menu_itemhndl_1+0x4  ;; MM_FORMAT
   \   0000000C   0040A0E1           MOV      R4,R0
   \   00000010   0150A0E1           MOV      R5,R1
   \   00000014   970100EF           SWI      +407
   \   00000018   0060A0E1           MOV      R6,R0
   \   0000001C   9610A0E3           MOV      R1,#+150
   \   00000020   0400A0E1           MOV      R0,R4
   \   00000024   980100EF           SWI      +408
   \   00000028   ........           LDR      R1,??DataTable5  ;; PERCENT_T
   \   0000002C   0070A0E1           MOV      R7,R0
   \   00000030   1DA0A0E3           MOV      R10,#+29
   \   00000034   E0AC8AE3           ORR      R10,R10,#0xE000
   \   00000038   0500A0E1           MOV      R0,R5
   \   0000003C   050050E3           CMP      R0,#+5
   \   00000040   1600008A           BHI      ??main_menu_itemhndl_2
   \   00000044   012F8FE2           ADR      R2,??main_menu_itemhndl_0
   \   00000048   0020D2E7           LDRB     R2,[R2, R0]
   \   0000004C   02F18FE0           ADD      PC,PC,R2, LSL #+2
   \                     ??main_menu_itemhndl_0:
   \   00000050   01030D0F           DC8      +1,+3,+13,+15
   \   00000054   11010000           DC8      +17,+1,+0,+0
    352            {
    353            //case 6:
    354            case 5:
    355            case 0:
    356              wsprintf(ws, PERCENT_T, MENU_TEXT[curitem]);
   \                     ??main_menu_itemhndl_3:
   \   00000058   052198E7           LDR      R2,[R8, +R5, LSL #+2]
   \   0000005C   110000EA           B        ??main_menu_itemhndl_4
    357              break;
    358            case 1:
    359              wsprintf(ws, MM_FORMAT, MENU_TEXT[curitem], 0xE01D, getCountByType(TYPE_IN_N));
   \                     ??main_menu_itemhndl_5:
   \   00000060   0300A0E3           MOV      R0,#+3
   \                     ??main_menu_itemhndl_6:
   \   00000064   ........           _BLF     getCountByType,??getCountByType??rA
   \   00000068   01002DE9           PUSH     {R0}
   \   0000006C   052198E7           LDR      R2,[R8, +R5, LSL #+2]
   \   00000070   0A30A0E1           MOV      R3,R10
   \   00000074   0910A0E1           MOV      R1,R9
   \   00000078   0700A0E1           MOV      R0,R7
   \   0000007C   240100EF           SWI      +292
   \   00000080   04D08DE2           ADD      SP,SP,#+4
   \   00000084   090000EA           B        ??main_menu_itemhndl_7
    360              break;
    361            case 2:
    362              wsprintf(ws, MM_FORMAT, MENU_TEXT[curitem], 0xE01D, getCountByType(TYPE_IN_ALL));
   \                     ??main_menu_itemhndl_8:
   \   00000088   0500A0E3           MOV      R0,#+5
   \   0000008C   F4FFFFEA           B        ??main_menu_itemhndl_6
    363              break;
    364            case 3:
    365              wsprintf(ws, MM_FORMAT, MENU_TEXT[curitem], 0xE01D, getCountByType(TYPE_OUT));
   \                     ??main_menu_itemhndl_9:
   \   00000090   0100A0E3           MOV      R0,#+1
   \   00000094   F2FFFFEA           B        ??main_menu_itemhndl_6
    366              break;
    367            case 4:
    368              wsprintf(ws, MM_FORMAT, MENU_TEXT[curitem], 0xE01D, getCountByType(TYPE_DRAFT));
   \                     ??main_menu_itemhndl_10:
   \   00000098   0400A0E3           MOV      R0,#+4
   \   0000009C   F0FFFFEA           B        ??main_menu_itemhndl_6
    369              break;
    370            //case 5:
    371            //  wsprintf(ws, MM_FORMAT, MENU_TEXT[curitem], 0xE01D, getCountByType(0));
    372            //  break;
    373            default:
    374              wsprintf(ws, PERCENT_T, lgp.LGP_ERR);
   \                     ??main_menu_itemhndl_2:
   \   000000A0   48009FE5           LDR      R0,??main_menu_itemhndl_1+0x8  ;; lgp + 12
   \   000000A4   002090E5           LDR      R2,[R0, #+0]
   \                     ??main_menu_itemhndl_4:
   \   000000A8   0700A0E1           MOV      R0,R7
   \   000000AC   240100EF           SWI      +292
    375              break;
    376            }
    377            SetMenuItemIconArray(data, item, MM_ITEM_ICONS);
   \                     ??main_menu_itemhndl_7:
   \   000000B0   182088E2           ADD      R2,R8,#+24
   \   000000B4   0610A0E1           MOV      R1,R6
   \   000000B8   0400A0E1           MOV      R0,R4
   \   000000BC   990100EF           SWI      +409
    378            SetMenuItemIcon(data, curitem, curitem);
   \   000000C0   0520A0E1           MOV      R2,R5
   \   000000C4   0510A0E1           MOV      R1,R5
   \   000000C8   0400A0E1           MOV      R0,R4
   \   000000CC   950100EF           SWI      +405
    379            SetMenuItemText(data, item, ws, curitem);
   \   000000D0   0530A0E1           MOV      R3,R5
   \   000000D4   0720A0E1           MOV      R2,R7
   \   000000D8   0610A0E1           MOV      R1,R6
   \   000000DC   0400A0E1           MOV      R0,R4
   \   000000E0   9A0100EF           SWI      +410
    380          }
   \   000000E4   F087BDE8           POP      {R4-R10,PC}      ;; return
   \                     ??main_menu_itemhndl_1:
   \   000000E8   ........           DC32     MENU_TEXT
   \   000000EC   ........           DC32     MM_FORMAT
   \   000000F0   ........           DC32     lgp + 12

   \                                 In segment CODE, align 4, keep-with-next
    381          void main_menu_ghook(void *gui, int cmd)
    382          {
   \                     main_menu_ghook:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
   \   00000004   0040A0E1           MOV      R4,R0
    383            if(cmd==5)
   \   00000008   050051E3           CMP      R1,#+5
   \   0000000C   0400001A           BNE      ??main_menu_ghook_0
    384            {
    385              void *dlg_csm=MenuGetUserPointer(gui);
   \   00000010   E00100EF           SWI      +480
    386              UpdateDlgCsmName(dlg_csm, lgp.LGP_MSS_MAINMENU);
   \   00000014   4C109FE5           LDR      R1,??main_menu_ghook_1  ;; lgp + 260
   \   00000018   001091E5           LDR      R1,[R1, #+0]
   \   0000001C   ........           BL       UpdateDlgCsmName
   \   00000020   7080BDE8           POP      {R4-R6,PC}
    387            }
    388            if(cmd==7)
   \                     ??main_menu_ghook_0:
   \   00000024   070051E3           CMP      R1,#+7
   \   00000028   0A00001A           BNE      ??main_menu_ghook_2
    389            {
    390              SetHeaderIcon(GetHeaderPointer(gui), MM_HDR_ICONS, malloc_adr(), mfree_adr());
   \   0000002C   158000EF           SWI      +32789
   \   00000030   0050A0E1           MOV      R5,R0
   \   00000034   148000EF           SWI      +32788
   \   00000038   0060A0E1           MOV      R6,R0
   \   0000003C   0400A0E1           MOV      R0,R4
   \   00000040   AE0200EF           SWI      +686
   \   00000044   20109FE5           LDR      R1,??main_menu_ghook_1+0x4  ;; MM_HDR_ICONS
   \   00000048   0530A0E1           MOV      R3,R5
   \   0000004C   0620A0E1           MOV      R2,R6
   \   00000050   BA0200EF           SWI      +698
   \   00000054   7080BDE8           POP      {R4-R6,PC}
    391            }
    392            if(cmd==0xA)
   \                     ??main_menu_ghook_2:
   \   00000058   0A0051E3           CMP      R1,#+10
   \   0000005C   7080BD18           POPNE    {R4-R6,PC}
    393            {
    394              DisableIDLETMR();
   \   00000060   7F0100EF           SWI      +383
    395            }
    396          }
   \   00000064   7080BDE8           POP      {R4-R6,PC}       ;; return
   \                     ??main_menu_ghook_1:
   \   00000068   ........           DC32     lgp + 260
   \   0000006C   ........           DC32     MM_HDR_ICONS

   \                                 In segment DATA_C, align 4, align-sorted
    397          const MENU_DESC main_menu=
   \                     main_menu:
   \   00000000   08000000....       DC32 8, main_menu_onkey, main_menu_ghook, 0H, main_menusoftkeys
   \              ............
   \              00000000....
   \              ....        
   \   00000014   ........1100       DC32 main_menu_skt, 17, main_menu_itemhndl, 0H, 0H, 6
   \              0000........
   \              000000000000
   \              000006000000
    398          {
    399            8,main_menu_onkey,main_menu_ghook,NULL,
    400            main_menusoftkeys,
    401            &main_menu_skt,
    402            0x11,//
    403            main_menu_itemhndl,
    404            NULL,//main_menuitems,//menuitems,
    405            NULL, //main_menuprocs,//menuprocs,
    406            MAIN_MENU_N
    407          };
    408          

   \                                 In segment CODE, align 4, keep-with-next
    409          int CreateMainMenu(DLG_CSM *dlg_csm)
    410          {
   \                     CreateMainMenu:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
    411            int id;
    412            patch_header(&main_menuhdr);
   \   00000004   5C509FE5           LDR      R5,??CreateMainMenu_0  ;; main_menuhdr
   \   00000008   0040A0E1           MOV      R4,R0
   \   0000000C   0000A0E3           MOV      R0,#+0
   \   00000010   B000C5E1           STRH     R0,[R5, #+0]
   \   00000014   1800A0E3           MOV      R0,#+24
   \   00000018   B200C5E1           STRH     R0,[R5, #+2]
   \   0000001C   888100EF           SWI      +33160
   \   00000020   010040E2           SUB      R0,R0,#+1
   \   00000024   B400C5E1           STRH     R0,[R5, #+4]
   \   00000028   8A8100EF           SWI      +33162
   \   0000002C   170080E2           ADD      R0,R0,#+23
   \   00000030   B600C5E1           STRH     R0,[R5, #+6]
    413            id=CreateSLMenu(&main_menu, &main_menuhdr, 0, MAIN_MENU_N, dlg_csm);
   \   00000034   0400A0E1           MOV      R0,R4
   \   00000038   01002DE9           PUSH     {R0}
   \   0000003C   28009FE5           LDR      R0,??CreateMainMenu_0+0x4  ;; main_menu
   \   00000040   0630A0E3           MOV      R3,#+6
   \   00000044   0020A0E3           MOV      R2,#+0
   \   00000048   0510A0E1           MOV      R1,R5
   \   0000004C   ........           _BLF     CreateSLMenu,??CreateSLMenu??rA
   \   00000050   0050A0E1           MOV      R5,R0
    414            pushGS(dlg_csm, id);
   \   00000054   0510A0E1           MOV      R1,R5
   \   00000058   0400A0E1           MOV      R0,R4
   \   0000005C   ........           _BLF     pushGS,??pushGS??rA
    415            return id;
   \   00000060   0500A0E1           MOV      R0,R5
   \   00000064   3280BDE8           POP      {R1,R4,R5,PC}    ;; return
   \                     ??CreateMainMenu_0:
   \   00000068   ........           DC32     main_menuhdr
   \   0000006C   ........           DC32     main_menu
    416          }
    417          
    418          //--------------------------------------------------
    419          

   \                                 In segment CODE, align 4, keep-with-next
    420          int dialogcsm_onmessage(CSM_RAM *data,GBS_MSG* msg)
    421          {
    422          	DLG_CSM *csm=(DLG_CSM *)data;
    423          	if(msg->msg==MSG_GUI_DESTROYED)
   \                     dialogcsm_onmessage:
   \   00000000   042091E5           LDR      R2,[R1, #+4]
   \   00000004   0E30A0E3           MOV      R3,#+14
   \   00000008   643C83E3           ORR      R3,R3,#0x6400
   \   0000000C   030052E1           CMP      R2,R3
   \   00000010   0400001A           BNE      ??dialogcsm_onmessage_0
    424          	{
    425          		if((int)msg->data0==csm->gui_id)
   \   00000014   0C1091E5           LDR      R1,[R1, #+12]
   \   00000018   282090E5           LDR      R2,[R0, #+40]
   \   0000001C   020051E1           CMP      R1,R2
    426          			data->state=-3;
   \   00000020   0210E003           MVNEQ    R1,#+2
   \   00000024   10108005           STREQ    R1,[R0, #+16]
    427          	}
    428          	return 1;
   \                     ??dialogcsm_onmessage_0:
   \   00000028   0100A0E3           MOV      R0,#+1
   \   0000002C   1EFF2FE1           BX       LR               ;; return
    429          }
    430          
    431          static unsigned short dialogcsm_name_body[32]={7,'M','y','S','M','S','Y','S'};

   \                                 In segment CODE, align 4, keep-with-next
    432          void UpdateDlgCsmName(DLG_CSM *csm, const char *lgp)
    433          {
   \                     UpdateDlgCsmName:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
    434            DLGCSM_DESC *dcd=csm->csm.constr;
    435            WSHDR *name=&dcd->name;
   \   00000004   080090E5           LDR      R0,[R0, #+8]
   \   00000008   0140A0E1           MOV      R4,R1
   \   0000000C   285080E2           ADD      R5,R0,#+40
    436            if(!name->wsbody || name->wsbody==dialogcsm_name_body)
   \   00000010   000095E5           LDR      R0,[R5, #+0]
   \   00000014   000050E3           CMP      R0,#+0
   \   00000018   24109F15           LDRNE    R1,??UpdateDlgCsmName_0  ;; daemon_ipc + 336
   \   0000001C   01005011           CMPNE    R0,R1
   \   00000020   0200001A           BNE      ??UpdateDlgCsmName_1
    437              name->wsbody=malloc(32*sizeof(short));
   \   00000024   4000A0E3           MOV      R0,#+64
   \   00000028   140000EF           SWI      +20
   \   0000002C   000085E5           STR      R0,[R5, #+0]
    438            wsprintf(name, PERCENT_T, lgp);
   \                     ??UpdateDlgCsmName_1:
   \   00000030   ........           LDR      R1,??DataTable5  ;; PERCENT_T
   \   00000034   0420A0E1           MOV      R2,R4
   \   00000038   0500A0E1           MOV      R0,R5
   \   0000003C   240100EF           SWI      +292
    439          }
   \   00000040   3080BDE8           POP      {R4,R5,PC}       ;; return
   \                     ??UpdateDlgCsmName_0:
   \   00000044   ........           DC32     daemon_ipc + 336
    440          

   \                                 In segment CODE, align 4, keep-with-next
    441          static void dialogcsm_oncreate(CSM_RAM *data)
    442          {
   \                     dialogcsm_oncreate:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
    443            DLG_CSM *csm=(DLG_CSM *)data;
    444            csm->gstop=0;
    445          /*  if(
    446               (IPC_SUB_MSG!=SMSYS_IPC_FVIEW)
    447                 &&(IPC_SUB_MSG!=SMSYS_IPC_NEWSMS)
    448          	 &&(IPC_SUB_MSG!=SMSYS_IPC_NEWSMS_NUM)
    449          	   &&(IPC_SUB_MSG!=SMSYS_IPC_SEND_UTF8)
    450          	     &&(IPC_SUB_MSG!=SMSYS_IPC_NEW_IN_WIN)
    451          	       )
    452            {
    453              readAllSMS();
    454            }*/
    455            switch(IPC_SUB_MSG)
   \   00000004   ........           LDR      R5,??DataTable17  ;; daemon_ipc
   \   00000008   0040A0E1           MOV      R4,R0
   \   0000000C   0060A0E3           MOV      R6,#+0
   \   00000010   2C6084E5           STR      R6,[R4, #+44]
   \   00000014   201095E5           LDR      R1,[R5, #+32]
   \   00000018   0270E0E3           MVN      R7,#+2
   \   0000001C   0100A0E1           MOV      R0,R1
   \   00000020   900050E3           CMP      R0,#+144
   \   00000024   8200008A           BHI      ??dialogcsm_oncreate_1
   \   00000028   012F8FE2           ADR      R2,??dialogcsm_oncreate_0
   \   0000002C   0020D2E7           LDRB     R2,[R2, R0]
   \   00000030   02F18FE0           ADD      PC,PC,R2, LSL #+2
   \                     ??dialogcsm_oncreate_0:
   \   00000034   2424282B           DC8      +36,+36,+40,+43
   \   00000038   2F333537           DC8      +47,+51,+53,+55
   \   0000003C   3C427F7F           DC8      +60,+66,+127,+127
   \   00000040   7F7F7F7F           DC8      +127,+127,+127,+127
   \   00000044   7F7F7F7F           DC8      +127,+127,+127,+127
   \   00000048   7F7F7F7F           DC8      +127,+127,+127,+127
   \   0000004C   7F7F7F7F           DC8      +127,+127,+127,+127
   \   00000050   7F7F7F7F           DC8      +127,+127,+127,+127
   \   00000054   7F7F7F7F           DC8      +127,+127,+127,+127
   \   00000058   7F7F7F7F           DC8      +127,+127,+127,+127
   \   0000005C   7F7F7F7F           DC8      +127,+127,+127,+127
   \   00000060   7F7F7F7F           DC8      +127,+127,+127,+127
   \   00000064   7F7F7F7F           DC8      +127,+127,+127,+127
   \   00000068   7F7F7F7F           DC8      +127,+127,+127,+127
   \   0000006C   7F7F7F7F           DC8      +127,+127,+127,+127
   \   00000070   7F7F7F7F           DC8      +127,+127,+127,+127
   \   00000074   7F7F7F7F           DC8      +127,+127,+127,+127
   \   00000078   7F7F7F7F           DC8      +127,+127,+127,+127
   \   0000007C   7F7F7F7F           DC8      +127,+127,+127,+127
   \   00000080   7F7F7F7F           DC8      +127,+127,+127,+127
   \   00000084   7F7F7F7F           DC8      +127,+127,+127,+127
   \   00000088   7F7F7F7F           DC8      +127,+127,+127,+127
   \   0000008C   7F7F7F7F           DC8      +127,+127,+127,+127
   \   00000090   7F7F7F7F           DC8      +127,+127,+127,+127
   \   00000094   7F7F7F7F           DC8      +127,+127,+127,+127
   \   00000098   7F7F7F7F           DC8      +127,+127,+127,+127
   \   0000009C   7F7F7F7F           DC8      +127,+127,+127,+127
   \   000000A0   7F7F7F7F           DC8      +127,+127,+127,+127
   \   000000A4   7F7F7F7F           DC8      +127,+127,+127,+127
   \   000000A8   7F7F7F7F           DC8      +127,+127,+127,+127
   \   000000AC   7F7F7F7F           DC8      +127,+127,+127,+127
   \   000000B0   7F7F7F7F           DC8      +127,+127,+127,+127
   \   000000B4   7F464954           DC8      +127,+70,+73,+84
   \   000000B8   5F5F5F5F           DC8      +95,+95,+95,+95
   \   000000BC   677F7F7F           DC8      +103,+127,+127,+127
   \   000000C0   7F7F7F7F           DC8      +127,+127,+127,+127
   \   000000C4   72000000           DC8      +114,+0,+0,+0
    456            {
    457            case MY_SMSYS_IPC_START:
    458            case SMSYS_IPC_MAIN:
    459              //csm->gui_id=CreateMainMenu(csm);
    460              csm->gui_id=CreateTabMenu(csm);
   \                     ??dialogcsm_oncreate_2:
   \   000000C8   0400A0E1           MOV      R0,R4
   \   000000CC   ........           _BLF     CreateTabMenu,??CreateTabMenu??rA
   \                     ??dialogcsm_oncreate_3:
   \   000000D0   280084E5           STR      R0,[R4, #+40]
   \   000000D4   570000EA           B        ??dialogcsm_oncreate_4
    461              break;
    462            case SMSYS_IPC_NEWSMS:
    463              csm->gui_id=newSMS(csm);
   \                     ??dialogcsm_oncreate_5:
   \   000000D8   0400A0E1           MOV      R0,R4
   \   000000DC   ........           _BLF     newSMS,??newSMS??rA
   \   000000E0   FAFFFFEA           B        ??dialogcsm_oncreate_3
    464              break;
    465            case SMSYS_IPC_IN_NEW:
    466              csm->gui_id=showSMSList(csm, TYPE_IN_N);
   \                     ??dialogcsm_oncreate_6:
   \   000000E4   0310A0E3           MOV      R1,#+3
   \                     ??dialogcsm_oncreate_7:
   \   000000E8   0400A0E1           MOV      R0,R4
   \   000000EC   ........           _BLF     showSMSList,??showSMSList??rA
   \   000000F0   F6FFFFEA           B        ??dialogcsm_oncreate_3
    467              break;
    468            case SMSYS_IPC_IN_RD:
    469              csm->gui_id=showSMSList(csm, TYPE_IN_R);
   \                     ??dialogcsm_oncreate_8:
   \   000000F4   0210A0E3           MOV      R1,#+2
   \                     ??dialogcsm_oncreate_9:
   \   000000F8   0400A0E1           MOV      R0,R4
   \   000000FC   ........           _BLF     showSMSList,??showSMSList??rA
   \   00000100   F2FFFFEA           B        ??dialogcsm_oncreate_3
    470              break;
    471            case SMSYS_IPC_OUT:
    472              csm->gui_id=showSMSList(csm, TYPE_OUT);
   \                     ??dialogcsm_oncreate_10:
   \   00000104   0110A0E3           MOV      R1,#+1
   \   00000108   F6FFFFEA           B        ??dialogcsm_oncreate_7
    473              break;
    474            case SMSYS_IPC_DRAFT:
    475              csm->gui_id=showSMSList(csm, TYPE_DRAFT);
   \                     ??dialogcsm_oncreate_11:
   \   0000010C   0410A0E3           MOV      R1,#+4
   \   00000110   F8FFFFEA           B        ??dialogcsm_oncreate_9
    476              break;
    477            case SMSYS_IPC_ALL:
    478              csm->gui_id=showSMSList(csm, 0);
   \                     ??dialogcsm_oncreate_12:
   \   00000114   0010A0E3           MOV      R1,#+0
   \   00000118   0400A0E1           MOV      R0,R4
   \   0000011C   ........           _BLF     showSMSList,??showSMSList??rA
   \   00000120   280084E5           STR      R0,[R4, #+40]
   \   00000124   430000EA           B        ??dialogcsm_oncreate_4
    479              break;
    480            case SMSYS_IPC_TLAST:
    481              if(!(csm->gui_id=viewTheLastNew(csm)))
   \                     ??dialogcsm_oncreate_13:
   \   00000128   0400A0E1           MOV      R0,R4
   \   0000012C   ........           _BLF     viewTheLastNew,??viewTheLastNew??rA
   \                     ??dialogcsm_oncreate_14:
   \   00000130   280084E5           STR      R0,[R4, #+40]
   \   00000134   000050E3           CMP      R0,#+0
   \   00000138   3E00001A           BNE      ??dialogcsm_oncreate_4
    482                data->state=-3;//csm->gui_id=CreateTabMenu(csm);
   \   0000013C   3C0000EA           B        ??dialogcsm_oncreate_1
    483                //csm->gui_id=CreateMainMenu(csm);
    484              break;
    485            case SMSYS_IPC_IN_ALL:
    486              csm->gui_id=showSMSList(csm, TYPE_IN_ALL);
   \                     ??dialogcsm_oncreate_15:
   \   00000140   0510A0E3           MOV      R1,#+5
   \   00000144   0400A0E1           MOV      R0,R4
   \   00000148   ........           _BLF     showSMSList,??showSMSList??rA
   \   0000014C   DFFFFFEA           B        ??dialogcsm_oncreate_3
    487              break;
    488            case SMSYS_IPC_NEW_IN_WIN:
    489              if(!(csm->gui_id=StartIncomingWin(csm)))
   \                     ??dialogcsm_oncreate_16:
   \   00000150   0400A0E1           MOV      R0,R4
   \   00000154   ........           _BLF     StartIncomingWin,??StartIncomingWin??rA
   \   00000158   F4FFFFEA           B        ??dialogcsm_oncreate_14
    490                data->state=-3; //close
    491              break;
    492            case SMSYS_IPC_NEWSMS_NUM:
    493              if((!num_from_ipc)||(!(csm->gui_id=newSMSWithNum(csm, num_from_ipc))))
   \                     ??dialogcsm_oncreate_17:
   \   0000015C   241095E5           LDR      R1,[R5, #+36]
   \   00000160   000051E3           CMP      R1,#+0
   \   00000164   0400000A           BEQ      ??dialogcsm_oncreate_18
   \   00000168   0400A0E1           MOV      R0,R4
   \   0000016C   ........           _BLF     newSMSWithNum,??newSMSWithNum??rA
   \   00000170   280084E5           STR      R0,[R4, #+40]
   \   00000174   000050E3           CMP      R0,#+0
   \   00000178   0000001A           BNE      ??dialogcsm_oncreate_19
    494                data->state=-3;//csm->gui_id=CreateTabMenu(csm);//csm->gui_id=CreateMainMenu(csm);
   \                     ??dialogcsm_oncreate_18:
   \   0000017C   107084E5           STR      R7,[R4, #+16]
    495              num_from_ipc=0;
   \                     ??dialogcsm_oncreate_19:
   \   00000180   246085E5           STR      R6,[R5, #+36]
   \   00000184   2B0000EA           B        ??dialogcsm_oncreate_4
    496              break;
    497            case SMSYS_IPC_SEND_UTF8:
    498              if((!text_utf8)||(!(csm->gui_id=newSMSWithUtf8Text(csm, text_utf8))))
   \                     ??dialogcsm_oncreate_20:
   \   00000188   281095E5           LDR      R1,[R5, #+40]
   \   0000018C   000051E3           CMP      R1,#+0
   \   00000190   0400000A           BEQ      ??dialogcsm_oncreate_21
   \   00000194   0400A0E1           MOV      R0,R4
   \   00000198   ........           _BLF     newSMSWithUtf8Text,??newSMSWithUtf8Text??rA
   \   0000019C   280084E5           STR      R0,[R4, #+40]
   \   000001A0   000050E3           CMP      R0,#+0
   \   000001A4   0000001A           BNE      ??dialogcsm_oncreate_22
    499                data->state=-3;//csm->gui_id=CreateTabMenu(csm);//csm->gui_id=CreateMainMenu(csm);
   \                     ??dialogcsm_oncreate_21:
   \   000001A8   107084E5           STR      R7,[R4, #+16]
    500              text_utf8=0;
   \                     ??dialogcsm_oncreate_22:
   \   000001AC   286085E5           STR      R6,[R5, #+40]
   \   000001B0   200000EA           B        ??dialogcsm_oncreate_4
    501              break;
    502            case SMSYS_IPC_QN_OPMSG:
    503            case SMSYS_IPC_QR_OPMSG:
    504            case SMSYS_IPC_VIEW_OPMSG:
    505            case SMSYS_IPC_REPLY_OPMSG:
    506              if(!(csm->gui_id=DoByOpmsgId(csm, IPC_SUB_MSG, opmsg_id)))
   \                     ??dialogcsm_oncreate_23:
   \   000001B4   2C2095E5           LDR      R2,[R5, #+44]
   \   000001B8   0400A0E1           MOV      R0,R4
   \   000001BC   ........           _BLF     DoByOpmsgId,??DoByOpmsgId??rA
   \   000001C0   280084E5           STR      R0,[R4, #+40]
   \   000001C4   000050E3           CMP      R0,#+0
    507                data->state=-3;//csm->gui_id=CreateTabMenu(csm);//csm->gui_id=CreateMainMenu(csm);
   \   000001C8   10708405           STREQ    R7,[R4, #+16]
    508              opmsg_id=0;
   \   000001CC   2C6085E5           STR      R6,[R5, #+44]
   \   000001D0   180000EA           B        ??dialogcsm_oncreate_4
    509              break;
    510            case SMSYS_IPC_SEND_WS:
    511              if(!text_ws || !(csm->gui_id=CreateSmsWS(csm, text_ws)))
   \                     ??dialogcsm_oncreate_24:
   \   000001D4   301095E5           LDR      R1,[R5, #+48]
   \   000001D8   000051E3           CMP      R1,#+0
   \   000001DC   0400000A           BEQ      ??dialogcsm_oncreate_25
   \   000001E0   0400A0E1           MOV      R0,R4
   \   000001E4   ........           _BLF     CreateSmsWS,??CreateSmsWS??rA
   \   000001E8   280084E5           STR      R0,[R4, #+40]
   \   000001EC   000050E3           CMP      R0,#+0
   \   000001F0   0000001A           BNE      ??dialogcsm_oncreate_26
    512                data->state=-3;
   \                     ??dialogcsm_oncreate_25:
   \   000001F4   107084E5           STR      R7,[R4, #+16]
    513              text_ws=0;
   \                     ??dialogcsm_oncreate_26:
   \   000001F8   306085E5           STR      R6,[R5, #+48]
   \   000001FC   0D0000EA           B        ??dialogcsm_oncreate_4
    514              break;
    515            case SMSYS_IPC_FVIEW:
    516              if (!strlen(filename) || !(csm->gui_id=ViewFile(csm, filename)))
   \                     ??dialogcsm_oncreate_27:
   \   00000200   D00085E2           ADD      R0,R5,#+208
   \   00000204   1B0000EF           SWI      +27
   \   00000208   000050E3           CMP      R0,#+0
   \   0000020C   0500000A           BEQ      ??dialogcsm_oncreate_28
   \   00000210   D01085E2           ADD      R1,R5,#+208
   \   00000214   0400A0E1           MOV      R0,R4
   \   00000218   ........           _BLF     ViewFile,??ViewFile??rA
   \   0000021C   280084E5           STR      R0,[R4, #+40]
   \   00000220   000050E3           CMP      R0,#+0
   \   00000224   0000001A           BNE      ??dialogcsm_oncreate_29
    517                data->state=-3; //close
   \                     ??dialogcsm_oncreate_28:
   \   00000228   107084E5           STR      R7,[R4, #+16]
    518              //{
    519              //  readAllSMS();
    520              //  csm->gui_id=CreateMainMenu(csm);
    521              //}
    522              filename[0]=0;
   \                     ??dialogcsm_oncreate_29:
   \   0000022C   D060C5E5           STRB     R6,[R5, #+208]
   \   00000230   000000EA           B        ??dialogcsm_oncreate_4
    523              break;
    524            default:
    525              data->state=-3;//csm->gui_id=CreateTabMenu(csm);//csm->gui_id=CreateMainMenu(csm);
   \                     ??dialogcsm_oncreate_1:
   \   00000234   107084E5           STR      R7,[R4, #+16]
    526            }
    527            if(addCSMid(DlgCsmIDs, csm->csm.id)<0)
   \                     ??dialogcsm_oncreate_4:
   \   00000238   0C1094E5           LDR      R1,[R4, #+12]
   \   0000023C   3C0085E2           ADD      R0,R5,#+60
   \   00000240   ........           BL       addCSMid
   \   00000244   000050E3           CMP      R0,#+0
   \   00000248   F080BD58           POPPL    {R4-R7,PC}
    528              addCSMidForced0(DlgCsmIDs, csm->csm.id);
   \   0000024C   0C4094E5           LDR      R4,[R4, #+12]
   \   00000250   3C0095E5           LDR      R0,[R5, #+60]
   \   00000254   FC0100EF           SWI      +508
   \   00000258   3C4085E5           STR      R4,[R5, #+60]
    529          }
   \   0000025C   F080BDE8           POP      {R4-R7,PC}       ;; return
    530          

   \                                 In segment CODE, align 4, keep-with-next
    531          void FreeCsmd(void *csmd)
    532          {
   \                     FreeCsmd:
   \   00000000   00402DE9           PUSH     {LR}
    533          	mfree(csmd);
   \   00000004   150000EF           SWI      +21
    534          }
   \   00000008   0080BDE8           POP      {PC}             ;; return

   \                                 In segment CODE, align 4, keep-with-next
    535          static void dialogcsm_onclose(CSM_RAM *data)
    536          {
   \                     dialogcsm_onclose:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
    537            DLG_CSM *dlg_csm=(DLG_CSM *)data;
    538            DLGCSM_DESC *dcd=dlg_csm->csm.constr;
   \   00000004   084090E5           LDR      R4,[R0, #+8]
    539            delCSMid(DlgCsmIDs, dlg_csm->csm.id);
   \   00000008   0C1090E5           LDR      R1,[R0, #+12]
   \   0000000C   ........           LDR      R5,??DataTable17  ;; daemon_ipc
   \   00000010   3C0085E2           ADD      R0,R5,#+60
   \   00000014   ........           BL       delCSMid
    540            if(dcd->name.wsbody!=dialogcsm_name_body && dcd->name.wsbody!=0)
   \   00000018   280094E5           LDR      R0,[R4, #+40]
   \   0000001C   541F85E2           ADD      R1,R5,#+336
   \   00000020   010050E1           CMP      R0,R1
   \   00000024   00005013           CMPNE    R0,#+0
   \   00000028   0000000A           BEQ      ??dialogcsm_onclose_0
    541              mfree(dcd->name.wsbody);
   \   0000002C   150000EF           SWI      +21
    542            mfree(dcd);
   \                     ??dialogcsm_onclose_0:
   \   00000030   0400A0E1           MOV      R0,R4
   \   00000034   150000EF           SWI      +21
    543          }
   \   00000038   3080BDE8           POP      {R4,R5,PC}       ;; return
    544          

   \                                 In segment DATA_C, align 4, align-sorted
    545          const DLGCSM_DESC DIALOGCSM =
   \                     DIALOGCSM:
   \   00000000   ............       DC32 dialogcsm_onmessage, dialogcsm_oncreate, 0, 0, 0, 0
   \              ....00000000
   \              000000000000
   \              000000000000
   \   00000018   ........3000       DC32 dialogcsm_onclose, 48, 1, minus11, dialogcsm_name_body, 55AACCCCH
   \              000001000000
   \              ............
   \              ....CCCCAA55
   \   00000030   55AA33330000       DC32 3333AA55H, 0
   \              0000        
   \   00000038   1F00               DC16 31
   \   0000003A   0000               DC8 0, 0
    546          {
    547            {
    548              dialogcsm_onmessage,
    549              dialogcsm_oncreate,
    550          #ifdef NEWSGOLD
    551              0,
    552              0,
    553              0,
    554              0,
    555          #endif
    556              dialogcsm_onclose,
    557              sizeof(DLG_CSM),
    558              1,
    559              &minus11
    560            },
    561            {
    562              dialogcsm_name_body,
    563              NAMECSM_MAGIC1,
    564              NAMECSM_MAGIC2,
    565              0x0,
    566              31
    567            }
    568          };
    569          
    570          
    571          GBSTMR ld_tmr;
    572          
    573          int is_readall=0;
    574          extern int CheckAll(void);

   \                                 In segment CODE, align 4, keep-with-next
    575          unsigned int CreateDialogCSM(void)
    576          {
   \                     CreateDialogCSM:
   \   00000000   10402DE9           PUSH     {R4,LR}
   \   00000004   30D04DE2           SUB      SP,SP,#+48
    577            DLG_CSM dlg_csm;
    578            DLGCSM_DESC *dcd=malloc(sizeof(DLGCSM_DESC));
   \   00000008   3C00A0E3           MOV      R0,#+60
   \   0000000C   140000EF           SWI      +20
   \   00000010   0040A0E1           MOV      R4,R0
    579            zeromem(&dlg_csm, sizeof(DLG_CSM));
   \   00000014   3010A0E3           MOV      R1,#+48
   \   00000018   0D00A0E1           MOV      R0,SP
   \   0000001C   1D0100EF           SWI      +285
    580            memcpy(dcd, &DIALOGCSM, sizeof(DLGCSM_DESC));
   \   00000020   84109FE5           LDR      R1,??CreateDialogCSM_0  ;; DIALOGCSM
   \   00000024   3C20A0E3           MOV      R2,#+60
   \   00000028   0400A0E1           MOV      R0,R4
   \   0000002C   1E0100EF           SWI      +286
    581            if(!cltop) SUBPROC((void *)ConstructListN);
   \   00000030   ........           LDR      R0,??DataTable25  ;; cltop
   \   00000034   000090E5           LDR      R0,[R0, #+0]
   \   00000038   000050E3           CMP      R0,#+0
   \   0000003C   0100001A           BNE      ??CreateDialogCSM_1
   \   00000040   ........           LDR      R0,??DataTable26  ;; ConstructListN
   \   00000044   710100EF           SWI      +369
    582            if(IPC_SUB_MSG!=SMSYS_IPC_FVIEW)
   \                     ??CreateDialogCSM_1:
   \   00000048   ........           LDR      R0,??DataTable17  ;; daemon_ipc
   \   0000004C   201090E5           LDR      R1,[R0, #+32]
   \   00000050   900051E3           CMP      R1,#+144
   \   00000054   0C00000A           BEQ      ??CreateDialogCSM_2
    583            {
    584              if(sdltop)
   \   00000058   ........           LDR      R1,??DataTable27  ;; sdltop
   \   0000005C   001091E5           LDR      R1,[R1, #+0]
   \   00000060   000051E3           CMP      R1,#+0
   \   00000064   0400000A           BEQ      ??CreateDialogCSM_3
    585              {
    586                if(!is_readall) SUBPROC((void *)CheckAll);
   \   00000068   BC0090E5           LDR      R0,[R0, #+188]
   \   0000006C   000050E3           CMP      R0,#+0
   \   00000070   0500001A           BNE      ??CreateDialogCSM_2
   \   00000074   34009FE5           LDR      R0,??CreateDialogCSM_0+0x4  ;; CheckAll
   \   00000078   020000EA           B        ??CreateDialogCSM_4
    587              }
    588              else
    589              {
    590                GBS_DelTimer(&ld_tmr);
   \                     ??CreateDialogCSM_3:
   \   0000007C   640F80E2           ADD      R0,R0,#+400
   \   00000080   8C0100EF           SWI      +396
    591                SUBPROC((void *)ReadAllSmsN);
   \   00000084   ........           LDR      R0,??DataTable28  ;; ReadAllSmsN
   \                     ??CreateDialogCSM_4:
   \   00000088   710100EF           SWI      +369
    592              }
    593            }
    594            //if(sdltop && IPC_SUB_MSG!=SMSYS_IPC_FVIEW) SUBPROC((void *)CheckAll);
    595            //if(!sdltop && IPC_SUB_MSG!=SMSYS_IPC_FVIEW) SUBPROC((void *)readAllSMS);
    596            LoadLangPack();
   \                     ??CreateDialogCSM_2:
   \   0000008C   ........           _BLF     LoadLangPack,??LoadLangPack??rA
    597            LoadIconPack();
   \   00000090   ........           _BLF     LoadIconPack,??LoadIconPack??rA
    598            return (CreateCSM(&dcd->csmd,&dlg_csm,2));
   \   00000094   0220A0E3           MOV      R2,#+2
   \   00000098   0D10A0E1           MOV      R1,SP
   \   0000009C   0400A0E1           MOV      R0,R4
   \   000000A0   070100EF           SWI      +263
   \   000000A4   30D08DE2           ADD      SP,SP,#+48
   \   000000A8   1080BDE8           POP      {R4,PC}          ;; return
   \                     ??CreateDialogCSM_0:
   \   000000AC   ........           DC32     DIALOGCSM
   \   000000B0   ........           DC32     CheckAll
    599          }
    600          
    601          

   \                                 In segment DATA_C, align 4, align-sorted
    602          const IPC_REQ my_ipc_n=
   \                     my_ipc_n:
   \   00000000   ............       DC32 my_ipc_name, my_ipc_name, 0H
   \              ....00000000
    603          {
    604          	my_ipc_name,
    605          	my_ipc_name,
    606          	NULL
    607          };
    608          
    609          GBSTMR chk_tmr;
    610          int tindex=0;
    611          int isnewp=0;
    612          //extern int ReadThisSms(int index);
    613          //GBSTMR n_update_tmr;
    614          /*
    615          void CheckNewProc(void)
    616          {
    617            if(IsHaveNewSMS())
    618            {
    619              GBS_SendMessage(MMI_CEPID,MSG_IPC,SMSYS_IPC_NEW_IN_WIN,&my_ipc_n);
    620            }
    621          }
    622          */

   \                                 In segment CODE, align 4, keep-with-next
    623          void DoNewProc(void)
    624          {
   \                     DoNewProc:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
    625            if(tindex)
   \   00000004   ........           LDR      R4,??DataTable17  ;; daemon_ipc
   \   00000008   0050A0E3           MOV      R5,#+0
   \   0000000C   C00094E5           LDR      R0,[R4, #+192]
   \   00000010   000050E3           CMP      R0,#+0
   \   00000014   0200000A           BEQ      ??DoNewProc_0
    626            {
    627              ReadThisSms(tindex, 1);
   \   00000018   0110A0E3           MOV      R1,#+1
   \   0000001C   ........           _BLF     ReadThisSms,??ReadThisSms??rA
    628              tindex=0;
   \   00000020   C05084E5           STR      R5,[R4, #+192]
    629            }
    630            if(CFG_ENA_NOTIFY) GBS_SendMessage(MMI_CEPID,MSG_IPC,SMSYS_IPC_NEW_IN_WIN,&my_ipc_n);
   \                     ??DoNewProc_0:
   \   00000024   ........           LDR      R0,??DataTable19  ;; CFG_ENA_NOTIFY
   \   00000028   000090E5           LDR      R0,[R0, #+0]
   \   0000002C   000050E3           CMP      R0,#+0
   \   00000030   0800000A           BEQ      ??DoNewProc_1
   \   00000034   44309FE5           LDR      R3,??DoNewProc_2  ;; my_ipc_n
   \   00000038   8120A0E3           MOV      R2,#+129
   \   0000003C   B010A0E3           MOV      R1,#+176
   \   00000040   DE1C81E3           ORR      R1,R1,#0xDE00
   \   00000044   0900A0E3           MOV      R0,#+9
   \   00000048   420C80E3           ORR      R0,R0,#0x4200
   \   0000004C   000100EF           SWI      +256
   \   00000050   C45084E5           STR      R5,[R4, #+196]
   \   00000054   3080BDE8           POP      {R4,R5,PC}
    631            else if(!IsNoDlg(DlgCsmIDs))
   \                     ??DoNewProc_1:
   \   00000058   3C0084E2           ADD      R0,R4,#+60
   \   0000005C   ........           BL       IsNoDlg
   \   00000060   000050E3           CMP      R0,#+0
   \   00000064   0300001A           BNE      ??DoNewProc_3
    632            {
    633              //readAllSMS();
    634              if(IsHaveDlgGuiOnTop()) RefreshGUI();
   \   00000068   ........           BL       IsHaveDlgGuiOnTop
   \   0000006C   000050E3           CMP      R0,#+0
   \   00000070   0000000A           BEQ      ??DoNewProc_3
   \   00000074   960100EF           SWI      +406
    635            }
    636            isnewp=0;
   \                     ??DoNewProc_3:
   \   00000078   C45084E5           STR      R5,[R4, #+196]
    637          }
   \   0000007C   3080BDE8           POP      {R4,R5,PC}       ;; return
   \                     ??DoNewProc_2:
   \   00000080   ........           DC32     my_ipc_n
    638          
    639          extern short PLAY_ID;
    640          /*
    641          void UpdateNProc(void)
    642          {
    643          	new_sms_n=(SmsDataRoot())->cnt_in_new_sms_dat;
    644          	if((!IsHaveNewSMS())&&(CFG_ENA_NOTIFY))
    645          	{
    646          		SetVibration(0);
    647          		if(PLAY_ID)
    648          		{
    649          			PlayMelody_StopPlayback(PLAY_ID);
    650          			PLAY_ID=0;
    651          		}
    652          	}
    653          }
    654          */
    655          

   \                                 In segment CODE, align 4, keep-with-next
    656          void UpdateNProc(void)
    657          {
   \                     UpdateNProc:
   \   00000000   10402DE9           PUSH     {R4,LR}
    658            if(!IsNoDlg(DlgCsmIDs))
   \   00000004   ........           LDR      R4,??DataTable17  ;; daemon_ipc
   \   00000008   3C0084E2           ADD      R0,R4,#+60
   \   0000000C   ........           BL       IsNoDlg
   \   00000010   000050E3           CMP      R0,#+0
   \   00000014   1080BD18           POPNE    {R4,PC}
    659            {
    660              //readAllSMS();
    661              if(tindex)
   \   00000018   C00094E5           LDR      R0,[R4, #+192]
   \   0000001C   000050E3           CMP      R0,#+0
   \   00000020   0300000A           BEQ      ??UpdateNProc_0
    662              {
    663                ReadThisSms(tindex, 1);
   \   00000024   0110A0E3           MOV      R1,#+1
   \   00000028   ........           _BLF     ReadThisSms,??ReadThisSms??rA
    664                tindex=0;
   \   0000002C   0000A0E3           MOV      R0,#+0
   \   00000030   C00084E5           STR      R0,[R4, #+192]
    665              }
    666              if(IsHaveDlgGuiOnTop())
   \                     ??UpdateNProc_0:
   \   00000034   ........           BL       IsHaveDlgGuiOnTop
   \   00000038   000050E3           CMP      R0,#+0
   \   0000003C   1080BD08           POPEQ    {R4,PC}
    667              {
    668                RefreshGUI();
   \   00000040   960100EF           SWI      +406
    669                GBS_SendMessage(MMI_CEPID,KEY_DOWN,0x63); //update screen
   \   00000044   6320A0E3           MOV      R2,#+99
   \   00000048   4C1F82E2           ADD      R1,R2,#+304
   \   0000004C   0900A0E3           MOV      R0,#+9
   \   00000050   420C80E3           ORR      R0,R0,#0x4200
   \   00000054   000100EF           SWI      +256
    670              }
    671            }
    672          }
   \   00000058   1080BDE8           POP      {R4,PC}          ;; return
    673          
    674          #pragma inline=forced
    675          int toupper(int c)
    676          {
    677            if ((c>='a')&&(c<='z')) c+='A'-'a';
    678            return(c);
    679          }
    680          #pragma inline
    681          int strcmp_nocase(const char *s1,const char *s2)
    682          {
    683            int i;
    684            int c;
    685            while(!(i=(c=toupper(*s1++))-toupper(*s2++))) if (!c) break;
    686            return(i);
    687          }
    688          /*
    689          int GetIcon(void)
    690          {
    691            int is_file=0, c;
    692            const char *p=CFG_ICONNEW_PATH;
    693            while((c=*p++))
    694            {
    695              if(c<'0' || c>'9')
    696              {
    697                is_file=1;
    698                break;
    699              }
    700            }
    701            p=CFG_ICONNEW_PATH;
    702            if(is_file)
    703            {
    704              if(IsFileExist(p))
    705                return (int)p;
    706            }
    707            else
    708              return (str2int(p));
    709            return 0;
    710          }
    711          */

   \                                 In segment CODE, align 4, keep-with-next
    712          void InitDatPath(void)
    713          {
   \                     InitDatPath:
   \   00000000   F0432DE9           PUSH     {R4-R9,LR}
    714            int x, xl;
    715            strcpy(sms_dat, CFG_SYSTEM_FOLDER);
   \   00000004   98409FE5           LDR      R4,??InitDatPath_0  ;; sms_dat
    716            if((xl=strlen(sms_dat))>0)
    717              x=sms_dat[xl-1];
    718            if((x!='\\')&&(x!='/'))
    719            {
    720              sms_dat[xl]='\\';
    721              sms_dat[xl+1]=0;
    722            }
    723            strcat(sms_dat, "SMS\\SMS.dat");
   \   00000008   98709FE5           LDR      R7,??InitDatPath_0+0x4  ;; `?<Constant "SMS\\\\EMS_Admin.dat">`
   \   0000000C   98909FE5           LDR      R9,??InitDatPath_0+0x8  ;; CFG_SYSTEM_FOLDER
   \   00000010   0400A0E1           MOV      R0,R4
   \   00000014   0910A0E1           MOV      R1,R9
   \   00000018   1A0000EF           SWI      +26
   \   0000001C   0400A0E1           MOV      R0,R4
   \   00000020   1B0000EF           SWI      +27
   \   00000024   010050E3           CMP      R0,#+1
   \   00000028   041080A0           ADDGE    R1,R0,R4
   \   0000002C   018051A5           LDRBGE   R8,[R1, #-1]
   \   00000030   0050A0E3           MOV      R5,#+0
   \   00000034   5C60A0E3           MOV      R6,#+92
   \   00000038   5C0058E3           CMP      R8,#+92
   \   0000003C   2F005813           CMPNE    R8,#+47
   \   00000040   0460C017           STRBNE   R6,[R0, +R4]
   \   00000044   04008010           ADDNE    R0,R0,R4
   \   00000048   0150C015           STRBNE   R5,[R0, #+1]
   \   0000004C   141087E2           ADD      R1,R7,#+20
   \   00000050   0400A0E1           MOV      R0,R4
   \   00000054   170000EF           SWI      +23
    724            strcpy(ems_admin_dat, CFG_SYSTEM_FOLDER);
   \   00000058   0910A0E1           MOV      R1,R9
   \   0000005C   800084E2           ADD      R0,R4,#+128
   \   00000060   1A0000EF           SWI      +26
    725            if((xl=strlen(ems_admin_dat))>0)
   \   00000064   800084E2           ADD      R0,R4,#+128
   \   00000068   1B0000EF           SWI      +27
   \   0000006C   010050E3           CMP      R0,#+1
    726              x=ems_admin_dat[xl-1];
   \   00000070   041080A0           ADDGE    R1,R0,R4
   \   00000074   7F80D1A5           LDRBGE   R8,[R1, #+127]
    727            if((x!='\\')&&(x!='/'))
   \   00000078   5C0058E3           CMP      R8,#+92
   \   0000007C   2F005813           CMPNE    R8,#+47
   \   00000080   0300000A           BEQ      ??InitDatPath_1
    728            {
    729              ems_admin_dat[xl]='\\';
   \   00000084   041080E0           ADD      R1,R0,R4
   \   00000088   8060C1E5           STRB     R6,[R1, #+128]
    730              ems_admin_dat[xl+1]=0;
   \   0000008C   040080E0           ADD      R0,R0,R4
   \   00000090   8150C0E5           STRB     R5,[R0, #+129]
    731            }
    732            strcat(ems_admin_dat, "SMS\\EMS_Admin.dat");
   \                     ??InitDatPath_1:
   \   00000094   0710A0E1           MOV      R1,R7
   \   00000098   800084E2           ADD      R0,R4,#+128
   \   0000009C   170000EF           SWI      +23
    733          }
   \   000000A0   F083BDE8           POP      {R4-R9,PC}       ;; return
   \                     ??InitDatPath_0:
   \   000000A4   ........           DC32     sms_dat
   \   000000A8   ........           DC32     `?<Constant "SMS\\\\EMS_Admin.dat">`
   \   000000AC   ........           DC32     CFG_SYSTEM_FOLDER
    734          
    735          //int NEW_SMS_ICON;

   \                                 In segment CODE, align 4, keep-with-next
    736          void InitSetting(void)
    737          {
   \                     InitSetting:
   \   00000000   00402DE9           PUSH     {LR}
    738            InitConfig();
   \   00000004   ........           _BLF     InitConfig,??InitConfig??rA
    739            InitDatPath();
   \   00000008   0040BDE8           POP      {LR}             ;; Pop
   \   0000000C   ........           B        InitDatPath      ;; tailcall
    740          //  NEW_SMS_ICON=GetIcon();
    741          }

   \                                 In segment DATA_I, align 4, align-sorted
   \                     daemon_ipc:
   \   00000000                      DS8 12
   \   0000000C                      REQUIRE `?<Initializer for daemon_ipc>`
   \                     ipc_data_daemon:
   \   0000000C                      DS8 12
   \   00000018                      REQUIRE `?<Initializer for ipc_data_daemon>`
   \                     DAEMON_CSM_ID:
   \   00000018                      DS8 4
   \   0000001C                      REQUIRE `?<Initializer for DAEMON_CSM_ID>`
   \                     SNEDSMS_CSM_ID:
   \   0000001C                      DS8 4
   \   00000020                      REQUIRE `?<Initializer for SNEDSMS_CSM_ID>`
   \                     IPC_SUB_MSG:
   \   00000020                      DS8 4
   \   00000024                      REQUIRE `?<Initializer for IPC_SUB_MSG>`
   \                     num_from_ipc:
   \   00000024                      DS8 4
   \   00000028                      REQUIRE `?<Initializer for num_from_ipc>`
   \                     text_utf8:
   \   00000028                      DS8 4
   \   0000002C                      REQUIRE `?<Initializer for text_utf8>`
   \                     opmsg_id:
   \   0000002C                      DS8 4
   \   00000030                      REQUIRE `?<Initializer for opmsg_id>`
   \                     text_ws:
   \   00000030                      DS8 4
   \   00000034                      REQUIRE `?<Initializer for text_ws>`
   \                     is_fview:
   \   00000034                      DS8 4
   \   00000038                      REQUIRE `?<Initializer for is_fview>`
   \                     new_sms_n:
   \   00000038                      DS8 4
   \   0000003C                      REQUIRE `?<Initializer for new_sms_n>`
   \                     DlgCsmIDs:
   \   0000003C                      DS8 128
   \   000000BC                      REQUIRE `?<Initializer for DlgCsmIDs>`
   \                     is_readall:
   \   000000BC                      DS8 4
   \   000000C0                      REQUIRE `?<Initializer for is_readall>`
   \                     tindex:
   \   000000C0                      DS8 4
   \   000000C4                      REQUIRE `?<Initializer for tindex>`
   \                     isnewp:
   \   000000C4                      DS8 4
   \   000000C8                      REQUIRE `?<Initializer for isnewp>`
    742          
    743          #ifdef ELKA
    744          
    745          #pragma swi_number=0x36
    746          __swi __arm void SLI_SetState(unsigned char state);
    747          
    748          GBSTMR sli_tmr;
    749          int sli_cnt=0;
   \                     sli_cnt:
   \   000000C8                      DS8 4
   \   000000CC                      REQUIRE `?<Initializer for sli_cnt>`
    750          int sli_sta=0;
   \                     sli_sta:
   \   000000CC                      DS8 4
   \   000000D0                      REQUIRE `?<Initializer for sli_sta>`
   \                     filename:
   \   000000D0                      DS8 128
   \   00000150                      REQUIRE `?<Initializer for filename>`
   \                     dialogcsm_name_body:
   \   00000150                      DS8 64
   \   00000190                      REQUIRE `?<Initializer for dialogcsm_name_body>`
   \                     ld_tmr:
   \   00000190                      DS8 16
   \   000001A0                      REQUIRE `?<Initializer for ld_tmr>`
   \                     chk_tmr:
   \   000001A0                      DS8 16
   \   000001B0                      REQUIRE `?<Initializer for chk_tmr>`
   \                     sli_tmr:
   \   000001B0                      DS8 16
   \   000001C0                      REQUIRE `?<Initializer for sli_tmr>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     dlg_ipc:
   \   00000000                      DS8 12
   \   0000000C                      REQUIRE `?<Initializer for dlg_ipc>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     main_menu_sk:
   \   00000000                      DS8 24
   \   00000018                      REQUIRE `?<Initializer for main_menu_sk>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     main_menuhdr:
   \   00000000                      DS8 20
   \   00000014                      REQUIRE `?<Initializer for main_menuhdr>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     MENU_TEXT:
   \   00000000                      DS8 24
   \   00000018                      REQUIRE `?<Initializer for MENU_TEXT>`
   \                     MM_ITEM_ICONS:
   \   00000018                      DS8 32
   \   00000038                      REQUIRE `?<Initializer for MM_ITEM_ICONS>`

   \                                 In segment DATA_I, align 4, align-sorted
   \                     MM_HDR_ICONS:
   \   00000000                      DS8 8
   \   00000008                      REQUIRE `?<Initializer for MM_HDR_ICONS>`
    751          
    752          

   \                                 In segment CODE, align 4, keep-with-next
    753          void STOP_SLI(void)
    754          {
   \                     STOP_SLI:
   \   00000000   10402DE9           PUSH     {R4,LR}
    755            GBS_DelTimer(&sli_tmr);
   \   00000004   ........           LDR      R4,??DataTable17  ;; daemon_ipc
   \   00000008   6C0F84E2           ADD      R0,R4,#+432
   \   0000000C   8C0100EF           SWI      +396
    756            sli_cnt=0;
   \   00000010   0000A0E3           MOV      R0,#+0
   \   00000014   C80084E5           STR      R0,[R4, #+200]
    757            sli_sta=0;
   \   00000018   CC0084E5           STR      R0,[R4, #+204]
    758            SLI_SetState(0);
   \   0000001C   360000EF           SWI      +54
    759          }
   \   00000020   1080BDE8           POP      {R4,PC}          ;; return
    760          

   \                                 In segment CODE, align 4, keep-with-next
    761          void SLI_PROC(void)
    762          {
   \                     SLI_PROC:
   \   00000000   10402DE9           PUSH     {R4,LR}
    763            if(sli_cnt==1) SLI_SetState(0);
   \   00000004   ........           LDR      R4,??DataTable17  ;; daemon_ipc
   \   00000008   C80094E5           LDR      R0,[R4, #+200]
   \   0000000C   010050E3           CMP      R0,#+1
   \   00000010   0000A003           MOVEQ    R0,#+0
   \   00000014   0200000A           BEQ      ??SLI_PROC_0
    764            else if(sli_cnt==0) SLI_SetState(1);
   \   00000018   000050E3           CMP      R0,#+0
   \   0000001C   0100001A           BNE      ??SLI_PROC_1
   \   00000020   0100A0E3           MOV      R0,#+1
   \                     ??SLI_PROC_0:
   \   00000024   360000EF           SWI      +54
    765            
    766            if(sli_cnt>5) sli_cnt=0;
   \                     ??SLI_PROC_1:
   \   00000028   C80094E5           LDR      R0,[R4, #+200]
   \   0000002C   060050E3           CMP      R0,#+6
   \   00000030   0000A0A3           MOVGE    R0,#+0
    767            else sli_cnt++;
   \   00000034   010080B2           ADDLT    R0,R0,#+1
   \   00000038   C80084E5           STR      R0,[R4, #+200]
    768            if(new_sms_n>0) GBS_StartTimerProc(&sli_tmr, 216/6, SLI_PROC);
   \   0000003C   380094E5           LDR      R0,[R4, #+56]
   \   00000040   010050E3           CMP      R0,#+1
   \   00000044   040000BA           BLT      ??SLI_PROC_2
   \   00000048   14209FE5           LDR      R2,??SLI_PROC_3  ;; SLI_PROC
   \   0000004C   2410A0E3           MOV      R1,#+36
   \   00000050   6C0F84E2           ADD      R0,R4,#+432
   \   00000054   4D0000EF           SWI      +77
   \   00000058   1080BDE8           POP      {R4,PC}
    769            else STOP_SLI();
   \                     ??SLI_PROC_2:
   \   0000005C   ........           BL       STOP_SLI
    770          }
   \   00000060   1080BDE8           POP      {R4,PC}          ;; return
   \                     ??SLI_PROC_3:
   \   00000064   ........           DC32     SLI_PROC
    771          
    772          #endif
    773          
    774          

   \                                 In segment CODE, align 4, keep-with-next
    775          int IsSSOnTop(void)
    776          {
   \                     IsSSOnTop:
   \   00000000   10402DE9           PUSH     {R4,LR}
    777          //  extern SS_RAM *GetScreenSaverRam(void);
    778            SS_RAM *ss_ram;
    779            if(!(ss_ram=GetScreenSaverRAM())) return 0;
   \   00000004   680000EF           SWI      +104
   \   00000008   000050E3           CMP      R0,#+0
   \   0000000C   0100001A           BNE      ??IsSSOnTop_0
   \   00000010   0000A0E3           MOV      R0,#+0
   \   00000014   1080BDE8           POP      {R4,PC}          ;; return
    780            if((ss_ram->ss_gui_id) && IsGuiOnTop(ss_ram->ss_gui_id))
   \                     ??IsSSOnTop_0:
   \   00000018   2C4080E2           ADD      R4,R0,#+44
   \   0000001C   000094E5           LDR      R0,[R4, #+0]
   \   00000020   000050E3           CMP      R0,#+0
   \   00000024   0400000A           BEQ      ??IsSSOnTop_1
   \   00000028   350100EF           SWI      +309
   \   0000002C   000050E3           CMP      R0,#+0
   \   00000030   0100000A           BEQ      ??IsSSOnTop_1
    781              return 1;
   \                     ??IsSSOnTop_2:
   \   00000034   0100A0E3           MOV      R0,#+1
   \   00000038   1080BDE8           POP      {R4,PC}
    782            if((ss_ram->keylock_gui_id) && IsGuiOnTop(ss_ram->keylock_gui_id))
   \                     ??IsSSOnTop_1:
   \   0000003C   040094E5           LDR      R0,[R4, #+4]
   \   00000040   000050E3           CMP      R0,#+0
   \   00000044   1080BD08           POPEQ    {R4,PC}
   \   00000048   350100EF           SWI      +309
   \   0000004C   000050E3           CMP      R0,#+0
   \   00000050   F7FFFF1A           BNE      ??IsSSOnTop_2
   \   00000054   0000A0E3           MOV      R0,#+0
   \   00000058   1080BDE8           POP      {R4,PC}
    783              return 1;
    784            return 0;
    785          }
    786          
    787          

   \                                 In segment CODE, align 4, keep-with-next
    788          int daemoncsm_onmessage(CSM_RAM *data,GBS_MSG* msg)
    789          {
   \                     daemoncsm_onmessage:
   \   00000000   F0472DE9           PUSH     {R4-R10,LR}
   \   00000004   04D04DE2           SUB      SP,SP,#+4
    790          #ifdef NEWSGOLD
    791          
    792          #ifdef ELKA
    793          #define MSG_EMS_FFS_WRITE 0x6105
    794          #else
    795          #define MSG_EMS_FFS_WRITE 0x61CB
    796          #endif
    797          
    798          #ifdef ELKA
    799          #define MSG_EMS_INCOMING 0x6106 //ELKA,smsman
    800          #else
    801          #define MSG_EMS_INCOMING 0x61CC
    802          #define MSG_EMS_INCOMING_2 0x61D6
    803          #endif
    804          
    805          #endif 
    806          //0x61CC ?? SMS_incoming
    807          //Browser-killer,,MSG
    808          
    809          #ifdef ELKA
    810          	//if(/*(CFG_ENA_NOTIFY)&&*/(msg->msg==MSG_EMS_INCOMING)&&IsHaveNewSMS())
    811          #else
    812          	//if(/*(CFG_ENA_NOTIFY)&&*/(msg->msg==MSG_EMS_INCOMING)&&IsHaveNewSMS())
    813          //	if((CFG_ENA_NOTIFY)&&(msg->msg==MSG_EMS_INCOMING_2))
    814          //	if((CFG_ENA_NOTIFY)&&((msg->msg==MSG_EMS_INCOMING) || (msg->msg==MSG_EMS_INCOMING_2)))
    815          #endif
    816          	//{
    817          	//  if(!IsTimerProc(&chk_tmr)) //MSG,.
    818          	//    GBS_StartTimerProc(&chk_tmr, 216/2, DoNewProc);
    819          	//    //GBS_StartTimerProc(&chk_tmr, 216/2, CheckNewProc);
    820          	//}
    821          	if(msg->msg==MSG_EMS_FFS_WRITE)
   \   00000008   08859FE5           LDR      R8,??daemoncsm_onmessage_0  ;; PLAY_ID
   \   0000000C   ........           LDR      R4,??DataTable29  ;; daemon_ipc
   \   00000010   0150A0E1           MOV      R5,R1
   \   00000014   040095E5           LDR      R0,[R5, #+4]
   \   00000018   0170A0E3           MOV      R7,#+1
   \   0000001C   0060A0E3           MOV      R6,#+0
   \   00000020   0510A0E3           MOV      R1,#+5
   \   00000024   611C81E3           ORR      R1,R1,#0x6100
   \   00000028   010050E1           CMP      R0,R1
   \   0000002C   4900001A           BNE      ??daemoncsm_onmessage_1
    822          	{
    823          	  int x;
    824          	  if((int)msg->data1!=0x8)
   \   00000030   101095E5           LDR      R1,[R5, #+16]
   \   00000034   0C0095E5           LDR      R0,[R5, #+12]
   \   00000038   689FA0E3           MOV      R9,#+416
   \   0000003C   080051E3           CMP      R1,#+8
   \   00000040   1000000A           BEQ      ??daemoncsm_onmessage_2
    825          	  {
    826          	    if(IsThisSmsNewIn((int)msg->data0))// SUBPROC((void *)DoNewProc);
   \   00000044   ........           _BLF     IsThisSmsNewIn,??IsThisSmsNewIn??rA
   \   00000048   000050E3           CMP      R0,#+0
   \   0000004C   2300000A           BEQ      ??daemoncsm_onmessage_3
    827          	    {
    828          	      if(IsTimerProc(&chk_tmr)) GBS_DelTimer(&chk_tmr);
   \   00000050   040089E0           ADD      R0,R9,R4
   \   00000054   A60100EF           SWI      +422
   \   00000058   000050E3           CMP      R0,#+0
   \   0000005C   0100000A           BEQ      ??daemoncsm_onmessage_4
   \   00000060   040089E0           ADD      R0,R9,R4
   \   00000064   8C0100EF           SWI      +396
    829          	      isnewp=1;
    830          	      tindex=(int)msg->data0;
    831          	      GBS_StartTimerProc(&chk_tmr, 216/2, DoNewProc);
   \                     ??daemoncsm_onmessage_4:
   \   00000068   AC249FE5           LDR      R2,??daemoncsm_onmessage_0+0x4  ;; DoNewProc
   \   0000006C   C47084E5           STR      R7,[R4, #+196]
   \   00000070   0C0095E5           LDR      R0,[R5, #+12]
   \                     ??daemoncsm_onmessage_5:
   \   00000074   C00084E5           STR      R0,[R4, #+192]
   \   00000078   6C10A0E3           MOV      R1,#+108
   \   0000007C   040089E0           ADD      R0,R9,R4
   \   00000080   4D0000EF           SWI      +77
   \   00000084   150000EA           B        ??daemoncsm_onmessage_3
    832          	    }
    833          	  }
    834          	  else/* if((int)msg->data1==0x8 && !IsNoDlg(DlgCsmIDs))*/
    835          	  {
    836          	    if((x=CheckThisSMS((int)msg->data0)))
   \                     ??daemoncsm_onmessage_2:
   \   00000088   ........           _BLF     CheckThisSMS,??CheckThisSMS??rA
   \   0000008C   000050E3           CMP      R0,#+0
   \   00000090   1200000A           BEQ      ??daemoncsm_onmessage_3
    837          	    {
    838          	      if(x==1)
   \   00000094   010050E3           CMP      R0,#+1
   \   00000098   0A00001A           BNE      ??daemoncsm_onmessage_6
    839          	      {
    840          		if(!IsTimerProc(&chk_tmr) || !isnewp)
   \   0000009C   040089E0           ADD      R0,R9,R4
   \   000000A0   A60100EF           SWI      +422
   \   000000A4   000050E3           CMP      R0,#+0
   \   000000A8   C4009415           LDRNE    R0,[R4, #+196]
   \   000000AC   00005013           CMPNE    R0,#+0
   \   000000B0   0A00001A           BNE      ??daemoncsm_onmessage_3
    841          		{
    842          		  GBS_DelTimer(&chk_tmr);
   \   000000B4   040089E0           ADD      R0,R9,R4
   \   000000B8   8C0100EF           SWI      +396
    843          		  tindex=(int)msg->data0;
   \   000000BC   0C0095E5           LDR      R0,[R5, #+12]
    844          		  GBS_StartTimerProc(&chk_tmr, 216/2, UpdateNProc);
   \   000000C0   58249FE5           LDR      R2,??daemoncsm_onmessage_0+0x8  ;; UpdateNProc
   \   000000C4   EAFFFFEA           B        ??daemoncsm_onmessage_5
    845          		}
    846          		//SUBPROC((void *)UpdateNProc);
    847          		//if(!IsTimerProc(&n_update_tmr)/* && !IsTimerProc(&chk_tmr)*/)
    848          		//  GBS_StartTimerProc(&n_update_tmr, 216*2/3, UpdateNProc);
    849          	      }
    850          	      else if(x==2)
   \                     ??daemoncsm_onmessage_6:
   \   000000C8   020050E3           CMP      R0,#+2
   \   000000CC   0300001A           BNE      ??daemoncsm_onmessage_3
    851          	      {
    852          		if(IsHaveDlgGuiOnTop()) RefreshGUI();
   \   000000D0   ........           BL       IsHaveDlgGuiOnTop
   \   000000D4   000050E3           CMP      R0,#+0
   \   000000D8   0000000A           BEQ      ??daemoncsm_onmessage_3
   \   000000DC   960100EF           SWI      +406
    853          	      }
    854          	    }
    855          	  }
    856          	  
    857          	  //new_sms_n=(SmsDataRoot())->cnt_in_new_sms_dat;
    858          	  //if(!new_sms_n) 
    859          	  new_sms_n=getCountByType(TYPE_IN_N);
   \                     ??daemoncsm_onmessage_3:
   \   000000E0   0300A0E3           MOV      R0,#+3
   \   000000E4   ........           _BLF     getCountByType,??getCountByType??rA
   \   000000E8   380084E5           STR      R0,[R4, #+56]
    860          	  if((CFG_ENA_NOTIFY)&&(!new_sms_n)) //simoco
   \   000000EC   ........           LDR      R0,??DataTable19  ;; CFG_ENA_NOTIFY
   \   000000F0   000090E5           LDR      R0,[R0, #+0]
   \   000000F4   000050E3           CMP      R0,#+0
   \   000000F8   0800000A           BEQ      ??daemoncsm_onmessage_7
   \   000000FC   380094E5           LDR      R0,[R4, #+56]
   \   00000100   000050E3           CMP      R0,#+0
   \   00000104   0500001A           BNE      ??daemoncsm_onmessage_7
    861          	  {
    862          	    SetVibration(0);
   \   00000108   7C0000EF           SWI      +124
    863          	    if(PLAY_ID)
   \   0000010C   F000D8E1           LDRSH    R0,[R8, #+0]
   \   00000110   000050E3           CMP      R0,#+0
   \   00000114   0100000A           BEQ      ??daemoncsm_onmessage_7
    864          	    {
    865          	      PlayMelody_StopPlayback(PLAY_ID);
   \   00000118   260200EF           SWI      +550
    866          	      PLAY_ID=0;
   \   0000011C   B060C8E1           STRH     R6,[R8, #+0]
    867          	    }
    868          	  }
    869          #ifdef ELKA
    870          	  if(CFG_ENA_SLI)
   \                     ??daemoncsm_onmessage_7:
   \   00000120   FC039FE5           LDR      R0,??daemoncsm_onmessage_0+0xC  ;; CFG_ENA_SLI
   \   00000124   000090E5           LDR      R0,[R0, #+0]
   \   00000128   000050E3           CMP      R0,#+0
   \   0000012C   0900000A           BEQ      ??daemoncsm_onmessage_1
    871          	  {
    872          	    if(new_sms_n>0)
   \   00000130   380094E5           LDR      R0,[R4, #+56]
   \   00000134   010050E3           CMP      R0,#+1
   \   00000138   020000BA           BLT      ??daemoncsm_onmessage_8
    873          	    {
    874          	      sli_sta=1;
   \   0000013C   CC7084E5           STR      R7,[R4, #+204]
    875          	      SLI_PROC();
   \   00000140   ........           BL       SLI_PROC
   \   00000144   030000EA           B        ??daemoncsm_onmessage_1
    876          	    }
    877          	    else if(sli_sta) STOP_SLI();
   \                     ??daemoncsm_onmessage_8:
   \   00000148   CC0094E5           LDR      R0,[R4, #+204]
   \   0000014C   000050E3           CMP      R0,#+0
   \   00000150   0000000A           BEQ      ??daemoncsm_onmessage_1
   \   00000154   ........           BL       STOP_SLI
    878          	  }
    879          #endif
    880          	  //char str[64];
    881          	  //sprintf(str, "submess:0x%X\ndata0:0x%08X\ndata1:0x%08X", msg->submess, msg->data0, msg->data1);
    882          	  //ShowMSG(0, (int)str);
    883          	  //WSHDR *ws=AllocWS(64);
    884          	  //wsprintf(ws, "submess:0x%X\ndata0:0x%08X\ndata1:0x%08X", msg->submess, msg->data0, msg->data1);
    885          	  //ShowMSG_ws(0, ws);
    886          	  //        submess,data0,data1
    887          	  //NEW in 97,index,0x408
    888          	  //set to read 97,index,0x8
    889          	  //del 97,index,0x8
    890          	  //if(!IsTimerProc(&n_update_tmr) && !IsTimerProc(&chk_tmr))
    891          	  //  GBS_StartTimerProc(&n_update_tmr, 216, UpdateNProc);
    892          	}
    893          	if(msg->msg==MSG_RECONFIGURE_REQ)
   \                     ??daemoncsm_onmessage_1:
   \   00000158   040095E5           LDR      R0,[R5, #+4]
   \   0000015C   AF10A0E3           MOV      R1,#+175
   \   00000160   DE1C81E3           ORR      R1,R1,#0xDE00
   \   00000164   010050E1           CMP      R0,R1
   \   00000168   2400001A           BNE      ??daemoncsm_onmessage_9
    894          	{
    895          	  extern const char *successed_config_filename;
    896          	  if(!strcmp_nocase(successed_config_filename,(char *)msg->data0))
   \   0000016C   ........           LDR      R1,??DataTable37  ;; successed_config_filename
   \   00000170   0C0095E5           LDR      R0,[R5, #+12]
   \   00000174   001091E5           LDR      R1,[R1, #+0]
   \                     ??daemoncsm_onmessage_10:
   \   00000178   0020D1E5           LDRB     R2,[R1, #+0]
   \   0000017C   610052E3           CMP      R2,#+97
   \   00000180   010000BA           BLT      ??daemoncsm_onmessage_11
   \   00000184   7B0052E3           CMP      R2,#+123
   \   00000188   202042B2           SUBLT    R2,R2,#+32
   \                     ??daemoncsm_onmessage_11:
   \   0000018C   0030D0E5           LDRB     R3,[R0, #+0]
   \   00000190   011081E2           ADD      R1,R1,#+1
   \   00000194   610053E3           CMP      R3,#+97
   \   00000198   010000BA           BLT      ??daemoncsm_onmessage_12
   \   0000019C   7B0053E3           CMP      R3,#+123
   \   000001A0   203043B2           SUBLT    R3,R3,#+32
   \                     ??daemoncsm_onmessage_12:
   \   000001A4   010080E2           ADD      R0,R0,#+1
   \   000001A8   033052E0           SUBS     R3,R2,R3
   \   000001AC   1300001A           BNE      ??daemoncsm_onmessage_9
   \   000001B0   000052E3           CMP      R2,#+0
   \   000001B4   EFFFFF1A           BNE      ??daemoncsm_onmessage_10
    897          	  {
    898          	    InitSetting();
   \   000001B8   ........           _BLF     InitConfig,??InitConfig??rA
   \   000001BC   ........           BL       InitDatPath
    899          	    ShowMSG(1,(int)lgp.LGP_CONFIG_UPDATE);
   \   000001C0   60039FE5           LDR      R0,??daemoncsm_onmessage_0+0x10  ;; lgp + 128
   \   000001C4   001090E5           LDR      R1,[R0, #+0]
   \   000001C8   0100A0E3           MOV      R0,#+1
   \   000001CC   480100EF           SWI      +328
    900          	    if(!cltop) SUBPROC((void *)ConstructListN);
   \   000001D0   ........           LDR      R0,??DataTable25  ;; cltop
   \   000001D4   000090E5           LDR      R0,[R0, #+0]
   \   000001D8   000050E3           CMP      R0,#+0
   \   000001DC   0100001A           BNE      ??daemoncsm_onmessage_13
   \   000001E0   ........           LDR      R0,??DataTable26  ;; ConstructListN
   \   000001E4   710100EF           SWI      +369
    901          	    if(!sdltop) SUBPROC((void *)ReadAllSmsN);
   \                     ??daemoncsm_onmessage_13:
   \   000001E8   ........           LDR      R0,??DataTable27  ;; sdltop
   \   000001EC   000090E5           LDR      R0,[R0, #+0]
   \   000001F0   000050E3           CMP      R0,#+0
   \   000001F4   0100001A           BNE      ??daemoncsm_onmessage_9
   \   000001F8   ........           LDR      R0,??DataTable28  ;; ReadAllSmsN
   \   000001FC   710100EF           SWI      +369
    902          	  }
    903          	}
    904          	if(PLAY_ID && (msg->msg==MSG_INCOMMING_CALL || IsCalling()))
   \                     ??daemoncsm_onmessage_9:
   \   00000200   F000D8E1           LDRSH    R0,[R8, #+0]
   \   00000204   000050E3           CMP      R0,#+0
   \   00000208   0800000A           BEQ      ??daemoncsm_onmessage_14
   \   0000020C   040095E5           LDR      R0,[R5, #+4]
   \   00000210   600C50E3           CMP      R0,#+24576
   \   00000214   0200000A           BEQ      ??daemoncsm_onmessage_15
   \   00000218   6E0000EF           SWI      +110
   \   0000021C   000050E3           CMP      R0,#+0
   \   00000220   0200000A           BEQ      ??daemoncsm_onmessage_14
    905          	{
    906          	  PlayMelody_StopPlayback(PLAY_ID);
   \                     ??daemoncsm_onmessage_15:
   \   00000224   F000D8E1           LDRSH    R0,[R8, #+0]
   \   00000228   260200EF           SWI      +550
    907          	  PLAY_ID=0;
   \   0000022C   B060C8E1           STRH     R6,[R8, #+0]
    908          	}
    909          	if(msg->msg==MSG_PLAYFILE_REPORT && PLAY_ID) 
   \                     ??daemoncsm_onmessage_14:
   \   00000230   040095E5           LDR      R0,[R5, #+4]
   \   00000234   BC10A0E3           MOV      R1,#+188
   \   00000238   701C81E3           ORR      R1,R1,#0x7000
   \   0000023C   010050E1           CMP      R0,R1
   \   00000240   0A00001A           BNE      ??daemoncsm_onmessage_16
   \   00000244   F000D8E1           LDRSH    R0,[R8, #+0]
   \   00000248   000050E3           CMP      R0,#+0
   \   0000024C   9400000A           BEQ      ??daemoncsm_onmessage_17
    910          	{
    911          	  GBS_PSOUND_MSG *pmsg=(GBS_PSOUND_MSG *)msg;
    912          	  if(pmsg->handler==PLAY_ID)
   \   00000250   FA10D5E1           LDRSH    R1,[R5, #+10]
   \   00000254   000051E1           CMP      R1,R0
   \   00000258   9100001A           BNE      ??daemoncsm_onmessage_17
    913          	  {
    914          	    int z=pmsg->cmd;
   \   0000025C   B800D5E1           LDRH     R0,[R5, #+8]
    915          	    if(z==M_SAE_PLAYBACK_ERROR || z==M_SAE_PLAYBACK_DONE)
   \   00000260   050050E3           CMP      R0,#+5
   \   00000264   07005013           CMPNE    R0,#+7
   \   00000268   8D00001A           BNE      ??daemoncsm_onmessage_17
    916          	      PLAY_ID=0;
   \   0000026C   B060C8E1           STRH     R6,[R8, #+0]
    917          	  }
    918          	}
    919          	if(msg->msg==MSG_IPC)
   \                     ??daemoncsm_onmessage_16:
   \   00000270   040095E5           LDR      R0,[R5, #+4]
   \   00000274   B080A0E3           MOV      R8,#+176
   \   00000278   DE8C88E3           ORR      R8,R8,#0xDE00
   \   0000027C   080050E1           CMP      R0,R8
   \   00000280   7A00001A           BNE      ??daemoncsm_onmessage_18
    920          	{
    921          	  IPC_REQ *ipc;
    922          	  if((ipc=(IPC_REQ *)msg->data0))
   \   00000284   0CA095E5           LDR      R10,[R5, #+12]
   \   00000288   00005AE3           CMP      R10,#+0
   \   0000028C   8400000A           BEQ      ??daemoncsm_onmessage_17
    923          	  {
    924          	    if(!strcmp(ipc->name_to, my_ipc_name))
   \   00000290   00009AE5           LDR      R0,[R10, #+0]
   \   00000294   90129FE5           LDR      R1,??daemoncsm_onmessage_0+0x14  ;; my_ipc_name
   \   00000298   190000EF           SWI      +25
   \   0000029C   000050E3           CMP      R0,#+0
   \   000002A0   7200001A           BNE      ??daemoncsm_onmessage_18
    925          	    {
    926          	      if(msg->submess==MY_SMSYS_IPC_START)
   \   000002A4   080095E5           LDR      R0,[R5, #+8]
   \   000002A8   08109AE5           LDR      R1,[R10, #+8]
   \   000002AC   9090A0E3           MOV      R9,#+144
   \   000002B0   000050E3           CMP      R0,#+0
   \   000002B4   3200001A           BNE      ??daemoncsm_onmessage_19
    927          	      {
    928          		IPC_DATA_DAEMON *ipcd=(IPC_DATA_DAEMON *)ipc->data;
    929          		if((ipcd)&&(ipcd->csm_id!=DAEMON_CSM_ID))
   \   000002B8   000051E3           CMP      R1,#+0
   \   000002BC   6B00000A           BEQ      ??daemoncsm_onmessage_18
   \   000002C0   000091E5           LDR      R0,[R1, #+0]
   \   000002C4   182094E5           LDR      R2,[R4, #+24]
   \   000002C8   020050E1           CMP      R0,R2
   \   000002CC   6700000A           BEQ      ??daemoncsm_onmessage_18
    930          		{
    931          		  switch(ipcd->code)
   \   000002D0   042091E5           LDR      R2,[R1, #+4]
   \   000002D4   09A0A0E3           MOV      R10,#+9
   \   000002D8   42AC8AE3           ORR      R10,R10,#0x4200
   \   000002DC   000052E3           CMP      R2,#+0
   \   000002E0   0400000A           BEQ      ??daemoncsm_onmessage_20
   \   000002E4   012052E2           SUBS     R2,R2,#+1
   \   000002E8   0F00000A           BEQ      ??daemoncsm_onmessage_21
   \   000002EC   012052E2           SUBS     R2,R2,#+1
   \   000002F0   0F00000A           BEQ      ??daemoncsm_onmessage_22
   \   000002F4   5D0000EA           B        ??daemoncsm_onmessage_18
    932          		  {
    933          		  case MY_SMSYS_CREATE:
    934          		    {
    935          		      daemon_ipc.data=&ipc_data_daemon;
   \                     ??daemoncsm_onmessage_20:
   \   000002F8   0C0084E2           ADD      R0,R4,#+12
   \   000002FC   080084E5           STR      R0,[R4, #+8]
    936          		      ipc_data_daemon.csm_id=ipcd->csm_id;
   \   00000300   000091E5           LDR      R0,[R1, #+0]
    937          		      ipc_data_daemon.code=MY_SMSYS_CLOSE;
   \   00000304   107084E5           STR      R7,[R4, #+16]
   \   00000308   0C0084E5           STR      R0,[R4, #+12]
    938          		      ipc_data_daemon.fname=0;
   \   0000030C   146084E5           STR      R6,[R4, #+20]
    939          		      GBS_SendMessage(MMI_CEPID,MSG_IPC,MY_SMSYS_IPC_START,&daemon_ipc);
   \   00000310   0430A0E1           MOV      R3,R4
   \   00000314   0810A0E1           MOV      R1,R8
   \   00000318   0A00A0E1           MOV      R0,R10
   \   0000031C   000100EF           SWI      +256
    940          		      IPC_SUB_MSG=MY_SMSYS_IPC_START;
   \   00000320   206084E5           STR      R6,[R4, #+32]
    941          		      CreateDialogCSM();
   \                     ??daemoncsm_onmessage_23:
   \   00000324   ........           BL       CreateDialogCSM
   \   00000328   500000EA           B        ??daemoncsm_onmessage_18
    942          		    }
    943          		    break;
    944          		  case MY_SMSYS_CLOSE:
    945          		    CloseCSM(ipcd->csm_id);
   \                     ??daemoncsm_onmessage_21:
   \   0000032C   FC0100EF           SWI      +508
   \   00000330   4E0000EA           B        ??daemoncsm_onmessage_18
    946          		    break;
    947          		  case MY_SMSYS_FVIEW:
    948          		    daemon_ipc.data=&ipc_data_daemon;
   \                     ??daemoncsm_onmessage_22:
   \   00000334   0C0084E2           ADD      R0,R4,#+12
   \   00000338   080084E5           STR      R0,[R4, #+8]
    949          		    ipc_data_daemon.csm_id=ipcd->csm_id;
   \   0000033C   000091E5           LDR      R0,[R1, #+0]
    950          		    ipc_data_daemon.code=MY_SMSYS_CLOSE;
   \   00000340   107084E5           STR      R7,[R4, #+16]
   \   00000344   0C0084E5           STR      R0,[R4, #+12]
    951          		    ipc_data_daemon.fname=0;
   \   00000348   146084E5           STR      R6,[R4, #+20]
    952          		    if(ipcd->fname)
   \   0000034C   081091E5           LDR      R1,[R1, #+8]
   \   00000350   000051E3           CMP      R1,#+0
   \   00000354   0200000A           BEQ      ??daemoncsm_onmessage_24
    953          		      strcpy(filename, ipcd->fname);
   \   00000358   D00084E2           ADD      R0,R4,#+208
   \   0000035C   1A0000EF           SWI      +26
   \   00000360   000000EA           B        ??daemoncsm_onmessage_25
    954          		    else
    955          		      filename[0]=0;
   \                     ??daemoncsm_onmessage_24:
   \   00000364   D060C4E5           STRB     R6,[R4, #+208]
    956          		    GBS_SendMessage(MMI_CEPID,MSG_IPC,MY_SMSYS_IPC_START,&daemon_ipc);
   \                     ??daemoncsm_onmessage_25:
   \   00000368   0430A0E1           MOV      R3,R4
   \   0000036C   0020A0E3           MOV      R2,#+0
   \   00000370   0810A0E1           MOV      R1,R8
   \   00000374   0A00A0E1           MOV      R0,R10
   \   00000378   000100EF           SWI      +256
    957          		    IPC_SUB_MSG=SMSYS_IPC_FVIEW;
   \   0000037C   209084E5           STR      R9,[R4, #+32]
    958          		    CreateDialogCSM();
   \   00000380   E7FFFFEA           B        ??daemoncsm_onmessage_23
    959          		    break;
    960          		  }
    961          		}
    962          	      }
    963          	      else if((msg->submess > 0)&&(msg->submess <= SMSYS_IPC_MSG_MAX))
   \                     ??daemoncsm_onmessage_19:
   \   00000384   010050E3           CMP      R0,#+1
   \   00000388   030000BA           BLT      ??daemoncsm_onmessage_26
   \   0000038C   0A0050E3           CMP      R0,#+10
   \   00000390   010000AA           BGE      ??daemoncsm_onmessage_26
    964          	      {
    965          		IPC_SUB_MSG=msg->submess;
   \                     ??daemoncsm_onmessage_27:
   \   00000394   200084E5           STR      R0,[R4, #+32]
    966          		CreateDialogCSM();
   \                     ??daemoncsm_onmessage_28:
   \   00000398   E1FFFFEA           B        ??daemoncsm_onmessage_23
    967          	      }
    968          	      else if(msg->submess == SMSYS_IPC_ARCHIVE)
   \                     ??daemoncsm_onmessage_26:
   \   0000039C   400050E3           CMP      R0,#+64
   \   000003A0   0200001A           BNE      ??daemoncsm_onmessage_29
    969          	      {
    970          		SUBPROC((void *)OpenArchive);
   \   000003A4   84019FE5           LDR      R0,??daemoncsm_onmessage_0+0x18  ;; OpenArchive
   \                     ??daemoncsm_onmessage_30:
   \   000003A8   710100EF           SWI      +369
   \   000003AC   2F0000EA           B        ??daemoncsm_onmessage_18
    971          	      }
    972          	      else if(msg->submess == SMSYS_IPC_NEW_IN_WIN)
   \                     ??daemoncsm_onmessage_29:
   \   000003B0   810050E3           CMP      R0,#+129
    973          	      {
    974          		IPC_SUB_MSG=msg->submess;
   \   000003B4   20008405           STREQ    R0,[R4, #+32]
    975          		CreateDialogCSM();
   \   000003B8   D9FFFF0A           BEQ      ??daemoncsm_onmessage_23
    976          	      }
    977          	      else if(msg->submess == SMSYS_IPC_NEWSMS_NUM)
   \   000003BC   820050E3           CMP      R0,#+130
    978          	      {
    979          		num_from_ipc=(char *)ipc->data;
   \   000003C0   24108405           STREQ    R1,[R4, #+36]
    980          		IPC_SUB_MSG=msg->submess;
   \   000003C4   08009505           LDREQ    R0,[R5, #+8]
   \   000003C8   F1FFFF0A           BEQ      ??daemoncsm_onmessage_27
    981          		CreateDialogCSM();
    982          	      }
    983          	      else if(msg->submess == SMSYS_IPC_SEND_UTF8)
   \   000003CC   830050E3           CMP      R0,#+131
   \   000003D0   0300001A           BNE      ??daemoncsm_onmessage_31
    984          	      {
    985          		text_utf8=(char *)ipc->data;
   \   000003D4   281084E5           STR      R1,[R4, #+40]
    986          		IPC_SUB_MSG=msg->submess;
   \                     ??daemoncsm_onmessage_32:
   \   000003D8   080095E5           LDR      R0,[R5, #+8]
   \   000003DC   200084E5           STR      R0,[R4, #+32]
    987          		CreateDialogCSM();
   \   000003E0   CFFFFFEA           B        ??daemoncsm_onmessage_23
    988          	      }
    989          	      else if((msg->submess >= SMSYS_IPC_VIEW_OPMSG)&&(msg->submess <= SMSYS_IPC_QN_OPMSG))
   \                     ??daemoncsm_onmessage_31:
   \   000003E4   840050E3           CMP      R0,#+132
   \   000003E8   050000BA           BLT      ??daemoncsm_onmessage_33
   \   000003EC   880050E3           CMP      R0,#+136
   \   000003F0   030000AA           BGE      ??daemoncsm_onmessage_33
    990          	      {
    991          		opmsg_id=(int)ipc->data;
   \   000003F4   2C1084E5           STR      R1,[R4, #+44]
    992          		IPC_SUB_MSG=msg->submess;
   \   000003F8   080095E5           LDR      R0,[R5, #+8]
   \   000003FC   200084E5           STR      R0,[R4, #+32]
    993          		CreateDialogCSM();
   \   00000400   C7FFFFEA           B        ??daemoncsm_onmessage_23
    994          	      }
    995          	      else if(msg->submess==SMSYS_IPC_SEND_WS)
   \                     ??daemoncsm_onmessage_33:
   \   00000404   880050E3           CMP      R0,#+136
   \   00000408   0100001A           BNE      ??daemoncsm_onmessage_34
    996          	      {
    997          		text_ws=(WSHDR *)ipc->data;
   \   0000040C   301084E5           STR      R1,[R4, #+48]
    998          		IPC_SUB_MSG=msg->submess;
   \   00000410   F0FFFFEA           B        ??daemoncsm_onmessage_32
    999          		CreateDialogCSM();
   1000          	      }
   1001          	      else if(msg->submess == SMSYS_IPC_FVIEW)
   \                     ??daemoncsm_onmessage_34:
   \   00000414   900050E3           CMP      R0,#+144
   \   00000418   0A00001A           BNE      ??daemoncsm_onmessage_35
   1002          	      {
   1003          		IPC_SUB_MSG=SMSYS_IPC_FVIEW;
   \   0000041C   209084E5           STR      R9,[R4, #+32]
   1004          		if(ipc->data)
   \   00000420   08109AE5           LDR      R1,[R10, #+8]
   \   00000424   000051E3           CMP      R1,#+0
   \   00000428   0400000A           BEQ      ??daemoncsm_onmessage_36
   1005          		{
   1006          		  strcpy(filename, (char *)ipc->data);
   \   0000042C   D00084E2           ADD      R0,R4,#+208
   \   00000430   1A0000EF           SWI      +26
   1007          		  mfree(ipc->data);
   \   00000434   08009AE5           LDR      R0,[R10, #+8]
   \   00000438   150000EF           SWI      +21
   \   0000043C   B8FFFFEA           B        ??daemoncsm_onmessage_23
   1008          		}
   1009          		else
   1010          		  filename[0]=0;
   \                     ??daemoncsm_onmessage_36:
   \   00000440   D060C4E5           STRB     R6,[R4, #+208]
   1011          		CreateDialogCSM();
   \   00000444   B6FFFFEA           B        ??daemoncsm_onmessage_23
   1012          	      }
   1013          	      else if(msg->submess == SMSYS_IPC_UPDATE_CLIST)
   \                     ??daemoncsm_onmessage_35:
   \   00000448   400F50E3           CMP      R0,#+256
   1014          	      {
   1015          		SUBPROC((void *)ConstructList);
   \   0000044C   E0009F05           LDREQ    R0,??daemoncsm_onmessage_0+0x1C  ;; ConstructList
   \   00000450   D4FFFF0A           BEQ      ??daemoncsm_onmessage_30
   1016          	      }
   1017          	      else if(msg->submess == SMSYS_IPC_SMS_DATA_UPDATE)
   \   00000454   401F87E3           ORR      R1,R7,#0x100
   \   00000458   010050E1           CMP      R0,R1
   \   0000045C   0300001A           BNE      ??daemoncsm_onmessage_18
   1018          	      {
   1019          		if(IsHaveDlgGuiOnTop()) RefreshGUI();
   \   00000460   ........           BL       IsHaveDlgGuiOnTop
   \   00000464   000050E3           CMP      R0,#+0
   \   00000468   0000000A           BEQ      ??daemoncsm_onmessage_18
   \   0000046C   960100EF           SWI      +406
   1020          	      }
   1021          	    }
   1022          	  }
   1023          	}
   1024          	if(msg->msg==MSG_CSM_DESTROYED)
   \                     ??daemoncsm_onmessage_18:
   \   00000470   040095E5           LDR      R0,[R5, #+4]
   \   00000474   640C50E3           CMP      R0,#+25600
   \   00000478   0900001A           BNE      ??daemoncsm_onmessage_17
   1025          	{
   1026          	  if(SNEDSMS_CSM_ID)
   \   0000047C   1C0094E5           LDR      R0,[R4, #+28]
   \   00000480   000050E3           CMP      R0,#+0
   \   00000484   0600000A           BEQ      ??daemoncsm_onmessage_17
   1027          	  {
   1028          	    if((int)msg->data0==SNEDSMS_CSM_ID)
   \   00000488   0C1095E5           LDR      R1,[R5, #+12]
   \   0000048C   000051E1           CMP      R1,R0
   \   00000490   0200000A           BEQ      ??daemoncsm_onmessage_37
   1029          	      SNEDSMS_CSM_ID=0;
   1030          	    else if(!FindCSMbyID(SNEDSMS_CSM_ID))
   \   00000494   080100EF           SWI      +264
   \   00000498   000050E3           CMP      R0,#+0
   \   0000049C   0000001A           BNE      ??daemoncsm_onmessage_17
   1031          	      SNEDSMS_CSM_ID=0;
   \                     ??daemoncsm_onmessage_37:
   \   000004A0   1C6084E5           STR      R6,[R4, #+28]
   1032          	  }
   1033          	}
   1034          	CSM_RAM *icsm=FindCSMbyID(CSM_root()->idle_id);
   \                     ??daemoncsm_onmessage_17:
   \   000004A4   068100EF           SWI      +33030
   \   000004A8   040090E5           LDR      R0,[R0, #+4]
   \   000004AC   080100EF           SWI      +264
   1035          	if((new_sms_n>0)&& (CFG_ENA_NEWSMS_ICON)/* && (NEW_SMS_ICON)*/)
   \   000004B0   381094E5           LDR      R1,[R4, #+56]
   \   000004B4   010051E3           CMP      R1,#+1
   \   000004B8   140000BA           BLT      ??daemoncsm_onmessage_38
   \   000004BC   74109FE5           LDR      R1,??daemoncsm_onmessage_0+0x20  ;; CFG_ENA_NEWSMS_ICON
   \   000004C0   001091E5           LDR      R1,[R1, #+0]
   \   000004C4   000051E3           CMP      R1,#+0
   \   000004C8   1000000A           BEQ      ??daemoncsm_onmessage_38
   1036          	{
   1037          #define idlegui_id (((int *)icsm)[DISPLACE_OF_IDLEGUI_ID/4])
   1038          	  if(IsGuiOnTop(idlegui_id) || IsSSOnTop())
   \   000004CC   2C0090E5           LDR      R0,[R0, #+44]
   \   000004D0   350100EF           SWI      +309
   \   000004D4   000050E3           CMP      R0,#+0
   \   000004D8   0200001A           BNE      ??daemoncsm_onmessage_39
   \   000004DC   ........           BL       IsSSOnTop
   \   000004E0   000050E3           CMP      R0,#+0
   \   000004E4   0900000A           BEQ      ??daemoncsm_onmessage_38
   1039          	  {
   1040          	    GUI *igui=GetTopGUI();
   1041          	    if(igui)
   \                     ??daemoncsm_onmessage_39:
   \   000004E8   4D0100EF           SWI      +333
   \   000004EC   000050E3           CMP      R0,#+0
   \   000004F0   0600000A           BEQ      ??daemoncsm_onmessage_38
   1042          	    {
   1043          	      DrawImg(CFG_ICONNEW_POS_X, CFG_ICONNEW_POS_Y, ip.dis_smsnew);
   \   000004F4   40009FE5           LDR      R0,??daemoncsm_onmessage_0+0x24  ;; ip + 108
   \   000004F8   002090E5           LDR      R2,[R0, #+0]
   \   000004FC   3C009FE5           LDR      R0,??daemoncsm_onmessage_0+0x28  ;; CFG_ICONNEW_POS_Y
   \   00000500   001090E5           LDR      R1,[R0, #+0]
   \   00000504   38009FE5           LDR      R0,??daemoncsm_onmessage_0+0x2C  ;; CFG_ICONNEW_POS_X
   \   00000508   000090E5           LDR      R0,[R0, #+0]
   \   0000050C   230000EF           SWI      +35
   1044          	    }
   1045          	  }
   1046          	}
   1047          	return 1;
   \                     ??daemoncsm_onmessage_38:
   \   00000510   0100A0E3           MOV      R0,#+1
   \   00000514   F287BDE8           POP      {R1,R4-R10,PC}   ;; return
   \                     ??daemoncsm_onmessage_0:
   \   00000518   ........           DC32     PLAY_ID
   \   0000051C   ........           DC32     DoNewProc
   \   00000520   ........           DC32     UpdateNProc
   \   00000524   ........           DC32     CFG_ENA_SLI
   \   00000528   ........           DC32     lgp + 128
   \   0000052C   ........           DC32     my_ipc_name
   \   00000530   ........           DC32     OpenArchive
   \   00000534   ........           DC32     ConstructList
   \   00000538   ........           DC32     CFG_ENA_NEWSMS_ICON
   \   0000053C   ........           DC32     ip + 108
   \   00000540   ........           DC32     CFG_ICONNEW_POS_Y
   \   00000544   ........           DC32     CFG_ICONNEW_POS_X
   1048          }
   1049          

   \                                 In segment CODE, align 4, keep-with-next
   1050          void LdProc(void)
   1051          {
   1052            if(!cltop) SUBPROC((void *)ConstructListN);
   \                     LdProc:
   \   00000000   ........           LDR      R0,??DataTable25  ;; cltop
   \   00000004   00402DE9           PUSH     {LR}
   \   00000008   000090E5           LDR      R0,[R0, #+0]
   \   0000000C   000050E3           CMP      R0,#+0
   \   00000010   0100001A           BNE      ??LdProc_0
   \   00000014   ........           LDR      R0,??DataTable26  ;; ConstructListN
   \   00000018   710100EF           SWI      +369
   1053            if(!sdltop) SUBPROC((void *)ReadAllSmsN);
   \                     ??LdProc_0:
   \   0000001C   ........           LDR      R0,??DataTable27  ;; sdltop
   \   00000020   000090E5           LDR      R0,[R0, #+0]
   \   00000024   000050E3           CMP      R0,#+0
   \   00000028   0080BD18           POPNE    {PC}
   \   0000002C   ........           LDR      R0,??DataTable28  ;; ReadAllSmsN
   \   00000030   710100EF           SWI      +369
   1054          }
   \   00000034   0080BDE8           POP      {PC}             ;; return
   1055          //extern int MyKeyHook(int submsg, int msg);
   1056          //extern void restore_allss_methods(void);
   1057          //extern void replace_allss_methods(void);
   1058          //extern void isexit_ss(void);

   \                                 In segment CODE, align 4, keep-with-next
   1059          void daemoncsm_oncreate(CSM_RAM *data)
   1060          {
   \                     daemoncsm_oncreate:
   \   00000000   10402DE9           PUSH     {R4,LR}
   1061            daemon_ipc.data=&ipc_data_daemon;
   \   00000004   ........           LDR      R4,??DataTable29  ;; daemon_ipc
   \   00000008   0C0084E2           ADD      R0,R4,#+12
   \   0000000C   080084E5           STR      R0,[R4, #+8]
   1062            ipc_data_daemon.csm_id=DAEMON_CSM_ID;
   \   00000010   180094E5           LDR      R0,[R4, #+24]
   \   00000014   0C0084E5           STR      R0,[R4, #+12]
   1063            if(is_fview&&strlen(filename))
   \   00000018   340094E5           LDR      R0,[R4, #+52]
   \   0000001C   000050E3           CMP      R0,#+0
   \   00000020   0500000A           BEQ      ??daemoncsm_oncreate_0
   \   00000024   D00084E2           ADD      R0,R4,#+208
   \   00000028   1B0000EF           SWI      +27
   \   0000002C   000050E3           CMP      R0,#+0
   1064            {
   1065              ipc_data_daemon.code=MY_SMSYS_FVIEW;
   \   00000030   0200A013           MOVNE    R0,#+2
   1066              ipc_data_daemon.fname=filename;
   \   00000034   D0108412           ADDNE    R1,R4,#+208
   \   00000038   0000001A           BNE      ??daemoncsm_oncreate_1
   1067            }
   1068            else
   1069            {
   1070              ipc_data_daemon.code=MY_SMSYS_CREATE;
   1071              ipc_data_daemon.fname=0;
   \                     ??daemoncsm_oncreate_0:
   \   0000003C   0010A0E3           MOV      R1,#+0
   \                     ??daemoncsm_oncreate_1:
   \   00000040   141084E5           STR      R1,[R4, #+20]
   \   00000044   100084E5           STR      R0,[R4, #+16]
   1072            }
   1073            GBS_SendMessage(MMI_CEPID,MSG_IPC,MY_SMSYS_IPC_START,&daemon_ipc);
   \   00000048   0430A0E1           MOV      R3,R4
   \   0000004C   0020A0E3           MOV      R2,#+0
   \   00000050   B010A0E3           MOV      R1,#+176
   \   00000054   DE1C81E3           ORR      R1,R1,#0xDE00
   \   00000058   0900A0E3           MOV      R0,#+9
   \   0000005C   420C80E3           ORR      R0,R0,#0x4200
   \   00000060   000100EF           SWI      +256
   1074            AddKeybMsgHook((void *)MyKeyHook);
   \   00000064   ........           LDR      R0,??DataTable32  ;; MyKeyHook
   \   00000068   2B0100EF           SWI      +299
   1075            GBS_StartTimerProc(&ld_tmr, 216*2, LdProc);
   \   0000006C   0C209FE5           LDR      R2,??daemoncsm_oncreate_2  ;; LdProc
   \   00000070   6C1FA0E3           MOV      R1,#+432
   \   00000074   640F84E2           ADD      R0,R4,#+400
   \   00000078   4D0000EF           SWI      +77
   1076          }
   \   0000007C   1080BDE8           POP      {R4,PC}          ;; return
   \                     ??daemoncsm_oncreate_2:
   \   00000080   ........           DC32     LdProc
   1077          

   \                                 In segment CODE, align 4, keep-with-next
   1078          void ElfKiller(void)
   1079          {
   \                     ElfKiller:
   \   00000000   00402DE9           PUSH     {LR}
   1080            extern void *ELF_BEGIN;
   1081            kill_data(&ELF_BEGIN,(void (*)(void *))mfree_adr());
   \   00000004   158000EF           SWI      +32789
   \   00000008   0010A0E1           MOV      R1,R0
   \   0000000C   04009FE5           LDR      R0,??ElfKiller_0  ;; ELF_BEGIN
   \   00000010   0040BDE8           POP      {LR}             ;; Pop
   \   00000014   ........           _BF      kill_data,??kill_data??rA  ;; tailcall
   \                     ??ElfKiller_0:
   \   00000018   ........           DC32     ELF_BEGIN
   1082          }
   1083          

   \                                 In segment CODE, align 4, keep-with-next
   1084          void daemoncsm_onclose(CSM_RAM *csm)
   1085          {
   \                     daemoncsm_onclose:
   \   00000000   10402DE9           PUSH     {R4,LR}
   1086            //restore_allss_methods();
   1087            GBS_DelTimer(&chk_tmr);
   \   00000004   ........           LDR      R4,??DataTable35  ;; daemon_ipc
   \   00000008   680F84E2           ADD      R0,R4,#+416
   \   0000000C   8C0100EF           SWI      +396
   1088            GBS_DelTimer(&ld_tmr);
   \   00000010   640F84E2           ADD      R0,R4,#+400
   \   00000014   8C0100EF           SWI      +396
   1089            RemoveKeybMsgHook((void *)MyKeyHook);
   \   00000018   ........           LDR      R0,??DataTable32  ;; MyKeyHook
   \   0000001C   2D0100EF           SWI      +301
   1090            closeAllDlgCSM(DlgCsmIDs);
   \   00000020   3C0084E2           ADD      R0,R4,#+60
   \   00000024   ........           BL       closeAllDlgCSM
   1091            FreeCLIST();
   \   00000028   ........           _BLF     FreeCLIST,??FreeCLIST??rA
   1092            freeSDList();
   \   0000002C   ........           _BLF     freeSDList,??freeSDList??rA
   1093          #ifdef ELKA
   1094            STOP_SLI();
   \   00000030   ........           BL       STOP_SLI
   1095          #endif
   1096            //GBS_DelTimer(&n_update_tmr);
   1097            FreeLangPack();
   \   00000034   ........           _BLF     FreeLangPack,??FreeLangPack??rA
   1098            FreeIconPack();
   \   00000038   ........           _BLF     FreeIconPack,??FreeIconPack??rA
   1099            SUBPROC((void *)ElfKiller);
   \   0000003C   ........           LDR      R0,??DataTable36  ;; ElfKiller
   \   00000040   710100EF           SWI      +369
   1100          }
   \   00000044   1080BDE8           POP      {R4,PC}          ;; return
   1101          

   \                                 In segment DATA_Z, align 4, align-sorted
   1102          static unsigned short daemoncsm_name_body[32];
   \                     daemoncsm_name_body:
   \   00000000                      DS8 64
   1103          
   1104          #define ICONBAR
   1105          #ifdef ICONBAR
   1106          

   \                                 In segment CODE, align 4, keep-with-next
   1107          void addIconBar(short* num)
   1108          {
   1109          #pragma swi_number=0x27 
   1110          __swi __arm void AddIconToIconBar(int pic, short *num);
   1111            if(CFG_ENA_IB)
   \                     addIconBar:
   \   00000000   48109FE5           LDR      R1,??addIconBar_0  ;; CFG_ENA_IB
   \   00000004   00402DE9           PUSH     {LR}
   \   00000008   001091E5           LDR      R1,[R1, #+0]
   \   0000000C   000051E3           CMP      R1,#+0
   \   00000010   0080BD08           POPEQ    {PC}
   1112            {
   1113          	if(SNEDSMS_CSM_ID) AddIconToIconBar(CFG_ICONSNED_IB, num);
   \   00000014   ........           LDR      R1,??DataTable35  ;; daemon_ipc
   \   00000018   1C2091E5           LDR      R2,[R1, #+28]
   \   0000001C   000052E3           CMP      R2,#+0
   \   00000020   0200000A           BEQ      ??addIconBar_1
   \   00000024   0010A0E1           MOV      R1,R0
   \   00000028   24009FE5           LDR      R0,??addIconBar_0+0x4  ;; CFG_ICONSNED_IB
   \   0000002C   040000EA           B        ??addIconBar_2
   1114          	else if(new_sms_n>0) AddIconToIconBar(CFG_ICON_IB, num);
   \                     ??addIconBar_1:
   \   00000030   381091E5           LDR      R1,[R1, #+56]
   \   00000034   010051E3           CMP      R1,#+1
   \   00000038   0080BDB8           POPLT    {PC}
   \   0000003C   0010A0E1           MOV      R1,R0
   \   00000040   10009FE5           LDR      R0,??addIconBar_0+0x8  ;; CFG_ICON_IB
   \                     ??addIconBar_2:
   \   00000044   000090E5           LDR      R0,[R0, #+0]
   \   00000048   270000EF           SWI      +39
   1115            }
   1116          }
   \   0000004C   0080BDE8           POP      {PC}             ;; return
   \                     ??addIconBar_0:
   \   00000050   ........           DC32     CFG_ENA_IB
   \   00000054   ........           DC32     CFG_ICONSNED_IB
   \   00000058   ........           DC32     CFG_ICON_IB
   1117          
   1118          
   1119          typedef struct
   1120          {
   1121            char check_name[8];
   1122            int addr;
   1123          }ICONBAR_H;
   1124          #endif
   1125          static const struct
   1126          {
   1127            CSM_DESC daemoncsm;
   1128            WSHDR daemoncsm_name;
   1129          #ifdef ICONBAR
   1130            ICONBAR_H iconbar_handler;
   1131          #endif

   \                                 In segment DATA_C, align 4, align-sorted
   1132          }DAEMONCSM =
   \                     DAEMONCSM:
   \   00000000   ............       DC32 daemoncsm_onmessage, daemoncsm_oncreate, 0, 0, 0, 0
   \              ....00000000
   \              000000000000
   \              000000000000
   \   00000018   ........2800       DC32 daemoncsm_onclose, 40, 1, minus11, daemoncsm_name_body, 55AACCCCH
   \              000001000000
   \              ............
   \              ....CCCCAA55
   \   00000030   55AA33330000       DC32 3333AA55H, 0
   \              0000        
   \   00000038   1F00               DC16 31
   \   0000003A   0000               DC8 0, 0
   \   0000003C   49636F6E4261       DC8 "IconBar"
   \              7200        
   \   00000044   ........           DC32 addIconBar
   1133          {
   1134            {
   1135              daemoncsm_onmessage,
   1136              daemoncsm_oncreate,
   1137          #ifdef NEWSGOLD
   1138              0,
   1139              0,
   1140              0,
   1141              0,
   1142          #endif
   1143              daemoncsm_onclose,
   1144              sizeof(DEAMON_CSM),
   1145              1,
   1146              &minus11
   1147            },
   1148            {
   1149              daemoncsm_name_body,
   1150              NAMECSM_MAGIC1,
   1151              NAMECSM_MAGIC2,
   1152              0x0,
   1153              31
   1154            }
   1155          #ifdef ICONBAR
   1156            ,
   1157            {
   1158              "IconBar",
   1159              (int)addIconBar
   1160            }
   1161          #endif
   1162          };
   1163          

   \                                 In segment CODE, align 4, keep-with-next
   1164          void UpdateDaemonCSMname(void)
   1165          {
   1166            wsprintf((WSHDR *)(&DAEMONCSM.daemoncsm_name),ELFNAME_D);
   \                     UpdateDaemonCSMname:
   \   00000000   0C109FE5           LDR      R1,??UpdateDaemonCSMname_0  ;; ELFNAME_D
   \   00000004   0C009FE5           LDR      R0,??UpdateDaemonCSMname_0+0x4  ;; DAEMONCSM + 40
   \   00000008   00402DE9           PUSH     {LR}
   \   0000000C   240100EF           SWI      +292
   1167          }
   \   00000010   0080BDE8           POP      {PC}             ;; return
   \                     ??UpdateDaemonCSMname_0:
   \   00000014   ........           DC32     ELFNAME_D
   \   00000018   ........           DC32     DAEMONCSM + 40
   1168          

   \                                 In segment CODE, align 4, keep-with-next
   1169          int main(char *exename, char *fname)
   1170          {
   \                     main:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
   1171            DEAMON_CSM d_csm;
   1172            CSM_RAM *save_cmpc;
   1173            CSMROOT *csmr=CSM_root();
   1174            zeromem(&d_csm, sizeof(DEAMON_CSM));
   1175            UpdateDaemonCSMname();
   1176            dlgIDsInit();
   1177            InitSetting();
   1178            ZeroIconPack();
   1179            LoadIconPack();
   1180            LoadLangPack();
   1181            if(fname)
   \   00000004   ........           LDR      R5,??DataTable35  ;; daemon_ipc
   \   00000008   28D04DE2           SUB      SP,SP,#+40
   \   0000000C   0160A0E1           MOV      R6,R1
   \   00000010   068100EF           SWI      +33030
   \   00000014   0040A0E1           MOV      R4,R0
   \   00000018   2810A0E3           MOV      R1,#+40
   \   0000001C   0D00A0E1           MOV      R0,SP
   \   00000020   1D0100EF           SWI      +285
   \   00000024   ........           BL       UpdateDaemonCSMname
   \   00000028   ........           BL       dlgIDsInit
   \   0000002C   ........           _BLF     InitConfig,??InitConfig??rA
   \   00000030   ........           BL       InitDatPath
   \   00000034   ........           _BLF     ZeroIconPack,??ZeroIconPack??rA
   \   00000038   ........           _BLF     LoadIconPack,??LoadIconPack??rA
   \   0000003C   ........           _BLF     LoadLangPack,??LoadLangPack??rA
   \   00000040   000056E3           CMP      R6,#+0
   \   00000044   1500000A           BEQ      ??main_0
   1182            {
   1183              if ( fname[0] < '0' || fname[0] > '4' || fname[1] != ':' || strlen(fname) > 128 )
   \   00000048   0000D6E5           LDRB     R0,[R6, #+0]
   \   0000004C   300050E3           CMP      R0,#+48
   \   00000050   0800003A           BCC      ??main_1
   \   00000054   350050E3           CMP      R0,#+53
   \   00000058   0600002A           BCS      ??main_1
   \   0000005C   0100D6E5           LDRB     R0,[R6, #+1]
   \   00000060   3A0050E3           CMP      R0,#+58
   \   00000064   0300001A           BNE      ??main_1
   \   00000068   0600A0E1           MOV      R0,R6
   \   0000006C   1B0000EF           SWI      +27
   \   00000070   810050E3           CMP      R0,#+129
   \   00000074   0400003A           BCC      ??main_2
   1184              {
   1185                SUBPROC((void *)ElfKiller);
   \                     ??main_1:
   \   00000078   ........           LDR      R0,??DataTable36  ;; ElfKiller
   \   0000007C   710100EF           SWI      +369
   1186                return 0;
   \   00000080   0000A0E3           MOV      R0,#+0
   \   00000084   28D08DE2           ADD      SP,SP,#+40
   \   00000088   7080BDE8           POP      {R4-R6,PC}
   1187              }
   1188              strcpy(filename, fname);
   \                     ??main_2:
   \   0000008C   0610A0E1           MOV      R1,R6
   \   00000090   D00085E2           ADD      R0,R5,#+208
   \   00000094   1A0000EF           SWI      +26
   1189              is_fview=1;
   \   00000098   0100A0E3           MOV      R0,#+1
   \   0000009C   340085E5           STR      R0,[R5, #+52]
   1190            }
   1191            LockSched();
   \                     ??main_0:
   \   000000A0   460100EF           SWI      +326
   1192            save_cmpc=csmr->csm_q->current_msg_processing_csm;
   \   000000A4   080094E5           LDR      R0,[R4, #+8]
   1193            csmr->csm_q->current_msg_processing_csm=csmr->csm_q->csm.first;
   1194            DAEMON_CSM_ID=CreateCSM(&DAEMONCSM.daemoncsm,&d_csm,0);
   \   000000A8   0020A0E3           MOV      R2,#+0
   \   000000AC   081090E5           LDR      R1,[R0, #+8]
   \   000000B0   046090E5           LDR      R6,[R0, #+4]
   \   000000B4   041080E5           STR      R1,[R0, #+4]
   \   000000B8   24009FE5           LDR      R0,??main_3      ;; DAEMONCSM
   \   000000BC   0D10A0E1           MOV      R1,SP
   \   000000C0   070100EF           SWI      +263
   \   000000C4   180085E5           STR      R0,[R5, #+24]
   1195            csmr->csm_q->current_msg_processing_csm=save_cmpc;
   \   000000C8   080094E5           LDR      R0,[R4, #+8]
   \   000000CC   046080E5           STR      R6,[R0, #+4]
   1196            UnlockSched();
   \   000000D0   470100EF           SWI      +327
   1197            // for swaper
   1198            InitUnderIdleCSM();
   \   000000D4   ........           _BLF     InitUnderIdleCSM,??InitUnderIdleCSM??rA
   1199          #ifdef ICONBAR
   1200            //SetIconBarHandler();
   1201          #endif
   1202            return 0;
   \   000000D8   0000A0E3           MOV      R0,#+0
   \   000000DC   28D08DE2           ADD      SP,SP,#+40
   \   000000E0   7080BDE8           POP      {R4-R6,PC}       ;; return
   \                     ??main_3:
   \   000000E4   ........           DC32     DAEMONCSM
   1203          }
   1204          
   1205          //--------------------------------------------------------
   1206          //Others Menu
   1207          #define OTH_MENU_N 8
   1208          /*
   1209          const SOFTKEY_DESC oth_menu_sk[]=
   1210          {
   1211            {0x0018,0x0000,(int)LGP_SELECT},
   1212            {0x0001,0x0000,(int)LGP_BACK},
   1213            {0x003D,0x0000,(int)LGP_DOIT_PIC}
   1214          };
   1215          */
   1216          
   1217          extern SOFTKEY_DESC ed_menu_sk[];

   \                                 In segment DATA_C, align 4, align-sorted
   1218          const SOFTKEYSTAB oth_menu_skt=
   \                     oth_menu_skt:
   \   00000000   ........0000       DC32 ed_menu_sk, 0
   \              0000        
   1219          {
   1220            ed_menu_sk,0
   1221            //oth_menu_sk,0
   1222          };
   1223          

   \                                 In segment CODE, align 4, keep-with-next
   1224          void OpenConfig(void)
   1225          {
   \                     OpenConfig:
   \   00000000   10402DE9           PUSH     {R4,LR}
   1226            extern const char *successed_config_filename;
   1227            WSHDR *file=AllocWS(128);
   \   00000004   8000A0E3           MOV      R0,#+128
   \   00000008   250100EF           SWI      +293
   \   0000000C   0040A0E1           MOV      R4,R0
   1228            str_2ws(file, successed_config_filename, 128);
   \   00000010   ........           LDR      R0,??DataTable37  ;; successed_config_filename
   \   00000014   8020A0E3           MOV      R2,#+128
   \   00000018   001090E5           LDR      R1,[R0, #+0]
   \   0000001C   0400A0E1           MOV      R0,R4
   \   00000020   6C0100EF           SWI      +364
   1229            ExecuteFile(file, 0, 0);
   \   00000024   0020A0E3           MOV      R2,#+0
   \   00000028   0010A0E3           MOV      R1,#+0
   \   0000002C   0400A0E1           MOV      R0,R4
   \   00000030   940000EF           SWI      +148
   1230            FreeWS(file);
   \   00000034   0400A0E1           MOV      R0,R4
   \   00000038   290100EF           SWI      +297
   1231          }
   \   0000003C   1080BDE8           POP      {R4,PC}          ;; return
   1232          

   \                                 In segment CODE, align 4, keep-with-next
   1233          void oth_menu_config(GUI *data)
   1234          {
   \                     oth_menu_config:
   \   00000000   00402DE9           PUSH     {LR}
   1235            GeneralFuncF1(1);
   \   00000004   0100A0E3           MOV      R0,#+1
   \   00000008   3B0100EF           SWI      +315
   1236            OpenConfig();
   \   0000000C   0040BDE8           POP      {LR}             ;; Pop
   \   00000010   ........           B        OpenConfig       ;; tailcall
   1237          }
   1238          

   \                                 In segment CODE, align 4, keep-with-next
   1239          void oth_save_one_txt(GUI *data)
   1240          {
   \                     oth_save_one_txt:
   \   00000000   00402DE9           PUSH     {LR}
   1241            GeneralFuncF1(1);
   \   00000004   0100A0E3           MOV      R0,#+1
   \   00000008   3B0100EF           SWI      +315
   1242            PathInputDlg(INPUT_EXP_TXT, 0);
   \   0000000C   0010A0E3           MOV      R1,#+0
   \   00000010   0000A0E3           MOV      R0,#+0
   \   00000014   0040BDE8           POP      {LR}             ;; Pop
   \   00000018   ........           _BF      PathInputDlg,??PathInputDlg??rA  ;; tailcall
   1243          }
   1244          

   \                                 In segment CODE, align 4, keep-with-next
   1245          void oth_move_all_mss(GUI *data)
   1246          {
   \                     oth_move_all_mss:
   \   00000000   00402DE9           PUSH     {LR}
   \   00000004   40D04DE2           SUB      SP,SP,#+64
   1247            int k;
   1248            char msg[64];
   1249            GeneralFuncF1(1);
   \   00000008   0100A0E3           MOV      R0,#+1
   \   0000000C   3B0100EF           SWI      +315
   1250            k=MoveAllMssToArchive();
   \   00000010   ........           _BLF     MoveAllMssToArchive,??MoveAllMssToArchive??rA
   1251            sprintf(msg, lgp.LGP_MOVE_MSSARCHIVER_N, k);
   \   00000014   0020A0E1           MOV      R2,R0
   \   00000018   1C009FE5           LDR      R0,??oth_move_all_mss_0  ;; lgp + 176
   \   0000001C   001090E5           LDR      R1,[R0, #+0]
   \   00000020   0D00A0E1           MOV      R0,SP
   \   00000024   160000EF           SWI      +22
   1252            ShowMSG(1, (int)msg);
   \   00000028   0D10A0E1           MOV      R1,SP
   \   0000002C   0100A0E3           MOV      R0,#+1
   \   00000030   480100EF           SWI      +328
   1253          }
   \   00000034   40D08DE2           ADD      SP,SP,#+64
   \   00000038   0080BDE8           POP      {PC}             ;; return
   \                     ??oth_move_all_mss_0:
   \   0000003C   ........           DC32     lgp + 176
   1254          
   1255          

   \                                 In segment CODE, align 4, keep-with-next
   1256          void oth_open_archive(GUI *data)
   1257          {
   \                     oth_open_archive:
   \   00000000   00402DE9           PUSH     {LR}
   1258            GeneralFuncF1(1);
   \   00000004   0100A0E3           MOV      R0,#+1
   \   00000008   3B0100EF           SWI      +315
   1259            OpenArchive();
   \   0000000C   0040BDE8           POP      {LR}             ;; Pop
   \   00000010   ........           B        OpenArchive      ;; tailcall
   1260          }
   1261          

   \                                 In segment CODE, align 4, keep-with-next
   1262          void oth_about(GUI *data)
   1263          {
   \                     oth_about:
   \   00000000   00402DE9           PUSH     {LR}
   1264            GeneralFuncF1(1);
   \   00000004   0100A0E3           MOV      R0,#+1
   \   00000008   3B0100EF           SWI      +315
   1265            ShowMSG_noff(1, COPY_RIGHT);
   \   0000000C   08109FE5           LDR      R1,??oth_about_0  ;; COPY_RIGHT
   \   00000010   0100A0E3           MOV      R0,#+1
   \   00000014   0040BDE8           POP      {LR}             ;; Pop
   \   00000018   ........           _BF      ShowMSG_noff,??ShowMSG_noff??rA  ;; tailcall
   \                     ??oth_about_0:
   \   0000001C   ........           DC32     COPY_RIGHT
   1266          }
   1267          

   \                                 In segment CODE, align 4, keep-with-next
   1268          void oth_cov_dat_txt(GUI *data)
   1269          {
   \                     oth_cov_dat_txt:
   \   00000000   00402DE9           PUSH     {LR}
   1270            GeneralFuncF1(1);
   \   00000004   0100A0E3           MOV      R0,#+1
   \   00000008   3B0100EF           SWI      +315
   1271            PathInputDlg(INPUT_COV_DAT, 0);
   \   0000000C   0010A0E3           MOV      R1,#+0
   \   00000010   0200A0E3           MOV      R0,#+2
   \   00000014   0040BDE8           POP      {LR}             ;; Pop
   \   00000018   ........           _BF      PathInputDlg,??PathInputDlg??rA  ;; tailcall
   1272          }
   1273          /*
   1274          void oth_save_all_as_file(GUI *data)
   1275          {
   1276            char msg[64];
   1277            GeneralFuncF1(1);
   1278            sprintf(msg, STR_SAF_N, SaveAllAsFile());
   1279            ShowMSG(1, (int)msg);;
   1280          }
   1281          */
   1282          

   \                                 In segment CODE, align 4, keep-with-next
   1283          void oth_del_all(GUI *data) //mss
   1284          {
   \                     oth_del_all:
   \   00000000   00402DE9           PUSH     {LR}
   1285            GeneralFuncF1(1);
   \   00000004   0100A0E3           MOV      R0,#+1
   \   00000008   3B0100EF           SWI      +315
   1286            extern void delallproc(void);// ed_gui.c
   1287            delallproc();
   \   0000000C   0040BDE8           POP      {LR}             ;; Pop
   \   00000010   ........           _BF      delallproc,??delallproc??rA  ;; tailcall
   1288          }
   1289          

   \                                 In segment CODE, align 4, keep-with-next
   1290          void oth_show_count(GUI *data) //mss
   1291          {
   \                     oth_show_count:
   \   00000000   10402DE9           PUSH     {R4,LR}
   1292            DLG_CSM *dlg_csm=MenuGetUserPointer(data);
   \   00000004   E00100EF           SWI      +480
   \   00000008   0040A0E1           MOV      R4,R0
   1293            GeneralFuncF1(1);
   \   0000000C   0100A0E3           MOV      R0,#+1
   \   00000010   3B0100EF           SWI      +315
   1294            extern int ShowCount(void); //ed_gui.c
   1295            UpdateDlgCsmName(dlg_csm, lgp.LGP_STATISTICS);
   \   00000014   ........           LDR      R0,??DataTable38  ;; lgp + 240
   \   00000018   001090E5           LDR      R1,[R0, #+0]
   \   0000001C   0400A0E1           MOV      R0,R4
   \   00000020   ........           BL       UpdateDlgCsmName
   1296            ShowCount();
   \   00000024   1040BDE8           POP      {R4,LR}          ;; Pop
   \   00000028   ........           _BF      ShowCount,??ShowCount??rA  ;; tailcall
   1297          }
   1298          
   1299          

   \                                 In segment DATA_C, align 4, align-sorted
   1300          const MENUPROCS_DESC oth_menuprocs[OTH_MENU_N]=
   \                     oth_menuprocs:
   \   00000000   ............       DC32 oth_menu_config, oth_open_archive, oth_save_one_txt
   \              ............
   \   0000000C   ............       DC32 oth_move_all_mss, oth_cov_dat_txt, oth_del_all, oth_show_count
   \              ............
   \              ........    
   \   0000001C   ........           DC32 oth_about
   1301          {
   1302            oth_menu_config,
   1303            oth_open_archive,
   1304            oth_save_one_txt,
   1305            oth_move_all_mss,
   1306            oth_cov_dat_txt,
   1307            oth_del_all,
   1308            oth_show_count,
   1309            oth_about,
   1310          };
   1311          

   \                                 In segment DATA_I, align 4, align-sorted
   1312          MENUITEM_DESC oth_menuitems[OTH_MENU_N]=
   \                     oth_menuitems:
   \   00000000                      DS8 224
   \   000000E0                      REQUIRE `?<Initializer for oth_menuitems>`
   1313          {
   1314            {NULL,(int)LGP_NULL,	LGP_NULL, 0, NULL, MENU_FLAG3, MENU_FLAG2},
   1315            {NULL,(int)LGP_NULL,	LGP_NULL, 0, NULL, MENU_FLAG3, MENU_FLAG2},
   1316            {NULL,(int)LGP_NULL,	LGP_NULL, 0, NULL, MENU_FLAG3, MENU_FLAG2},
   1317            {NULL,(int)LGP_NULL,	LGP_NULL, 0, NULL, MENU_FLAG3, MENU_FLAG2},
   1318            {NULL,(int)LGP_NULL,	LGP_NULL, 0, NULL, MENU_FLAG3, MENU_FLAG2},
   1319            {NULL,(int)LGP_NULL,	LGP_NULL, 0, NULL, MENU_FLAG3, MENU_FLAG2},
   1320            {NULL,(int)LGP_NULL,	LGP_NULL, 0, NULL, MENU_FLAG3, MENU_FLAG2},
   1321            {NULL,(int)LGP_NULL,	LGP_NULL, 0, NULL, MENU_FLAG3, MENU_FLAG2},
   1322          };
   1323          

   \                                 In segment CODE, align 4, keep-with-next
   1324          void oth_menu_ghook(void *data, int cmd)
   1325          {
   \                     oth_menu_ghook:
   \   00000000   00402DE9           PUSH     {LR}
   1326            if(cmd==5)
   \   00000004   050051E3           CMP      R1,#+5
   \   00000008   0080BD18           POPNE    {PC}
   1327            {
   1328              DLG_CSM *dlg_csm=MenuGetUserPointer(data);
   \   0000000C   E00100EF           SWI      +480
   1329              UpdateDlgCsmName(dlg_csm, lgp.LGP_OTHERS);
   \   00000010   08109FE5           LDR      R1,??oth_menu_ghook_0  ;; lgp + 144
   \   00000014   001091E5           LDR      R1,[R1, #+0]
   \   00000018   ........           BL       UpdateDlgCsmName
   1330            }
   1331          }
   \   0000001C   0080BDE8           POP      {PC}             ;; return
   \                     ??oth_menu_ghook_0:
   \   00000020   ........           DC32     lgp + 144

   \                                 In segment DATA_C, align 4, align-sorted
   1332          const MENU_DESC oth_menu=
   \                     oth_menu:
   \   00000000   080000000000       DC32 8, 0H, oth_menu_ghook, 0H, main_menusoftkeys, oth_menu_skt, 16, 0H
   \              0000........
   \              00000000....
   \              ............
   \              100000000000
   \              0000        
   \   00000020   ............       DC32 oth_menuitems, oth_menuprocs, 8
   \              ....08000000
   1333          {
   1334            8,NULL,oth_menu_ghook,NULL,
   1335            main_menusoftkeys,
   1336            &oth_menu_skt,
   1337            0x10,//Right align
   1338            NULL,
   1339            oth_menuitems,//menuitems,
   1340            oth_menuprocs,//menuprocs,
   1341            OTH_MENU_N
   1342          };
   1343          

   \                                 In segment DATA_I, align 4, align-sorted
   1344          HEADER_DESC oth_menuhdr={0,0,0,0,NULL,(int)LGP_NULL,LGP_NULL};
   \                     oth_menuhdr:
   \   00000000                      DS8 20
   \   00000014                      REQUIRE `?<Initializer for oth_menuhdr>`
   1345          

   \                                 In segment CODE, align 4, keep-with-next
   1346          unsigned int CreateOthMenu(void *dlg_csm)
   1347          {
   \                     CreateOthMenu:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   1348            patch_header(&oth_menuhdr);
   \   00000004   44509FE5           LDR      R5,??CreateOthMenu_0  ;; oth_menuhdr
   \   00000008   0040A0E1           MOV      R4,R0
   \   0000000C   0000A0E3           MOV      R0,#+0
   \   00000010   B000C5E1           STRH     R0,[R5, #+0]
   \   00000014   1800A0E3           MOV      R0,#+24
   \   00000018   B200C5E1           STRH     R0,[R5, #+2]
   \   0000001C   888100EF           SWI      +33160
   \   00000020   010040E2           SUB      R0,R0,#+1
   \   00000024   B400C5E1           STRH     R0,[R5, #+4]
   \   00000028   8A8100EF           SWI      +33162
   \   0000002C   170080E2           ADD      R0,R0,#+23
   \   00000030   B600C5E1           STRH     R0,[R5, #+6]
   1349            return (CreateSLMenu(&oth_menu, &oth_menuhdr, 0, OTH_MENU_N, dlg_csm));
   \   00000034   18009FE5           LDR      R0,??CreateOthMenu_0+0x4  ;; oth_menu
   \   00000038   10002DE9           PUSH     {R4}
   \   0000003C   0830A0E3           MOV      R3,#+8
   \   00000040   0020A0E3           MOV      R2,#+0
   \   00000044   0510A0E1           MOV      R1,R5
   \   00000048   ........           _BLF     CreateSLMenu,??CreateSLMenu??rA
   \   0000004C   3280BDE8           POP      {R1,R4,R5,PC}    ;; return
   \                     ??CreateOthMenu_0:
   \   00000050   ........           DC32     oth_menuhdr
   \   00000054   ........           DC32     oth_menu
   1350          }
   1351          
   1352          //open archive

   \                                 In segment CODE, align 4, keep-with-next
   1353          void OpenArchive(void)
   1354          {
   \                     OpenArchive:
   \   00000000   10402DE9           PUSH     {R4,LR}
   \   00000004   80DF4DE2           SUB      SP,SP,#+512
   1355            int len, c;
   1356            char folder[128];
   1357            unsigned int err;
   1358            NativeExplorerData data;
   1359            WSHDR *ws, wsn;
   1360            unsigned short wsb[128];
   1361            ws=CreateLocalWS(&wsn, wsb, 128);
   \   00000008   8020A0E3           MOV      R2,#+128
   \   0000000C   04108DE2           ADD      R1,SP,#+4
   \   00000010   7B0F8DE2           ADD      R0,SP,#+492
   \   00000014   270100EF           SWI      +295
   1362            strcpy(folder, CFG_MAIN_FOLDER);
   \   00000018   E8109FE5           LDR      R1,??OpenArchive_0  ;; CFG_MAIN_FOLDER
   \   0000001C   0040A0E1           MOV      R4,R0
   \   00000020   410F8DE2           ADD      R0,SP,#+260
   \   00000024   1A0000EF           SWI      +26
   1363            len=strlen(folder);
   \   00000028   410F8DE2           ADD      R0,SP,#+260
   \   0000002C   1B0000EF           SWI      +27
   1364            c=folder[len-1];
   \   00000030   411F8DE2           ADD      R1,SP,#+260
   \   00000034   010080E0           ADD      R0,R0,R1
   \   00000038   011050E5           LDRB     R1,[R0, #-1]
   1365            if(c!='\\' && c!='/')
   \   0000003C   5C0051E3           CMP      R1,#+92
   \   00000040   2F005113           CMPNE    R1,#+47
   \   00000044   0300000A           BEQ      ??OpenArchive_1
   1366            {
   1367              folder[len]='\\';
   \   00000048   5C10A0E3           MOV      R1,#+92
   \   0000004C   0010C0E5           STRB     R1,[R0, #+0]
   1368              folder[len+1]=0;
   \   00000050   0010A0E3           MOV      R1,#+0
   \   00000054   0110C0E5           STRB     R1,[R0, #+1]
   1369            }
   1370            if(!isdir(folder, &err))
   \                     ??OpenArchive_1:
   \   00000058   0D10A0E1           MOV      R1,SP
   \   0000005C   410F8DE2           ADD      R0,SP,#+260
   \   00000060   910000EF           SWI      +145
   \   00000064   000050E3           CMP      R0,#+0
   \   00000068   0200001A           BNE      ??OpenArchive_2
   1371              mkdir(folder, &err);
   \   0000006C   0D10A0E1           MOV      R1,SP
   \   00000070   410F8DE2           ADD      R0,SP,#+260
   \   00000074   100000EF           SWI      +16
   1372            strcat(folder, FLDR_ARCHIVE);
   \                     ??OpenArchive_2:
   \   00000078   8C109FE5           LDR      R1,??OpenArchive_0+0x4  ;; FLDR_ARCHIVE
   \   0000007C   410F8DE2           ADD      R0,SP,#+260
   \   00000080   170000EF           SWI      +23
   1373            if(!isdir(folder, &err))
   \   00000084   0D10A0E1           MOV      R1,SP
   \   00000088   410F8DE2           ADD      R0,SP,#+260
   \   0000008C   910000EF           SWI      +145
   \   00000090   000050E3           CMP      R0,#+0
   \   00000094   0200001A           BNE      ??OpenArchive_3
   1374              mkdir(folder, &err);
   \   00000098   0D10A0E1           MOV      R1,SP
   \   0000009C   410F8DE2           ADD      R0,SP,#+260
   \   000000A0   100000EF           SWI      +16
   1375            if(!isdir(folder, &err))
   \                     ??OpenArchive_3:
   \   000000A4   0D10A0E1           MOV      R1,SP
   \   000000A8   410F8DE2           ADD      R0,SP,#+260
   \   000000AC   910000EF           SWI      +145
   \   000000B0   000050E3           CMP      R0,#+0
   \   000000B4   1100000A           BEQ      ??OpenArchive_4
   1376              return;
   1377            str_2ws(ws, folder, 128);
   \   000000B8   8020A0E3           MOV      R2,#+128
   \   000000BC   411F8DE2           ADD      R1,SP,#+260
   \   000000C0   0400A0E1           MOV      R0,R4
   \   000000C4   6C0100EF           SWI      +364
   1378            zeromem(&data,sizeof(NativeExplorerData));
   \   000000C8   6810A0E3           MOV      R1,#+104
   \   000000CC   610F8DE2           ADD      R0,SP,#+388
   \   000000D0   1D0100EF           SWI      +285
   1379            data.mode=0;
   \   000000D4   0010A0E3           MOV      R1,#+0
   \   000000D8   84118DE5           STR      R1,[SP, #+388]
   1380            data.dir_enum=0x26;
   \   000000DC   2610A0E3           MOV      R1,#+38
   \   000000E0   88118DE5           STR      R1,[SP, #+392]
   1381            data.path_to_file=ws;
   \   000000E4   8C418DE5           STR      R4,[SP, #+396]
   1382            data.is_exact_dir=1;
   \   000000E8   0100A0E3           MOV      R0,#+1
   \   000000EC   98018DE5           STR      R0,[SP, #+408]
   1383            data.full_filename=ws;
   \   000000F0   B0418DE5           STR      R4,[SP, #+432]
   1384            data.unk9=1;
   \   000000F4   A4018DE5           STR      R0,[SP, #+420]
   1385            StartNativeExplorer(&data);
   \   000000F8   610F8DE2           ADD      R0,SP,#+388
   \   000000FC   540200EF           SWI      +596
   1386          }
   \                     ??OpenArchive_4:
   \   00000100   80DF8DE2           ADD      SP,SP,#+512      ;; stack cleaning
   \   00000104   1080BDE8           POP      {R4,PC}          ;; return
   \                     ??OpenArchive_0:
   \   00000108   ........           DC32     CFG_MAIN_FOLDER
   \   0000010C   ........           DC32     FLDR_ARCHIVE

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable3:
   \   00000000   ........           DC32     lgp + 240

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable5:
   \   00000000   ........           DC32     PERCENT_T

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable17:
   \   00000000   ........           DC32     daemon_ipc

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable19:
   \   00000000   ........           DC32     CFG_ENA_NOTIFY

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable25:
   \   00000000   ........           DC32     cltop

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable26:
   \   00000000   ........           DC32     ConstructListN

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable27:
   \   00000000   ........           DC32     sdltop

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable28:
   \   00000000   ........           DC32     ReadAllSmsN

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable29:
   \   00000000   ........           DC32     daemon_ipc

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable32:
   \   00000000   ........           DC32     MyKeyHook

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable35:
   \   00000000   ........           DC32     daemon_ipc

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable36:
   \   00000000   ........           DC32     ElfKiller

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable37:
   \   00000000   ........           DC32     successed_config_filename

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable38:
   \   00000000   ........           DC32     lgp + 240

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for daemon_ipc>`:
   \   00000000   ............       DC32 my_ipc_name, my_ipc_name, 0H
   \              ....00000000
   \                     `?<Initializer for ipc_data_daemon>`:
   \   0000000C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \                     `?<Initializer for DAEMON_CSM_ID>`:
   \   00000018   00000000           DC32 0
   \                     `?<Initializer for SNEDSMS_CSM_ID>`:
   \   0000001C   00000000           DC32 0
   \                     `?<Initializer for IPC_SUB_MSG>`:
   \   00000020   00000000           DC32 0
   \                     `?<Initializer for num_from_ipc>`:
   \   00000024   00000000           DC32 0H
   \                     `?<Initializer for text_utf8>`:
   \   00000028   00000000           DC32 0H
   \                     `?<Initializer for opmsg_id>`:
   \   0000002C   00000000           DC32 0
   \                     `?<Initializer for text_ws>`:
   \   00000030   00000000           DC32 0H
   \                     `?<Initializer for is_fview>`:
   \   00000034   00000000           DC32 0
   \                     `?<Initializer for new_sms_n>`:
   \   00000038   00000000           DC32 0
   \                     `?<Initializer for DlgCsmIDs>`:
   \   0000003C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   0000004C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   0000005C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   0000006C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   0000007C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   0000008C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   0000009C   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000000AC   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \                     `?<Initializer for is_readall>`:
   \   000000BC   00000000           DC32 0
   \                     `?<Initializer for tindex>`:
   \   000000C0   00000000           DC32 0
   \                     `?<Initializer for isnewp>`:
   \   000000C4   00000000           DC32 0
   \                     `?<Initializer for sli_cnt>`:
   \   000000C8   00000000           DC32 0
   \                     `?<Initializer for sli_sta>`:
   \   000000CC   00000000           DC32 0
   \                     `?<Initializer for filename>`:
   \   000000D0   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              0000000000  
   \   000000E1   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   000000F1   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000101   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000111   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000121   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000131   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000141   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              000000      
   \                     `?<Initializer for dialogcsm_name_body>`:
   \   00000150   07004D007900       DC16 7, 77, 121, 83, 77, 83, 89, 83
   \              53004D005300
   \              59005300    
   \   00000160   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000170   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \   00000180   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \                     `?<Initializer for ld_tmr>`:
   \   00000190   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \                     `?<Initializer for chk_tmr>`:
   \   000001A0   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    
   \                     `?<Initializer for sli_tmr>`:
   \   000001B0   000000000000       DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              000000000000
   \              00000000    

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for dlg_ipc>`:
   \   00000000   ............       DC32 my_ipc_name, my_ipc_name, 0H
   \              ....00000000

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for main_menu_sk>`:
   \   00000000   18000000           DC16 24, 0
   \   00000004   FFFFFF7F           DC32 2147483647
   \   00000008   01000000           DC16 1, 0
   \   0000000C   FFFFFF7F           DC32 2147483647
   \   00000010   3D000000           DC16 61, 0
   \   00000014   FBC0FF7F           DC32 2147467515

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for main_menuhdr>`:
   \   00000000   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   00000008   00000000FFFF       DC32 0H, 2147483647, 2147483647
   \              FF7FFFFFFF7F

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for MENU_TEXT>`:
   \   00000000   FFFFFF7FFFFF       DC32 2147483647, 2147483647, 2147483647, 2147483647, 2147483647
   \              FF7FFFFFFF7F
   \              FFFFFF7FFFFF
   \              FF7F        
   \   00000014   FFFFFF7F           DC32 2147483647
   \                     `?<Initializer for MM_ITEM_ICONS>`:
   \   00000018   640500006405       DC32 1380, 1380, 1380, 1380, 1380, 1380, 1380, 0
   \              000064050000
   \              640500006405
   \              000064050000
   \              640500000000
   \              0000        

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for MM_HDR_ICONS>`:
   \   00000000   C50500000000       DC32 1477, 0
   \              0000        

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for oth_menuitems>`:
   \   00000000   00000000FFFF       DC32 0H, 2147483647, 2147483647, 0, 0H, 3, 1442, 0H, 2147483647
   \              FF7FFFFFFF7F
   \              000000000000
   \              000003000000
   \              A20500000000
   \              0000FFFFFF7F
   \   00000024   FFFFFF7F0000       DC32 2147483647, 0, 0H, 3, 1442, 0H, 2147483647, 2147483647, 0, 0H, 3
   \              000000000000
   \              03000000A205
   \              000000000000
   \              FFFFFF7FFFFF
   \              FF7F00000000
   \              000000000300
   \              0000        
   \   00000050   A20500000000       DC32 1442, 0H, 2147483647, 2147483647, 0, 0H, 3, 1442, 0H, 2147483647
   \              0000FFFFFF7F
   \              FFFFFF7F0000
   \              000000000000
   \              03000000A205
   \              000000000000
   \              FFFFFF7F    
   \   00000078   FFFFFF7F0000       DC32 2147483647, 0, 0H, 3, 1442, 0H, 2147483647, 2147483647, 0, 0H, 3
   \              000000000000
   \              03000000A205
   \              000000000000
   \              FFFFFF7FFFFF
   \              FF7F00000000
   \              000000000300
   \              0000        
   \   000000A4   A20500000000       DC32 1442, 0H, 2147483647, 2147483647, 0, 0H, 3, 1442, 0H, 2147483647
   \              0000FFFFFF7F
   \              FFFFFF7F0000
   \              000000000000
   \              03000000A205
   \              000000000000
   \              FFFFFF7F    
   \   000000CC   FFFFFF7F0000       DC32 2147483647, 0, 0H, 3, 1442
   \              000000000000
   \              03000000A205
   \              0000        

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for oth_menuhdr>`:
   \   00000000   000000000000       DC16 0, 0, 0, 0
   \              0000        
   \   00000008   00000000FFFF       DC32 0H, 2147483647, 2147483647
   \              FF7FFFFFFF7F

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "SMS\\\\EMS_Admin.dat">`:
   \   00000000   534D535C454D       DC8 "SMS\\EMS_Admin.dat"
   \              535F41646D69
   \              6E2E64617400
   \   00000012   0000               DC8 0, 0
   \   00000014   534D535C534D       DC8 "SMS\\SMS.dat"
   \              532E64617400
   1387          
   1388          

   Maximum stack usage in bytes:

     Function            CSTACK
     --------            ------
     CreateDialogCSM        56
     CreateMainMenu         16
     CreateOthMenu          16
     DoNewProc              12
     ElfKiller               4
     FreeCsmd                4
     InitDatPath            28
     InitSetting             4
     IsCsmExist             12
     IsHaveDlgGuiOnTop      12
     IsNoDlg                 0
     IsSSOnTop               8
     LdProc                  4
     OpenArchive           520
     OpenConfig              8
     SLI_PROC                8
     STOP_SLI                8
     SendSimpleIpcMsg        4
     UpdateDaemonCSMname     4
     UpdateDlgCsmName       12
     UpdateNProc             8
     addCSMid                0
     addCSMidForced0        12
     addIconBar              4
     closeAllDlgCSM         12
     daemoncsm_onclose       8
     daemoncsm_oncreate      8
     daemoncsm_onmessage    36
     delCSMid                0
     dialogcsm_onclose      12
     dialogcsm_oncreate     20
     dialogcsm_onmessage     0
     dlgIDsInit              0
     isTheLastDlg            0
     main                   56
     main_menu_ghook        16
     main_menu_itemhndl     36
     main_menu_onkey        12
     mm_draftsms             4
     mm_insms_all            4
     mm_insms_n              4
     mm_insms_r              4
     mm_newsms               4
     mm_oth                  4
     mm_outsms               4
     oth_about               4
     oth_cov_dat_txt         4
     oth_del_all             4
     oth_menu_config         4
     oth_menu_ghook          4
     oth_move_all_mss       68
     oth_open_archive        4
     oth_save_one_txt        4
     oth_show_count          8


   Segment part sizes:

     Function/Label                 Bytes
     --------------                 -----
     DIALOG_CSM_ID                     4
     DIALOG_GUI_ID                     4
     SMS_INDEX                         4
     ipc_data_dlg                      4
     minus11                           4
     sms_dat                         256
     dlgIDsInit                       36
     addCSMid                         44
     addCSMidForced0                  28
     delCSMid                         40
     closeAllDlgCSM                   52
     IsNoDlg                          40
     IsCsmExist                       68
     IsHaveDlgGuiOnTop               104
     isTheLastDlg                      8
     smp_ipc                          12
     SendSimpleIpcMsg                 40
     main_menusoftkeys                12
     main_menu_skt                     8
     mm_newsms                        16
     mm_insms_n                       20
     mm_insms_r                       20
     mm_insms_all                     20
     mm_outsms                        20
     mm_draftsms                      20
     mm_oth                           16
     procs_mmenu                      24
     main_menu_onkey                 232
     MM_FORMAT                         8
     main_menu_itemhndl              244
     main_menu_ghook                 112
     main_menu                        44
     CreateMainMenu                  112
     dialogcsm_onmessage              48
     UpdateDlgCsmName                 72
     dialogcsm_oncreate              608
     FreeCsmd                         12
     dialogcsm_onclose                60
     DIALOGCSM                        60
     CreateDialogCSM                 180
     my_ipc_n                         12
     DoNewProc                       132
     UpdateNProc                      92
     InitDatPath                     176
     InitSetting                      16
     daemon_ipc                      448
     dlg_ipc                          12
     main_menu_sk                     24
     main_menuhdr                     20
     MENU_TEXT                        56
     MM_HDR_ICONS                      8
     STOP_SLI                         36
     SLI_PROC                        104
     IsSSOnTop                        92
     daemoncsm_onmessage            1352
     LdProc                           56
     daemoncsm_oncreate              132
     ElfKiller                        28
     daemoncsm_onclose                72
     daemoncsm_name_body              64
     addIconBar                       92
     DAEMONCSM                        72
     UpdateDaemonCSMname              28
     main                            232
     oth_menu_skt                      8
     OpenConfig                       64
     oth_menu_config                  20
     oth_save_one_txt                 28
     oth_move_all_mss                 64
     oth_open_archive                 20
     oth_about                        32
     oth_cov_dat_txt                  28
     oth_del_all                      20
     oth_show_count                   44
     oth_menuprocs                    32
     oth_menuitems                   224
     oth_menu_ghook                   36
     oth_menu                         44
     oth_menuhdr                      20
     CreateOthMenu                    88
     OpenArchive                     272
     ??DataTable3                      4
     ??DataTable5                      4
     ??DataTable17                     4
     ??DataTable19                     4
     ??DataTable25                     4
     ??DataTable26                     4
     ??DataTable27                     4
     ??DataTable28                     4
     ??DataTable29                     4
     ??DataTable32                     4
     ??DataTable35                     4
     ??DataTable36                     4
     ??DataTable37                     4
     ??DataTable38                     4
     ?<Initializer for daemon_ipc>   448
     ?<Initializer for dlg_ipc>       12
     ?<Initializer for main_menu_sk>
                                      24
     ?<Initializer for main_menuhdr>
                                      20
     ?<Initializer for MENU_TEXT>     56
     ?<Initializer for MM_HDR_ICONS>
                                       8
     ?<Initializer for oth_menuitems>
                                     224
     ?<Initializer for oth_menuhdr>   20
     ?<Constant "SMS\\EMS_Admin.dat">
                                      32
      Others                         624

 
 6 284 bytes in segment CODE
   372 bytes in segment DATA_C
   812 bytes in segment DATA_I
   812 bytes in segment DATA_ID
   336 bytes in segment DATA_Z
    24 bytes in segment INITTAB
 
 5 684 bytes of CODE  memory (+ 624 bytes shared)
 1 184 bytes of CONST memory
 1 148 bytes of DATA  memory

Errors: none
Warnings: none
